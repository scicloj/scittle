(function(){
shadow$provide[7]=function(D,y,Q,p){console.warn('Scripts "build/three.js" and "build/three.min.js" are deprecated with r150+, and will be removed with r160. Please use ES Modules or alternatives: https://threejs.org/docs/index.html#manual/en/introduction/Installation');(function(u,q){"object"===typeof p&&"undefined"!==typeof Q?q(p):"function"===typeof define&&define.amd?define(["exports"],q):(u="undefined"!==typeof globalThis?globalThis:u||self,q(u.THREE={}))})(this,function(u){function q(){const a=
4294967295*Math.random()|0,b=4294967295*Math.random()|0,h=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Zc[a&255]+Zc[a>>8&255]+Zc[a>>16&255]+Zc[a>>24&255]+"-"+Zc[b&255]+Zc[b>>8&255]+"-"+Zc[b>>16&15|64]+Zc[b>>24&255]+"-"+Zc[h&63|128]+Zc[h>>8&255]+"-"+Zc[h>>16&255]+Zc[h>>24&255]+Zc[n&255]+Zc[n>>8&255]+Zc[n>>16&255]+Zc[n>>24&255]).toLowerCase()}function m(a,b,h){return Math.max(b,Math.min(h,a))}function c(a,b){return(a%b+b)%b}function f(a,b,h){return(1-h)*a+h*b}function e(a){return 0===
(a&a-1)&&0!==a}function g(a){return Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function k(a){return Math.pow(2,Math.floor(Math.log(a)/Math.LN2))}function l(a,b){switch(b.constructor){case Float32Array:return a;case Uint16Array:return a/65535;case Uint8Array:return a/255;case Int16Array:return Math.max(a/32767,-1);case Int8Array:return Math.max(a/127,-1);default:throw Error("Invalid component type.");}}function r(a,b){switch(b.constructor){case Float32Array:return a;case Uint16Array:return Math.round(65535*
a);case Uint8Array:return Math.round(255*a);case Int16Array:return Math.round(32767*a);case Int8Array:return Math.round(127*a);default:throw Error("Invalid component type.");}}function v(a){for(let b=a.length-1;0<=b;--b)if(65535<=a[b])return!0;return!1}function w(a){return document.createElementNS("http://www.w3.org/1999/xhtml",a)}function z(a){return.04045>a?.0773993808*a:Math.pow(.9478672986*a+.0521327014,2.4)}function A(a){return.0031308>a?12.92*a:1.055*Math.pow(a,.41666)-.055}function H(a){if("undefined"!==
typeof HTMLImageElement&&a instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&a instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&a instanceof ImageBitmap)return Hh.getDataURL(a);if(a.data)return{data:Array.from(a.data),width:a.width,height:a.height,type:a.data.constructor.name};console.warn("THREE.Texture: Unable to serialize Texture.");return{}}function F(a,b,h,n,t){for(let C=0,G=a.length-3;C<=G;C+=3){Pe.fromArray(a,C);const I=t.x*Math.abs(Pe.x)+t.y*Math.abs(Pe.y)+
t.z*Math.abs(Pe.z),K=b.dot(Pe),M=h.dot(Pe),T=n.dot(Pe);if(Math.max(-Math.max(K,M,T),Math.min(K,M,T))>I)return!1}return!0}function L(a,b,h){0>h&&(h+=1);1<h&&--h;return h<1/6?a+6*(b-a)*h:.5>h?b:h<2/3?a+6*(b-a)*(2/3-h):a}function N(a,b,h,n,t,C,G,I,K){a.getVertexPosition(G,Qf);a.getVertexPosition(I,Rf);a.getVertexPosition(K,Sf);var M=Qf,T=Rf,U=Sf,V=Ih;null===(1===b.side?n.intersectTriangle(U,T,M,!0,V):n.intersectTriangle(M,T,U,0===b.side,V))?a=null:(vg.copy(V),vg.applyMatrix4(a.matrixWorld),b=h.ray.origin.distanceTo(vg),
a=b<h.near||b>h.far?null:{distance:b,point:vg.clone(),object:a});a&&(t&&(wg.fromBufferAttribute(t,G),xg.fromBufferAttribute(t,I),yg.fromBufferAttribute(t,K),a.uv=Qd.getUV(Ih,Qf,Rf,Sf,wg,xg,yg,new La)),C&&(wg.fromBufferAttribute(C,G),xg.fromBufferAttribute(C,I),yg.fromBufferAttribute(C,K),a.uv2=Qd.getUV(Ih,Qf,Rf,Sf,wg,xg,yg,new La)),t={a:G,b:I,c:K,normal:new ka,materialIndex:0},Qd.getNormal(Qf,Rf,Sf,t.normal),a.face=t);return a}function R(a){const b={};for(const h in a){b[h]={};for(const n in a[h]){const t=
a[h][n];t&&(t.isColor||t.isMatrix3||t.isMatrix4||t.isVector2||t.isVector3||t.isVector4||t.isTexture||t.isQuaternion)?b[h][n]=t.clone():Array.isArray(t)?b[h][n]=t.slice():b[h][n]=t}}return b}function J(a){const b={};for(let h=0;h<a.length;h++){const n=R(a[h]);for(const t in n)b[t]=n[t]}return b}function Y(a){return null===a.getRenderTarget()?3001===a.outputEncoding?"srgb":"srgb-linear":"srgb-linear"}function fa(){function a(C,G){n(C,G);t=b.requestAnimationFrame(a)}let b=null,h=!1,n=null,t=null;return{start:function(){!0!==
h&&null!==n&&(t=b.requestAnimationFrame(a),h=!0)},stop:function(){b.cancelAnimationFrame(t);h=!1},setAnimationLoop:function(C){n=C},setContext:function(C){b=C}}}function Z(a,b){const h=b.isWebGL2,n=new WeakMap;return{get:function(t){t.isInterleavedBufferAttribute&&(t=t.data);return n.get(t)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const C=n.get(t);C&&(a.deleteBuffer(C.buffer),n.delete(t))},update:function(t,C){if(t.isGLBufferAttribute)C=n.get(t),(!C||C.version<t.version)&&n.set(t,
{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version});else{t.isInterleavedBufferAttribute&&(t=t.data);var G=n.get(t);if(void 0===G){G=n.set;var I=t,K=t.array;const T=t.usage;var M=a.createBuffer();a.bindBuffer(C,M);a.bufferData(C,K,T);t.onUploadCallback();if(K instanceof Float32Array)C=a.FLOAT;else if(K instanceof Uint16Array)if(t.isFloat16BufferAttribute)if(h)C=a.HALF_FLOAT;else throw Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else C=
a.UNSIGNED_SHORT;else if(K instanceof Int16Array)C=a.SHORT;else if(K instanceof Uint32Array)C=a.UNSIGNED_INT;else if(K instanceof Int32Array)C=a.INT;else if(K instanceof Int8Array)C=a.BYTE;else if(K instanceof Uint8Array)C=a.UNSIGNED_BYTE;else if(K instanceof Uint8ClampedArray)C=a.UNSIGNED_BYTE;else throw Error("THREE.WebGLAttributes: Unsupported buffer data format: "+K);G.call(n,I,{buffer:M,type:C,bytesPerElement:K.BYTES_PER_ELEMENT,version:t.version})}else G.version<t.version&&(I=t,K=I.array,M=
I.updateRange,a.bindBuffer(C,G.buffer),-1===M.count?a.bufferSubData(C,0,K):(h?a.bufferSubData(C,M.offset*K.BYTES_PER_ELEMENT,K,M.offset,M.count):a.bufferSubData(C,M.offset*K.BYTES_PER_ELEMENT,K.subarray(M.offset,M.offset+M.count)),M.count=-1),I.onUploadCallback(),G.version=t.version)}}}}function da(a,b,h,n,t,C,G){function I(S,ea){S.getRGB(zg,Y(a));n.buffers.color.setClear(zg.r,zg.g,zg.b,ea,G)}const K=new wb(0);let M=!0===C?0:1,T,U,V=null,ba=0,aa=null;return{getClearColor:function(){return K},setClearColor:function(S,
ea=1){K.set(S);M=ea;I(K,M)},getClearAlpha:function(){return M},setClearAlpha:function(S){M=S;I(K,M)},render:function(S,ea){let va=!1,ma=!0===ea.isScene?ea.background:null;ma&&ma.isTexture&&(ma=(0<ea.backgroundBlurriness?h:b).get(ma));var wa=a.xr;(wa=wa.getSession&&wa.getSession())&&"additive"===wa.environmentBlendMode&&(ma=null);null===ma?I(K,M):ma&&ma.isColor&&(I(ma,1),va=!0);(a.autoClear||va)&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil);if(ma&&(ma.isCubeTexture||306===ma.mapping)){void 0===
U&&(U=new dd(new Qe(1,1,1),new de({name:"BackgroundCubeMaterial",uniforms:R(Rd.backgroundCube.uniforms),vertexShader:Rd.backgroundCube.vertexShader,fragmentShader:Rd.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),U.geometry.deleteAttribute("normal"),U.geometry.deleteAttribute("uv"),U.onBeforeRender=function(Ea,ua,Qa){this.matrixWorld.copyPosition(Qa.matrixWorld)},Object.defineProperty(U.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),t.update(U));
U.material.uniforms.envMap.value=ma;U.material.uniforms.flipEnvMap.value=ma.isCubeTexture&&!1===ma.isRenderTargetTexture?-1:1;U.material.uniforms.backgroundBlurriness.value=ea.backgroundBlurriness;U.material.uniforms.backgroundIntensity.value=ea.backgroundIntensity;U.material.toneMapped=3001===ma.encoding?!1:!0;if(V!==ma||ba!==ma.version||aa!==a.toneMapping)U.material.needsUpdate=!0,V=ma,ba=ma.version,aa=a.toneMapping;U.layers.enableAll();S.unshift(U,U.geometry,U.material,0,0,null)}else if(ma&&ma.isTexture){void 0===
T&&(T=new dd(new Tf(2,2),new de({name:"BackgroundMaterial",uniforms:R(Rd.background.uniforms),vertexShader:Rd.background.vertexShader,fragmentShader:Rd.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),T.geometry.deleteAttribute("normal"),Object.defineProperty(T.material,"map",{get:function(){return this.uniforms.t2D.value}}),t.update(T));T.material.uniforms.t2D.value=ma;T.material.uniforms.backgroundIntensity.value=ea.backgroundIntensity;T.material.toneMapped=3001===ma.encoding?
!1:!0;!0===ma.matrixAutoUpdate&&ma.updateMatrix();T.material.uniforms.uvTransform.value.copy(ma.matrix);if(V!==ma||ba!==ma.version||aa!==a.toneMapping)T.material.needsUpdate=!0,V=ma,ba=ma.version,aa=a.toneMapping;T.layers.enableAll();S.unshift(T,T.geometry,T.material,0,0,null)}}}}function la(a,b,h,n){function t(ua){return n.isWebGL2?a.bindVertexArray(ua):S.bindVertexArrayOES(ua)}function C(ua){return n.isWebGL2?a.deleteVertexArray(ua):S.deleteVertexArrayOES(ua)}function G(ua){const Qa=[],ya=[],Ha=
[];for(let Ka=0;Ka<aa;Ka++)Qa[Ka]=0,ya[Ka]=0,Ha[Ka]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Qa,enabledAttributes:ya,attributeDivisors:Ha,object:ua,attributes:{},index:null}}function I(){const ua=wa.newAttributes;for(let Qa=0,ya=ua.length;Qa<ya;Qa++)ua[Qa]=0}function K(ua){M(ua,0)}function M(ua,Qa){const ya=wa.enabledAttributes,Ha=wa.attributeDivisors;wa.newAttributes[ua]=1;0===ya[ua]&&(a.enableVertexAttribArray(ua),ya[ua]=1);Ha[ua]!==Qa&&((n.isWebGL2?a:b.get("ANGLE_instanced_arrays"))[n.isWebGL2?
"vertexAttribDivisor":"vertexAttribDivisorANGLE"](ua,Qa),Ha[ua]=Qa)}function T(){const ua=wa.newAttributes,Qa=wa.enabledAttributes;for(let ya=0,Ha=Qa.length;ya<Ha;ya++)Qa[ya]!==ua[ya]&&(a.disableVertexAttribArray(ya),Qa[ya]=0)}function U(ua,Qa,ya,Ha,Ka,Ia){!0!==n.isWebGL2||ya!==a.INT&&ya!==a.UNSIGNED_INT?a.vertexAttribPointer(ua,Qa,ya,Ha,Ka,Ia):a.vertexAttribIPointer(ua,Qa,ya,Ka,Ia)}function V(){ba();Ea=!0;wa!==ma&&(wa=ma,t(wa.object))}function ba(){ma.geometry=null;ma.program=null;ma.wireframe=!1}
const aa=a.getParameter(a.MAX_VERTEX_ATTRIBS),S=n.isWebGL2?null:b.get("OES_vertex_array_object"),ea=n.isWebGL2||null!==S,va={},ma=G(null);let wa=ma,Ea=!1;return{setup:function(ua,Qa,ya,Ha,Ka){var Ia=!1;if(ea){Ia=!0===Qa.wireframe;var gb=va[Ha.id];void 0===gb&&(gb={},va[Ha.id]=gb);var Za=gb[ya.id];void 0===Za&&(Za={},gb[ya.id]=Za);gb=Za[Ia];void 0===gb&&(gb=G(n.isWebGL2?a.createVertexArray():S.createVertexArrayOES()),Za[Ia]=gb);Ia=gb;wa!==Ia&&(wa=Ia,t(wa.object));a:{Ia=wa.attributes;Za=Ha.attributes;
gb=0;var db=ya.getAttributes();for(var bb in db)if(0<=db[bb].location){var rb=Ia[bb],Bb=Za[bb];void 0===Bb&&("instanceMatrix"===bb&&ua.instanceMatrix&&(Bb=ua.instanceMatrix),"instanceColor"===bb&&ua.instanceColor&&(Bb=ua.instanceColor));if(void 0===rb||rb.attribute!==Bb||Bb&&rb.data!==Bb.data){Ia=!0;break a}gb++}Ia=wa.attributesNum!==gb||wa.index!==Ka?!0:!1}if(Ia){bb={};Za=Ha.attributes;gb=0;db=ya.getAttributes();for(var Kb in db)0<=db[Kb].location&&(rb=Za[Kb],void 0===rb&&("instanceMatrix"===Kb&&
ua.instanceMatrix&&(rb=ua.instanceMatrix),"instanceColor"===Kb&&ua.instanceColor&&(rb=ua.instanceColor)),Bb={},(Bb.attribute=rb)&&rb.data&&(Bb.data=rb.data),bb[Kb]=Bb,gb++);wa.attributes=bb;wa.attributesNum=gb;wa.index=Ka}}else if(Kb=!0===Qa.wireframe,wa.geometry!==Ha.id||wa.program!==ya.id||wa.wireframe!==Kb)wa.geometry=Ha.id,wa.program=ya.id,wa.wireframe=Kb,Ia=!0;null!==Ka&&h.update(Ka,a.ELEMENT_ARRAY_BUFFER);if(Ia||Ea){Ea=!1;if(!1!==n.isWebGL2||!ua.isInstancedMesh&&!Ha.isInstancedBufferGeometry||
null!==b.get("ANGLE_instanced_arrays")){I();Kb=Ha.attributes;ya=ya.getAttributes();Qa=Qa.defaultAttributeValues;for(const nb in ya)if(bb=ya[nb],0<=bb.location){var Tb=Kb[nb];void 0===Tb&&("instanceMatrix"===nb&&ua.instanceMatrix&&(Tb=ua.instanceMatrix),"instanceColor"===nb&&ua.instanceColor&&(Tb=ua.instanceColor));if(void 0!==Tb){if(Ia=Tb.normalized,Za=Tb.itemSize,db=h.get(Tb),void 0!==db)if(rb=db.buffer,gb=db.type,db=db.bytesPerElement,Tb.isInterleavedBufferAttribute){var eb=Tb.data;Bb=eb.stride;
Tb=Tb.offset;if(eb.isInstancedInterleavedBuffer){for(let qb=0;qb<bb.locationSize;qb++)M(bb.location+qb,eb.meshPerAttribute);!0!==ua.isInstancedMesh&&void 0===Ha._maxInstanceCount&&(Ha._maxInstanceCount=eb.meshPerAttribute*eb.count)}else for(eb=0;eb<bb.locationSize;eb++)K(bb.location+eb);a.bindBuffer(a.ARRAY_BUFFER,rb);for(rb=0;rb<bb.locationSize;rb++)U(bb.location+rb,Za/bb.locationSize,gb,Ia,Bb*db,(Tb+Za/bb.locationSize*rb)*db)}else{if(Tb.isInstancedBufferAttribute){for(Bb=0;Bb<bb.locationSize;Bb++)M(bb.location+
Bb,Tb.meshPerAttribute);!0!==ua.isInstancedMesh&&void 0===Ha._maxInstanceCount&&(Ha._maxInstanceCount=Tb.meshPerAttribute*Tb.count)}else for(Bb=0;Bb<bb.locationSize;Bb++)K(bb.location+Bb);a.bindBuffer(a.ARRAY_BUFFER,rb);for(rb=0;rb<bb.locationSize;rb++)U(bb.location+rb,Za/bb.locationSize,gb,Ia,Za*db,Za/bb.locationSize*rb*db)}}else if(void 0!==Qa&&(Ia=Qa[nb],void 0!==Ia))switch(Ia.length){case 2:a.vertexAttrib2fv(bb.location,Ia);break;case 3:a.vertexAttrib3fv(bb.location,Ia);break;case 4:a.vertexAttrib4fv(bb.location,
Ia);break;default:a.vertexAttrib1fv(bb.location,Ia)}}T()}null!==Ka&&a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,h.get(Ka).buffer)}},reset:V,resetDefaultState:ba,dispose:function(){V();for(const ua in va){const Qa=va[ua];for(const ya in Qa){const Ha=Qa[ya];for(const Ka in Ha)C(Ha[Ka].object),delete Ha[Ka];delete Qa[ya]}delete va[ua]}},releaseStatesOfGeometry:function(ua){if(void 0!==va[ua.id]){var Qa=va[ua.id];for(const ya in Qa){const Ha=Qa[ya];for(const Ka in Ha)C(Ha[Ka].object),delete Ha[Ka];delete Qa[ya]}delete va[ua.id]}},
releaseStatesOfProgram:function(ua){for(const Qa in va){const ya=va[Qa];if(void 0===ya[ua.id])continue;const Ha=ya[ua.id];for(const Ka in Ha)C(Ha[Ka].object),delete Ha[Ka];delete ya[ua.id]}},initAttributes:I,enableAttribute:K,disableUnusedAttributes:T}}function W(a,b,h,n){const t=n.isWebGL2;let C;this.setMode=function(G){C=G};this.render=function(G,I){a.drawArrays(C,G,I);h.update(I,C,1)};this.renderInstances=function(G,I,K){if(0!==K){if(t){var M=a;var T="drawArraysInstanced"}else if(M=b.get("ANGLE_instanced_arrays"),
T="drawArraysInstancedANGLE",null===M){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}M[T](C,G,I,K);h.update(I,C,K)}}}function ra(a,b,h){function n(Ea){if("highp"===Ea){if(0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision)return"highp";Ea="mediump"}return"mediump"===Ea&&0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,
a.MEDIUM_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision?"mediump":"lowp"}let t;const C="undefined"!==typeof WebGL2RenderingContext&&a instanceof WebGL2RenderingContext;let G=void 0!==h.precision?h.precision:"highp";var I=n(G);I!==G&&(console.warn("THREE.WebGLRenderer:",G,"not supported, using",I,"instead."),G=I);I=C||b.has("WEBGL_draw_buffers");h=!0===h.logarithmicDepthBuffer;const K=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),M=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
T=a.getParameter(a.MAX_TEXTURE_SIZE),U=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),V=a.getParameter(a.MAX_VERTEX_ATTRIBS),ba=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),aa=a.getParameter(a.MAX_VARYING_VECTORS),S=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),ea=0<M,va=C||b.has("OES_texture_float"),ma=ea&&va,wa=C?a.getParameter(a.MAX_SAMPLES):0;return{isWebGL2:C,drawBuffers:I,getMaxAnisotropy:function(){if(void 0!==t)return t;if(!0===b.has("EXT_texture_filter_anisotropic")){const Ea=b.get("EXT_texture_filter_anisotropic");
t=a.getParameter(Ea.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else t=0;return t},getMaxPrecision:n,precision:G,logarithmicDepthBuffer:h,maxTextures:K,maxVertexTextures:M,maxTextureSize:T,maxCubemapSize:U,maxAttributes:V,maxVertexUniforms:ba,maxVaryings:aa,maxFragmentUniforms:S,vertexTextures:ea,floatFragmentTextures:va,floatVertexTextures:ma,maxSamples:wa}}function za(a){function b(T,U,V,ba){const aa=null!==T?T.length:0;let S=null;if(0!==aa){S=M.value;if(!0!==ba||null===S){ba=V+4*aa;U=U.matrixWorldInverse;
K.getNormalMatrix(U);if(null===S||S.length<ba)S=new Float32Array(ba);for(let ea=0,va=V;ea!==aa;++ea,va+=4)I.copy(T[ea]).applyMatrix4(U,K),I.normal.toArray(S,va),S[va+3]=I.constant}M.value=S;M.needsUpdate=!0}h.numPlanes=aa;h.numIntersection=0;return S}const h=this;let n=null,t=0,C=!1,G=!1;const I=new Ce,K=new xb,M={value:null,needsUpdate:!1};this.uniform=M;this.numIntersection=this.numPlanes=0;this.init=function(T,U){const V=0!==T.length||U||0!==t||C;C=U;t=T.length;return V};this.beginShadows=function(){G=
!0;b(null)};this.endShadows=function(){G=!1};this.setGlobalState=function(T,U){n=b(T,U,0)};this.setState=function(T,U,V){const ba=T.clippingPlanes,aa=T.clipIntersection;var S=T.clipShadows;T=a.get(T);if(!C||null===ba||0===ba.length||G&&!S)G?b(null):(M.value!==n&&(M.value=n,M.needsUpdate=0<t),h.numPlanes=t,h.numIntersection=0);else{S=G?0:t;const ea=4*S;let va=T.clippingState||null;M.value=va;va=b(ba,U,ea,V);for(U=0;U!==ea;++U)va[U]=n[U];T.clippingState=va;this.numIntersection=aa?this.numPlanes:0;this.numPlanes+=
S}}}function O(a){function b(t,C){303===C?t.mapping=301:304===C&&(t.mapping=302);return t}function h(t){t=t.target;t.removeEventListener("dispose",h);const C=n.get(t);void 0!==C&&(n.delete(t),C.dispose())}let n=new WeakMap;return{get:function(t){if(t&&t.isTexture&&!1===t.isRenderTargetTexture){var C=t.mapping;if(303===C||304===C)return n.has(t)?(C=n.get(t).texture,b(C,t.mapping)):(C=t.image)&&0<C.height?(C=new Ri(C.height/2),C.fromEquirectangularTexture(a,t),n.set(t,C),t.addEventListener("dispose",
h),b(C.texture,t.mapping)):null}return t},dispose:function(){n=new WeakMap}}}function pa(a,b,h){a=new Sd(a,b,h);a.texture.mapping=306;a.texture.name="PMREM.cubeUv";a.scissorTest=!0;return a}function Ta(a,b,h,n,t){a.viewport.set(b,h,n,t);a.scissor.set(b,h,n,t)}function na(){return new de({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Wa(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include \x3ccommon\x3e\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection \x3d normalize( vOutputDirection );\n\t\t\t\tvec2 uv \x3d equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor \x3d vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1})}function Ra(){return new de({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Wa(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor \x3d textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1})}function Wa(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv \x3d 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction \x3d vec3( uv, 1.0 );\n\n\t\t\tif ( face \x3d\x3d 0.0 ) {\n\n\t\t\t\tdirection \x3d direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face \x3d\x3d 1.0 ) {\n\n\t\t\t\tdirection \x3d direction.xzy;\n\t\t\t\tdirection.xz *\x3d -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face \x3d\x3d 2.0 ) {\n\n\t\t\t\tdirection.x *\x3d -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face \x3d\x3d 3.0 ) {\n\n\t\t\t\tdirection \x3d direction.zyx;\n\t\t\t\tdirection.xz *\x3d -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face \x3d\x3d 4.0 ) {\n\n\t\t\t\tdirection \x3d direction.xzy;\n\t\t\t\tdirection.xy *\x3d -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face \x3d\x3d 5.0 ) {\n\n\t\t\t\tdirection.z *\x3d -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection \x3d getDirection( uv, faceIndex );\n\t\t\tgl_Position \x3d vec4( position, 1.0 );\n\n\t\t}\n\t"}
function Xa(a){function b(t){t=t.target;t.removeEventListener("dispose",b);const C=h.get(t);void 0!==C&&(h.delete(t),C.dispose())}let h=new WeakMap,n=null;return{get:function(t){if(t&&t.isTexture){var C=t.mapping,G=303===C||304===C,I=301===C||302===C;if(G||I){if(t.isRenderTargetTexture&&!0===t.needsPMREMUpdate)return t.needsPMREMUpdate=!1,C=h.get(t),null===n&&(n=new Jh(a)),C=G?n.fromEquirectangular(t,C):n.fromCubemap(t,C),h.set(t,C),C.texture;if(h.has(t))return h.get(t).texture;C=t.image;var K;if(!(K=
G&&C&&0<C.height)&&(K=I&&C)){K=0;for(I=0;6>I;I++)void 0!==C[I]&&K++;K=6===K}return K?(null===n&&(n=new Jh(a)),G=G?n.fromEquirectangular(t):n.fromCubemap(t),h.set(t,G),t.addEventListener("dispose",b),G.texture):null}}return t},dispose:function(){h=new WeakMap;null!==n&&(n.dispose(),n=null)}}}function Ob(a){function b(n){if(void 0!==h[n])return h[n];let t;switch(n){case "WEBGL_depth_texture":t=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");
break;case "EXT_texture_filter_anisotropic":t=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":t=a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case "WEBGL_compressed_texture_pvrtc":t=a.getExtension("WEBGL_compressed_texture_pvrtc")||
a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:t=a.getExtension(n)}return h[n]=t}const h={};return{has:function(n){return null!==b(n)},init:function(n){n.isWebGL2?b("EXT_color_buffer_float"):(b("WEBGL_depth_texture"),b("OES_texture_float"),b("OES_texture_half_float"),b("OES_texture_half_float_linear"),b("OES_standard_derivatives"),b("OES_element_index_uint"),b("OES_vertex_array_object"),b("ANGLE_instanced_arrays"));b("OES_texture_float_linear");b("EXT_color_buffer_half_float");
b("WEBGL_multisampled_render_to_texture")},get:function(n){const t=b(n);null===t&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported.");return t}}}function Db(a,b,h,n){function t(K){K=K.target;null!==K.index&&b.remove(K.index);for(var M in K.attributes)b.remove(K.attributes[M]);K.removeEventListener("dispose",t);delete G[K.id];if(M=I.get(K))b.remove(M),I.delete(K);n.releaseStatesOfGeometry(K);!0===K.isInstancedBufferGeometry&&delete K._maxInstanceCount;h.memory.geometries--}function C(K){var M=
[],T=K.index,U=K.attributes.position;if(null!==T){U=T.array;T=T.version;for(let aa=0,S=U.length;aa<S;aa+=3){var V=U[aa+0],ba=U[aa+1];const ea=U[aa+2];M.push(V,ba,ba,ea,ea,V)}}else{V=U.array;T=U.version;for(let aa=0,S=V.length/3-1;aa<S;aa+=3)U=aa+0,V=aa+1,ba=aa+2,M.push(U,V,V,ba,ba,U)}M=new (v(M)?Kh:Lh)(M,1);M.version=T;(T=I.get(K))&&b.remove(T);I.set(K,M)}const G={},I=new WeakMap;return{get:function(K,M){if(!0===G[M.id])return M;M.addEventListener("dispose",t);G[M.id]=!0;h.memory.geometries++;return M},
update:function(K){var M=K.attributes;for(const T in M)b.update(M[T],a.ARRAY_BUFFER);K=K.morphAttributes;for(const T in K){M=K[T];for(let U=0,V=M.length;U<V;U++)b.update(M[U],a.ARRAY_BUFFER)}},getWireframeAttribute:function(K){const M=I.get(K);if(M){const T=K.index;null!==T&&M.version<T.version&&C(K)}else C(K);return I.get(K)}}}function Gb(a,b,h,n){const t=n.isWebGL2;let C,G,I;this.setMode=function(K){C=K};this.setIndex=function(K){G=K.type;I=K.bytesPerElement};this.render=function(K,M){a.drawElements(C,
M,G,K*I);h.update(M,C,1)};this.renderInstances=function(K,M,T){if(0!==T){if(t){var U=a;var V="drawElementsInstanced"}else if(U=b.get("ANGLE_instanced_arrays"),V="drawElementsInstancedANGLE",null===U){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}U[V](C,M,G,K*I,T);h.update(M,C,T)}}}function ec(a){const b={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},
render:b,programs:null,autoReset:!0,reset:function(){b.frame++;b.calls=0;b.triangles=0;b.points=0;b.lines=0},update:function(h,n,t){b.calls++;switch(n){case a.TRIANGLES:b.triangles+=h/3*t;break;case a.LINES:b.lines+=h/2*t;break;case a.LINE_STRIP:b.lines+=t*(h-1);break;case a.LINE_LOOP:b.lines+=t*h;break;case a.POINTS:b.points+=t*h;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function ob(a,b){return a[0]-b[0]}function Sb(a,b){return Math.abs(b[1])-Math.abs(a[1])}function Pb(a,
b,h){const n={},t=new Float32Array(8),C=new WeakMap,G=new zc,I=[];for(let K=0;8>K;K++)I[K]=[K,0];return{update:function(K,M,T){K=K.morphTargetInfluences;if(!0===b.isWebGL2){var U=M.morphAttributes.position||M.morphAttributes.normal||M.morphAttributes.color;U=void 0!==U?U.length:0;var V=C.get(M);if(void 0===V||V.count!==U){void 0!==V&&V.texture.dispose();V=void 0!==M.morphAttributes.position;var ba=void 0!==M.morphAttributes.normal,aa=void 0!==M.morphAttributes.color,S=M.morphAttributes.position||
[];const va=M.morphAttributes.normal||[],ma=M.morphAttributes.color||[];var ea=0;!0===V&&(ea=1);!0===ba&&(ea=2);!0===aa&&(ea=3);let wa=M.attributes.position.count*ea,Ea=1;wa>b.maxTextureSize&&(Ea=Math.ceil(wa/b.maxTextureSize),wa=b.maxTextureSize);const ua=new Float32Array(wa*Ea*4*U),Qa=new Ag(ua,wa,Ea,U);Qa.type=1015;Qa.needsUpdate=!0;ea*=4;for(let Ha=0;Ha<U;Ha++){const Ka=S[Ha],Ia=va[Ha],gb=ma[Ha],Za=wa*Ea*4*Ha;for(let db=0;db<Ka.count;db++){const bb=db*ea;!0===V&&(G.fromBufferAttribute(Ka,db),
ua[Za+bb+0]=G.x,ua[Za+bb+1]=G.y,ua[Za+bb+2]=G.z,ua[Za+bb+3]=0);!0===ba&&(G.fromBufferAttribute(Ia,db),ua[Za+bb+4]=G.x,ua[Za+bb+5]=G.y,ua[Za+bb+6]=G.z,ua[Za+bb+7]=0);!0===aa&&(G.fromBufferAttribute(gb,db),ua[Za+bb+8]=G.x,ua[Za+bb+9]=G.y,ua[Za+bb+10]=G.z,ua[Za+bb+11]=4===gb.itemSize?G.w:1)}}V={count:U,texture:Qa,size:new La(wa,Ea)};C.set(M,V);function ya(){Qa.dispose();C.delete(M);M.removeEventListener("dispose",ya)}M.addEventListener("dispose",ya)}U=0;for(ba=0;ba<K.length;ba++)U+=K[ba];U=M.morphTargetsRelative?
1:1-U;T.getUniforms().setValue(a,"morphTargetBaseInfluence",U);T.getUniforms().setValue(a,"morphTargetInfluences",K);T.getUniforms().setValue(a,"morphTargetsTexture",V.texture,h);T.getUniforms().setValue(a,"morphTargetsTextureSize",V.size)}else{U=void 0===K?0:K.length;V=n[M.id];if(void 0===V||V.length!==U){V=[];for(ba=0;ba<U;ba++)V[ba]=[ba,0];n[M.id]=V}for(ba=0;ba<U;ba++)aa=V[ba],aa[0]=ba,aa[1]=K[ba];V.sort(Sb);for(K=0;8>K;K++)K<U&&V[K][1]?(I[K][0]=V[K][0],I[K][1]=V[K][1]):(I[K][0]=Number.MAX_SAFE_INTEGER,
I[K][1]=0);I.sort(ob);K=M.morphAttributes.position;U=M.morphAttributes.normal;V=0;for(ba=0;8>ba;ba++)S=I[ba],aa=S[0],S=S[1],aa!==Number.MAX_SAFE_INTEGER&&S?(K&&M.getAttribute("morphTarget"+ba)!==K[aa]&&M.setAttribute("morphTarget"+ba,K[aa]),U&&M.getAttribute("morphNormal"+ba)!==U[aa]&&M.setAttribute("morphNormal"+ba,U[aa]),t[ba]=S,V+=S):(K&&!0===M.hasAttribute("morphTarget"+ba)&&M.deleteAttribute("morphTarget"+ba),U&&!0===M.hasAttribute("morphNormal"+ba)&&M.deleteAttribute("morphNormal"+ba),t[ba]=
0);K=M.morphTargetsRelative?1:1-V;T.getUniforms().setValue(a,"morphTargetBaseInfluence",K);T.getUniforms().setValue(a,"morphTargetInfluences",t)}}}}function bc(a,b,h,n){function t(G){G=G.target;G.removeEventListener("dispose",t);h.remove(G.instanceMatrix);null!==G.instanceColor&&h.remove(G.instanceColor)}let C=new WeakMap;return{update:function(G){const I=n.render.frame,K=b.get(G,G.geometry);C.get(K)!==I&&(b.update(K),C.set(K,I));G.isInstancedMesh&&(!1===G.hasEventListener("dispose",t)&&G.addEventListener("dispose",
t),h.update(G.instanceMatrix,a.ARRAY_BUFFER),null!==G.instanceColor&&h.update(G.instanceColor,a.ARRAY_BUFFER));return K},dispose:function(){C=new WeakMap}}}function pc(a,b,h){const n=a[0];if(0>=n||0<n)return a;const t=b*h;let C=Si[t];void 0===C&&(C=new Float32Array(t),Si[t]=C);if(0!==b){n.toArray(C,0);for(let G=1,I=0;G!==b;++G)I+=h,a[G].toArray(C,I)}return C}function Eb(a,b){if(a.length!==b.length)return!1;for(let h=0,n=a.length;h<n;h++)if(a[h]!==b[h])return!1;return!0}function hb(a,b){for(let h=
0,n=b.length;h<n;h++)a[h]=b[h]}function Mb(a,b){let h=Ti[b];void 0===h&&(h=new Int32Array(b),Ti[b]=h);for(let n=0;n!==b;++n)h[n]=a.allocateTextureUnit();return h}function yc(a,b){const h=this.cache;h[0]!==b&&(a.uniform1f(this.addr,b),h[0]=b)}function xa(a,b){const h=this.cache;if(void 0!==b.x){if(h[0]!==b.x||h[1]!==b.y)a.uniform2f(this.addr,b.x,b.y),h[0]=b.x,h[1]=b.y}else Eb(h,b)||(a.uniform2fv(this.addr,b),hb(h,b))}function jb(a,b){const h=this.cache;if(void 0!==b.x){if(h[0]!==b.x||h[1]!==b.y||h[2]!==
b.z)a.uniform3f(this.addr,b.x,b.y,b.z),h[0]=b.x,h[1]=b.y,h[2]=b.z}else if(void 0!==b.r){if(h[0]!==b.r||h[1]!==b.g||h[2]!==b.b)a.uniform3f(this.addr,b.r,b.g,b.b),h[0]=b.r,h[1]=b.g,h[2]=b.b}else Eb(h,b)||(a.uniform3fv(this.addr,b),hb(h,b))}function cb(a,b){const h=this.cache;if(void 0!==b.x){if(h[0]!==b.x||h[1]!==b.y||h[2]!==b.z||h[3]!==b.w)a.uniform4f(this.addr,b.x,b.y,b.z,b.w),h[0]=b.x,h[1]=b.y,h[2]=b.z,h[3]=b.w}else Eb(h,b)||(a.uniform4fv(this.addr,b),hb(h,b))}function Ub(a,b){const h=this.cache,
n=b.elements;void 0===n?Eb(h,b)||(a.uniformMatrix2fv(this.addr,!1,b),hb(h,b)):Eb(h,n)||(Ui.set(n),a.uniformMatrix2fv(this.addr,!1,Ui),hb(h,n))}function fc(a,b){const h=this.cache,n=b.elements;void 0===n?Eb(h,b)||(a.uniformMatrix3fv(this.addr,!1,b),hb(h,b)):Eb(h,n)||(Vi.set(n),a.uniformMatrix3fv(this.addr,!1,Vi),hb(h,n))}function Fa(a,b){const h=this.cache,n=b.elements;void 0===n?Eb(h,b)||(a.uniformMatrix4fv(this.addr,!1,b),hb(h,b)):Eb(h,n)||(Wi.set(n),a.uniformMatrix4fv(this.addr,!1,Wi),hb(h,n))}
function vb(a,b){const h=this.cache;h[0]!==b&&(a.uniform1i(this.addr,b),h[0]=b)}function Wb(a,b){const h=this.cache;if(void 0!==b.x){if(h[0]!==b.x||h[1]!==b.y)a.uniform2i(this.addr,b.x,b.y),h[0]=b.x,h[1]=b.y}else Eb(h,b)||(a.uniform2iv(this.addr,b),hb(h,b))}function Ic(a,b){const h=this.cache;if(void 0!==b.x){if(h[0]!==b.x||h[1]!==b.y||h[2]!==b.z)a.uniform3i(this.addr,b.x,b.y,b.z),h[0]=b.x,h[1]=b.y,h[2]=b.z}else Eb(h,b)||(a.uniform3iv(this.addr,b),hb(h,b))}function Cc(a,b){const h=this.cache;if(void 0!==
b.x){if(h[0]!==b.x||h[1]!==b.y||h[2]!==b.z||h[3]!==b.w)a.uniform4i(this.addr,b.x,b.y,b.z,b.w),h[0]=b.x,h[1]=b.y,h[2]=b.z,h[3]=b.w}else Eb(h,b)||(a.uniform4iv(this.addr,b),hb(h,b))}function nd(a,b){const h=this.cache;h[0]!==b&&(a.uniform1ui(this.addr,b),h[0]=b)}function Kd(a,b){const h=this.cache;if(void 0!==b.x){if(h[0]!==b.x||h[1]!==b.y)a.uniform2ui(this.addr,b.x,b.y),h[0]=b.x,h[1]=b.y}else Eb(h,b)||(a.uniform2uiv(this.addr,b),hb(h,b))}function Uc(a,b){const h=this.cache;if(void 0!==b.x){if(h[0]!==
b.x||h[1]!==b.y||h[2]!==b.z)a.uniform3ui(this.addr,b.x,b.y,b.z),h[0]=b.x,h[1]=b.y,h[2]=b.z}else Eb(h,b)||(a.uniform3uiv(this.addr,b),hb(h,b))}function Vc(a,b){const h=this.cache;if(void 0!==b.x){if(h[0]!==b.x||h[1]!==b.y||h[2]!==b.z||h[3]!==b.w)a.uniform4ui(this.addr,b.x,b.y,b.z,b.w),h[0]=b.x,h[1]=b.y,h[2]=b.z,h[3]=b.w}else Eb(h,b)||(a.uniform4uiv(this.addr,b),hb(h,b))}function Ad(a,b,h){const n=this.cache,t=h.allocateTextureUnit();n[0]!==t&&(a.uniform1i(this.addr,t),n[0]=t);h.setTexture2D(b||Xi,
t)}function Jd(a,b,h){const n=this.cache,t=h.allocateTextureUnit();n[0]!==t&&(a.uniform1i(this.addr,t),n[0]=t);h.setTexture3D(b||Yi,t)}function hd(a,b,h){const n=this.cache,t=h.allocateTextureUnit();n[0]!==t&&(a.uniform1i(this.addr,t),n[0]=t);h.setTextureCube(b||Zi,t)}function zd(a,b,h){const n=this.cache,t=h.allocateTextureUnit();n[0]!==t&&(a.uniform1i(this.addr,t),n[0]=t);h.setTexture2DArray(b||$i,t)}function Yb(a){switch(a){case 5126:return yc;case 35664:return xa;case 35665:return jb;case 35666:return cb;
case 35674:return Ub;case 35675:return fc;case 35676:return Fa;case 5124:case 35670:return vb;case 35667:case 35671:return Wb;case 35668:case 35672:return Ic;case 35669:case 35673:return Cc;case 5125:return nd;case 36294:return Kd;case 36295:return Uc;case 36296:return Vc;case 35678:case 36198:case 36298:case 36306:case 35682:return Ad;case 35679:case 36299:case 36307:return Jd;case 35680:case 36300:case 36308:case 36293:return hd;case 36289:case 36303:case 36311:case 36292:return zd}}function bd(a,
b){a.uniform1fv(this.addr,b)}function md(a,b){b=pc(b,this.size,2);a.uniform2fv(this.addr,b)}function td(a,b){b=pc(b,this.size,3);a.uniform3fv(this.addr,b)}function Vb(a,b){b=pc(b,this.size,4);a.uniform4fv(this.addr,b)}function Xb(a,b){b=pc(b,this.size,4);a.uniformMatrix2fv(this.addr,!1,b)}function Ld(a,b){b=pc(b,this.size,9);a.uniformMatrix3fv(this.addr,!1,b)}function Md(a,b){b=pc(b,this.size,16);a.uniformMatrix4fv(this.addr,!1,b)}function Bd(a,b){a.uniform1iv(this.addr,b)}function od(a,b){a.uniform2iv(this.addr,
b)}function Ja(a,b){a.uniform3iv(this.addr,b)}function pd(a,b){a.uniform4iv(this.addr,b)}function Zb(a,b){a.uniform1uiv(this.addr,b)}function Mc(a,b){a.uniform2uiv(this.addr,b)}function cd(a,b){a.uniform3uiv(this.addr,b)}function Ec(a,b){a.uniform4uiv(this.addr,b)}function ab(a,b,h){const n=this.cache,t=b.length,C=Mb(h,t);Eb(n,C)||(a.uniform1iv(this.addr,C),hb(n,C));for(a=0;a!==t;++a)h.setTexture2D(b[a]||Xi,C[a])}function xc(a,b,h){const n=this.cache,t=b.length,C=Mb(h,t);Eb(n,C)||(a.uniform1iv(this.addr,
C),hb(n,C));for(a=0;a!==t;++a)h.setTexture3D(b[a]||Yi,C[a])}function Ua(a,b,h){const n=this.cache,t=b.length,C=Mb(h,t);Eb(n,C)||(a.uniform1iv(this.addr,C),hb(n,C));for(a=0;a!==t;++a)h.setTextureCube(b[a]||Zi,C[a])}function Jb(a,b,h){const n=this.cache,t=b.length,C=Mb(h,t);Eb(n,C)||(a.uniform1iv(this.addr,C),hb(n,C));for(a=0;a!==t;++a)h.setTexture2DArray(b[a]||$i,C[a])}function Ac(a){switch(a){case 5126:return bd;case 35664:return md;case 35665:return td;case 35666:return Vb;case 35674:return Xb;case 35675:return Ld;
case 35676:return Md;case 5124:case 35670:return Bd;case 35667:case 35671:return od;case 35668:case 35672:return Ja;case 35669:case 35673:return pd;case 5125:return Zb;case 36294:return Mc;case 36295:return cd;case 36296:return Ec;case 35678:case 36198:case 36298:case 36306:case 35682:return ab;case 35679:case 36299:case 36307:return xc;case 35680:case 36300:case 36308:case 36293:return Ua;case 36289:case 36303:case 36311:case 36292:return Jb}}function Jc(a,b,h){b=a.createShader(b);a.shaderSource(b,
h);a.compileShader(b);return b}function Yd(a,b,h){var n=a.getShaderParameter(b,a.COMPILE_STATUS),t=a.getShaderInfoLog(b).trim();if(n&&""===t)return"";if(n=/ERROR: 0:(\d+)/.exec(t)){n=parseInt(n[1]);h=h.toUpperCase()+"\n\n"+t+"\n\n";b=a.getShaderSource(b);a=n;b=b.split("\n");t=[];var C=Math.max(a-6,0);for(n=Math.min(a+6,b.length);C<n;C++){const G=C+1;t.push(`${G===a?"\x3e":" "} ${G}: ${b[C]}`)}a=t.join("\n");return h+a}return t}function oc(a,b){a:switch(b){case 3E3:b=["Linear","( value )"];break a;
case 3001:b=["sRGB","( value )"];break a;default:console.warn("THREE.WebGLProgram: Unsupported encoding:",b),b=["Linear","( value )"]}return"vec4 "+a+"( vec4 value ) { return LinearTo"+b[0]+b[1]+"; }"}function Cd(a,b){switch(b){case 1:b="Linear";break;case 2:b="Reinhard";break;case 3:b="OptimizedCineon";break;case 4:b="ACESFilmic";break;case 5:b="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",b),b="Linear"}return"vec3 "+a+"( vec3 color ) { return "+b+"ToneMapping( color ); }"}
function Ae(a){const b=[];for(const h in a){const n=a[h];!1!==n&&b.push("#define "+h+" "+n)}return b.join("\n")}function Qb(a){return""!==a}function Dd(a,b){const h=b.numSpotLightShadows+b.numSpotLightMaps-b.numSpotLightShadowsWithMaps;return a.replace(/NUM_DIR_LIGHTS/g,b.numDirLights).replace(/NUM_SPOT_LIGHTS/g,b.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,b.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,h).replace(/NUM_RECT_AREA_LIGHTS/g,b.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,b.numPointLights).replace(/NUM_HEMI_LIGHTS/g,
b.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,b.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,b.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,b.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,b.numPointLightShadows)}function Zd(a,b){return a.replace(/NUM_CLIPPING_PLANES/g,b.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,b.numClippingPlanes-b.numClipIntersection)}function wd(a,b){a=cc[b];if(void 0===a)throw Error("Can not resolve #include \x3c"+b+
"\x3e");return a.replace(Mh,wd)}function $d(a,b,h,n){a="";for(b=parseInt(b);b<parseInt(h);b++)a+=n.replace(/\[\s*i\s*\]/g,"[ "+b+" ]").replace(/UNROLLED_LOOP_INDEX/g,b);return a}function mb(a){let b="precision "+a.precision+" float;\nprecision "+a.precision+" int;";"highp"===a.precision?b+="\n#define HIGH_PRECISION":"mediump"===a.precision?b+="\n#define MEDIUM_PRECISION":"lowp"===a.precision&&(b+="\n#define LOW_PRECISION");return b}function ie(a){let b="SHADOWMAP_TYPE_BASIC";1===a.shadowMapType?b=
"SHADOWMAP_TYPE_PCF":2===a.shadowMapType?b="SHADOWMAP_TYPE_PCF_SOFT":3===a.shadowMapType&&(b="SHADOWMAP_TYPE_VSM");return b}function ke(a){let b="ENVMAP_TYPE_CUBE";if(a.envMap)switch(a.envMapMode){case 301:case 302:b="ENVMAP_TYPE_CUBE";break;case 306:b="ENVMAP_TYPE_CUBE_UV"}return b}function Gc(a){let b="ENVMAP_MODE_REFLECTION";if(a.envMap)switch(a.envMapMode){case 302:b="ENVMAP_MODE_REFRACTION"}return b}function je(a){let b="ENVMAP_BLENDING_NONE";if(a.envMap)switch(a.combine){case 0:b="ENVMAP_BLENDING_MULTIPLY";
break;case 1:b="ENVMAP_BLENDING_MIX";break;case 2:b="ENVMAP_BLENDING_ADD"}return b}function ae(a){a=a.envMapCubeUVHeight;if(null===a)return null;const b=Math.log2(a)-2;return{texelWidth:1/(3*Math.max(Math.pow(2,b),112)),texelHeight:1/a,maxMip:b}}function ic(a,b,h,n){const t=a.getContext();var C=h.defines,G=h.vertexShader,I=h.fragmentShader,K=ie(h),M=ke(h),T=Gc(h),U=je(h),V=ae(h),ba=h.isWebGL2?"":[h.extensionDerivatives||h.envMapCubeUVHeight||h.bumpMap||h.tangentSpaceNormalMap||h.clearcoatNormalMap||
h.flatShading||"physical"===h.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(h.extensionFragDepth||h.logarithmicDepthBuffer)&&h.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",h.extensionDrawBuffers&&h.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(h.extensionShaderTextureLOD||h.envMap||h.transmission)&&h.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Qb).join("\n");const aa=Ae(C),S=t.createProgram();
var ea=h.glslVersion?"#version "+h.glslVersion+"\n":"";h.isRawShaderMaterial?(C=[aa].filter(Qb).join("\n"),0<C.length&&(C+="\n"),K=[ba,aa].filter(Qb).join("\n"),0<K.length&&(K+="\n")):(C=[mb(h),"#define SHADER_NAME "+h.shaderName,aa,h.instancing?"#define USE_INSTANCING":"",h.instancingColor?"#define USE_INSTANCING_COLOR":"",h.supportsVertexTextures?"#define VERTEX_TEXTURES":"",h.useFog&&h.fog?"#define USE_FOG":"",h.useFog&&h.fogExp2?"#define FOG_EXP2":"",h.map?"#define USE_MAP":"",h.envMap?"#define USE_ENVMAP":
"",h.envMap?"#define "+T:"",h.lightMap?"#define USE_LIGHTMAP":"",h.aoMap?"#define USE_AOMAP":"",h.emissiveMap?"#define USE_EMISSIVEMAP":"",h.bumpMap?"#define USE_BUMPMAP":"",h.normalMap?"#define USE_NORMALMAP":"",h.normalMap&&h.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",h.normalMap&&h.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",h.clearcoatMap?"#define USE_CLEARCOATMAP":"",h.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",h.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":
"",h.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",h.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",h.displacementMap&&h.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",h.specularMap?"#define USE_SPECULARMAP":"",h.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",h.specularColorMap?"#define USE_SPECULARCOLORMAP":"",h.roughnessMap?"#define USE_ROUGHNESSMAP":"",h.metalnessMap?"#define USE_METALNESSMAP":"",h.alphaMap?"#define USE_ALPHAMAP":"",h.transmission?"#define USE_TRANSMISSION":
"",h.transmissionMap?"#define USE_TRANSMISSIONMAP":"",h.thicknessMap?"#define USE_THICKNESSMAP":"",h.sheenColorMap?"#define USE_SHEENCOLORMAP":"",h.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",h.vertexTangents?"#define USE_TANGENT":"",h.vertexColors?"#define USE_COLOR":"",h.vertexAlphas?"#define USE_COLOR_ALPHA":"",h.vertexUvs?"#define USE_UV":"",h.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",h.flatShading?"#define FLAT_SHADED":"",h.skinning?"#define USE_SKINNING":"",h.morphTargets?"#define USE_MORPHTARGETS":
"",h.morphNormals&&!1===h.flatShading?"#define USE_MORPHNORMALS":"",h.morphColors&&h.isWebGL2?"#define USE_MORPHCOLORS":"",0<h.morphTargetsCount&&h.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",0<h.morphTargetsCount&&h.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+h.morphTextureStride:"",0<h.morphTargetsCount&&h.isWebGL2?"#define MORPHTARGETS_COUNT "+h.morphTargetsCount:"",h.doubleSided?"#define DOUBLE_SIDED":"",h.flipSided?"#define FLIP_SIDED":"",h.shadowMapEnabled?"#define USE_SHADOWMAP":"",h.shadowMapEnabled?
"#define "+K:"",h.sizeAttenuation?"#define USE_SIZEATTENUATION":"",h.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",h.logarithmicDepthBuffer&&h.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR",
"\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) \x26\x26 ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;",
"\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Qb).join("\n"),K=[ba,mb(h),"#define SHADER_NAME "+h.shaderName,
aa,h.useFog&&h.fog?"#define USE_FOG":"",h.useFog&&h.fogExp2?"#define FOG_EXP2":"",h.map?"#define USE_MAP":"",h.matcap?"#define USE_MATCAP":"",h.envMap?"#define USE_ENVMAP":"",h.envMap?"#define "+M:"",h.envMap?"#define "+T:"",h.envMap?"#define "+U:"",V?"#define CUBEUV_TEXEL_WIDTH "+V.texelWidth:"",V?"#define CUBEUV_TEXEL_HEIGHT "+V.texelHeight:"",V?"#define CUBEUV_MAX_MIP "+V.maxMip+".0":"",h.lightMap?"#define USE_LIGHTMAP":"",h.aoMap?"#define USE_AOMAP":"",h.emissiveMap?"#define USE_EMISSIVEMAP":
"",h.bumpMap?"#define USE_BUMPMAP":"",h.normalMap?"#define USE_NORMALMAP":"",h.normalMap&&h.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",h.normalMap&&h.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",h.clearcoat?"#define USE_CLEARCOAT":"",h.clearcoatMap?"#define USE_CLEARCOATMAP":"",h.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",h.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",h.iridescence?"#define USE_IRIDESCENCE":"",h.iridescenceMap?"#define USE_IRIDESCENCEMAP":
"",h.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",h.specularMap?"#define USE_SPECULARMAP":"",h.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",h.specularColorMap?"#define USE_SPECULARCOLORMAP":"",h.roughnessMap?"#define USE_ROUGHNESSMAP":"",h.metalnessMap?"#define USE_METALNESSMAP":"",h.alphaMap?"#define USE_ALPHAMAP":"",h.alphaTest?"#define USE_ALPHATEST":"",h.sheen?"#define USE_SHEEN":"",h.sheenColorMap?"#define USE_SHEENCOLORMAP":"",h.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":
"",h.transmission?"#define USE_TRANSMISSION":"",h.transmissionMap?"#define USE_TRANSMISSIONMAP":"",h.thicknessMap?"#define USE_THICKNESSMAP":"",h.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",h.vertexTangents?"#define USE_TANGENT":"",h.vertexColors||h.instancingColor?"#define USE_COLOR":"",h.vertexAlphas?"#define USE_COLOR_ALPHA":"",h.vertexUvs?"#define USE_UV":"",h.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",h.gradientMap?"#define USE_GRADIENTMAP":"",h.flatShading?"#define FLAT_SHADED":"",
h.doubleSided?"#define DOUBLE_SIDED":"",h.flipSided?"#define FLIP_SIDED":"",h.shadowMapEnabled?"#define USE_SHADOWMAP":"",h.shadowMapEnabled?"#define "+K:"",h.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",h.useLegacyLights?"#define LEGACY_LIGHTS":"",h.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",h.logarithmicDepthBuffer&&h.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==h.toneMapping?
"#define TONE_MAPPING":"",0!==h.toneMapping?cc.tonemapping_pars_fragment:"",0!==h.toneMapping?Cd("toneMapping",h.toneMapping):"",h.dithering?"#define DITHERING":"",h.opaque?"#define OPAQUE":"",cc.encodings_pars_fragment,oc("linearToOutputTexel",h.outputEncoding),h.useDepthPacking?"#define DEPTH_PACKING "+h.depthPacking:"","\n"].filter(Qb).join("\n"));G=G.replace(Mh,wd);G=Dd(G,h);G=Zd(G,h);I=I.replace(Mh,wd);I=Dd(I,h);I=Zd(I,h);G=G.replace(aj,$d);I=I.replace(aj,$d);h.isWebGL2&&!0!==h.isRawShaderMaterial&&
(ea="#version 300 es\n",C="precision mediump sampler2DArray;\n#define attribute in\n#define varying out\n#define texture2D texture\n"+C,K=["#define varying in","300 es"===h.glslVersion?"":"layout(location \x3d 0) out highp vec4 pc_fragColor;","300 es"===h.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad"].join("\n")+
"\n"+K);I=ea+K+I;G=Jc(t,t.VERTEX_SHADER,ea+C+G);I=Jc(t,t.FRAGMENT_SHADER,I);t.attachShader(S,G);t.attachShader(S,I);void 0!==h.index0AttributeName?t.bindAttribLocation(S,0,h.index0AttributeName):!0===h.morphTargets&&t.bindAttribLocation(S,0,"position");t.linkProgram(S);if(a.debug.checkShaderErrors){a=t.getProgramInfoLog(S).trim();ea=t.getShaderInfoLog(G).trim();M=t.getShaderInfoLog(I).trim();U=T=!0;if(!1===t.getProgramParameter(S,t.LINK_STATUS))T=!1,V=Yd(t,G,"vertex"),ba=Yd(t,I,"fragment"),console.error("THREE.WebGLProgram: Shader Error "+
t.getError()+" - VALIDATE_STATUS "+t.getProgramParameter(S,t.VALIDATE_STATUS)+"\n\nProgram Info Log: "+a+"\n"+V+"\n"+ba);else if(""!==a)console.warn("THREE.WebGLProgram: Program Info Log:",a);else if(""===ea||""===M)U=!1;U&&(this.diagnostics={runnable:T,programLog:a,vertexShader:{log:ea,prefix:C},fragmentShader:{log:M,prefix:K}})}t.deleteShader(G);t.deleteShader(I);let va;this.getUniforms=function(){void 0===va&&(va=new Bg(t,S));return va};let ma;this.getAttributes=function(){if(void 0===ma){const wa=
{},Ea=t.getProgramParameter(S,t.ACTIVE_ATTRIBUTES);for(let ua=0;ua<Ea;ua++){const Qa=t.getActiveAttrib(S,ua),ya=Qa.name;let Ha=1;Qa.type===t.FLOAT_MAT2&&(Ha=2);Qa.type===t.FLOAT_MAT3&&(Ha=3);Qa.type===t.FLOAT_MAT4&&(Ha=4);wa[ya]={type:Qa.type,location:t.getAttribLocation(S,ya),locationSize:Ha}}ma=wa}return ma};this.destroy=function(){n.releaseStatesOfProgram(this);t.deleteProgram(S);this.program=void 0};this.name=h.shaderName;this.id=Uk++;this.cacheKey=b;this.usedTimes=1;this.program=S;this.vertexShader=
G;this.fragmentShader=I;return this}function id(a,b,h,n,t,C,G){const I=new Cg,K=new Vk,M=[],T=t.isWebGL2,U=t.logarithmicDepthBuffer,V=t.vertexTextures;let ba=t.precision;const aa={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",
PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(S,ea,va,ma,wa){const Ea=ma.fog,ua=wa.geometry;ma=S.isMeshStandardMaterial?ma.environment:null;const Qa=(ma=(S.isMeshStandardMaterial?h:b).get(S.envMap||ma))&&306===ma.mapping?ma.image.height:null,ya=aa[S.type];null!==S.precision&&(ba=t.getMaxPrecision(S.precision),ba!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",ba,"instead."));var Ha=ua.morphAttributes.position||
ua.morphAttributes.normal||ua.morphAttributes.color;Ha=void 0!==Ha?Ha.length:0;let Ka=0;void 0!==ua.morphAttributes.position&&(Ka=1);void 0!==ua.morphAttributes.normal&&(Ka=2);void 0!==ua.morphAttributes.color&&(Ka=3);let Ia;let gb,Za;if(ya){var db=Rd[ya];Ia=db.vertexShader;db=db.fragmentShader}else Ia=S.vertexShader,db=S.fragmentShader,K.update(S),gb=K.getVertexShaderID(S),Za=K.getFragmentShaderID(S);const bb=a.getRenderTarget(),rb=0<S.clearcoat,Bb=0<S.iridescence;return{isWebGL2:T,shaderID:ya,shaderName:S.type,
vertexShader:Ia,fragmentShader:db,defines:S.defines,customVertexShaderID:gb,customFragmentShaderID:Za,isRawShaderMaterial:!0===S.isRawShaderMaterial,glslVersion:S.glslVersion,precision:ba,instancing:!0===wa.isInstancedMesh,instancingColor:!0===wa.isInstancedMesh&&null!==wa.instanceColor,supportsVertexTextures:V,outputEncoding:null===bb?a.outputEncoding:!0===bb.isXRRenderTarget?bb.texture.encoding:3E3,map:!!S.map,matcap:!!S.matcap,envMap:!!ma,envMapMode:ma&&ma.mapping,envMapCubeUVHeight:Qa,lightMap:!!S.lightMap,
aoMap:!!S.aoMap,emissiveMap:!!S.emissiveMap,bumpMap:!!S.bumpMap,normalMap:!!S.normalMap,objectSpaceNormalMap:1===S.normalMapType,tangentSpaceNormalMap:0===S.normalMapType,decodeVideoTexture:!!S.map&&!0===S.map.isVideoTexture&&3001===S.map.encoding,clearcoat:rb,clearcoatMap:rb&&!!S.clearcoatMap,clearcoatRoughnessMap:rb&&!!S.clearcoatRoughnessMap,clearcoatNormalMap:rb&&!!S.clearcoatNormalMap,iridescence:Bb,iridescenceMap:Bb&&!!S.iridescenceMap,iridescenceThicknessMap:Bb&&!!S.iridescenceThicknessMap,
displacementMap:!!S.displacementMap,roughnessMap:!!S.roughnessMap,metalnessMap:!!S.metalnessMap,specularMap:!!S.specularMap,specularIntensityMap:!!S.specularIntensityMap,specularColorMap:!!S.specularColorMap,opaque:!1===S.transparent&&1===S.blending,alphaMap:!!S.alphaMap,alphaTest:0<S.alphaTest,gradientMap:!!S.gradientMap,sheen:0<S.sheen,sheenColorMap:!!S.sheenColorMap,sheenRoughnessMap:!!S.sheenRoughnessMap,transmission:0<S.transmission,transmissionMap:!!S.transmissionMap,thicknessMap:!!S.thicknessMap,
combine:S.combine,vertexTangents:!!S.normalMap&&!!ua.attributes.tangent,vertexColors:S.vertexColors,vertexAlphas:!0===S.vertexColors&&!!ua.attributes.color&&4===ua.attributes.color.itemSize,vertexUvs:!!S.map||!!S.bumpMap||!!S.normalMap||!!S.specularMap||!!S.alphaMap||!!S.emissiveMap||!!S.roughnessMap||!!S.metalnessMap||!!S.clearcoatMap||!!S.clearcoatRoughnessMap||!!S.clearcoatNormalMap||!!S.iridescenceMap||!!S.iridescenceThicknessMap||!!S.displacementMap||!!S.transmissionMap||!!S.thicknessMap||!!S.specularIntensityMap||
!!S.specularColorMap||!!S.sheenColorMap||!!S.sheenRoughnessMap,uvsVertexOnly:!(S.map||S.bumpMap||S.normalMap||S.specularMap||S.alphaMap||S.emissiveMap||S.roughnessMap||S.metalnessMap||S.clearcoatNormalMap||S.iridescenceMap||S.iridescenceThicknessMap||0<S.transmission||S.transmissionMap||S.thicknessMap||S.specularIntensityMap||S.specularColorMap||0<S.sheen||S.sheenColorMap||S.sheenRoughnessMap)&&!!S.displacementMap,fog:!!Ea,useFog:!0===S.fog,fogExp2:Ea&&Ea.isFogExp2,flatShading:!!S.flatShading,sizeAttenuation:S.sizeAttenuation,
logarithmicDepthBuffer:U,skinning:!0===wa.isSkinnedMesh,morphTargets:void 0!==ua.morphAttributes.position,morphNormals:void 0!==ua.morphAttributes.normal,morphColors:void 0!==ua.morphAttributes.color,morphTargetsCount:Ha,morphTextureStride:Ka,numDirLights:ea.directional.length,numPointLights:ea.point.length,numSpotLights:ea.spot.length,numSpotLightMaps:ea.spotLightMap.length,numRectAreaLights:ea.rectArea.length,numHemiLights:ea.hemi.length,numDirLightShadows:ea.directionalShadowMap.length,numPointLightShadows:ea.pointShadowMap.length,
numSpotLightShadows:ea.spotShadowMap.length,numSpotLightShadowsWithMaps:ea.numSpotLightShadowsWithMaps,numClippingPlanes:G.numPlanes,numClipIntersection:G.numIntersection,dithering:S.dithering,shadowMapEnabled:a.shadowMap.enabled&&0<va.length,shadowMapType:a.shadowMap.type,toneMapping:S.toneMapped?a.toneMapping:0,useLegacyLights:a.useLegacyLights,premultipliedAlpha:S.premultipliedAlpha,doubleSided:2===S.side,flipSided:1===S.side,useDepthPacking:!!S.depthPacking,depthPacking:S.depthPacking||0,index0AttributeName:S.index0AttributeName,
extensionDerivatives:S.extensions&&S.extensions.derivatives,extensionFragDepth:S.extensions&&S.extensions.fragDepth,extensionDrawBuffers:S.extensions&&S.extensions.drawBuffers,extensionShaderTextureLOD:S.extensions&&S.extensions.shaderTextureLOD,rendererExtensionFragDepth:T||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:T||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:T||n.has("EXT_shader_texture_lod"),customProgramCacheKey:S.customProgramCacheKey()}},getProgramCacheKey:function(S){const ea=
[];S.shaderID?ea.push(S.shaderID):(ea.push(S.customVertexShaderID),ea.push(S.customFragmentShaderID));if(void 0!==S.defines)for(const va in S.defines)ea.push(va),ea.push(S.defines[va]);!1===S.isRawShaderMaterial&&(ea.push(S.precision),ea.push(S.outputEncoding),ea.push(S.envMapMode),ea.push(S.envMapCubeUVHeight),ea.push(S.combine),ea.push(S.vertexUvs),ea.push(S.fogExp2),ea.push(S.sizeAttenuation),ea.push(S.morphTargetsCount),ea.push(S.morphAttributeCount),ea.push(S.numDirLights),ea.push(S.numPointLights),
ea.push(S.numSpotLights),ea.push(S.numSpotLightMaps),ea.push(S.numHemiLights),ea.push(S.numRectAreaLights),ea.push(S.numDirLightShadows),ea.push(S.numPointLightShadows),ea.push(S.numSpotLightShadows),ea.push(S.numSpotLightShadowsWithMaps),ea.push(S.shadowMapType),ea.push(S.toneMapping),ea.push(S.numClippingPlanes),ea.push(S.numClipIntersection),ea.push(S.depthPacking),I.disableAll(),S.isWebGL2&&I.enable(0),S.supportsVertexTextures&&I.enable(1),S.instancing&&I.enable(2),S.instancingColor&&I.enable(3),
S.map&&I.enable(4),S.matcap&&I.enable(5),S.envMap&&I.enable(6),S.lightMap&&I.enable(7),S.aoMap&&I.enable(8),S.emissiveMap&&I.enable(9),S.bumpMap&&I.enable(10),S.normalMap&&I.enable(11),S.objectSpaceNormalMap&&I.enable(12),S.tangentSpaceNormalMap&&I.enable(13),S.clearcoat&&I.enable(14),S.clearcoatMap&&I.enable(15),S.clearcoatRoughnessMap&&I.enable(16),S.clearcoatNormalMap&&I.enable(17),S.iridescence&&I.enable(18),S.iridescenceMap&&I.enable(19),S.iridescenceThicknessMap&&I.enable(20),S.displacementMap&&
I.enable(21),S.specularMap&&I.enable(22),S.roughnessMap&&I.enable(23),S.metalnessMap&&I.enable(24),S.gradientMap&&I.enable(25),S.alphaMap&&I.enable(26),S.alphaTest&&I.enable(27),S.vertexColors&&I.enable(28),S.vertexAlphas&&I.enable(29),S.vertexUvs&&I.enable(30),S.vertexTangents&&I.enable(31),S.uvsVertexOnly&&I.enable(32),ea.push(I.mask),I.disableAll(),S.fog&&I.enable(0),S.useFog&&I.enable(1),S.flatShading&&I.enable(2),S.logarithmicDepthBuffer&&I.enable(3),S.skinning&&I.enable(4),S.morphTargets&&I.enable(5),
S.morphNormals&&I.enable(6),S.morphColors&&I.enable(7),S.premultipliedAlpha&&I.enable(8),S.shadowMapEnabled&&I.enable(9),S.useLegacyLights&&I.enable(10),S.doubleSided&&I.enable(11),S.flipSided&&I.enable(12),S.useDepthPacking&&I.enable(13),S.dithering&&I.enable(14),S.specularIntensityMap&&I.enable(15),S.specularColorMap&&I.enable(16),S.transmission&&I.enable(17),S.transmissionMap&&I.enable(18),S.thicknessMap&&I.enable(19),S.sheen&&I.enable(20),S.sheenColorMap&&I.enable(21),S.sheenRoughnessMap&&I.enable(22),
S.decodeVideoTexture&&I.enable(23),S.opaque&&I.enable(24),ea.push(I.mask),ea.push(a.outputEncoding));ea.push(S.customProgramCacheKey);return ea.join()},getUniforms:function(S){const ea=aa[S.type];return ea?bj.clone(Rd[ea].uniforms):S.uniforms},acquireProgram:function(S,ea){let va;for(let ma=0,wa=M.length;ma<wa;ma++){const Ea=M[ma];if(Ea.cacheKey===ea){va=Ea;++va.usedTimes;break}}void 0===va&&(va=new ic(a,ea,S,C),M.push(va));return va},releaseProgram:function(S){if(0===--S.usedTimes){const ea=M.indexOf(S);
M[ea]=M[M.length-1];M.pop();S.destroy()}},releaseShaderCache:function(S){K.remove(S)},programs:M,dispose:function(){K.dispose()}}}function le(){let a=new WeakMap;return{get:function(b){let h=a.get(b);void 0===h&&(h={},a.set(b,h));return h},remove:function(b){a.delete(b)},update:function(b,h,n){a.get(b)[h]=n},dispose:function(){a=new WeakMap}}}function Yc(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.material.id!==b.material.id?
a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function Wc(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function ub(){function a(G,I,K,M,T,U){let V=b[h];void 0===V?(V={id:G.id,object:G,geometry:I,material:K,groupOrder:M,renderOrder:G.renderOrder,z:T,group:U},b[h]=V):(V.id=G.id,V.object=G,V.geometry=I,V.material=K,V.groupOrder=M,V.renderOrder=G.renderOrder,V.z=T,V.group=U);h++;return V}
const b=[];let h=0;const n=[],t=[],C=[];return{opaque:n,transmissive:t,transparent:C,init:function(){h=0;n.length=0;t.length=0;C.length=0},push:function(G,I,K,M,T,U){G=a(G,I,K,M,T,U);0<K.transmission?t.push(G):!0===K.transparent?C.push(G):n.push(G)},unshift:function(G,I,K,M,T,U){G=a(G,I,K,M,T,U);0<K.transmission?t.unshift(G):!0===K.transparent?C.unshift(G):n.unshift(G)},finish:function(){for(let G=h,I=b.length;G<I;G++){const K=b[G];if(null===K.id)break;K.id=null;K.object=null;K.geometry=null;K.material=
null;K.group=null}},sort:function(G,I){1<n.length&&n.sort(G||Yc);1<t.length&&t.sort(I||Wc);1<C.length&&C.sort(I||Wc)}}}function me(){let a=new WeakMap;return{get:function(b,h){const n=a.get(b);void 0===n?(h=new ub,a.set(b,[h])):h>=n.length?(h=new ub,n.push(h)):h=n[h];return h},dispose:function(){a=new WeakMap}}}function dc(){const a={};return{get:function(b){if(void 0!==a[b.id])return a[b.id];let h;switch(b.type){case "DirectionalLight":h={direction:new ka,color:new wb};break;case "SpotLight":h={position:new ka,
direction:new ka,color:new wb,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case "PointLight":h={position:new ka,color:new wb,distance:0,decay:0};break;case "HemisphereLight":h={direction:new ka,skyColor:new wb,groundColor:new wb};break;case "RectAreaLight":h={color:new wb,position:new ka,halfWidth:new ka,halfHeight:new ka}}return a[b.id]=h}}}function Da(){const a={};return{get:function(b){if(void 0!==a[b.id])return a[b.id];let h;switch(b.type){case "DirectionalLight":h={shadowBias:0,shadowNormalBias:0,
shadowRadius:1,shadowMapSize:new La};break;case "SpotLight":h={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new La};break;case "PointLight":h={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new La,shadowCameraNear:1,shadowCameraFar:1E3}}return a[b.id]=h}}}function qc(a,b){return(b.castShadow?2:0)-(a.castShadow?2:0)+(b.map?1:0)-(a.map?1:0)}function mc(a,b){const h=new dc,n=Da(),t={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,
numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let K=0;9>K;K++)t.probe.push(new ka);const C=new ka,G=new $b,I=new $b;return{setup:function(K,
M){let T=0,U=0,V=0;for(var ba=0;9>ba;ba++)t.probe[ba].set(0,0,0);let aa=ba=0,S=0,ea=0,va=0,ma=0,wa=0,Ea=0,ua=0,Qa=0;K.sort(qc);M=!0===M?Math.PI:1;for(let Za=0,db=K.length;Za<db;Za++){var ya=K[Za],Ha=ya.color,Ka=ya.intensity,Ia=ya.distance,gb=ya.shadow&&ya.shadow.map?ya.shadow.map.texture:null;if(ya.isAmbientLight)T+=Ha.r*Ka*M,U+=Ha.g*Ka*M,V+=Ha.b*Ka*M;else if(ya.isLightProbe)for(gb=0;9>gb;gb++)t.probe[gb].addScaledVector(ya.sh.coefficients[gb],Ka);else if(ya.isDirectionalLight)Ka=h.get(ya),Ka.color.copy(ya.color).multiplyScalar(ya.intensity*
M),ya.castShadow&&(Ha=ya.shadow,Ia=n.get(ya),Ia.shadowBias=Ha.bias,Ia.shadowNormalBias=Ha.normalBias,Ia.shadowRadius=Ha.radius,Ia.shadowMapSize=Ha.mapSize,t.directionalShadow[ba]=Ia,t.directionalShadowMap[ba]=gb,t.directionalShadowMatrix[ba]=ya.shadow.matrix,ma++),t.directional[ba]=Ka,ba++;else if(ya.isSpotLight){const bb=h.get(ya);bb.position.setFromMatrixPosition(ya.matrixWorld);bb.color.copy(Ha).multiplyScalar(Ka*M);bb.distance=Ia;bb.coneCos=Math.cos(ya.angle);bb.penumbraCos=Math.cos(ya.angle*
(1-ya.penumbra));bb.decay=ya.decay;t.spot[S]=bb;Ka=ya.shadow;ya.map&&(t.spotLightMap[ua]=ya.map,ua++,Ka.updateMatrices(ya),ya.castShadow&&Qa++);t.spotLightMatrix[S]=Ka.matrix;ya.castShadow&&(ya=n.get(ya),ya.shadowBias=Ka.bias,ya.shadowNormalBias=Ka.normalBias,ya.shadowRadius=Ka.radius,ya.shadowMapSize=Ka.mapSize,t.spotShadow[S]=ya,t.spotShadowMap[S]=gb,Ea++);S++}else ya.isRectAreaLight?(gb=h.get(ya),gb.color.copy(Ha).multiplyScalar(Ka),gb.halfWidth.set(.5*ya.width,0,0),gb.halfHeight.set(0,.5*ya.height,
0),t.rectArea[ea]=gb,ea++):ya.isPointLight?(Ka=h.get(ya),Ka.color.copy(ya.color).multiplyScalar(ya.intensity*M),Ka.distance=ya.distance,Ka.decay=ya.decay,ya.castShadow&&(Ha=ya.shadow,Ia=n.get(ya),Ia.shadowBias=Ha.bias,Ia.shadowNormalBias=Ha.normalBias,Ia.shadowRadius=Ha.radius,Ia.shadowMapSize=Ha.mapSize,Ia.shadowCameraNear=Ha.camera.near,Ia.shadowCameraFar=Ha.camera.far,t.pointShadow[aa]=Ia,t.pointShadowMap[aa]=gb,t.pointShadowMatrix[aa]=ya.shadow.matrix,wa++),t.point[aa]=Ka,aa++):ya.isHemisphereLight&&
(gb=h.get(ya),gb.skyColor.copy(ya.color).multiplyScalar(Ka*M),gb.groundColor.copy(ya.groundColor).multiplyScalar(Ka*M),t.hemi[va]=gb,va++)}0<ea&&(b.isWebGL2?(t.rectAreaLTC1=pb.LTC_FLOAT_1,t.rectAreaLTC2=pb.LTC_FLOAT_2):!0===a.has("OES_texture_float_linear")?(t.rectAreaLTC1=pb.LTC_FLOAT_1,t.rectAreaLTC2=pb.LTC_FLOAT_2):!0===a.has("OES_texture_half_float_linear")?(t.rectAreaLTC1=pb.LTC_HALF_1,t.rectAreaLTC2=pb.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions."));
t.ambient[0]=T;t.ambient[1]=U;t.ambient[2]=V;K=t.hash;if(K.directionalLength!==ba||K.pointLength!==aa||K.spotLength!==S||K.rectAreaLength!==ea||K.hemiLength!==va||K.numDirectionalShadows!==ma||K.numPointShadows!==wa||K.numSpotShadows!==Ea||K.numSpotMaps!==ua)t.directional.length=ba,t.spot.length=S,t.rectArea.length=ea,t.point.length=aa,t.hemi.length=va,t.directionalShadow.length=ma,t.directionalShadowMap.length=ma,t.pointShadow.length=wa,t.pointShadowMap.length=wa,t.spotShadow.length=Ea,t.spotShadowMap.length=
Ea,t.directionalShadowMatrix.length=ma,t.pointShadowMatrix.length=wa,t.spotLightMatrix.length=Ea+ua-Qa,t.spotLightMap.length=ua,t.numSpotLightShadowsWithMaps=Qa,K.directionalLength=ba,K.pointLength=aa,K.spotLength=S,K.rectAreaLength=ea,K.hemiLength=va,K.numDirectionalShadows=ma,K.numPointShadows=wa,K.numSpotShadows=Ea,K.numSpotMaps=ua,t.version=Wk++},setupView:function(K,M){let T=0,U=0,V=0,ba=0,aa=0;M=M.matrixWorldInverse;for(let ea=0,va=K.length;ea<va;ea++){const ma=K[ea];if(ma.isDirectionalLight){var S=
t.directional[T];S.direction.setFromMatrixPosition(ma.matrixWorld);C.setFromMatrixPosition(ma.target.matrixWorld);S.direction.sub(C);S.direction.transformDirection(M);T++}else ma.isSpotLight?(S=t.spot[V],S.position.setFromMatrixPosition(ma.matrixWorld),S.position.applyMatrix4(M),S.direction.setFromMatrixPosition(ma.matrixWorld),C.setFromMatrixPosition(ma.target.matrixWorld),S.direction.sub(C),S.direction.transformDirection(M),V++):ma.isRectAreaLight?(S=t.rectArea[ba],S.position.setFromMatrixPosition(ma.matrixWorld),
S.position.applyMatrix4(M),I.identity(),G.copy(ma.matrixWorld),G.premultiply(M),I.extractRotation(G),S.halfWidth.set(.5*ma.width,0,0),S.halfHeight.set(0,.5*ma.height,0),S.halfWidth.applyMatrix4(I),S.halfHeight.applyMatrix4(I),ba++):ma.isPointLight?(S=t.point[U],S.position.setFromMatrixPosition(ma.matrixWorld),S.position.applyMatrix4(M),U++):ma.isHemisphereLight&&(S=t.hemi[aa],S.direction.setFromMatrixPosition(ma.matrixWorld),S.direction.transformDirection(M),aa++)}},state:t}}function Nd(a,b){const h=
new mc(a,b),n=[],t=[];return{init:function(){n.length=0;t.length=0},state:{lightsArray:n,shadowsArray:t,lights:h},setupLights:function(C){h.setup(n,C)},setupLightsView:function(C){h.setupView(n,C)},pushLight:function(C){n.push(C)},pushShadow:function(C){t.push(C)}}}function Xc(a,b){let h=new WeakMap;return{get:function(n,t=0){const C=h.get(n);void 0===C?(t=new Nd(a,b),h.set(n,[t])):t>=C.length?(t=new Nd(a,b),C.push(t)):t=C[t];return t},dispose:function(){h=new WeakMap}}}function Of(a,b,h){function n(ma,
wa,Ea,ua,Qa,ya){ma=!0===Ea.isPointLight?ma.customDistanceMaterial:ma.customDepthMaterial;if(void 0===ma&&(ma=!0===Ea.isPointLight?T:M,a.localClippingEnabled&&!0===wa.clipShadows&&Array.isArray(wa.clippingPlanes)&&0!==wa.clippingPlanes.length||wa.displacementMap&&0!==wa.displacementScale||wa.alphaMap&&0<wa.alphaTest||wa.map&&0<wa.alphaTest)){var Ha=ma.uuid;const Ka=wa.uuid;let Ia=U[Ha];void 0===Ia&&(Ia={},U[Ha]=Ia);Ha=Ia[Ka];void 0===Ha&&(Ha=ma.clone(),Ia[Ka]=Ha);ma=Ha}ma.visible=wa.visible;ma.wireframe=
wa.wireframe;ma.side=3===ya?null!==wa.shadowSide?wa.shadowSide:wa.side:null!==wa.shadowSide?wa.shadowSide:ba[wa.side];ma.alphaMap=wa.alphaMap;ma.alphaTest=wa.alphaTest;ma.map=wa.map;ma.clipShadows=wa.clipShadows;ma.clippingPlanes=wa.clippingPlanes;ma.clipIntersection=wa.clipIntersection;ma.displacementMap=wa.displacementMap;ma.displacementScale=wa.displacementScale;ma.displacementBias=wa.displacementBias;ma.wireframeLinewidth=wa.wireframeLinewidth;ma.linewidth=wa.linewidth;!0===Ea.isPointLight&&!0===
ma.isMeshDistanceMaterial&&(ma.referencePosition.setFromMatrixPosition(Ea.matrixWorld),ma.nearDistance=ua,ma.farDistance=Qa);return ma}function t(ma,wa,Ea,ua,Qa){if(!1!==ma.visible){if(ma.layers.test(wa.layers)&&(ma.isMesh||ma.isLine||ma.isPoints)&&(ma.castShadow||ma.receiveShadow&&3===Qa)&&(!ma.frustumCulled||C.intersectsObject(ma))){ma.modelViewMatrix.multiplyMatrices(Ea.matrixWorldInverse,ma.matrixWorld);const Ka=b.update(ma);var ya=ma.material;if(Array.isArray(ya)){const Ia=Ka.groups;for(let gb=
0,Za=Ia.length;gb<Za;gb++){const db=Ia[gb];var Ha=ya[db.materialIndex];Ha&&Ha.visible&&(Ha=n(ma,Ha,ua,Ea.near,Ea.far,Qa),a.renderBufferDirect(Ea,null,Ka,Ha,ma,db))}}else ya.visible&&(ya=n(ma,ya,ua,Ea.near,Ea.far,Qa),a.renderBufferDirect(Ea,null,Ka,ya,ma,null))}ma=ma.children;for(let Ka=0,Ia=ma.length;Ka<Ia;Ka++)t(ma[Ka],wa,Ea,ua,Qa)}}let C=new Dg;const G=new La,I=new La,K=new zc,M=new Nh({depthPacking:3201}),T=new Oh,U={},V=h.maxTextureSize,ba={[0]:1,[1]:0,[2]:2},aa=new de({defines:{VSM_SAMPLES:8},
uniforms:{shadow_pass:{value:null},resolution:{value:new La},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position \x3d vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include \x3cpacking\x3e\nvoid main() {\n\tconst float samples \x3d float( VSM_SAMPLES );\n\tfloat mean \x3d 0.0;\n\tfloat squared_mean \x3d 0.0;\n\tfloat uvStride \x3d samples \x3c\x3d 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart \x3d samples \x3c\x3d 1.0 ? 0.0 : - 1.0;\n\tfor ( float i \x3d 0.0; i \x3c samples; i ++ ) {\n\t\tfloat uvOffset \x3d uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution \x3d unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean +\x3d distribution.x;\n\t\t\tsquared_mean +\x3d distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth \x3d unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean +\x3d depth;\n\t\t\tsquared_mean +\x3d depth * depth;\n\t\t#endif\n\t}\n\tmean \x3d mean / samples;\n\tsquared_mean \x3d squared_mean / samples;\n\tfloat std_dev \x3d sqrt( squared_mean - mean * mean );\n\tgl_FragColor \x3d pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),
S=aa.clone();S.defines.HORIZONTAL_PASS=1;h=new gc;h.setAttribute("position",new Bc(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const ea=new dd(h,aa),va=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=1;this.render=function(ma,wa,Ea){if(!1!==va.enabled&&(!1!==va.autoUpdate||!1!==va.needsUpdate)&&0!==ma.length){var ua=a.getRenderTarget(),Qa=a.getActiveCubeFace(),ya=a.getActiveMipmapLevel(),Ha=a.state;Ha.setBlending(0);Ha.buffers.color.setClear(1,1,1,1);Ha.buffers.depth.setTest(!0);
Ha.setScissorTest(!1);for(let Za=0,db=ma.length;Za<db;Za++){var Ka=ma[Za];const bb=Ka.shadow;if(void 0===bb)console.warn("THREE.WebGLShadowMap:",Ka,"has no shadow.");else if(!1!==bb.autoUpdate||!1!==bb.needsUpdate){G.copy(bb.mapSize);var Ia=bb.getFrameExtents();G.multiply(Ia);I.copy(bb.mapSize);if(G.x>V||G.y>V)G.x>V&&(I.x=Math.floor(V/Ia.x),G.x=I.x*Ia.x,bb.mapSize.x=I.x),G.y>V&&(I.y=Math.floor(V/Ia.y),G.y=I.y*Ia.y,bb.mapSize.y=I.y);null===bb.map&&(bb.map=new Sd(G.x,G.y,3!==this.type?{minFilter:1003,
magFilter:1003}:{}),bb.map.texture.name=Ka.name+".shadowMap",bb.camera.updateProjectionMatrix());a.setRenderTarget(bb.map);a.clear();Ia=bb.getViewportCount();for(var gb=0;gb<Ia;gb++){const rb=bb.getViewport(gb);K.set(I.x*rb.x,I.y*rb.y,I.x*rb.z,I.y*rb.w);Ha.viewport(K);bb.updateMatrices(Ka,gb);C=bb.getFrustum();t(wa,Ea,bb.camera,Ka,this.type)}!0!==bb.isPointLightShadow&&3===this.type&&(Ka=bb,Ia=Ea,gb=b.update(ea),aa.defines.VSM_SAMPLES!==Ka.blurSamples&&(aa.defines.VSM_SAMPLES=Ka.blurSamples,S.defines.VSM_SAMPLES=
Ka.blurSamples,aa.needsUpdate=!0,S.needsUpdate=!0),null===Ka.mapPass&&(Ka.mapPass=new Sd(G.x,G.y)),aa.uniforms.shadow_pass.value=Ka.map.texture,aa.uniforms.resolution.value=Ka.mapSize,aa.uniforms.radius.value=Ka.radius,a.setRenderTarget(Ka.mapPass),a.clear(),a.renderBufferDirect(Ia,null,gb,aa,ea,null),S.uniforms.shadow_pass.value=Ka.mapPass.texture,S.uniforms.resolution.value=Ka.mapSize,S.uniforms.radius.value=Ka.radius,a.setRenderTarget(Ka.map),a.clear(),a.renderBufferDirect(Ia,null,gb,S,ea,null));
bb.needsUpdate=!1}}va.needsUpdate=!1;a.setRenderTarget(ua,Qa,ya)}}}function lf(a,b,h){function n(sa,Ma,Sa){const Va=new Uint8Array(4),fb=a.createTexture();a.bindTexture(sa,fb);a.texParameteri(sa,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(sa,a.TEXTURE_MAG_FILTER,a.NEAREST);for(sa=0;sa<Sa;sa++)a.texImage2D(Ma+sa,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,Va);return fb}function t(sa){!0!==ea[sa]&&(a.enable(sa),ea[sa]=!0)}function C(sa){!1!==ea[sa]&&(a.disable(sa),ea[sa]=!1)}function G(sa,Ma,Sa,Va,fb,
tb,yb,jc){if(0===sa)!0===ua&&(C(a.BLEND),ua=!1);else if(!1===ua&&(t(a.BLEND),ua=!0),5!==sa){if(sa!==Qa||jc!==db){if(100!==ya||100!==Ia)a.blendEquation(a.FUNC_ADD),Ia=ya=100;if(jc)switch(sa){case 1:a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);break;case 2:a.blendFunc(a.ONE,a.ONE);break;case 3:a.blendFuncSeparate(a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ZERO,a.ONE);break;case 4:a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",
sa)}else switch(sa){case 1:a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);break;case 2:a.blendFunc(a.SRC_ALPHA,a.ONE);break;case 3:a.blendFuncSeparate(a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ZERO,a.ONE);break;case 4:a.blendFunc(a.ZERO,a.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",sa)}Za=gb=Ka=Ha=null;Qa=sa;db=jc}}else{fb=fb||Ma;tb=tb||Sa;yb=yb||Va;if(Ma!==ya||fb!==Ia)a.blendEquationSeparate(Ca[Ma],Ca[fb]),ya=Ma,Ia=fb;if(Sa!==Ha||Va!==Ka||
tb!==gb||yb!==Za)a.blendFuncSeparate(lb[Sa],lb[Va],lb[tb],lb[yb]),Ha=Sa,Ka=Va,gb=tb,Za=yb;Qa=sa;db=!1}}function I(sa){bb!==sa&&(sa?a.frontFace(a.CW):a.frontFace(a.CCW),bb=sa)}function K(sa){0!==sa?(t(a.CULL_FACE),sa!==rb&&(1===sa?a.cullFace(a.BACK):2===sa?a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):C(a.CULL_FACE);rb=sa}function M(sa,Ma,Sa){if(sa){if(t(a.POLYGON_OFFSET_FILL),Kb!==Ma||Tb!==Sa)a.polygonOffset(Ma,Sa),Kb=Ma,Tb=Sa}else C(a.POLYGON_OFFSET_FILL)}const T=h.isWebGL2,U=new function(){let sa=
!1;const Ma=new zc;let Sa=null;const Va=new zc(0,0,0,0);return{setMask:function(fb){Sa===fb||sa||(a.colorMask(fb,fb,fb,fb),Sa=fb)},setLocked:function(fb){sa=fb},setClear:function(fb,tb,yb,jc,Ga){!0===Ga&&(fb*=jc,tb*=jc,yb*=jc);Ma.set(fb,tb,yb,jc);!1===Va.equals(Ma)&&(a.clearColor(fb,tb,yb,jc),Va.copy(Ma))},reset:function(){sa=!1;Sa=null;Va.set(-1,0,0,0)}}},V=new function(){let sa=!1,Ma=null,Sa=null,Va=null;return{setTest:function(fb){fb?t(a.DEPTH_TEST):C(a.DEPTH_TEST)},setMask:function(fb){Ma===fb||
sa||(a.depthMask(fb),Ma=fb)},setFunc:function(fb){if(Sa!==fb){switch(fb){case 0:a.depthFunc(a.NEVER);break;case 1:a.depthFunc(a.ALWAYS);break;case 2:a.depthFunc(a.LESS);break;case 3:a.depthFunc(a.LEQUAL);break;case 4:a.depthFunc(a.EQUAL);break;case 5:a.depthFunc(a.GEQUAL);break;case 6:a.depthFunc(a.GREATER);break;case 7:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}Sa=fb}},setLocked:function(fb){sa=fb},setClear:function(fb){Va!==fb&&(a.clearDepth(fb),Va=fb)},reset:function(){sa=!1;Va=
Sa=Ma=null}}},ba=new function(){let sa=!1,Ma=null,Sa=null,Va=null,fb=null,tb=null,yb=null,jc=null,Ga=null;return{setTest:function(Rb){sa||(Rb?t(a.STENCIL_TEST):C(a.STENCIL_TEST))},setMask:function(Rb){Ma===Rb||sa||(a.stencilMask(Rb),Ma=Rb)},setFunc:function(Rb,rc,hc){if(Sa!==Rb||Va!==rc||fb!==hc)a.stencilFunc(Rb,rc,hc),Sa=Rb,Va=rc,fb=hc},setOp:function(Rb,rc,hc){if(tb!==Rb||yb!==rc||jc!==hc)a.stencilOp(Rb,rc,hc),tb=Rb,yb=rc,jc=hc},setLocked:function(Rb){sa=Rb},setClear:function(Rb){Ga!==Rb&&(a.clearStencil(Rb),
Ga=Rb)},reset:function(){sa=!1;Ga=jc=yb=tb=fb=Va=Sa=Ma=null}}},aa=new WeakMap,S=new WeakMap;let ea={},va={},ma=new WeakMap,wa=[],Ea=null,ua=!1,Qa=null,ya=null,Ha=null,Ka=null,Ia=null,gb=null,Za=null,db=!1,bb=null,rb=null,Bb=null,Kb=null,Tb=null;const eb=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let nb=!1;var qb=0;qb=a.getParameter(a.VERSION);-1!==qb.indexOf("WebGL")?(qb=parseFloat(/^WebGL (\d)/.exec(qb)[1]),nb=1<=qb):-1!==qb.indexOf("OpenGL ES")&&(qb=parseFloat(/^OpenGL ES (\d)/.exec(qb)[1]),
nb=2<=qb);let Hb=null,Ab={};qb=a.getParameter(a.SCISSOR_BOX);const ia=a.getParameter(a.VIEWPORT),ha=(new zc).fromArray(qb),qa=(new zc).fromArray(ia),ta={};ta[a.TEXTURE_2D]=n(a.TEXTURE_2D,a.TEXTURE_2D,1);ta[a.TEXTURE_CUBE_MAP]=n(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6);U.setClear(0,0,0,1);V.setClear(1);ba.setClear(0);t(a.DEPTH_TEST);V.setFunc(3);I(!1);K(1);t(a.CULL_FACE);G(0);const Ca={[100]:a.FUNC_ADD,[101]:a.FUNC_SUBTRACT,[102]:a.FUNC_REVERSE_SUBTRACT};T?(Ca[103]=a.MIN,Ca[104]=a.MAX):
(qb=b.get("EXT_blend_minmax"),null!==qb&&(Ca[103]=qb.MIN_EXT,Ca[104]=qb.MAX_EXT));const lb={[200]:a.ZERO,[201]:a.ONE,[202]:a.SRC_COLOR,[204]:a.SRC_ALPHA,[210]:a.SRC_ALPHA_SATURATE,[208]:a.DST_COLOR,[206]:a.DST_ALPHA,[203]:a.ONE_MINUS_SRC_COLOR,[205]:a.ONE_MINUS_SRC_ALPHA,[209]:a.ONE_MINUS_DST_COLOR,[207]:a.ONE_MINUS_DST_ALPHA};return{buffers:{color:U,depth:V,stencil:ba},enable:t,disable:C,bindFramebuffer:function(sa,Ma){return va[sa]!==Ma?(a.bindFramebuffer(sa,Ma),va[sa]=Ma,T&&(sa===a.DRAW_FRAMEBUFFER&&
(va[a.FRAMEBUFFER]=Ma),sa===a.FRAMEBUFFER&&(va[a.DRAW_FRAMEBUFFER]=Ma)),!0):!1},drawBuffers:function(sa,Ma){let Sa=wa,Va=!1;if(sa)if(Sa=ma.get(Ma),void 0===Sa&&(Sa=[],ma.set(Ma,Sa)),sa.isWebGLMultipleRenderTargets){if(sa=sa.texture,Sa.length!==sa.length||Sa[0]!==a.COLOR_ATTACHMENT0){for(let fb=0,tb=sa.length;fb<tb;fb++)Sa[fb]=a.COLOR_ATTACHMENT0+fb;Sa.length=sa.length;Va=!0}}else Sa[0]!==a.COLOR_ATTACHMENT0&&(Sa[0]=a.COLOR_ATTACHMENT0,Va=!0);else Sa[0]!==a.BACK&&(Sa[0]=a.BACK,Va=!0);Va&&(h.isWebGL2?
a.drawBuffers(Sa):b.get("WEBGL_draw_buffers").drawBuffersWEBGL(Sa))},useProgram:function(sa){return Ea!==sa?(a.useProgram(sa),Ea=sa,!0):!1},setBlending:G,setMaterial:function(sa,Ma){2===sa.side?C(a.CULL_FACE):t(a.CULL_FACE);let Sa=1===sa.side;Ma&&(Sa=!Sa);I(Sa);1===sa.blending&&!1===sa.transparent?G(0):G(sa.blending,sa.blendEquation,sa.blendSrc,sa.blendDst,sa.blendEquationAlpha,sa.blendSrcAlpha,sa.blendDstAlpha,sa.premultipliedAlpha);V.setFunc(sa.depthFunc);V.setTest(sa.depthTest);V.setMask(sa.depthWrite);
U.setMask(sa.colorWrite);Ma=sa.stencilWrite;ba.setTest(Ma);Ma&&(ba.setMask(sa.stencilWriteMask),ba.setFunc(sa.stencilFunc,sa.stencilRef,sa.stencilFuncMask),ba.setOp(sa.stencilFail,sa.stencilZFail,sa.stencilZPass));M(sa.polygonOffset,sa.polygonOffsetFactor,sa.polygonOffsetUnits);!0===sa.alphaToCoverage?t(a.SAMPLE_ALPHA_TO_COVERAGE):C(a.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:I,setCullFace:K,setLineWidth:function(sa){sa!==Bb&&(nb&&a.lineWidth(sa),Bb=sa)},setPolygonOffset:M,setScissorTest:function(sa){sa?
t(a.SCISSOR_TEST):C(a.SCISSOR_TEST)},activeTexture:function(sa){void 0===sa&&(sa=a.TEXTURE0+eb-1);Hb!==sa&&(a.activeTexture(sa),Hb=sa)},bindTexture:function(sa,Ma,Sa){void 0===Sa&&(Sa=null===Hb?a.TEXTURE0+eb-1:Hb);let Va=Ab[Sa];void 0===Va&&(Va={type:void 0,texture:void 0},Ab[Sa]=Va);if(Va.type!==sa||Va.texture!==Ma)Hb!==Sa&&(a.activeTexture(Sa),Hb=Sa),a.bindTexture(sa,Ma||ta[sa]),Va.type=sa,Va.texture=Ma},unbindTexture:function(){const sa=Ab[Hb];void 0!==sa&&void 0!==sa.type&&(a.bindTexture(sa.type,
null),sa.type=void 0,sa.texture=void 0)},compressedTexImage2D:function(){try{a.compressedTexImage2D.apply(a,arguments)}catch(sa){console.error("THREE.WebGLState:",sa)}},compressedTexImage3D:function(){try{a.compressedTexImage3D.apply(a,arguments)}catch(sa){console.error("THREE.WebGLState:",sa)}},texImage2D:function(){try{a.texImage2D.apply(a,arguments)}catch(sa){console.error("THREE.WebGLState:",sa)}},texImage3D:function(){try{a.texImage3D.apply(a,arguments)}catch(sa){console.error("THREE.WebGLState:",
sa)}},updateUBOMapping:function(sa,Ma){let Sa=S.get(Ma);void 0===Sa&&(Sa=new WeakMap,S.set(Ma,Sa));let Va=Sa.get(sa);void 0===Va&&(Va=a.getUniformBlockIndex(Ma,sa.name),Sa.set(sa,Va))},uniformBlockBinding:function(sa,Ma){const Sa=S.get(Ma).get(sa);aa.get(Ma)!==Sa&&(a.uniformBlockBinding(Ma,Sa,sa.__bindingPointIndex),aa.set(Ma,Sa))},texStorage2D:function(){try{a.texStorage2D.apply(a,arguments)}catch(sa){console.error("THREE.WebGLState:",sa)}},texStorage3D:function(){try{a.texStorage3D.apply(a,arguments)}catch(sa){console.error("THREE.WebGLState:",
sa)}},texSubImage2D:function(){try{a.texSubImage2D.apply(a,arguments)}catch(sa){console.error("THREE.WebGLState:",sa)}},texSubImage3D:function(){try{a.texSubImage3D.apply(a,arguments)}catch(sa){console.error("THREE.WebGLState:",sa)}},compressedTexSubImage2D:function(){try{a.compressedTexSubImage2D.apply(a,arguments)}catch(sa){console.error("THREE.WebGLState:",sa)}},compressedTexSubImage3D:function(){try{a.compressedTexSubImage3D.apply(a,arguments)}catch(sa){console.error("THREE.WebGLState:",sa)}},
scissor:function(sa){!1===ha.equals(sa)&&(a.scissor(sa.x,sa.y,sa.z,sa.w),ha.copy(sa))},viewport:function(sa){!1===qa.equals(sa)&&(a.viewport(sa.x,sa.y,sa.z,sa.w),qa.copy(sa))},reset:function(){a.disable(a.BLEND);a.disable(a.CULL_FACE);a.disable(a.DEPTH_TEST);a.disable(a.POLYGON_OFFSET_FILL);a.disable(a.SCISSOR_TEST);a.disable(a.STENCIL_TEST);a.disable(a.SAMPLE_ALPHA_TO_COVERAGE);a.blendEquation(a.FUNC_ADD);a.blendFunc(a.ONE,a.ZERO);a.blendFuncSeparate(a.ONE,a.ZERO,a.ONE,a.ZERO);a.colorMask(!0,!0,
!0,!0);a.clearColor(0,0,0,0);a.depthMask(!0);a.depthFunc(a.LESS);a.clearDepth(1);a.stencilMask(4294967295);a.stencilFunc(a.ALWAYS,0,4294967295);a.stencilOp(a.KEEP,a.KEEP,a.KEEP);a.clearStencil(0);a.cullFace(a.BACK);a.frontFace(a.CCW);a.polygonOffset(0,0);a.activeTexture(a.TEXTURE0);a.bindFramebuffer(a.FRAMEBUFFER,null);!0===T&&(a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null),a.bindFramebuffer(a.READ_FRAMEBUFFER,null));a.useProgram(null);a.lineWidth(1);a.scissor(0,0,a.canvas.width,a.canvas.height);a.viewport(0,
0,a.canvas.width,a.canvas.height);ea={};Hb=null;Ab={};va={};ma=new WeakMap;wa=[];Ea=null;ua=!1;Za=gb=Ia=Ka=Ha=ya=Qa=null;db=!1;Tb=Kb=Bb=rb=bb=null;ha.set(0,0,a.canvas.width,a.canvas.height);qa.set(0,0,a.canvas.width,a.canvas.height);U.reset();V.reset();ba.reset()}}}function Pf(a,b,h,n,t,C,G){function I(ia,ha,qa,ta){var Ca=1;if(ia.width>ta||ia.height>ta)Ca=ta/Math.max(ia.width,ia.height);if(1>Ca||!0===ha){if("undefined"!==typeof HTMLImageElement&&ia instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&
ia instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&ia instanceof ImageBitmap)return ta=ha?k:Math.floor,ha=ta(Ca*ia.width),Ca=ta(Ca*ia.height),void 0===Tb&&(Tb=nb?new OffscreenCanvas(ha,Ca):w("canvas")),qa=qa?nb?new OffscreenCanvas(ha,Ca):w("canvas"):Tb,qa.width=ha,qa.height=Ca,qa.getContext("2d").drawImage(ia,0,0,ha,Ca),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ia.width+"x"+ia.height+") to ("+ha+"x"+Ca+")."),qa;"data"in ia&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+
ia.width+"x"+ia.height+").")}return ia}function K(ia){return e(ia.width)&&e(ia.height)}function M(ia,ha){return ia.generateMipmaps&&ha&&1003!==ia.minFilter&&1006!==ia.minFilter}function T(ia,ha,qa,ta,Ca=!1){if(!1===Ia)return ha;if(null!==ia){if(void 0!==a[ia])return a[ia];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ia+"'")}ia=ha;ha===a.RED&&(qa===a.FLOAT&&(ia=a.R32F),qa===a.HALF_FLOAT&&(ia=a.R16F),qa===a.UNSIGNED_BYTE&&(ia=a.R8));ha===a.RG&&(qa===a.FLOAT&&
(ia=a.RG32F),qa===a.HALF_FLOAT&&(ia=a.RG16F),qa===a.UNSIGNED_BYTE&&(ia=a.RG8));ha===a.RGBA&&(qa===a.FLOAT&&(ia=a.RGBA32F),qa===a.HALF_FLOAT&&(ia=a.RGBA16F),qa===a.UNSIGNED_BYTE&&(ia=3001===ta&&!1===Ca?a.SRGB8_ALPHA8:a.RGBA8),qa===a.UNSIGNED_SHORT_4_4_4_4&&(ia=a.RGBA4),qa===a.UNSIGNED_SHORT_5_5_5_1&&(ia=a.RGB5_A1));ia!==a.R16F&&ia!==a.R32F&&ia!==a.RG16F&&ia!==a.RG32F&&ia!==a.RGBA16F&&ia!==a.RGBA32F||b.get("EXT_color_buffer_float");return ia}function U(ia,ha,qa){return!0===M(ia,qa)||ia.isFramebufferTexture&&
1003!==ia.minFilter&&1006!==ia.minFilter?Math.log2(Math.max(ha.width,ha.height))+1:void 0!==ia.mipmaps&&0<ia.mipmaps.length?ia.mipmaps.length:ia.isCompressedTexture&&Array.isArray(ia.image)?ha.mipmaps.length:1}function V(ia){return 1003===ia||1004===ia||1005===ia?a.NEAREST:a.LINEAR}function ba(ia){ia=ia.target;ia.removeEventListener("dispose",ba);var ha=n.get(ia);if(void 0!==ha.__webglInit){var qa=ia.source,ta=eb.get(qa);ta&&(ha=ta[ha.__cacheKey],ha.usedTimes--,0===ha.usedTimes&&S(ia),0===Object.keys(ta).length&&
eb.delete(qa));n.remove(ia)}ia.isVideoTexture&&Kb.delete(ia)}function aa(ia){ia=ia.target;ia.removeEventListener("dispose",aa);const ha=ia.texture;var qa=n.get(ia),ta=n.get(ha);void 0!==ta.__webglTexture&&(a.deleteTexture(ta.__webglTexture),G.memory.textures--);ia.depthTexture&&ia.depthTexture.dispose();if(ia.isWebGLCubeRenderTarget)for(ta=0;6>ta;ta++)a.deleteFramebuffer(qa.__webglFramebuffer[ta]),qa.__webglDepthbuffer&&a.deleteRenderbuffer(qa.__webglDepthbuffer[ta]);else{a.deleteFramebuffer(qa.__webglFramebuffer);
qa.__webglDepthbuffer&&a.deleteRenderbuffer(qa.__webglDepthbuffer);qa.__webglMultisampledFramebuffer&&a.deleteFramebuffer(qa.__webglMultisampledFramebuffer);if(qa.__webglColorRenderbuffer)for(ta=0;ta<qa.__webglColorRenderbuffer.length;ta++)qa.__webglColorRenderbuffer[ta]&&a.deleteRenderbuffer(qa.__webglColorRenderbuffer[ta]);qa.__webglDepthRenderbuffer&&a.deleteRenderbuffer(qa.__webglDepthRenderbuffer)}if(ia.isWebGLMultipleRenderTargets)for(let Ca=0,lb=ha.length;Ca<lb;Ca++)qa=n.get(ha[Ca]),qa.__webglTexture&&
(a.deleteTexture(qa.__webglTexture),G.memory.textures--),n.remove(ha[Ca]);n.remove(ha);n.remove(ia)}function S(ia){const ha=n.get(ia);a.deleteTexture(ha.__webglTexture);delete eb.get(ia.source)[ha.__cacheKey];G.memory.textures--}function ea(ia,ha){const qa=n.get(ia);if(ia.isVideoTexture){var ta=G.render.frame;Kb.get(ia)!==ta&&(Kb.set(ia,ta),ia.update())}if(!1===ia.isRenderTargetTexture&&0<ia.version&&qa.__version!==ia.version)if(ta=ia.image,null===ta)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");
else if(!1===ta.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{wa(qa,ia,ha);return}h.bindTexture(a.TEXTURE_2D,qa.__webglTexture,a.TEXTURE0+ha)}function va(ia,ha,qa){qa?(a.texParameteri(ia,a.TEXTURE_WRAP_S,Hb[ha.wrapS]),a.texParameteri(ia,a.TEXTURE_WRAP_T,Hb[ha.wrapT]),ia!==a.TEXTURE_3D&&ia!==a.TEXTURE_2D_ARRAY||a.texParameteri(ia,a.TEXTURE_WRAP_R,Hb[ha.wrapR]),a.texParameteri(ia,a.TEXTURE_MAG_FILTER,Ab[ha.magFilter]),a.texParameteri(ia,a.TEXTURE_MIN_FILTER,
Ab[ha.minFilter])):(a.texParameteri(ia,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(ia,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),ia!==a.TEXTURE_3D&&ia!==a.TEXTURE_2D_ARRAY||a.texParameteri(ia,a.TEXTURE_WRAP_R,a.CLAMP_TO_EDGE),1001===ha.wrapS&&1001===ha.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),a.texParameteri(ia,a.TEXTURE_MAG_FILTER,V(ha.magFilter)),a.texParameteri(ia,a.TEXTURE_MIN_FILTER,V(ha.minFilter)),
1003!==ha.minFilter&&1006!==ha.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));!0===b.has("EXT_texture_filter_anisotropic")&&(qa=b.get("EXT_texture_filter_anisotropic"),1003===ha.magFilter||1005!==ha.minFilter&&1008!==ha.minFilter||1015===ha.type&&!1===b.has("OES_texture_float_linear")||!1===Ia&&1016===ha.type&&!1===b.has("OES_texture_half_float_linear")||!(1<ha.anisotropy||n.get(ha).__currentAnisotropy)||
(a.texParameterf(ia,qa.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ha.anisotropy,t.getMaxAnisotropy())),n.get(ha).__currentAnisotropy=ha.anisotropy))}function ma(ia,ha){let qa=!1;void 0===ia.__webglInit&&(ia.__webglInit=!0,ha.addEventListener("dispose",ba));var ta=ha.source;let Ca=eb.get(ta);void 0===Ca&&(Ca={},eb.set(ta,Ca));ta=[];ta.push(ha.wrapS);ta.push(ha.wrapT);ta.push(ha.wrapR||0);ta.push(ha.magFilter);ta.push(ha.minFilter);ta.push(ha.anisotropy);ta.push(ha.internalFormat);ta.push(ha.format);ta.push(ha.type);
ta.push(ha.generateMipmaps);ta.push(ha.premultiplyAlpha);ta.push(ha.flipY);ta.push(ha.unpackAlignment);ta.push(ha.encoding);ta=ta.join();if(ta!==ia.__cacheKey){void 0===Ca[ta]&&(Ca[ta]={texture:a.createTexture(),usedTimes:0},G.memory.textures++,qa=!0);Ca[ta].usedTimes++;const lb=Ca[ia.__cacheKey];void 0!==lb&&(Ca[ia.__cacheKey].usedTimes--,0===lb.usedTimes&&S(ha));ia.__cacheKey=ta;ia.__webglTexture=Ca[ta].texture}return qa}function wa(ia,ha,qa){let ta=a.TEXTURE_2D;if(ha.isDataArrayTexture||ha.isCompressedArrayTexture)ta=
a.TEXTURE_2D_ARRAY;ha.isData3DTexture&&(ta=a.TEXTURE_3D);var Ca=ma(ia,ha);const lb=ha.source;h.bindTexture(ta,ia.__webglTexture,a.TEXTURE0+qa);const sa=n.get(lb);if(lb.version!==sa.__version||!0===Ca){h.activeTexture(a.TEXTURE0+qa);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,ha.flipY);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ha.premultiplyAlpha);a.pixelStorei(a.UNPACK_ALIGNMENT,ha.unpackAlignment);a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,a.NONE);qa=Ia?!1:1001!==ha.wrapS||1001!==ha.wrapT||
1003!==ha.minFilter&&1006!==ha.minFilter;qa=qa&&!1===K(ha.image);var Ma=I(ha.image,qa,!1,db);Ma=Ka(ha,Ma);qa=K(Ma)||Ia;const fb=C.convert(ha.format,ha.encoding);let tb=C.convert(ha.type),yb=T(ha.internalFormat,fb,tb,ha.encoding,ha.isVideoTexture);va(ta,ha,qa);var Sa=ha.mipmaps,Va=Ia&&!0!==ha.isVideoTexture;const jc=void 0===sa.__version||!0===Ca;Ca=U(ha,Ma,qa);if(ha.isDepthTexture)yb=a.DEPTH_COMPONENT,Ia?yb=1015===ha.type?a.DEPTH_COMPONENT32F:1014===ha.type?a.DEPTH_COMPONENT24:1020===ha.type?a.DEPTH24_STENCIL8:
a.DEPTH_COMPONENT16:1015===ha.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===ha.format&&yb===a.DEPTH_COMPONENT&&1012!==ha.type&&1014!==ha.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ha.type=1014,tb=C.convert(ha.type)),1027===ha.format&&yb===a.DEPTH_COMPONENT&&(yb=a.DEPTH_STENCIL,1020!==ha.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),
ha.type=1020,tb=C.convert(ha.type))),jc&&(Va?h.texStorage2D(a.TEXTURE_2D,1,yb,Ma.width,Ma.height):h.texImage2D(a.TEXTURE_2D,0,yb,Ma.width,Ma.height,0,fb,tb,null));else if(ha.isDataTexture)if(0<Sa.length&&qa){Va&&jc&&h.texStorage2D(a.TEXTURE_2D,Ca,yb,Sa[0].width,Sa[0].height);for(let Ga=0,Rb=Sa.length;Ga<Rb;Ga++)Ca=Sa[Ga],Va?h.texSubImage2D(a.TEXTURE_2D,Ga,0,0,Ca.width,Ca.height,fb,tb,Ca.data):h.texImage2D(a.TEXTURE_2D,Ga,yb,Ca.width,Ca.height,0,fb,tb,Ca.data);ha.generateMipmaps=!1}else Va?(jc&&h.texStorage2D(a.TEXTURE_2D,
Ca,yb,Ma.width,Ma.height),h.texSubImage2D(a.TEXTURE_2D,0,0,0,Ma.width,Ma.height,fb,tb,Ma.data)):h.texImage2D(a.TEXTURE_2D,0,yb,Ma.width,Ma.height,0,fb,tb,Ma.data);else if(ha.isCompressedTexture)if(ha.isCompressedArrayTexture){Va&&jc&&h.texStorage3D(a.TEXTURE_2D_ARRAY,Ca,yb,Sa[0].width,Sa[0].height,Ma.depth);for(let Ga=0,Rb=Sa.length;Ga<Rb;Ga++)Ca=Sa[Ga],1023!==ha.format?null!==fb?Va?h.compressedTexSubImage3D(a.TEXTURE_2D_ARRAY,Ga,0,0,0,Ca.width,Ca.height,Ma.depth,fb,Ca.data,0,0):h.compressedTexImage3D(a.TEXTURE_2D_ARRAY,
Ga,yb,Ca.width,Ca.height,Ma.depth,0,Ca.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Va?h.texSubImage3D(a.TEXTURE_2D_ARRAY,Ga,0,0,0,Ca.width,Ca.height,Ma.depth,fb,tb,Ca.data):h.texImage3D(a.TEXTURE_2D_ARRAY,Ga,yb,Ca.width,Ca.height,Ma.depth,0,fb,tb,Ca.data)}else{Va&&jc&&h.texStorage2D(a.TEXTURE_2D,Ca,yb,Sa[0].width,Sa[0].height);for(let Ga=0,Rb=Sa.length;Ga<Rb;Ga++)Ca=Sa[Ga],1023!==ha.format?null!==fb?Va?h.compressedTexSubImage2D(a.TEXTURE_2D,
Ga,0,0,Ca.width,Ca.height,fb,Ca.data):h.compressedTexImage2D(a.TEXTURE_2D,Ga,yb,Ca.width,Ca.height,0,Ca.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Va?h.texSubImage2D(a.TEXTURE_2D,Ga,0,0,Ca.width,Ca.height,fb,tb,Ca.data):h.texImage2D(a.TEXTURE_2D,Ga,yb,Ca.width,Ca.height,0,fb,tb,Ca.data)}else if(ha.isDataArrayTexture)Va?(jc&&h.texStorage3D(a.TEXTURE_2D_ARRAY,Ca,yb,Ma.width,Ma.height,Ma.depth),h.texSubImage3D(a.TEXTURE_2D_ARRAY,
0,0,0,0,Ma.width,Ma.height,Ma.depth,fb,tb,Ma.data)):h.texImage3D(a.TEXTURE_2D_ARRAY,0,yb,Ma.width,Ma.height,Ma.depth,0,fb,tb,Ma.data);else if(ha.isData3DTexture)Va?(jc&&h.texStorage3D(a.TEXTURE_3D,Ca,yb,Ma.width,Ma.height,Ma.depth),h.texSubImage3D(a.TEXTURE_3D,0,0,0,0,Ma.width,Ma.height,Ma.depth,fb,tb,Ma.data)):h.texImage3D(a.TEXTURE_3D,0,yb,Ma.width,Ma.height,Ma.depth,0,fb,tb,Ma.data);else if(ha.isFramebufferTexture){if(jc)if(Va)h.texStorage2D(a.TEXTURE_2D,Ca,yb,Ma.width,Ma.height);else for(Sa=Ma.width,
Ma=Ma.height,Va=0;Va<Ca;Va++)h.texImage2D(a.TEXTURE_2D,Va,yb,Sa,Ma,0,fb,tb,null),Sa>>=1,Ma>>=1}else if(0<Sa.length&&qa){Va&&jc&&h.texStorage2D(a.TEXTURE_2D,Ca,yb,Sa[0].width,Sa[0].height);for(let Ga=0,Rb=Sa.length;Ga<Rb;Ga++)Ca=Sa[Ga],Va?h.texSubImage2D(a.TEXTURE_2D,Ga,0,0,fb,tb,Ca):h.texImage2D(a.TEXTURE_2D,Ga,yb,fb,tb,Ca);ha.generateMipmaps=!1}else Va?(jc&&h.texStorage2D(a.TEXTURE_2D,Ca,yb,Ma.width,Ma.height),h.texSubImage2D(a.TEXTURE_2D,0,0,0,fb,tb,Ma)):h.texImage2D(a.TEXTURE_2D,0,yb,fb,tb,Ma);
M(ha,qa)&&a.generateMipmap(ta);sa.__version=lb.version;if(ha.onUpdate)ha.onUpdate(ha)}ia.__version=ha.version}function Ea(ia,ha,qa,ta,Ca){const lb=C.convert(qa.format,qa.encoding),sa=C.convert(qa.type),Ma=T(qa.internalFormat,lb,sa,qa.encoding);n.get(ha).__hasExternalTextures||(Ca===a.TEXTURE_3D||Ca===a.TEXTURE_2D_ARRAY?h.texImage3D(Ca,0,Ma,ha.width,ha.height,ha.depth,0,lb,sa,null):h.texImage2D(Ca,0,Ma,ha.width,ha.height,0,lb,sa,null));h.bindFramebuffer(a.FRAMEBUFFER,ia);Ha(ha)?rb.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,
ta,Ca,n.get(qa).__webglTexture,0,ya(ha)):(Ca===a.TEXTURE_2D||Ca>=a.TEXTURE_CUBE_MAP_POSITIVE_X&&Ca<=a.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&a.framebufferTexture2D(a.FRAMEBUFFER,ta,Ca,n.get(qa).__webglTexture,0);h.bindFramebuffer(a.FRAMEBUFFER,null)}function ua(ia,ha,qa){a.bindRenderbuffer(a.RENDERBUFFER,ia);if(ha.depthBuffer&&!ha.stencilBuffer){var ta=a.DEPTH_COMPONENT16;qa||Ha(ha)?((qa=ha.depthTexture)&&qa.isDepthTexture&&(1015===qa.type?ta=a.DEPTH_COMPONENT32F:1014===qa.type&&(ta=a.DEPTH_COMPONENT24)),
qa=ya(ha),Ha(ha)?rb.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,qa,ta,ha.width,ha.height):a.renderbufferStorageMultisample(a.RENDERBUFFER,qa,ta,ha.width,ha.height)):a.renderbufferStorage(a.RENDERBUFFER,ta,ha.width,ha.height);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,ia)}else if(ha.depthBuffer&&ha.stencilBuffer)ta=ya(ha),qa&&!1===Ha(ha)?a.renderbufferStorageMultisample(a.RENDERBUFFER,ta,a.DEPTH24_STENCIL8,ha.width,ha.height):Ha(ha)?rb.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,
ta,a.DEPTH24_STENCIL8,ha.width,ha.height):a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,ha.width,ha.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,ia);else for(ia=!0===ha.isWebGLMultipleRenderTargets?ha.texture:[ha.texture],ta=0;ta<ia.length;ta++){var Ca=ia[ta],lb=C.convert(Ca.format,Ca.encoding);const sa=C.convert(Ca.type);Ca=T(Ca.internalFormat,lb,sa,Ca.encoding);lb=ya(ha);qa&&!1===Ha(ha)?a.renderbufferStorageMultisample(a.RENDERBUFFER,lb,Ca,ha.width,
ha.height):Ha(ha)?rb.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,lb,Ca,ha.width,ha.height):a.renderbufferStorage(a.RENDERBUFFER,Ca,ha.width,ha.height)}a.bindRenderbuffer(a.RENDERBUFFER,null)}function Qa(ia){var ha=n.get(ia),qa=!0===ia.isWebGLCubeRenderTarget;if(ia.depthTexture&&!ha.__autoAllocateDepthBuffer){if(qa)throw Error("target.depthTexture not supported in Cube render targets");if(ia&&ia.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");h.bindFramebuffer(a.FRAMEBUFFER,
ha.__webglFramebuffer);if(!ia.depthTexture||!ia.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(ia.depthTexture).__webglTexture&&ia.depthTexture.image.width===ia.width&&ia.depthTexture.image.height===ia.height||(ia.depthTexture.image.width=ia.width,ia.depthTexture.image.height=ia.height,ia.depthTexture.needsUpdate=!0);ea(ia.depthTexture,0);ha=n.get(ia.depthTexture).__webglTexture;qa=ya(ia);if(1026===ia.depthTexture.format)Ha(ia)?
rb.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,ha,0,qa):a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,ha,0);else if(1027===ia.depthTexture.format)Ha(ia)?rb.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,ha,0,qa):a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,ha,0);else throw Error("Unknown depthTexture format");}else if(qa)for(ha.__webglDepthbuffer=[],qa=0;6>qa;qa++)h.bindFramebuffer(a.FRAMEBUFFER,
ha.__webglFramebuffer[qa]),ha.__webglDepthbuffer[qa]=a.createRenderbuffer(),ua(ha.__webglDepthbuffer[qa],ia,!1);else h.bindFramebuffer(a.FRAMEBUFFER,ha.__webglFramebuffer),ha.__webglDepthbuffer=a.createRenderbuffer(),ua(ha.__webglDepthbuffer,ia,!1);h.bindFramebuffer(a.FRAMEBUFFER,null)}function ya(ia){return Math.min(bb,ia.samples)}function Ha(ia){const ha=n.get(ia);return Ia&&0<ia.samples&&!0===b.has("WEBGL_multisampled_render_to_texture")&&!1!==ha.__useRenderToTexture}function Ka(ia,ha){const qa=
ia.encoding,ta=ia.format,Ca=ia.type;if(!0===ia.isCompressedTexture||!0===ia.isVideoTexture||1035===ia.format)return ha;3E3!==qa&&(3001===qa?!1===Ia?!0===b.has("EXT_sRGB")&&1023===ta?(ia.format=1035,ia.minFilter=1006,ia.generateMipmaps=!1):ha=Hh.sRGBToLinear(ha):1023===ta&&1009===Ca||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",qa));return ha}const Ia=t.isWebGL2,gb=t.maxTextures,
Za=t.maxCubemapSize,db=t.maxTextureSize,bb=t.maxSamples,rb=b.has("WEBGL_multisampled_render_to_texture")?b.get("WEBGL_multisampled_render_to_texture"):null,Bb="undefined"===typeof navigator?!1:/OculusBrowser/g.test(navigator.userAgent),Kb=new WeakMap;let Tb;const eb=new WeakMap;let nb=!1;try{nb="undefined"!==typeof OffscreenCanvas&&null!==(new OffscreenCanvas(1,1)).getContext("2d")}catch(ia){}let qb=0;const Hb={[1E3]:a.REPEAT,[1001]:a.CLAMP_TO_EDGE,[1002]:a.MIRRORED_REPEAT},Ab={[1003]:a.NEAREST,[1004]:a.NEAREST_MIPMAP_NEAREST,
[1005]:a.NEAREST_MIPMAP_LINEAR,[1006]:a.LINEAR,[1007]:a.LINEAR_MIPMAP_NEAREST,[1008]:a.LINEAR_MIPMAP_LINEAR};this.allocateTextureUnit=function(){const ia=qb;ia>=gb&&console.warn("THREE.WebGLTextures: Trying to use "+ia+" texture units while this GPU supports only "+gb);qb+=1;return ia};this.resetTextureUnits=function(){qb=0};this.setTexture2D=ea;this.setTexture2DArray=function(ia,ha){const qa=n.get(ia);0<ia.version&&qa.__version!==ia.version?wa(qa,ia,ha):h.bindTexture(a.TEXTURE_2D_ARRAY,qa.__webglTexture,
a.TEXTURE0+ha)};this.setTexture3D=function(ia,ha){const qa=n.get(ia);0<ia.version&&qa.__version!==ia.version?wa(qa,ia,ha):h.bindTexture(a.TEXTURE_3D,qa.__webglTexture,a.TEXTURE0+ha)};this.setTextureCube=function(ia,ha){const qa=n.get(ia);if(0<ia.version&&qa.__version!==ia.version){if(6===ia.image.length){var ta=ma(qa,ia),Ca=ia.source;h.bindTexture(a.TEXTURE_CUBE_MAP,qa.__webglTexture,a.TEXTURE0+ha);var lb=n.get(Ca);if(Ca.version!==lb.__version||!0===ta){h.activeTexture(a.TEXTURE0+ha);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,
ia.flipY);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ia.premultiplyAlpha);a.pixelStorei(a.UNPACK_ALIGNMENT,ia.unpackAlignment);a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,a.NONE);var sa=ia.isCompressedTexture||ia.image[0].isCompressedTexture,Ma=ia.image[0]&&ia.image[0].isDataTexture;ha=[];for(var Sa=0;6>Sa;Sa++)ha[Sa]=sa||Ma?Ma?ia.image[Sa].image:ia.image[Sa]:I(ia.image[Sa],!1,!0,Za),ha[Sa]=Ka(ia,ha[Sa]);var Va=ha[0];Sa=K(Va)||Ia;const tb=C.convert(ia.format,ia.encoding),yb=C.convert(ia.type),
jc=T(ia.internalFormat,tb,yb,ia.encoding),Ga=Ia&&!0!==ia.isVideoTexture;ta=void 0===lb.__version||!0===ta;var fb=U(ia,Va,Sa);va(a.TEXTURE_CUBE_MAP,ia,Sa);if(sa)for(Ga&&ta&&h.texStorage2D(a.TEXTURE_CUBE_MAP,fb,jc,Va.width,Va.height),Ma=0;6>Ma;Ma++)for(sa=ha[Ma].mipmaps,ta=0;ta<sa.length;ta++)Va=sa[ta],1023!==ia.format?null!==tb?Ga?h.compressedTexSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ma,ta,0,0,Va.width,Va.height,tb,Va.data):h.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ma,ta,jc,Va.width,Va.height,
0,Va.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ga?h.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ma,ta,0,0,Va.width,Va.height,tb,yb,Va.data):h.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ma,ta,jc,Va.width,Va.height,0,tb,yb,Va.data);else for(sa=ia.mipmaps,Ga&&ta&&(0<sa.length&&fb++,h.texStorage2D(a.TEXTURE_CUBE_MAP,fb,jc,ha[0].width,ha[0].height)),ta=0;6>ta;ta++)if(Ma)for(Ga?h.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ta,0,0,
0,ha[ta].width,ha[ta].height,tb,yb,ha[ta].data):h.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ta,0,jc,ha[ta].width,ha[ta].height,0,tb,yb,ha[ta].data),Va=0;Va<sa.length;Va++)fb=sa[Va].image[ta].image,Ga?h.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ta,Va+1,0,0,fb.width,fb.height,tb,yb,fb.data):h.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ta,Va+1,jc,fb.width,fb.height,0,tb,yb,fb.data);else for(Ga?h.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ta,0,0,0,tb,yb,ha[ta]):h.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+
ta,0,jc,tb,yb,ha[ta]),Va=0;Va<sa.length;Va++)fb=sa[Va],Ga?h.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ta,Va+1,0,0,tb,yb,fb.image[ta]):h.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ta,Va+1,jc,tb,yb,fb.image[ta]);M(ia,Sa)&&a.generateMipmap(a.TEXTURE_CUBE_MAP);lb.__version=Ca.version;if(ia.onUpdate)ia.onUpdate(ia)}qa.__version=ia.version}}else h.bindTexture(a.TEXTURE_CUBE_MAP,qa.__webglTexture,a.TEXTURE0+ha)};this.rebindTextures=function(ia,ha,qa){const ta=n.get(ia);void 0!==ha&&Ea(ta.__webglFramebuffer,
ia,ia.texture,a.COLOR_ATTACHMENT0,a.TEXTURE_2D);void 0!==qa&&Qa(ia)};this.setupRenderTarget=function(ia){var ha=ia.texture;const qa=n.get(ia);var ta=n.get(ha);ia.addEventListener("dispose",aa);!0!==ia.isWebGLMultipleRenderTargets&&(void 0===ta.__webglTexture&&(ta.__webglTexture=a.createTexture()),ta.__version=ha.version,G.memory.textures++);var Ca=!0===ia.isWebGLCubeRenderTarget;const lb=!0===ia.isWebGLMultipleRenderTargets,sa=K(ia)||Ia;if(Ca){qa.__webglFramebuffer=[];for(var Ma=0;6>Ma;Ma++)qa.__webglFramebuffer[Ma]=
a.createFramebuffer()}else{qa.__webglFramebuffer=a.createFramebuffer();if(lb)if(t.drawBuffers){Ma=ia.texture;for(let tb=0,yb=Ma.length;tb<yb;tb++){var Sa=n.get(Ma[tb]);void 0===Sa.__webglTexture&&(Sa.__webglTexture=a.createTexture(),G.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(Ia&&0<ia.samples&&!1===Ha(ia)){Ma=lb?ha:[ha];qa.__webglMultisampledFramebuffer=a.createFramebuffer();qa.__webglColorRenderbuffer=
[];h.bindFramebuffer(a.FRAMEBUFFER,qa.__webglMultisampledFramebuffer);for(Sa=0;Sa<Ma.length;Sa++){var Va=Ma[Sa];qa.__webglColorRenderbuffer[Sa]=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,qa.__webglColorRenderbuffer[Sa]);var fb=C.convert(Va.format,Va.encoding);const tb=C.convert(Va.type);Va=T(Va.internalFormat,fb,tb,Va.encoding,!0===ia.isXRRenderTarget);fb=ya(ia);a.renderbufferStorageMultisample(a.RENDERBUFFER,fb,Va,ia.width,ia.height);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+
Sa,a.RENDERBUFFER,qa.__webglColorRenderbuffer[Sa])}a.bindRenderbuffer(a.RENDERBUFFER,null);ia.depthBuffer&&(qa.__webglDepthRenderbuffer=a.createRenderbuffer(),ua(qa.__webglDepthRenderbuffer,ia,!0));h.bindFramebuffer(a.FRAMEBUFFER,null)}}if(Ca){h.bindTexture(a.TEXTURE_CUBE_MAP,ta.__webglTexture);va(a.TEXTURE_CUBE_MAP,ha,sa);for(ta=0;6>ta;ta++)Ea(qa.__webglFramebuffer[ta],ia,ha,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+ta);M(ha,sa)&&a.generateMipmap(a.TEXTURE_CUBE_MAP)}else if(lb){ha=ia.texture;
for(let tb=0,yb=ha.length;tb<yb;tb++)ta=ha[tb],Ca=n.get(ta),h.bindTexture(a.TEXTURE_2D,Ca.__webglTexture),va(a.TEXTURE_2D,ta,sa),Ea(qa.__webglFramebuffer,ia,ta,a.COLOR_ATTACHMENT0+tb,a.TEXTURE_2D),M(ta,sa)&&a.generateMipmap(a.TEXTURE_2D)}else{Ca=a.TEXTURE_2D;if(ia.isWebGL3DRenderTarget||ia.isWebGLArrayRenderTarget)Ia?Ca=ia.isWebGL3DRenderTarget?a.TEXTURE_3D:a.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.");h.bindTexture(Ca,
ta.__webglTexture);va(Ca,ha,sa);Ea(qa.__webglFramebuffer,ia,ha,a.COLOR_ATTACHMENT0,Ca);M(ha,sa)&&a.generateMipmap(Ca)}h.unbindTexture();ia.depthBuffer&&Qa(ia)};this.updateRenderTargetMipmap=function(ia){const ha=K(ia)||Ia,qa=!0===ia.isWebGLMultipleRenderTargets?ia.texture:[ia.texture];for(let Ca=0,lb=qa.length;Ca<lb;Ca++){var ta=qa[Ca];if(M(ta,ha)){const sa=ia.isWebGLCubeRenderTarget?a.TEXTURE_CUBE_MAP:a.TEXTURE_2D;ta=n.get(ta).__webglTexture;h.bindTexture(sa,ta);a.generateMipmap(sa);h.unbindTexture()}}};
this.updateMultisampleRenderTarget=function(ia){if(Ia&&0<ia.samples&&!1===Ha(ia)){const Ca=ia.isWebGLMultipleRenderTargets?ia.texture:[ia.texture];var ha=ia.width;const lb=ia.height;let sa=a.COLOR_BUFFER_BIT;const Ma=[],Sa=ia.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,Va=n.get(ia),fb=!0===ia.isWebGLMultipleRenderTargets;if(fb)for(var qa=0;qa<Ca.length;qa++)h.bindFramebuffer(a.FRAMEBUFFER,Va.__webglMultisampledFramebuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+
qa,a.RENDERBUFFER,null),h.bindFramebuffer(a.FRAMEBUFFER,Va.__webglFramebuffer),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0+qa,a.TEXTURE_2D,null,0);h.bindFramebuffer(a.READ_FRAMEBUFFER,Va.__webglMultisampledFramebuffer);h.bindFramebuffer(a.DRAW_FRAMEBUFFER,Va.__webglFramebuffer);for(qa=0;qa<Ca.length;qa++){Ma.push(a.COLOR_ATTACHMENT0+qa);ia.depthBuffer&&Ma.push(Sa);var ta=void 0!==Va.__ignoreDepthValues?Va.__ignoreDepthValues:!1;!1===ta&&(ia.depthBuffer&&(sa|=a.DEPTH_BUFFER_BIT),
ia.stencilBuffer&&(sa|=a.STENCIL_BUFFER_BIT));fb&&a.framebufferRenderbuffer(a.READ_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,Va.__webglColorRenderbuffer[qa]);!0===ta&&(a.invalidateFramebuffer(a.READ_FRAMEBUFFER,[Sa]),a.invalidateFramebuffer(a.DRAW_FRAMEBUFFER,[Sa]));fb&&(ta=n.get(Ca[qa]).__webglTexture,a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,ta,0));a.blitFramebuffer(0,0,ha,lb,0,0,ha,lb,sa,a.NEAREST);Bb&&a.invalidateFramebuffer(a.READ_FRAMEBUFFER,Ma)}h.bindFramebuffer(a.READ_FRAMEBUFFER,
null);h.bindFramebuffer(a.DRAW_FRAMEBUFFER,null);if(fb)for(ia=0;ia<Ca.length;ia++)h.bindFramebuffer(a.FRAMEBUFFER,Va.__webglMultisampledFramebuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+ia,a.RENDERBUFFER,Va.__webglColorRenderbuffer[ia]),ha=n.get(Ca[ia]).__webglTexture,h.bindFramebuffer(a.FRAMEBUFFER,Va.__webglFramebuffer),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0+ia,a.TEXTURE_2D,ha,0);h.bindFramebuffer(a.DRAW_FRAMEBUFFER,Va.__webglMultisampledFramebuffer)}};
this.setupDepthRenderbuffer=Qa;this.setupFrameBufferTexture=Ea;this.useMultisampledRTT=Ha}function mf(a,b,h){const n=h.isWebGL2;return{convert:function(t,C=null){let G;if(1009===t)return a.UNSIGNED_BYTE;if(1017===t)return a.UNSIGNED_SHORT_4_4_4_4;if(1018===t)return a.UNSIGNED_SHORT_5_5_5_1;if(1010===t)return a.BYTE;if(1011===t)return a.SHORT;if(1012===t)return a.UNSIGNED_SHORT;if(1013===t)return a.INT;if(1014===t)return a.UNSIGNED_INT;if(1015===t)return a.FLOAT;if(1016===t){if(n)return a.HALF_FLOAT;
G=b.get("OES_texture_half_float");return null!==G?G.HALF_FLOAT_OES:null}if(1021===t)return a.ALPHA;if(1023===t)return a.RGBA;if(1024===t)return a.LUMINANCE;if(1025===t)return a.LUMINANCE_ALPHA;if(1026===t)return a.DEPTH_COMPONENT;if(1027===t)return a.DEPTH_STENCIL;if(1035===t)return G=b.get("EXT_sRGB"),null!==G?G.SRGB_ALPHA_EXT:null;if(1028===t)return a.RED;if(1029===t)return a.RED_INTEGER;if(1030===t)return a.RG;if(1031===t)return a.RG_INTEGER;if(1033===t)return a.RGBA_INTEGER;if(33776===t||33777===
t||33778===t||33779===t)if(3001===C)if(G=b.get("WEBGL_compressed_texture_s3tc_srgb"),null!==G){if(33776===t)return G.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===t)return G.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===t)return G.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===t)return G.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(G=b.get("WEBGL_compressed_texture_s3tc"),null!==G){if(33776===t)return G.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===t)return G.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===
t)return G.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===t)return G.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(35840===t||35841===t||35842===t||35843===t)if(G=b.get("WEBGL_compressed_texture_pvrtc"),null!==G){if(35840===t)return G.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===t)return G.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===t)return G.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===t)return G.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(36196===t)return G=b.get("WEBGL_compressed_texture_etc1"),
null!==G?G.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===t||37496===t)if(G=b.get("WEBGL_compressed_texture_etc"),null!==G){if(37492===t)return 3001===C?G.COMPRESSED_SRGB8_ETC2:G.COMPRESSED_RGB8_ETC2;if(37496===t)return 3001===C?G.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:G.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(37808===t||37809===t||37810===t||37811===t||37812===t||37813===t||37814===t||37815===t||37816===t||37817===t||37818===t||37819===t||37820===t||37821===t)if(G=b.get("WEBGL_compressed_texture_astc"),
null!==G){if(37808===t)return 3001===C?G.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:G.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===t)return 3001===C?G.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:G.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===t)return 3001===C?G.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:G.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===t)return 3001===C?G.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:G.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===t)return 3001===C?G.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:G.COMPRESSED_RGBA_ASTC_6x6_KHR;
if(37813===t)return 3001===C?G.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:G.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===t)return 3001===C?G.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:G.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===t)return 3001===C?G.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:G.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===t)return 3001===C?G.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:G.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===t)return 3001===C?G.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:G.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===
t)return 3001===C?G.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:G.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===t)return 3001===C?G.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:G.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===t)return 3001===C?G.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:G.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===t)return 3001===C?G.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:G.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(36492===t)if(G=b.get("EXT_texture_compression_bptc"),null!==G){if(36492===t)return 3001===
C?G.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:G.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(36283===t||36284===t||36285===t||36286===t)if(G=b.get("EXT_texture_compression_rgtc"),null!==G){if(36492===t)return G.COMPRESSED_RED_RGTC1_EXT;if(36284===t)return G.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===t)return G.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===t)return G.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;if(1020===t){if(n)return a.UNSIGNED_INT_24_8;G=b.get("WEBGL_depth_texture");return null!==
G?G.UNSIGNED_INT_24_8_WEBGL:null}return void 0!==a[t]?a[t]:null}}}function be(a,b){function h(n,t){n.opacity.value=t.opacity;t.color&&n.diffuse.value.copy(t.color);t.emissive&&n.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity);t.map&&(n.map.value=t.map);t.alphaMap&&(n.alphaMap.value=t.alphaMap);t.bumpMap&&(n.bumpMap.value=t.bumpMap,n.bumpScale.value=t.bumpScale,1===t.side&&(n.bumpScale.value*=-1));t.displacementMap&&(n.displacementMap.value=t.displacementMap,n.displacementScale.value=
t.displacementScale,n.displacementBias.value=t.displacementBias);t.emissiveMap&&(n.emissiveMap.value=t.emissiveMap);t.normalMap&&(n.normalMap.value=t.normalMap,n.normalScale.value.copy(t.normalScale),1===t.side&&n.normalScale.value.negate());t.specularMap&&(n.specularMap.value=t.specularMap);0<t.alphaTest&&(n.alphaTest.value=t.alphaTest);const C=b.get(t).envMap;C&&(n.envMap.value=C,n.flipEnvMap.value=C.isCubeTexture&&!1===C.isRenderTargetTexture?-1:1,n.reflectivity.value=t.reflectivity,n.ior.value=
t.ior,n.refractionRatio.value=t.refractionRatio);t.lightMap&&(n.lightMap.value=t.lightMap,n.lightMapIntensity.value=t.lightMapIntensity*(!0===a.useLegacyLights?Math.PI:1));t.aoMap&&(n.aoMap.value=t.aoMap,n.aoMapIntensity.value=t.aoMapIntensity);let G;t.map?G=t.map:t.specularMap?G=t.specularMap:t.displacementMap?G=t.displacementMap:t.normalMap?G=t.normalMap:t.bumpMap?G=t.bumpMap:t.roughnessMap?G=t.roughnessMap:t.metalnessMap?G=t.metalnessMap:t.alphaMap?G=t.alphaMap:t.emissiveMap?G=t.emissiveMap:t.clearcoatMap?
G=t.clearcoatMap:t.clearcoatNormalMap?G=t.clearcoatNormalMap:t.clearcoatRoughnessMap?G=t.clearcoatRoughnessMap:t.iridescenceMap?G=t.iridescenceMap:t.iridescenceThicknessMap?G=t.iridescenceThicknessMap:t.specularIntensityMap?G=t.specularIntensityMap:t.specularColorMap?G=t.specularColorMap:t.transmissionMap?G=t.transmissionMap:t.thicknessMap?G=t.thicknessMap:t.sheenColorMap?G=t.sheenColorMap:t.sheenRoughnessMap&&(G=t.sheenRoughnessMap);void 0!==G&&(G.isWebGLRenderTarget&&(G=G.texture),!0===G.matrixAutoUpdate&&
G.updateMatrix(),n.uvTransform.value.copy(G.matrix));let I;t.aoMap?I=t.aoMap:t.lightMap&&(I=t.lightMap);void 0!==I&&(I.isWebGLRenderTarget&&(I=I.texture),!0===I.matrixAutoUpdate&&I.updateMatrix(),n.uv2Transform.value.copy(I.matrix))}return{refreshFogUniforms:function(n,t){t.color.getRGB(n.fogColor.value,Y(a));t.isFog?(n.fogNear.value=t.near,n.fogFar.value=t.far):t.isFogExp2&&(n.fogDensity.value=t.density)},refreshMaterialUniforms:function(n,t,C,G,I){if(t.isMeshBasicMaterial)h(n,t);else if(t.isMeshLambertMaterial)h(n,
t);else if(t.isMeshToonMaterial)h(n,t),t.gradientMap&&(n.gradientMap.value=t.gradientMap);else if(t.isMeshPhongMaterial)h(n,t),n.specular.value.copy(t.specular),n.shininess.value=Math.max(t.shininess,1E-4);else if(t.isMeshStandardMaterial)h(n,t),n.roughness.value=t.roughness,n.metalness.value=t.metalness,t.roughnessMap&&(n.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(n.metalnessMap.value=t.metalnessMap),b.get(t).envMap&&(n.envMapIntensity.value=t.envMapIntensity),t.isMeshPhysicalMaterial&&
(n.ior.value=t.ior,0<t.sheen&&(n.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),n.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(n.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(n.sheenRoughnessMap.value=t.sheenRoughnessMap)),0<t.clearcoat&&(n.clearcoat.value=t.clearcoat,n.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(n.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(n.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&
(n.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),n.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&n.clearcoatNormalScale.value.negate())),0<t.iridescence&&(n.iridescence.value=t.iridescence,n.iridescenceIOR.value=t.iridescenceIOR,n.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],n.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(n.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(n.iridescenceThicknessMap.value=
t.iridescenceThicknessMap)),0<t.transmission&&(n.transmission.value=t.transmission,n.transmissionSamplerMap.value=I.texture,n.transmissionSamplerSize.value.set(I.width,I.height),t.transmissionMap&&(n.transmissionMap.value=t.transmissionMap),n.thickness.value=t.thickness,t.thicknessMap&&(n.thicknessMap.value=t.thicknessMap),n.attenuationDistance.value=t.attenuationDistance,n.attenuationColor.value.copy(t.attenuationColor)),n.specularIntensity.value=t.specularIntensity,n.specularColor.value.copy(t.specularColor),
t.specularIntensityMap&&(n.specularIntensityMap.value=t.specularIntensityMap),t.specularColorMap&&(n.specularColorMap.value=t.specularColorMap));else if(t.isMeshMatcapMaterial)h(n,t),t.matcap&&(n.matcap.value=t.matcap);else if(t.isMeshDepthMaterial)h(n,t);else if(t.isMeshDistanceMaterial)h(n,t),n.referencePosition.value.copy(t.referencePosition),n.nearDistance.value=t.nearDistance,n.farDistance.value=t.farDistance;else if(t.isMeshNormalMaterial)h(n,t);else if(t.isLineBasicMaterial)n.diffuse.value.copy(t.color),
n.opacity.value=t.opacity,t.isLineDashedMaterial&&(n.dashSize.value=t.dashSize,n.totalSize.value=t.dashSize+t.gapSize,n.scale.value=t.scale);else if(t.isPointsMaterial){n.diffuse.value.copy(t.color);n.opacity.value=t.opacity;n.size.value=t.size*C;n.scale.value=.5*G;t.map&&(n.map.value=t.map);t.alphaMap&&(n.alphaMap.value=t.alphaMap);0<t.alphaTest&&(n.alphaTest.value=t.alphaTest);let K;t.map?K=t.map:t.alphaMap&&(K=t.alphaMap);void 0!==K&&(!0===K.matrixAutoUpdate&&K.updateMatrix(),n.uvTransform.value.copy(K.matrix))}else if(t.isSpriteMaterial){n.diffuse.value.copy(t.color);
n.opacity.value=t.opacity;n.rotation.value=t.rotation;t.map&&(n.map.value=t.map);t.alphaMap&&(n.alphaMap.value=t.alphaMap);0<t.alphaTest&&(n.alphaTest.value=t.alphaTest);let K;t.map?K=t.map:t.alphaMap&&(K=t.alphaMap);void 0!==K&&(!0===K.matrixAutoUpdate&&K.updateMatrix(),n.uvTransform.value.copy(K.matrix))}else t.isShadowMaterial?(n.color.value.copy(t.color),n.opacity.value=t.opacity):t.isShaderMaterial&&(t.uniformsNeedUpdate=!1)}}}function Ne(a,b,h,n){function t(U){const V=U.uniforms;let ba=0;for(let ma=
0,wa=V.length;ma<wa;ma++){const Ea=V[ma];var aa=0,S=0;var ea=Array.isArray(Ea.value)?Ea.value:[Ea.value];for(let ua=0,Qa=ea.length;ua<Qa;ua++){var va=C(ea[ua]);aa+=va.boundary;S+=va.storage}Ea.__data=new Float32Array(S/Float32Array.BYTES_PER_ELEMENT);Ea.__offset=ba;0<ma&&(ea=ba%16,va=16-ea,0!==ea&&0>va-aa&&(ba+=16-ea,Ea.__offset=ba));ba+=S}ea=ba%16;0<ea&&(ba+=16-ea);U.__size=ba;U.__cache={};return this}function C(U){const V={boundary:0,storage:0};"number"===typeof U?(V.boundary=4,V.storage=4):U.isVector2?
(V.boundary=8,V.storage=8):U.isVector3||U.isColor?(V.boundary=16,V.storage=12):U.isVector4?(V.boundary=16,V.storage=16):U.isMatrix3?(V.boundary=48,V.storage=48):U.isMatrix4?(V.boundary=64,V.storage=64):U.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",U);return V}function G(U){U=U.target;U.removeEventListener("dispose",G);const V=M.indexOf(U.__bindingPointIndex);M.splice(V,1);
a.deleteBuffer(I[U.id]);delete I[U.id];delete K[U.id]}let I={},K={},M=[];const T=h.isWebGL2?a.getParameter(a.MAX_UNIFORM_BUFFER_BINDINGS):0;return{bind:function(U,V){n.uniformBlockBinding(U,V.program)},update:function(U,V){var ba=I[U.id];if(void 0===ba){t(U);a:{for(ba=0;ba<T;ba++)if(-1===M.indexOf(ba)){M.push(ba);break a}console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached.");ba=0}U.__bindingPointIndex=ba;var aa=a.createBuffer(),S=U.__size,ea=U.usage;
a.bindBuffer(a.UNIFORM_BUFFER,aa);a.bufferData(a.UNIFORM_BUFFER,S,ea);a.bindBuffer(a.UNIFORM_BUFFER,null);a.bindBufferBase(a.UNIFORM_BUFFER,ba,aa);ba=aa;I[U.id]=ba;U.addEventListener("dispose",G)}n.updateUBOMapping(U,V.program);V=b.render.frame;if(K[U.id]!==V){ba=U.uniforms;aa=U.__cache;a.bindBuffer(a.UNIFORM_BUFFER,I[U.id]);for(let ua=0,Qa=ba.length;ua<Qa;ua++){S=ba[ua];a:{ea=ua;var va=aa,ma=S.value;if(void 0===va[ea]){if("number"===typeof ma)va[ea]=ma;else{ma=Array.isArray(ma)?ma:[ma];var wa=[];
for(var Ea=0;Ea<ma.length;Ea++)wa.push(ma[Ea].clone());va[ea]=wa}ea=!0}else{if("number"===typeof ma){if(va[ea]!==ma){va[ea]=ma;ea=!0;break a}}else for(ea=Array.isArray(va[ea])?va[ea]:[va[ea]],va=Array.isArray(ma)?ma:[ma],ma=0;ma<ea.length;ma++)if(wa=ea[ma],!1===wa.equals(va[ma])){wa.copy(va[ma]);ea=!0;break a}ea=!1}}if(!0===ea){ea=S.__offset;va=Array.isArray(S.value)?S.value:[S.value];ma=0;for(wa=0;wa<va.length;wa++){Ea=va[wa];const ya=C(Ea);"number"===typeof Ea?(S.__data[0]=Ea,a.bufferSubData(a.UNIFORM_BUFFER,
ea+ma,S.__data)):Ea.isMatrix3?(S.__data[0]=Ea.elements[0],S.__data[1]=Ea.elements[1],S.__data[2]=Ea.elements[2],S.__data[3]=Ea.elements[0],S.__data[4]=Ea.elements[3],S.__data[5]=Ea.elements[4],S.__data[6]=Ea.elements[5],S.__data[7]=Ea.elements[0],S.__data[8]=Ea.elements[6],S.__data[9]=Ea.elements[7],S.__data[10]=Ea.elements[8],S.__data[11]=Ea.elements[0]):(Ea.toArray(S.__data,ma),ma+=ya.storage/Float32Array.BYTES_PER_ELEMENT)}a.bufferSubData(a.UNIFORM_BUFFER,ea,S.__data)}}a.bindBuffer(a.UNIFORM_BUFFER,
null);K[U.id]=V}},dispose:function(){for(const U in I)a.deleteBuffer(I[U]);M=[];I={};K={}}}}function nf(){const a=w("canvas");a.style.display="block";return a}function Xd(a={}){function b(ja,Oa){for(let Ya=0;Ya<ja.length;Ya++){const Na=S.getContext(ja[Ya],Oa);if(null!==Na)return Na}return null}function h(){Rb=new Ob(Ga);rc=new ra(Ga,Rb,a);Rb.init(rc);ee=new mf(Ga,Rb,rc);hc=new lf(Ga,Rb,rc);Ed=new ec(Ga);Hc=new le;Pc=new Pf(Ga,Rb,hc,Hc,rc,ee,Ed);of=new O(db);pf=new Xa(db);Uf=new Z(Ga,rc);Re=new la(Ga,
Rb,Uf,rc);Ph=new Db(Ga,Uf,Ed,Re);qf=new bc(Ga,Ph,Uf,Ed);cj=new Pb(Ga,rc,Pc);fe=new za(Hc);ne=new id(db,of,pf,Rb,rc,Re,fe);Qh=new be(db,Hc);Eg=new me;Fg=new Xc(Rb,rc);De=new da(db,of,pf,hc,qf,Ha,Ea);Td=new Of(db,qf,rc);Gg=new Ne(Ga,Ed,rc,hc);dj=new W(Ga,Rb,Ed,rc);ej=new Gb(Ga,Rb,Ed,rc);Ed.programs=ne.programs;db.capabilities=rc;db.extensions=Rb;db.properties=Hc;db.renderLists=Eg;db.shadowMap=Td;db.state=hc;db.info=Ed}function n(ja){ja.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");
bb=!0}function t(){console.log("THREE.WebGLRenderer: Context Restored.");bb=!1;const ja=Ed.autoReset,Oa=Td.enabled,Ya=Td.autoUpdate,Na=Td.needsUpdate,$a=Td.type;h();Ed.autoReset=ja;Td.enabled=Oa;Td.autoUpdate=Ya;Td.needsUpdate=Na;Td.type=$a}function C(ja){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ja.statusMessage)}function G(ja){ja=ja.target;ja.removeEventListener("dispose",G);I(ja);Hc.remove(ja)}function I(ja){const Oa=Hc.get(ja).programs;void 0!==Oa&&(Oa.forEach(function(Ya){ne.releaseProgram(Ya)}),
ja.isShaderMaterial&&ne.releaseShaderCache(ja))}function K(){Se.stop()}function M(){Se.start()}function T(ja,Oa,Ya,Na){if(!1!==ja.visible){if(ja.layers.test(Oa.layers))if(ja.isGroup)Ya=ja.renderOrder;else if(ja.isLOD)!0===ja.autoUpdate&&ja.update(Oa);else if(ja.isLight)Ia.pushLight(ja),ja.castShadow&&Ia.pushShadow(ja);else if(ja.isSprite){if(!ja.frustumCulled||Ma.intersectsSprite(ja)){Na&&yb.setFromMatrixPosition(ja.matrixWorld).applyMatrix4(tb);var $a=qf.update(ja),Fb=ja.material;Fb.visible&&Ka.push(ja,
$a,Fb,Ya,yb.z,null)}}else if(ja.isMesh||ja.isLine||ja.isPoints)if(ja.isSkinnedMesh&&ja.skeleton.frame!==Ed.render.frame&&(ja.skeleton.update(),ja.skeleton.frame=Ed.render.frame),!ja.frustumCulled||Ma.intersectsObject(ja))if(Na&&yb.setFromMatrixPosition(ja.matrixWorld).applyMatrix4(tb),$a=qf.update(ja),Fb=ja.material,Array.isArray(Fb)){const Lb=$a.groups;for(let sb=0,sc=Lb.length;sb<sc;sb++){const Dc=Lb[sb],nc=Fb[Dc.materialIndex];nc&&nc.visible&&Ka.push(ja,$a,nc,Ya,yb.z,Dc)}}else Fb.visible&&Ka.push(ja,
$a,Fb,Ya,yb.z,null);ja=ja.children;for(let Lb=0,sb=ja.length;Lb<sb;Lb++)T(ja[Lb],Oa,Ya,Na)}}function U(ja,Oa,Ya,Na){const $a=ja.opaque,Fb=ja.transmissive;ja=ja.transparent;Ia.setupLightsView(Ya);!0===Sa&&fe.setGlobalState(db.clippingPlanes,Ya);if(0<Fb.length){var Lb=rc.isWebGL2;null===fb&&(fb=new Sd(1024,1024,{generateMipmaps:!0,type:Rb.has("EXT_color_buffer_half_float")?1016:1009,minFilter:1008,samples:Lb&&!0===wa?4:0}));Lb=db.getRenderTarget();db.setRenderTarget(fb);db.clear();const sb=db.toneMapping;
db.toneMapping=0;V($a,Oa,Ya);db.toneMapping=sb;Pc.updateMultisampleRenderTarget(fb);Pc.updateRenderTargetMipmap(fb);db.setRenderTarget(Lb)}Na&&hc.viewport(nb.copy(Na));0<$a.length&&V($a,Oa,Ya);0<Fb.length&&V(Fb,Oa,Ya);0<ja.length&&V(ja,Oa,Ya);hc.buffers.depth.setTest(!0);hc.buffers.depth.setMask(!0);hc.buffers.color.setMask(!0);hc.setPolygonOffset(!1)}function V(ja,Oa,Ya){const Na=!0===Oa.isScene?Oa.overrideMaterial:null;for(let nc=0,ed=ja.length;nc<ed;nc++){var $a=ja[nc],Fb=$a.object,Lb=$a.geometry,
sb=null===Na?$a.material:Na,sc=$a.group;if(Fb.layers.test(Ya.layers)){$a=Oa;var Dc=Ya;Fb.onBeforeRender(db,$a,Dc,Lb,sb,sc);Fb.modelViewMatrix.multiplyMatrices(Dc.matrixWorldInverse,Fb.matrixWorld);Fb.normalMatrix.getNormalMatrix(Fb.modelViewMatrix);sb.onBeforeRender(db,$a,Dc,Lb,Fb,sc);!0===sb.transparent&&2===sb.side&&!1===sb.forceSinglePass?(sb.side=1,sb.needsUpdate=!0,db.renderBufferDirect(Dc,$a,Lb,sb,Fb,sc),sb.side=0,sb.needsUpdate=!0,db.renderBufferDirect(Dc,$a,Lb,sb,Fb,sc),sb.side=2):db.renderBufferDirect(Dc,
$a,Lb,sb,Fb,sc);Fb.onAfterRender(db,$a,Dc,Lb,sb,sc)}}}function ba(ja,Oa,Ya){!0!==Oa.isScene&&(Oa=jc);const Na=Hc.get(ja),$a=Ia.state.lights,Fb=$a.state.version,Lb=ne.getParameters(ja,$a.state,Ia.state.shadowsArray,Oa,Ya),sb=ne.getProgramCacheKey(Lb);let sc=Na.programs;Na.environment=ja.isMeshStandardMaterial?Oa.environment:null;Na.fog=Oa.fog;Na.envMap=(ja.isMeshStandardMaterial?pf:of).get(ja.envMap||Na.environment);void 0===sc&&(ja.addEventListener("dispose",G),sc=new Map,Na.programs=sc);Oa=sc.get(sb);
if(void 0!==Oa){if(Na.currentProgram===Oa&&Na.lightsStateVersion===Fb)return aa(ja,Lb),Oa}else Lb.uniforms=ne.getUniforms(ja),ja.onBuild(Ya,Lb,db),ja.onBeforeCompile(Lb,db),Oa=ne.acquireProgram(Lb,sb),sc.set(sb,Oa),Na.uniforms=Lb.uniforms;Ya=Na.uniforms;if(!ja.isShaderMaterial&&!ja.isRawShaderMaterial||!0===ja.clipping)Ya.clippingPlanes=fe.uniform;aa(ja,Lb);Na.needsLights=ja.isMeshLambertMaterial||ja.isMeshToonMaterial||ja.isMeshPhongMaterial||ja.isMeshStandardMaterial||ja.isShadowMaterial||ja.isShaderMaterial&&
!0===ja.lights;Na.lightsStateVersion=Fb;Na.needsLights&&(Ya.ambientLightColor.value=$a.state.ambient,Ya.lightProbe.value=$a.state.probe,Ya.directionalLights.value=$a.state.directional,Ya.directionalLightShadows.value=$a.state.directionalShadow,Ya.spotLights.value=$a.state.spot,Ya.spotLightShadows.value=$a.state.spotShadow,Ya.rectAreaLights.value=$a.state.rectArea,Ya.ltc_1.value=$a.state.rectAreaLTC1,Ya.ltc_2.value=$a.state.rectAreaLTC2,Ya.pointLights.value=$a.state.point,Ya.pointLightShadows.value=
$a.state.pointShadow,Ya.hemisphereLights.value=$a.state.hemi,Ya.directionalShadowMap.value=$a.state.directionalShadowMap,Ya.directionalShadowMatrix.value=$a.state.directionalShadowMatrix,Ya.spotShadowMap.value=$a.state.spotShadowMap,Ya.spotLightMatrix.value=$a.state.spotLightMatrix,Ya.spotLightMap.value=$a.state.spotLightMap,Ya.pointShadowMap.value=$a.state.pointShadowMap,Ya.pointShadowMatrix.value=$a.state.pointShadowMatrix);ja=Oa.getUniforms();ja=Bg.seqWithValue(ja.seq,Ya);Na.currentProgram=Oa;
Na.uniformsList=ja;return Oa}function aa(ja,Oa){ja=Hc.get(ja);ja.outputEncoding=Oa.outputEncoding;ja.instancing=Oa.instancing;ja.skinning=Oa.skinning;ja.morphTargets=Oa.morphTargets;ja.morphNormals=Oa.morphNormals;ja.morphColors=Oa.morphColors;ja.morphTargetsCount=Oa.morphTargetsCount;ja.numClippingPlanes=Oa.numClippingPlanes;ja.numIntersection=Oa.numClipIntersection;ja.vertexAlphas=Oa.vertexAlphas;ja.vertexTangents=Oa.vertexTangents;ja.toneMapping=Oa.toneMapping}this.isWebGLRenderer=!0;const S=void 0!==
a.canvas?a.canvas:nf();var ea=void 0!==a.context?a.context:null,va=void 0!==a.depth?a.depth:!0;const ma=void 0!==a.stencil?a.stencil:!0,wa=void 0!==a.antialias?a.antialias:!1,Ea=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,ua=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,Qa=void 0!==a.powerPreference?a.powerPreference:"default",ya=void 0!==a.failIfMajorPerformanceCaveat?a.failIfMajorPerformanceCaveat:!1;let Ha;Ha=null!==ea?ea.getContextAttributes().alpha:void 0!==a.alpha?a.alpha:
!1;let Ka=null,Ia=null;const gb=[],Za=[];this.domElement=S;this.debug={checkShaderErrors:!0};this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.clippingPlanes=[];this.localClippingEnabled=!1;this.outputEncoding=3E3;this.useLegacyLights=!0;this.toneMapping=0;this.toneMappingExposure=1;const db=this;let bb=!1,rb=0,Bb=0,Kb=null,Tb=-1,eb=null;const nb=new zc,qb=new zc;let Hb=null,Ab=S.width,ia=S.height,ha=1,qa=null,ta=null;const Ca=new zc(0,0,Ab,ia),
lb=new zc(0,0,Ab,ia);let sa=!1;const Ma=new Dg;let Sa=!1,Va=!1,fb=null;const tb=new $b,yb=new ka,jc={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ga=ea;try{ea={alpha:!0,depth:va,stencil:ma,antialias:wa,premultipliedAlpha:Ea,preserveDrawingBuffer:ua,powerPreference:Qa,failIfMajorPerformanceCaveat:ya};"setAttribute"in S&&S.setAttribute("data-engine","three.js r150");S.addEventListener("webglcontextlost",n,!1);S.addEventListener("webglcontextrestored",t,!1);S.addEventListener("webglcontextcreationerror",
C,!1);if(null===Ga&&(va=["webgl2","webgl","experimental-webgl"],!0===db.isWebGL1Renderer&&va.shift(),Ga=b(va,ea),null===Ga)){if(b(va))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.");}void 0===Ga.getShaderPrecisionFormat&&(Ga.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ja){throw console.error("THREE.WebGLRenderer: "+ja.message),ja;}let Rb,rc,hc,Ed,Hc,Pc,of,pf,Uf,Ph,qf,ne,Qh,Eg,Fg,fe,Td,
De,cj,dj,ej,ee,Re,Gg;h();const Fd=new Xk(db,Ga);this.xr=Fd;this.getContext=function(){return Ga};this.getContextAttributes=function(){return Ga.getContextAttributes()};this.forceContextLoss=function(){const ja=Rb.get("WEBGL_lose_context");ja&&ja.loseContext()};this.forceContextRestore=function(){const ja=Rb.get("WEBGL_lose_context");ja&&ja.restoreContext()};this.getPixelRatio=function(){return ha};this.setPixelRatio=function(ja){void 0!==ja&&(ha=ja,this.setSize(Ab,ia,!1))};this.getSize=function(ja){return ja.set(Ab,
ia)};this.setSize=function(ja,Oa,Ya=!0){Fd.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Ab=ja,ia=Oa,S.width=Math.floor(ja*ha),S.height=Math.floor(Oa*ha),!0===Ya&&(S.style.width=ja+"px",S.style.height=Oa+"px"),this.setViewport(0,0,ja,Oa))};this.getDrawingBufferSize=function(ja){return ja.set(Ab*ha,ia*ha).floor()};this.setDrawingBufferSize=function(ja,Oa,Ya){Ab=ja;ia=Oa;ha=Ya;S.width=Math.floor(ja*Ya);S.height=Math.floor(Oa*Ya);this.setViewport(0,
0,ja,Oa)};this.getCurrentViewport=function(ja){return ja.copy(nb)};this.getViewport=function(ja){return ja.copy(Ca)};this.setViewport=function(ja,Oa,Ya,Na){ja.isVector4?Ca.set(ja.x,ja.y,ja.z,ja.w):Ca.set(ja,Oa,Ya,Na);hc.viewport(nb.copy(Ca).multiplyScalar(ha).floor())};this.getScissor=function(ja){return ja.copy(lb)};this.setScissor=function(ja,Oa,Ya,Na){ja.isVector4?lb.set(ja.x,ja.y,ja.z,ja.w):lb.set(ja,Oa,Ya,Na);hc.scissor(qb.copy(lb).multiplyScalar(ha).floor())};this.getScissorTest=function(){return sa};
this.setScissorTest=function(ja){hc.setScissorTest(sa=ja)};this.setOpaqueSort=function(ja){qa=ja};this.setTransparentSort=function(ja){ta=ja};this.getClearColor=function(ja){return ja.copy(De.getClearColor())};this.setClearColor=function(){De.setClearColor.apply(De,arguments)};this.getClearAlpha=function(){return De.getClearAlpha()};this.setClearAlpha=function(){De.setClearAlpha.apply(De,arguments)};this.clear=function(ja=!0,Oa=!0,Ya=!0){let Na=0;ja&&(Na|=Ga.COLOR_BUFFER_BIT);Oa&&(Na|=Ga.DEPTH_BUFFER_BIT);
Ya&&(Na|=Ga.STENCIL_BUFFER_BIT);Ga.clear(Na)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,!0,!1)};this.clearStencil=function(){this.clear(!1,!1,!0)};this.dispose=function(){S.removeEventListener("webglcontextlost",n,!1);S.removeEventListener("webglcontextrestored",t,!1);S.removeEventListener("webglcontextcreationerror",C,!1);Eg.dispose();Fg.dispose();Hc.dispose();of.dispose();pf.dispose();qf.dispose();Re.dispose();Gg.dispose();ne.dispose();Fd.dispose();
Fd.removeEventListener("sessionstart",K);Fd.removeEventListener("sessionend",M);fb&&(fb.dispose(),fb=null);Se.stop()};this.renderBufferDirect=function(ja,Oa,Ya,Na,$a,Fb){null===Oa&&(Oa=jc);var Lb=$a.isMesh&&0>$a.matrixWorld.determinant(),sb=Oa;!0!==sb.isScene&&(sb=jc);Pc.resetTextureUnits();Oa=sb.fog;var sc=Na.isMeshStandardMaterial?sb.environment:null,Dc=null===Kb?db.outputEncoding:!0===Kb.isXRRenderTarget?Kb.texture.encoding:3E3;sc=(Na.isMeshStandardMaterial?pf:of).get(Na.envMap||sc);var nc=!0===
Na.vertexColors&&!!Ya.attributes.color&&4===Ya.attributes.color.itemSize,ed=!!Na.normalMap&&!!Ya.attributes.tangent,Te=!!Ya.morphAttributes.position,oe=!!Ya.morphAttributes.normal;const Rh=!!Ya.morphAttributes.color,Sh=Na.toneMapped?db.toneMapping:0;var ac=Ya.morphAttributes.position||Ya.morphAttributes.normal||Ya.morphAttributes.color;const Yk=void 0!==ac?ac.length:0;ac=Hc.get(Na);const Zk=Ia.state.lights;!0!==Sa||!0!==Va&&ja===eb||fe.setState(Na,ja,ja===eb&&Na.id===Tb);let $c=!1;Na.version===ac.__version?
ac.needsLights&&ac.lightsStateVersion!==Zk.state.version?$c=!0:ac.outputEncoding!==Dc?$c=!0:$a.isInstancedMesh&&!1===ac.instancing?$c=!0:$a.isInstancedMesh||!0!==ac.instancing?$a.isSkinnedMesh&&!1===ac.skinning?$c=!0:$a.isSkinnedMesh||!0!==ac.skinning?ac.envMap!==sc?$c=!0:!0===Na.fog&&ac.fog!==Oa?$c=!0:void 0===ac.numClippingPlanes||ac.numClippingPlanes===fe.numPlanes&&ac.numIntersection===fe.numIntersection?ac.vertexAlphas!==nc?$c=!0:ac.vertexTangents!==ed?$c=!0:ac.morphTargets!==Te?$c=!0:ac.morphNormals!==
oe?$c=!0:ac.morphColors!==Rh?$c=!0:ac.toneMapping!==Sh?$c=!0:!0===rc.isWebGL2&&ac.morphTargetsCount!==Yk&&($c=!0):$c=!0:$c=!0:$c=!0:($c=!0,ac.__version=Na.version);Dc=ac.currentProgram;!0===$c&&(Dc=ba(Na,sb,$a));Te=ed=oe=!1;sb=Dc.getUniforms();nc=ac.uniforms;hc.useProgram(Dc.program)&&(Te=ed=oe=!0);Na.id!==Tb&&(Tb=Na.id,ed=!0);if(oe||eb!==ja){sb.setValue(Ga,"projectionMatrix",ja.projectionMatrix);rc.logarithmicDepthBuffer&&sb.setValue(Ga,"logDepthBufFC",2/(Math.log(ja.far+1)/Math.LN2));eb!==ja&&(eb=
ja,Te=ed=!0);if(Na.isShaderMaterial||Na.isMeshPhongMaterial||Na.isMeshToonMaterial||Na.isMeshStandardMaterial||Na.envMap)oe=sb.map.cameraPosition,void 0!==oe&&oe.setValue(Ga,yb.setFromMatrixPosition(ja.matrixWorld));(Na.isMeshPhongMaterial||Na.isMeshToonMaterial||Na.isMeshLambertMaterial||Na.isMeshBasicMaterial||Na.isMeshStandardMaterial||Na.isShaderMaterial)&&sb.setValue(Ga,"isOrthographic",!0===ja.isOrthographicCamera);(Na.isMeshPhongMaterial||Na.isMeshToonMaterial||Na.isMeshLambertMaterial||Na.isMeshBasicMaterial||
Na.isMeshStandardMaterial||Na.isShaderMaterial||Na.isShadowMaterial||$a.isSkinnedMesh)&&sb.setValue(Ga,"viewMatrix",ja.matrixWorldInverse)}$a.isSkinnedMesh&&(sb.setOptional(Ga,$a,"bindMatrix"),sb.setOptional(Ga,$a,"bindMatrixInverse"),ja=$a.skeleton)&&(rc.floatVertexTextures?(null===ja.boneTexture&&ja.computeBoneTexture(),sb.setValue(Ga,"boneTexture",ja.boneTexture,Pc),sb.setValue(Ga,"boneTextureSize",ja.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."));
ja=Ya.morphAttributes;(void 0!==ja.position||void 0!==ja.normal||void 0!==ja.color&&!0===rc.isWebGL2)&&cj.update($a,Ya,Dc);if(ed||ac.receiveShadow!==$a.receiveShadow)ac.receiveShadow=$a.receiveShadow,sb.setValue(Ga,"receiveShadow",$a.receiveShadow);Na.isMeshGouraudMaterial&&null!==Na.envMap&&(nc.envMap.value=sc,nc.flipEnvMap.value=sc.isCubeTexture&&!1===sc.isRenderTargetTexture?-1:1);ed&&(sb.setValue(Ga,"toneMappingExposure",db.toneMappingExposure),ac.needsLights&&(ja=Te,nc.ambientLightColor.needsUpdate=
ja,nc.lightProbe.needsUpdate=ja,nc.directionalLights.needsUpdate=ja,nc.directionalLightShadows.needsUpdate=ja,nc.pointLights.needsUpdate=ja,nc.pointLightShadows.needsUpdate=ja,nc.spotLights.needsUpdate=ja,nc.spotLightShadows.needsUpdate=ja,nc.rectAreaLights.needsUpdate=ja,nc.hemisphereLights.needsUpdate=ja),Oa&&!0===Na.fog&&Qh.refreshFogUniforms(nc,Oa),Qh.refreshMaterialUniforms(nc,Na,ha,ia,fb),Bg.upload(Ga,ac.uniformsList,nc,Pc));Na.isShaderMaterial&&!0===Na.uniformsNeedUpdate&&(Bg.upload(Ga,ac.uniformsList,
nc,Pc),Na.uniformsNeedUpdate=!1);Na.isSpriteMaterial&&sb.setValue(Ga,"center",$a.center);sb.setValue(Ga,"modelViewMatrix",$a.modelViewMatrix);sb.setValue(Ga,"normalMatrix",$a.normalMatrix);sb.setValue(Ga,"modelMatrix",$a.matrixWorld);if(Na.isShaderMaterial||Na.isRawShaderMaterial){Oa=Na.uniformsGroups;for(let Th=0,$k=Oa.length;Th<$k;Th++)rc.isWebGL2?(ja=Oa[Th],Gg.update(ja,Dc),Gg.bind(ja,Dc)):console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}Oa=Dc;hc.setMaterial(Na,
Lb);ja=Ya.index;sc=1;!0===Na.wireframe&&(ja=Ph.getWireframeAttribute(Ya),sc=2);sb=Ya.drawRange;ac=Ya.attributes.position;Lb=sb.start*sc;sb=(sb.start+sb.count)*sc;null!==Fb&&(Lb=Math.max(Lb,Fb.start*sc),sb=Math.min(sb,(Fb.start+Fb.count)*sc));null!==ja?(Lb=Math.max(Lb,0),sb=Math.min(sb,ja.count)):void 0!==ac&&null!==ac&&(Lb=Math.max(Lb,0),sb=Math.min(sb,ac.count));Fb=sb-Lb;0>Fb||Infinity===Fb||(Re.setup($a,Na,Oa,Ya,ja),Oa=dj,null!==ja&&(ja=Uf.get(ja),Oa=ej,Oa.setIndex(ja)),$a.isMesh?!0===Na.wireframe?
(hc.setLineWidth(Na.wireframeLinewidth*(null===Kb?ha:1)),Oa.setMode(Ga.LINES)):Oa.setMode(Ga.TRIANGLES):$a.isLine?(Na=Na.linewidth,void 0===Na&&(Na=1),hc.setLineWidth(Na*(null===Kb?ha:1)),$a.isLineSegments?Oa.setMode(Ga.LINES):$a.isLineLoop?Oa.setMode(Ga.LINE_LOOP):Oa.setMode(Ga.LINE_STRIP)):$a.isPoints?Oa.setMode(Ga.POINTS):$a.isSprite&&Oa.setMode(Ga.TRIANGLES),$a.isInstancedMesh?Oa.renderInstances(Lb,Fb,$a.count):Ya.isInstancedBufferGeometry?Oa.renderInstances(Lb,Fb,Math.min(Ya.instanceCount,void 0!==
Ya._maxInstanceCount?Ya._maxInstanceCount:Infinity)):Oa.render(Lb,Fb))};this.compile=function(ja,Oa){function Ya(Na,$a,Fb){!0===Na.transparent&&2===Na.side&&!1===Na.forceSinglePass?(Na.side=1,Na.needsUpdate=!0,ba(Na,$a,Fb),Na.side=0,Na.needsUpdate=!0,ba(Na,$a,Fb),Na.side=2):ba(Na,$a,Fb)}Ia=Fg.get(ja);Ia.init();Za.push(Ia);ja.traverseVisible(function(Na){Na.isLight&&Na.layers.test(Oa.layers)&&(Ia.pushLight(Na),Na.castShadow&&Ia.pushShadow(Na))});Ia.setupLights(db.useLegacyLights);ja.traverse(function(Na){const $a=
Na.material;if($a)if(Array.isArray($a))for(let Fb=0;Fb<$a.length;Fb++)Ya($a[Fb],ja,Na);else Ya($a,ja,Na)});Za.pop();Ia=null};let Uh=null;const Se=new fa;Se.setAnimationLoop(function(ja){Uh&&Uh(ja)});"undefined"!==typeof self&&Se.setContext(self);this.setAnimationLoop=function(ja){Uh=ja;Fd.setAnimationLoop(ja);null===ja?Se.stop():Se.start()};Fd.addEventListener("sessionstart",K);Fd.addEventListener("sessionend",M);this.render=function(ja,Oa){if(void 0!==Oa&&!0!==Oa.isCamera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");
else if(!0!==bb){!0===ja.matrixWorldAutoUpdate&&ja.updateMatrixWorld();null===Oa.parent&&!0===Oa.matrixWorldAutoUpdate&&Oa.updateMatrixWorld();!0===Fd.enabled&&!0===Fd.isPresenting&&(!0===Fd.cameraAutoUpdate&&Fd.updateCamera(Oa),Oa=Fd.getCamera());if(!0===ja.isScene)ja.onBeforeRender(db,ja,Oa,Kb);Ia=Fg.get(ja,Za.length);Ia.init();Za.push(Ia);tb.multiplyMatrices(Oa.projectionMatrix,Oa.matrixWorldInverse);Ma.setFromProjectionMatrix(tb);Va=this.localClippingEnabled;Sa=fe.init(this.clippingPlanes,Va);
Ka=Eg.get(ja,gb.length);Ka.init();gb.push(Ka);T(ja,Oa,0,db.sortObjects);Ka.finish();!0===db.sortObjects&&Ka.sort(qa,ta);!0===Sa&&fe.beginShadows();Td.render(Ia.state.shadowsArray,ja,Oa);!0===Sa&&fe.endShadows();!0===this.info.autoReset&&this.info.reset();De.render(Ka,ja);Ia.setupLights(db.useLegacyLights);if(Oa.isArrayCamera){const Ya=Oa.cameras;for(let Na=0,$a=Ya.length;Na<$a;Na++){const Fb=Ya[Na];U(Ka,ja,Fb,Fb.viewport)}}else U(Ka,ja,Oa);null!==Kb&&(Pc.updateMultisampleRenderTarget(Kb),Pc.updateRenderTargetMipmap(Kb));
if(!0===ja.isScene)ja.onAfterRender(db,ja,Oa);Re.resetDefaultState();Tb=-1;eb=null;Za.pop();Ia=0<Za.length?Za[Za.length-1]:null;gb.pop();Ka=0<gb.length?gb[gb.length-1]:null}};this.getActiveCubeFace=function(){return rb};this.getActiveMipmapLevel=function(){return Bb};this.getRenderTarget=function(){return Kb};this.setRenderTargetTextures=function(ja,Oa,Ya){Hc.get(ja.texture).__webglTexture=Oa;Hc.get(ja.depthTexture).__webglTexture=Ya;ja=Hc.get(ja);ja.__hasExternalTextures=!0;ja.__hasExternalTextures&&
(ja.__autoAllocateDepthBuffer=void 0===Ya,ja.__autoAllocateDepthBuffer||!0!==Rb.has("WEBGL_multisampled_render_to_texture")||(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ja.__useRenderToTexture=!1))};this.setRenderTargetFramebuffer=function(ja,Oa){ja=Hc.get(ja);ja.__webglFramebuffer=Oa;ja.__useDefaultFramebuffer=void 0===Oa};this.setRenderTarget=function(ja,Oa=0,Ya=0){Kb=ja;rb=Oa;Bb=Ya;let Na=!0;var $a=null;let Fb=!1,Lb=!1;
if(ja){$a=Hc.get(ja);void 0!==$a.__useDefaultFramebuffer?(hc.bindFramebuffer(Ga.FRAMEBUFFER,null),Na=!1):void 0===$a.__webglFramebuffer?Pc.setupRenderTarget(ja):$a.__hasExternalTextures&&Pc.rebindTextures(ja,Hc.get(ja.texture).__webglTexture,Hc.get(ja.depthTexture).__webglTexture);$a=ja.texture;if($a.isData3DTexture||$a.isDataArrayTexture||$a.isCompressedArrayTexture)Lb=!0;$a=Hc.get(ja).__webglFramebuffer;ja.isWebGLCubeRenderTarget?($a=$a[Oa],Fb=!0):$a=rc.isWebGL2&&0<ja.samples&&!1===Pc.useMultisampledRTT(ja)?
Hc.get(ja).__webglMultisampledFramebuffer:$a;nb.copy(ja.viewport);qb.copy(ja.scissor);Hb=ja.scissorTest}else nb.copy(Ca).multiplyScalar(ha).floor(),qb.copy(lb).multiplyScalar(ha).floor(),Hb=sa;hc.bindFramebuffer(Ga.FRAMEBUFFER,$a)&&rc.drawBuffers&&Na&&hc.drawBuffers(ja,$a);hc.viewport(nb);hc.scissor(qb);hc.setScissorTest(Hb);Fb?(ja=Hc.get(ja.texture),Ga.framebufferTexture2D(Ga.FRAMEBUFFER,Ga.COLOR_ATTACHMENT0,Ga.TEXTURE_CUBE_MAP_POSITIVE_X+Oa,ja.__webglTexture,Ya)):Lb&&(ja=Hc.get(ja.texture),Ga.framebufferTextureLayer(Ga.FRAMEBUFFER,
Ga.COLOR_ATTACHMENT0,ja.__webglTexture,Ya||0,Oa||0));Tb=-1};this.readRenderTargetPixels=function(ja,Oa,Ya,Na,$a,Fb,Lb){if(ja&&ja.isWebGLRenderTarget){var sb=Hc.get(ja).__webglFramebuffer;ja.isWebGLCubeRenderTarget&&void 0!==Lb&&(sb=sb[Lb]);if(sb){hc.bindFramebuffer(Ga.FRAMEBUFFER,sb);try{const Dc=ja.texture,nc=Dc.format,ed=Dc.type;if(1023!==nc&&ee.convert(nc)!==Ga.getParameter(Ga.IMPLEMENTATION_COLOR_READ_FORMAT))console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");
else{var sc=1016===ed&&(Rb.has("EXT_color_buffer_half_float")||rc.isWebGL2&&Rb.has("EXT_color_buffer_float"));1009===ed||ee.convert(ed)===Ga.getParameter(Ga.IMPLEMENTATION_COLOR_READ_TYPE)||1015===ed&&(rc.isWebGL2||Rb.has("OES_texture_float")||Rb.has("WEBGL_color_buffer_float"))||sc?0<=Oa&&Oa<=ja.width-Na&&0<=Ya&&Ya<=ja.height-$a&&Ga.readPixels(Oa,Ya,Na,$a,ee.convert(nc),ee.convert(ed),Fb):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}}finally{ja=
null!==Kb?Hc.get(Kb).__webglFramebuffer:null,hc.bindFramebuffer(Ga.FRAMEBUFFER,ja)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")};this.copyFramebufferToTexture=function(ja,Oa,Ya=0){var Na=Math.pow(2,-Ya);const $a=Math.floor(Oa.image.width*Na);Na=Math.floor(Oa.image.height*Na);Pc.setTexture2D(Oa,0);Ga.copyTexSubImage2D(Ga.TEXTURE_2D,Ya,0,0,ja.x,ja.y,$a,Na);hc.unbindTexture()};this.copyTextureToTexture=function(ja,Oa,Ya,Na=0){const $a=
Oa.image.width,Fb=Oa.image.height,Lb=ee.convert(Ya.format),sb=ee.convert(Ya.type);Pc.setTexture2D(Ya,0);Ga.pixelStorei(Ga.UNPACK_FLIP_Y_WEBGL,Ya.flipY);Ga.pixelStorei(Ga.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ya.premultiplyAlpha);Ga.pixelStorei(Ga.UNPACK_ALIGNMENT,Ya.unpackAlignment);Oa.isDataTexture?Ga.texSubImage2D(Ga.TEXTURE_2D,Na,ja.x,ja.y,$a,Fb,Lb,sb,Oa.image.data):Oa.isCompressedTexture?Ga.compressedTexSubImage2D(Ga.TEXTURE_2D,Na,ja.x,ja.y,Oa.mipmaps[0].width,Oa.mipmaps[0].height,Lb,Oa.mipmaps[0].data):
Ga.texSubImage2D(Ga.TEXTURE_2D,Na,ja.x,ja.y,Lb,sb,Oa.image);0===Na&&Ya.generateMipmaps&&Ga.generateMipmap(Ga.TEXTURE_2D);hc.unbindTexture()};this.copyTextureToTexture3D=function(ja,Oa,Ya,Na,$a=0){if(db.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var Fb=ja.max.x-ja.min.x+1,Lb=ja.max.y-ja.min.y+1,sb=ja.max.z-ja.min.z+1,sc=ee.convert(Na.format),Dc=ee.convert(Na.type);if(Na.isData3DTexture){Pc.setTexture3D(Na,0);var nc=Ga.TEXTURE_3D}else if(Na.isDataArrayTexture)Pc.setTexture2DArray(Na,
0),nc=Ga.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Ga.pixelStorei(Ga.UNPACK_FLIP_Y_WEBGL,Na.flipY);Ga.pixelStorei(Ga.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Na.premultiplyAlpha);Ga.pixelStorei(Ga.UNPACK_ALIGNMENT,Na.unpackAlignment);var ed=Ga.getParameter(Ga.UNPACK_ROW_LENGTH),Te=Ga.getParameter(Ga.UNPACK_IMAGE_HEIGHT),oe=Ga.getParameter(Ga.UNPACK_SKIP_PIXELS),Rh=Ga.getParameter(Ga.UNPACK_SKIP_ROWS),
Sh=Ga.getParameter(Ga.UNPACK_SKIP_IMAGES),ac=Ya.isCompressedTexture?Ya.mipmaps[0]:Ya.image;Ga.pixelStorei(Ga.UNPACK_ROW_LENGTH,ac.width);Ga.pixelStorei(Ga.UNPACK_IMAGE_HEIGHT,ac.height);Ga.pixelStorei(Ga.UNPACK_SKIP_PIXELS,ja.min.x);Ga.pixelStorei(Ga.UNPACK_SKIP_ROWS,ja.min.y);Ga.pixelStorei(Ga.UNPACK_SKIP_IMAGES,ja.min.z);Ya.isDataTexture||Ya.isData3DTexture?Ga.texSubImage3D(nc,$a,Oa.x,Oa.y,Oa.z,Fb,Lb,sb,sc,Dc,ac.data):Ya.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),
Ga.compressedTexSubImage3D(nc,$a,Oa.x,Oa.y,Oa.z,Fb,Lb,sb,sc,ac.data)):Ga.texSubImage3D(nc,$a,Oa.x,Oa.y,Oa.z,Fb,Lb,sb,sc,Dc,ac);Ga.pixelStorei(Ga.UNPACK_ROW_LENGTH,ed);Ga.pixelStorei(Ga.UNPACK_IMAGE_HEIGHT,Te);Ga.pixelStorei(Ga.UNPACK_SKIP_PIXELS,oe);Ga.pixelStorei(Ga.UNPACK_SKIP_ROWS,Rh);Ga.pixelStorei(Ga.UNPACK_SKIP_IMAGES,Sh);0===$a&&Na.generateMipmaps&&Ga.generateMipmap(nc);hc.unbindTexture()}};this.initTexture=function(ja){ja.isCubeTexture?Pc.setTextureCube(ja,0):ja.isData3DTexture?Pc.setTexture3D(ja,
0):ja.isDataArrayTexture||ja.isCompressedArrayTexture?Pc.setTexture2DArray(ja,0):Pc.setTexture2D(ja,0);hc.unbindTexture()};this.resetState=function(){Bb=rb=0;Kb=null;hc.reset();Re.reset()};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function ze(a,b,h,n,t,C){rf.subVectors(a,h).addScalar(.5).multiply(n);void 0!==t?(Vf.x=C*rf.x-t*rf.y,Vf.y=t*rf.x+C*rf.y):Vf.copy(rf);a.copy(b);a.x+=Vf.x;a.y+=Vf.y;a.applyMatrix4(fj)}function kf(a,
b,h,n,t,C,G){const I=Vh.distanceSqToPoint(a);I<h&&(h=new ka,Vh.closestPointToPoint(a,h),h.applyMatrix4(n),a=t.ray.origin.distanceTo(h),a<t.near||a>t.far||C.push({distance:a,distanceToRay:Math.sqrt(I),point:h,index:b,face:null,object:G}))}function Be(){let a=0,b=0,h=0,n=0;return{initCatmullRom:function(t,C,G,I,K){t=K*(G-t);I=K*(I-C);a=C;b=t;h=-3*C+3*G-2*t-I;n=2*C-2*G+t+I},initNonuniformCatmullRom:function(t,C,G,I,K,M,T){t=((C-t)/K-(G-t)/(K+M)+(G-C)/M)*M;I=((G-C)/M-(I-C)/(M+T)+(I-G)/T)*M;a=C;b=t;h=
-3*C+3*G-2*t-I;n=2*C-2*G+t+I},calc:function(t){const C=t*t;return a+b*t+h*C+n*C*t}}}function Oe(a,b,h,n,t){b=.5*(n-b);t=.5*(t-h);const C=a*a;return(2*h-2*n+b+t)*a*C+(-3*h+3*n-2*b-t)*C+b*a+h}function ce(a,b,h,n){const t=1-a;return t*t*b+2*(1-a)*a*h+a*a*n}function X(a,b,h,n,t){const C=1-a,G=1-a;return C*C*C*b+3*G*G*a*h+3*(1-a)*a*a*n+a*a*a*t}function E(a,b,h,n,t){let C,G=0;for(let I=b,K=h-n;I<h;I+=n)G+=(a[K]-a[I])*(a[I+1]+a[K+1]),K=I;if(t===0<G)for(t=b;t<h;t+=n)C=Nf(t,a[t],a[t+1],C);else for(t=h-n;t>=
b;t-=n)C=Nf(t,a[t],a[t+1],C);C&&Ib(C,C.next)&&(Ue(C),C=C.next);return C}function x(a,b){if(!a)return a;b||(b=a);let h;do if(h=!1,a.steiner||!Ib(a,a.next)&&0!==ib(a.prev,a,a.next))a=a.next;else{Ue(a);a=b=a.prev;if(a===a.next)break;h=!0}while(h||a!==b);return b}function d(a,b,h,n,t,C,G){if(a){if(!G&&C){var I=a,K=I;do 0===K.z&&(K.z=ca(K.x,K.y,n,t,C)),K.prevZ=K.prev,K=K.nextZ=K.next;while(K!==I);K.prevZ.nextZ=null;K.prevZ=null;I=K;var M,T,U,V,ba=1;do{K=I;var aa=I=null;for(T=0;K;){T++;var S=K;for(M=U=
0;M<ba&&(U++,S=S.nextZ,S);M++);for(V=ba;0<U||0<V&&S;)0!==U&&(0===V||!S||K.z<=S.z)?(M=K,K=K.nextZ,U--):(M=S,S=S.nextZ,V--),aa?aa.nextZ=M:I=M,M.prevZ=aa,aa=M;K=S}aa.nextZ=null;ba*=2}while(1<T)}for(I=a;a.prev!==a.next;){K=a.prev;S=a.next;if(C)aa=B(a,n,t,C);else a:{aa=a.prev;var ea=a;V=a.next;if(0<=ib(aa,ea,V)){aa=!1;break a}T=aa.x;U=ea.x;ba=V.x;M=aa.y;ea=ea.y;const va=V.y,ma=T<U?T<ba?T:ba:U<ba?U:ba,wa=M<ea?M<va?M:va:ea<va?ea:va,Ea=T>U?T>ba?T:ba:U>ba?U:ba,ua=M>ea?M>va?M:va:ea>va?ea:va;for(V=V.next;V!==
aa;){if(V.x>=ma&&V.x<=Ea&&V.y>=wa&&V.y<=ua&&Ba(T,M,U,ea,ba,va,V.x,V.y)&&0<=ib(V.prev,V,V.next)){aa=!1;break a}V=V.next}aa=!0}if(aa)b.push(K.i/h|0),b.push(a.i/h|0),b.push(S.i/h|0),Ue(a),I=a=S.next;else if(a=S,a===I){if(!G)d(x(a),b,h,n,t,C,1);else if(1===G){a=x(a);G=b;I=h;K=a;do S=K.prev,aa=K.next.next,!Ib(S,aa)&&Oc(S,K,K.next,aa)&&ud(S,aa)&&ud(aa,S)&&(G.push(S.i/I|0),G.push(K.i/I|0),G.push(aa.i/I|0),Ue(K),Ue(K.next),K=a=aa),K=K.next;while(K!==a);a=x(K);d(a,b,h,n,t,C,2)}else if(2===G)a:{G=a;do{for(I=
G.next.next;I!==G.prev;){if(K=G.i!==I.i){K=G;S=I;if(aa=K.next.i!==S.i&&K.prev.i!==S.i){b:{aa=K;do{if(aa.i!==K.i&&aa.next.i!==K.i&&aa.i!==S.i&&aa.next.i!==S.i&&Oc(aa,aa.next,K,S)){aa=!0;break b}aa=aa.next}while(aa!==K);aa=!1}aa=!aa}if(aa){if(aa=ud(K,S)&&ud(S,K)){aa=K;T=!1;U=(K.x+S.x)/2;ba=(K.y+S.y)/2;do aa.y>ba!==aa.next.y>ba&&aa.next.y!==aa.y&&U<(aa.next.x-aa.x)*(ba-aa.y)/(aa.next.y-aa.y)+aa.x&&(T=!T),aa=aa.next;while(aa!==K);aa=T}aa=aa&&(ib(K.prev,K,S.prev)||ib(K,S.prev,S))||Ib(K,S)&&0<ib(K.prev,
K,K.next)&&0<ib(S.prev,S,S.next)}K=aa}if(K){a=vd(G,I);G=x(G,G.next);a=x(a,a.next);d(G,b,h,n,t,C,0);d(a,b,h,n,t,C,0);break a}I=I.next}G=G.next}while(G!==a)}break}}}}function B(a,b,h,n){const t=a.prev,C=a.next;if(0<=ib(t,a,C))return!1;const G=t.x,I=a.x,K=C.x,M=t.y,T=a.y,U=C.y,V=G<I?G<K?G:K:I<K?I:K,ba=M<T?M<U?M:U:T<U?T:U,aa=G>I?G>K?G:K:I>K?I:K,S=M>T?M>U?M:U:T>U?T:U,ea=ca(V,ba,b,h,n);b=ca(aa,S,b,h,n);h=a.prevZ;for(a=a.nextZ;h&&h.z>=ea&&a&&a.z<=b;){if(h.x>=V&&h.x<=aa&&h.y>=ba&&h.y<=S&&h!==t&&h!==C&&Ba(G,
M,I,T,K,U,h.x,h.y)&&0<=ib(h.prev,h,h.next))return!1;h=h.prevZ;if(a.x>=V&&a.x<=aa&&a.y>=ba&&a.y<=S&&a!==t&&a!==C&&Ba(G,M,I,T,K,U,a.x,a.y)&&0<=ib(a.prev,a,a.next))return!1;a=a.nextZ}for(;h&&h.z>=ea;){if(h.x>=V&&h.x<=aa&&h.y>=ba&&h.y<=S&&h!==t&&h!==C&&Ba(G,M,I,T,K,U,h.x,h.y)&&0<=ib(h.prev,h,h.next))return!1;h=h.prevZ}for(;a&&a.z<=b;){if(a.x>=V&&a.x<=aa&&a.y>=ba&&a.y<=S&&a!==t&&a!==C&&Ba(G,M,I,T,K,U,a.x,a.y)&&0<=ib(a.prev,a,a.next))return!1;a=a.nextZ}return!0}function P(a,b){return a.x-b.x}function ca(a,
b,h,n,t){a=(a-h)*t|0;b=(b-n)*t|0;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function Ba(a,b,h,n,t,C,G,I){return(t-G)*(b-I)>=(a-G)*(C-I)&&(a-G)*(n-I)>=(h-G)*(b-I)&&(h-G)*(C-I)>=(t-G)*(n-I)}function ib(a,b,h){return(b.y-a.y)*(h.x-b.x)-(b.x-a.x)*(h.y-b.y)}function Ib(a,b){return a.x===b.x&&a.y===b.y}function Oc(a,b,h,n){const t=Lc(ib(a,b,h)),C=Lc(ib(a,b,n)),G=Lc(ib(h,n,
a)),I=Lc(ib(h,n,b));return t!==C&&G!==I||0===t&&Tc(a,h,b)||0===C&&Tc(a,n,b)||0===G&&Tc(h,a,n)||0===I&&Tc(h,b,n)?!0:!1}function Tc(a,b,h){return b.x<=Math.max(a.x,h.x)&&b.x>=Math.min(a.x,h.x)&&b.y<=Math.max(a.y,h.y)&&b.y>=Math.min(a.y,h.y)}function Lc(a){return 0<a?1:0>a?-1:0}function ud(a,b){return 0>ib(a.prev,a,a.next)?0<=ib(a,b,a.next)&&0<=ib(a,a.prev,b):0>ib(a,b,a.prev)||0>ib(a,a.next,b)}function vd(a,b){const h=new Wf(a.i,a.x,a.y),n=new Wf(b.i,b.x,b.y),t=a.next,C=b.prev;a.next=b;b.prev=a;h.next=
t;t.prev=h;n.next=h;h.prev=n;C.next=n;n.prev=C;return n}function Nf(a,b,h,n){a=new Wf(a,b,h);n?(a.next=n.next,a.prev=n,n.next.prev=a,n.next=a):(a.prev=a,a.next=a);return a}function Ue(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Wf(a,b,h){this.i=a;this.x=b;this.y=h;this.next=this.prev=null;this.z=0;this.nextZ=this.prevZ=null;this.steiner=!1}function Hg(a){const b=a.length;2<b&&a[b-1].equals(a[0])&&a.pop()}function Ig(a,b){for(let h=
0;h<b.length;h++)a.push(b[h].x),a.push(b[h].y)}function Jg(a,b,h){const n=`${a.x},${a.y},${a.z}-${b.x},${b.y},${b.z}`;a=`${b.x},${b.y},${b.z}-${a.x},${a.y},${a.z}`;if(!0===h.has(n)||!0===h.has(a))return!1;h.add(n);h.add(a);return!0}function xd(a,b,h){return Xf(a)?new a.constructor(a.subarray(b,void 0!==h?h:a.length)):a.slice(b,h)}function pe(a,b,h){return!a||!h&&a.constructor===b?a:"number"===typeof b.BYTES_PER_ELEMENT?new b(a):Array.prototype.slice.call(a)}function Xf(a){return ArrayBuffer.isView(a)&&
!(a instanceof DataView)}function Kg(a){const b=a.length,h=Array(b);for(let n=0;n!==b;++n)h[n]=n;h.sort(function(n,t){return a[n]-a[t]});return h}function Yf(a,b,h){const n=a.length,t=new a.constructor(n);for(let C=0,G=0;G!==n;++C){const I=h[C]*b;for(let K=0;K!==b;++K)t[G++]=a[I+K]}return t}function Zf(a,b,h,n){let t=1,C=a[0];for(;void 0!==C&&void 0===C[n];)C=a[t++];if(void 0!==C){var G=C[n];if(void 0!==G)if(Array.isArray(G)){do G=C[n],void 0!==G&&(b.push(C.time),h.push.apply(h,G)),C=a[t++];while(void 0!==
C)}else if(void 0!==G.toArray){do G=C[n],void 0!==G&&(b.push(C.time),G.toArray(h,h.length)),C=a[t++];while(void 0!==C)}else{do G=C[n],void 0!==G&&(b.push(C.time),h.push(G)),C=a[t++];while(void 0!==C)}}}function Wh(a){switch(a.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return $f;case "vector":case "vector2":case "vector3":case "vector4":return ag;case "color":return Xh;case "quaternion":return sf;case "bool":case "boolean":return Ve;case "string":return We}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+
a);}function Lg(){return("undefined"===typeof performance?Date:performance).now()}function Mg(a,b){return a.distance-b.distance}function bg(a,b,h,n){a.layers.test(b.layers)&&a.raycast(b,h);if(!0===n){a=a.children;for(let t=0,C=a.length;t<C;t++)bg(a[t],b,h,!0)}}function Ng(a){const b=[];!0===a.isBone&&b.push(a);for(let h=0;h<a.children.length;h++)b.push.apply(b,Ng(a.children[h]));return b}function Kc(a,b,h,n,t,C,G){Og.set(t,C,G).unproject(n);a=b[a];if(void 0!==a){h=h.getAttribute("position");for(let I=
0,K=a.length;I<K;I++)h.setXYZ(a[I],Og.x,Og.y,Og.z)}}class Od{addEventListener(a,b){void 0===this._listeners&&(this._listeners={});const h=this._listeners;void 0===h[a]&&(h[a]=[]);-1===h[a].indexOf(b)&&h[a].push(b)}hasEventListener(a,b){if(void 0===this._listeners)return!1;const h=this._listeners;return void 0!==h[a]&&-1!==h[a].indexOf(b)}removeEventListener(a,b){void 0!==this._listeners&&(a=this._listeners[a],void 0!==a&&(b=a.indexOf(b),-1!==b&&a.splice(b,1)))}dispatchEvent(a){if(void 0!==this._listeners){var b=
this._listeners[a.type];if(void 0!==b){a.target=this;b=b.slice(0);for(let h=0,n=b.length;h<n;h++)b[h].call(this,a);a.target=null}}}}const Zc="00 01 02 03 04 05 06 07 08 09 0a 0b 0c 0d 0e 0f 10 11 12 13 14 15 16 17 18 19 1a 1b 1c 1d 1e 1f 20 21 22 23 24 25 26 27 28 29 2a 2b 2c 2d 2e 2f 30 31 32 33 34 35 36 37 38 39 3a 3b 3c 3d 3e 3f 40 41 42 43 44 45 46 47 48 49 4a 4b 4c 4d 4e 4f 50 51 52 53 54 55 56 57 58 59 5a 5b 5c 5d 5e 5f 60 61 62 63 64 65 66 67 68 69 6a 6b 6c 6d 6e 6f 70 71 72 73 74 75 76 77 78 79 7a 7b 7c 7d 7e 7f 80 81 82 83 84 85 86 87 88 89 8a 8b 8c 8d 8e 8f 90 91 92 93 94 95 96 97 98 99 9a 9b 9c 9d 9e 9f a0 a1 a2 a3 a4 a5 a6 a7 a8 a9 aa ab ac ad ae af b0 b1 b2 b3 b4 b5 b6 b7 b8 b9 ba bb bc bd be bf c0 c1 c2 c3 c4 c5 c6 c7 c8 c9 ca cb cc cd ce cf d0 d1 d2 d3 d4 d5 d6 d7 d8 d9 da db dc dd de df e0 e1 e2 e3 e4 e5 e6 e7 e8 e9 ea eb ec ed ee ef f0 f1 f2 f3 f4 f5 f6 f7 f8 f9 fa fb fc fd fe ff".split(" ");
let oa=1234567;const Aa=Math.PI/180,Pa=180/Math.PI,kb={DEG2RAD:Aa,RAD2DEG:Pa,generateUUID:q,clamp:m,euclideanModulo:c,mapLinear:function(a,b,h,n,t){return n+(a-b)*(t-n)/(h-b)},inverseLerp:function(a,b,h){return a!==b?(h-a)/(b-a):0},lerp:f,damp:function(a,b,h,n){return f(a,b,1-Math.exp(-h*n))},pingpong:function(a,b=1){return b-Math.abs(c(a,2*b)-b)},smoothstep:function(a,b,h){if(a<=b)return 0;if(a>=h)return 1;a=(a-b)/(h-b);return a*a*(3-2*a)},smootherstep:function(a,b,h){if(a<=b)return 0;if(a>=h)return 1;
a=(a-b)/(h-b);return a*a*a*(a*(6*a-15)+10)},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},seededRandom:function(a){void 0!==a&&(oa=a);a=oa+=1831565813;a=Math.imul(a^a>>>15,a|1);a^=a+Math.imul(a^a>>>7,a|61);return((a^a>>>14)>>>0)/4294967296},degToRad:function(a){return a*Aa},radToDeg:function(a){return a*Pa},isPowerOfTwo:e,ceilPowerOfTwo:g,floorPowerOfTwo:k,setQuaternionFromProperEuler:function(a,
b,h,n,t){var C=Math.cos;const G=Math.sin,I=C(h/2);h=G(h/2);const K=C((b+n)/2),M=G((b+n)/2),T=C((b-n)/2),U=G((b-n)/2);C=C((n-b)/2);b=G((n-b)/2);switch(t){case "XYX":a.set(I*M,h*T,h*U,I*K);break;case "YZY":a.set(h*U,I*M,h*T,I*K);break;case "ZXZ":a.set(h*T,h*U,I*M,I*K);break;case "XZX":a.set(I*M,h*b,h*C,I*K);break;case "YXY":a.set(h*C,I*M,h*b,I*K);break;case "ZYZ":a.set(h*b,h*C,I*M,I*K);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+t)}},
normalize:r,denormalize:l};class La{constructor(a=0,b=0){La.prototype.isVector2=!0;this.x=a;this.y=b}get width(){return this.x}set width(a){this.x=a}get height(){return this.y}set height(a){this.y=a}set(a,b){this.x=a;this.y=b;return this}setScalar(a){this.y=this.x=a;return this}setX(a){this.x=a;return this}setY(a){this.y=a;return this}setComponent(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}return this}getComponent(a){switch(a){case 0:return this.x;
case 1:return this.y;default:throw Error("index is out of range: "+a);}}clone(){return new this.constructor(this.x,this.y)}copy(a){this.x=a.x;this.y=a.y;return this}add(a){this.x+=a.x;this.y+=a.y;return this}addScalar(a){this.x+=a;this.y+=a;return this}addVectors(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this}addScaledVector(a,b){this.x+=a.x*b;this.y+=a.y*b;return this}sub(a){this.x-=a.x;this.y-=a.y;return this}subScalar(a){this.x-=a;this.y-=a;return this}subVectors(a,b){this.x=a.x-b.x;this.y=a.y-
b.y;return this}multiply(a){this.x*=a.x;this.y*=a.y;return this}multiplyScalar(a){this.x*=a;this.y*=a;return this}divide(a){this.x/=a.x;this.y/=a.y;return this}divideScalar(a){return this.multiplyScalar(1/a)}applyMatrix3(a){const b=this.x,h=this.y;a=a.elements;this.x=a[0]*b+a[3]*h+a[6];this.y=a[1]*b+a[4]*h+a[7];return this}min(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this}max(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this}clamp(a,b){this.x=Math.max(a.x,
Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this}clampScalar(a,b){this.x=Math.max(a,Math.min(b,this.x));this.y=Math.max(a,Math.min(b,this.y));return this}clampLength(a,b){const h=this.length();return this.divideScalar(h||1).multiplyScalar(Math.max(a,Math.min(b,h)))}floor(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this}ceil(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this}round(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this}roundToZero(){this.x=
0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this}negate(){this.x=-this.x;this.y=-this.y;return this}dot(a){return this.x*a.x+this.y*a.y}cross(a){return this.x*a.y-this.y*a.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToSquared(a){const b=
this.x-a.x;a=this.y-a.y;return b*b+a*a}manhattanDistanceTo(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this}lerpVectors(a,b,h){this.x=a.x+(b.x-a.x)*h;this.y=a.y+(b.y-a.y)*h;return this}equals(a){return a.x===this.x&&a.y===this.y}fromArray(a,b=0){this.x=a[b];this.y=a[b+1];return this}toArray(a=[],b=0){a[b]=this.x;a[b+1]=this.y;return a}fromBufferAttribute(a,b){this.x=a.getX(b);
this.y=a.getY(b);return this}rotateAround(a,b){const h=Math.cos(b);b=Math.sin(b);const n=this.x-a.x,t=this.y-a.y;this.x=n*h-t*b+a.x;this.y=n*b+t*h+a.y;return this}random(){this.x=Math.random();this.y=Math.random();return this}*[Symbol.iterator](){yield this.x;yield this.y}}class xb{constructor(){xb.prototype.isMatrix3=!0;this.elements=[1,0,0,0,1,0,0,0,1]}set(a,b,h,n,t,C,G,I,K){const M=this.elements;M[0]=a;M[1]=n;M[2]=G;M[3]=b;M[4]=t;M[5]=I;M[6]=h;M[7]=C;M[8]=K;return this}identity(){this.set(1,0,
0,0,1,0,0,0,1);return this}copy(a){const b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return this}extractBasis(a,b,h){a.setFromMatrix3Column(this,0);b.setFromMatrix3Column(this,1);h.setFromMatrix3Column(this,2);return this}setFromMatrix4(a){a=a.elements;this.set(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10]);return this}multiply(a){return this.multiplyMatrices(this,a)}premultiply(a){return this.multiplyMatrices(a,this)}multiplyMatrices(a,
b){var h=a.elements,n=b.elements;b=this.elements;a=h[0];const t=h[3],C=h[6],G=h[1],I=h[4],K=h[7],M=h[2],T=h[5];h=h[8];const U=n[0],V=n[3],ba=n[6],aa=n[1],S=n[4],ea=n[7],va=n[2],ma=n[5];n=n[8];b[0]=a*U+t*aa+C*va;b[3]=a*V+t*S+C*ma;b[6]=a*ba+t*ea+C*n;b[1]=G*U+I*aa+K*va;b[4]=G*V+I*S+K*ma;b[7]=G*ba+I*ea+K*n;b[2]=M*U+T*aa+h*va;b[5]=M*V+T*S+h*ma;b[8]=M*ba+T*ea+h*n;return this}multiplyScalar(a){const b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this}determinant(){var a=
this.elements;const b=a[0],h=a[1],n=a[2],t=a[3],C=a[4],G=a[5],I=a[6],K=a[7];a=a[8];return b*C*a-b*G*K-h*t*a+h*G*I+n*t*K-n*C*I}invert(){const a=this.elements,b=a[0],h=a[1],n=a[2],t=a[3],C=a[4],G=a[5],I=a[6],K=a[7],M=a[8],T=M*C-G*K,U=G*I-M*t,V=K*t-C*I;var ba=b*T+h*U+n*V;if(0===ba)return this.set(0,0,0,0,0,0,0,0,0);ba=1/ba;a[0]=T*ba;a[1]=(n*K-M*h)*ba;a[2]=(G*h-n*C)*ba;a[3]=U*ba;a[4]=(M*b-n*I)*ba;a[5]=(n*t-G*b)*ba;a[6]=V*ba;a[7]=(h*I-K*b)*ba;a[8]=(C*b-h*t)*ba;return this}transpose(){let a;const b=this.elements;
a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return this}getNormalMatrix(a){return this.setFromMatrix4(a).invert().transpose()}transposeIntoArray(a){const b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this}setUvTransform(a,b,h,n,t,C,G){const I=Math.cos(t);t=Math.sin(t);this.set(h*I,h*t,-h*(I*C+t*G)+C+a,-n*t,n*I,-n*(-t*C+I*G)+G+b,0,0,1);return this}scale(a,b){this.premultiply(kc.makeScale(a,b));return this}rotate(a){this.premultiply(kc.makeRotation(-a));
return this}translate(a,b){this.premultiply(kc.makeTranslation(a,b));return this}makeTranslation(a,b){this.set(1,0,a,0,1,b,0,0,1);return this}makeRotation(a){const b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,a,b,0,0,0,1);return this}makeScale(a,b){this.set(a,0,0,0,b,0,0,0,1);return this}equals(a){const b=this.elements;a=a.elements;for(let h=0;9>h;h++)if(b[h]!==a[h])return!1;return!0}fromArray(a,b=0){for(let h=0;9>h;h++)this.elements[h]=a[h+b];return this}toArray(a=[],b=0){const h=this.elements;a[b]=
h[0];a[b+1]=h[1];a[b+2]=h[2];a[b+3]=h[3];a[b+4]=h[4];a[b+5]=h[5];a[b+6]=h[6];a[b+7]=h[7];a[b+8]=h[8];return a}clone(){return(new this.constructor).fromArray(this.elements)}}const kc=new xb,Nb={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};class zb{constructor(a=0,b=0,h=0,n=1){this.isQuaternion=!0;this._x=a;this._y=b;this._z=h;this._w=n}static slerpFlat(a,b,h,n,t,C,G){let I=h[n+0],K=h[n+1],M=h[n+2];h=h[n+3];n=t[C+0];const T=t[C+1],U=
t[C+2];t=t[C+3];if(0===G)a[b+0]=I,a[b+1]=K,a[b+2]=M,a[b+3]=h;else if(1===G)a[b+0]=n,a[b+1]=T,a[b+2]=U,a[b+3]=t;else{if(h!==t||I!==n||K!==T||M!==U){C=1-G;var V=I*n+K*T+M*U+h*t,ba=0<=V?1:-1,aa=1-V*V;aa>Number.EPSILON&&(aa=Math.sqrt(aa),V=Math.atan2(aa,V*ba),C=Math.sin(C*V)/aa,G=Math.sin(G*V)/aa);ba*=G;I=I*C+n*ba;K=K*C+T*ba;M=M*C+U*ba;h=h*C+t*ba;C===1-G&&(G=1/Math.sqrt(I*I+K*K+M*M+h*h),I*=G,K*=G,M*=G,h*=G)}a[b]=I;a[b+1]=K;a[b+2]=M;a[b+3]=h}}static multiplyQuaternionsFlat(a,b,h,n,t,C){const G=h[n],I=
h[n+1],K=h[n+2];h=h[n+3];n=t[C];const M=t[C+1],T=t[C+2];t=t[C+3];a[b]=G*t+h*n+I*T-K*M;a[b+1]=I*t+h*M+K*n-G*T;a[b+2]=K*t+h*T+G*M-I*n;a[b+3]=h*t-G*n-I*M-K*T;return a}get x(){return this._x}set x(a){this._x=a;this._onChangeCallback()}get y(){return this._y}set y(a){this._y=a;this._onChangeCallback()}get z(){return this._z}set z(a){this._z=a;this._onChangeCallback()}get w(){return this._w}set w(a){this._w=a;this._onChangeCallback()}set(a,b,h,n){this._x=a;this._y=b;this._z=h;this._w=n;this._onChangeCallback();
return this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(a){this._x=a.x;this._y=a.y;this._z=a.z;this._w=a.w;this._onChangeCallback();return this}setFromEuler(a,b){var h=a._x,n=a._y,t=a._z;a=a._order;var C=Math.cos;const G=Math.sin,I=C(h/2),K=C(n/2);C=C(t/2);h=G(h/2);n=G(n/2);t=G(t/2);switch(a){case "XYZ":this._x=h*K*C+I*n*t;this._y=I*n*C-h*K*t;this._z=I*K*t+h*n*C;this._w=I*K*C-h*n*t;break;case "YXZ":this._x=h*K*C+I*n*t;this._y=I*n*C-h*K*t;this._z=I*K*t-h*n*C;this._w=I*
K*C+h*n*t;break;case "ZXY":this._x=h*K*C-I*n*t;this._y=I*n*C+h*K*t;this._z=I*K*t+h*n*C;this._w=I*K*C-h*n*t;break;case "ZYX":this._x=h*K*C-I*n*t;this._y=I*n*C+h*K*t;this._z=I*K*t-h*n*C;this._w=I*K*C+h*n*t;break;case "YZX":this._x=h*K*C+I*n*t;this._y=I*n*C+h*K*t;this._z=I*K*t-h*n*C;this._w=I*K*C-h*n*t;break;case "XZY":this._x=h*K*C-I*n*t;this._y=I*n*C-h*K*t;this._z=I*K*t+h*n*C;this._w=I*K*C+h*n*t;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}!1!==b&&
this._onChangeCallback();return this}setFromAxisAngle(a,b){b/=2;const h=Math.sin(b);this._x=a.x*h;this._y=a.y*h;this._z=a.z*h;this._w=Math.cos(b);this._onChangeCallback();return this}setFromRotationMatrix(a){var b=a.elements,h=b[0];a=b[4];const n=b[8],t=b[1],C=b[5],G=b[9],I=b[2],K=b[6];b=b[10];const M=h+C+b;0<M?(h=.5/Math.sqrt(M+1),this._w=.25/h,this._x=(K-G)*h,this._y=(n-I)*h,this._z=(t-a)*h):h>C&&h>b?(h=2*Math.sqrt(1+h-C-b),this._w=(K-G)/h,this._x=.25*h,this._y=(a+t)/h,this._z=(n+I)/h):C>b?(h=2*
Math.sqrt(1+C-h-b),this._w=(n-I)/h,this._x=(a+t)/h,this._y=.25*h,this._z=(G+K)/h):(h=2*Math.sqrt(1+b-h-C),this._w=(t-a)/h,this._x=(n+I)/h,this._y=(G+K)/h,this._z=.25*h);this._onChangeCallback();return this}setFromUnitVectors(a,b){let h=a.dot(b)+1;h<Number.EPSILON?(h=0,Math.abs(a.x)>Math.abs(a.z)?(this._x=-a.y,this._y=a.x,this._z=0):(this._x=0,this._y=-a.z,this._z=a.y)):(this._x=a.y*b.z-a.z*b.y,this._y=a.z*b.x-a.x*b.z,this._z=a.x*b.y-a.y*b.x);this._w=h;return this.normalize()}angleTo(a){return 2*Math.acos(Math.abs(m(this.dot(a),
-1,1)))}rotateTowards(a,b){const h=this.angleTo(a);if(0===h)return this;this.slerp(a,Math.min(1,b/h));return this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){this._x*=-1;this._y*=-1;this._z*=-1;this._onChangeCallback();return this}dot(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let a=
this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this._onChangeCallback();return this}multiply(a){return this.multiplyQuaternions(this,a)}premultiply(a){return this.multiplyQuaternions(a,this)}multiplyQuaternions(a,b){const h=a._x,n=a._y,t=a._z;a=a._w;const C=b._x,G=b._y,I=b._z;b=b._w;this._x=h*b+a*C+n*I-t*G;this._y=n*b+a*G+t*C-h*I;this._z=t*b+a*I+h*G-n*C;this._w=a*b-h*C-n*G-t*I;this._onChangeCallback();return this}slerp(a,b){if(0===b)return this;
if(1===b)return this.copy(a);const h=this._x,n=this._y,t=this._z,C=this._w;var G=C*a._w+h*a._x+n*a._y+t*a._z;0>G?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,G=-G):this.copy(a);if(1<=G)return this._w=C,this._x=h,this._y=n,this._z=t,this;a=1-G*G;if(a<=Number.EPSILON)return G=1-b,this._w=G*C+b*this._w,this._x=G*h+b*this._x,this._y=G*n+b*this._y,this._z=G*t+b*this._z,this.normalize(),this._onChangeCallback(),this;a=Math.sqrt(a);const I=Math.atan2(a,G);G=Math.sin((1-b)*I)/a;b=Math.sin(b*I)/
a;this._w=C*G+this._w*b;this._x=h*G+this._x*b;this._y=n*G+this._y*b;this._z=t*G+this._z*b;this._onChangeCallback();return this}slerpQuaternions(a,b,h){return this.copy(a).slerp(b,h)}random(){var a=Math.random();const b=Math.sqrt(1-a);a=Math.sqrt(a);const h=2*Math.PI*Math.random(),n=2*Math.PI*Math.random();return this.set(b*Math.cos(h),a*Math.sin(n),a*Math.cos(n),b*Math.sin(h))}equals(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w}fromArray(a,b=0){this._x=a[b];this._y=a[b+
1];this._z=a[b+2];this._w=a[b+3];this._onChangeCallback();return this}toArray(a=[],b=0){a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a}fromBufferAttribute(a,b){this._x=a.getX(b);this._y=a.getY(b);this._z=a.getZ(b);this._w=a.getW(b);return this}_onChange(a){this._onChangeCallback=a;return this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x;yield this._y;yield this._z;yield this._w}}class ka{constructor(a=0,b=0,h=0){ka.prototype.isVector3=!0;this.x=a;this.y=b;this.z=h}set(a,
b,h){void 0===h&&(h=this.z);this.x=a;this.y=b;this.z=h;return this}setScalar(a){this.z=this.y=this.x=a;return this}setX(a){this.x=a;return this}setY(a){this.y=a;return this}setZ(a){this.z=a;return this}setComponent(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+a);}}clone(){return new this.constructor(this.x,
this.y,this.z)}copy(a){this.x=a.x;this.y=a.y;this.z=a.z;return this}add(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this}addScalar(a){this.x+=a;this.y+=a;this.z+=a;return this}addVectors(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this}addScaledVector(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this}sub(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this}subScalar(a){this.x-=a;this.y-=a;this.z-=a;return this}subVectors(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this}multiply(a){this.x*=
a.x;this.y*=a.y;this.z*=a.z;return this}multiplyScalar(a){this.x*=a;this.y*=a;this.z*=a;return this}multiplyVectors(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this}applyEuler(a){return this.applyQuaternion(lc.setFromEuler(a))}applyAxisAngle(a,b){return this.applyQuaternion(lc.setFromAxisAngle(a,b))}applyMatrix3(a){const b=this.x,h=this.y,n=this.z;a=a.elements;this.x=a[0]*b+a[3]*h+a[6]*n;this.y=a[1]*b+a[4]*h+a[7]*n;this.z=a[2]*b+a[5]*h+a[8]*n;return this}applyNormalMatrix(a){return this.applyMatrix3(a).normalize()}applyMatrix4(a){const b=
this.x,h=this.y,n=this.z;a=a.elements;const t=1/(a[3]*b+a[7]*h+a[11]*n+a[15]);this.x=(a[0]*b+a[4]*h+a[8]*n+a[12])*t;this.y=(a[1]*b+a[5]*h+a[9]*n+a[13])*t;this.z=(a[2]*b+a[6]*h+a[10]*n+a[14])*t;return this}applyQuaternion(a){var b=this.x;const h=this.y,n=this.z,t=a.x,C=a.y,G=a.z;a=a.w;const I=a*b+C*n-G*h,K=a*h+G*b-t*n,M=a*n+t*h-C*b;b=-t*b-C*h-G*n;this.x=I*a+b*-t+K*-G-M*-C;this.y=K*a+b*-C+M*-t-I*-G;this.z=M*a+b*-G+I*-C-K*-t;return this}project(a){return this.applyMatrix4(a.matrixWorldInverse).applyMatrix4(a.projectionMatrix)}unproject(a){return this.applyMatrix4(a.projectionMatrixInverse).applyMatrix4(a.matrixWorld)}transformDirection(a){const b=
this.x,h=this.y,n=this.z;a=a.elements;this.x=a[0]*b+a[4]*h+a[8]*n;this.y=a[1]*b+a[5]*h+a[9]*n;this.z=a[2]*b+a[6]*h+a[10]*n;return this.normalize()}divide(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this}divideScalar(a){return this.multiplyScalar(1/a)}min(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this}max(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this}clamp(a,b){this.x=Math.max(a.x,Math.min(b.x,
this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this}clampScalar(a,b){this.x=Math.max(a,Math.min(b,this.x));this.y=Math.max(a,Math.min(b,this.y));this.z=Math.max(a,Math.min(b,this.z));return this}clampLength(a,b){const h=this.length();return this.divideScalar(h||1).multiplyScalar(Math.max(a,Math.min(b,h)))}floor(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this}ceil(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);
this.z=Math.ceil(this.z);return this}round(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this}roundToZero(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this}negate(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this}dot(a){return this.x*a.x+this.y*a.y+this.z*a.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*
this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this}lerpVectors(a,b,h){this.x=a.x+(b.x-a.x)*h;this.y=a.y+(b.y-a.y)*h;this.z=a.z+(b.z-a.z)*h;return this}cross(a){return this.crossVectors(this,a)}crossVectors(a,b){const h=a.x,n=a.y;a=a.z;const t=
b.x,C=b.y;b=b.z;this.x=n*b-a*C;this.y=a*t-h*b;this.z=h*C-n*t;return this}projectOnVector(a){var b=a.lengthSq();if(0===b)return this.set(0,0,0);b=a.dot(this)/b;return this.copy(a).multiplyScalar(b)}projectOnPlane(a){tc.copy(this).projectOnVector(a);return this.sub(tc)}reflect(a){return this.sub(tc.copy(a).multiplyScalar(2*this.dot(a)))}angleTo(a){const b=Math.sqrt(this.lengthSq()*a.lengthSq());if(0===b)return Math.PI/2;a=this.dot(a)/b;return Math.acos(m(a,-1,1))}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToSquared(a){const b=
this.x-a.x,h=this.y-a.y;a=this.z-a.z;return b*b+h*h+a*a}manhattanDistanceTo(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)}setFromSpherical(a){return this.setFromSphericalCoords(a.radius,a.phi,a.theta)}setFromSphericalCoords(a,b,h){const n=Math.sin(b)*a;this.x=n*Math.sin(h);this.y=Math.cos(b)*a;this.z=n*Math.cos(h);return this}setFromCylindrical(a){return this.setFromCylindricalCoords(a.radius,a.theta,a.y)}setFromCylindricalCoords(a,b,h){this.x=a*Math.sin(b);this.y=h;this.z=
a*Math.cos(b);return this}setFromMatrixPosition(a){a=a.elements;this.x=a[12];this.y=a[13];this.z=a[14];return this}setFromMatrixScale(a){const b=this.setFromMatrixColumn(a,0).length(),h=this.setFromMatrixColumn(a,1).length();a=this.setFromMatrixColumn(a,2).length();this.x=b;this.y=h;this.z=a;return this}setFromMatrixColumn(a,b){return this.fromArray(a.elements,4*b)}setFromMatrix3Column(a,b){return this.fromArray(a.elements,3*b)}setFromEuler(a){this.x=a._x;this.y=a._y;this.z=a._z;return this}equals(a){return a.x===
this.x&&a.y===this.y&&a.z===this.z}fromArray(a,b=0){this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this}toArray(a=[],b=0){a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a}fromBufferAttribute(a,b){this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);return this}random(){this.x=Math.random();this.y=Math.random();this.z=Math.random();return this}randomDirection(){const a=2*(Math.random()-.5),b=Math.random()*Math.PI*2,h=Math.sqrt(1-a**2);this.x=h*Math.cos(b);this.y=h*Math.sin(b);this.z=a;return this}*[Symbol.iterator](){yield this.x;
yield this.y;yield this.z}}const tc=new ka,lc=new zb,Fc=(new xb).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1E-7,1E-7,.9105199]),uc=(new xb).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1E-7,0,1.0982735]),fd=new ka,Gd={["srgb-linear"]:a=>a,srgb:a=>a.convertSRGBToLinear(),["display-p3"]:function(a){a.convertSRGBToLinear();fd.set(a.r,a.g,a.b).applyMatrix3(uc);return a.setRGB(fd.x,fd.y,fd.z)}},tf={["srgb-linear"]:a=>a,srgb:a=>a.convertLinearToSRGB(),["display-p3"]:function(a){fd.set(a.r,
a.g,a.b).applyMatrix3(Fc);return a.setRGB(fd.x,fd.y,fd.z).convertLinearToSRGB()}},jd={enabled:!1,get legacyMode(){console.warn("THREE.ColorManagement: .legacyMode\x3dfalse renamed to .enabled\x3dtrue in r150.");return!this.enabled},set legacyMode(a){console.warn("THREE.ColorManagement: .legacyMode\x3dfalse renamed to .enabled\x3dtrue in r150.");this.enabled=!a},get workingColorSpace(){return"srgb-linear"},set workingColorSpace(a){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},
convert:function(a,b,h){if(!1===this.enabled||b===h||!b||!h)return a;const n=Gd[b],t=tf[h];if(void 0===n||void 0===t)throw Error(`Unsupported color space conversion, "${b}" to "${h}".`);return t(n(a))},fromWorkingColorSpace:function(a,b){return this.convert(a,this.workingColorSpace,b)},toWorkingColorSpace:function(a,b){return this.convert(a,b,this.workingColorSpace)}};let uf;class Hh{static getDataURL(a){if(/^data:/i.test(a.src)||"undefined"==typeof HTMLCanvasElement)return a.src;if(a instanceof HTMLCanvasElement)var b=
a;else void 0===uf&&(uf=w("canvas")),uf.width=a.width,uf.height=a.height,b=uf.getContext("2d"),a instanceof ImageData?b.putImageData(a,0,0):b.drawImage(a,0,0,a.width,a.height),b=uf;return 2048<b.width||2048<b.height?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",a),b.toDataURL("image/jpeg",.6)):b.toDataURL("image/png")}static sRGBToLinear(a){if("undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&
a instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&a instanceof ImageBitmap){var b=w("canvas");b.width=a.width;b.height=a.height;var h=b.getContext("2d");h.drawImage(a,0,0,a.width,a.height);a=h.getImageData(0,0,a.width,a.height);const n=a.data;for(let t=0;t<n.length;t++)n[t]=255*z(n[t]/255);h.putImageData(a,0,0);return b}if(a.data){b=a.data.slice(0);for(h=0;h<b.length;h++)b[h]=b instanceof Uint8Array||b instanceof Uint8ClampedArray?Math.floor(255*z(b[h]/255)):z(b[h]);return{data:b,
width:a.width,height:a.height}}console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied.");return a}}class Xe{constructor(a=null){this.isSource=!0;this.uuid=q();this.data=a;this.version=0}set needsUpdate(a){!0===a&&this.version++}toJSON(a){const b=void 0===a||"string"===typeof a;if(!b&&void 0!==a.images[this.uuid])return a.images[this.uuid];const h={uuid:this.uuid,url:""},n=this.data;if(null!==n){let t;if(Array.isArray(n)){t=[];for(let C=0,G=n.length;C<
G;C++)n[C].isDataTexture?t.push(H(n[C].image)):t.push(H(n[C]))}else t=H(n);h.url=t}b||(a.images[this.uuid]=h);return h}}let al=0;class Qc extends Od{constructor(a=Qc.DEFAULT_IMAGE,b=Qc.DEFAULT_MAPPING,h=1001,n=1001,t=1006,C=1008,G=1023,I=1009,K=Qc.DEFAULT_ANISOTROPY,M=3E3){super();this.isTexture=!0;Object.defineProperty(this,"id",{value:al++});this.uuid=q();this.name="";this.source=new Xe(a);this.mipmaps=[];this.mapping=b;this.wrapS=h;this.wrapT=n;this.magFilter=t;this.minFilter=C;this.anisotropy=
K;this.format=G;this.internalFormat=null;this.type=I;this.offset=new La(0,0);this.repeat=new La(1,1);this.center=new La(0,0);this.rotation=0;this.matrixAutoUpdate=!0;this.matrix=new xb;this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=M;this.userData={};this.version=0;this.onUpdate=null;this.needsPMREMUpdate=this.isRenderTargetTexture=!1}get image(){return this.source.data}set image(a=null){this.source.data=a}updateMatrix(){this.matrix.setUvTransform(this.offset.x,
this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(a){this.name=a.name;this.source=a.source;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=a.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;this.internalFormat=a.internalFormat;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.center.copy(a.center);
this.rotation=a.rotation;this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrix.copy(a.matrix);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;this.encoding=a.encoding;this.userData=JSON.parse(JSON.stringify(a.userData));this.needsUpdate=!0;return this}toJSON(a){const b=void 0===a||"string"===typeof a;if(!b&&void 0!==a.textures[this.uuid])return a.textures[this.uuid];const h={metadata:{version:4.5,type:"Texture",
generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(a).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,
unpackAlignment:this.unpackAlignment};0<Object.keys(this.userData).length&&(h.userData=this.userData);b||(a.textures[this.uuid]=h);return h}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(a){if(300!==this.mapping)return a;a.applyMatrix3(this.matrix);if(0>a.x||1<a.x)switch(this.wrapS){case 1E3:a.x-=Math.floor(a.x);break;case 1001:a.x=0>a.x?0:1;break;case 1002:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(0>a.y||1<a.y)switch(this.wrapT){case 1E3:a.y-=Math.floor(a.y);
break;case 1001:a.y=0>a.y?0:1;break;case 1002:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}this.flipY&&(a.y=1-a.y);return a}set needsUpdate(a){!0===a&&(this.version++,this.source.needsUpdate=!0)}}Qc.DEFAULT_IMAGE=null;Qc.DEFAULT_MAPPING=300;Qc.DEFAULT_ANISOTROPY=1;class zc{constructor(a=0,b=0,h=0,n=1){zc.prototype.isVector4=!0;this.x=a;this.y=b;this.z=h;this.w=n}get width(){return this.z}set width(a){this.z=a}get height(){return this.w}set height(a){this.w=a}set(a,b,
h,n){this.x=a;this.y=b;this.z=h;this.w=n;return this}setScalar(a){this.w=this.z=this.y=this.x=a;return this}setX(a){this.x=a;return this}setY(a){this.y=a;return this}setZ(a){this.z=a;return this}setW(a){this.w=a;return this}setComponent(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+a);}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;
default:throw Error("index is out of range: "+a);}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this}add(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this}addScalar(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this}addVectors(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this}addScaledVector(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this}sub(a){this.x-=
a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this}subScalar(a){this.x-=a;this.y-=a;this.z-=a;this.w-=a;return this}subVectors(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this}multiply(a){this.x*=a.x;this.y*=a.y;this.z*=a.z;this.w*=a.w;return this}multiplyScalar(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this}applyMatrix4(a){const b=this.x,h=this.y,n=this.z,t=this.w;a=a.elements;this.x=a[0]*b+a[4]*h+a[8]*n+a[12]*t;this.y=a[1]*b+a[5]*h+a[9]*n+a[13]*t;this.z=a[2]*
b+a[6]*h+a[10]*n+a[14]*t;this.w=a[3]*b+a[7]*h+a[11]*n+a[15]*t;return this}divideScalar(a){return this.multiplyScalar(1/a)}setAxisAngleFromQuaternion(a){this.w=2*Math.acos(a.w);const b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this}setAxisAngleFromRotationMatrix(a){a=a.elements;var b=a[0];var h=a[4];var n=a[8];const t=a[1];var C=a[5],G=a[9];var I=a[2];var K=a[6];var M=a[10];if(.01>Math.abs(h-t)&&.01>Math.abs(n-I)&&.01>Math.abs(G-K)){if(.1>
Math.abs(h+t)&&.1>Math.abs(n+I)&&.1>Math.abs(G+K)&&.1>Math.abs(b+C+M-3))return this.set(1,0,0,0),this;a=Math.PI;b=(b+1)/2;C=(C+1)/2;M=(M+1)/2;h=(h+t)/4;n=(n+I)/4;G=(G+K)/4;b>C&&b>M?.01>b?(K=0,h=I=.707106781):(K=Math.sqrt(b),I=h/K,h=n/K):C>M?.01>C?(K=.707106781,I=0,h=.707106781):(I=Math.sqrt(C),K=h/I,h=G/I):.01>M?(I=K=.707106781,h=0):(h=Math.sqrt(M),K=n/h,I=G/h);this.set(K,I,h,a);return this}a=Math.sqrt((K-G)*(K-G)+(n-I)*(n-I)+(t-h)*(t-h));.001>Math.abs(a)&&(a=1);this.x=(K-G)/a;this.y=(n-I)/a;this.z=
(t-h)/a;this.w=Math.acos((b+C+M-1)/2);return this}min(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);this.w=Math.min(this.w,a.w);return this}max(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);this.w=Math.max(this.w,a.w);return this}clamp(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));this.w=Math.max(a.w,Math.min(b.w,this.w));return this}clampScalar(a,
b){this.x=Math.max(a,Math.min(b,this.x));this.y=Math.max(a,Math.min(b,this.y));this.z=Math.max(a,Math.min(b,this.z));this.w=Math.max(a,Math.min(b,this.w));return this}clampLength(a,b){const h=this.length();return this.divideScalar(h||1).multiplyScalar(Math.max(a,Math.min(b,h)))}floor(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this}ceil(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);
return this}round(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this}roundToZero(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this}negate(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this}dot(a){return this.x*a.x+this.y*a.y+this.z*a.z+
this.w*a.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this}lerpVectors(a,b,
h){this.x=a.x+(b.x-a.x)*h;this.y=a.y+(b.y-a.y)*h;this.z=a.z+(b.z-a.z)*h;this.w=a.w+(b.w-a.w)*h;return this}equals(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w}fromArray(a,b=0){this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this}toArray(a=[],b=0){a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a}fromBufferAttribute(a,b){this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);this.w=a.getW(b);return this}random(){this.x=Math.random();this.y=Math.random();this.z=
Math.random();this.w=Math.random();return this}*[Symbol.iterator](){yield this.x;yield this.y;yield this.z;yield this.w}}class Sd extends Od{constructor(a=1,b=1,h={}){super();this.isWebGLRenderTarget=!0;this.width=a;this.height=b;this.depth=1;this.scissor=new zc(0,0,a,b);this.scissorTest=!1;this.viewport=new zc(0,0,a,b);this.texture=new Qc({width:a,height:b,depth:1},h.mapping,h.wrapS,h.wrapT,h.magFilter,h.minFilter,h.format,h.type,h.anisotropy,h.encoding);this.texture.isRenderTargetTexture=!0;this.texture.flipY=
!1;this.texture.generateMipmaps=void 0!==h.generateMipmaps?h.generateMipmaps:!1;this.texture.internalFormat=void 0!==h.internalFormat?h.internalFormat:null;this.texture.minFilter=void 0!==h.minFilter?h.minFilter:1006;this.depthBuffer=void 0!==h.depthBuffer?h.depthBuffer:!0;this.stencilBuffer=void 0!==h.stencilBuffer?h.stencilBuffer:!1;this.depthTexture=void 0!==h.depthTexture?h.depthTexture:null;this.samples=void 0!==h.samples?h.samples:0}setSize(a,b,h=1){if(this.width!==a||this.height!==b||this.depth!==
h)this.width=a,this.height=b,this.depth=h,this.texture.image.width=a,this.texture.image.height=b,this.texture.image.depth=h,this.dispose();this.viewport.set(0,0,a,b);this.scissor.set(0,0,a,b)}clone(){return(new this.constructor).copy(this)}copy(a){this.width=a.width;this.height=a.height;this.depth=a.depth;this.viewport.copy(a.viewport);this.texture=a.texture.clone();this.texture.isRenderTargetTexture=!0;const b=Object.assign({},a.texture.image);this.texture.source=new Xe(b);this.depthBuffer=a.depthBuffer;
this.stencilBuffer=a.stencilBuffer;null!==a.depthTexture&&(this.depthTexture=a.depthTexture.clone());this.samples=a.samples;return this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ag extends Qc{constructor(a=null,b=1,h=1,n=1){super(null);this.isDataArrayTexture=!0;this.image={data:a,width:b,height:h,depth:n};this.minFilter=this.magFilter=1003;this.wrapR=1001;this.flipY=this.generateMipmaps=!1;this.unpackAlignment=1}}class bl extends Sd{constructor(a=1,b=1,h=1){super(a,b);this.isWebGLArrayRenderTarget=
!0;this.depth=h;this.texture=new Ag(null,a,b,h);this.texture.isRenderTargetTexture=!0}}class Yh extends Qc{constructor(a=null,b=1,h=1,n=1){super(null);this.isData3DTexture=!0;this.image={data:a,width:b,height:h,depth:n};this.minFilter=this.magFilter=1003;this.wrapR=1001;this.flipY=this.generateMipmaps=!1;this.unpackAlignment=1}}class cl extends Sd{constructor(a=1,b=1,h=1){super(a,b);this.isWebGL3DRenderTarget=!0;this.depth=h;this.texture=new Yh(null,a,b,h);this.texture.isRenderTargetTexture=!0}}class dl extends Sd{constructor(a=
1,b=1,h=1,n={}){super(a,b,n);this.isWebGLMultipleRenderTargets=!0;a=this.texture;this.texture=[];for(b=0;b<h;b++)this.texture[b]=a.clone(),this.texture[b].isRenderTargetTexture=!0}setSize(a,b,h=1){if(this.width!==a||this.height!==b||this.depth!==h){this.width=a;this.height=b;this.depth=h;for(let n=0,t=this.texture.length;n<t;n++)this.texture[n].image.width=a,this.texture[n].image.height=b,this.texture[n].image.depth=h;this.dispose()}this.viewport.set(0,0,a,b);this.scissor.set(0,0,a,b);return this}copy(a){this.dispose();
this.width=a.width;this.height=a.height;this.depth=a.depth;this.viewport.set(0,0,this.width,this.height);this.scissor.set(0,0,this.width,this.height);this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;null!==a.depthTexture&&(this.depthTexture=a.depthTexture.clone());this.texture.length=0;for(let b=0,h=a.texture.length;b<h;b++)this.texture[b]=a.texture[b].clone(),this.texture[b].isRenderTargetTexture=!0;return this}}class Ye{constructor(a=new ka(Infinity,Infinity,Infinity),b=new ka(-Infinity,
-Infinity,-Infinity)){this.isBox3=!0;this.min=a;this.max=b}set(a,b){this.min.copy(a);this.max.copy(b);return this}setFromArray(a){let b=Infinity,h=Infinity,n=Infinity,t=-Infinity,C=-Infinity,G=-Infinity;for(let I=0,K=a.length;I<K;I+=3){const M=a[I],T=a[I+1],U=a[I+2];M<b&&(b=M);T<h&&(h=T);U<n&&(n=U);M>t&&(t=M);T>C&&(C=T);U>G&&(G=U)}this.min.set(b,h,n);this.max.set(t,C,G);return this}setFromBufferAttribute(a){let b=Infinity,h=Infinity,n=Infinity,t=-Infinity,C=-Infinity,G=-Infinity;for(let I=0,K=a.count;I<
K;I++){const M=a.getX(I),T=a.getY(I),U=a.getZ(I);M<b&&(b=M);T<h&&(h=T);U<n&&(n=U);M>t&&(t=M);T>C&&(C=T);U>G&&(G=U)}this.min.set(b,h,n);this.max.set(t,C,G);return this}setFromPoints(a){this.makeEmpty();for(let b=0,h=a.length;b<h;b++)this.expandByPoint(a[b]);return this}setFromCenterAndSize(a,b){b=Ze.copy(b).multiplyScalar(.5);this.min.copy(a).sub(b);this.max.copy(a).add(b);return this}setFromObject(a,b=!1){this.makeEmpty();return this.expandByObject(a,b)}clone(){return(new this.constructor).copy(this)}copy(a){this.min.copy(a.min);
this.max.copy(a.max);return this}makeEmpty(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(a){return this.isEmpty()?a.set(0,0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(a){return this.isEmpty()?a.set(0,0,0):a.subVectors(this.max,this.min)}expandByPoint(a){this.min.min(a);this.max.max(a);return this}expandByVector(a){this.min.sub(a);this.max.add(a);
return this}expandByScalar(a){this.min.addScalar(-a);this.max.addScalar(a);return this}expandByObject(a,b=!1){a.updateWorldMatrix(!1,!1);var h=a.geometry;if(void 0!==h)if(b&&void 0!=h.attributes&&void 0!==h.attributes.position){h=h.attributes.position;for(let n=0,t=h.count;n<t;n++)Ze.fromBufferAttribute(h,n).applyMatrix4(a.matrixWorld),this.expandByPoint(Ze)}else null===h.boundingBox&&h.computeBoundingBox(),Zh.copy(h.boundingBox),Zh.applyMatrix4(a.matrixWorld),this.union(Zh);a=a.children;for(let n=
0,t=a.length;n<t;n++)this.expandByObject(a[n],b);return this}containsPoint(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0}containsBox(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z}getParameter(a,b){return b.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(a){return a.max.x<
this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0}intersectsSphere(a){this.clampPoint(a.center,Ze);return Ze.distanceToSquared(a.center)<=a.radius*a.radius}intersectsPlane(a){let b,h;0<a.normal.x?(b=a.normal.x*this.min.x,h=a.normal.x*this.max.x):(b=a.normal.x*this.max.x,h=a.normal.x*this.min.x);0<a.normal.y?(b+=a.normal.y*this.min.y,h+=a.normal.y*this.max.y):(b+=a.normal.y*this.max.y,h+=a.normal.y*this.min.y);0<a.normal.z?(b+=a.normal.z*
this.min.z,h+=a.normal.z*this.max.z):(b+=a.normal.z*this.max.z,h+=a.normal.z*this.min.z);return b<=-a.constant&&h>=-a.constant}intersectsTriangle(a){if(this.isEmpty())return!1;this.getCenter(cg);Pg.subVectors(this.max,cg);vf.subVectors(a.a,cg);wf.subVectors(a.b,cg);xf.subVectors(a.c,cg);Ee.subVectors(wf,vf);Fe.subVectors(xf,wf);$e.subVectors(vf,xf);a=[0,-Ee.z,Ee.y,0,-Fe.z,Fe.y,0,-$e.z,$e.y,Ee.z,0,-Ee.x,Fe.z,0,-Fe.x,$e.z,0,-$e.x,-Ee.y,Ee.x,0,-Fe.y,Fe.x,0,-$e.y,$e.x,0];if(!F(a,vf,wf,xf,Pg))return!1;
a=[1,0,0,0,1,0,0,0,1];if(!F(a,vf,wf,xf,Pg))return!1;Qg.crossVectors(Ee,Fe);a=[Qg.x,Qg.y,Qg.z];return F(a,vf,wf,xf,Pg)}clampPoint(a,b){return b.copy(a).clamp(this.min,this.max)}distanceToPoint(a){return this.clampPoint(a,Ze).distanceTo(a)}getBoundingSphere(a){this.isEmpty()?a.makeEmpty():(this.getCenter(a.center),a.radius=.5*this.getSize(Ze).length());return a}intersect(a){this.min.max(a.min);this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this}union(a){this.min.min(a.min);this.max.max(a.max);
return this}applyMatrix4(a){if(this.isEmpty())return this;qe[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(a);qe[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(a);qe[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(a);qe[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(a);qe[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(a);qe[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(a);qe[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(a);qe[7].set(this.max.x,this.max.y,
this.max.z).applyMatrix4(a);this.setFromPoints(qe);return this}translate(a){this.min.add(a);this.max.add(a);return this}equals(a){return a.min.equals(this.min)&&a.max.equals(this.max)}}const qe=[new ka,new ka,new ka,new ka,new ka,new ka,new ka,new ka],Ze=new ka,Zh=new Ye,vf=new ka,wf=new ka,xf=new ka,Ee=new ka,Fe=new ka,$e=new ka,cg=new ka,Pg=new ka,Qg=new ka,Pe=new ka,el=new Ye,dg=new ka,$h=new ka;class af{constructor(a=new ka,b=-1){this.center=a;this.radius=b}set(a,b){this.center.copy(a);this.radius=
b;return this}setFromPoints(a,b){const h=this.center;void 0!==b?h.copy(b):el.setFromPoints(a).getCenter(h);b=0;for(let n=0,t=a.length;n<t;n++)b=Math.max(b,h.distanceToSquared(a[n]));this.radius=Math.sqrt(b);return this}copy(a){this.center.copy(a.center);this.radius=a.radius;return this}isEmpty(){return 0>this.radius}makeEmpty(){this.center.set(0,0,0);this.radius=-1;return this}containsPoint(a){return a.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(a){return a.distanceTo(this.center)-
this.radius}intersectsSphere(a){const b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b}intersectsBox(a){return a.intersectsSphere(this)}intersectsPlane(a){return Math.abs(a.distanceToPoint(this.center))<=this.radius}clampPoint(a,b){const h=this.center.distanceToSquared(a);b.copy(a);h>this.radius*this.radius&&(b.sub(this.center).normalize(),b.multiplyScalar(this.radius).add(this.center));return b}getBoundingBox(a){if(this.isEmpty())return a.makeEmpty(),a;a.set(this.center,
this.center);a.expandByScalar(this.radius);return a}applyMatrix4(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this}translate(a){this.center.add(a);return this}expandByPoint(a){if(this.isEmpty())return this.center.copy(a),this.radius=0,this;dg.subVectors(a,this.center);a=dg.lengthSq();if(a>this.radius*this.radius){a=Math.sqrt(a);const b=.5*(a-this.radius);this.center.addScaledVector(dg,b/a);this.radius+=b}return this}union(a){if(a.isEmpty())return this;if(this.isEmpty())return this.copy(a),
this;!0===this.center.equals(a.center)?this.radius=Math.max(this.radius,a.radius):($h.subVectors(a.center,this.center).setLength(a.radius),this.expandByPoint(dg.copy(a.center).add($h)),this.expandByPoint(dg.copy(a.center).sub($h)));return this}equals(a){return a.center.equals(this.center)&&a.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const re=new ka,ai=new ka,Rg=new ka,Ge=new ka,bi=new ka,Sg=new ka,ci=new ka;class eg{constructor(a=new ka,b=new ka(0,0,-1)){this.origin=a;
this.direction=b}set(a,b){this.origin.copy(a);this.direction.copy(b);return this}copy(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this}at(a,b){return b.copy(this.origin).addScaledVector(this.direction,a)}lookAt(a){this.direction.copy(a).sub(this.origin).normalize();return this}recast(a){this.origin.copy(this.at(a,re));return this}closestPointToPoint(a,b){b.subVectors(a,this.origin);a=b.dot(this.direction);return 0>a?b.copy(this.origin):b.copy(this.origin).addScaledVector(this.direction,
a)}distanceToPoint(a){return Math.sqrt(this.distanceSqToPoint(a))}distanceSqToPoint(a){const b=re.subVectors(a,this.origin).dot(this.direction);if(0>b)return this.origin.distanceToSquared(a);re.copy(this.origin).addScaledVector(this.direction,b);return re.distanceToSquared(a)}distanceSqToSegment(a,b,h,n){ai.copy(a).add(b).multiplyScalar(.5);Rg.copy(b).sub(a).normalize();Ge.copy(this.origin).sub(ai);var t=.5*a.distanceTo(b),C=-this.direction.dot(Rg);const G=Ge.dot(this.direction),I=-Ge.dot(Rg),K=Ge.lengthSq(),
M=Math.abs(1-C*C);let T;0<M?(a=C*I-G,b=C*G-I,T=t*M,0<=a?b>=-T?b<=T?(t=1/M,a*=t,b*=t,C=a*(a+C*b+2*G)+b*(C*a+b+2*I)+K):(b=t,a=Math.max(0,-(C*b+G)),C=-a*a+b*(b+2*I)+K):(b=-t,a=Math.max(0,-(C*b+G)),C=-a*a+b*(b+2*I)+K):b<=-T?(a=Math.max(0,-(-C*t+G)),b=0<a?-t:Math.min(Math.max(-t,-I),t),C=-a*a+b*(b+2*I)+K):b<=T?(a=0,b=Math.min(Math.max(-t,-I),t),C=b*(b+2*I)+K):(a=Math.max(0,-(C*t+G)),b=0<a?t:Math.min(Math.max(-t,-I),t),C=-a*a+b*(b+2*I)+K)):(b=0<C?-t:t,a=Math.max(0,-(C*b+G)),C=-a*a+b*(b+2*I)+K);h&&h.copy(this.origin).addScaledVector(this.direction,
a);n&&n.copy(ai).addScaledVector(Rg,b);return C}intersectSphere(a,b){re.subVectors(a.center,this.origin);var h=re.dot(this.direction),n=re.dot(re)-h*h;a=a.radius*a.radius;if(n>a)return null;a=Math.sqrt(a-n);n=h-a;h+=a;return 0>h?null:0>n?this.at(h,b):this.at(n,b)}intersectsSphere(a){return this.distanceSqToPoint(a.center)<=a.radius*a.radius}distanceToPlane(a){const b=a.normal.dot(this.direction);if(0===b)return 0===a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;
return 0<=a?a:null}intersectPlane(a,b){a=this.distanceToPlane(a);return null===a?null:this.at(a,b)}intersectsPlane(a){const b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1}intersectBox(a,b){let h;var n=1/this.direction.x;var t=1/this.direction.y;const C=1/this.direction.z,G=this.origin;0<=n?(h=(a.min.x-G.x)*n,n*=a.max.x-G.x):(h=(a.max.x-G.x)*n,n*=a.min.x-G.x);if(0<=t){var I=(a.min.y-G.y)*t;t*=a.max.y-G.y}else I=(a.max.y-G.y)*t,t*=a.min.y-G.y;if(h>t||I>n)return null;
if(I>h||isNaN(h))h=I;if(t<n||isNaN(n))n=t;0<=C?(I=(a.min.z-G.z)*C,a=(a.max.z-G.z)*C):(I=(a.max.z-G.z)*C,a=(a.min.z-G.z)*C);if(h>a||I>n)return null;if(I>h||h!==h)h=I;if(a<n||n!==n)n=a;return 0>n?null:this.at(0<=h?h:n,b)}intersectsBox(a){return null!==this.intersectBox(a,re)}intersectTriangle(a,b,h,n,t){bi.subVectors(b,a);Sg.subVectors(h,a);ci.crossVectors(bi,Sg);b=this.direction.dot(ci);if(0<b){if(n)return null;n=1}else if(0>b)n=-1,b=-b;else return null;Ge.subVectors(this.origin,a);a=n*this.direction.dot(Sg.crossVectors(Ge,
Sg));if(0>a)return null;h=n*this.direction.dot(bi.cross(Ge));if(0>h||a+h>b)return null;a=-n*Ge.dot(ci);return 0>a?null:this.at(a/b,t)}applyMatrix4(a){this.origin.applyMatrix4(a);this.direction.transformDirection(a);return this}equals(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class $b{constructor(){$b.prototype.isMatrix4=!0;this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(a,b,h,n,t,C,G,I,K,M,T,U,V,ba,aa,S){const ea=
this.elements;ea[0]=a;ea[4]=b;ea[8]=h;ea[12]=n;ea[1]=t;ea[5]=C;ea[9]=G;ea[13]=I;ea[2]=K;ea[6]=M;ea[10]=T;ea[14]=U;ea[3]=V;ea[7]=ba;ea[11]=aa;ea[15]=S;return this}identity(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this}clone(){return(new $b).fromArray(this.elements)}copy(a){const b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return this}copyPosition(a){const b=
this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this}setFromMatrix3(a){a=a.elements;this.set(a[0],a[3],a[6],0,a[1],a[4],a[7],0,a[2],a[5],a[8],0,0,0,0,1);return this}extractBasis(a,b,h){a.setFromMatrixColumn(this,0);b.setFromMatrixColumn(this,1);h.setFromMatrixColumn(this,2);return this}makeBasis(a,b,h){this.set(a.x,b.x,h.x,0,a.y,b.y,h.y,0,a.z,b.z,h.z,0,0,0,0,1);return this}extractRotation(a){const b=this.elements,h=a.elements,n=1/yf.setFromMatrixColumn(a,0).length(),t=1/yf.setFromMatrixColumn(a,
1).length();a=1/yf.setFromMatrixColumn(a,2).length();b[0]=h[0]*n;b[1]=h[1]*n;b[2]=h[2]*n;b[3]=0;b[4]=h[4]*t;b[5]=h[5]*t;b[6]=h[6]*t;b[7]=0;b[8]=h[8]*a;b[9]=h[9]*a;b[10]=h[10]*a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this}makeRotationFromEuler(a){const b=this.elements;var h=a.x,n=a.y,t=a.z;const C=Math.cos(h);h=Math.sin(h);const G=Math.cos(n);n=Math.sin(n);const I=Math.cos(t);t=Math.sin(t);if("XYZ"===a.order){a=C*I;var K=C*t,M=h*I,T=h*t;b[0]=G*I;b[4]=-G*t;b[8]=n;b[1]=K+M*n;b[5]=a-T*n;b[9]=
-h*G;b[2]=T-a*n;b[6]=M+K*n;b[10]=C*G}else"YXZ"===a.order?(a=G*I,K=G*t,M=n*I,T=n*t,b[0]=a+T*h,b[4]=M*h-K,b[8]=C*n,b[1]=C*t,b[5]=C*I,b[9]=-h,b[2]=K*h-M,b[6]=T+a*h,b[10]=C*G):"ZXY"===a.order?(a=G*I,K=G*t,M=n*I,T=n*t,b[0]=a-T*h,b[4]=-C*t,b[8]=M+K*h,b[1]=K+M*h,b[5]=C*I,b[9]=T-a*h,b[2]=-C*n,b[6]=h,b[10]=C*G):"ZYX"===a.order?(a=C*I,K=C*t,M=h*I,T=h*t,b[0]=G*I,b[4]=M*n-K,b[8]=a*n+T,b[1]=G*t,b[5]=T*n+a,b[9]=K*n-M,b[2]=-n,b[6]=h*G,b[10]=C*G):"YZX"===a.order?(a=C*G,K=C*n,M=h*G,T=h*n,b[0]=G*I,b[4]=T-a*t,b[8]=
M*t+K,b[1]=t,b[5]=C*I,b[9]=-h*I,b[2]=-n*I,b[6]=K*t+M,b[10]=a-T*t):"XZY"===a.order&&(a=C*G,K=C*n,M=h*G,T=h*n,b[0]=G*I,b[4]=-t,b[8]=n*I,b[1]=a*t+T,b[5]=C*I,b[9]=K*t-M,b[2]=M*t-K,b[6]=h*I,b[10]=T*t+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this}makeRotationFromQuaternion(a){return this.compose(fl,a,gl)}lookAt(a,b,h){const n=this.elements;qd.subVectors(a,b);0===qd.lengthSq()&&(qd.z=1);qd.normalize();He.crossVectors(h,qd);0===He.lengthSq()&&(1===Math.abs(h.z)?qd.x+=1E-4:qd.z+=1E-4,
qd.normalize(),He.crossVectors(h,qd));He.normalize();Tg.crossVectors(qd,He);n[0]=He.x;n[4]=Tg.x;n[8]=qd.x;n[1]=He.y;n[5]=Tg.y;n[9]=qd.y;n[2]=He.z;n[6]=Tg.z;n[10]=qd.z;return this}multiply(a){return this.multiplyMatrices(this,a)}premultiply(a){return this.multiplyMatrices(a,this)}multiplyMatrices(a,b){var h=a.elements,n=b.elements;b=this.elements;a=h[0];const t=h[4],C=h[8],G=h[12],I=h[1],K=h[5],M=h[9],T=h[13],U=h[2],V=h[6],ba=h[10],aa=h[14],S=h[3],ea=h[7],va=h[11];h=h[15];const ma=n[0],wa=n[4],Ea=
n[8],ua=n[12],Qa=n[1],ya=n[5],Ha=n[9],Ka=n[13],Ia=n[2],gb=n[6],Za=n[10],db=n[14],bb=n[3],rb=n[7],Bb=n[11];n=n[15];b[0]=a*ma+t*Qa+C*Ia+G*bb;b[4]=a*wa+t*ya+C*gb+G*rb;b[8]=a*Ea+t*Ha+C*Za+G*Bb;b[12]=a*ua+t*Ka+C*db+G*n;b[1]=I*ma+K*Qa+M*Ia+T*bb;b[5]=I*wa+K*ya+M*gb+T*rb;b[9]=I*Ea+K*Ha+M*Za+T*Bb;b[13]=I*ua+K*Ka+M*db+T*n;b[2]=U*ma+V*Qa+ba*Ia+aa*bb;b[6]=U*wa+V*ya+ba*gb+aa*rb;b[10]=U*Ea+V*Ha+ba*Za+aa*Bb;b[14]=U*ua+V*Ka+ba*db+aa*n;b[3]=S*ma+ea*Qa+va*Ia+h*bb;b[7]=S*wa+ea*ya+va*gb+h*rb;b[11]=S*Ea+ea*Ha+va*Za+h*
Bb;b[15]=S*ua+ea*Ka+va*db+h*n;return this}multiplyScalar(a){const b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this}determinant(){const a=this.elements,b=a[0],h=a[4],n=a[8],t=a[12],C=a[1],G=a[5],I=a[9],K=a[13],M=a[2],T=a[6],U=a[10],V=a[14];return a[3]*(+t*I*T-n*K*T-t*G*U+h*K*U+n*G*V-h*I*V)+a[7]*(+b*I*V-b*K*U+t*C*U-n*C*V+n*K*M-t*I*M)+a[11]*(+b*K*T-b*G*V-t*C*T+h*C*V+t*G*M-h*K*M)+a[15]*(-n*
G*M-b*I*T+b*G*U+n*C*T-h*C*U+h*I*M)}transpose(){const a=this.elements;let b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this}setPosition(a,b,h){const n=this.elements;a.isVector3?(n[12]=a.x,n[13]=a.y,n[14]=a.z):(n[12]=a,n[13]=b,n[14]=h);return this}invert(){const a=this.elements,b=a[0],h=a[1],n=a[2],t=a[3],C=a[4],G=a[5],I=a[6],K=a[7],M=a[8],T=a[9],U=a[10],V=a[11],ba=a[12],aa=a[13],S=a[14],
ea=a[15],va=T*S*K-aa*U*K+aa*I*V-G*S*V-T*I*ea+G*U*ea,ma=ba*U*K-M*S*K-ba*I*V+C*S*V+M*I*ea-C*U*ea,wa=M*aa*K-ba*T*K+ba*G*V-C*aa*V-M*G*ea+C*T*ea,Ea=ba*T*I-M*aa*I-ba*G*U+C*aa*U+M*G*S-C*T*S;var ua=b*va+h*ma+n*wa+t*Ea;if(0===ua)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);ua=1/ua;a[0]=va*ua;a[1]=(aa*U*t-T*S*t-aa*n*V+h*S*V+T*n*ea-h*U*ea)*ua;a[2]=(G*S*t-aa*I*t+aa*n*K-h*S*K-G*n*ea+h*I*ea)*ua;a[3]=(T*I*t-G*U*t-T*n*K+h*U*K+G*n*V-h*I*V)*ua;a[4]=ma*ua;a[5]=(M*S*t-ba*U*t+ba*n*V-b*S*V-M*n*ea+b*U*ea)*ua;a[6]=(ba*
I*t-C*S*t-ba*n*K+b*S*K+C*n*ea-b*I*ea)*ua;a[7]=(C*U*t-M*I*t+M*n*K-b*U*K-C*n*V+b*I*V)*ua;a[8]=wa*ua;a[9]=(ba*T*t-M*aa*t-ba*h*V+b*aa*V+M*h*ea-b*T*ea)*ua;a[10]=(C*aa*t-ba*G*t+ba*h*K-b*aa*K-C*h*ea+b*G*ea)*ua;a[11]=(M*G*t-C*T*t-M*h*K+b*T*K+C*h*V-b*G*V)*ua;a[12]=Ea*ua;a[13]=(M*aa*n-ba*T*n+ba*h*U-b*aa*U-M*h*S+b*T*S)*ua;a[14]=(ba*G*n-C*aa*n-ba*h*I+b*aa*I+C*h*S-b*G*S)*ua;a[15]=(C*T*n-M*G*n+M*h*I-b*T*I-C*h*U+b*G*U)*ua;return this}scale(a){const b=this.elements,h=a.x,n=a.y;a=a.z;b[0]*=h;b[4]*=n;b[8]*=a;b[1]*=
h;b[5]*=n;b[9]*=a;b[2]*=h;b[6]*=n;b[10]*=a;b[3]*=h;b[7]*=n;b[11]*=a;return this}getMaxScaleOnAxis(){const a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))}makeTranslation(a,b,h){this.set(1,0,0,a,0,1,0,b,0,0,1,h,0,0,0,1);return this}makeRotationX(a){const b=Math.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this}makeRotationY(a){const b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,
-a,0,b,0,0,0,0,1);return this}makeRotationZ(a){const b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this}makeRotationAxis(a,b){const h=Math.cos(b);b=Math.sin(b);const n=1-h,t=a.x,C=a.y;a=a.z;const G=n*t,I=n*C;this.set(G*t+h,G*C-b*a,G*a+b*C,0,G*C+b*a,I*C+h,I*a-b*t,0,G*a-b*C,I*a+b*t,n*a*a+h,0,0,0,0,1);return this}makeScale(a,b,h){this.set(a,0,0,0,0,b,0,0,0,0,h,0,0,0,0,1);return this}makeShear(a,b,h,n,t,C){this.set(1,h,t,0,a,1,C,0,b,n,1,0,0,0,0,1);return this}compose(a,
b,h){const n=this.elements;var t=b._x,C=b._y,G=b._z,I=b._w,K=t+t,M=C+C,T=G+G;b=t*K;const U=t*M;t*=T;const V=C*M;C*=T;G*=T;K*=I;M*=I;I*=T;T=h.x;const ba=h.y;h=h.z;n[0]=(1-(V+G))*T;n[1]=(U+I)*T;n[2]=(t-M)*T;n[3]=0;n[4]=(U-I)*ba;n[5]=(1-(b+G))*ba;n[6]=(C+K)*ba;n[7]=0;n[8]=(t+M)*h;n[9]=(C-K)*h;n[10]=(1-(b+V))*h;n[11]=0;n[12]=a.x;n[13]=a.y;n[14]=a.z;n[15]=1;return this}decompose(a,b,h){var n=this.elements;let t=yf.set(n[0],n[1],n[2]).length();const C=yf.set(n[4],n[5],n[6]).length(),G=yf.set(n[8],n[9],
n[10]).length();0>this.determinant()&&(t=-t);a.x=n[12];a.y=n[13];a.z=n[14];Rc.copy(this);a=1/t;n=1/C;const I=1/G;Rc.elements[0]*=a;Rc.elements[1]*=a;Rc.elements[2]*=a;Rc.elements[4]*=n;Rc.elements[5]*=n;Rc.elements[6]*=n;Rc.elements[8]*=I;Rc.elements[9]*=I;Rc.elements[10]*=I;b.setFromRotationMatrix(Rc);h.x=t;h.y=C;h.z=G;return this}makePerspective(a,b,h,n,t,C){const G=this.elements;G[0]=2*t/(b-a);G[4]=0;G[8]=(b+a)/(b-a);G[12]=0;G[1]=0;G[5]=2*t/(h-n);G[9]=(h+n)/(h-n);G[13]=0;G[2]=0;G[6]=0;G[10]=-(C+
t)/(C-t);G[14]=-2*C*t/(C-t);G[3]=0;G[7]=0;G[11]=-1;G[15]=0;return this}makeOrthographic(a,b,h,n,t,C){const G=this.elements,I=1/(b-a),K=1/(h-n),M=1/(C-t);G[0]=2*I;G[4]=0;G[8]=0;G[12]=-((b+a)*I);G[1]=0;G[5]=2*K;G[9]=0;G[13]=-((h+n)*K);G[2]=0;G[6]=0;G[10]=-2*M;G[14]=-((C+t)*M);G[3]=0;G[7]=0;G[11]=0;G[15]=1;return this}equals(a){const b=this.elements;a=a.elements;for(let h=0;16>h;h++)if(b[h]!==a[h])return!1;return!0}fromArray(a,b=0){for(let h=0;16>h;h++)this.elements[h]=a[h+b];return this}toArray(a=[],
b=0){const h=this.elements;a[b]=h[0];a[b+1]=h[1];a[b+2]=h[2];a[b+3]=h[3];a[b+4]=h[4];a[b+5]=h[5];a[b+6]=h[6];a[b+7]=h[7];a[b+8]=h[8];a[b+9]=h[9];a[b+10]=h[10];a[b+11]=h[11];a[b+12]=h[12];a[b+13]=h[13];a[b+14]=h[14];a[b+15]=h[15];return a}}const yf=new ka,Rc=new $b,fl=new ka(0,0,0),gl=new ka(1,1,1),He=new ka,Tg=new ka,qd=new ka,gj=new $b,hj=new zb;class Ug{constructor(a=0,b=0,h=0,n=Ug.DEFAULT_ORDER){this.isEuler=!0;this._x=a;this._y=b;this._z=h;this._order=n}get x(){return this._x}set x(a){this._x=
a;this._onChangeCallback()}get y(){return this._y}set y(a){this._y=a;this._onChangeCallback()}get z(){return this._z}set z(a){this._z=a;this._onChangeCallback()}get order(){return this._order}set order(a){this._order=a;this._onChangeCallback()}set(a,b,h,n=this._order){this._x=a;this._y=b;this._z=h;this._order=n;this._onChangeCallback();return this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this._onChangeCallback();
return this}setFromRotationMatrix(a,b=this._order,h=!0){var n=a.elements;a=n[0];const t=n[4],C=n[8],G=n[1],I=n[5],K=n[9],M=n[2],T=n[6];n=n[10];switch(b){case "XYZ":this._y=Math.asin(m(C,-1,1));.9999999>Math.abs(C)?(this._x=Math.atan2(-K,n),this._z=Math.atan2(-t,a)):(this._x=Math.atan2(T,I),this._z=0);break;case "YXZ":this._x=Math.asin(-m(K,-1,1));.9999999>Math.abs(K)?(this._y=Math.atan2(C,n),this._z=Math.atan2(G,I)):(this._y=Math.atan2(-M,a),this._z=0);break;case "ZXY":this._x=Math.asin(m(T,-1,1));
.9999999>Math.abs(T)?(this._y=Math.atan2(-M,n),this._z=Math.atan2(-t,I)):(this._y=0,this._z=Math.atan2(G,a));break;case "ZYX":this._y=Math.asin(-m(M,-1,1));.9999999>Math.abs(M)?(this._x=Math.atan2(T,n),this._z=Math.atan2(G,a)):(this._x=0,this._z=Math.atan2(-t,I));break;case "YZX":this._z=Math.asin(m(G,-1,1));.9999999>Math.abs(G)?(this._x=Math.atan2(-K,I),this._y=Math.atan2(-M,a)):(this._x=0,this._y=Math.atan2(C,n));break;case "XZY":this._z=Math.asin(-m(t,-1,1));.9999999>Math.abs(t)?(this._x=Math.atan2(T,
I),this._y=Math.atan2(C,a)):(this._x=Math.atan2(-K,n),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+b)}this._order=b;!0===h&&this._onChangeCallback();return this}setFromQuaternion(a,b,h){gj.makeRotationFromQuaternion(a);return this.setFromRotationMatrix(gj,b,h)}setFromVector3(a,b=this._order){return this.set(a.x,a.y,a.z,b)}reorder(a){hj.setFromEuler(this);return this.setFromQuaternion(hj,a)}equals(a){return a._x===this._x&&a._y===this._y&&
a._z===this._z&&a._order===this._order}fromArray(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this._onChangeCallback();return this}toArray(a=[],b=0){a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._order;return a}_onChange(a){this._onChangeCallback=a;return this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x;yield this._y;yield this._z;yield this._order}}Ug.DEFAULT_ORDER="XYZ";class Cg{constructor(){this.mask=1}set(a){this.mask=(1<<a|0)>>>0}enable(a){this.mask=
this.mask|1<<a|0}enableAll(){this.mask=-1}toggle(a){this.mask^=1<<a|0}disable(a){this.mask&=~(1<<a|0)}disableAll(){this.mask=0}test(a){return 0!==(this.mask&a.mask)}isEnabled(a){return 0!==(this.mask&(1<<a|0))}}let hl=0;const ij=new ka,zf=new zb,se=new $b,Vg=new ka,fg=new ka,il=new ka,jl=new zb,jj=new ka(1,0,0),kj=new ka(0,1,0),lj=new ka(0,0,1),kl={type:"added"},mj={type:"removed"};class wc extends Od{constructor(){super();this.isObject3D=!0;Object.defineProperty(this,"id",{value:hl++});this.uuid=
q();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=wc.DEFAULT_UP.clone();const a=new ka,b=new Ug,h=new zb,n=new ka(1,1,1);b._onChange(function(){h.setFromEuler(b,!1)});h._onChange(function(){b.setFromQuaternion(h,void 0,!1)});Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:a},rotation:{configurable:!0,enumerable:!0,value:b},quaternion:{configurable:!0,enumerable:!0,value:h},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new $b},
normalMatrix:{value:new xb}});this.matrix=new $b;this.matrixWorld=new $b;this.matrixAutoUpdate=wc.DEFAULT_MATRIX_AUTO_UPDATE;this.matrixWorldNeedsUpdate=!1;this.matrixWorldAutoUpdate=wc.DEFAULT_MATRIX_WORLD_AUTO_UPDATE;this.layers=new Cg;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.animations=[];this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(a){this.matrixAutoUpdate&&this.updateMatrix();this.matrix.premultiply(a);this.matrix.decompose(this.position,
this.quaternion,this.scale)}applyQuaternion(a){this.quaternion.premultiply(a);return this}setRotationFromAxisAngle(a,b){this.quaternion.setFromAxisAngle(a,b)}setRotationFromEuler(a){this.quaternion.setFromEuler(a,!0)}setRotationFromMatrix(a){this.quaternion.setFromRotationMatrix(a)}setRotationFromQuaternion(a){this.quaternion.copy(a)}rotateOnAxis(a,b){zf.setFromAxisAngle(a,b);this.quaternion.multiply(zf);return this}rotateOnWorldAxis(a,b){zf.setFromAxisAngle(a,b);this.quaternion.premultiply(zf);return this}rotateX(a){return this.rotateOnAxis(jj,
a)}rotateY(a){return this.rotateOnAxis(kj,a)}rotateZ(a){return this.rotateOnAxis(lj,a)}translateOnAxis(a,b){ij.copy(a).applyQuaternion(this.quaternion);this.position.add(ij.multiplyScalar(b));return this}translateX(a){return this.translateOnAxis(jj,a)}translateY(a){return this.translateOnAxis(kj,a)}translateZ(a){return this.translateOnAxis(lj,a)}localToWorld(a){this.updateWorldMatrix(!0,!1);return a.applyMatrix4(this.matrixWorld)}worldToLocal(a){this.updateWorldMatrix(!0,!1);return a.applyMatrix4(se.copy(this.matrixWorld).invert())}lookAt(a,
b,h){a.isVector3?Vg.copy(a):Vg.set(a,b,h);a=this.parent;this.updateWorldMatrix(!0,!1);fg.setFromMatrixPosition(this.matrixWorld);this.isCamera||this.isLight?se.lookAt(fg,Vg,this.up):se.lookAt(Vg,fg,this.up);this.quaternion.setFromRotationMatrix(se);a&&(se.extractRotation(a.matrixWorld),zf.setFromRotationMatrix(se),this.quaternion.premultiply(zf.invert()))}add(a){if(1<arguments.length){for(let b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",
a),this;a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,this.children.push(a),a.dispatchEvent(kl)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a);return this}remove(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);return this}b=this.children.indexOf(a);-1!==b&&(a.parent=null,this.children.splice(b,1),a.dispatchEvent(mj));return this}removeFromParent(){const a=this.parent;null!==a&&a.remove(this);return this}clear(){for(let a=
0;a<this.children.length;a++){const b=this.children[a];b.parent=null;b.dispatchEvent(mj)}this.children.length=0;return this}attach(a){this.updateWorldMatrix(!0,!1);se.copy(this.matrixWorld).invert();null!==a.parent&&(a.parent.updateWorldMatrix(!0,!1),se.multiply(a.parent.matrixWorld));a.applyMatrix4(se);this.add(a);a.updateWorldMatrix(!1,!0);return this}getObjectById(a){return this.getObjectByProperty("id",a)}getObjectByName(a){return this.getObjectByProperty("name",a)}getObjectByProperty(a,b){if(this[a]===
b)return this;for(let h=0,n=this.children.length;h<n;h++){const t=this.children[h].getObjectByProperty(a,b);if(void 0!==t)return t}}getObjectsByProperty(a,b){let h=[];this[a]===b&&h.push(this);for(let n=0,t=this.children.length;n<t;n++){const C=this.children[n].getObjectsByProperty(a,b);0<C.length&&(h=h.concat(C))}return h}getWorldPosition(a){this.updateWorldMatrix(!0,!1);return a.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(a){this.updateWorldMatrix(!0,!1);this.matrixWorld.decompose(fg,
a,il);return a}getWorldScale(a){this.updateWorldMatrix(!0,!1);this.matrixWorld.decompose(fg,jl,a);return a}getWorldDirection(a){this.updateWorldMatrix(!0,!1);const b=this.matrixWorld.elements;return a.set(b[8],b[9],b[10]).normalize()}raycast(){}traverse(a){a(this);const b=this.children;for(let h=0,n=b.length;h<n;h++)b[h].traverse(a)}traverseVisible(a){if(!1!==this.visible){a(this);var b=this.children;for(let h=0,n=b.length;h<n;h++)b[h].traverseVisible(a)}}traverseAncestors(a){const b=this.parent;
null!==b&&(a(b),b.traverseAncestors(a))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(a){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||a)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;const b=this.children;for(let h=0,n=b.length;h<n;h++){const t=b[h];!0!==t.matrixWorldAutoUpdate&&
!0!==a||t.updateMatrixWorld(a)}}updateWorldMatrix(a,b){const h=this.parent;!0===a&&null!==h&&!0===h.matrixWorldAutoUpdate&&h.updateWorldMatrix(!0,!1);this.matrixAutoUpdate&&this.updateMatrix();null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix);if(!0===b){a=this.children;for(let n=0,t=a.length;n<t;n++)b=a[n],!0===b.matrixWorldAutoUpdate&&b.updateWorldMatrix(!1,!0)}}toJSON(a){function b(I,K){void 0===I[K.uuid]&&(I[K.uuid]=K.toJSON(a));
return K.uuid}function h(I){const K=[];for(const M in I){const T=I[M];delete T.metadata;K.push(T)}return K}var n=void 0===a||"string"===typeof a;const t={};n&&(a={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},t.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const C={};C.uuid=this.uuid;C.type=this.type;""!==this.name&&(C.name=this.name);!0===this.castShadow&&(C.castShadow=!0);!0===this.receiveShadow&&(C.receiveShadow=!0);!1===this.visible&&
(C.visible=!1);!1===this.frustumCulled&&(C.frustumCulled=!1);0!==this.renderOrder&&(C.renderOrder=this.renderOrder);0<Object.keys(this.userData).length&&(C.userData=this.userData);C.layers=this.layers.mask;C.matrix=this.matrix.toArray();!1===this.matrixAutoUpdate&&(C.matrixAutoUpdate=!1);this.isInstancedMesh&&(C.type="InstancedMesh",C.count=this.count,C.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(C.instanceColor=this.instanceColor.toJSON()));if(this.isScene)this.background&&
(this.background.isColor?C.background=this.background.toJSON():this.background.isTexture&&(C.background=this.background.toJSON(a).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(C.environment=this.environment.toJSON(a).uuid);else if(this.isMesh||this.isLine||this.isPoints){C.geometry=b(a.geometries,this.geometry);var G=this.geometry.parameters;if(void 0!==G&&void 0!==G.shapes)if(G=G.shapes,Array.isArray(G))for(let I=0,K=G.length;I<K;I++)b(a.shapes,
G[I]);else b(a.shapes,G)}this.isSkinnedMesh&&(C.bindMode=this.bindMode,C.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(b(a.skeletons,this.skeleton),C.skeleton=this.skeleton.uuid));if(void 0!==this.material)if(Array.isArray(this.material)){G=[];for(let I=0,K=this.material.length;I<K;I++)G.push(b(a.materials,this.material[I]));C.material=G}else C.material=b(a.materials,this.material);if(0<this.children.length)for(C.children=[],G=0;G<this.children.length;G++)C.children.push(this.children[G].toJSON(a).object);
if(0<this.animations.length)for(C.animations=[],G=0;G<this.animations.length;G++)C.animations.push(b(a.animations,this.animations[G]));if(n){n=h(a.geometries);G=h(a.materials);const I=h(a.textures),K=h(a.images),M=h(a.shapes),T=h(a.skeletons),U=h(a.animations),V=h(a.nodes);0<n.length&&(t.geometries=n);0<G.length&&(t.materials=G);0<I.length&&(t.textures=I);0<K.length&&(t.images=K);0<M.length&&(t.shapes=M);0<T.length&&(t.skeletons=T);0<U.length&&(t.animations=U);0<V.length&&(t.nodes=V)}t.object=C;return t}clone(a){return(new this.constructor).copy(this,
a)}copy(a,b=!0){this.name=a.name;this.up.copy(a.up);this.position.copy(a.position);this.rotation.order=a.rotation.order;this.quaternion.copy(a.quaternion);this.scale.copy(a.scale);this.matrix.copy(a.matrix);this.matrixWorld.copy(a.matrixWorld);this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate;this.matrixWorldAutoUpdate=a.matrixWorldAutoUpdate;this.layers.mask=a.layers.mask;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;
this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===b)for(b=0;b<a.children.length;b++)this.add(a.children[b].clone());return this}}wc.DEFAULT_UP=new ka(0,1,0);wc.DEFAULT_MATRIX_AUTO_UPDATE=!0;wc.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ud=new ka,te=new ka,di=new ka,ue=new ka,Af=new ka,Bf=new ka,nj=new ka,ei=new ka,fi=new ka,gi=new ka;class Qd{constructor(a=new ka,b=new ka,h=new ka){this.a=a;this.b=b;this.c=h}static getNormal(a,
b,h,n){n.subVectors(h,b);Ud.subVectors(a,b);n.cross(Ud);a=n.lengthSq();return 0<a?n.multiplyScalar(1/Math.sqrt(a)):n.set(0,0,0)}static getBarycoord(a,b,h,n,t){Ud.subVectors(n,b);te.subVectors(h,b);di.subVectors(a,b);a=Ud.dot(Ud);b=Ud.dot(te);h=Ud.dot(di);var C=te.dot(te);n=te.dot(di);var G=a*C-b*b;if(0===G)return t.set(-2,-1,-1);G=1/G;C=(C*h-b*n)*G;a=(a*n-b*h)*G;return t.set(1-C-a,a,C)}static containsPoint(a,b,h,n){this.getBarycoord(a,b,h,n,ue);return 0<=ue.x&&0<=ue.y&&1>=ue.x+ue.y}static getUV(a,
b,h,n,t,C,G,I){this.getBarycoord(a,b,h,n,ue);I.set(0,0);I.addScaledVector(t,ue.x);I.addScaledVector(C,ue.y);I.addScaledVector(G,ue.z);return I}static isFrontFacing(a,b,h,n){Ud.subVectors(h,b);te.subVectors(a,b);return 0>Ud.cross(te).dot(n)?!0:!1}set(a,b,h){this.a.copy(a);this.b.copy(b);this.c.copy(h);return this}setFromPointsAndIndices(a,b,h,n){this.a.copy(a[b]);this.b.copy(a[h]);this.c.copy(a[n]);return this}setFromAttributeAndIndices(a,b,h,n){this.a.fromBufferAttribute(a,b);this.b.fromBufferAttribute(a,
h);this.c.fromBufferAttribute(a,n);return this}clone(){return(new this.constructor).copy(this)}copy(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this}getArea(){Ud.subVectors(this.c,this.b);te.subVectors(this.a,this.b);return.5*Ud.cross(te).length()}getMidpoint(a){return a.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(a){return Qd.getNormal(this.a,this.b,this.c,a)}getPlane(a){return a.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(a,b){return Qd.getBarycoord(a,
this.a,this.b,this.c,b)}getUV(a,b,h,n,t){return Qd.getUV(a,this.a,this.b,this.c,b,h,n,t)}containsPoint(a){return Qd.containsPoint(a,this.a,this.b,this.c)}isFrontFacing(a){return Qd.isFrontFacing(this.a,this.b,this.c,a)}intersectsBox(a){return a.intersectsTriangle(this)}closestPointToPoint(a,b){const h=this.a;var n=this.b,t=this.c;Af.subVectors(n,h);Bf.subVectors(t,h);ei.subVectors(a,h);var C=Af.dot(ei),G=Bf.dot(ei);if(0>=C&&0>=G)return b.copy(h);fi.subVectors(a,n);const I=Af.dot(fi),K=Bf.dot(fi);
if(0<=I&&K<=I)return b.copy(n);var M=C*K-I*G;if(0>=M&&0<=C&&0>=I)return n=C/(C-I),b.copy(h).addScaledVector(Af,n);gi.subVectors(a,t);a=Af.dot(gi);const T=Bf.dot(gi);if(0<=T&&a<=T)return b.copy(t);C=a*G-C*T;if(0>=C&&0<=G&&0>=T)return M=G/(G-T),b.copy(h).addScaledVector(Bf,M);G=I*T-a*K;if(0>=G&&0<=K-I&&0<=a-T)return nj.subVectors(t,n),M=(K-I)/(K-I+(a-T)),b.copy(n).addScaledVector(nj,M);t=1/(G+C+M);n=C*t;M*=t;return b.copy(h).addScaledVector(Af,n).addScaledVector(Bf,M)}equals(a){return a.a.equals(this.a)&&
a.b.equals(this.b)&&a.c.equals(this.c)}}let ll=0;class kd extends Od{constructor(){super();this.isMaterial=!0;Object.defineProperty(this,"id",{value:ll++});this.uuid=q();this.name="";this.type="Material";this.blending=1;this.side=0;this.vertexColors=!1;this.opacity=1;this.transparent=!1;this.blendSrc=204;this.blendDst=205;this.blendEquation=100;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=3;this.depthWrite=this.depthTest=!0;this.stencilWriteMask=255;this.stencilFunc=
519;this.stencilRef=0;this.stencilFuncMask=255;this.stencilZPass=this.stencilZFail=this.stencilFail=7680;this.stencilWrite=!1;this.clippingPlanes=null;this.clipShadows=this.clipIntersection=!1;this.shadowSide=null;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.forceSinglePass=this.premultipliedAlpha=this.alphaToCoverage=this.dithering=!1;this.toneMapped=this.visible=!0;this.userData={};this._alphaTest=this.version=0}get alphaTest(){return this._alphaTest}set alphaTest(a){0<
this._alphaTest!==0<a&&this.version++;this._alphaTest=a}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(a){if(void 0!==a)for(const b in a){const h=a[b];if(void 0===h){console.warn("THREE.Material: '"+b+"' parameter is undefined.");continue}const n=this[b];void 0===n?console.warn("THREE."+this.type+": '"+b+"' is not a property of this material."):n&&n.isColor?n.set(h):n&&n.isVector3&&h&&h.isVector3?n.copy(h):this[b]=h}}toJSON(a){function b(t){const C=
[];for(const G in t){const I=t[G];delete I.metadata;C.push(I)}return C}var h=void 0===a||"string"===typeof a;h&&(a={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid;n.type=this.type;""!==this.name&&(n.name=this.name);this.color&&this.color.isColor&&(n.color=this.color.getHex());void 0!==this.roughness&&(n.roughness=this.roughness);void 0!==this.metalness&&(n.metalness=this.metalness);void 0!==this.sheen&&(n.sheen=this.sheen);this.sheenColor&&
this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex());void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness);this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex());this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity);this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex());void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity);this.specularColor&&this.specularColor.isColor&&
(n.specularColor=this.specularColor.getHex());void 0!==this.shininess&&(n.shininess=this.shininess);void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat);void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness);this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(a).uuid);this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(a).uuid);this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&
(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(a).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray());void 0!==this.iridescence&&(n.iridescence=this.iridescence);void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR);void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange);this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(a).uuid);this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&
(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(a).uuid);this.map&&this.map.isTexture&&(n.map=this.map.toJSON(a).uuid);this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(a).uuid);this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(a).uuid);this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(a).uuid,n.lightMapIntensity=this.lightMapIntensity);this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(a).uuid,n.aoMapIntensity=
this.aoMapIntensity);this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(a).uuid,n.bumpScale=this.bumpScale);this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(a).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray());this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(a).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias);this.roughnessMap&&
this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(a).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(a).uuid);this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(a).uuid);this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(a).uuid);this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(a).uuid);this.specularColorMap&&
this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(a).uuid);this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(a).uuid,void 0!==this.combine&&(n.combine=this.combine));void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity);void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity);void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio);this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(a).uuid);
void 0!==this.transmission&&(n.transmission=this.transmission);this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(a).uuid);void 0!==this.thickness&&(n.thickness=this.thickness);this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(a).uuid);void 0!==this.attenuationDistance&&Infinity!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance);void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex());
void 0!==this.size&&(n.size=this.size);null!==this.shadowSide&&(n.shadowSide=this.shadowSide);void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation);1!==this.blending&&(n.blending=this.blending);0!==this.side&&(n.side=this.side);this.vertexColors&&(n.vertexColors=!0);1>this.opacity&&(n.opacity=this.opacity);!0===this.transparent&&(n.transparent=this.transparent);n.depthFunc=this.depthFunc;n.depthTest=this.depthTest;n.depthWrite=this.depthWrite;n.colorWrite=this.colorWrite;n.stencilWrite=
this.stencilWrite;n.stencilWriteMask=this.stencilWriteMask;n.stencilFunc=this.stencilFunc;n.stencilRef=this.stencilRef;n.stencilFuncMask=this.stencilFuncMask;n.stencilFail=this.stencilFail;n.stencilZFail=this.stencilZFail;n.stencilZPass=this.stencilZPass;void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation);!0===this.polygonOffset&&(n.polygonOffset=!0);0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor);0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=
this.polygonOffsetUnits);void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth);void 0!==this.dashSize&&(n.dashSize=this.dashSize);void 0!==this.gapSize&&(n.gapSize=this.gapSize);void 0!==this.scale&&(n.scale=this.scale);!0===this.dithering&&(n.dithering=!0);0<this.alphaTest&&(n.alphaTest=this.alphaTest);!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage);!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha);!0===this.forceSinglePass&&(n.forceSinglePass=
this.forceSinglePass);!0===this.wireframe&&(n.wireframe=this.wireframe);1<this.wireframeLinewidth&&(n.wireframeLinewidth=this.wireframeLinewidth);"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap);"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin);!0===this.flatShading&&(n.flatShading=this.flatShading);!1===this.visible&&(n.visible=!1);!1===this.toneMapped&&(n.toneMapped=!1);!1===this.fog&&(n.fog=!1);0<Object.keys(this.userData).length&&(n.userData=
this.userData);h&&(h=b(a.textures),a=b(a.images),0<h.length&&(n.textures=h),0<a.length&&(n.images=a));return n}clone(){return(new this.constructor).copy(this)}copy(a){this.name=a.name;this.blending=a.blending;this.side=a.side;this.vertexColors=a.vertexColors;this.opacity=a.opacity;this.transparent=a.transparent;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=a.blendDstAlpha;this.blendEquationAlpha=a.blendEquationAlpha;
this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;this.stencilWriteMask=a.stencilWriteMask;this.stencilFunc=a.stencilFunc;this.stencilRef=a.stencilRef;this.stencilFuncMask=a.stencilFuncMask;this.stencilFail=a.stencilFail;this.stencilZFail=a.stencilZFail;this.stencilZPass=a.stencilZPass;this.stencilWrite=a.stencilWrite;const b=a.clippingPlanes;let h=null;if(null!==b){const n=b.length;h=Array(n);for(let t=0;t!==n;++t)h[t]=b[t].clone()}this.clippingPlanes=h;this.clipIntersection=
a.clipIntersection;this.clipShadows=a.clipShadows;this.shadowSide=a.shadowSide;this.colorWrite=a.colorWrite;this.precision=a.precision;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.dithering=a.dithering;this.alphaTest=a.alphaTest;this.alphaToCoverage=a.alphaToCoverage;this.premultipliedAlpha=a.premultipliedAlpha;this.forceSinglePass=a.forceSinglePass;this.visible=a.visible;this.toneMapped=a.toneMapped;this.userData=
JSON.parse(JSON.stringify(a.userData));return this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(a){!0===a&&this.version++}}const oj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,
darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,
fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,
lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,
navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,
skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},yd={h:0,s:0,l:0},Wg={h:0,s:0,l:0};class wb{constructor(a,b,h){this.isColor=!0;this.b=this.g=this.r=1;return void 0===b&&void 0===h?this.set(a):this.setRGB(a,b,h)}set(a){a&&a.isColor?this.copy(a):"number"===
typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this}setScalar(a){this.b=this.g=this.r=a;return this}setHex(a,b="srgb"){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;jd.toWorkingColorSpace(this,b);return this}setRGB(a,b,h,n=jd.workingColorSpace){this.r=a;this.g=b;this.b=h;jd.toWorkingColorSpace(this,n);return this}setHSL(a,b,h,n=jd.workingColorSpace){a=c(a,1);b=m(b,0,1);h=m(h,0,1);0===b?this.r=this.g=this.b=h:(b=.5>=h?h*(1+b):h+b-h*b,h=2*h-b,
this.r=L(h,b,a+1/3),this.g=L(h,b,a),this.b=L(h,b,a-1/3));jd.toWorkingColorSpace(this,n);return this}setStyle(a,b="srgb"){function h(C){void 0!==C&&1>parseFloat(C)&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}var n;if(n=/^(\w+)\(([^\)]*)\)/.exec(a)){var t=n[2];switch(n[1]){case "rgb":case "rgba":if(n=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(t)){this.r=Math.min(255,parseInt(n[1],10))/255;this.g=Math.min(255,parseInt(n[2],10))/255;this.b=Math.min(255,
parseInt(n[3],10))/255;jd.toWorkingColorSpace(this,b);h(n[4]);break}if(n=/^\s*(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(t))this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,jd.toWorkingColorSpace(this,b),h(n[4]);break;case "hsl":case "hsla":if(n=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(t)){t=parseFloat(n[1])/360;const C=parseFloat(n[2])/100,G=parseFloat(n[3])/
100;h(n[4]);return this.setHSL(t,C,G,b)}break;default:console.warn("THREE.Color: Unknown color model "+a)}}else if(n=/^#([A-Fa-f\d]+)$/.exec(a))n=n[1],t=n.length,3===t?(this.r=parseInt(n.charAt(0)+n.charAt(0),16)/255,this.g=parseInt(n.charAt(1)+n.charAt(1),16)/255,this.b=parseInt(n.charAt(2)+n.charAt(2),16)/255,jd.toWorkingColorSpace(this,b)):6===t?(this.r=parseInt(n.charAt(0)+n.charAt(1),16)/255,this.g=parseInt(n.charAt(2)+n.charAt(3),16)/255,this.b=parseInt(n.charAt(4)+n.charAt(5),16)/255,jd.toWorkingColorSpace(this,
b)):console.warn("THREE.Color: Invalid hex color "+a);else if(a&&0<a.length)return this.setColorName(a,b);return this}setColorName(a,b="srgb"){const h=oj[a.toLowerCase()];void 0!==h?this.setHex(h,b):console.warn("THREE.Color: Unknown color "+a);return this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(a){this.r=a.r;this.g=a.g;this.b=a.b;return this}copySRGBToLinear(a){this.r=z(a.r);this.g=z(a.g);this.b=z(a.b);return this}copyLinearToSRGB(a){this.r=A(a.r);this.g=A(a.g);this.b=A(a.b);
return this}convertSRGBToLinear(){this.copySRGBToLinear(this);return this}convertLinearToSRGB(){this.copyLinearToSRGB(this);return this}getHex(a="srgb"){jd.fromWorkingColorSpace(ld.copy(this),a);return m(255*ld.r,0,255)<<16^m(255*ld.g,0,255)<<8^m(255*ld.b,0,255)<<0}getHexString(a="srgb"){return("000000"+this.getHex(a).toString(16)).slice(-6)}getHSL(a,b=jd.workingColorSpace){jd.fromWorkingColorSpace(ld.copy(this),b);b=ld.r;const h=ld.g,n=ld.b,t=Math.max(b,h,n);var C=Math.min(b,h,n);let G;const I=(C+
t)/2;if(C===t)C=G=0;else{const K=t-C;C=.5>=I?K/(t+C):K/(2-t-C);switch(t){case b:G=(h-n)/K+(h<n?6:0);break;case h:G=(n-b)/K+2;break;case n:G=(b-h)/K+4}G/=6}a.h=G;a.s=C;a.l=I;return a}getRGB(a,b=jd.workingColorSpace){jd.fromWorkingColorSpace(ld.copy(this),b);a.r=ld.r;a.g=ld.g;a.b=ld.b;return a}getStyle(a="srgb"){jd.fromWorkingColorSpace(ld.copy(this),a);const b=ld.r,h=ld.g,n=ld.b;return"srgb"!==a?`color(${a} ${b.toFixed(3)} ${h.toFixed(3)} ${n.toFixed(3)})`:`rgb(${255*b|0},${255*h|0},${255*n|0})`}offsetHSL(a,
b,h){this.getHSL(yd);yd.h+=a;yd.s+=b;yd.l+=h;this.setHSL(yd.h,yd.s,yd.l);return this}add(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this}addColors(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this}addScalar(a){this.r+=a;this.g+=a;this.b+=a;return this}sub(a){this.r=Math.max(0,this.r-a.r);this.g=Math.max(0,this.g-a.g);this.b=Math.max(0,this.b-a.b);return this}multiply(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this}multiplyScalar(a){this.r*=a;this.g*=a;this.b*=a;return this}lerp(a,
b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this}lerpColors(a,b,h){this.r=a.r+(b.r-a.r)*h;this.g=a.g+(b.g-a.g)*h;this.b=a.b+(b.b-a.b)*h;return this}lerpHSL(a,b){this.getHSL(yd);a.getHSL(Wg);a=f(yd.h,Wg.h,b);const h=f(yd.s,Wg.s,b);b=f(yd.l,Wg.l,b);this.setHSL(a,h,b);return this}equals(a){return a.r===this.r&&a.g===this.g&&a.b===this.b}fromArray(a,b=0){this.r=a[b];this.g=a[b+1];this.b=a[b+2];return this}toArray(a=[],b=0){a[b]=this.r;a[b+1]=this.g;a[b+2]=this.b;return a}fromBufferAttribute(a,
b){this.r=a.getX(b);this.g=a.getY(b);this.b=a.getZ(b);return this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r;yield this.g;yield this.b}}const ld=new wb;wb.NAMES=oj;class Ie extends kd{constructor(a){super();this.isMeshBasicMaterial=!0;this.type="MeshBasicMaterial";this.color=new wb(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=
.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.fog=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=
a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.fog=a.fog;return this}}const Sc=new ka,Xg=new La;class Bc{constructor(a,b,h=!1){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0;this.name="";this.array=a;this.itemSize=b;this.count=void 0!==a?a.length/b:0;this.normalized=h;this.usage=35044;this.updateRange={offset:0,count:-1};this.version=
0}onUploadCallback(){}set needsUpdate(a){!0===a&&this.version++}setUsage(a){this.usage=a;return this}copy(a){this.name=a.name;this.array=new a.array.constructor(a.array);this.itemSize=a.itemSize;this.count=a.count;this.normalized=a.normalized;this.usage=a.usage;return this}copyAt(a,b,h){a*=this.itemSize;h*=b.itemSize;for(let n=0,t=this.itemSize;n<t;n++)this.array[a+n]=b.array[h+n];return this}copyArray(a){this.array.set(a);return this}applyMatrix3(a){if(2===this.itemSize)for(let b=0,h=this.count;b<
h;b++)Xg.fromBufferAttribute(this,b),Xg.applyMatrix3(a),this.setXY(b,Xg.x,Xg.y);else if(3===this.itemSize)for(let b=0,h=this.count;b<h;b++)Sc.fromBufferAttribute(this,b),Sc.applyMatrix3(a),this.setXYZ(b,Sc.x,Sc.y,Sc.z);return this}applyMatrix4(a){for(let b=0,h=this.count;b<h;b++)Sc.fromBufferAttribute(this,b),Sc.applyMatrix4(a),this.setXYZ(b,Sc.x,Sc.y,Sc.z);return this}applyNormalMatrix(a){for(let b=0,h=this.count;b<h;b++)Sc.fromBufferAttribute(this,b),Sc.applyNormalMatrix(a),this.setXYZ(b,Sc.x,Sc.y,
Sc.z);return this}transformDirection(a){for(let b=0,h=this.count;b<h;b++)Sc.fromBufferAttribute(this,b),Sc.transformDirection(a),this.setXYZ(b,Sc.x,Sc.y,Sc.z);return this}set(a,b=0){this.array.set(a,b);return this}getX(a){a=this.array[a*this.itemSize];this.normalized&&(a=l(a,this.array));return a}setX(a,b){this.normalized&&(b=r(b,this.array));this.array[a*this.itemSize]=b;return this}getY(a){a=this.array[a*this.itemSize+1];this.normalized&&(a=l(a,this.array));return a}setY(a,b){this.normalized&&(b=
r(b,this.array));this.array[a*this.itemSize+1]=b;return this}getZ(a){a=this.array[a*this.itemSize+2];this.normalized&&(a=l(a,this.array));return a}setZ(a,b){this.normalized&&(b=r(b,this.array));this.array[a*this.itemSize+2]=b;return this}getW(a){a=this.array[a*this.itemSize+3];this.normalized&&(a=l(a,this.array));return a}setW(a,b){this.normalized&&(b=r(b,this.array));this.array[a*this.itemSize+3]=b;return this}setXY(a,b,h){a*=this.itemSize;this.normalized&&(b=r(b,this.array),h=r(h,this.array));this.array[a+
0]=b;this.array[a+1]=h;return this}setXYZ(a,b,h,n){a*=this.itemSize;this.normalized&&(b=r(b,this.array),h=r(h,this.array),n=r(n,this.array));this.array[a+0]=b;this.array[a+1]=h;this.array[a+2]=n;return this}setXYZW(a,b,h,n,t){a*=this.itemSize;this.normalized&&(b=r(b,this.array),h=r(h,this.array),n=r(n,this.array),t=r(t,this.array));this.array[a+0]=b;this.array[a+1]=h;this.array[a+2]=n;this.array[a+3]=t;return this}onUpload(a){this.onUploadCallback=a;return this}clone(){return(new this.constructor(this.array,
this.itemSize)).copy(this)}toJSON(){const a={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};""!==this.name&&(a.name=this.name);35044!==this.usage&&(a.usage=this.usage);if(0!==this.updateRange.offset||-1!==this.updateRange.count)a.updateRange=this.updateRange;return a}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}
class ml extends Bc{constructor(a,b,h){super(new Int8Array(a),b,h)}}class nl extends Bc{constructor(a,b,h){super(new Uint8Array(a),b,h)}}class ol extends Bc{constructor(a,b,h){super(new Uint8ClampedArray(a),b,h)}}class pl extends Bc{constructor(a,b,h){super(new Int16Array(a),b,h)}}class Lh extends Bc{constructor(a,b,h){super(new Uint16Array(a),b,h)}}class ql extends Bc{constructor(a,b,h){super(new Int32Array(a),b,h)}}class Kh extends Bc{constructor(a,b,h){super(new Uint32Array(a),b,h)}}class rl extends Bc{constructor(a,
b,h){super(new Uint16Array(a),b,h);this.isFloat16BufferAttribute=!0}}class Cb extends Bc{constructor(a,b,h){super(new Float32Array(a),b,h)}}class sl extends Bc{constructor(a,b,h){super(new Float64Array(a),b,h)}}let tl=0;const Pd=new $b,hi=new wc,Cf=new ka,Hd=new Ye,gg=new Ye,ad=new ka;class gc extends Od{constructor(){super();this.isBufferGeometry=!0;Object.defineProperty(this,"id",{value:tl++});this.uuid=q();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes=
{};this.morphTargetsRelative=!1;this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity};this.userData={}}getIndex(){return this.index}setIndex(a){Array.isArray(a)?this.index=new (v(a)?Kh:Lh)(a,1):this.index=a;return this}getAttribute(a){return this.attributes[a]}setAttribute(a,b){this.attributes[a]=b;return this}deleteAttribute(a){delete this.attributes[a];return this}hasAttribute(a){return void 0!==this.attributes[a]}addGroup(a,b,h=0){this.groups.push({start:a,
count:b,materialIndex:h})}clearGroups(){this.groups=[]}setDrawRange(a,b){this.drawRange.start=a;this.drawRange.count=b}applyMatrix4(a){var b=this.attributes.position;void 0!==b&&(b.applyMatrix4(a),b.needsUpdate=!0);b=this.attributes.normal;if(void 0!==b){const h=(new xb).getNormalMatrix(a);b.applyNormalMatrix(h);b.needsUpdate=!0}b=this.attributes.tangent;void 0!==b&&(b.transformDirection(a),b.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();
return this}applyQuaternion(a){Pd.makeRotationFromQuaternion(a);this.applyMatrix4(Pd);return this}rotateX(a){Pd.makeRotationX(a);this.applyMatrix4(Pd);return this}rotateY(a){Pd.makeRotationY(a);this.applyMatrix4(Pd);return this}rotateZ(a){Pd.makeRotationZ(a);this.applyMatrix4(Pd);return this}translate(a,b,h){Pd.makeTranslation(a,b,h);this.applyMatrix4(Pd);return this}scale(a,b,h){Pd.makeScale(a,b,h);this.applyMatrix4(Pd);return this}lookAt(a){hi.lookAt(a);hi.updateMatrix();this.applyMatrix4(hi.matrix);
return this}center(){this.computeBoundingBox();this.boundingBox.getCenter(Cf).negate();this.translate(Cf.x,Cf.y,Cf.z);return this}setFromPoints(a){const b=[];for(let h=0,n=a.length;h<n;h++){const t=a[h];b.push(t.x,t.y,t.z||0)}this.setAttribute("position",new Cb(b,3));return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ye);const a=this.attributes.position,b=this.morphAttributes.position;if(a&&a.isGLBufferAttribute)console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',
this),this.boundingBox.set(new ka(-Infinity,-Infinity,-Infinity),new ka(Infinity,Infinity,Infinity));else{if(void 0!==a){if(this.boundingBox.setFromBufferAttribute(a),b)for(let h=0,n=b.length;h<n;h++)Hd.setFromBufferAttribute(b[h]),this.morphTargetsRelative?(ad.addVectors(this.boundingBox.min,Hd.min),this.boundingBox.expandByPoint(ad),ad.addVectors(this.boundingBox.max,Hd.max),this.boundingBox.expandByPoint(ad)):(this.boundingBox.expandByPoint(Hd.min),this.boundingBox.expandByPoint(Hd.max))}else this.boundingBox.makeEmpty();
(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new af);const a=this.attributes.position,b=this.morphAttributes.position;if(a&&a.isGLBufferAttribute)console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',
this),this.boundingSphere.set(new ka,Infinity);else if(a){const h=this.boundingSphere.center;Hd.setFromBufferAttribute(a);if(b)for(let t=0,C=b.length;t<C;t++)gg.setFromBufferAttribute(b[t]),this.morphTargetsRelative?(ad.addVectors(Hd.min,gg.min),Hd.expandByPoint(ad),ad.addVectors(Hd.max,gg.max),Hd.expandByPoint(ad)):(Hd.expandByPoint(gg.min),Hd.expandByPoint(gg.max));Hd.getCenter(h);let n=0;for(let t=0,C=a.count;t<C;t++)ad.fromBufferAttribute(a,t),n=Math.max(n,h.distanceToSquared(ad));if(b)for(let t=
0,C=b.length;t<C;t++){const G=b[t],I=this.morphTargetsRelative;for(let K=0,M=G.count;K<M;K++)ad.fromBufferAttribute(G,K),I&&(Cf.fromBufferAttribute(a,K),ad.add(Cf)),n=Math.max(n,h.distanceToSquared(ad))}this.boundingSphere.radius=Math.sqrt(n);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){function a(Ha,Ka,Ia){U.fromArray(t,3*Ha);V.fromArray(t,3*
Ka);ba.fromArray(t,3*Ia);aa.fromArray(G,2*Ha);S.fromArray(G,2*Ka);ea.fromArray(G,2*Ia);V.sub(U);ba.sub(U);S.sub(aa);ea.sub(aa);const gb=1/(S.x*ea.y-ea.x*S.y);isFinite(gb)&&(va.copy(V).multiplyScalar(ea.y).addScaledVector(ba,-S.y).multiplyScalar(gb),ma.copy(ba).multiplyScalar(S.x).addScaledVector(V,-ea.x).multiplyScalar(gb),K[Ha].add(va),K[Ka].add(va),K[Ia].add(va),M[Ha].add(ma),M[Ka].add(ma),M[Ia].add(ma))}function b(Ha){Qa.fromArray(C,3*Ha);ya.copy(Qa);var Ka=K[Ha];Ea.copy(Ka);Ea.sub(Qa.multiplyScalar(Qa.dot(Ka))).normalize();
ua.crossVectors(ya,Ka);Ka=ua.dot(M[Ha]);I[4*Ha]=Ea.x;I[4*Ha+1]=Ea.y;I[4*Ha+2]=Ea.z;I[4*Ha+3]=0>Ka?-1:1}var h=this.index,n=this.attributes;if(null===h||void 0===n.position||void 0===n.normal||void 0===n.uv)console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");else{h=h.array;var t=n.position.array,C=n.normal.array,G=n.uv.array;n=t.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Bc(new Float32Array(4*
n),4));var I=this.getAttribute("tangent").array,K=[],M=[];for(var T=0;T<n;T++)K[T]=new ka,M[T]=new ka;var U=new ka,V=new ka,ba=new ka,aa=new La,S=new La,ea=new La,va=new ka,ma=new ka;n=this.groups;0===n.length&&(n=[{start:0,count:h.length}]);for(let Ha=0,Ka=n.length;Ha<Ka;++Ha){var wa=n[Ha];T=wa.start;wa=wa.count;for(let Ia=T,gb=T+wa;Ia<gb;Ia+=3)a(h[Ia+0],h[Ia+1],h[Ia+2])}var Ea=new ka,ua=new ka,Qa=new ka,ya=new ka;for(let Ha=0,Ka=n.length;Ha<Ka;++Ha){wa=n[Ha];T=wa.start;wa=wa.count;for(let Ia=T,
gb=T+wa;Ia<gb;Ia+=3)b(h[Ia+0]),b(h[Ia+1]),b(h[Ia+2])}}}computeVertexNormals(){const a=this.index,b=this.getAttribute("position");if(void 0!==b){let h=this.getAttribute("normal");if(void 0===h)h=new Bc(new Float32Array(3*b.count),3),this.setAttribute("normal",h);else for(let U=0,V=h.count;U<V;U++)h.setXYZ(U,0,0,0);const n=new ka,t=new ka,C=new ka,G=new ka,I=new ka,K=new ka,M=new ka,T=new ka;if(a)for(let U=0,V=a.count;U<V;U+=3){const ba=a.getX(U+0),aa=a.getX(U+1),S=a.getX(U+2);n.fromBufferAttribute(b,
ba);t.fromBufferAttribute(b,aa);C.fromBufferAttribute(b,S);M.subVectors(C,t);T.subVectors(n,t);M.cross(T);G.fromBufferAttribute(h,ba);I.fromBufferAttribute(h,aa);K.fromBufferAttribute(h,S);G.add(M);I.add(M);K.add(M);h.setXYZ(ba,G.x,G.y,G.z);h.setXYZ(aa,I.x,I.y,I.z);h.setXYZ(S,K.x,K.y,K.z)}else for(let U=0,V=b.count;U<V;U+=3)n.fromBufferAttribute(b,U+0),t.fromBufferAttribute(b,U+1),C.fromBufferAttribute(b,U+2),M.subVectors(C,t),T.subVectors(n,t),M.cross(T),h.setXYZ(U+0,M.x,M.y,M.z),h.setXYZ(U+1,M.x,
M.y,M.z),h.setXYZ(U+2,M.x,M.y,M.z);this.normalizeNormals();h.needsUpdate=!0}}merge(){console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead.");return this}normalizeNormals(){const a=this.attributes.normal;for(let b=0,h=a.count;b<h;b++)ad.fromBufferAttribute(a,b),ad.normalize(),a.setXYZ(b,ad.x,ad.y,ad.z)}toNonIndexed(){function a(I,K){const M=I.array,T=I.itemSize,U=I.normalized,V=new M.constructor(K.length*T);let ba,aa=0;for(let S=
0,ea=K.length;S<ea;S++){ba=I.isInterleavedBufferAttribute?K[S]*I.data.stride+I.offset:K[S]*T;for(let va=0;va<T;va++)V[aa++]=M[ba++]}return new Bc(V,T,U)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const b=new gc;var h=this.index.array,n=this.attributes;for(var t in n){var C=a(n[t],h);b.setAttribute(t,C)}n=this.morphAttributes;for(var G in n){t=[];C=n[G];for(let I=0,K=C.length;I<K;I++){const M=a(C[I],h);t.push(M)}b.morphAttributes[G]=
t}b.morphTargetsRelative=this.morphTargetsRelative;h=this.groups;for(let I=0,K=h.length;I<K;I++)G=h[I],b.addGroup(G.start,G.count,G.materialIndex);return b}toJSON(){const a={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};a.uuid=this.uuid;a.type=this.type;""!==this.name&&(a.name=this.name);0<Object.keys(this.userData).length&&(a.userData=this.userData);if(void 0!==this.parameters){var b=this.parameters;for(var h in b)void 0!==b[h]&&(a[h]=b[h]);return a}a.data={attributes:{}};
h=this.index;null!==h&&(a.data.index={type:h.array.constructor.name,array:Array.prototype.slice.call(h.array)});h=this.attributes;for(var n in h)a.data.attributes[n]=h[n].toJSON(a.data);n={};h=!1;for(b in this.morphAttributes){const t=this.morphAttributes[b],C=[];for(let G=0,I=t.length;G<I;G++)C.push(t[G].toJSON(a.data));0<C.length&&(n[b]=C,h=!0)}h&&(a.data.morphAttributes=n,a.data.morphTargetsRelative=this.morphTargetsRelative);b=this.groups;0<b.length&&(a.data.groups=JSON.parse(JSON.stringify(b)));
b=this.boundingSphere;null!==b&&(a.data.boundingSphere={center:b.center.toArray(),radius:b.radius});return a}clone(){return(new this.constructor).copy(this)}copy(a){this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;var b={};this.name=a.name;var h=a.index;null!==h&&this.setIndex(h.clone(b));h=a.attributes;for(var n in h)this.setAttribute(n,h[n].clone(b));n=a.morphAttributes;for(var t in n){h=[];const C=n[t];for(let G=0,I=C.length;G<
I;G++)h.push(C[G].clone(b));this.morphAttributes[t]=h}this.morphTargetsRelative=a.morphTargetsRelative;b=a.groups;for(let C=0,G=b.length;C<G;C++)t=b[C],this.addGroup(t.start,t.count,t.materialIndex);b=a.boundingBox;null!==b&&(this.boundingBox=b.clone());b=a.boundingSphere;null!==b&&(this.boundingSphere=b.clone());this.drawRange.start=a.drawRange.start;this.drawRange.count=a.drawRange.count;this.userData=a.userData;return this}dispose(){this.dispatchEvent({type:"dispose"})}}const pj=new $b,ge=new eg,
Yg=new af,qj=new ka,Qf=new ka,Rf=new ka,Sf=new ka,ii=new ka,Zg=new ka,wg=new La,xg=new La,yg=new La,Ih=new ka,vg=new ka;class dd extends wc{constructor(a=new gc,b=new Ie){super();this.isMesh=!0;this.type="Mesh";this.geometry=a;this.material=b;this.updateMorphTargets()}copy(a,b){super.copy(a,b);void 0!==a.morphTargetInfluences&&(this.morphTargetInfluences=a.morphTargetInfluences.slice());void 0!==a.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},a.morphTargetDictionary));this.material=
a.material;this.geometry=a.geometry;return this}updateMorphTargets(){var a=this.geometry.morphAttributes,b=Object.keys(a);if(0<b.length&&(a=a[b[0]],void 0!==a)){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(let h=0,n=a.length;h<n;h++)b=a[h].name||String(h),this.morphTargetInfluences.push(0),this.morphTargetDictionary[b]=h}}getVertexPosition(a,b){var h=this.geometry;const n=h.morphAttributes.position,t=h.morphTargetsRelative;b.fromBufferAttribute(h.attributes.position,a);h=this.morphTargetInfluences;
if(n&&h){Zg.set(0,0,0);for(let C=0,G=n.length;C<G;C++){const I=h[C];0!==I&&(ii.fromBufferAttribute(n[C],a),t?Zg.addScaledVector(ii,I):Zg.addScaledVector(ii.sub(b),I))}b.add(Zg)}this.isSkinnedMesh&&this.boneTransform(a,b);return b}raycast(a,b){var h=this.geometry;const n=this.material;var t=this.matrixWorld;if(void 0!==n&&(null===h.boundingSphere&&h.computeBoundingSphere(),Yg.copy(h.boundingSphere),Yg.applyMatrix4(t),ge.copy(a.ray).recast(a.near),!1!==Yg.containsPoint(ge.origin)||!(null===ge.intersectSphere(Yg,
qj)||ge.origin.distanceToSquared(qj)>(a.far-a.near)**2))&&(pj.copy(t).invert(),ge.copy(a.ray).applyMatrix4(pj),null===h.boundingBox||!1!==ge.intersectsBox(h.boundingBox))){var C=h.index,G=h.attributes.position;t=h.attributes.uv;var I=h.attributes.uv2,K=h.groups;h=h.drawRange;if(null!==C)if(Array.isArray(n))for(let V=0,ba=K.length;V<ba;V++){G=K[V];var M=n[G.materialIndex];var T=Math.max(G.start,h.start);var U=Math.min(C.count,Math.min(G.start+G.count,h.start+h.count));for(let aa=T,S=U;aa<S;aa+=3){T=
C.getX(aa);U=C.getX(aa+1);const ea=C.getX(aa+2);if(T=N(this,M,a,ge,t,I,T,U,ea))T.faceIndex=Math.floor(aa/3),T.face.materialIndex=G.materialIndex,b.push(T)}}else{K=Math.max(0,h.start);h=Math.min(C.count,h.start+h.count);for(let V=K,ba=h;V<ba;V+=3)if(h=C.getX(V),K=C.getX(V+1),G=C.getX(V+2),T=N(this,n,a,ge,t,I,h,K,G))T.faceIndex=Math.floor(V/3),b.push(T)}else if(void 0!==G)if(Array.isArray(n))for(let V=0,ba=K.length;V<ba;V++){C=K[V];M=n[C.materialIndex];T=Math.max(C.start,h.start);U=Math.min(G.count,
Math.min(C.start+C.count,h.start+h.count));for(let aa=T,S=U;aa<S;aa+=3)if(T=N(this,M,a,ge,t,I,aa,aa+1,aa+2))T.faceIndex=Math.floor(aa/3),T.face.materialIndex=C.materialIndex,b.push(T)}else{C=Math.max(0,h.start);h=Math.min(G.count,h.start+h.count);for(let V=C,ba=h;V<ba;V+=3)if(T=N(this,n,a,ge,t,I,V,V+1,V+2))T.faceIndex=Math.floor(V/3),b.push(T)}}}}class Qe extends gc{constructor(a=1,b=1,h=1,n=1,t=1,C=1){function G(aa,S,ea,va,ma,wa,Ea,ua,Qa,ya,Ha){const Ka=wa/Qa,Ia=Ea/ya,gb=wa/2,Za=Ea/2,db=ua/2;Ea=
Qa+1;const bb=ya+1;let rb=wa=0;const Bb=new ka;for(let Kb=0;Kb<bb;Kb++){const Tb=Kb*Ia-Za;for(let eb=0;eb<Ea;eb++)Bb[aa]=(eb*Ka-gb)*va,Bb[S]=Tb*ma,Bb[ea]=db,M.push(Bb.x,Bb.y,Bb.z),Bb[aa]=0,Bb[S]=0,Bb[ea]=0<ua?1:-1,T.push(Bb.x,Bb.y,Bb.z),U.push(eb/Qa),U.push(1-Kb/ya),wa+=1}for(aa=0;aa<ya;aa++)for(S=0;S<Qa;S++)ea=V+S+Ea*(aa+1),va=V+(S+1)+Ea*(aa+1),ma=V+(S+1)+Ea*aa,K.push(V+S+Ea*aa,ea,ma),K.push(ea,va,ma),rb+=6;I.addGroup(ba,rb,Ha);ba+=rb;V+=wa}super();this.type="BoxGeometry";this.parameters={width:a,
height:b,depth:h,widthSegments:n,heightSegments:t,depthSegments:C};const I=this;n=Math.floor(n);t=Math.floor(t);C=Math.floor(C);const K=[],M=[],T=[],U=[];let V=0,ba=0;G("z","y","x",-1,-1,h,b,a,C,t,0);G("z","y","x",1,-1,h,b,-a,C,t,1);G("x","z","y",1,1,a,h,b,n,C,2);G("x","z","y",1,-1,a,h,-b,n,C,3);G("x","y","z",1,-1,a,b,h,n,t,4);G("x","y","z",-1,-1,a,b,-h,n,t,5);this.setIndex(K);this.setAttribute("position",new Cb(M,3));this.setAttribute("normal",new Cb(T,3));this.setAttribute("uv",new Cb(U,2))}copy(a){super.copy(a);
this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new Qe(a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments)}}const bj={clone:R,merge:J};class de extends kd{constructor(a){super();this.isShaderMaterial=!0;this.type="ShaderMaterial";this.defines={};this.uniforms={};this.uniformsGroups=[];this.vertexShader="void main() {\n\tgl_Position \x3d projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor \x3d vec4( 1.0, 0.0, 0.0, 1.0 );\n}";
this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;this.uniformsNeedUpdate=!1;this.glslVersion=null;void 0!==a&&this.setValues(a)}copy(a){super.copy(a);this.fragmentShader=a.fragmentShader;this.vertexShader=a.vertexShader;this.uniforms=R(a.uniforms);var b=a.uniformsGroups;const h=
[];for(let n=0;n<b.length;n++)h.push(b[n].clone());this.uniformsGroups=h;this.defines=Object.assign({},a.defines);this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.fog=a.fog;this.lights=a.lights;this.clipping=a.clipping;this.extensions=Object.assign({},a.extensions);this.glslVersion=a.glslVersion;return this}toJSON(a){const b=super.toJSON(a);b.glslVersion=this.glslVersion;b.uniforms={};for(const h in this.uniforms){const n=this.uniforms[h].value;b.uniforms[h]=n&&n.isTexture?
{type:"t",value:n.toJSON(a).uuid}:n&&n.isColor?{type:"c",value:n.getHex()}:n&&n.isVector2?{type:"v2",value:n.toArray()}:n&&n.isVector3?{type:"v3",value:n.toArray()}:n&&n.isVector4?{type:"v4",value:n.toArray()}:n&&n.isMatrix3?{type:"m3",value:n.toArray()}:n&&n.isMatrix4?{type:"m4",value:n.toArray()}:{value:n}}0<Object.keys(this.defines).length&&(b.defines=this.defines);b.vertexShader=this.vertexShader;b.fragmentShader=this.fragmentShader;a={};for(const h in this.extensions)!0===this.extensions[h]&&
(a[h]=!0);0<Object.keys(a).length&&(b.extensions=a);return b}}class $g extends wc{constructor(){super();this.isCamera=!0;this.type="Camera";this.matrixWorldInverse=new $b;this.projectionMatrix=new $b;this.projectionMatrixInverse=new $b}copy(a,b){super.copy(a,b);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);this.projectionMatrixInverse.copy(a.projectionMatrixInverse);return this}getWorldDirection(a){this.updateWorldMatrix(!0,!1);const b=this.matrixWorld.elements;
return a.set(-b[8],-b[9],-b[10]).normalize()}updateMatrixWorld(a){super.updateMatrixWorld(a);this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(a,b){super.updateWorldMatrix(a,b);this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class gd extends $g{constructor(a=50,b=1,h=.1,n=2E3){super();this.isPerspectiveCamera=!0;this.type="PerspectiveCamera";this.fov=a;this.zoom=1;this.near=h;this.far=n;this.focus=10;this.aspect=b;this.view=
null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}copy(a,b){super.copy(a,b);this.fov=a.fov;this.zoom=a.zoom;this.near=a.near;this.far=a.far;this.focus=a.focus;this.aspect=a.aspect;this.view=null===a.view?null:Object.assign({},a.view);this.filmGauge=a.filmGauge;this.filmOffset=a.filmOffset;return this}setFocalLength(a){a=.5*this.getFilmHeight()/a;this.fov=2*Pa*Math.atan(a);this.updateProjectionMatrix()}getFocalLength(){const a=Math.tan(.5*Aa*this.fov);return.5*this.getFilmHeight()/
a}getEffectiveFOV(){return 2*Pa*Math.atan(Math.tan(.5*Aa*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(a,b,h,n,t,C){this.aspect=a/b;null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=h;this.view.offsetY=n;this.view.width=t;this.view.height=C;this.updateProjectionMatrix()}clearViewOffset(){null!==
this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()}updateProjectionMatrix(){const a=this.near;let b=a*Math.tan(.5*Aa*this.fov)/this.zoom,h=2*b,n=this.aspect*h,t=-.5*n;var C=this.view;if(null!==this.view&&this.view.enabled){const G=C.fullWidth,I=C.fullHeight;t+=C.offsetX*n/G;b-=C.offsetY*h/I;n*=C.width/G;h*=C.height/I}C=this.filmOffset;0!==C&&(t+=a*C/this.getFilmWidth());this.projectionMatrix.makePerspective(t,t+n,b,b-h,a,this.far);this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(a){a=
super.toJSON(a);a.object.fov=this.fov;a.object.zoom=this.zoom;a.object.near=this.near;a.object.far=this.far;a.object.focus=this.focus;a.object.aspect=this.aspect;null!==this.view&&(a.object.view=Object.assign({},this.view));a.object.filmGauge=this.filmGauge;a.object.filmOffset=this.filmOffset;return a}}class rj extends wc{constructor(a,b,h){super();this.type="CubeCamera";this.renderTarget=h;h=new gd(-90,1,a,b);h.layers=this.layers;h.up.set(0,1,0);h.lookAt(1,0,0);this.add(h);h=new gd(-90,1,a,b);h.layers=
this.layers;h.up.set(0,1,0);h.lookAt(-1,0,0);this.add(h);h=new gd(-90,1,a,b);h.layers=this.layers;h.up.set(0,0,-1);h.lookAt(0,1,0);this.add(h);h=new gd(-90,1,a,b);h.layers=this.layers;h.up.set(0,0,1);h.lookAt(0,-1,0);this.add(h);h=new gd(-90,1,a,b);h.layers=this.layers;h.up.set(0,1,0);h.lookAt(0,0,1);this.add(h);a=new gd(-90,1,a,b);a.layers=this.layers;a.up.set(0,1,0);a.lookAt(0,0,-1);this.add(a)}update(a,b){null===this.parent&&this.updateMatrixWorld();const h=this.renderTarget,[n,t,C,G,I,K]=this.children,
M=a.getRenderTarget(),T=a.toneMapping,U=a.xr.enabled;a.toneMapping=0;a.xr.enabled=!1;const V=h.texture.generateMipmaps;h.texture.generateMipmaps=!1;a.setRenderTarget(h,0);a.render(b,n);a.setRenderTarget(h,1);a.render(b,t);a.setRenderTarget(h,2);a.render(b,C);a.setRenderTarget(h,3);a.render(b,G);a.setRenderTarget(h,4);a.render(b,I);h.texture.generateMipmaps=V;a.setRenderTarget(h,5);a.render(b,K);a.setRenderTarget(M);a.toneMapping=T;a.xr.enabled=U;h.texture.needsPMREMUpdate=!0}}class hg extends Qc{constructor(a,
b,h,n,t,C,G,I,K,M){a=void 0!==a?a:[];super(a,void 0!==b?b:301,h,n,t,C,G,I,K,M);this.isCubeTexture=!0;this.flipY=!1}get images(){return this.image}set images(a){this.image=a}}class Ri extends Sd{constructor(a=1,b={}){super(a,a,b);this.isWebGLCubeRenderTarget=!0;a={width:a,height:a,depth:1};this.texture=new hg([a,a,a,a,a,a],b.mapping,b.wrapS,b.wrapT,b.magFilter,b.minFilter,b.format,b.type,b.anisotropy,b.encoding);this.texture.isRenderTargetTexture=!0;this.texture.generateMipmaps=void 0!==b.generateMipmaps?
b.generateMipmaps:!1;this.texture.minFilter=void 0!==b.minFilter?b.minFilter:1006}fromEquirectangularTexture(a,b){this.texture.type=b.type;this.texture.encoding=b.encoding;this.texture.generateMipmaps=b.generateMipmaps;this.texture.minFilter=b.minFilter;this.texture.magFilter=b.magFilter;var h=new Qe(5,5,5),n=new de({name:"CubemapFromEquirect",uniforms:R({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection \x3d transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include \x3cbegin_vertex\x3e\n\t\t\t\t\t#include \x3cproject_vertex\x3e\n\n\t\t\t\t}\n\t\t\t",
fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include \x3ccommon\x3e\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction \x3d normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV \x3d equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor \x3d texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",side:1,blending:0});n.uniforms.tEquirect.value=b;h=new dd(h,n);n=b.minFilter;1008===b.minFilter&&(b.minFilter=1006);(new rj(1,10,this)).update(a,
h);b.minFilter=n;h.geometry.dispose();h.material.dispose();return this}clear(a,b,h,n){const t=a.getRenderTarget();for(let C=0;6>C;C++)a.setRenderTarget(this,C),a.clear(b,h,n);a.setRenderTarget(t)}}const ji=new ka,ul=new ka,vl=new xb;class Ce{constructor(a=new ka(1,0,0),b=0){this.isPlane=!0;this.normal=a;this.constant=b}set(a,b){this.normal.copy(a);this.constant=b;return this}setComponents(a,b,h,n){this.normal.set(a,b,h);this.constant=n;return this}setFromNormalAndCoplanarPoint(a,b){this.normal.copy(a);
this.constant=-b.dot(this.normal);return this}setFromCoplanarPoints(a,b,h){b=ji.subVectors(h,b).cross(ul.subVectors(a,b)).normalize();this.setFromNormalAndCoplanarPoint(b,a);return this}copy(a){this.normal.copy(a.normal);this.constant=a.constant;return this}normalize(){const a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this}negate(){this.constant*=-1;this.normal.negate();return this}distanceToPoint(a){return this.normal.dot(a)+this.constant}distanceToSphere(a){return this.distanceToPoint(a.center)-
a.radius}projectPoint(a,b){return b.copy(a).addScaledVector(this.normal,-this.distanceToPoint(a))}intersectLine(a,b){const h=a.delta(ji);var n=this.normal.dot(h);if(0===n)return 0===this.distanceToPoint(a.start)?b.copy(a.start):null;n=-(a.start.dot(this.normal)+this.constant)/n;return 0>n||1<n?null:b.copy(a.start).addScaledVector(h,n)}intersectsLine(a){const b=this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b}intersectsBox(a){return a.intersectsPlane(this)}intersectsSphere(a){return a.intersectsPlane(this)}coplanarPoint(a){return a.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(a,
b){b=b||vl.getNormalMatrix(a);a=this.coplanarPoint(ji).applyMatrix4(a);b=this.normal.applyMatrix3(b).normalize();this.constant=-a.dot(b);return this}translate(a){this.constant-=a.dot(this.normal);return this}equals(a){return a.normal.equals(this.normal)&&a.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Df=new af,ah=new ka;class Dg{constructor(a=new Ce,b=new Ce,h=new Ce,n=new Ce,t=new Ce,C=new Ce){this.planes=[a,b,h,n,t,C]}set(a,b,h,n,t,C){const G=this.planes;G[0].copy(a);
G[1].copy(b);G[2].copy(h);G[3].copy(n);G[4].copy(t);G[5].copy(C);return this}copy(a){const b=this.planes;for(let h=0;6>h;h++)b[h].copy(a.planes[h]);return this}setFromProjectionMatrix(a){const b=this.planes;var h=a.elements;a=h[0];const n=h[1],t=h[2],C=h[3],G=h[4],I=h[5],K=h[6],M=h[7],T=h[8],U=h[9],V=h[10],ba=h[11],aa=h[12],S=h[13],ea=h[14];h=h[15];b[0].setComponents(C-a,M-G,ba-T,h-aa).normalize();b[1].setComponents(C+a,M+G,ba+T,h+aa).normalize();b[2].setComponents(C+n,M+I,ba+U,h+S).normalize();b[3].setComponents(C-
n,M-I,ba-U,h-S).normalize();b[4].setComponents(C-t,M-K,ba-V,h-ea).normalize();b[5].setComponents(C+t,M+K,ba+V,h+ea).normalize();return this}intersectsObject(a){const b=a.geometry;null===b.boundingSphere&&b.computeBoundingSphere();Df.copy(b.boundingSphere).applyMatrix4(a.matrixWorld);return this.intersectsSphere(Df)}intersectsSprite(a){Df.center.set(0,0,0);Df.radius=.7071067811865476;Df.applyMatrix4(a.matrixWorld);return this.intersectsSphere(Df)}intersectsSphere(a){const b=this.planes,h=a.center;
a=-a.radius;for(let n=0;6>n;n++)if(b[n].distanceToPoint(h)<a)return!1;return!0}intersectsBox(a){const b=this.planes;for(let h=0;6>h;h++){const n=b[h];ah.x=0<n.normal.x?a.max.x:a.min.x;ah.y=0<n.normal.y?a.max.y:a.min.y;ah.z=0<n.normal.z?a.max.z:a.min.z;if(0>n.distanceToPoint(ah))return!1}return!0}containsPoint(a){const b=this.planes;for(let h=0;6>h;h++)if(0>b[h].distanceToPoint(a))return!1;return!0}clone(){return(new this.constructor).copy(this)}}class Tf extends gc{constructor(a=1,b=1,h=1,n=1){super();
this.type="PlaneGeometry";this.parameters={width:a,height:b,widthSegments:h,heightSegments:n};var t=a/2,C=b/2;h=Math.floor(h);n=Math.floor(n);const G=h+1;var I=n+1,K=a/h,M=b/n;b=[];a=[];const T=[],U=[];for(let V=0;V<I;V++){const ba=V*M-C;for(let aa=0;aa<G;aa++)a.push(aa*K-t,-ba,0),T.push(0,0,1),U.push(aa/h),U.push(1-V/n)}for(t=0;t<n;t++)for(C=0;C<h;C++)I=C+G*(t+1),K=C+1+G*(t+1),M=C+1+G*t,b.push(C+G*t,I,M),b.push(I,K,M);this.setIndex(b);this.setAttribute("position",new Cb(a,3));this.setAttribute("normal",
new Cb(T,3));this.setAttribute("uv",new Cb(U,2))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new Tf(a.width,a.height,a.widthSegments,a.heightSegments)}}const cc={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *\x3d texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a \x3c alphaTest ) discard;\n#endif",
alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion \x3d ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *\x3d ambientOcclusion;\n\t#if defined( USE_ENVMAP ) \x26\x26 defined( STANDARD )\n\t\tfloat dotNV \x3d saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *\x3d computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",
aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed \x3d vec3( position );",beginnormal_vertex:"vec3 objectNormal \x3d vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent \x3d vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel \x3d exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel \x3d exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x \x3d clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 \x3d x * x;\n    float x5 \x3d clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 \x3d pow2( alpha );\n\tfloat gv \x3d dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl \x3d dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 \x3d pow2( alpha );\n\tfloat denom \x3d pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha \x3d pow2( roughness );\n\tvec3 halfDir \x3d normalize( lightDir + viewDir );\n\tfloat dotNL \x3d saturate( dot( normal, lightDir ) );\n\tfloat dotNV \x3d saturate( dot( normal, viewDir ) );\n\tfloat dotNH \x3d saturate( dot( normal, halfDir ) );\n\tfloat dotVH \x3d saturate( dot( viewDir, halfDir ) );\n\tvec3 F \x3d F_Schlick( f0, f90, dotVH );\n\tfloat V \x3d V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D \x3d D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha \x3d pow2( roughness );\n\t\tvec3 halfDir \x3d normalize( lightDir + viewDir );\n\t\tfloat dotNL \x3d saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV \x3d saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH \x3d saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH \x3d saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F \x3d mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V \x3d V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D \x3d D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE \x3d 64.0;\n\tconst float LUT_SCALE \x3d ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS \x3d 0.5 / LUT_SIZE;\n\tfloat dotNV \x3d saturate( dot( N, V ) );\n\tvec2 uv \x3d vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv \x3d uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l \x3d length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x \x3d dot( v1, v2 );\n\tfloat y \x3d abs( x );\n\tfloat a \x3d 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b \x3d 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v \x3d a / b;\n\tfloat theta_sintheta \x3d ( x \x3e 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 \x3d rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 \x3d rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal \x3d cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) \x3c 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 \x3d normalize( V - N * dot( V, N ) );\n\tT2 \x3d - cross( N, T1 );\n\tmat3 mat \x3d mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] \x3d mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] \x3d mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] \x3d mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] \x3d mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] \x3d normalize( coords[ 0 ] );\n\tcoords[ 1 ] \x3d normalize( coords[ 1 ] );\n\tcoords[ 2 ] \x3d normalize( coords[ 2 ] );\n\tcoords[ 3 ] \x3d normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor \x3d vec3( 0.0 );\n\tvectorFormFactor +\x3d LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor +\x3d LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor +\x3d LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor +\x3d LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result \x3d LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir \x3d normalize( lightDir + viewDir );\n\tfloat dotNH \x3d saturate( dot( normal, halfDir ) );\n\tfloat dotVH \x3d saturate( dot( viewDir, halfDir ) );\n\tvec3 F \x3d F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G \x3d G_BlinnPhong_Implicit( );\n\tfloat D \x3d D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha \x3d pow2( roughness );\n\tfloat invAlpha \x3d 1.0 / alpha;\n\tfloat cos2h \x3d dotNH * dotNH;\n\tfloat sin2h \x3d max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir \x3d normalize( lightDir + viewDir );\n\tfloat dotNL \x3d saturate( dot( normal, lightDir ) );\n\tfloat dotNV \x3d saturate( dot( normal, viewDir ) );\n\tfloat dotNH \x3d saturate( dot( normal, halfDir ) );\n\tfloat D \x3d D_Charlie( sheenRoughness, dotNH );\n\tfloat V \x3d V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",
iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 \x3d mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 \x3d sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase \x3d 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val \x3d vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos \x3d vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var \x3d vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz \x3d val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x +\x3d 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /\x3d 1.0685e-7;\n\t\tvec3 rgb \x3d XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR \x3d mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq \x3d pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq \x3d 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq \x3c 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 \x3d sqrt( cosTheta2Sq );\n\t\tfloat R0 \x3d IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 \x3d F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 \x3d R12;\n\t\tfloat T121 \x3d 1.0 - R12;\n\t\tfloat phi12 \x3d 0.0;\n\t\tif ( iridescenceIOR \x3c outsideIOR ) phi12 \x3d PI;\n\t\tfloat phi21 \x3d PI - phi12;\n\t\tvec3 baseIOR \x3d Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 \x3d IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 \x3d F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 \x3d vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] \x3c iridescenceIOR ) phi23[ 0 ] \x3d PI;\n\t\tif ( baseIOR[ 1 ] \x3c iridescenceIOR ) phi23[ 1 ] \x3d PI;\n\t\tif ( baseIOR[ 2 ] \x3c iridescenceIOR ) phi23[ 2 ] \x3d PI;\n\t\tfloat OPD \x3d 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi \x3d vec3( phi21 ) + phi23;\n\t\tvec3 R123 \x3d clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 \x3d sqrt( R123 );\n\t\tvec3 Rs \x3d pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 \x3d R12 + Rs;\n\t\tI \x3d C0;\n\t\tvec3 Cm \x3d Rs - T121;\n\t\tfor ( int m \x3d 1; m \x3c\x3d 2; ++ m ) {\n\t\t\tCm *\x3d r123;\n\t\t\tvec3 Sm \x3d 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI +\x3d Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",
bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx \x3d dFdx( vUv );\n\t\tvec2 dSTdy \x3d dFdy( vUv );\n\t\tfloat Hll \x3d bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx \x3d bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy \x3d bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX \x3d dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY \x3d dFdy( surf_pos.xyz );\n\t\tvec3 vN \x3d surf_norm;\n\t\tvec3 R1 \x3d cross( vSigmaY, vN );\n\t\tvec3 R2 \x3d cross( vN, vSigmaX );\n\t\tfloat fDet \x3d dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad \x3d sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",
clipping_planes_fragment:"#if NUM_CLIPPING_PLANES \x3e 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane \x3d clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) \x3e plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES \x3c NUM_CLIPPING_PLANES\n\t\tbool clipped \x3d true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i \x3d UNION_CLIPPING_PLANES; i \x3c NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane \x3d clippingPlanes[ i ];\n\t\t\tclipped \x3d ( dot( vClipPosition, plane.xyz ) \x3e plane.w ) \x26\x26 clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",
clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES \x3e 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES \x3e 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES \x3e 0\n\tvClipPosition \x3d - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *\x3d vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *\x3d vColor;\n#endif",
color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor \x3d vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor \x3d vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *\x3d color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *\x3d instanceColor.xyz;\n#endif",
common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 \x3d x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a \x3d 12.9898, b \x3d 78.233, c \x3d 43758.5453;\n\thighp float dt \x3d dot( uv.xy, vec2( a,b ) ), sn \x3d mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent \x3d max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] \x3d vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] \x3d vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] \x3d vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights \x3d vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] \x3d\x3d - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u \x3d atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v \x3d asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",
cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection \x3d abs( direction );\n\t\tfloat face \x3d - 1.0;\n\t\tif ( absDirection.x \x3e absDirection.z ) {\n\t\t\tif ( absDirection.x \x3e absDirection.y )\n\t\t\t\tface \x3d direction.x \x3e 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface \x3d direction.y \x3e 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z \x3e absDirection.y )\n\t\t\t\tface \x3d direction.z \x3e 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface \x3d direction.y \x3e 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face \x3d\x3d 0.0 ) {\n\t\t\tuv \x3d vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face \x3d\x3d 1.0 ) {\n\t\t\tuv \x3d vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face \x3d\x3d 2.0 ) {\n\t\t\tuv \x3d vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face \x3d\x3d 3.0 ) {\n\t\t\tuv \x3d vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face \x3d\x3d 4.0 ) {\n\t\t\tuv \x3d vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv \x3d vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face \x3d getFace( direction );\n\t\tfloat filterInt \x3d max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt \x3d max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize \x3d exp2( mipInt );\n\t\thighp vec2 uv \x3d getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face \x3e 2.0 ) {\n\t\t\tuv.y +\x3d faceSize;\n\t\t\tface -\x3d 3.0;\n\t\t}\n\t\tuv.x +\x3d face * faceSize;\n\t\tuv.x +\x3d filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y +\x3d 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *\x3d CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *\x3d CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip \x3d 0.0;\n\t\tif ( roughness \x3e\x3d cubeUV_r1 ) {\n\t\t\tmip \x3d ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness \x3e\x3d cubeUV_r4 ) {\n\t\t\tmip \x3d ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness \x3e\x3d cubeUV_r5 ) {\n\t\t\tmip \x3d ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness \x3e\x3d cubeUV_r6 ) {\n\t\t\tmip \x3d ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip \x3d - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip \x3d clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF \x3d fract( mip );\n\t\tfloat mipInt \x3d floor( mip );\n\t\tvec3 color0 \x3d bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF \x3d\x3d 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 \x3d bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",
defaultnormal_vertex:"vec3 transformedNormal \x3d objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m \x3d mat3( instanceMatrix );\n\ttransformedNormal /\x3d vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal \x3d m * transformedNormal;\n#endif\ntransformedNormal \x3d normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal \x3d - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent \x3d ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent \x3d - transformedTangent;\n\t#endif\n#endif",
displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed +\x3d normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor \x3d texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *\x3d emissiveColor.rgb;\n#endif",
emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor \x3d linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag \x3d normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag \x3d normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal \x3d inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec \x3d reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec \x3d refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec \x3d vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor \x3d textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor \x3d vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight \x3d mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight \x3d mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight +\x3d envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",
envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",
envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal \x3d inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor \x3d textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec \x3d reflect( - viewDir, normal );\n\t\t\treflectVec \x3d normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec \x3d inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor \x3d textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",
envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition \x3d worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex \x3d normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex \x3d normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal \x3d inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect \x3d reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect \x3d refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",
fog_vertex:"#ifdef USE_FOG\n\tvFogDepth \x3d - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor \x3d 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor \x3d smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb \x3d mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",
gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL \x3d dot( normal, lightDirection );\n\tvec2 coord \x3d vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw \x3d fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel \x3d texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance \x3d lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse +\x3d lightMapIrradiance;\n#endif",
lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor \x3d diffuseColor.rgb;\nmaterial.specularStrength \x3d specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL \x3d saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance \x3d dotNL * directLight.color;\n\treflectedLight.directDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",
lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x \x3d normal.x, y \x3d normal.y, z \x3d normal.z;\n\tvec3 result \x3d shCoefficients[ 0 ] * 0.886227;\n\tresult +\x3d shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult +\x3d shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult +\x3d shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult +\x3d shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult +\x3d shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult +\x3d shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult +\x3d shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult +\x3d shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal \x3d inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance \x3d shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance \x3d ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance \x3e 0.0 \x26\x26 decayExponent \x3e 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff \x3d 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance \x3e 0.0 ) {\n\t\t\tdistanceFalloff *\x3d pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS \x3e 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color \x3d directionalLight.color;\n\t\tlight.direction \x3d directionalLight.direction;\n\t\tlight.visible \x3d true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS \x3e 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector \x3d pointLight.position - geometry.position;\n\t\tlight.direction \x3d normalize( lVector );\n\t\tfloat lightDistance \x3d length( lVector );\n\t\tlight.color \x3d pointLight.color;\n\t\tlight.color *\x3d getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible \x3d ( light.color !\x3d vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS \x3e 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector \x3d spotLight.position - geometry.position;\n\t\tlight.direction \x3d normalize( lVector );\n\t\tfloat angleCos \x3d dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation \x3d getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation \x3e 0.0 ) {\n\t\t\tfloat lightDistance \x3d length( lVector );\n\t\t\tlight.color \x3d spotLight.color * spotAttenuation;\n\t\t\tlight.color *\x3d getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible \x3d ( light.color !\x3d vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color \x3d vec3( 0.0 );\n\t\t\tlight.visible \x3d false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS \x3e 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS \x3e 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL \x3d dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight \x3d 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance \x3d mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",
lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor \x3d diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance \x3d getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",
lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor \x3d diffuseColor.rgb;\nmaterial.specularColor \x3d specular;\nmaterial.specularShininess \x3d shininess;\nmaterial.specularStrength \x3d specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL \x3d saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance \x3d dotNL * directLight.color;\n\treflectedLight.directDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular +\x3d irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",
lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor \x3d diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy \x3d max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness \x3d max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness \x3d max( roughnessFactor, 0.0525 );material.roughness +\x3d geometryRoughness;\nmaterial.roughness \x3d min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior \x3d ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor \x3d specularIntensity;\n\t\tvec3 specularColorFactor \x3d specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *\x3d texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *\x3d texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 \x3d mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor \x3d 1.0;\n\t\tvec3 specularColorFactor \x3d vec3( 1.0 );\n\t\tmaterial.specularF90 \x3d 1.0;\n\t#endif\n\tmaterial.specularColor \x3d mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor \x3d mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 \x3d 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat \x3d clearcoat;\n\tmaterial.clearcoatRoughness \x3d clearcoatRoughness;\n\tmaterial.clearcoatF0 \x3d vec3( 0.04 );\n\tmaterial.clearcoatF90 \x3d 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *\x3d texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *\x3d texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat \x3d saturate( material.clearcoat );\tmaterial.clearcoatRoughness \x3d max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness +\x3d geometryRoughness;\n\tmaterial.clearcoatRoughness \x3d min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence \x3d iridescence;\n\tmaterial.iridescenceIOR \x3d iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *\x3d texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness \x3d (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness \x3d iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor \x3d sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *\x3d texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness \x3d clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *\x3d texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",
lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular \x3d vec3( 0.0 );\nvec3 sheenSpecular \x3d vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV \x3d saturate( dot( normal, viewDir ) );\n\tfloat r2 \x3d roughness * roughness;\n\tfloat a \x3d roughness \x3c 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b \x3d roughness \x3c 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG \x3d exp( a * dotNV + b ) + ( roughness \x3c 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV \x3d saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 \x3d vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 \x3d vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r \x3d roughness * c0 + c1;\n\tfloat a004 \x3d min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab \x3d vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab \x3d DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab \x3d DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr \x3d mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr \x3d specularColor;\n\t#endif\n\tvec3 FssEss \x3d Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess \x3d fab.x + fab.y;\n\tfloat Ems \x3d 1.0 - Ess;\n\tvec3 Favg \x3d Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms \x3d FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter +\x3d FssEss;\n\tmultiScatter +\x3d Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS \x3e 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal \x3d geometry.normal;\n\t\tvec3 viewDir \x3d geometry.viewDir;\n\t\tvec3 position \x3d geometry.position;\n\t\tvec3 lightPos \x3d rectAreaLight.position;\n\t\tvec3 halfWidth \x3d rectAreaLight.halfWidth;\n\t\tvec3 halfHeight \x3d rectAreaLight.halfHeight;\n\t\tvec3 lightColor \x3d rectAreaLight.color;\n\t\tfloat roughness \x3d material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] \x3d lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] \x3d lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] \x3d lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] \x3d lightPos + halfWidth + halfHeight;\n\t\tvec2 uv \x3d LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 \x3d texture2D( ltc_1, uv );\n\t\tvec4 t2 \x3d texture2D( ltc_2, uv );\n\t\tmat3 mInv \x3d mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel \x3d ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular +\x3d lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse +\x3d lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL \x3d saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance \x3d dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc \x3d saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance \x3d dotNLcc * directLight.color;\n\t\tclearcoatSpecular +\x3d ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular +\x3d irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular +\x3d irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular +\x3d irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular +\x3d clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular +\x3d irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering \x3d vec3( 0.0 );\n\tvec3 multiScattering \x3d vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance \x3d irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering \x3d singleScattering + multiScattering;\n\tvec3 diffuse \x3d material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular +\x3d radiance * singleScattering;\n\treflectedLight.indirectSpecular +\x3d multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse +\x3d diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",
lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position \x3d - vViewPosition;\ngeometry.normal \x3d normal;\ngeometry.viewDir \x3d ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal \x3d clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi \x3d saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness \x3d\x3d 0.0 ) {\n\t\tmaterial.iridescence \x3d 0.0;\n\t} else {\n\t\tmaterial.iridescence \x3d saturate( material.iridescence );\n\t}\n\tif ( material.iridescence \x3e 0.0 ) {\n\t\tmaterial.iridescenceFresnel \x3d evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 \x3d Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) \x26\x26 NUM_POINT_LIGHT_SHADOWS \x3e 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight \x3d pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) \x26\x26 ( UNROLLED_LOOP_INDEX \x3c NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow \x3d pointLightShadows[ i ];\n\t\tdirectLight.color *\x3d ( directLight.visible \x26\x26 receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) \x26\x26 NUM_SPOT_LIGHT_SHADOWS \x3e 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight \x3d spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX \x3c NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX \x3c NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX \x3c NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord \x3d vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap \x3d all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor \x3d texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color \x3d inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) \x26\x26 ( UNROLLED_LOOP_INDEX \x3c NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow \x3d spotLightShadows[ i ];\n\t\tdirectLight.color *\x3d ( directLight.visible \x26\x26 receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) \x26\x26 NUM_DIR_LIGHT_SHADOWS \x3e 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight \x3d directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) \x26\x26 ( UNROLLED_LOOP_INDEX \x3c NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow \x3d directionalLightShadows[ i ];\n\t\tdirectLight.color *\x3d ( directLight.visible \x26\x26 receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight \x3d rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance \x3d vec3( 0.0 );\n\tvec3 irradiance \x3d getAmbientLightIrradiance( ambientLightColor );\n\tirradiance +\x3d getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS \x3e 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i \x3d 0; i \x3c NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance +\x3d getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance \x3d vec3( 0.0 );\n\tvec3 clearcoatRadiance \x3d vec3( 0.0 );\n#endif",
lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel \x3d texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance \x3d lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance +\x3d lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) \x26\x26 defined( STANDARD ) \x26\x26 defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance +\x3d getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) \x26\x26 defined( RE_IndirectSpecular )\n\tradiance +\x3d getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance +\x3d getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",
lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) \x26\x26 defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT \x3d vIsPerspective \x3d\x3d 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",
logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) \x26\x26 defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth \x3d 1.0 + gl_Position.w;\n\t\tvIsPerspective \x3d float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z \x3d log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *\x3d gl_Position.w;\n\t\t}\n\t#endif\n#endif",
map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor \x3d texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor \x3d vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *\x3d sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",
map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv \x3d ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *\x3d texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *\x3d texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",
metalnessmap_fragment:"float metalnessFactor \x3d metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness \x3d texture2D( metalnessMap, vUv );\n\tmetalnessFactor *\x3d texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) \x26\x26 defined( MORPHTARGETS_TEXTURE )\n\tvColor *\x3d morphTargetBaseInfluence;\n\tfor ( int i \x3d 0; i \x3c MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] !\x3d 0.0 ) vColor +\x3d getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] !\x3d 0.0 ) vColor +\x3d getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",
morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *\x3d morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i \x3d 0; i \x3c MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] !\x3d 0.0 ) objectNormal +\x3d getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal +\x3d morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal +\x3d morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal +\x3d morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal +\x3d morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",
morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex \x3d vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y \x3d texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x \x3d texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV \x3d ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",
morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *\x3d morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i \x3d 0; i \x3c MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] !\x3d 0.0 ) transformed +\x3d getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed +\x3d morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed +\x3d morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed +\x3d morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed +\x3d morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed +\x3d morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed +\x3d morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed +\x3d morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed +\x3d morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",
normal_fragment_begin:"float faceDirection \x3d gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx \x3d dFdx( vViewPosition );\n\tvec3 fdy \x3d dFdy( vViewPosition );\n\tvec3 normal \x3d normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal \x3d normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal \x3d normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent \x3d normalize( vTangent );\n\t\tvec3 bitangent \x3d normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent \x3d tangent * faceDirection;\n\t\t\tbitangent \x3d bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN \x3d mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal \x3d normal;",
normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal \x3d texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal \x3d - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal \x3d normal * faceDirection;\n\t#endif\n\tnormal \x3d normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN \x3d texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *\x3d normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal \x3d normalize( vTBN * mapN );\n\t#else\n\t\tnormal \x3d perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal \x3d perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",
normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal \x3d normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent \x3d normalize( transformedTangent );\n\t\tvBitangent \x3d normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",
normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) \x26\x26 ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 \x3d dFdx( eye_pos.xyz );\n\t\tvec3 q1 \x3d dFdy( eye_pos.xyz );\n\t\tvec2 st0 \x3d dFdx( vUv.st );\n\t\tvec2 st1 \x3d dFdy( vUv.st );\n\t\tvec3 N \x3d surf_norm;\n\t\tvec3 q1perp \x3d cross( q1, N );\n\t\tvec3 q0perp \x3d cross( N, q0 );\n\t\tvec3 T \x3d q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B \x3d q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det \x3d max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale \x3d ( det \x3d\x3d 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",
clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal \x3d geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN \x3d texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *\x3d clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal \x3d normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal \x3d perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",
clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a \x3d 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *\x3d material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );",
packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale \x3d 256. / 255.;const float UnpackDownscale \x3d 255. / 256.;\nconst vec3 PackFactors \x3d vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors \x3d UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 \x3d 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r \x3d vec4( fract( v * PackFactors ), v );\n\tr.yzw -\x3d r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r \x3d vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",
premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *\x3d gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition \x3d vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition \x3d instanceMatrix * mvPosition;\n#endif\nmvPosition \x3d modelViewMatrix * mvPosition;\ngl_Position \x3d projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb \x3d dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position \x3d rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB \x3d vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB \x3d mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",
roughnessmap_fragment:"float roughnessFactor \x3d roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness \x3d texture2D( roughnessMap, vUv );\n\troughnessFactor *\x3d texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS \x3e 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS \x3e 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS \x3e 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS \x3e 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS \x3e 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion \x3d 1.0;\n\t\tvec2 distribution \x3d texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow \x3d step( compare , distribution.x );\n\t\tif (hard_shadow !\x3d 1.0 ) {\n\t\t\tfloat distance \x3d compare - distribution.x ;\n\t\t\tfloat variance \x3d max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability \x3d variance / (variance + distance * distance );\t\t\tsoftness_probability \x3d clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion \x3d clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow \x3d 1.0;\n\t\tshadowCoord.xyz /\x3d shadowCoord.w;\n\t\tshadowCoord.z +\x3d shadowBias;\n\t\tbool inFrustum \x3d shadowCoord.x \x3e\x3d 0.0 \x26\x26 shadowCoord.x \x3c\x3d 1.0 \x26\x26 shadowCoord.y \x3e\x3d 0.0 \x26\x26 shadowCoord.y \x3c\x3d 1.0;\n\t\tbool frustumTest \x3d inFrustum \x26\x26 shadowCoord.z \x3c\x3d 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize \x3d vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 \x3d - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 \x3d - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 \x3d + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 \x3d + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 \x3d dx0 / 2.0;\n\t\t\tfloat dy2 \x3d dy0 / 2.0;\n\t\t\tfloat dx3 \x3d dx1 / 2.0;\n\t\t\tfloat dy3 \x3d dy1 / 2.0;\n\t\t\tshadow \x3d (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize \x3d vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx \x3d texelSize.x;\n\t\t\tfloat dy \x3d texelSize.y;\n\t\t\tvec2 uv \x3d shadowCoord.xy;\n\t\t\tvec2 f \x3d fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -\x3d f * texelSize;\n\t\t\tshadow \x3d (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow \x3d VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow \x3d texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV \x3d abs( v );\n\t\tfloat scaleToCube \x3d 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *\x3d scaleToCube;\n\t\tv *\x3d scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar \x3d v.xy;\n\t\tfloat almostATexel \x3d 1.5 * texelSizeY;\n\t\tfloat almostOne \x3d 1.0 - almostATexel;\n\t\tif ( absV.z \x3e\x3d almostOne ) {\n\t\t\tif ( v.z \x3e 0.0 )\n\t\t\t\tplanar.x \x3d 4.0 - v.x;\n\t\t} else if ( absV.x \x3e\x3d almostOne ) {\n\t\t\tfloat signX \x3d sign( v.x );\n\t\t\tplanar.x \x3d v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y \x3e\x3d almostOne ) {\n\t\t\tfloat signY \x3d sign( v.y );\n\t\t\tplanar.x \x3d v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y \x3d v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize \x3d vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition \x3d shadowCoord.xyz;\n\t\tfloat dp \x3d ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp +\x3d shadowBias;\n\t\tvec3 bd3D \x3d normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset \x3d vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",
shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS \x3e 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS \x3e 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS \x3e 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS \x3e 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",
shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) \x26\x26 ( NUM_DIR_LIGHT_SHADOWS \x3e 0 || NUM_POINT_LIGHT_SHADOWS \x3e 0 ) ) || ( NUM_SPOT_LIGHT_COORDS \x3e 0 )\n\tvec3 shadowWorldNormal \x3d inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS \x3e 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition \x3d worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] \x3d directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS \x3e 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition \x3d worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] \x3d pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS \x3e 0\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition \x3d worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) \x26\x26 UNROLLED_LOOP_INDEX \x3c NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz +\x3d shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] \x3d spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",
shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow \x3d 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS \x3e 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight \x3d directionalLightShadows[ i ];\n\t\tshadow *\x3d receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS \x3e 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight \x3d spotLightShadows[ i ];\n\t\tshadow *\x3d receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS \x3e 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight \x3d pointLightShadows[ i ];\n\t\tshadow *\x3d receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",
skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX \x3d getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY \x3d getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ \x3d getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW \x3d getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j \x3d i * 4.0;\n\t\tfloat x \x3d mod( j, float( boneTextureSize ) );\n\t\tfloat y \x3d floor( j / float( boneTextureSize ) );\n\t\tfloat dx \x3d 1.0 / float( boneTextureSize );\n\t\tfloat dy \x3d 1.0 / float( boneTextureSize );\n\t\ty \x3d dy * ( y + 0.5 );\n\t\tvec4 v1 \x3d texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 \x3d texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 \x3d texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 \x3d texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone \x3d mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",
skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex \x3d bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned \x3d vec4( 0.0 );\n\tskinned +\x3d boneMatX * skinVertex * skinWeight.x;\n\tskinned +\x3d boneMatY * skinVertex * skinWeight.y;\n\tskinned +\x3d boneMatZ * skinVertex * skinWeight.z;\n\tskinned +\x3d boneMatW * skinVertex * skinWeight.w;\n\ttransformed \x3d ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix \x3d mat4( 0.0 );\n\tskinMatrix +\x3d skinWeight.x * boneMatX;\n\tskinMatrix +\x3d skinWeight.y * boneMatY;\n\tskinMatrix +\x3d skinWeight.z * boneMatZ;\n\tskinMatrix +\x3d skinWeight.w * boneMatW;\n\tskinMatrix \x3d bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal \x3d vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent \x3d vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",
specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular \x3d texture2D( specularMap, vUv );\n\tspecularStrength \x3d texelSpecular.r;\n#else\n\tspecularStrength \x3d 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb \x3d toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *\x3d toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *\x3d toneMappingExposure;\n\tcolor \x3d max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a \x3d v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b \x3d v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat \x3d mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat \x3d mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *\x3d toneMappingExposure / 0.6;\n\tcolor \x3d ACESInputMat * color;\n\tcolor \x3d RRTAndODTFit( color );\n\tcolor \x3d ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",
transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission \x3d transmission;\n\tmaterial.transmissionAlpha \x3d 1.0;\n\tmaterial.thickness \x3d thickness;\n\tmaterial.attenuationDistance \x3d attenuationDistance;\n\tmaterial.attenuationColor \x3d attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *\x3d texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *\x3d texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos \x3d vWorldPosition;\n\tvec3 v \x3d normalize( cameraPosition - pos );\n\tvec3 n \x3d inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission \x3d getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha \x3d mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse \x3d mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",
transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {\n\t\tuv \x3d uv * texelSize.zw + 0.5;\n\t\tvec2 iuv \x3d floor( uv );\n\t\tvec2 fuv \x3d fract( uv );\n\t\tfloat g0x \x3d g0( fuv.x );\n\t\tfloat g1x \x3d g1( fuv.x );\n\t\tfloat h0x \x3d h0( fuv.x );\n\t\tfloat h1x \x3d h1( fuv.x );\n\t\tfloat h0y \x3d h0( fuv.y );\n\t\tfloat h1y \x3d h1( fuv.y );\n\t\tvec2 p0 \x3d ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 \x3d ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 \x3d ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 \x3d ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\t\n\t\tvec2 lodFudge \x3d pow( 1.95, lod ) / fullSize;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize \x3d vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize \x3d vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv \x3d 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv \x3d 1.0 / cLodSize;\n\t\tvec2 fullSize \x3d vec2( textureSize( sampler, 0 ) );\n\t\tvec4 fSample \x3d bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );\n\t\tvec4 cSample \x3d bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector \x3d refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x \x3d length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y \x3d length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z \x3d length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod \x3d log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient \x3d -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance \x3d exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay \x3d getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit \x3d position + transmissionRay;\n\t\tvec4 ndcPos \x3d projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords \x3d ndcPos.xy / ndcPos.w;\n\t\trefractionCoords +\x3d 1.0;\n\t\trefractionCoords /\x3d 2.0;\n\t\tvec4 transmittedLight \x3d getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor \x3d applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F \x3d EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",
uv_pars_fragment:"#if ( defined( USE_UV ) \x26\x26 ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv \x3d ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",
uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 \x3d ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS \x3e 0\n\tvec4 worldPosition \x3d vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition \x3d instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition \x3d modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv \x3d ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position \x3d vec4( position.xy, 1.0, 1.0 );\n}",
background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor \x3d texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor \x3d vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *\x3d backgroundIntensity;\n\tgl_FragColor \x3d texColor;\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n}",
backgroundCube_vert:"varying vec3 vWorldDirection;\n#include \x3ccommon\x3e\nvoid main() {\n\tvWorldDirection \x3d transformDirection( position, modelMatrix );\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\tgl_Position.z \x3d gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include \x3ccube_uv_reflection_fragment\x3e\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor \x3d textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor \x3d textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor \x3d vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *\x3d backgroundIntensity;\n\tgl_FragColor \x3d texColor;\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n}",
cube_vert:"varying vec3 vWorldDirection;\n#include \x3ccommon\x3e\nvoid main() {\n\tvWorldDirection \x3d transformDirection( position, modelMatrix );\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\tgl_Position.z \x3d gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor \x3d textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor \x3d texColor;\n\tgl_FragColor.a *\x3d opacity;\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n}",
depth_vert:"#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include \x3cbeginnormal_vertex\x3e\n\t\t#include \x3cmorphnormal_vertex\x3e\n\t\t#include \x3cskinnormal_vertex\x3e\n\t#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvHighPrecisionZW \x3d gl_Position.zw;\n}",
depth_frag:"#if DEPTH_PACKING \x3d\x3d 3200\n\tuniform float opacity;\n#endif\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( 1.0 );\n\t#if DEPTH_PACKING \x3d\x3d 3200\n\t\tdiffuseColor.a \x3d opacity;\n\t#endif\n\t#include \x3cmap_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3clogdepthbuf_fragment\x3e\n\tfloat fragCoordZ \x3d 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING \x3d\x3d 3200\n\t\tgl_FragColor \x3d vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING \x3d\x3d 3201\n\t\tgl_FragColor \x3d packDepthToRGBA( fragCoordZ );\n\t#endif\n}",
distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include \x3cbeginnormal_vertex\x3e\n\t\t#include \x3cmorphnormal_vertex\x3e\n\t\t#include \x3cskinnormal_vertex\x3e\n\t#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvWorldPosition \x3d worldPosition.xyz;\n}",
distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main () {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( 1.0 );\n\t#include \x3cmap_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\tfloat dist \x3d length( vWorldPosition - referencePosition );\n\tdist \x3d ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist \x3d saturate( dist );\n\tgl_FragColor \x3d packDepthToRGBA( dist );\n}",
equirect_vert:"varying vec3 vWorldDirection;\n#include \x3ccommon\x3e\nvoid main() {\n\tvWorldDirection \x3d transformDirection( position, modelMatrix );\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include \x3ccommon\x3e\nvoid main() {\n\tvec3 direction \x3d normalize( vWorldDirection );\n\tvec2 sampleUV \x3d equirectUv( direction );\n\tgl_FragColor \x3d texture2D( tEquirect, sampleUV );\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n}",
linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\tvLineDistance \x3d scale * lineDistance;\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cmorphcolor_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tif ( mod( vLineDistance, totalSize ) \x3e dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight \x3d vec3( 0.0 );\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\toutgoingLight \x3d diffuseColor.rgb;\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n}",
meshbasic_vert:"#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cenvmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cmorphcolor_vertex\x3e\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include \x3cbeginnormal_vertex\x3e\n\t\t#include \x3cmorphnormal_vertex\x3e\n\t\t#include \x3cskinbase_vertex\x3e\n\t\t#include \x3cskinnormal_vertex\x3e\n\t\t#include \x3cdefaultnormal_vertex\x3e\n\t#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cenvmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include \x3ccommon\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cenvmap_common_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel \x3d texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse +\x3d lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse +\x3d vec3( 1.0 );\n\t#endif\n\t#include \x3caomap_fragment\x3e\n\treflectedLight.indirectDiffuse *\x3d diffuseColor.rgb;\n\tvec3 outgoingLight \x3d reflectedLight.indirectDiffuse;\n\t#include \x3cenvmap_fragment\x3e\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cenvmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cnormal_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cmorphcolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cenvmap_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cenvmap_common_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3cnormal_pars_fragment\x3e\n#include \x3clights_lambert_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\t#include \x3clights_lambert_fragment\x3e\n\t#include \x3clights_fragment_begin\x3e\n\t#include \x3clights_fragment_maps\x3e\n\t#include \x3clights_fragment_end\x3e\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include \x3cenvmap_fragment\x3e\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cnormal_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cmorphcolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n}",
meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include \x3ccommon\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cnormal_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\tvec3 viewDir \x3d normalize( vViewPosition );\n\tvec3 x \x3d normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y \x3d cross( viewDir, x );\n\tvec2 uv \x3d vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor \x3d texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor \x3d vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight \x3d diffuseColor.rgb * matcapColor.rgb;\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cnormal_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition \x3d - mvPosition.xyz;\n#endif\n}",
meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include \x3cpacking\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cnormal_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\tgl_FragColor \x3d vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a \x3d 1.0;\n\t#endif\n}",
meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cenvmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cnormal_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cmorphcolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cenvmap_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cenvmap_common_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3cnormal_pars_fragment\x3e\n#include \x3clights_phong_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\t#include \x3clights_phong_fragment\x3e\n\t#include \x3clights_fragment_begin\x3e\n\t#include \x3clights_fragment_maps\x3e\n\t#include \x3clights_fragment_end\x3e\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include \x3cenvmap_fragment\x3e\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cnormal_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cmorphcolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n#ifdef USE_TRANSMISSION\n\tvWorldPosition \x3d worldPosition.xyz;\n#endif\n}",
meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3ciridescence_fragment\x3e\n#include \x3ccube_uv_reflection_fragment\x3e\n#include \x3cenvmap_common_pars_fragment\x3e\n#include \x3cenvmap_physical_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3cnormal_pars_fragment\x3e\n#include \x3clights_physical_pars_fragment\x3e\n#include \x3ctransmission_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3cclearcoat_pars_fragment\x3e\n#include \x3ciridescence_pars_fragment\x3e\n#include \x3croughnessmap_pars_fragment\x3e\n#include \x3cmetalnessmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3croughnessmap_fragment\x3e\n\t#include \x3cmetalnessmap_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\t#include \x3cclearcoat_normal_fragment_begin\x3e\n\t#include \x3cclearcoat_normal_fragment_maps\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\t#include \x3clights_physical_fragment\x3e\n\t#include \x3clights_fragment_begin\x3e\n\t#include \x3clights_fragment_maps\x3e\n\t#include \x3clights_fragment_end\x3e\n\t#include \x3caomap_fragment\x3e\n\tvec3 totalDiffuse \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular \x3d reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include \x3ctransmission_fragment\x3e\n\tvec3 outgoingLight \x3d totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp \x3d 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight \x3d outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc \x3d saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc \x3d F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight \x3d outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cnormal_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cmorphcolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cgradientmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3cnormal_pars_fragment\x3e\n#include \x3clights_toon_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\t#include \x3clights_toon_fragment\x3e\n\t#include \x3clights_fragment_begin\x3e\n\t#include \x3clights_fragment_maps\x3e\n\t#include \x3clights_fragment_end\x3e\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
points_vert:"uniform float size;\nuniform float scale;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cmorphcolor_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\tgl_PointSize \x3d size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective \x3d isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *\x3d ( scale / - mvPosition.z );\n\t#endif\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cmap_particle_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec3 outgoingLight \x3d vec3( 0.0 );\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_particle_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\toutgoingLight \x3d diffuseColor.rgb;\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n}",
shadow_vert:"#include \x3ccommon\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\nvoid main() {\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cshadowmask_pars_fragment\x3e\nvoid main() {\n\t#include \x3clogdepthbuf_fragment\x3e\n\tgl_FragColor \x3d vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}",
sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\tvec4 mvPosition \x3d modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x \x3d length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y \x3d length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective \x3d isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *\x3d - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition \x3d ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x \x3d cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y \x3d sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy +\x3d rotatedPosition;\n\tgl_Position \x3d projectionMatrix * mvPosition;\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec3 outgoingLight \x3d vec3( 0.0 );\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\toutgoingLight \x3d diffuseColor.rgb;\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}"},
pb={common:{diffuse:{value:new wb(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new xb},uv2Transform:{value:new xb},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},
bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new La(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5E-4},fogNear:{value:1},fogFar:{value:2E3},fogColor:{value:new wb(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],
properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},
pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new wb(16777215)},
opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new xb}},sprite:{diffuse:{value:new wb(16777215)},opacity:{value:1},center:{value:new La(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new xb}}},Rd={basic:{uniforms:J([pb.common,pb.specularmap,pb.envmap,pb.aomap,pb.lightmap,pb.fog]),vertexShader:cc.meshbasic_vert,fragmentShader:cc.meshbasic_frag},lambert:{uniforms:J([pb.common,
pb.specularmap,pb.envmap,pb.aomap,pb.lightmap,pb.emissivemap,pb.bumpmap,pb.normalmap,pb.displacementmap,pb.fog,pb.lights,{emissive:{value:new wb(0)}}]),vertexShader:cc.meshlambert_vert,fragmentShader:cc.meshlambert_frag},phong:{uniforms:J([pb.common,pb.specularmap,pb.envmap,pb.aomap,pb.lightmap,pb.emissivemap,pb.bumpmap,pb.normalmap,pb.displacementmap,pb.fog,pb.lights,{emissive:{value:new wb(0)},specular:{value:new wb(1118481)},shininess:{value:30}}]),vertexShader:cc.meshphong_vert,fragmentShader:cc.meshphong_frag},
standard:{uniforms:J([pb.common,pb.envmap,pb.aomap,pb.lightmap,pb.emissivemap,pb.bumpmap,pb.normalmap,pb.displacementmap,pb.roughnessmap,pb.metalnessmap,pb.fog,pb.lights,{emissive:{value:new wb(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:cc.meshphysical_vert,fragmentShader:cc.meshphysical_frag},toon:{uniforms:J([pb.common,pb.aomap,pb.lightmap,pb.emissivemap,pb.bumpmap,pb.normalmap,pb.displacementmap,pb.gradientmap,pb.fog,pb.lights,{emissive:{value:new wb(0)}}]),
vertexShader:cc.meshtoon_vert,fragmentShader:cc.meshtoon_frag},matcap:{uniforms:J([pb.common,pb.bumpmap,pb.normalmap,pb.displacementmap,pb.fog,{matcap:{value:null}}]),vertexShader:cc.meshmatcap_vert,fragmentShader:cc.meshmatcap_frag},points:{uniforms:J([pb.points,pb.fog]),vertexShader:cc.points_vert,fragmentShader:cc.points_frag},dashed:{uniforms:J([pb.common,pb.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:cc.linedashed_vert,fragmentShader:cc.linedashed_frag},depth:{uniforms:J([pb.common,
pb.displacementmap]),vertexShader:cc.depth_vert,fragmentShader:cc.depth_frag},normal:{uniforms:J([pb.common,pb.bumpmap,pb.normalmap,pb.displacementmap,{opacity:{value:1}}]),vertexShader:cc.meshnormal_vert,fragmentShader:cc.meshnormal_frag},sprite:{uniforms:J([pb.sprite,pb.fog]),vertexShader:cc.sprite_vert,fragmentShader:cc.sprite_frag},background:{uniforms:{uvTransform:{value:new xb},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:cc.background_vert,fragmentShader:cc.background_frag},
backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:cc.backgroundCube_vert,fragmentShader:cc.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:cc.cube_vert,fragmentShader:cc.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:cc.equirect_vert,fragmentShader:cc.equirect_frag},distanceRGBA:{uniforms:J([pb.common,pb.displacementmap,{referencePosition:{value:new ka},
nearDistance:{value:1},farDistance:{value:1E3}}]),vertexShader:cc.distanceRGBA_vert,fragmentShader:cc.distanceRGBA_frag},shadow:{uniforms:J([pb.lights,pb.fog,{color:{value:new wb(0)},opacity:{value:1}}]),vertexShader:cc.shadow_vert,fragmentShader:cc.shadow_frag}};Rd.physical={uniforms:J([Rd.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new La(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},
iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new wb(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new La},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},
attenuationColor:{value:new wb(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new wb(1,1,1)},specularColorMap:{value:null}}]),vertexShader:cc.meshphysical_vert,fragmentShader:cc.meshphysical_frag};const zg={r:0,b:0,g:0};class bh extends $g{constructor(a=-1,b=1,h=1,n=-1,t=.1,C=2E3){super();this.isOrthographicCamera=!0;this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=a;this.right=b;this.top=h;this.bottom=n;this.near=t;this.far=C;this.updateProjectionMatrix()}copy(a,
b){super.copy(a,b);this.left=a.left;this.right=a.right;this.top=a.top;this.bottom=a.bottom;this.near=a.near;this.far=a.far;this.zoom=a.zoom;this.view=null===a.view?null:Object.assign({},a.view);return this}setViewOffset(a,b,h,n,t,C){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=h;this.view.offsetY=n;this.view.width=t;this.view.height=C;this.updateProjectionMatrix()}clearViewOffset(){null!==
this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()}updateProjectionMatrix(){var a=(this.right-this.left)/(2*this.zoom),b=(this.top-this.bottom)/(2*this.zoom),h=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let t=h-a;h+=a;a=n+b;b=n-b;null!==this.view&&this.view.enabled&&(n=(this.right-this.left)/this.view.fullWidth/this.zoom,b=(this.top-this.bottom)/this.view.fullHeight/this.zoom,t+=n*this.view.offsetX,h=t+n*this.view.width,a-=b*this.view.offsetY,b=a-b*this.view.height);this.projectionMatrix.makeOrthographic(t,
h,a,b,this.near,this.far);this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(a){a=super.toJSON(a);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=this.right;a.object.top=this.top;a.object.bottom=this.bottom;a.object.near=this.near;a.object.far=this.far;null!==this.view&&(a.object.view=Object.assign({},this.view));return a}}const sj=[.125,.215,.35,.446,.526,.582],ki=new bh,tj=new wb;let li=null;const bf=(1+Math.sqrt(5))/2,Ef=1/bf,uj=[new ka(1,1,1),new ka(-1,1,1),
new ka(1,1,-1),new ka(-1,1,-1),new ka(0,bf,Ef),new ka(0,bf,-Ef),new ka(Ef,0,bf),new ka(-Ef,0,bf),new ka(bf,Ef,0),new ka(-bf,Ef,0)];class Jh{constructor(a){this._renderer=a;this._pingPongRenderTarget=null;this._cubeSize=this._lodMax=0;this._lodPlanes=[];this._sizeLods=[];this._sigmas=[];this._equirectMaterial=this._cubemapMaterial=this._blurMaterial=null;this._compileMaterial(this._blurMaterial)}fromScene(a,b=0,h=.1,n=100){li=this._renderer.getRenderTarget();this._setSize(256);const t=this._allocateTargets();
t.depthBuffer=!0;this._sceneToCubeUV(a,h,n,t);0<b&&this._blur(t,0,0,b);this._applyPMREM(t);this._cleanup(t);return t}fromEquirectangular(a,b=null){return this._fromTexture(a,b)}fromCubemap(a,b=null){return this._fromTexture(a,b)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Ra(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=na(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose();
null!==this._cubemapMaterial&&this._cubemapMaterial.dispose();null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(a){this._lodMax=Math.floor(Math.log2(a));this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose();null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let a=0;a<this._lodPlanes.length;a++)this._lodPlanes[a].dispose()}_cleanup(a){this._renderer.setRenderTarget(li);a.scissorTest=!1;Ta(a,0,0,a.width,
a.height)}_fromTexture(a,b){301===a.mapping||302===a.mapping?this._setSize(0===a.image.length?16:a.image[0].width||a.image[0].image.width):this._setSize(a.image.width/4);li=this._renderer.getRenderTarget();b=b||this._allocateTargets();this._textureToCubeUV(a,b);this._applyPMREM(b);this._cleanup(b);return b}_allocateTargets(){const a=3*Math.max(this._cubeSize,112),b=4*this._cubeSize;var h={magFilter:1006,minFilter:1006,generateMipmaps:!1,type:1016,format:1023,encoding:3E3,depthBuffer:!1};const n=pa(a,
b,h);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==a||this._pingPongRenderTarget.height!==b){null!==this._pingPongRenderTarget&&this._dispose();this._pingPongRenderTarget=pa(a,b,h);var {_lodMax:t}=this;h=t;var C=[];const M=[],T=[];let U=h;const V=h-4+1+sj.length;for(let ba=0;ba<V;ba++){var G=Math.pow(2,U);M.push(G);var I=1/G;ba>h-4?I=sj[ba-h+4-1]:0===ba&&(I=0);T.push(I);I=1/(G-2);G=-I;I=1+I;var K=[G,G,I,G,I,I,G,G,I,I,G,I];G=new Float32Array(108);I=new Float32Array(72);const aa=
new Float32Array(36);for(let S=0;6>S;S++){const ea=S%3*2/3-1,va=2<S?0:-1;G.set([ea,va,0,ea+2/3,va,0,ea+2/3,va+1,0,ea,va,0,ea+2/3,va+1,0,ea,va+1,0],18*S);I.set(K,12*S);aa.set([S,S,S,S,S,S],6*S)}K=new gc;K.setAttribute("position",new Bc(G,3));K.setAttribute("uv",new Bc(I,2));K.setAttribute("faceIndex",new Bc(aa,1));C.push(K);4<U&&U--}({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}={lodPlanes:C,sizeLods:M,sigmas:T});h=t;t=new Float32Array(20);C=new ka(0,1,0);this._blurMaterial=
new de({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/a,CUBEUV_TEXEL_HEIGHT:1/b,CUBEUV_MAX_MIP:`${h}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:C}},vertexShader:Wa(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include \x3ccube_uv_reflection_fragment\x3e\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta \x3d cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection \x3d vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis \x3d latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis \x3d vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis \x3d normalize( axis );\n\n\t\t\t\tgl_FragColor \x3d vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb +\x3d weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i \x3d 1; i \x3c n; i++ ) {\n\n\t\t\t\t\tif ( i \x3e\x3d samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta \x3d dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb +\x3d weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb +\x3d weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1})}return n}_compileMaterial(a){a=new dd(this._lodPlanes[0],a);this._renderer.compile(a,ki)}_sceneToCubeUV(a,b,h,n){b=new gd(90,1,b,h);h=[1,-1,1,1,1,1];const t=[1,1,1,-1,-1,-1],C=this._renderer,G=C.autoClear,I=C.toneMapping;C.getClearColor(tj);C.toneMapping=0;C.autoClear=!1;var K=new Ie({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1});const M=new dd(new Qe,K);let T=!1;const U=a.background;U?U.isColor&&(K.color.copy(U),a.background=null,T=!0):(K.color.copy(tj),
T=!0);for(K=0;6>K;K++){const V=K%3;0===V?(b.up.set(0,h[K],0),b.lookAt(t[K],0,0)):1===V?(b.up.set(0,0,h[K]),b.lookAt(0,t[K],0)):(b.up.set(0,h[K],0),b.lookAt(0,0,t[K]));const ba=this._cubeSize;Ta(n,V*ba,2<K?ba:0,ba,ba);C.setRenderTarget(n);T&&C.render(M,b);C.render(a,b)}M.geometry.dispose();M.material.dispose();C.toneMapping=I;C.autoClear=G;a.background=U}_textureToCubeUV(a,b){const h=this._renderer;var n=301===a.mapping||302===a.mapping;n?(null===this._cubemapMaterial&&(this._cubemapMaterial=Ra()),
this._cubemapMaterial.uniforms.flipEnvMap.value=!1===a.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=na());const t=n?this._cubemapMaterial:this._equirectMaterial;n=new dd(this._lodPlanes[0],t);t.uniforms.envMap.value=a;a=this._cubeSize;Ta(b,0,0,3*a,2*a);h.setRenderTarget(b);h.render(n,ki)}_applyPMREM(a){const b=this._renderer,h=b.autoClear;b.autoClear=!1;for(let n=1;n<this._lodPlanes.length;n++)this._blur(a,n-1,n,Math.sqrt(this._sigmas[n]*this._sigmas[n]-this._sigmas[n-
1]*this._sigmas[n-1]),uj[(n-1)%uj.length]);b.autoClear=h}_blur(a,b,h,n,t){const C=this._pingPongRenderTarget;this._halfBlur(a,C,b,h,n,"latitudinal",t);this._halfBlur(C,a,h,h,n,"longitudinal",t)}_halfBlur(a,b,h,n,t,C,G){const I=this._renderer;var K=this._blurMaterial;"latitudinal"!==C&&"longitudinal"!==C&&console.error("blur direction must be either latitudinal or longitudinal!");const M=new dd(this._lodPlanes[n],K);K=K.uniforms;var T=this._sizeLods[h]-1;T=isFinite(t)?Math.PI/(2*T):2*Math.PI/39;var U=
t/T;const V=isFinite(t)?1+Math.floor(3*U):20;20<V&&console.warn(`sigmaRadians, ${t}, is too large and will clip, as it requested ${V} samples when the maximum is set to ${20}`);t=[];let ba=0;for(let S=0;20>S;++S){var aa=S/U;aa=Math.exp(-aa*aa/2);t.push(aa);0===S?ba+=aa:S<V&&(ba+=2*aa)}for(U=0;U<t.length;U++)t[U]/=ba;K.envMap.value=a.texture;K.samples.value=V;K.weights.value=t;K.latitudinal.value="latitudinal"===C;G&&(K.poleAxis.value=G);({_lodMax:a}=this);K.dTheta.value=T;K.mipInt.value=a-h;h=this._sizeLods[n];
Ta(b,3*h*(n>a-4?n-a+4:0),4*(this._cubeSize-h),3*h,2*h);I.setRenderTarget(b);I.render(M,ki)}}const Xi=new Qc,$i=new Ag,Yi=new Yh,Zi=new hg,Si=[],Ti=[],Wi=new Float32Array(16),Vi=new Float32Array(9),Ui=new Float32Array(4);class wl{constructor(a,b,h){this.id=a;this.addr=h;this.cache=[];this.setValue=Yb(b.type)}}class xl{constructor(a,b,h){this.id=a;this.addr=h;this.cache=[];this.size=b.size;this.setValue=Ac(b.type)}}class yl{constructor(a){this.id=a;this.seq=[];this.map={}}setValue(a,b,h){const n=this.seq;
for(let t=0,C=n.length;t!==C;++t){const G=n[t];G.setValue(a,b[G.id],h)}}}const mi=/(\w+)(\])?(\[|\.)?/g;class Bg{constructor(a,b){this.seq=[];this.map={};const h=a.getProgramParameter(b,a.ACTIVE_UNIFORMS);for(let M=0;M<h;++M){var n=a.getActiveUniform(b,M),t=a.getUniformLocation(b,n.name),C=this,G=n.name;const T=G.length;for(mi.lastIndex=0;;){const U=mi.exec(G),V=mi.lastIndex;var I=U[1],K=U[3];"]"===U[2]&&(I|=0);if(void 0===K||"["===K&&V+2===T){G=C;n=void 0===K?new wl(I,n,t):new xl(I,n,t);G.seq.push(n);
G.map[n.id]=n;break}else K=C.map[I],void 0===K&&(K=new yl(I),I=C,C=K,I.seq.push(C),I.map[C.id]=C),C=K}}}setValue(a,b,h,n){b=this.map[b];void 0!==b&&b.setValue(a,h,n)}setOptional(a,b,h){b=b[h];void 0!==b&&this.setValue(a,h,b)}static upload(a,b,h,n){for(let t=0,C=b.length;t!==C;++t){const G=b[t],I=h[G.id];!1!==I.needsUpdate&&G.setValue(a,I.value,n)}}static seqWithValue(a,b){const h=[];for(let n=0,t=a.length;n!==t;++n){const C=a[n];C.id in b&&h.push(C)}return h}}let Uk=0;const Mh=/^[ \t]*#include +<([\w\d./]+)>/gm,
aj=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;let zl=0;class Vk{constructor(){this.shaderCache=new Map;this.materialCache=new Map}update(a){var b=a.fragmentShader;const h=this._getShaderStage(a.vertexShader);b=this._getShaderStage(b);a=this._getShaderCacheForMaterial(a);!1===a.has(h)&&(a.add(h),h.usedTimes++);!1===a.has(b)&&(a.add(b),b.usedTimes++);return this}remove(a){const b=this.materialCache.get(a);
for(const h of b)h.usedTimes--,0===h.usedTimes&&this.shaderCache.delete(h.code);this.materialCache.delete(a);return this}getVertexShaderID(a){return this._getShaderStage(a.vertexShader).id}getFragmentShaderID(a){return this._getShaderStage(a.fragmentShader).id}dispose(){this.shaderCache.clear();this.materialCache.clear()}_getShaderCacheForMaterial(a){const b=this.materialCache;let h=b.get(a);void 0===h&&(h=new Set,b.set(a,h));return h}_getShaderStage(a){const b=this.shaderCache;let h=b.get(a);void 0===
h&&(h=new Al(a),b.set(a,h));return h}}class Al{constructor(a){this.id=zl++;this.code=a;this.usedTimes=0}}let Wk=0;class Nh extends kd{constructor(a){super();this.isMeshDepthMaterial=!0;this.type="MeshDepthMaterial";this.depthPacking=3200;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.setValues(a)}copy(a){super.copy(a);this.depthPacking=a.depthPacking;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=
a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this}}class Oh extends kd{constructor(a){super();this.isMeshDistanceMaterial=!0;this.type="MeshDistanceMaterial";this.referencePosition=new ka;this.nearDistance=1;this.farDistance=1E3;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.setValues(a)}copy(a){super.copy(a);
this.referencePosition.copy(a.referencePosition);this.nearDistance=a.nearDistance;this.farDistance=a.farDistance;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;return this}}class vj extends gd{constructor(a=[]){super();this.isArrayCamera=!0;this.cameras=a}}class Ff extends wc{constructor(){super();this.isGroup=!0;this.type="Group"}}const Bl={type:"move"};class ni{constructor(){this._hand=
this._grip=this._targetRay=null}getHandSpace(){null===this._hand&&(this._hand=new Ff,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1});return this._hand}getTargetRaySpace(){null===this._targetRay&&(this._targetRay=new Ff,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ka,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ka);return this._targetRay}getGripSpace(){null===
this._grip&&(this._grip=new Ff,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ka,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ka);return this._grip}dispatchEvent(a){null!==this._targetRay&&this._targetRay.dispatchEvent(a);null!==this._grip&&this._grip.dispatchEvent(a);null!==this._hand&&this._hand.dispatchEvent(a);return this}connect(a){if(a&&a.hand){const b=this._hand;if(b)for(const h of a.hand.values())this._getHandJoint(b,
h)}this.dispatchEvent({type:"connected",data:a});return this}disconnect(a){this.dispatchEvent({type:"disconnected",data:a});null!==this._targetRay&&(this._targetRay.visible=!1);null!==this._grip&&(this._grip.visible=!1);null!==this._hand&&(this._hand.visible=!1);return this}update(a,b,h){let n=null,t=null,C=null;const G=this._targetRay,I=this._grip,K=this._hand;if(a&&"visible-blurred"!==b.session.visibilityState){if(K&&a.hand){C=!0;for(var M of a.hand.values()){const T=b.getJointPose(M,h),U=this._getHandJoint(K,
M);null!==T&&(U.matrix.fromArray(T.transform.matrix),U.matrix.decompose(U.position,U.rotation,U.scale),U.jointRadius=T.radius);U.visible=null!==T}M=K.joints["index-finger-tip"].position.distanceTo(K.joints["thumb-tip"].position);K.inputState.pinching&&.025<M?(K.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:a.handedness,target:this})):!K.inputState.pinching&&.015>=M&&(K.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:a.handedness,target:this}))}else null!==
I&&a.gripSpace&&(t=b.getPose(a.gripSpace,h),null!==t&&(I.matrix.fromArray(t.transform.matrix),I.matrix.decompose(I.position,I.rotation,I.scale),t.linearVelocity?(I.hasLinearVelocity=!0,I.linearVelocity.copy(t.linearVelocity)):I.hasLinearVelocity=!1,t.angularVelocity?(I.hasAngularVelocity=!0,I.angularVelocity.copy(t.angularVelocity)):I.hasAngularVelocity=!1));null!==G&&(n=b.getPose(a.targetRaySpace,h),null===n&&null!==t&&(n=t),null!==n&&(G.matrix.fromArray(n.transform.matrix),G.matrix.decompose(G.position,
G.rotation,G.scale),n.linearVelocity?(G.hasLinearVelocity=!0,G.linearVelocity.copy(n.linearVelocity)):G.hasLinearVelocity=!1,n.angularVelocity?(G.hasAngularVelocity=!0,G.angularVelocity.copy(n.angularVelocity)):G.hasAngularVelocity=!1,this.dispatchEvent(Bl)))}null!==G&&(G.visible=null!==n);null!==I&&(I.visible=null!==t);null!==K&&(K.visible=null!==C);return this}_getHandJoint(a,b){if(void 0===a.joints[b.jointName]){const h=new Ff;h.matrixAutoUpdate=!1;h.visible=!1;a.joints[b.jointName]=h;a.add(h)}return a.joints[b.jointName]}}
class wj extends Qc{constructor(a,b,h,n,t,C,G,I,K,M){M=void 0!==M?M:1026;if(1026!==M&&1027!==M)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===h&&1026===M&&(h=1014);void 0===h&&1027===M&&(h=1020);super(null,n,t,C,G,I,M,h,K);this.isDepthTexture=!0;this.image={width:a,height:b};this.magFilter=void 0!==G?G:1003;this.minFilter=void 0!==I?I:1003;this.generateMipmaps=this.flipY=!1}}class Xk extends Od{constructor(a,b){function h(eb){var nb=Qa.indexOf(eb.inputSource);
-1!==nb&&(nb=ua[nb],void 0!==nb&&nb.dispatchEvent({type:eb.type,data:eb.inputSource}))}function n(){I.removeEventListener("select",h);I.removeEventListener("selectstart",h);I.removeEventListener("selectend",h);I.removeEventListener("squeeze",h);I.removeEventListener("squeezestart",h);I.removeEventListener("squeezeend",h);I.removeEventListener("end",n);I.removeEventListener("inputsourceschange",t);for(let eb=0;eb<ua.length;eb++){const nb=Qa[eb];null!==nb&&(Qa[eb]=null,ua[eb].disconnect(nb))}bb=db=
null;a.setRenderTarget(wa);Ea=I=aa=S=ea=null;Tb.stop();G.isPresenting=!1;G.dispatchEvent({type:"sessionend"})}function t(eb){for(var nb=0;nb<eb.removed.length;nb++){var qb=eb.removed[nb],Hb=Qa.indexOf(qb);0<=Hb&&(Qa[Hb]=null,ua[Hb].disconnect(qb))}for(nb=0;nb<eb.added.length;nb++){qb=eb.added[nb];Hb=Qa.indexOf(qb);if(-1===Hb){for(let Ab=0;Ab<ua.length;Ab++)if(Ab>=Qa.length){Qa.push(qb);Hb=Ab;break}else if(null===Qa[Ab]){Qa[Ab]=qb;Hb=Ab;break}if(-1===Hb)break}(Hb=ua[Hb])&&Hb.connect(qb)}}function C(eb,
nb){null===nb?eb.matrixWorld.copy(eb.matrix):eb.matrixWorld.multiplyMatrices(nb.matrixWorld,eb.matrix);eb.matrixWorldInverse.copy(eb.matrixWorld).invert()}super();const G=this;let I=null,K=1,M=null,T="local-floor",U=1,V=null,ba=null,aa=null,S=null,ea=null,va=null;const ma=b.getContextAttributes();let wa=null,Ea=null;const ua=[],Qa=[],ya=new Set,Ha=new Map,Ka=new gd;Ka.layers.enable(1);Ka.viewport=new zc;const Ia=new gd;Ia.layers.enable(2);Ia.viewport=new zc;const gb=[Ka,Ia],Za=new vj;Za.layers.enable(1);
Za.layers.enable(2);let db=null,bb=null;this.cameraAutoUpdate=!0;this.isPresenting=this.enabled=!1;this.getController=function(eb){let nb=ua[eb];void 0===nb&&(nb=new ni,ua[eb]=nb);return nb.getTargetRaySpace()};this.getControllerGrip=function(eb){let nb=ua[eb];void 0===nb&&(nb=new ni,ua[eb]=nb);return nb.getGripSpace()};this.getHand=function(eb){let nb=ua[eb];void 0===nb&&(nb=new ni,ua[eb]=nb);return nb.getHandSpace()};this.setFramebufferScaleFactor=function(eb){K=eb;!0===G.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")};
this.setReferenceSpaceType=function(eb){T=eb;!0===G.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")};this.getReferenceSpace=function(){return V||M};this.setReferenceSpace=function(eb){V=eb};this.getBaseLayer=function(){return null!==S?S:ea};this.getBinding=function(){return aa};this.getFrame=function(){return va};this.getSession=function(){return I};this.setSession=async function(eb){I=eb;if(null!==I){wa=a.getRenderTarget();I.addEventListener("select",
h);I.addEventListener("selectstart",h);I.addEventListener("selectend",h);I.addEventListener("squeeze",h);I.addEventListener("squeezestart",h);I.addEventListener("squeezeend",h);I.addEventListener("end",n);I.addEventListener("inputsourceschange",t);!0!==ma.xrCompatible&&await b.makeXRCompatible();if(void 0===I.renderState.layers||!1===a.capabilities.isWebGL2)ea=new XRWebGLLayer(I,b,{antialias:void 0===I.renderState.layers?ma.antialias:!0,alpha:ma.alpha,depth:ma.depth,stencil:ma.stencil,framebufferScaleFactor:K}),
I.updateRenderState({baseLayer:ea}),Ea=new Sd(ea.framebufferWidth,ea.framebufferHeight,{format:1023,type:1009,encoding:a.outputEncoding,stencilBuffer:ma.stencil});else{let qb=eb=null;var nb=null;ma.depth&&(nb=ma.stencil?b.DEPTH24_STENCIL8:b.DEPTH_COMPONENT24,eb=ma.stencil?1027:1026,qb=ma.stencil?1020:1014);nb={colorFormat:b.RGBA8,depthFormat:nb,scaleFactor:K};aa=new XRWebGLBinding(I,b);S=aa.createProjectionLayer(nb);I.updateRenderState({layers:[S]});Ea=new Sd(S.textureWidth,S.textureHeight,{format:1023,
type:1009,depthTexture:new wj(S.textureWidth,S.textureHeight,qb,void 0,void 0,void 0,void 0,void 0,void 0,eb),stencilBuffer:ma.stencil,encoding:a.outputEncoding,samples:ma.antialias?4:0});a.properties.get(Ea).__ignoreDepthValues=S.ignoreDepthValues}Ea.isXRRenderTarget=!0;this.setFoveation(U);V=null;M=await I.requestReferenceSpace(T);Tb.setContext(I);Tb.start();G.isPresenting=!0;G.dispatchEvent({type:"sessionstart"})}};const rb=new ka,Bb=new ka;this.updateCamera=function(eb){if(null!==I){Za.near=Ia.near=
Ka.near=eb.near;Za.far=Ia.far=Ka.far=eb.far;if(db!==Za.near||bb!==Za.far)I.updateRenderState({depthNear:Za.near,depthFar:Za.far}),db=Za.near,bb=Za.far;var nb=eb.parent,qb=Za.cameras;C(Za,nb);for(var Hb=0;Hb<qb.length;Hb++)C(qb[Hb],nb);Za.matrixWorld.decompose(Za.position,Za.quaternion,Za.scale);eb.matrix.copy(Za.matrix);eb.matrix.decompose(eb.position,eb.quaternion,eb.scale);eb=eb.children;for(let Ca=0,lb=eb.length;Ca<lb;Ca++)eb[Ca].updateMatrixWorld(!0);if(2===qb.length){rb.setFromMatrixPosition(Ka.matrixWorld);
Bb.setFromMatrixPosition(Ia.matrixWorld);qb=rb.distanceTo(Bb);var Ab=Ka.projectionMatrix.elements,ia=Ia.projectionMatrix.elements,ha=Ab[14]/(Ab[10]-1);eb=Ab[14]/(Ab[10]+1);nb=(Ab[9]+1)/Ab[5];Hb=(Ab[9]-1)/Ab[5];var qa=(Ab[8]-1)/Ab[0],ta=(ia[8]+1)/ia[0];ia=ha*qa;Ab=ha*ta;ta=qb/(-qa+ta);qa=ta*-qa;Ka.matrixWorld.decompose(Za.position,Za.quaternion,Za.scale);Za.translateX(qa);Za.translateZ(ta);Za.matrixWorld.compose(Za.position,Za.quaternion,Za.scale);Za.matrixWorldInverse.copy(Za.matrixWorld).invert();
ha+=ta;ta=eb+ta;Za.projectionMatrix.makePerspective(ia-qa,Ab+(qb-qa),nb*eb/ta*ha,Hb*eb/ta*ha,ha,ta)}else Za.projectionMatrix.copy(Ka.projectionMatrix)}};this.getCamera=function(){return Za};this.getFoveation=function(){if(null!==S||null!==ea)return U};this.setFoveation=function(eb){U=eb;null!==S&&(S.fixedFoveation=eb);null!==ea&&void 0!==ea.fixedFoveation&&(ea.fixedFoveation=eb)};this.getPlanes=function(){return ya};let Kb=null;const Tb=new fa;Tb.setAnimationLoop(function(eb,nb){ba=nb.getViewerPose(V||
M);va=nb;if(null!==ba){var qb=ba.views;null!==ea&&(a.setRenderTargetFramebuffer(Ea,ea.framebuffer),a.setRenderTarget(Ea));var Hb=!1;qb.length!==Za.cameras.length&&(Za.cameras.length=0,Hb=!0);for(var Ab=0;Ab<qb.length;Ab++){const qa=qb[Ab];let ta;if(null!==ea)ta=ea.getViewport(qa);else{var ia=aa.getViewSubImage(S,qa);ta=ia.viewport;0===Ab&&(a.setRenderTargetTextures(Ea,ia.colorTexture,S.ignoreDepthValues?void 0:ia.depthStencilTexture),a.setRenderTarget(Ea))}ia=gb[Ab];void 0===ia&&(ia=new gd,ia.layers.enable(Ab),
ia.viewport=new zc,gb[Ab]=ia);ia.matrix.fromArray(qa.transform.matrix);ia.projectionMatrix.fromArray(qa.projectionMatrix);ia.viewport.set(ta.x,ta.y,ta.width,ta.height);0===Ab&&Za.matrix.copy(ia.matrix);!0===Hb&&Za.cameras.push(ia)}}for(qb=0;qb<ua.length;qb++)Hb=Qa[qb],Ab=ua[qb],null!==Hb&&void 0!==Ab&&Ab.update(Hb,nb,V||M);Kb&&Kb(eb,nb);if(nb.detectedPlanes){G.dispatchEvent({type:"planesdetected",data:nb.detectedPlanes});eb=null;for(var ha of ya)nb.detectedPlanes.has(ha)||(null===eb&&(eb=[]),eb.push(ha));
if(null!==eb)for(const qa of eb)ya.delete(qa),Ha.delete(qa),G.dispatchEvent({type:"planeremoved",data:qa});for(const qa of nb.detectedPlanes)ya.has(qa)?(ha=Ha.get(qa),qa.lastChangedTime>ha&&(Ha.set(qa,qa.lastChangedTime),G.dispatchEvent({type:"planechanged",data:qa}))):(ya.add(qa),Ha.set(qa,nb.lastChangedTime),G.dispatchEvent({type:"planeadded",data:qa}))}va=null});this.setAnimationLoop=function(eb){Kb=eb};this.dispose=function(){}}}Object.defineProperties(Xd.prototype,{physicallyCorrectLights:{get:function(){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead.");
return!this.useLegacyLights},set:function(a){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead.");this.useLegacyLights=!a}}});class xj extends Xd{}xj.prototype.isWebGL1Renderer=!0;class oi{constructor(a,b=2.5E-4){this.isFogExp2=!0;this.name="";this.color=new wb(a);this.density=b}clone(){return new oi(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class pi{constructor(a,
b=1,h=1E3){this.isFog=!0;this.name="";this.color=new wb(a);this.near=b;this.far=h}clone(){return new pi(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class yj extends wc{constructor(){super();this.isScene=!0;this.type="Scene";this.fog=this.environment=this.background=null;this.backgroundBlurriness=0;this.backgroundIntensity=1;this.overrideMaterial=null;"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",
{detail:this}))}copy(a,b){super.copy(a,b);null!==a.background&&(this.background=a.background.clone());null!==a.environment&&(this.environment=a.environment.clone());null!==a.fog&&(this.fog=a.fog.clone());this.backgroundBlurriness=a.backgroundBlurriness;this.backgroundIntensity=a.backgroundIntensity;null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.matrixAutoUpdate=a.matrixAutoUpdate;return this}toJSON(a){a=super.toJSON(a);null!==this.fog&&(a.object.fog=this.fog.toJSON());
0<this.backgroundBlurriness&&(a.object.backgroundBlurriness=this.backgroundBlurriness);1!==this.backgroundIntensity&&(a.object.backgroundIntensity=this.backgroundIntensity);return a}get autoUpdate(){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144.");return this.matrixWorldAutoUpdate}set autoUpdate(a){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144.");this.matrixWorldAutoUpdate=a}}class ch{constructor(a,b){this.isInterleavedBuffer=
!0;this.array=a;this.stride=b;this.count=void 0!==a?a.length/b:0;this.usage=35044;this.updateRange={offset:0,count:-1};this.version=0;this.uuid=q()}onUploadCallback(){}set needsUpdate(a){!0===a&&this.version++}setUsage(a){this.usage=a;return this}copy(a){this.array=new a.array.constructor(a.array);this.count=a.count;this.stride=a.stride;this.usage=a.usage;return this}copyAt(a,b,h){a*=this.stride;h*=b.stride;for(let n=0,t=this.stride;n<t;n++)this.array[a+n]=b.array[h+n];return this}set(a,b=0){this.array.set(a,
b);return this}clone(a){void 0===a.arrayBuffers&&(a.arrayBuffers={});void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=q());void 0===a.arrayBuffers[this.array.buffer._uuid]&&(a.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);a=new this.array.constructor(a.arrayBuffers[this.array.buffer._uuid]);a=new this.constructor(a,this.stride);a.setUsage(this.usage);return a}onUpload(a){this.onUploadCallback=a;return this}toJSON(a){void 0===a.arrayBuffers&&(a.arrayBuffers={});void 0===
this.array.buffer._uuid&&(this.array.buffer._uuid=q());void 0===a.arrayBuffers[this.array.buffer._uuid]&&(a.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer)));return{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const rd=new ka;class Gf{constructor(a,b,h,n=!1){this.isInterleavedBufferAttribute=!0;this.name="";this.data=a;this.itemSize=b;this.offset=h;this.normalized=n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(a){this.data.needsUpdate=
a}applyMatrix4(a){for(let b=0,h=this.data.count;b<h;b++)rd.fromBufferAttribute(this,b),rd.applyMatrix4(a),this.setXYZ(b,rd.x,rd.y,rd.z);return this}applyNormalMatrix(a){for(let b=0,h=this.count;b<h;b++)rd.fromBufferAttribute(this,b),rd.applyNormalMatrix(a),this.setXYZ(b,rd.x,rd.y,rd.z);return this}transformDirection(a){for(let b=0,h=this.count;b<h;b++)rd.fromBufferAttribute(this,b),rd.transformDirection(a),this.setXYZ(b,rd.x,rd.y,rd.z);return this}setX(a,b){this.normalized&&(b=r(b,this.array));this.data.array[a*
this.data.stride+this.offset]=b;return this}setY(a,b){this.normalized&&(b=r(b,this.array));this.data.array[a*this.data.stride+this.offset+1]=b;return this}setZ(a,b){this.normalized&&(b=r(b,this.array));this.data.array[a*this.data.stride+this.offset+2]=b;return this}setW(a,b){this.normalized&&(b=r(b,this.array));this.data.array[a*this.data.stride+this.offset+3]=b;return this}getX(a){a=this.data.array[a*this.data.stride+this.offset];this.normalized&&(a=l(a,this.array));return a}getY(a){a=this.data.array[a*
this.data.stride+this.offset+1];this.normalized&&(a=l(a,this.array));return a}getZ(a){a=this.data.array[a*this.data.stride+this.offset+2];this.normalized&&(a=l(a,this.array));return a}getW(a){a=this.data.array[a*this.data.stride+this.offset+3];this.normalized&&(a=l(a,this.array));return a}setXY(a,b,h){a=a*this.data.stride+this.offset;this.normalized&&(b=r(b,this.array),h=r(h,this.array));this.data.array[a+0]=b;this.data.array[a+1]=h;return this}setXYZ(a,b,h,n){a=a*this.data.stride+this.offset;this.normalized&&
(b=r(b,this.array),h=r(h,this.array),n=r(n,this.array));this.data.array[a+0]=b;this.data.array[a+1]=h;this.data.array[a+2]=n;return this}setXYZW(a,b,h,n,t){a=a*this.data.stride+this.offset;this.normalized&&(b=r(b,this.array),h=r(h,this.array),n=r(n,this.array),t=r(t,this.array));this.data.array[a+0]=b;this.data.array[a+1]=h;this.data.array[a+2]=n;this.data.array[a+3]=t;return this}clone(a){if(void 0===a){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");
a=[];for(let b=0;b<this.count;b++){const h=b*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)a.push(this.data.array[h+n])}return new Bc(new this.array.constructor(a),this.itemSize,this.normalized)}void 0===a.interleavedBuffers&&(a.interleavedBuffers={});void 0===a.interleavedBuffers[this.data.uuid]&&(a.interleavedBuffers[this.data.uuid]=this.data.clone(a));return new Gf(a.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(a){if(void 0===a){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");
a=[];for(let b=0;b<this.count;b++){const h=b*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)a.push(this.data.array[h+n])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:a,normalized:this.normalized}}void 0===a.interleavedBuffers&&(a.interleavedBuffers={});void 0===a.interleavedBuffers[this.data.uuid]&&(a.interleavedBuffers[this.data.uuid]=this.data.toJSON(a));return{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}
class qi extends kd{constructor(a){super();this.isSpriteMaterial=!0;this.type="SpriteMaterial";this.color=new wb(16777215);this.alphaMap=this.map=null;this.rotation=0;this.fog=this.transparent=this.sizeAttenuation=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.map=a.map;this.alphaMap=a.alphaMap;this.rotation=a.rotation;this.sizeAttenuation=a.sizeAttenuation;this.fog=a.fog;return this}}let Hf;const ig=new ka,If=new ka,Jf=new ka,rf=new La,Vf=new La,fj=new $b,dh=new ka,jg=new ka,
eh=new ka,zj=new La,ri=new La,Aj=new La;class Bj extends wc{constructor(a){super();this.isSprite=!0;this.type="Sprite";if(void 0===Hf){Hf=new gc;var b=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);b=new ch(b,5);Hf.setIndex([0,1,2,0,2,3]);Hf.setAttribute("position",new Gf(b,3,0,!1));Hf.setAttribute("uv",new Gf(b,2,3,!1))}this.geometry=Hf;this.material=void 0!==a?a:new qi;this.center=new La(.5,.5)}raycast(a,b){null===a.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.');
If.setFromMatrixScale(this.matrixWorld);fj.copy(a.camera.matrixWorld);this.modelViewMatrix.multiplyMatrices(a.camera.matrixWorldInverse,this.matrixWorld);Jf.setFromMatrixPosition(this.modelViewMatrix);a.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&If.multiplyScalar(-Jf.z);var h=this.material.rotation;let n;if(0!==h){n=Math.cos(h);var t=Math.sin(h)}h=this.center;ze(dh.set(-.5,-.5,0),Jf,h,If,t,n);ze(jg.set(.5,-.5,0),Jf,h,If,t,n);ze(eh.set(.5,.5,0),Jf,h,If,t,n);zj.set(0,0);ri.set(1,
0);Aj.set(1,1);let C=a.ray.intersectTriangle(dh,jg,eh,!1,ig);if(null===C&&(ze(jg.set(-.5,.5,0),Jf,h,If,t,n),ri.set(0,1),C=a.ray.intersectTriangle(dh,eh,jg,!1,ig),null===C))return;t=a.ray.origin.distanceTo(ig);t<a.near||t>a.far||b.push({distance:t,point:ig.clone(),uv:Qd.getUV(ig,dh,jg,eh,zj,ri,Aj,new La),face:null,object:this})}copy(a,b){super.copy(a,b);void 0!==a.center&&this.center.copy(a.center);this.material=a.material;return this}}const fh=new ka,Cj=new ka;class Dj extends wc{constructor(){super();
this._currentLevel=0;this.type="LOD";Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}});this.autoUpdate=!0}copy(a){super.copy(a,!1);const b=a.levels;for(let h=0,n=b.length;h<n;h++){const t=b[h];this.addLevel(t.object.clone(),t.distance,t.hysteresis)}this.autoUpdate=a.autoUpdate;return this}addLevel(a,b=0,h=0){b=Math.abs(b);const n=this.levels;let t;for(t=0;t<n.length&&!(b<n[t].distance);t++);n.splice(t,0,{distance:b,hysteresis:h,object:a});this.add(a);return this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(a){const b=
this.levels;if(0<b.length){let h,n;h=1;for(n=b.length;h<n;h++){let t=b[h].distance;b[h].object.visible&&(t-=t*b[h].hysteresis);if(a<t)break}return b[h-1].object}return null}raycast(a,b){if(0<this.levels.length){fh.setFromMatrixPosition(this.matrixWorld);const h=a.ray.origin.distanceTo(fh);this.getObjectForDistance(h).raycast(a,b)}}update(a){const b=this.levels;if(1<b.length){fh.setFromMatrixPosition(a.matrixWorld);Cj.setFromMatrixPosition(this.matrixWorld);a=fh.distanceTo(Cj)/a.zoom;b[0].object.visible=
!0;let h,n;h=1;for(n=b.length;h<n;h++){let t=b[h].distance;b[h].object.visible&&(t-=t*b[h].hysteresis);if(a>=t)b[h-1].object.visible=!1,b[h].object.visible=!0;else break}for(this._currentLevel=h-1;h<n;h++)b[h].object.visible=!1}}toJSON(a){a=super.toJSON(a);!1===this.autoUpdate&&(a.object.autoUpdate=!1);a.object.levels=[];const b=this.levels;for(let h=0,n=b.length;h<n;h++){const t=b[h];a.object.levels.push({object:t.object.uuid,distance:t.distance,hysteresis:t.hysteresis})}return a}}const Ej=new ka,
Fj=new zc,Gj=new zc,Cl=new ka,Hj=new $b;class Ij extends dd{constructor(a,b){super(a,b);this.isSkinnedMesh=!0;this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new $b;this.bindMatrixInverse=new $b}copy(a,b){super.copy(a,b);this.bindMode=a.bindMode;this.bindMatrix.copy(a.bindMatrix);this.bindMatrixInverse.copy(a.bindMatrixInverse);this.skeleton=a.skeleton;return this}bind(a,b){this.skeleton=a;void 0===b&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),b=this.matrixWorld);
this.bindMatrix.copy(b);this.bindMatrixInverse.copy(b).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const a=new zc,b=this.geometry.attributes.skinWeight;for(let h=0,n=b.count;h<n;h++){a.fromBufferAttribute(b,h);const t=1/a.manhattanLength();Infinity!==t?a.multiplyScalar(t):a.set(1,0,0,0);b.setXYZW(h,a.x,a.y,a.z,a.w)}}updateMatrixWorld(a){super.updateMatrixWorld(a);"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():
console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(a,b){const h=this.skeleton;var n=this.geometry;Fj.fromBufferAttribute(n.attributes.skinIndex,a);Gj.fromBufferAttribute(n.attributes.skinWeight,a);Ej.copy(b).applyMatrix4(this.bindMatrix);b.set(0,0,0);for(a=0;4>a;a++)if(n=Gj.getComponent(a),0!==n){const t=Fj.getComponent(a);Hj.multiplyMatrices(h.bones[t].matrixWorld,h.boneInverses[t]);b.addScaledVector(Cl.copy(Ej).applyMatrix4(Hj),n)}return b.applyMatrix4(this.bindMatrixInverse)}}
class si extends wc{constructor(){super();this.isBone=!0;this.type="Bone"}}class Kf extends Qc{constructor(a=null,b=1,h=1,n,t,C,G,I,K=1003,M=1003,T,U){super(null,C,G,I,K,M,n,t,T,U);this.isDataTexture=!0;this.image={data:a,width:b,height:h};this.flipY=this.generateMipmaps=!1;this.unpackAlignment=1}}const Jj=new $b,Dl=new $b;class ti{constructor(a=[],b=[]){this.uuid=q();this.bones=a.slice(0);this.boneInverses=b;this.boneTexture=this.boneMatrices=null;this.boneTextureSize=0;this.frame=-1;this.init()}init(){const a=
this.bones,b=this.boneInverses;this.boneMatrices=new Float32Array(16*a.length);if(0===b.length)this.calculateInverses();else if(a.length!==b.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones.");this.boneInverses=[];for(let h=0,n=this.bones.length;h<n;h++)this.boneInverses.push(new $b)}}calculateInverses(){this.boneInverses.length=0;for(let a=0,b=this.bones.length;a<b;a++){const h=new $b;this.bones[a]&&h.copy(this.bones[a].matrixWorld).invert();this.boneInverses.push(h)}}pose(){for(let b=
0,h=this.bones.length;b<h;b++){var a=this.bones[b];a&&a.matrixWorld.copy(this.boneInverses[b]).invert()}for(let b=0,h=this.bones.length;b<h;b++)if(a=this.bones[b])a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)}update(){const a=this.bones,b=this.boneInverses,h=this.boneMatrices,n=this.boneTexture;for(let t=0,C=a.length;t<C;t++)Jj.multiplyMatrices(a[t]?a[t].matrixWorld:
Dl,b[t]),Jj.toArray(h,16*t);null!==n&&(n.needsUpdate=!0)}clone(){return new ti(this.bones,this.boneInverses)}computeBoneTexture(){let a=Math.sqrt(4*this.bones.length);a=g(a);a=Math.max(a,4);const b=new Float32Array(a*a*4);b.set(this.boneMatrices);const h=new Kf(b,a,a,1023,1015);h.needsUpdate=!0;this.boneMatrices=b;this.boneTexture=h;this.boneTextureSize=a;return this}getBoneByName(a){for(let b=0,h=this.bones.length;b<h;b++){const n=this.bones[b];if(n.name===a)return n}}dispose(){null!==this.boneTexture&&
(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(a,b){this.uuid=a.uuid;for(let h=0,n=a.bones.length;h<n;h++){const t=a.bones[h];let C=b[t];void 0===C&&(console.warn("THREE.Skeleton: No bone found with UUID:",t),C=new si);this.bones.push(C);this.boneInverses.push((new $b).fromArray(a.boneInverses[h]))}this.init();return this}toJSON(){const a={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};a.uuid=this.uuid;const b=this.bones,h=this.boneInverses;
for(let n=0,t=b.length;n<t;n++)a.bones.push(b[n].uuid),a.boneInverses.push(h[n].toArray());return a}}class Lf extends Bc{constructor(a,b,h,n=1){super(a,b,h);this.isInstancedBufferAttribute=!0;this.meshPerAttribute=n}copy(a){super.copy(a);this.meshPerAttribute=a.meshPerAttribute;return this}toJSON(){const a=super.toJSON();a.meshPerAttribute=this.meshPerAttribute;a.isInstancedBufferAttribute=!0;return a}}const Kj=new $b,Lj=new $b,gh=[],El=new $b,kg=new dd;class Mj extends dd{constructor(a,b,h){super(a,
b);this.isInstancedMesh=!0;this.instanceMatrix=new Lf(new Float32Array(16*h),16);this.instanceColor=null;this.count=h;this.frustumCulled=!1;for(a=0;a<h;a++)this.setMatrixAt(a,El)}copy(a,b){super.copy(a,b);this.instanceMatrix.copy(a.instanceMatrix);null!==a.instanceColor&&(this.instanceColor=a.instanceColor.clone());this.count=a.count;return this}getColorAt(a,b){b.fromArray(this.instanceColor.array,3*a)}getMatrixAt(a,b){b.fromArray(this.instanceMatrix.array,16*a)}raycast(a,b){const h=this.matrixWorld,
n=this.count;kg.geometry=this.geometry;kg.material=this.material;if(void 0!==kg.material)for(let t=0;t<n;t++){this.getMatrixAt(t,Kj);Lj.multiplyMatrices(h,Kj);kg.matrixWorld=Lj;kg.raycast(a,gh);for(let C=0,G=gh.length;C<G;C++){const I=gh[C];I.instanceId=t;I.object=this;b.push(I)}gh.length=0}}setColorAt(a,b){null===this.instanceColor&&(this.instanceColor=new Lf(new Float32Array(3*this.instanceMatrix.count),3));b.toArray(this.instanceColor.array,3*a)}setMatrixAt(a,b){b.toArray(this.instanceMatrix.array,
16*a)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class sd extends kd{constructor(a){super();this.isLineBasicMaterial=!0;this.type="LineBasicMaterial";this.color=new wb(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.fog=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;this.fog=a.fog;return this}}const Nj=new ka,Oj=new ka,Pj=new $b,ui=new eg,lg=new af;class Je extends wc{constructor(a=
new gc,b=new sd){super();this.isLine=!0;this.type="Line";this.geometry=a;this.material=b;this.updateMorphTargets()}copy(a,b){super.copy(a,b);this.material=a.material;this.geometry=a.geometry;return this}computeLineDistances(){const a=this.geometry;if(null===a.index){const b=a.attributes.position,h=[0];for(let n=1,t=b.count;n<t;n++)Nj.fromBufferAttribute(b,n-1),Oj.fromBufferAttribute(b,n),h[n]=h[n-1],h[n]+=Nj.distanceTo(Oj);a.setAttribute("lineDistance",new Cb(h,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
return this}raycast(a,b){var h=this.geometry,n=this.matrixWorld,t=a.params.Line.threshold,C=h.drawRange;null===h.boundingSphere&&h.computeBoundingSphere();lg.copy(h.boundingSphere);lg.applyMatrix4(n);lg.radius+=t;if(!1!==a.ray.intersectsSphere(lg)){Pj.copy(n).invert();ui.copy(a.ray).applyMatrix4(Pj);n=t/((this.scale.x+this.scale.y+this.scale.z)/3);n*=n;t=new ka;var G=new ka,I=new ka,K=new ka,M=this.isLineSegments?2:1,T=h.index;h=h.attributes.position;if(null!==T){var U=Math.max(0,C.start);C=Math.min(T.count,
C.start+C.count);for(let V=U,ba=C-1;V<ba;V+=M)C=T.getX(V),U=T.getX(V+1),t.fromBufferAttribute(h,C),G.fromBufferAttribute(h,U),ui.distanceSqToSegment(t,G,K,I)>n||(K.applyMatrix4(this.matrixWorld),C=a.ray.origin.distanceTo(K),C<a.near||C>a.far||b.push({distance:C,point:I.clone().applyMatrix4(this.matrixWorld),index:V,face:null,faceIndex:null,object:this}))}else{T=Math.max(0,C.start);C=Math.min(h.count,C.start+C.count);for(let V=T,ba=C-1;V<ba;V+=M)t.fromBufferAttribute(h,V),G.fromBufferAttribute(h,V+
1),ui.distanceSqToSegment(t,G,K,I)>n||(K.applyMatrix4(this.matrixWorld),C=a.ray.origin.distanceTo(K),C<a.near||C>a.far||b.push({distance:C,point:I.clone().applyMatrix4(this.matrixWorld),index:V,face:null,faceIndex:null,object:this}))}}}updateMorphTargets(){var a=this.geometry.morphAttributes,b=Object.keys(a);if(0<b.length&&(a=a[b[0]],void 0!==a)){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(let h=0,n=a.length;h<n;h++)b=a[h].name||String(h),this.morphTargetInfluences.push(0),this.morphTargetDictionary[b]=
h}}}const Qj=new ka,Rj=new ka;class he extends Je{constructor(a,b){super(a,b);this.isLineSegments=!0;this.type="LineSegments"}computeLineDistances(){const a=this.geometry;if(null===a.index){const b=a.attributes.position,h=[];for(let n=0,t=b.count;n<t;n+=2)Qj.fromBufferAttribute(b,n),Rj.fromBufferAttribute(b,n+1),h[n]=0===n?0:h[n-1],h[n+1]=h[n]+Qj.distanceTo(Rj);a.setAttribute("lineDistance",new Cb(h,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
return this}}class Sj extends Je{constructor(a,b){super(a,b);this.isLineLoop=!0;this.type="LineLoop"}}class vi extends kd{constructor(a){super();this.isPointsMaterial=!0;this.type="PointsMaterial";this.color=new wb(16777215);this.alphaMap=this.map=null;this.size=1;this.fog=this.sizeAttenuation=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.map=a.map;this.alphaMap=a.alphaMap;this.size=a.size;this.sizeAttenuation=a.sizeAttenuation;this.fog=a.fog;return this}}const Tj=new $b,
Vh=new eg,mg=new af,hh=new ka;class Uj extends wc{constructor(a=new gc,b=new vi){super();this.isPoints=!0;this.type="Points";this.geometry=a;this.material=b;this.updateMorphTargets()}copy(a,b){super.copy(a,b);this.material=a.material;this.geometry=a.geometry;return this}raycast(a,b){var h=this.geometry;const n=this.matrixWorld;var t=a.params.Points.threshold,C=h.drawRange;null===h.boundingSphere&&h.computeBoundingSphere();mg.copy(h.boundingSphere);mg.applyMatrix4(n);mg.radius+=t;if(!1!==a.ray.intersectsSphere(mg)){Tj.copy(n).invert();
Vh.copy(a.ray).applyMatrix4(Tj);t/=(this.scale.x+this.scale.y+this.scale.z)/3;t*=t;var G=h.index;h=h.attributes.position;if(null!==G){const I=Math.max(0,C.start);C=Math.min(G.count,C.start+C.count);for(let K=I,M=C;K<M;K++)C=G.getX(K),hh.fromBufferAttribute(h,C),kf(hh,C,t,n,a,b,this)}else{G=Math.max(0,C.start);C=Math.min(h.count,C.start+C.count);for(let I=G,K=C;I<K;I++)hh.fromBufferAttribute(h,I),kf(hh,I,t,n,a,b,this)}}}updateMorphTargets(){var a=this.geometry.morphAttributes,b=Object.keys(a);if(0<
b.length&&(a=a[b[0]],void 0!==a)){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(let h=0,n=a.length;h<n;h++)b=a[h].name||String(h),this.morphTargetInfluences.push(0),this.morphTargetDictionary[b]=h}}}class Fl extends Qc{constructor(a,b,h,n,t,C,G,I,K){function M(){T.needsUpdate=!0;a.requestVideoFrameCallback(M)}super(a,b,h,n,t,C,G,I,K);this.isVideoTexture=!0;this.minFilter=void 0!==C?C:1006;this.magFilter=void 0!==t?t:1006;this.generateMipmaps=!1;const T=this;"requestVideoFrameCallback"in
a&&a.requestVideoFrameCallback(M)}clone(){return(new this.constructor(this.image)).copy(this)}update(){const a=this.image;!1==="requestVideoFrameCallback"in a&&a.readyState>=a.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Gl extends Qc{constructor(a,b,h){super({width:a,height:b});this.isFramebufferTexture=!0;this.format=h;this.minFilter=this.magFilter=1003;this.generateMipmaps=!1;this.needsUpdate=!0}}class wi extends Qc{constructor(a,b,h,n,t,C,G,I,K,M,T,U){super(null,C,G,I,K,M,n,t,T,U);this.isCompressedTexture=
!0;this.image={width:b,height:h};this.mipmaps=a;this.generateMipmaps=this.flipY=!1}}class Hl extends wi{constructor(a,b,h,n,t,C){super(a,b,h,t,C);this.isCompressedArrayTexture=!0;this.image.depth=n;this.wrapR=1001}}class Il extends Qc{constructor(a,b,h,n,t,C,G,I,K){super(a,b,h,n,t,C,G,I,K);this.needsUpdate=this.isCanvasTexture=!0}}class Vd{constructor(){this.type="Curve";this.arcLengthDivisions=200}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.");return null}getPointAt(a,b){a=
this.getUtoTmapping(a);return this.getPoint(a,b)}getPoints(a=5){const b=[];for(let h=0;h<=a;h++)b.push(this.getPoint(h/a));return b}getSpacedPoints(a=5){const b=[];for(let h=0;h<=a;h++)b.push(this.getPointAt(h/a));return b}getLength(){const a=this.getLengths();return a[a.length-1]}getLengths(a=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const b=[];let h,n=this.getPoint(0),t=0;b.push(0);for(let C=
1;C<=a;C++)h=this.getPoint(C/a),t+=h.distanceTo(n),b.push(t),n=h;return this.cacheArcLengths=b}updateArcLengths(){this.needsUpdate=!0;this.getLengths()}getUtoTmapping(a,b){const h=this.getLengths(),n=h.length;b=b?b:a*h[n-1];var t=0;let C=n-1,G;for(;t<=C;)if(a=Math.floor(t+(C-t)/2),G=h[a]-b,0>G)t=a+1;else if(0<G)C=a-1;else{C=a;break}a=C;if(h[a]===b)return a/(n-1);t=h[a];return(a+(b-t)/(h[a+1]-t))/(n-1)}getTangent(a,b){var h=a-1E-4;a+=1E-4;0>h&&(h=0);1<a&&(a=1);h=this.getPoint(h);a=this.getPoint(a);
b=b||(h.isVector2?new La:new ka);b.copy(a).sub(h).normalize();return b}getTangentAt(a,b){a=this.getUtoTmapping(a);return this.getTangent(a,b)}computeFrenetFrames(a,b){var h=new ka;const n=[],t=[],C=[];var G=new ka;const I=new $b;for(var K=0;K<=a;K++)n[K]=this.getTangentAt(K/a,new ka);t[0]=new ka;C[0]=new ka;K=Number.MAX_VALUE;const M=Math.abs(n[0].x),T=Math.abs(n[0].y),U=Math.abs(n[0].z);M<=K&&(K=M,h.set(1,0,0));T<=K&&(K=T,h.set(0,1,0));U<=K&&h.set(0,0,1);G.crossVectors(n[0],h).normalize();t[0].crossVectors(n[0],
G);C[0].crossVectors(n[0],t[0]);for(h=1;h<=a;h++)t[h]=t[h-1].clone(),C[h]=C[h-1].clone(),G.crossVectors(n[h-1],n[h]),G.length()>Number.EPSILON&&(G.normalize(),K=Math.acos(m(n[h-1].dot(n[h]),-1,1)),t[h].applyMatrix4(I.makeRotationAxis(G,K))),C[h].crossVectors(n[h],t[h]);if(!0===b)for(b=Math.acos(m(t[0].dot(t[a]),-1,1)),b/=a,0<n[0].dot(G.crossVectors(t[0],t[a]))&&(b=-b),G=1;G<=a;G++)t[G].applyMatrix4(I.makeRotationAxis(n[G],b*G)),C[G].crossVectors(n[G],t[G]);return{tangents:n,normals:t,binormals:C}}clone(){return(new this.constructor).copy(this)}copy(a){this.arcLengthDivisions=
a.arcLengthDivisions;return this}toJSON(){const a={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};a.arcLengthDivisions=this.arcLengthDivisions;a.type=this.type;return a}fromJSON(a){this.arcLengthDivisions=a.arcLengthDivisions;return this}}class ih extends Vd{constructor(a=0,b=0,h=1,n=1,t=0,C=2*Math.PI,G=!1,I=0){super();this.isEllipseCurve=!0;this.type="EllipseCurve";this.aX=a;this.aY=b;this.xRadius=h;this.yRadius=n;this.aStartAngle=t;this.aEndAngle=C;this.aClockwise=G;this.aRotation=
I}getPoint(a,b){b=b||new La;for(var h=2*Math.PI,n=this.aEndAngle-this.aStartAngle,t=Math.abs(n)<Number.EPSILON;0>n;)n+=h;for(;n>h;)n-=h;n<Number.EPSILON&&(n=t?0:h);!0!==this.aClockwise||t||(n=n===h?-h:n-h);h=this.aStartAngle+a*n;a=this.aX+this.xRadius*Math.cos(h);var C=this.aY+this.yRadius*Math.sin(h);0!==this.aRotation&&(h=Math.cos(this.aRotation),n=Math.sin(this.aRotation),t=a-this.aX,C-=this.aY,a=t*h-C*n+this.aX,C=t*n+C*h+this.aY);return b.set(a,C)}copy(a){super.copy(a);this.aX=a.aX;this.aY=a.aY;
this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return this}toJSON(){const a=super.toJSON();a.aX=this.aX;a.aY=this.aY;a.xRadius=this.xRadius;a.yRadius=this.yRadius;a.aStartAngle=this.aStartAngle;a.aEndAngle=this.aEndAngle;a.aClockwise=this.aClockwise;a.aRotation=this.aRotation;return a}fromJSON(a){super.fromJSON(a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;
this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return this}}class Vj extends ih{constructor(a,b,h,n,t,C){super(a,b,h,h,n,t,C);this.isArcCurve=!0;this.type="ArcCurve"}}const jh=new ka,xi=new Be,yi=new Be,zi=new Be;class Wj extends Vd{constructor(a=[],b=!1,h="centripetal",n=.5){super();this.isCatmullRomCurve3=!0;this.type="CatmullRomCurve3";this.points=a;this.closed=b;this.curveType=h;this.tension=n}getPoint(a,b=new ka){var h=this.points,
n=h.length;a*=n-(this.closed?0:1);var t=Math.floor(a);a-=t;this.closed?t+=0<t?0:(Math.floor(Math.abs(t)/n)+1)*n:0===a&&t===n-1&&(t=n-2,a=1);let C;this.closed||0<t?C=h[(t-1)%n]:(jh.subVectors(h[0],h[1]).add(h[0]),C=jh);const G=h[t%n],I=h[(t+1)%n];this.closed||t+2<n?h=h[(t+2)%n]:(jh.subVectors(h[n-1],h[n-2]).add(h[n-1]),h=jh);if("centripetal"===this.curveType||"chordal"===this.curveType){var K="chordal"===this.curveType?.5:.25;n=Math.pow(C.distanceToSquared(G),K);t=Math.pow(G.distanceToSquared(I),K);
K=Math.pow(I.distanceToSquared(h),K);1E-4>t&&(t=1);1E-4>n&&(n=t);1E-4>K&&(K=t);xi.initNonuniformCatmullRom(C.x,G.x,I.x,h.x,n,t,K);yi.initNonuniformCatmullRom(C.y,G.y,I.y,h.y,n,t,K);zi.initNonuniformCatmullRom(C.z,G.z,I.z,h.z,n,t,K)}else"catmullrom"===this.curveType&&(xi.initCatmullRom(C.x,G.x,I.x,h.x,this.tension),yi.initCatmullRom(C.y,G.y,I.y,h.y,this.tension),zi.initCatmullRom(C.z,G.z,I.z,h.z,this.tension));b.set(xi.calc(a),yi.calc(a),zi.calc(a));return b}copy(a){super.copy(a);this.points=[];for(let b=
0,h=a.points.length;b<h;b++)this.points.push(a.points[b].clone());this.closed=a.closed;this.curveType=a.curveType;this.tension=a.tension;return this}toJSON(){const a=super.toJSON();a.points=[];for(let b=0,h=this.points.length;b<h;b++)a.points.push(this.points[b].toArray());a.closed=this.closed;a.curveType=this.curveType;a.tension=this.tension;return a}fromJSON(a){super.fromJSON(a);this.points=[];for(let b=0,h=a.points.length;b<h;b++){const n=a.points[b];this.points.push((new ka).fromArray(n))}this.closed=
a.closed;this.curveType=a.curveType;this.tension=a.tension;return this}}class Ai extends Vd{constructor(a=new La,b=new La,h=new La,n=new La){super();this.isCubicBezierCurve=!0;this.type="CubicBezierCurve";this.v0=a;this.v1=b;this.v2=h;this.v3=n}getPoint(a,b=new La){const h=this.v0,n=this.v1,t=this.v2,C=this.v3;b.set(X(a,h.x,n.x,t.x,C.x),X(a,h.y,n.y,t.y,C.y));return b}copy(a){super.copy(a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return this}toJSON(){const a=super.toJSON();
a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();a.v3=this.v3.toArray();return a}fromJSON(a){super.fromJSON(a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return this}}class Xj extends Vd{constructor(a=new ka,b=new ka,h=new ka,n=new ka){super();this.isCubicBezierCurve3=!0;this.type="CubicBezierCurve3";this.v0=a;this.v1=b;this.v2=h;this.v3=n}getPoint(a,b=new ka){const h=this.v0,n=this.v1,t=this.v2,C=this.v3;b.set(X(a,h.x,n.x,t.x,
C.x),X(a,h.y,n.y,t.y,C.y),X(a,h.z,n.z,t.z,C.z));return b}copy(a){super.copy(a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return this}toJSON(){const a=super.toJSON();a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();a.v3=this.v3.toArray();return a}fromJSON(a){super.fromJSON(a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return this}}class kh extends Vd{constructor(a=new La,b=new La){super();this.isLineCurve=
!0;this.type="LineCurve";this.v1=a;this.v2=b}getPoint(a,b=new La){1===a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return b}getPointAt(a,b){return this.getPoint(a,b)}getTangent(a,b=new La){return b.subVectors(this.v2,this.v1).normalize()}getTangentAt(a,b){return this.getTangent(a,b)}copy(a){super.copy(a);this.v1.copy(a.v1);this.v2.copy(a.v2);return this}toJSON(){const a=super.toJSON();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a}fromJSON(a){super.fromJSON(a);
this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this}}class Yj extends Vd{constructor(a=new ka,b=new ka){super();this.isLineCurve3=!0;this.type="LineCurve3";this.v1=a;this.v2=b}getPoint(a,b=new ka){1===a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return b}getPointAt(a,b){return this.getPoint(a,b)}getTangent(a,b=new ka){return b.subVectors(this.v2,this.v1).normalize()}getTangentAt(a,b){return this.getTangent(a,b)}copy(a){super.copy(a);this.v1.copy(a.v1);
this.v2.copy(a.v2);return this}toJSON(){const a=super.toJSON();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a}fromJSON(a){super.fromJSON(a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this}}class Bi extends Vd{constructor(a=new La,b=new La,h=new La){super();this.isQuadraticBezierCurve=!0;this.type="QuadraticBezierCurve";this.v0=a;this.v1=b;this.v2=h}getPoint(a,b=new La){const h=this.v0,n=this.v1,t=this.v2;b.set(ce(a,h.x,n.x,t.x),ce(a,h.y,n.y,t.y));return b}copy(a){super.copy(a);
this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return this}toJSON(){const a=super.toJSON();a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a}fromJSON(a){super.fromJSON(a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this}}class Ci extends Vd{constructor(a=new ka,b=new ka,h=new ka){super();this.isQuadraticBezierCurve3=!0;this.type="QuadraticBezierCurve3";this.v0=a;this.v1=b;this.v2=h}getPoint(a,b=new ka){const h=this.v0,n=this.v1,
t=this.v2;b.set(ce(a,h.x,n.x,t.x),ce(a,h.y,n.y,t.y),ce(a,h.z,n.z,t.z));return b}copy(a){super.copy(a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return this}toJSON(){const a=super.toJSON();a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a}fromJSON(a){super.fromJSON(a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this}}class Di extends Vd{constructor(a=[]){super();this.isSplineCurve=!0;this.type="SplineCurve";this.points=a}getPoint(a,
b=new La){var h=this.points,n=(h.length-1)*a;a=Math.floor(n);n-=a;const t=h[0===a?a:a-1],C=h[a],G=h[a>h.length-2?h.length-1:a+1];h=h[a>h.length-3?h.length-1:a+2];b.set(Oe(n,t.x,C.x,G.x,h.x),Oe(n,t.y,C.y,G.y,h.y));return b}copy(a){super.copy(a);this.points=[];for(let b=0,h=a.points.length;b<h;b++)this.points.push(a.points[b].clone());return this}toJSON(){const a=super.toJSON();a.points=[];for(let b=0,h=this.points.length;b<h;b++)a.points.push(this.points[b].toArray());return a}fromJSON(a){super.fromJSON(a);
this.points=[];for(let b=0,h=a.points.length;b<h;b++){const n=a.points[b];this.points.push((new La).fromArray(n))}return this}}var Ei=Object.freeze({__proto__:null,ArcCurve:Vj,CatmullRomCurve3:Wj,CubicBezierCurve:Ai,CubicBezierCurve3:Xj,EllipseCurve:ih,LineCurve:kh,LineCurve3:Yj,QuadraticBezierCurve:Bi,QuadraticBezierCurve3:Ci,SplineCurve:Di});class Zj extends Vd{constructor(){super();this.type="CurvePath";this.curves=[];this.autoClose=!1}add(a){this.curves.push(a)}closePath(){const a=this.curves[0].getPoint(0),
b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new kh(b,a))}getPoint(a,b){var h=a*this.getLength(),n=this.getCurveLengths();for(a=0;a<n.length;){if(n[a]>=h)return h=n[a]-h,a=this.curves[a],n=a.getLength(),a.getPointAt(0===n?0:1-h/n,b);a++}return null}getLength(){const a=this.getCurveLengths();return a[a.length-1]}updateArcLengths(){this.needsUpdate=!0;this.cacheLengths=null;this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;
const a=[];let b=0;for(let h=0,n=this.curves.length;h<n;h++)b+=this.curves[h].getLength(),a.push(b);return this.cacheLengths=a}getSpacedPoints(a=40){const b=[];for(let h=0;h<=a;h++)b.push(this.getPoint(h/a));this.autoClose&&b.push(b[0]);return b}getPoints(a=12){const b=[];let h;for(let t=0,C=this.curves;t<C.length;t++){var n=C[t];n=n.getPoints(n.isEllipseCurve?2*a:n.isLineCurve||n.isLineCurve3?1:n.isSplineCurve?a*n.points.length:a);for(let G=0;G<n.length;G++){const I=n[G];h&&h.equals(I)||(b.push(I),
h=I)}}this.autoClose&&1<b.length&&!b[b.length-1].equals(b[0])&&b.push(b[0]);return b}copy(a){super.copy(a);this.curves=[];for(let b=0,h=a.curves.length;b<h;b++)this.curves.push(a.curves[b].clone());this.autoClose=a.autoClose;return this}toJSON(){const a=super.toJSON();a.autoClose=this.autoClose;a.curves=[];for(let b=0,h=this.curves.length;b<h;b++)a.curves.push(this.curves[b].toJSON());return a}fromJSON(a){super.fromJSON(a);this.autoClose=a.autoClose;this.curves=[];for(let b=0,h=a.curves.length;b<
h;b++){const n=a.curves[b];this.curves.push((new Ei[n.type]).fromJSON(n))}return this}}class ng extends Zj{constructor(a){super();this.type="Path";this.currentPoint=new La;a&&this.setFromPoints(a)}setFromPoints(a){this.moveTo(a[0].x,a[0].y);for(let b=1,h=a.length;b<h;b++)this.lineTo(a[b].x,a[b].y);return this}moveTo(a,b){this.currentPoint.set(a,b);return this}lineTo(a,b){const h=new kh(this.currentPoint.clone(),new La(a,b));this.curves.push(h);this.currentPoint.set(a,b);return this}quadraticCurveTo(a,
b,h,n){a=new Bi(this.currentPoint.clone(),new La(a,b),new La(h,n));this.curves.push(a);this.currentPoint.set(h,n);return this}bezierCurveTo(a,b,h,n,t,C){a=new Ai(this.currentPoint.clone(),new La(a,b),new La(h,n),new La(t,C));this.curves.push(a);this.currentPoint.set(t,C);return this}splineThru(a){var b=[this.currentPoint.clone()].concat(a);b=new Di(b);this.curves.push(b);this.currentPoint.copy(a[a.length-1]);return this}arc(a,b,h,n,t,C){this.absarc(a+this.currentPoint.x,b+this.currentPoint.y,h,n,
t,C);return this}absarc(a,b,h,n,t,C){this.absellipse(a,b,h,h,n,t,C);return this}ellipse(a,b,h,n,t,C,G,I){this.absellipse(a+this.currentPoint.x,b+this.currentPoint.y,h,n,t,C,G,I);return this}absellipse(a,b,h,n,t,C,G,I){a=new ih(a,b,h,n,t,C,G,I);0<this.curves.length&&(b=a.getPoint(0),b.equals(this.currentPoint)||this.lineTo(b.x,b.y));this.curves.push(a);a=a.getPoint(1);this.currentPoint.copy(a);return this}copy(a){super.copy(a);this.currentPoint.copy(a.currentPoint);return this}toJSON(){const a=super.toJSON();
a.currentPoint=this.currentPoint.toArray();return a}fromJSON(a){super.fromJSON(a);this.currentPoint.fromArray(a.currentPoint);return this}}class og extends gc{constructor(a=[new La(0,-.5),new La(.5,0),new La(0,.5)],b=12,h=0,n=2*Math.PI){super();this.type="LatheGeometry";this.parameters={points:a,segments:b,phiStart:h,phiLength:n};b=Math.floor(b);n=m(n,0,2*Math.PI);const t=[],C=[],G=[];var I=[];const K=[];var M=1/b,T=new ka,U=new La,V=new ka,ba=new ka,aa=new ka;let S;for(let va=0;va<=a.length-1;va++)switch(va){case 0:var ea=
a[va+1].x-a[va].x;S=a[va+1].y-a[va].y;V.x=1*S;V.y=-ea;V.z=0*S;aa.copy(V);V.normalize();I.push(V.x,V.y,V.z);break;case a.length-1:I.push(aa.x,aa.y,aa.z);break;default:ea=a[va+1].x-a[va].x,S=a[va+1].y-a[va].y,V.x=1*S,V.y=-ea,V.z=0*S,ba.copy(V),V.x+=aa.x,V.y+=aa.y,V.z+=aa.z,V.normalize(),I.push(V.x,V.y,V.z),aa.copy(ba)}for(V=0;V<=b;V++)for(aa=h+V*M*n,ba=Math.sin(aa),aa=Math.cos(aa),ea=0;ea<=a.length-1;ea++)T.x=a[ea].x*ba,T.y=a[ea].y,T.z=a[ea].x*aa,C.push(T.x,T.y,T.z),U.x=V/b,U.y=ea/(a.length-1),G.push(U.x,
U.y),K.push(I[3*ea]*ba,I[3*ea+1],I[3*ea]*aa);for(h=0;h<b;h++)for(n=0;n<a.length-1;n++)I=n+h*a.length,M=I+a.length,T=I+a.length+1,U=I+1,t.push(I,M,U),t.push(T,U,M);this.setIndex(t);this.setAttribute("position",new Cb(C,3));this.setAttribute("uv",new Cb(G,2));this.setAttribute("normal",new Cb(K,3))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new og(a.points,a.segments,a.phiStart,a.phiLength)}}class lh extends og{constructor(a=1,b=1,h=4,
n=8){const t=new ng;t.absarc(0,-b/2,a,1.5*Math.PI,0);t.absarc(0,b/2,a,0,.5*Math.PI);super(t.getPoints(h),n);this.type="CapsuleGeometry";this.parameters={radius:a,height:b,capSegments:h,radialSegments:n}}static fromJSON(a){return new lh(a.radius,a.length,a.capSegments,a.radialSegments)}}class mh extends gc{constructor(a=1,b=32,h=0,n=2*Math.PI){super();this.type="CircleGeometry";this.parameters={radius:a,segments:b,thetaStart:h,thetaLength:n};b=Math.max(3,b);const t=[],C=[],G=[],I=[],K=new ka,M=new La;
C.push(0,0,0);G.push(0,0,1);I.push(.5,.5);for(let T=0,U=3;T<=b;T++,U+=3){const V=h+T/b*n;K.x=a*Math.cos(V);K.y=a*Math.sin(V);C.push(K.x,K.y,K.z);G.push(0,0,1);M.x=(C[U]/a+1)/2;M.y=(C[U+1]/a+1)/2;I.push(M.x,M.y)}for(a=1;a<=b;a++)t.push(a,a+1,0);this.setIndex(t);this.setAttribute("position",new Cb(C,3));this.setAttribute("normal",new Cb(G,3));this.setAttribute("uv",new Cb(I,2))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new mh(a.radius,
a.segments,a.thetaStart,a.thetaLength)}}class Mf extends gc{constructor(a=1,b=1,h=1,n=32,t=1,C=!1,G=0,I=2*Math.PI){function K(ma){const wa=aa;var Ea=new La,ua=new ka;let Qa=0;var ya=!0===ma?a:b;const Ha=!0===ma?1:-1;for(var Ka=1;Ka<=n;Ka++)U.push(0,ea*Ha,0),V.push(0,Ha,0),ba.push(.5,.5),aa++;Ka=aa;for(let gb=0;gb<=n;gb++){var Ia=gb/n*I+G;const Za=Math.cos(Ia);Ia=Math.sin(Ia);ua.x=ya*Ia;ua.y=ea*Ha;ua.z=ya*Za;U.push(ua.x,ua.y,ua.z);V.push(0,Ha,0);Ea.x=.5*Za+.5;Ea.y=.5*Ia*Ha+.5;ba.push(Ea.x,Ea.y);aa++}for(Ea=
0;Ea<n;Ea++)ua=wa+Ea,ya=Ka+Ea,!0===ma?T.push(ya,ya+1,ua):T.push(ya+1,ya,ua),Qa+=3;M.addGroup(va,Qa,!0===ma?1:2);va+=Qa}super();this.type="CylinderGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:h,radialSegments:n,heightSegments:t,openEnded:C,thetaStart:G,thetaLength:I};const M=this;n=Math.floor(n);t=Math.floor(t);const T=[],U=[],V=[],ba=[];let aa=0;const S=[],ea=h/2;let va=0;(function(){var ma=new ka,wa=new ka;let Ea=0;var ua=(b-a)/h;for(var Qa=0;Qa<=t;Qa++){var ya=[];const Ka=Qa/t,Ia=
Ka*(b-a)+a;for(let gb=0;gb<=n;gb++){const Za=gb/n;var Ha=Za*I+G;const db=Math.sin(Ha);Ha=Math.cos(Ha);wa.x=Ia*db;wa.y=-Ka*h+ea;wa.z=Ia*Ha;U.push(wa.x,wa.y,wa.z);ma.set(db,ua,Ha).normalize();V.push(ma.x,ma.y,ma.z);ba.push(Za,1-Ka);ya.push(aa++)}S.push(ya)}for(ma=0;ma<n;ma++)for(wa=0;wa<t;wa++)ua=S[wa+1][ma],Qa=S[wa+1][ma+1],ya=S[wa][ma+1],T.push(S[wa][ma],ua,ya),T.push(ua,Qa,ya),Ea+=6;M.addGroup(va,Ea,0);va+=Ea})();!1===C&&(0<a&&K(!0),0<b&&K(!1));this.setIndex(T);this.setAttribute("position",new Cb(U,
3));this.setAttribute("normal",new Cb(V,3));this.setAttribute("uv",new Cb(ba,2))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new Mf(a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength)}}class nh extends Mf{constructor(a=1,b=1,h=32,n=1,t=!1,C=0,G=2*Math.PI){super(0,a,b,h,n,t,C,G);this.type="ConeGeometry";this.parameters={radius:a,height:b,radialSegments:h,heightSegments:n,openEnded:t,
thetaStart:C,thetaLength:G}}static fromJSON(a){return new nh(a.radius,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength)}}class Ke extends gc{constructor(a=[],b=[],h=1,n=0){function t(M){I.push(M.x,M.y,M.z)}function C(M,T){M*=3;T.x=a[M+0];T.y=a[M+1];T.z=a[M+2]}function G(M,T,U,V){0>V&&1===M.x&&(K[T]=M.x-1);0===U.x&&0===U.z&&(K[T]=V/2/Math.PI+.5)}super();this.type="PolyhedronGeometry";this.parameters={vertices:a,indices:b,radius:h,detail:n};const I=[],K=[];(function(M){const T=
new ka,U=new ka,V=new ka;for(let ea=0;ea<b.length;ea+=3){C(b[ea+0],T);C(b[ea+1],U);C(b[ea+2],V);var ba=T,aa=U,S=V;const va=M+1,ma=[];for(let wa=0;wa<=va;wa++){ma[wa]=[];const Ea=ba.clone().lerp(S,wa/va),ua=aa.clone().lerp(S,wa/va),Qa=va-wa;for(let ya=0;ya<=Qa;ya++)ma[wa][ya]=0===ya&&wa===va?Ea:Ea.clone().lerp(ua,ya/Qa)}for(ba=0;ba<va;ba++)for(aa=0;aa<2*(va-ba)-1;aa++)S=Math.floor(aa/2),0===aa%2?(t(ma[ba][S+1]),t(ma[ba+1][S]),t(ma[ba][S])):(t(ma[ba][S+1]),t(ma[ba+1][S+1]),t(ma[ba+1][S]))}})(n);(function(M){const T=
new ka;for(let U=0;U<I.length;U+=3)T.x=I[U+0],T.y=I[U+1],T.z=I[U+2],T.normalize().multiplyScalar(M),I[U+0]=T.x,I[U+1]=T.y,I[U+2]=T.z})(h);(function(){var M=new ka;for(var T=0;T<I.length;T+=3)M.x=I[T+0],M.y=I[T+1],M.z=I[T+2],K.push(Math.atan2(M.z,-M.x)/2/Math.PI+.5,1-(Math.atan2(-M.y,Math.sqrt(M.x*M.x+M.z*M.z))/Math.PI+.5));M=new ka;T=new ka;var U=new ka,V=new ka,ba=new La;const aa=new La,S=new La;for(let ea=0,va=0;ea<I.length;ea+=9,va+=6){M.set(I[ea+0],I[ea+1],I[ea+2]);T.set(I[ea+3],I[ea+4],I[ea+
5]);U.set(I[ea+6],I[ea+7],I[ea+8]);ba.set(K[va+0],K[va+1]);aa.set(K[va+2],K[va+3]);S.set(K[va+4],K[va+5]);V.copy(M).add(T).add(U).divideScalar(3);const ma=Math.atan2(V.z,-V.x);G(ba,va+0,M,ma);G(aa,va+2,T,ma);G(S,va+4,U,ma)}for(M=0;M<K.length;M+=6)T=K[M+0],U=K[M+2],V=K[M+4],ba=Math.min(T,U,V),.9<Math.max(T,U,V)&&.1>ba&&(.2>T&&(K[M+0]+=1),.2>U&&(K[M+2]+=1),.2>V&&(K[M+4]+=1))})();this.setAttribute("position",new Cb(I,3));this.setAttribute("normal",new Cb(I.slice(),3));this.setAttribute("uv",new Cb(K,
2));0===n?this.computeVertexNormals():this.normalizeNormals()}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new Ke(a.vertices,a.indices,a.radius,a.details)}}class oh extends Ke{constructor(a=1,b=0){const h=(1+Math.sqrt(5))/2,n=1/h;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-h,0,-n,h,0,n,-h,0,n,h,-n,-h,0,-n,h,0,n,-h,0,n,h,0,-h,0,-n,h,0,-n,-h,0,n,h,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,
10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,b);this.type="DodecahedronGeometry";this.parameters={radius:a,detail:b}}static fromJSON(a){return new oh(a.radius,a.detail)}}const ph=new ka,qh=new ka,Fi=new ka,rh=new Qd;class ak extends gc{constructor(a=null,b=1){super();this.type="EdgesGeometry";this.parameters={geometry:a,thresholdAngle:b};
if(null!==a){const n=Math.pow(10,4);b=Math.cos(Aa*b);const t=a.getIndex();a=a.getAttribute("position");const C=t?t.count:a.count,G=[0,0,0],I=["a","b","c"],K=Array(3),M={},T=[];for(let U=0;U<C;U+=3){t?(G[0]=t.getX(U),G[1]=t.getX(U+1),G[2]=t.getX(U+2)):(G[0]=U,G[1]=U+1,G[2]=U+2);const {a:V,b:ba,c:aa}=rh;V.fromBufferAttribute(a,G[0]);ba.fromBufferAttribute(a,G[1]);aa.fromBufferAttribute(a,G[2]);rh.getNormal(Fi);K[0]=`${Math.round(V.x*n)},${Math.round(V.y*n)},${Math.round(V.z*n)}`;K[1]=`${Math.round(ba.x*
n)},${Math.round(ba.y*n)},${Math.round(ba.z*n)}`;K[2]=`${Math.round(aa.x*n)},${Math.round(aa.y*n)},${Math.round(aa.z*n)}`;if(K[0]!==K[1]&&K[1]!==K[2]&&K[2]!==K[0])for(let S=0;3>S;S++){const ea=(S+1)%3;var h=K[S];const va=K[ea],ma=rh[I[S]],wa=rh[I[ea]],Ea=`${h}_${va}`;h=`${va}_${h}`;h in M&&M[h]?(Fi.dot(M[h].normal)<=b&&(T.push(ma.x,ma.y,ma.z),T.push(wa.x,wa.y,wa.z)),M[h]=null):Ea in M||(M[Ea]={index0:G[S],index1:G[ea],normal:Fi.clone()})}}for(const U in M)if(M[U]){const {index0:V,index1:ba}=M[U];
ph.fromBufferAttribute(a,V);qh.fromBufferAttribute(a,ba);T.push(ph.x,ph.y,ph.z);T.push(qh.x,qh.y,qh.z)}this.setAttribute("position",new Cb(T,3))}}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}}class cf extends ng{constructor(a){super(a);this.uuid=q();this.type="Shape";this.holes=[]}getPointsHoles(a){const b=[];for(let h=0,n=this.holes.length;h<n;h++)b[h]=this.holes[h].getPoints(a);return b}extractPoints(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}}copy(a){super.copy(a);
this.holes=[];for(let b=0,h=a.holes.length;b<h;b++)this.holes.push(a.holes[b].clone());return this}toJSON(){const a=super.toJSON();a.uuid=this.uuid;a.holes=[];for(let b=0,h=this.holes.length;b<h;b++)a.holes.push(this.holes[b].toJSON());return a}fromJSON(a){super.fromJSON(a);this.uuid=a.uuid;this.holes=[];for(let b=0,h=a.holes.length;b<h;b++){const n=a.holes[b];this.holes.push((new ng).fromJSON(n))}return this}}const Jl={triangulate:function(a,b,h=2){var n=b&&b.length;const t=n?b[0]*h:a.length;var C=
E(a,0,t,h,!0);const G=[];if(!C||C.next===C.prev)return G;let I,K;var M;if(n){var T=C;C=[];var U;n=0;for(U=b.length;n<U;n++){var V=b[n]*h;var ba=n<U-1?b[n+1]*h:a.length;var aa=E(a,V,ba,h,!1);aa===aa.next&&(aa.steiner=!0);V=C;ba=V.push;var S=aa,ea=aa;do{if(S.x<ea.x||S.x===ea.x&&S.y<ea.y)ea=S;S=S.next}while(S!==aa);ba.call(V,ea)}C.sort(P);for(n=0;n<C.length;n++){U=void 0;b=C[n];b:{V=T;ba=-Infinity;aa=b.x;S=b.y;do{if(S<=V.y&&S>=V.next.y&&V.next.y!==V.y&&(ea=V.x+(S-V.y)*(V.next.x-V.x)/(V.next.y-V.y),ea<=
aa&&ea>ba&&(ba=ea,U=V.x<V.next.x?V:V.next,ea===aa)))break b;V=V.next}while(V!==T);if(U){var va=U,ma=U.x,wa=U.y,Ea=Infinity;V=U;do{if(aa>=V.x&&V.x>=ma&&aa!==V.x&&Ba(S<wa?aa:ba,S,ma,wa,S<wa?ba:aa,S,V.x,V.y)){ea=Math.abs(S-V.y)/(aa-V.x);var ua;if((ua=ud(V,b))&&!(ua=ea<Ea)&&(ua=ea===Ea)&&!(ua=V.x>U.x)&&(ua=V.x===U.x)){ua=U;var Qa=V;ua=0>ib(ua.prev,ua,Qa.prev)&&0>ib(Qa.next,ua,ua.next)}ua&&(U=V,Ea=ea)}V=V.next}while(V!==va)}else U=null}U&&(b=vd(U,b),x(b,b.next),T=x(U,U.next))}C=T}if(a.length>80*h){I=M=
a[0];K=n=a[1];for(U=h;U<t;U+=h)b=a[U],T=a[U+1],b<I&&(I=b),T<K&&(K=T),b>M&&(M=b),T>n&&(n=T);M=Math.max(M-I,n-K);M=0!==M?32767/M:0}d(C,G,h,I,K,M,0);return G}};class ve{static area(a){const b=a.length;let h=0;for(let n=b-1,t=0;t<b;n=t++)h+=a[n].x*a[t].y-a[t].x*a[n].y;return.5*h}static isClockWise(a){return 0>ve.area(a)}static triangulateShape(a,b){var h=[];const n=[],t=[];Hg(a);Ig(h,a);a=a.length;b.forEach(Hg);for(let C=0;C<b.length;C++)n.push(a),a+=b[C].length,Ig(h,b[C]);b=Jl.triangulate(h,n);for(h=
0;h<b.length;h+=3)t.push(b.slice(h,h+3));return t}}class sh extends gc{constructor(a=new cf([new La(.5,.5),new La(-.5,.5),new La(-.5,-.5),new La(.5,-.5)]),b={}){function h(G){function I(ha,qa,ta){qa||console.error("THREE.ExtrudeGeometry: vec does not exist");return ha.clone().addScaledVector(qa,ta)}function K(ha,qa,ta){var Ca=ha.x-qa.x;var lb=ha.y-qa.y;var sa=ta.x-ha.x;var Ma=ta.y-ha.y,Sa=Ca*Ca+lb*lb;if(Math.abs(Ca*Ma-lb*sa)>Number.EPSILON){const Va=Math.sqrt(Sa),fb=Math.sqrt(sa*sa+Ma*Ma);Sa=qa.x-
lb/Va;qa=qa.y+Ca/Va;Ma=((ta.x-Ma/fb-Sa)*Ma-(ta.y+sa/fb-qa)*sa)/(Ca*Ma-lb*sa);sa=Sa+Ca*Ma-ha.x;Ca=qa+lb*Ma-ha.y;lb=sa*sa+Ca*Ca;if(2>=lb)return new La(sa,Ca);lb=Math.sqrt(lb/2)}else ha=!1,Ca>Number.EPSILON?sa>Number.EPSILON&&(ha=!0):Ca<-Number.EPSILON?sa<-Number.EPSILON&&(ha=!0):Math.sign(lb)===Math.sign(Ma)&&(ha=!0),ha?(sa=-lb,lb=Math.sqrt(Sa)):(sa=Ca,Ca=lb,lb=Math.sqrt(Sa/2));return new La(sa/lb,Ca/lb)}function M(ha,qa){let ta=ha.length;for(;0<=--ta;){const Ma=ta;let Sa=ta-1;0>Sa&&(Sa=ha.length-1);
for(let Va=0,fb=ea+2*Qa;Va<fb;Va++){const tb=Tb*Va;var Ca=Tb*(Va+1),lb=qa+Sa+tb,sa=qa+Sa+Ca;Ca=qa+Ma+Ca;V(qa+Ma+tb);V(lb);V(Ca);V(lb);V(sa);V(Ca);lb=t.length/3;lb=Ha.generateSideWallUV(n,t,lb-6,lb-3,lb-2,lb-1);ba(lb[0]);ba(lb[1]);ba(lb[3]);ba(lb[1]);ba(lb[2]);ba(lb[3])}}}function T(ha,qa,ta){aa.push(ha);aa.push(qa);aa.push(ta)}function U(ha,qa,ta){V(ha);V(qa);V(ta);ha=t.length/3;ha=Ha.generateTopUV(n,t,ha-3,ha-2,ha-1);ba(ha[0]);ba(ha[1]);ba(ha[2])}function V(ha){t.push(aa[3*ha]);t.push(aa[3*ha+1]);
t.push(aa[3*ha+2])}function ba(ha){C.push(ha.x);C.push(ha.y)}const aa=[];var S=void 0!==b.curveSegments?b.curveSegments:12;const ea=void 0!==b.steps?b.steps:1,va=void 0!==b.depth?b.depth:1;let ma=void 0!==b.bevelEnabled?b.bevelEnabled:!0,wa=void 0!==b.bevelThickness?b.bevelThickness:.2,Ea=void 0!==b.bevelSize?b.bevelSize:wa-.1,ua=void 0!==b.bevelOffset?b.bevelOffset:0,Qa=void 0!==b.bevelSegments?b.bevelSegments:3;var ya=b.extrudePath;const Ha=void 0!==b.UVGenerator?b.UVGenerator:Kl;let Ka,Ia=!1;if(ya){Ka=
ya.getSpacedPoints(ea);Ia=!0;ma=!1;var gb=ya.computeFrenetFrames(ea,!1);var Za=new ka;var db=new ka;var bb=new ka}ma||(ua=Ea=wa=Qa=0);G=G.extractPoints(S);ya=G.shape;const rb=G.holes;if(!ve.isClockWise(ya)){ya=ya.reverse();for(let ha=0,qa=rb.length;ha<qa;ha++)G=rb[ha],ve.isClockWise(G)&&(rb[ha]=G.reverse())}const Bb=ve.triangulateShape(ya,rb),Kb=ya;for(let ha=0,qa=rb.length;ha<qa;ha++)ya=ya.concat(rb[ha]);const Tb=ya.length,eb=Bb.length;G=[];for(let ha=0,qa=Kb.length,ta=qa-1,Ca=ha+1;ha<qa;ha++,ta++,
Ca++)ta===qa&&(ta=0),Ca===qa&&(Ca=0),G[ha]=K(Kb[ha],Kb[ta],Kb[Ca]);S=[];let nb=G.concat();for(let ha=0,qa=rb.length;ha<qa;ha++){var qb=rb[ha];var Hb=[];for(let ta=0,Ca=qb.length,lb=Ca-1,sa=ta+1;ta<Ca;ta++,lb++,sa++)lb===Ca&&(lb=0),sa===Ca&&(sa=0),Hb[ta]=K(qb[ta],qb[lb],qb[sa]);S.push(Hb);nb=nb.concat(Hb)}for(qb=0;qb<Qa;qb++){Hb=qb/Qa;var Ab=wa*Math.cos(Hb*Math.PI/2),ia=Ea*Math.sin(Hb*Math.PI/2)+ua;for(let ha=0,qa=Kb.length;ha<qa;ha++)Hb=I(Kb[ha],G[ha],ia),T(Hb.x,Hb.y,-Ab);for(let ha=0,qa=rb.length;ha<
qa;ha++){const ta=rb[ha];Hb=S[ha];for(let Ca=0,lb=ta.length;Ca<lb;Ca++){const sa=I(ta[Ca],Hb[Ca],ia);T(sa.x,sa.y,-Ab)}}}Hb=Ea+ua;for(qb=0;qb<Tb;qb++)Ab=ma?I(ya[qb],nb[qb],Hb):ya[qb],Ia?(db.copy(gb.normals[0]).multiplyScalar(Ab.x),Za.copy(gb.binormals[0]).multiplyScalar(Ab.y),bb.copy(Ka[0]).add(db).add(Za),T(bb.x,bb.y,bb.z)):T(Ab.x,Ab.y,0);for(qb=1;qb<=ea;qb++)for(Ab=0;Ab<Tb;Ab++)ia=ma?I(ya[Ab],nb[Ab],Hb):ya[Ab],Ia?(db.copy(gb.normals[qb]).multiplyScalar(ia.x),Za.copy(gb.binormals[qb]).multiplyScalar(ia.y),
bb.copy(Ka[qb]).add(db).add(Za),T(bb.x,bb.y,bb.z)):T(ia.x,ia.y,va/ea*qb);for(gb=Qa-1;0<=gb;gb--){db=gb/Qa;Za=wa*Math.cos(db*Math.PI/2);db=Ea*Math.sin(db*Math.PI/2)+ua;for(let ha=0,qa=Kb.length;ha<qa;ha++)bb=I(Kb[ha],G[ha],db),T(bb.x,bb.y,va+Za);for(let ha=0,qa=rb.length;ha<qa;ha++){bb=rb[ha];Hb=S[ha];for(let ta=0,Ca=bb.length;ta<Ca;ta++)ya=I(bb[ta],Hb[ta],db),Ia?T(ya.x,ya.y+Ka[ea-1].y,Ka[ea-1].x+Za):T(ya.x,ya.y,va+Za)}}(function(){const ha=t.length/3;if(ma){var qa=0*Tb;for(var ta=0;ta<eb;ta++){var Ca=
Bb[ta];U(Ca[2]+qa,Ca[1]+qa,Ca[0]+qa)}qa=Tb*(ea+2*Qa);for(ta=0;ta<eb;ta++)Ca=Bb[ta],U(Ca[0]+qa,Ca[1]+qa,Ca[2]+qa)}else{for(qa=0;qa<eb;qa++)ta=Bb[qa],U(ta[2],ta[1],ta[0]);for(qa=0;qa<eb;qa++)ta=Bb[qa],U(ta[0]+Tb*ea,ta[1]+Tb*ea,ta[2]+Tb*ea)}n.addGroup(ha,t.length/3-ha,0)})();(function(){const ha=t.length/3;let qa=0;M(Kb,qa);qa+=Kb.length;for(let ta=0,Ca=rb.length;ta<Ca;ta++){const lb=rb[ta];M(lb,qa);qa+=lb.length}n.addGroup(ha,t.length/3-ha,1)})()}super();this.type="ExtrudeGeometry";this.parameters=
{shapes:a,options:b};a=Array.isArray(a)?a:[a];const n=this,t=[],C=[];for(let G=0,I=a.length;G<I;G++)h(a[G]);this.setAttribute("position",new Cb(t,3));this.setAttribute("uv",new Cb(C,2));this.computeVertexNormals()}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}toJSON(){const a=super.toJSON();var b=this.parameters.shapes,h=this.parameters.options;a.shapes=[];if(Array.isArray(b))for(let n=0,t=b.length;n<t;n++)a.shapes.push(b[n].uuid);else a.shapes.push(b.uuid);a.options=
Object.assign({},h);void 0!==h.extrudePath&&(a.options.extrudePath=h.extrudePath.toJSON());return a}static fromJSON(a,b){const h=[];for(let n=0,t=a.shapes.length;n<t;n++)h.push(b[a.shapes[n]]);b=a.options.extrudePath;void 0!==b&&(a.options.extrudePath=(new Ei[b.type]).fromJSON(b));return new sh(h,a.options)}}const Kl={generateTopUV:function(a,b,h,n,t){a=b[3*n];n=b[3*n+1];const C=b[3*t];t=b[3*t+1];return[new La(b[3*h],b[3*h+1]),new La(a,n),new La(C,t)]},generateSideWallUV:function(a,b,h,n,t,C){a=b[3*
h];const G=b[3*h+1];h=b[3*h+2];const I=b[3*n],K=b[3*n+1];n=b[3*n+2];const M=b[3*t],T=b[3*t+1];t=b[3*t+2];const U=b[3*C],V=b[3*C+1];b=b[3*C+2];return Math.abs(G-K)<Math.abs(a-I)?[new La(a,1-h),new La(I,1-n),new La(M,1-t),new La(U,1-b)]:[new La(G,1-h),new La(K,1-n),new La(T,1-t),new La(V,1-b)]}};class th extends Ke{constructor(a=1,b=0){const h=(1+Math.sqrt(5))/2;super([-1,h,0,1,h,0,-1,-h,0,1,-h,0,0,-1,h,0,1,h,0,-1,-h,0,1,-h,h,0,-1,h,0,1,-h,0,-1,-h,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,
4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b);this.type="IcosahedronGeometry";this.parameters={radius:a,detail:b}}static fromJSON(a){return new th(a.radius,a.detail)}}class pg extends Ke{constructor(a=1,b=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b);this.type="OctahedronGeometry";this.parameters={radius:a,detail:b}}static fromJSON(a){return new pg(a.radius,a.detail)}}class uh extends gc{constructor(a=
.5,b=1,h=32,n=1,t=0,C=2*Math.PI){super();this.type="RingGeometry";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:h,phiSegments:n,thetaStart:t,thetaLength:C};h=Math.max(3,h);n=Math.max(1,n);const G=[],I=[],K=[],M=[];var T=a;a=(b-a)/n;var U=new ka,V=new La;for(let ba=0;ba<=n;ba++){for(let aa=0;aa<=h;aa++){const S=t+aa/h*C;U.x=T*Math.cos(S);U.y=T*Math.sin(S);I.push(U.x,U.y,U.z);K.push(0,0,1);V.x=(U.x/b+1)/2;V.y=(U.y/b+1)/2;M.push(V.x,V.y)}T+=a}for(b=0;b<n;b++)for(t=b*(h+1),C=0;C<h;C++)T=
C+t,a=T+h+1,U=T+h+2,V=T+1,G.push(T,a,V),G.push(a,U,V);this.setIndex(G);this.setAttribute("position",new Cb(I,3));this.setAttribute("normal",new Cb(K,3));this.setAttribute("uv",new Cb(M,2))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new uh(a.innerRadius,a.outerRadius,a.thetaSegments,a.phiSegments,a.thetaStart,a.thetaLength)}}class vh extends gc{constructor(a=new cf([new La(0,.5),new La(-.5,-.5),new La(.5,-.5)]),b=12){function h(M){const T=
t.length/3;var U=M.extractPoints(b);M=U.shape;var V=U.holes;!1===ve.isClockWise(M)&&(M=M.reverse());for(let ba=0,aa=V.length;ba<aa;ba++)U=V[ba],!0===ve.isClockWise(U)&&(V[ba]=U.reverse());U=ve.triangulateShape(M,V);for(let ba=0,aa=V.length;ba<aa;ba++)M=M.concat(V[ba]);for(let ba=0,aa=M.length;ba<aa;ba++)V=M[ba],t.push(V.x,V.y,0),C.push(0,0,1),G.push(V.x,V.y);for(let ba=0,aa=U.length;ba<aa;ba++)M=U[ba],n.push(M[0]+T,M[1]+T,M[2]+T),K+=3}super();this.type="ShapeGeometry";this.parameters={shapes:a,curveSegments:b};
const n=[],t=[],C=[],G=[];let I=0,K=0;if(!1===Array.isArray(a))h(a);else for(let M=0;M<a.length;M++)h(a[M]),this.addGroup(I,K,M),I+=K,K=0;this.setIndex(n);this.setAttribute("position",new Cb(t,3));this.setAttribute("normal",new Cb(C,3));this.setAttribute("uv",new Cb(G,2))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}toJSON(){const a=super.toJSON();var b=this.parameters.shapes;a.shapes=[];if(Array.isArray(b))for(let h=0,n=b.length;h<n;h++)a.shapes.push(b[h].uuid);
else a.shapes.push(b.uuid);return a}static fromJSON(a,b){const h=[];for(let n=0,t=a.shapes.length;n<t;n++)h.push(b[a.shapes[n]]);return new vh(h,a.curveSegments)}}class qg extends gc{constructor(a=1,b=32,h=16,n=0,t=2*Math.PI,C=0,G=Math.PI){super();this.type="SphereGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:h,phiStart:n,phiLength:t,thetaStart:C,thetaLength:G};b=Math.max(3,Math.floor(b));h=Math.max(2,Math.floor(h));const I=Math.min(C+G,Math.PI);var K=0;const M=[];var T=new ka;
const U=new ka,V=[],ba=[],aa=[],S=[];for(let ea=0;ea<=h;ea++){const va=[],ma=ea/h;let wa=0;0==ea&&0==C?wa=.5/b:ea==h&&I==Math.PI&&(wa=-.5/b);for(let Ea=0;Ea<=b;Ea++){const ua=Ea/b;T.x=-a*Math.cos(n+ua*t)*Math.sin(C+ma*G);T.y=a*Math.cos(C+ma*G);T.z=a*Math.sin(n+ua*t)*Math.sin(C+ma*G);ba.push(T.x,T.y,T.z);U.copy(T).normalize();aa.push(U.x,U.y,U.z);S.push(ua+wa,1-ma);va.push(K++)}M.push(va)}for(a=0;a<h;a++)for(n=0;n<b;n++)t=M[a][n+1],G=M[a][n],K=M[a+1][n],T=M[a+1][n+1],(0!==a||0<C)&&V.push(t,G,T),(a!==
h-1||I<Math.PI)&&V.push(G,K,T);this.setIndex(V);this.setAttribute("position",new Cb(ba,3));this.setAttribute("normal",new Cb(aa,3));this.setAttribute("uv",new Cb(S,2))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new qg(a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength)}}class wh extends Ke{constructor(a=1,b=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type="TetrahedronGeometry";
this.parameters={radius:a,detail:b}}static fromJSON(a){return new wh(a.radius,a.detail)}}class xh extends gc{constructor(a=1,b=.4,h=12,n=48,t=2*Math.PI){super();this.type="TorusGeometry";this.parameters={radius:a,tube:b,radialSegments:h,tubularSegments:n,arc:t};h=Math.floor(h);n=Math.floor(n);const C=[],G=[],I=[],K=[];var M=new ka,T=new ka;const U=new ka;for(let V=0;V<=h;V++)for(let ba=0;ba<=n;ba++){const aa=ba/n*t,S=V/h*Math.PI*2;T.x=(a+b*Math.cos(S))*Math.cos(aa);T.y=(a+b*Math.cos(S))*Math.sin(aa);
T.z=b*Math.sin(S);G.push(T.x,T.y,T.z);M.x=a*Math.cos(aa);M.y=a*Math.sin(aa);U.subVectors(T,M).normalize();I.push(U.x,U.y,U.z);K.push(ba/n);K.push(V/h)}for(a=1;a<=h;a++)for(b=1;b<=n;b++)t=(n+1)*(a-1)+b-1,M=(n+1)*(a-1)+b,T=(n+1)*a+b,C.push((n+1)*a+b-1,t,T),C.push(t,M,T);this.setIndex(C);this.setAttribute("position",new Cb(G,3));this.setAttribute("normal",new Cb(I,3));this.setAttribute("uv",new Cb(K,2))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new xh(a.radius,
a.tube,a.radialSegments,a.tubularSegments,a.arc)}}class yh extends gc{constructor(a=1,b=.4,h=64,n=8,t=2,C=3){function G(Ea,ua,Qa,ya,Ha){const Ka=Math.sin(Ea);ua=Qa/ua*Ea;Qa=Math.cos(ua);Ha.x=ya*(2+Qa)*.5*Math.cos(Ea);Ha.y=ya*(2+Qa)*Ka*.5;Ha.z=ya*Math.sin(ua)*.5}super();this.type="TorusKnotGeometry";this.parameters={radius:a,tube:b,tubularSegments:h,radialSegments:n,p:t,q:C};h=Math.floor(h);n=Math.floor(n);const I=[],K=[],M=[],T=[];var U=new ka;const V=new ka,ba=new ka,aa=new ka,S=new ka,ea=new ka,
va=new ka;for(let Ea=0;Ea<=h;++Ea){var ma=Ea/h*t*Math.PI*2;G(ma,t,C,a,ba);G(ma+.01,t,C,a,aa);ea.subVectors(aa,ba);va.addVectors(aa,ba);S.crossVectors(ea,va);va.crossVectors(S,ea);S.normalize();va.normalize();for(ma=0;ma<=n;++ma){var wa=ma/n*Math.PI*2;const ua=-b*Math.cos(wa);wa=b*Math.sin(wa);U.x=ba.x+(ua*va.x+wa*S.x);U.y=ba.y+(ua*va.y+wa*S.y);U.z=ba.z+(ua*va.z+wa*S.z);K.push(U.x,U.y,U.z);V.subVectors(U,ba).normalize();M.push(V.x,V.y,V.z);T.push(Ea/h);T.push(ma/n)}}for(a=1;a<=h;a++)for(b=1;b<=n;b++)t=
(n+1)*a+(b-1),C=(n+1)*a+b,U=(n+1)*(a-1)+b,I.push((n+1)*(a-1)+(b-1),t,U),I.push(t,C,U);this.setIndex(I);this.setAttribute("position",new Cb(K,3));this.setAttribute("normal",new Cb(M,3));this.setAttribute("uv",new Cb(T,2))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new yh(a.radius,a.tube,a.tubularSegments,a.radialSegments,a.p,a.q)}}class zh extends gc{constructor(a=new Ci(new ka(-1,-1,0),new ka(-1,1,0),new ka(1,1,0)),b=64,h=1,n=8,t=!1){function C(S){T=
a.getPointAt(S/b,T);const ea=G.normals[S];S=G.binormals[S];for(let ma=0;ma<=n;ma++){var va=ma/n*Math.PI*2;const wa=Math.sin(va);va=-Math.cos(va);K.x=va*ea.x+wa*S.x;K.y=va*ea.y+wa*S.y;K.z=va*ea.z+wa*S.z;K.normalize();V.push(K.x,K.y,K.z);I.x=T.x+h*K.x;I.y=T.y+h*K.y;I.z=T.z+h*K.z;U.push(I.x,I.y,I.z)}}super();this.type="TubeGeometry";this.parameters={path:a,tubularSegments:b,radius:h,radialSegments:n,closed:t};const G=a.computeFrenetFrames(b,t);this.tangents=G.tangents;this.normals=G.normals;this.binormals=
G.binormals;const I=new ka,K=new ka,M=new La;let T=new ka;const U=[],V=[],ba=[],aa=[];(function(){for(var S=0;S<b;S++)C(S);C(!1===t?b:0);for(S=0;S<=b;S++)for(var ea=0;ea<=n;ea++)M.x=S/b,M.y=ea/n,ba.push(M.x,M.y);for(S=1;S<=b;S++)for(ea=1;ea<=n;ea++){const va=(n+1)*S+(ea-1),ma=(n+1)*S+ea,wa=(n+1)*(S-1)+ea;aa.push((n+1)*(S-1)+(ea-1),va,wa);aa.push(va,ma,wa)}})();this.setIndex(aa);this.setAttribute("position",new Cb(U,3));this.setAttribute("normal",new Cb(V,3));this.setAttribute("uv",new Cb(ba,2))}copy(a){super.copy(a);
this.parameters=Object.assign({},a.parameters);return this}toJSON(){const a=super.toJSON();a.path=this.parameters.path.toJSON();return a}static fromJSON(a){return new zh((new Ei[a.path.type]).fromJSON(a.path),a.tubularSegments,a.radius,a.radialSegments,a.closed)}}class bk extends gc{constructor(a=null){super();this.type="WireframeGeometry";this.parameters={geometry:a};if(null!==a){const C=[],G=new Set,I=new ka,K=new ka;if(null!==a.index){var b=a.attributes.position,h=a.index;a=a.groups;0===a.length&&
(a=[{start:0,count:h.count,materialIndex:0}]);for(let M=0,T=a.length;M<T;++M){var n=a[M],t=n.start;n=n.count;for(let U=t,V=t+n;U<V;U+=3)for(t=0;3>t;t++){n=h.getX(U+t);const ba=h.getX(U+(t+1)%3);I.fromBufferAttribute(b,n);K.fromBufferAttribute(b,ba);!0===Jg(I,K,G)&&(C.push(I.x,I.y,I.z),C.push(K.x,K.y,K.z))}}}else{b=a.attributes.position;for(let M=0,T=b.count/3;M<T;M++)for(h=0;3>h;h++)a=3*M+(h+1)%3,I.fromBufferAttribute(b,3*M+h),K.fromBufferAttribute(b,a),!0===Jg(I,K,G)&&(C.push(I.x,I.y,I.z),C.push(K.x,
K.y,K.z))}this.setAttribute("position",new Cb(C,3))}}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}}var ck=Object.freeze({__proto__:null,BoxGeometry:Qe,CapsuleGeometry:lh,CircleGeometry:mh,ConeGeometry:nh,CylinderGeometry:Mf,DodecahedronGeometry:oh,EdgesGeometry:ak,ExtrudeGeometry:sh,IcosahedronGeometry:th,LatheGeometry:og,OctahedronGeometry:pg,PlaneGeometry:Tf,PolyhedronGeometry:Ke,RingGeometry:uh,ShapeGeometry:vh,SphereGeometry:qg,TetrahedronGeometry:wh,TorusGeometry:xh,
TorusKnotGeometry:yh,TubeGeometry:zh,WireframeGeometry:bk});class dk extends kd{constructor(a){super();this.isShadowMaterial=!0;this.type="ShadowMaterial";this.color=new wb(0);this.fog=this.transparent=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.fog=a.fog;return this}}class ek extends de{constructor(a){super(a);this.isRawShaderMaterial=!0;this.type="RawShaderMaterial"}}class Gi extends kd{constructor(a){super();this.isMeshStandardMaterial=!0;this.defines={STANDARD:""};
this.type="MeshStandardMaterial";this.color=new wb(16777215);this.roughness=1;this.metalness=0;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new wb(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new La(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=
1;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.flatShading=!1;this.fog=!0;this.setValues(a)}copy(a){super.copy(a);this.defines={STANDARD:""};this.color.copy(a.color);this.roughness=a.roughness;this.metalness=a.metalness;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=
a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.roughnessMap=a.roughnessMap;this.metalnessMap=a.metalnessMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.envMapIntensity=a.envMapIntensity;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;
this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.flatShading=a.flatShading;this.fog=a.fog;return this}}class fk extends Gi{constructor(a){super();this.isMeshPhysicalMaterial=!0;this.defines={STANDARD:"",PHYSICAL:""};this.type="MeshPhysicalMaterial";this.clearcoatMap=null;this.clearcoatRoughness=0;this.clearcoatRoughnessMap=null;this.clearcoatNormalScale=new La(1,1);this.clearcoatNormalMap=null;this.ior=1.5;Object.defineProperty(this,"reflectivity",{get:function(){return m(2.5*
(this.ior-1)/(this.ior+1),0,1)},set:function(b){this.ior=(1+.4*b)/(1-.4*b)}});this.iridescenceMap=null;this.iridescenceIOR=1.3;this.iridescenceThicknessRange=[100,400];this.iridescenceThicknessMap=null;this.sheenColor=new wb(0);this.sheenColorMap=null;this.sheenRoughness=1;this.transmissionMap=this.sheenRoughnessMap=null;this.thickness=0;this.thicknessMap=null;this.attenuationDistance=Infinity;this.attenuationColor=new wb(1,1,1);this.specularIntensity=1;this.specularIntensityMap=null;this.specularColor=
new wb(1,1,1);this.specularColorMap=null;this._transmission=this._iridescence=this._clearcoat=this._sheen=0;this.setValues(a)}get sheen(){return this._sheen}set sheen(a){0<this._sheen!==0<a&&this.version++;this._sheen=a}get clearcoat(){return this._clearcoat}set clearcoat(a){0<this._clearcoat!==0<a&&this.version++;this._clearcoat=a}get iridescence(){return this._iridescence}set iridescence(a){0<this._iridescence!==0<a&&this.version++;this._iridescence=a}get transmission(){return this._transmission}set transmission(a){0<
this._transmission!==0<a&&this.version++;this._transmission=a}copy(a){super.copy(a);this.defines={STANDARD:"",PHYSICAL:""};this.clearcoat=a.clearcoat;this.clearcoatMap=a.clearcoatMap;this.clearcoatRoughness=a.clearcoatRoughness;this.clearcoatRoughnessMap=a.clearcoatRoughnessMap;this.clearcoatNormalMap=a.clearcoatNormalMap;this.clearcoatNormalScale.copy(a.clearcoatNormalScale);this.ior=a.ior;this.iridescence=a.iridescence;this.iridescenceMap=a.iridescenceMap;this.iridescenceIOR=a.iridescenceIOR;this.iridescenceThicknessRange=
[...a.iridescenceThicknessRange];this.iridescenceThicknessMap=a.iridescenceThicknessMap;this.sheen=a.sheen;this.sheenColor.copy(a.sheenColor);this.sheenColorMap=a.sheenColorMap;this.sheenRoughness=a.sheenRoughness;this.sheenRoughnessMap=a.sheenRoughnessMap;this.transmission=a.transmission;this.transmissionMap=a.transmissionMap;this.thickness=a.thickness;this.thicknessMap=a.thicknessMap;this.attenuationDistance=a.attenuationDistance;this.attenuationColor.copy(a.attenuationColor);this.specularIntensity=
a.specularIntensity;this.specularIntensityMap=a.specularIntensityMap;this.specularColor.copy(a.specularColor);this.specularColorMap=a.specularColorMap;return this}}class gk extends kd{constructor(a){super();this.isMeshPhongMaterial=!0;this.type="MeshPhongMaterial";this.color=new wb(16777215);this.specular=new wb(1118481);this.shininess=30;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new wb(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=
null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new La(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.flatShading=!1;this.fog=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.specular.copy(a.specular);this.shininess=
a.shininess;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=
a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.flatShading=a.flatShading;this.fog=a.fog;return this}}class hk extends kd{constructor(a){super();this.isMeshToonMaterial=!0;this.defines={TOON:""};this.type=
"MeshToonMaterial";this.color=new wb(16777215);this.lightMap=this.gradientMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new wb(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new La(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.alphaMap=null;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=
"round";this.fog=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.map=a.map;this.gradientMap=a.gradientMap;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);
this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.alphaMap=a.alphaMap;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.fog=a.fog;return this}}class ik extends kd{constructor(a){super();this.isMeshNormalMaterial=!0;this.type="MeshNormalMaterial";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=
0;this.normalScale=new La(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.flatShading=!1;this.setValues(a)}copy(a){super.copy(a);this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;
this.wireframeLinewidth=a.wireframeLinewidth;this.flatShading=a.flatShading;return this}}class jk extends kd{constructor(a){super();this.isMeshLambertMaterial=!0;this.type="MeshLambertMaterial";this.color=new wb(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new wb(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new La(1,1);this.displacementMap=
null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.flatShading=!1;this.fog=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);
this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;
this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.flatShading=a.flatShading;this.fog=a.fog;return this}}class kk extends kd{constructor(a){super();this.isMeshMatcapMaterial=!0;this.defines={MATCAP:""};this.type="MeshMatcapMaterial";this.color=new wb(16777215);this.bumpMap=this.map=this.matcap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new La(1,1);this.displacementMap=
null;this.displacementScale=1;this.displacementBias=0;this.alphaMap=null;this.flatShading=!1;this.fog=!0;this.setValues(a)}copy(a){super.copy(a);this.defines={MATCAP:""};this.color.copy(a.color);this.matcap=a.matcap;this.map=a.map;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;
this.alphaMap=a.alphaMap;this.flatShading=a.flatShading;this.fog=a.fog;return this}}class lk extends sd{constructor(a){super();this.isLineDashedMaterial=!0;this.type="LineDashedMaterial";this.scale=1;this.dashSize=3;this.gapSize=1;this.setValues(a)}copy(a){super.copy(a);this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=a.gapSize;return this}}const Ll={arraySlice:xd,convertArray:pe,isTypedArray:Xf,getKeyframeOrder:Kg,sortedArray:Yf,flattenJSON:Zf,subclip:function(a,b,h,n,t=30){a=a.clone();a.name=
b;b=[];for(let G=0;G<a.tracks.length;++G){const I=a.tracks[G],K=I.getValueSize(),M=[],T=[];for(let U=0;U<I.times.length;++U){var C=I.times[U]*t;if(!(C<h||C>=n))for(M.push(I.times[U]),C=0;C<K;++C)T.push(I.values[U*K+C])}0!==M.length&&(I.times=pe(M,I.times.constructor),I.values=pe(T,I.values.constructor),b.push(I))}a.tracks=b;h=Infinity;for(n=0;n<a.tracks.length;++n)h>a.tracks[n].times[0]&&(h=a.tracks[n].times[0]);for(n=0;n<a.tracks.length;++n)a.tracks[n].shift(-1*h);a.resetDuration();return a},makeClipAdditive:function(a,
b=0,h=a,n=30){0>=n&&(n=30);const t=h.tracks.length;b/=n;for(n=0;n<t;++n){const M=h.tracks[n],T=M.ValueTypeName;if("bool"===T||"string"===T)continue;const U=a.tracks.find(function(aa){return aa.name===M.name&&aa.ValueTypeName===T});if(void 0===U)continue;var C=0,G=M.getValueSize();M.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(C=G/3);let V=0;const ba=U.getValueSize();U.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(V=ba/3);var I=M.times.length-1;if(b<=M.times[0])C=xd(M.values,
C,G-C);else if(b>=M.times[I])I=I*G+C,C=xd(M.values,I,I+G-C);else{I=M.createInterpolant();var K=C;C=G-C;I.evaluate(b);C=xd(I.resultBuffer,K,C)}"quaternion"===T&&(new zb).fromArray(C).normalize().conjugate().toArray(C);G=U.times.length;for(I=0;I<G;++I)if(K=I*ba+V,"quaternion"===T)zb.multiplyQuaternionsFlat(U.values,K,C,0,U.values,K);else{const aa=ba-2*V;for(let S=0;S<aa;++S)U.values[K+S]-=C[S]}}a.blendMode=2501;return a}};class rg{constructor(a,b,h,n){this.parameterPositions=a;this._cachedIndex=0;this.resultBuffer=
void 0!==n?n:new b.constructor(h);this.sampleValues=b;this.valueSize=h;this.settings=null;this.DefaultSettings_={}}evaluate(a){const b=this.parameterPositions;let h=this._cachedIndex;var n=b[h],t=b[h-1];a:{b:{c:{d:if(!(a<n)){for(var C=h+2;;){if(void 0===n){if(a<t)break d;this._cachedIndex=h=b.length;return this.copySampleValue_(h-1)}if(h===C)break;t=n;n=b[++h];if(a<n)break b}t=b.length;break c}if(a>=t)break a;else{n=b[1];a<n&&(h=2,t=n);for(C=h-2;;){if(void 0===t)return this._cachedIndex=0,this.copySampleValue_(0);
if(h===C)break;n=t;t=b[--h-1];if(a>=t)break b}t=h;h=0}}for(;h<t;)n=h+t>>>1,a<b[n]?t=n:h=n+1;n=b[h];t=b[h-1];if(void 0===t)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===n)return this._cachedIndex=h=b.length,this.copySampleValue_(h-1)}this._cachedIndex=h;this.intervalChanged_(h,t,n)}return this.interpolate_(h,t,a,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(a){const b=this.resultBuffer,h=this.sampleValues,n=this.valueSize;a*=n;for(let t=0;t!==n;++t)b[t]=
h[a+t];return b}interpolate_(){throw Error("call to abstract method");}intervalChanged_(){}}class mk extends rg{constructor(a,b,h,n){super(a,b,h,n);this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0;this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(a,b,h){var n=this.parameterPositions;let t=a-2,C=a+1,G=n[t],I=n[C];if(void 0===G)switch(this.getSettings_().endingStart){case 2401:t=a;G=2*b-h;break;case 2402:t=n.length-2;G=b+n[t]-n[t+1];break;default:t=a,G=h}if(void 0===
I)switch(this.getSettings_().endingEnd){case 2401:C=a;I=2*h-b;break;case 2402:C=1;I=h+n[1]-n[0];break;default:C=a-1,I=b}a=.5*(h-b);n=this.valueSize;this._weightPrev=a/(b-G);this._weightNext=a/(I-h);this._offsetPrev=t*n;this._offsetNext=C*n}interpolate_(a,b,h,n){const t=this.resultBuffer,C=this.sampleValues,G=this.valueSize;a*=G;const I=a-G,K=this._offsetPrev,M=this._offsetNext;var T=this._weightPrev,U=this._weightNext,V=(h-b)/(n-b);h=V*V;n=h*V;b=-T*n+2*T*h-T*V;T=(1+T)*n+(-1.5-2*T)*h+(-.5+T)*V+1;V=
(-1-U)*n+(1.5+U)*h+.5*V;U=U*n-U*h;for(h=0;h!==G;++h)t[h]=b*C[K+h]+T*C[I+h]+V*C[a+h]+U*C[M+h];return t}}class Hi extends rg{constructor(a,b,h,n){super(a,b,h,n)}interpolate_(a,b,h,n){const t=this.resultBuffer,C=this.sampleValues,G=this.valueSize;a*=G;const I=a-G;b=(h-b)/(n-b);h=1-b;for(n=0;n!==G;++n)t[n]=C[I+n]*h+C[a+n]*b;return t}}class nk extends rg{constructor(a,b,h,n){super(a,b,h,n)}interpolate_(a){return this.copySampleValue_(a-1)}}class Wd{constructor(a,b,h,n){if(void 0===a)throw Error("THREE.KeyframeTrack: track name is undefined");
if(void 0===b||0===b.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+a);this.name=a;this.times=pe(b,this.TimeBufferType);this.values=pe(h,this.ValueBufferType);this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(a){var b=a.constructor;if(b.toJSON!==this.toJSON)b=b.toJSON(a);else{b={name:a.name,times:pe(a.times,Array),values:pe(a.values,Array)};const h=a.getInterpolation();h!==a.DefaultInterpolation&&(b.interpolation=h)}b.type=a.ValueTypeName;return b}InterpolantFactoryMethodDiscrete(a){return new nk(this.times,
this.values,this.getValueSize(),a)}InterpolantFactoryMethodLinear(a){return new Hi(this.times,this.values,this.getValueSize(),a)}InterpolantFactoryMethodSmooth(a){return new mk(this.times,this.values,this.getValueSize(),a)}setInterpolation(a){switch(a){case 2300:var b=this.InterpolantFactoryMethodDiscrete;break;case 2301:b=this.InterpolantFactoryMethodLinear;break;case 2302:b=this.InterpolantFactoryMethodSmooth}if(void 0===b){b="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+
this.name;if(void 0===this.createInterpolant)if(a!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(b);console.warn("THREE.KeyframeTrack:",b);return this}this.createInterpolant=b;return this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(a){if(0!==
a){const b=this.times;for(let h=0,n=b.length;h!==n;++h)b[h]+=a}return this}scale(a){if(1!==a){const b=this.times;for(let h=0,n=b.length;h!==n;++h)b[h]*=a}return this}trim(a,b){const h=this.times,n=h.length;let t=0,C=n-1;for(;t!==n&&h[t]<a;)++t;for(;-1!==C&&h[C]>b;)--C;++C;if(0!==t||C!==n)t>=C&&(C=Math.max(C,1),t=C-1),a=this.getValueSize(),this.times=xd(h,t,C),this.values=xd(this.values,t*a,C*a);return this}validate(){let a=!0;var b=this.getValueSize();0!==b-Math.floor(b)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",
this),a=!1);var h=this.times;b=this.values;const n=h.length;0===n&&(console.error("THREE.KeyframeTrack: Track is empty.",this),a=!1);let t=null;for(let C=0;C!==n;C++){const G=h[C];if("number"===typeof G&&isNaN(G)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,C,G);a=!1;break}if(null!==t&&t>G){console.error("THREE.KeyframeTrack: Out of order keys.",this,C,G,t);a=!1;break}t=G}if(void 0!==b&&Xf(b))for(let C=0,G=b.length;C!==G;++C)if(h=b[C],isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",
this,C,h);a=!1;break}return a}optimize(){const a=xd(this.times),b=xd(this.values),h=this.getValueSize(),n=2302===this.getInterpolation(),t=a.length-1;let C=1;for(let M=1;M<t;++M){var G=!1,I=a[M];if(I!==a[M+1]&&(1!==M||I!==a[0]))if(n)G=!0;else{I=M*h;var K=I-h;const T=I+h;for(let U=0;U!==h;++U){const V=b[I+U];if(V!==b[K+U]||V!==b[T+U]){G=!0;break}}}if(G){if(M!==C)for(a[C]=a[M],G=M*h,I=C*h,K=0;K!==h;++K)b[I+K]=b[G+K];++C}}if(0<t){a[C]=a[t];for(let M=t*h,T=C*h,U=0;U!==h;++U)b[T+U]=b[M+U];++C}C!==a.length?
(this.times=xd(a,0,C),this.values=xd(b,0,C*h)):(this.times=a,this.values=b);return this}clone(){var a=xd(this.times,0);const b=xd(this.values,0);a=new this.constructor(this.name,a,b);a.createInterpolant=this.createInterpolant;return a}}Wd.prototype.TimeBufferType=Float32Array;Wd.prototype.ValueBufferType=Float32Array;Wd.prototype.DefaultInterpolation=2301;class Ve extends Wd{}Ve.prototype.ValueTypeName="bool";Ve.prototype.ValueBufferType=Array;Ve.prototype.DefaultInterpolation=2300;Ve.prototype.InterpolantFactoryMethodLinear=
void 0;Ve.prototype.InterpolantFactoryMethodSmooth=void 0;class Xh extends Wd{}Xh.prototype.ValueTypeName="color";class $f extends Wd{}$f.prototype.ValueTypeName="number";class ok extends rg{constructor(a,b,h,n){super(a,b,h,n)}interpolate_(a,b,h,n){const t=this.resultBuffer,C=this.sampleValues,G=this.valueSize;b=(h-b)/(n-b);a*=G;for(h=a+G;a!==h;a+=4)zb.slerpFlat(t,0,C,a-G,C,a,b);return t}}class sf extends Wd{InterpolantFactoryMethodLinear(a){return new ok(this.times,this.values,this.getValueSize(),
a)}}sf.prototype.ValueTypeName="quaternion";sf.prototype.DefaultInterpolation=2301;sf.prototype.InterpolantFactoryMethodSmooth=void 0;class We extends Wd{}We.prototype.ValueTypeName="string";We.prototype.ValueBufferType=Array;We.prototype.DefaultInterpolation=2300;We.prototype.InterpolantFactoryMethodLinear=void 0;We.prototype.InterpolantFactoryMethodSmooth=void 0;class ag extends Wd{}ag.prototype.ValueTypeName="vector";class sg{constructor(a,b=-1,h,n=2500){this.name=a;this.tracks=h;this.duration=
b;this.blendMode=n;this.uuid=q();0>this.duration&&this.resetDuration()}static parse(a){var b=[];const h=a.tracks,n=1/(a.fps||1);for(let I=0,K=h.length;I!==K;++I){var t=b,C=t.push;{var G=h[I];if(void 0===G.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");const M=Wh(G.type);if(void 0===G.times){const T=[],U=[];Zf(G.keys,T,U,"value");G.times=T;G.values=U}G=void 0!==M.parse?M.parse(G):new M(G.name,G.times,G.values,G.interpolation)}C.call(t,G.scale(n))}b=new this(a.name,a.duration,
b,a.blendMode);b.uuid=a.uuid;return b}static toJSON(a){const b=[],h=a.tracks;a={name:a.name,duration:a.duration,tracks:b,uuid:a.uuid,blendMode:a.blendMode};for(let n=0,t=h.length;n!==t;++n)b.push(Wd.toJSON(h[n]));return a}static CreateFromMorphTargetSequence(a,b,h,n){const t=b.length,C=[];for(let G=0;G<t;G++){let I=[],K=[];I.push((G+t-1)%t,G,(G+1)%t);K.push(0,1,0);const M=Kg(I);I=Yf(I,1,M);K=Yf(K,1,M);n||0!==I[0]||(I.push(t),K.push(K[0]));C.push((new $f(".morphTargetInfluences["+b[G].name+"]",I,K)).scale(1/
h))}return new this(a,-1,C)}static findByName(a,b){let h=a;Array.isArray(a)||(h=a.geometry&&a.geometry.animations||a.animations);for(a=0;a<h.length;a++)if(h[a].name===b)return h[a];return null}static CreateClipsFromMorphTargetSequences(a,b,h){const n={},t=/^([\w-]*?)([\d]+)$/;for(let G=0,I=a.length;G<I;G++){const K=a[G];var C=K.name.match(t);if(C&&1<C.length){C=C[1];let M=n[C];M||(n[C]=M=[]);M.push(K)}}a=[];for(const G in n)a.push(this.CreateFromMorphTargetSequence(G,n[G],b,h));return a}static parseAnimation(a,
b){if(!a)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const h=function(T,U,V,ba,aa){if(0!==V.length){const S=[],ea=[];Zf(V,S,ea,ba);0!==S.length&&aa.push(new T(U,S,ea))}},n=[],t=a.name||"default",C=a.fps||30,G=a.blendMode;var I=a.length||-1;a=a.hierarchy||[];for(let T=0;T<a.length;T++){const U=a[T].keys;if(U&&0!==U.length)if(U[0].morphTargets){I={};var K=void 0;for(K=0;K<U.length;K++)if(U[K].morphTargets)for(var M=0;M<U[K].morphTargets.length;M++)I[U[K].morphTargets[M]]=
-1;for(const V in I){M=[];const ba=[];for(let aa=0;aa!==U[K].morphTargets.length;++aa){const S=U[K];M.push(S.time);ba.push(S.morphTarget===V?1:0)}n.push(new $f(".morphTargetInfluence["+V+"]",M,ba))}I=I.length*C}else K=".bones["+b[T].name+"]",h(ag,K+".position",U,"pos",n),h(sf,K+".quaternion",U,"rot",n),h(ag,K+".scale",U,"scl",n)}return 0===n.length?null:new this(t,I,n,G)}resetDuration(){var a=this.tracks;let b=0;for(let h=0,n=a.length;h!==n;++h)a=this.tracks[h],b=Math.max(b,a.times[a.times.length-
1]);this.duration=b;return this}trim(){for(let a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this}validate(){let a=!0;for(let b=0;b<this.tracks.length;b++)a=a&&this.tracks[b].validate();return a}optimize(){for(let a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}clone(){const a=[];for(let b=0;b<this.tracks.length;b++)a.push(this.tracks[b].clone());return new this.constructor(this.name,this.duration,a,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}
const df={enabled:!1,files:{},add:function(a,b){!1!==this.enabled&&(this.files[a]=b)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};class Ii{constructor(a,b,h){const n=this;let t=!1,C=0,G=0,I=void 0;const K=[];this.onStart=void 0;this.onLoad=a;this.onProgress=b;this.onError=h;this.itemStart=function(M){G++;if(!1===t&&void 0!==n.onStart)n.onStart(M,C,G);t=!0};this.itemEnd=function(M){C++;if(void 0!==n.onProgress)n.onProgress(M,
C,G);if(C===G&&(t=!1,void 0!==n.onLoad))n.onLoad()};this.itemError=function(M){if(void 0!==n.onError)n.onError(M)};this.resolveURL=function(M){return I?I(M):M};this.setURLModifier=function(M){I=M;return this};this.addHandler=function(M,T){K.push(M,T);return this};this.removeHandler=function(M){M=K.indexOf(M);-1!==M&&K.splice(M,2);return this};this.getHandler=function(M){for(let T=0,U=K.length;T<U;T+=2){const V=K[T],ba=K[T+1];V.global&&(V.lastIndex=0);if(V.test(M))return ba}return null}}}const pk=
new Ii;class Id{constructor(a){this.manager=void 0!==a?a:pk;this.crossOrigin="anonymous";this.withCredentials=!1;this.resourcePath=this.path="";this.requestHeader={}}load(){}loadAsync(a,b){const h=this;return new Promise(function(n,t){h.load(a,n,b,t)})}parse(){}setCrossOrigin(a){this.crossOrigin=a;return this}setWithCredentials(a){this.withCredentials=a;return this}setPath(a){this.path=a;return this}setResourcePath(a){this.resourcePath=a;return this}setRequestHeader(a){this.requestHeader=a;return this}}
const we={};class Ml extends Error{constructor(a,b){super(a);this.response=b}}class xe extends Id{constructor(a){super(a)}load(a,b,h,n){void 0===a&&(a="");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);const t=df.get(a);if(void 0!==t)return this.manager.itemStart(a),setTimeout(()=>{b&&b(t);this.manager.itemEnd(a)},0),t;if(void 0!==we[a])we[a].push({onLoad:b,onProgress:h,onError:n});else{we[a]=[];we[a].push({onLoad:b,onProgress:h,onError:n});h=new Request(a,{headers:new Headers(this.requestHeader),
credentials:this.withCredentials?"include":"same-origin"});var C=this.mimeType,G=this.responseType;fetch(h).then(I=>{if(200===I.status||0===I.status){0===I.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");if("undefined"===typeof ReadableStream||void 0===I.body||void 0===I.body.getReader)return I;const K=we[a],M=I.body.getReader(),T=(I=I.headers.get("Content-Length")||I.headers.get("X-File-Size"))?parseInt(I):0,U=0!==T;let V=0;I=new ReadableStream({start(ba){function aa(){M.read().then(({done:S,
value:ea})=>{if(S)ba.close();else{V+=ea.byteLength;S=new ProgressEvent("progress",{lengthComputable:U,loaded:V,total:T});for(let va=0,ma=K.length;va<ma;va++){const wa=K[va];if(wa.onProgress)wa.onProgress(S)}ba.enqueue(ea);aa()}})}aa()}});return new Response(I)}throw new Ml(`fetch for "${I.url}" responded with ${I.status}: ${I.statusText}`,I);}).then(I=>{switch(G){case "arraybuffer":return I.arrayBuffer();case "blob":return I.blob();case "document":return I.text().then(T=>(new DOMParser).parseFromString(T,
C));case "json":return I.json();default:if(void 0===C)return I.text();var K=/charset="?([^;"\s]*)"?/i.exec(C);K=K&&K[1]?K[1].toLowerCase():void 0;const M=new TextDecoder(K);return I.arrayBuffer().then(T=>M.decode(T))}}).then(I=>{df.add(a,I);const K=we[a];delete we[a];for(let M=0,T=K.length;M<T;M++){const U=K[M];if(U.onLoad)U.onLoad(I)}}).catch(I=>{const K=we[a];if(void 0===K)throw this.manager.itemError(a),I;delete we[a];for(let M=0,T=K.length;M<T;M++){const U=K[M];if(U.onError)U.onError(I)}this.manager.itemError(a)}).finally(()=>
{this.manager.itemEnd(a)});this.manager.itemStart(a)}}setResponseType(a){this.responseType=a;return this}setMimeType(a){this.mimeType=a;return this}}class Nl extends Id{constructor(a){super(a)}load(a,b,h,n){const t=this,C=new xe(this.manager);C.setPath(this.path);C.setRequestHeader(this.requestHeader);C.setWithCredentials(this.withCredentials);C.load(a,function(G){try{b(t.parse(JSON.parse(G)))}catch(I){n?n(I):console.error(I),t.manager.itemError(a)}},h,n)}parse(a){const b=[];for(let h=0;h<a.length;h++){const n=
sg.parse(a[h]);b.push(n)}return b}}class Ol extends Id{constructor(a){super(a)}load(a,b,h,n){function t(T){K.load(a[T],function(U){U=C.parse(U,!0);G[T]={width:U.width,height:U.height,format:U.format,mipmaps:U.mipmaps};M+=1;6===M&&(1===U.mipmapCount&&(I.minFilter=1006),I.image=G,I.format=U.format,I.needsUpdate=!0,b&&b(I))},h,n)}const C=this,G=[],I=new wi,K=new xe(this.manager);K.setPath(this.path);K.setResponseType("arraybuffer");K.setRequestHeader(this.requestHeader);K.setWithCredentials(C.withCredentials);
let M=0;if(Array.isArray(a))for(let T=0,U=a.length;T<U;++T)t(T);else K.load(a,function(T){T=C.parse(T,!0);if(T.isCubemap){const U=T.mipmaps.length/T.mipmapCount;for(let V=0;V<U;V++){G[V]={mipmaps:[]};for(let ba=0;ba<T.mipmapCount;ba++)G[V].mipmaps.push(T.mipmaps[V*T.mipmapCount+ba]),G[V].format=T.format,G[V].width=T.width,G[V].height=T.height}I.image=G}else I.image.width=T.width,I.image.height=T.height,I.mipmaps=T.mipmaps;1===T.mipmapCount&&(I.minFilter=1006);I.format=T.format;I.needsUpdate=!0;b&&
b(I)},h,n);return I}}class tg extends Id{constructor(a){super(a)}load(a,b,h,n){function t(){G();df.add(a,this);b&&b(this);I.manager.itemEnd(a)}function C(T){G();n&&n(T);I.manager.itemError(a);I.manager.itemEnd(a)}function G(){M.removeEventListener("load",t,!1);M.removeEventListener("error",C,!1)}void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);const I=this,K=df.get(a);if(void 0!==K)return I.manager.itemStart(a),setTimeout(function(){b&&b(K);I.manager.itemEnd(a)},0),K;const M=w("img");
M.addEventListener("load",t,!1);M.addEventListener("error",C,!1);"data:"!==a.slice(0,5)&&void 0!==this.crossOrigin&&(M.crossOrigin=this.crossOrigin);I.manager.itemStart(a);M.src=a;return M}}class Pl extends Id{constructor(a){super(a)}load(a,b,h,n){function t(K){G.load(a[K],function(M){C.images[K]=M;I++;6===I&&(C.needsUpdate=!0,b&&b(C))},void 0,n)}const C=new hg,G=new tg(this.manager);G.setCrossOrigin(this.crossOrigin);G.setPath(this.path);let I=0;for(h=0;h<a.length;++h)t(h);return C}}class Ql extends Id{constructor(a){super(a)}load(a,
b,h,n){const t=this,C=new Kf,G=new xe(this.manager);G.setResponseType("arraybuffer");G.setRequestHeader(this.requestHeader);G.setPath(this.path);G.setWithCredentials(t.withCredentials);G.load(a,function(I){if(I=t.parse(I))void 0!==I.image?C.image=I.image:void 0!==I.data&&(C.image.width=I.width,C.image.height=I.height,C.image.data=I.data),C.wrapS=void 0!==I.wrapS?I.wrapS:1001,C.wrapT=void 0!==I.wrapT?I.wrapT:1001,C.magFilter=void 0!==I.magFilter?I.magFilter:1006,C.minFilter=void 0!==I.minFilter?I.minFilter:
1006,C.anisotropy=void 0!==I.anisotropy?I.anisotropy:1,void 0!==I.encoding&&(C.encoding=I.encoding),void 0!==I.flipY&&(C.flipY=I.flipY),void 0!==I.format&&(C.format=I.format),void 0!==I.type&&(C.type=I.type),void 0!==I.mipmaps&&(C.mipmaps=I.mipmaps,C.minFilter=1008),1===I.mipmapCount&&(C.minFilter=1006),void 0!==I.generateMipmaps&&(C.generateMipmaps=I.generateMipmaps),C.needsUpdate=!0,b&&b(C,I)},h,n);return C}}class Rl extends Id{constructor(a){super(a)}load(a,b,h,n){const t=new Qc,C=new tg(this.manager);
C.setCrossOrigin(this.crossOrigin);C.setPath(this.path);C.load(a,function(G){t.image=G;t.needsUpdate=!0;void 0!==b&&b(t)},h,n);return t}}class Le extends wc{constructor(a,b=1){super();this.isLight=!0;this.type="Light";this.color=new wb(a);this.intensity=b}dispose(){}copy(a,b){super.copy(a,b);this.color.copy(a.color);this.intensity=a.intensity;return this}toJSON(a){a=super.toJSON(a);a.object.color=this.color.getHex();a.object.intensity=this.intensity;void 0!==this.groundColor&&(a.object.groundColor=
this.groundColor.getHex());void 0!==this.distance&&(a.object.distance=this.distance);void 0!==this.angle&&(a.object.angle=this.angle);void 0!==this.decay&&(a.object.decay=this.decay);void 0!==this.penumbra&&(a.object.penumbra=this.penumbra);void 0!==this.shadow&&(a.object.shadow=this.shadow.toJSON());return a}}class qk extends Le{constructor(a,b,h){super(a,h);this.isHemisphereLight=!0;this.type="HemisphereLight";this.position.copy(wc.DEFAULT_UP);this.updateMatrix();this.groundColor=new wb(b)}copy(a,
b){super.copy(a,b);this.groundColor.copy(a.groundColor);return this}}const Ji=new $b,rk=new ka,sk=new ka;class Ki{constructor(a){this.camera=a;this.normalBias=this.bias=0;this.radius=1;this.blurSamples=8;this.mapSize=new La(512,512);this.mapPass=this.map=null;this.matrix=new $b;this.autoUpdate=!0;this.needsUpdate=!1;this._frustum=new Dg;this._frameExtents=new La(1,1);this._viewportCount=1;this._viewports=[new zc(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(a){const b=
this.camera,h=this.matrix;rk.setFromMatrixPosition(a.matrixWorld);b.position.copy(rk);sk.setFromMatrixPosition(a.target.matrixWorld);b.lookAt(sk);b.updateMatrixWorld();Ji.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);this._frustum.setFromProjectionMatrix(Ji);h.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);h.multiply(Ji)}getViewport(a){return this._viewports[a]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose();this.mapPass&&this.mapPass.dispose()}copy(a){this.camera=
a.camera.clone();this.bias=a.bias;this.radius=a.radius;this.mapSize.copy(a.mapSize);return this}clone(){return(new this.constructor).copy(this)}toJSON(){const a={};0!==this.bias&&(a.bias=this.bias);0!==this.normalBias&&(a.normalBias=this.normalBias);1!==this.radius&&(a.radius=this.radius);if(512!==this.mapSize.x||512!==this.mapSize.y)a.mapSize=this.mapSize.toArray();a.camera=this.camera.toJSON(!1).object;delete a.camera.matrix;return a}}class Sl extends Ki{constructor(){super(new gd(50,1,.5,500));
this.isSpotLightShadow=!0;this.focus=1}updateMatrices(a){const b=this.camera,h=2*Pa*a.angle*this.focus,n=this.mapSize.width/this.mapSize.height,t=a.distance||b.far;if(h!==b.fov||n!==b.aspect||t!==b.far)b.fov=h,b.aspect=n,b.far=t,b.updateProjectionMatrix();super.updateMatrices(a)}copy(a){super.copy(a);this.focus=a.focus;return this}}class tk extends Le{constructor(a,b,h=0,n=Math.PI/3,t=0,C=2){super(a,b);this.isSpotLight=!0;this.type="SpotLight";this.position.copy(wc.DEFAULT_UP);this.updateMatrix();
this.target=new wc;this.distance=h;this.angle=n;this.penumbra=t;this.decay=C;this.map=null;this.shadow=new Sl}get power(){return this.intensity*Math.PI}set power(a){this.intensity=a/Math.PI}dispose(){this.shadow.dispose()}copy(a,b){super.copy(a,b);this.distance=a.distance;this.angle=a.angle;this.penumbra=a.penumbra;this.decay=a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return this}}const uk=new $b,ug=new ka,Li=new ka;class Tl extends Ki{constructor(){super(new gd(90,1,.5,500));
this.isPointLightShadow=!0;this._frameExtents=new La(4,2);this._viewportCount=6;this._viewports=[new zc(2,1,1,1),new zc(0,1,1,1),new zc(3,1,1,1),new zc(1,1,1,1),new zc(3,0,1,1),new zc(1,0,1,1)];this._cubeDirections=[new ka(1,0,0),new ka(-1,0,0),new ka(0,0,1),new ka(0,0,-1),new ka(0,1,0),new ka(0,-1,0)];this._cubeUps=[new ka(0,1,0),new ka(0,1,0),new ka(0,1,0),new ka(0,1,0),new ka(0,0,1),new ka(0,0,-1)]}updateMatrices(a,b=0){const h=this.camera,n=this.matrix,t=a.distance||h.far;t!==h.far&&(h.far=t,
h.updateProjectionMatrix());ug.setFromMatrixPosition(a.matrixWorld);h.position.copy(ug);Li.copy(h.position);Li.add(this._cubeDirections[b]);h.up.copy(this._cubeUps[b]);h.lookAt(Li);h.updateMatrixWorld();n.makeTranslation(-ug.x,-ug.y,-ug.z);uk.multiplyMatrices(h.projectionMatrix,h.matrixWorldInverse);this._frustum.setFromProjectionMatrix(uk)}}class vk extends Le{constructor(a,b,h=0,n=2){super(a,b);this.isPointLight=!0;this.type="PointLight";this.distance=h;this.decay=n;this.shadow=new Tl}get power(){return 4*
this.intensity*Math.PI}set power(a){this.intensity=a/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(a,b){super.copy(a,b);this.distance=a.distance;this.decay=a.decay;this.shadow=a.shadow.clone();return this}}class Ul extends Ki{constructor(){super(new bh(-5,5,5,-5,.5,500));this.isDirectionalLightShadow=!0}}class wk extends Le{constructor(a,b){super(a,b);this.isDirectionalLight=!0;this.type="DirectionalLight";this.position.copy(wc.DEFAULT_UP);this.updateMatrix();this.target=new wc;this.shadow=new Ul}dispose(){this.shadow.dispose()}copy(a){super.copy(a);
this.target=a.target.clone();this.shadow=a.shadow.clone();return this}}class xk extends Le{constructor(a,b){super(a,b);this.isAmbientLight=!0;this.type="AmbientLight"}}class yk extends Le{constructor(a,b,h=10,n=10){super(a,b);this.isRectAreaLight=!0;this.type="RectAreaLight";this.width=h;this.height=n}get power(){return this.intensity*this.width*this.height*Math.PI}set power(a){this.intensity=a/(this.width*this.height*Math.PI)}copy(a){super.copy(a);this.width=a.width;this.height=a.height;return this}toJSON(a){a=
super.toJSON(a);a.object.width=this.width;a.object.height=this.height;return a}}class zk{constructor(){this.isSphericalHarmonics3=!0;this.coefficients=[];for(let a=0;9>a;a++)this.coefficients.push(new ka)}set(a){for(let b=0;9>b;b++)this.coefficients[b].copy(a[b]);return this}zero(){for(let a=0;9>a;a++)this.coefficients[a].set(0,0,0);return this}getAt(a,b){const h=a.x,n=a.y;a=a.z;const t=this.coefficients;b.copy(t[0]).multiplyScalar(.282095);b.addScaledVector(t[1],.488603*n);b.addScaledVector(t[2],
.488603*a);b.addScaledVector(t[3],.488603*h);b.addScaledVector(t[4],1.092548*h*n);b.addScaledVector(t[5],1.092548*n*a);b.addScaledVector(t[6],.315392*(3*a*a-1));b.addScaledVector(t[7],1.092548*h*a);b.addScaledVector(t[8],.546274*(h*h-n*n));return b}getIrradianceAt(a,b){const h=a.x,n=a.y;a=a.z;const t=this.coefficients;b.copy(t[0]).multiplyScalar(.886227);b.addScaledVector(t[1],1.023328*n);b.addScaledVector(t[2],1.023328*a);b.addScaledVector(t[3],1.023328*h);b.addScaledVector(t[4],.858086*h*n);b.addScaledVector(t[5],
.858086*n*a);b.addScaledVector(t[6],.743125*a*a-.247708);b.addScaledVector(t[7],.858086*h*a);b.addScaledVector(t[8],.429043*(h*h-n*n));return b}add(a){for(let b=0;9>b;b++)this.coefficients[b].add(a.coefficients[b]);return this}addScaledSH(a,b){for(let h=0;9>h;h++)this.coefficients[h].addScaledVector(a.coefficients[h],b);return this}scale(a){for(let b=0;9>b;b++)this.coefficients[b].multiplyScalar(a);return this}lerp(a,b){for(let h=0;9>h;h++)this.coefficients[h].lerp(a.coefficients[h],b);return this}equals(a){for(let b=
0;9>b;b++)if(!this.coefficients[b].equals(a.coefficients[b]))return!1;return!0}copy(a){return this.set(a.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(a,b=0){const h=this.coefficients;for(let n=0;9>n;n++)h[n].fromArray(a,b+3*n);return this}toArray(a=[],b=0){const h=this.coefficients;for(let n=0;9>n;n++)h[n].toArray(a,b+3*n);return a}static getBasisAt(a,b){const h=a.x,n=a.y;a=a.z;b[0]=.282095;b[1]=.488603*n;b[2]=.488603*a;b[3]=.488603*h;b[4]=1.092548*h*n;b[5]=1.092548*n*a;
b[6]=.315392*(3*a*a-1);b[7]=1.092548*h*a;b[8]=.546274*(h*h-n*n)}}class Ah extends Le{constructor(a=new zk,b=1){super(void 0,b);this.isLightProbe=!0;this.sh=a}copy(a){super.copy(a);this.sh.copy(a.sh);return this}fromJSON(a){this.intensity=a.intensity;this.sh.fromArray(a.sh);return this}toJSON(a){a=super.toJSON(a);a.object.sh=this.sh.toArray();return a}}class Mi extends Id{constructor(a){super(a);this.textures={}}load(a,b,h,n){const t=this,C=new xe(t.manager);C.setPath(t.path);C.setRequestHeader(t.requestHeader);
C.setWithCredentials(t.withCredentials);C.load(a,function(G){try{b(t.parse(JSON.parse(G)))}catch(I){n?n(I):console.error(I),t.manager.itemError(a)}},h,n)}parse(a){function b(C){void 0===h[C]&&console.warn("THREE.MaterialLoader: Undefined texture",C);return h[C]}const h=this.textures,n=Mi.createMaterialFromType(a.type);void 0!==a.uuid&&(n.uuid=a.uuid);void 0!==a.name&&(n.name=a.name);void 0!==a.color&&void 0!==n.color&&n.color.setHex(a.color);void 0!==a.roughness&&(n.roughness=a.roughness);void 0!==
a.metalness&&(n.metalness=a.metalness);void 0!==a.sheen&&(n.sheen=a.sheen);void 0!==a.sheenColor&&(n.sheenColor=(new wb).setHex(a.sheenColor));void 0!==a.sheenRoughness&&(n.sheenRoughness=a.sheenRoughness);void 0!==a.emissive&&void 0!==n.emissive&&n.emissive.setHex(a.emissive);void 0!==a.specular&&void 0!==n.specular&&n.specular.setHex(a.specular);void 0!==a.specularIntensity&&(n.specularIntensity=a.specularIntensity);void 0!==a.specularColor&&void 0!==n.specularColor&&n.specularColor.setHex(a.specularColor);
void 0!==a.shininess&&(n.shininess=a.shininess);void 0!==a.clearcoat&&(n.clearcoat=a.clearcoat);void 0!==a.clearcoatRoughness&&(n.clearcoatRoughness=a.clearcoatRoughness);void 0!==a.iridescence&&(n.iridescence=a.iridescence);void 0!==a.iridescenceIOR&&(n.iridescenceIOR=a.iridescenceIOR);void 0!==a.iridescenceThicknessRange&&(n.iridescenceThicknessRange=a.iridescenceThicknessRange);void 0!==a.transmission&&(n.transmission=a.transmission);void 0!==a.thickness&&(n.thickness=a.thickness);void 0!==a.attenuationDistance&&
(n.attenuationDistance=a.attenuationDistance);void 0!==a.attenuationColor&&void 0!==n.attenuationColor&&n.attenuationColor.setHex(a.attenuationColor);void 0!==a.fog&&(n.fog=a.fog);void 0!==a.flatShading&&(n.flatShading=a.flatShading);void 0!==a.blending&&(n.blending=a.blending);void 0!==a.combine&&(n.combine=a.combine);void 0!==a.side&&(n.side=a.side);void 0!==a.shadowSide&&(n.shadowSide=a.shadowSide);void 0!==a.opacity&&(n.opacity=a.opacity);void 0!==a.transparent&&(n.transparent=a.transparent);
void 0!==a.alphaTest&&(n.alphaTest=a.alphaTest);void 0!==a.depthTest&&(n.depthTest=a.depthTest);void 0!==a.depthWrite&&(n.depthWrite=a.depthWrite);void 0!==a.colorWrite&&(n.colorWrite=a.colorWrite);void 0!==a.stencilWrite&&(n.stencilWrite=a.stencilWrite);void 0!==a.stencilWriteMask&&(n.stencilWriteMask=a.stencilWriteMask);void 0!==a.stencilFunc&&(n.stencilFunc=a.stencilFunc);void 0!==a.stencilRef&&(n.stencilRef=a.stencilRef);void 0!==a.stencilFuncMask&&(n.stencilFuncMask=a.stencilFuncMask);void 0!==
a.stencilFail&&(n.stencilFail=a.stencilFail);void 0!==a.stencilZFail&&(n.stencilZFail=a.stencilZFail);void 0!==a.stencilZPass&&(n.stencilZPass=a.stencilZPass);void 0!==a.wireframe&&(n.wireframe=a.wireframe);void 0!==a.wireframeLinewidth&&(n.wireframeLinewidth=a.wireframeLinewidth);void 0!==a.wireframeLinecap&&(n.wireframeLinecap=a.wireframeLinecap);void 0!==a.wireframeLinejoin&&(n.wireframeLinejoin=a.wireframeLinejoin);void 0!==a.rotation&&(n.rotation=a.rotation);1!==a.linewidth&&(n.linewidth=a.linewidth);
void 0!==a.dashSize&&(n.dashSize=a.dashSize);void 0!==a.gapSize&&(n.gapSize=a.gapSize);void 0!==a.scale&&(n.scale=a.scale);void 0!==a.polygonOffset&&(n.polygonOffset=a.polygonOffset);void 0!==a.polygonOffsetFactor&&(n.polygonOffsetFactor=a.polygonOffsetFactor);void 0!==a.polygonOffsetUnits&&(n.polygonOffsetUnits=a.polygonOffsetUnits);void 0!==a.dithering&&(n.dithering=a.dithering);void 0!==a.alphaToCoverage&&(n.alphaToCoverage=a.alphaToCoverage);void 0!==a.premultipliedAlpha&&(n.premultipliedAlpha=
a.premultipliedAlpha);void 0!==a.forceSinglePass&&(n.forceSinglePass=a.forceSinglePass);void 0!==a.visible&&(n.visible=a.visible);void 0!==a.toneMapped&&(n.toneMapped=a.toneMapped);void 0!==a.userData&&(n.userData=a.userData);void 0!==a.vertexColors&&(n.vertexColors="number"===typeof a.vertexColors?0<a.vertexColors?!0:!1:a.vertexColors);if(void 0!==a.uniforms)for(var t in a.uniforms){const C=a.uniforms[t];n.uniforms[t]={};switch(C.type){case "t":n.uniforms[t].value=b(C.value);break;case "c":n.uniforms[t].value=
(new wb).setHex(C.value);break;case "v2":n.uniforms[t].value=(new La).fromArray(C.value);break;case "v3":n.uniforms[t].value=(new ka).fromArray(C.value);break;case "v4":n.uniforms[t].value=(new zc).fromArray(C.value);break;case "m3":n.uniforms[t].value=(new xb).fromArray(C.value);break;case "m4":n.uniforms[t].value=(new $b).fromArray(C.value);break;default:n.uniforms[t].value=C.value}}void 0!==a.defines&&(n.defines=a.defines);void 0!==a.vertexShader&&(n.vertexShader=a.vertexShader);void 0!==a.fragmentShader&&
(n.fragmentShader=a.fragmentShader);void 0!==a.glslVersion&&(n.glslVersion=a.glslVersion);if(void 0!==a.extensions)for(const C in a.extensions)n.extensions[C]=a.extensions[C];void 0!==a.size&&(n.size=a.size);void 0!==a.sizeAttenuation&&(n.sizeAttenuation=a.sizeAttenuation);void 0!==a.map&&(n.map=b(a.map));void 0!==a.matcap&&(n.matcap=b(a.matcap));void 0!==a.alphaMap&&(n.alphaMap=b(a.alphaMap));void 0!==a.bumpMap&&(n.bumpMap=b(a.bumpMap));void 0!==a.bumpScale&&(n.bumpScale=a.bumpScale);void 0!==a.normalMap&&
(n.normalMap=b(a.normalMap));void 0!==a.normalMapType&&(n.normalMapType=a.normalMapType);void 0!==a.normalScale&&(t=a.normalScale,!1===Array.isArray(t)&&(t=[t,t]),n.normalScale=(new La).fromArray(t));void 0!==a.displacementMap&&(n.displacementMap=b(a.displacementMap));void 0!==a.displacementScale&&(n.displacementScale=a.displacementScale);void 0!==a.displacementBias&&(n.displacementBias=a.displacementBias);void 0!==a.roughnessMap&&(n.roughnessMap=b(a.roughnessMap));void 0!==a.metalnessMap&&(n.metalnessMap=
b(a.metalnessMap));void 0!==a.emissiveMap&&(n.emissiveMap=b(a.emissiveMap));void 0!==a.emissiveIntensity&&(n.emissiveIntensity=a.emissiveIntensity);void 0!==a.specularMap&&(n.specularMap=b(a.specularMap));void 0!==a.specularIntensityMap&&(n.specularIntensityMap=b(a.specularIntensityMap));void 0!==a.specularColorMap&&(n.specularColorMap=b(a.specularColorMap));void 0!==a.envMap&&(n.envMap=b(a.envMap));void 0!==a.envMapIntensity&&(n.envMapIntensity=a.envMapIntensity);void 0!==a.reflectivity&&(n.reflectivity=
a.reflectivity);void 0!==a.refractionRatio&&(n.refractionRatio=a.refractionRatio);void 0!==a.lightMap&&(n.lightMap=b(a.lightMap));void 0!==a.lightMapIntensity&&(n.lightMapIntensity=a.lightMapIntensity);void 0!==a.aoMap&&(n.aoMap=b(a.aoMap));void 0!==a.aoMapIntensity&&(n.aoMapIntensity=a.aoMapIntensity);void 0!==a.gradientMap&&(n.gradientMap=b(a.gradientMap));void 0!==a.clearcoatMap&&(n.clearcoatMap=b(a.clearcoatMap));void 0!==a.clearcoatRoughnessMap&&(n.clearcoatRoughnessMap=b(a.clearcoatRoughnessMap));
void 0!==a.clearcoatNormalMap&&(n.clearcoatNormalMap=b(a.clearcoatNormalMap));void 0!==a.clearcoatNormalScale&&(n.clearcoatNormalScale=(new La).fromArray(a.clearcoatNormalScale));void 0!==a.iridescenceMap&&(n.iridescenceMap=b(a.iridescenceMap));void 0!==a.iridescenceThicknessMap&&(n.iridescenceThicknessMap=b(a.iridescenceThicknessMap));void 0!==a.transmissionMap&&(n.transmissionMap=b(a.transmissionMap));void 0!==a.thicknessMap&&(n.thicknessMap=b(a.thicknessMap));void 0!==a.sheenColorMap&&(n.sheenColorMap=
b(a.sheenColorMap));void 0!==a.sheenRoughnessMap&&(n.sheenRoughnessMap=b(a.sheenRoughnessMap));return n}setTextures(a){this.textures=a;return this}static createMaterialFromType(a){return new {ShadowMaterial:dk,SpriteMaterial:qi,RawShaderMaterial:ek,ShaderMaterial:de,PointsMaterial:vi,MeshPhysicalMaterial:fk,MeshStandardMaterial:Gi,MeshPhongMaterial:gk,MeshToonMaterial:hk,MeshNormalMaterial:ik,MeshLambertMaterial:jk,MeshDepthMaterial:Nh,MeshDistanceMaterial:Oh,MeshBasicMaterial:Ie,MeshMatcapMaterial:kk,
LineDashedMaterial:lk,LineBasicMaterial:sd,Material:kd}[a]}}class Ni{static decodeText(a){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(a);let b="";for(let h=0,n=a.length;h<n;h++)b+=String.fromCharCode(a[h]);try{return decodeURIComponent(escape(b))}catch(h){return b}}static extractUrlBase(a){const b=a.lastIndexOf("/");return-1===b?"./":a.slice(0,b+1)}static resolveURL(a,b){if("string"!==typeof a||""===a)return"";/^https?:\/\//i.test(b)&&/^\//.test(a)&&(b=b.replace(/(^https?:\/\/[^\/]+).*/i,
"$1"));return/^(https?:)?\/\//i.test(a)||/^data:.*,.*$/i.test(a)||/^blob:.*$/i.test(a)?a:b+a}}class Ak extends gc{constructor(){super();this.isInstancedBufferGeometry=!0;this.type="InstancedBufferGeometry";this.instanceCount=Infinity}copy(a){super.copy(a);this.instanceCount=a.instanceCount;return this}toJSON(){const a=super.toJSON();a.instanceCount=this.instanceCount;a.isInstancedBufferGeometry=!0;return a}}class Bk extends Id{constructor(a){super(a)}load(a,b,h,n){const t=this,C=new xe(t.manager);
C.setPath(t.path);C.setRequestHeader(t.requestHeader);C.setWithCredentials(t.withCredentials);C.load(a,function(G){try{b(t.parse(JSON.parse(G)))}catch(I){n?n(I):console.error(I),t.manager.itemError(a)}},h,n)}parse(a){function b(U,V){if(void 0!==h[V])return h[V];const ba=U.interleavedBuffers[V];var aa=ba.buffer;void 0!==n[aa]?aa=n[aa]:(U=(new Uint32Array(U.arrayBuffers[aa])).buffer,aa=n[aa]=U);aa=new Nb[ba.type](aa);aa=new ch(aa,ba.stride);aa.uuid=ba.uuid;return h[V]=aa}const h={},n={},t=a.isInstancedBufferGeometry?
new Ak:new gc;var C=a.data.index;void 0!==C&&(C=new Nb[C.type](C.array),t.setIndex(new Bc(C,1)));C=a.data.attributes;for(var G in C){var I=C[G],K=void 0;I.isInterleavedBufferAttribute?(K=b(a.data,I.data),K=new Gf(K,I.itemSize,I.offset,I.normalized)):(K=new Nb[I.type](I.array),K=new (I.isInstancedBufferAttribute?Lf:Bc)(K,I.itemSize,I.normalized));void 0!==I.name&&(K.name=I.name);void 0!==I.usage&&K.setUsage(I.usage);void 0!==I.updateRange&&(K.updateRange.offset=I.updateRange.offset,K.updateRange.count=
I.updateRange.count);t.setAttribute(G,K)}if(G=a.data.morphAttributes)for(var M in G){C=G[M];I=[];for(let U=0,V=C.length;U<V;U++){K=C[U];var T=void 0;K.isInterleavedBufferAttribute?(T=b(a.data,K.data),T=new Gf(T,K.itemSize,K.offset,K.normalized)):(T=new Nb[K.type](K.array),T=new Bc(T,K.itemSize,K.normalized));void 0!==K.name&&(T.name=K.name);I.push(T)}t.morphAttributes[M]=I}a.data.morphTargetsRelative&&(t.morphTargetsRelative=!0);M=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==M)for(let U=
0,V=M.length;U!==V;++U)G=M[U],t.addGroup(G.start,G.count,G.materialIndex);M=a.data.boundingSphere;void 0!==M&&(G=new ka,void 0!==M.center&&G.fromArray(M.center),t.boundingSphere=new af(G,M.radius));a.name&&(t.name=a.name);a.userData&&(t.userData=a.userData);return t}}class Vl extends Id{constructor(a){super(a)}load(a,b,h,n){const t=this;var C=""===this.path?Ni.extractUrlBase(a):this.path;this.resourcePath=this.resourcePath||C;C=new xe(this.manager);C.setPath(this.path);C.setRequestHeader(this.requestHeader);
C.setWithCredentials(this.withCredentials);C.load(a,function(G){let I=null;try{I=JSON.parse(G)}catch(K){void 0!==n&&n(K);console.error("THREE:ObjectLoader: Can't parse "+a+".",K.message);return}G=I.metadata;void 0===G||void 0===G.type||"geometry"===G.type.toLowerCase()?(void 0!==n&&n(Error("THREE.ObjectLoader: Can't load "+a)),console.error("THREE.ObjectLoader: Can't load "+a)):t.parse(I,b)},h,n)}async loadAsync(a,b){var h=""===this.path?Ni.extractUrlBase(a):this.path;this.resourcePath=this.resourcePath||
h;h=new xe(this.manager);h.setPath(this.path);h.setRequestHeader(this.requestHeader);h.setWithCredentials(this.withCredentials);b=await h.loadAsync(a,b);b=JSON.parse(b);h=b.metadata;if(void 0===h||void 0===h.type||"geometry"===h.type.toLowerCase())throw Error("THREE.ObjectLoader: Can't load "+a);return await this.parseAsync(b)}parse(a,b){const h=this.parseAnimations(a.animations);var n=this.parseShapes(a.shapes);const t=this.parseGeometries(a.geometries,n);n=this.parseImages(a.images,function(){void 0!==
b&&b(I)});const C=this.parseTextures(a.textures,n),G=this.parseMaterials(a.materials,C),I=this.parseObject(a.object,t,G,C,h);a=this.parseSkeletons(a.skeletons,I);this.bindSkeletons(I,a);if(void 0!==b){a=!1;for(const K in n)if(n[K].data instanceof HTMLImageElement){a=!0;break}!1===a&&b(I)}return I}async parseAsync(a){var b=this.parseAnimations(a.animations),h=this.parseShapes(a.shapes);h=this.parseGeometries(a.geometries,h);var n=await this.parseImagesAsync(a.images);n=this.parseTextures(a.textures,
n);const t=this.parseMaterials(a.materials,n);b=this.parseObject(a.object,h,t,n,b);a=this.parseSkeletons(a.skeletons,b);this.bindSkeletons(b,a);return b}parseShapes(a){const b={};if(void 0!==a)for(let h=0,n=a.length;h<n;h++){const t=(new cf).fromJSON(a[h]);b[t.uuid]=t}return b}parseSkeletons(a,b){const h={},n={};b.traverse(function(t){t.isBone&&(n[t.uuid]=t)});if(void 0!==a)for(let t=0,C=a.length;t<C;t++)b=(new ti).fromJSON(a[t],n),h[b.uuid]=b;return h}parseGeometries(a,b){const h={};if(void 0!==
a){const n=new Bk;for(let t=0,C=a.length;t<C;t++){let G;const I=a[t];switch(I.type){case "BufferGeometry":case "InstancedBufferGeometry":G=n.parse(I);break;default:I.type in ck?G=ck[I.type].fromJSON(I,b):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${I.type}"`)}G.uuid=I.uuid;void 0!==I.name&&(G.name=I.name);void 0!==I.userData&&(G.userData=I.userData);h[I.uuid]=G}}return h}parseMaterials(a,b){const h={},n={};if(void 0!==a){const t=new Mi;t.setTextures(b);for(let C=0,G=a.length;C<G;C++)b=
a[C],void 0===h[b.uuid]&&(h[b.uuid]=t.parse(b)),n[b.uuid]=h[b.uuid]}return n}parseAnimations(a){const b={};if(void 0!==a)for(let h=0;h<a.length;h++){const n=sg.parse(a[h]);b[n.uuid]=n}return b}parseImages(a,b){function h(K){t.manager.itemStart(K);return G.load(K,function(){t.manager.itemEnd(K)},void 0,function(){t.manager.itemError(K);t.manager.itemEnd(K)})}function n(K){return"string"===typeof K?(K=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(K)?K:t.resourcePath+K,h(K)):K.data?{data:new Nb[K.type](K.data),width:K.width,
height:K.height}:null}const t=this,C={};let G;if(void 0!==a&&0<a.length){b=new Ii(b);G=new tg(b);G.setCrossOrigin(this.crossOrigin);for(let K=0,M=a.length;K<M;K++){b=a[K];var I=b.url;if(Array.isArray(I)){const T=[];for(let U=0,V=I.length;U<V;U++){const ba=n(I[U]);null!==ba&&(ba instanceof HTMLImageElement?T.push(ba):T.push(new Kf(ba.data,ba.width,ba.height)))}C[b.uuid]=new Xe(T)}else I=n(b.url),C[b.uuid]=new Xe(I)}}return C}async parseImagesAsync(a){async function b(G){return"string"===typeof G?(G=
/^(\/\/)|([a-z]+:(\/\/)?)/i.test(G)?G:h.resourcePath+G,await t.loadAsync(G)):G.data?{data:new Nb[G.type](G.data),width:G.width,height:G.height}:null}const h=this,n={};let t;if(void 0!==a&&0<a.length){t=new tg(this.manager);t.setCrossOrigin(this.crossOrigin);for(let G=0,I=a.length;G<I;G++){const K=a[G];var C=K.url;if(Array.isArray(C)){const M=[];for(let T=0,U=C.length;T<U;T++){const V=await b(C[T]);null!==V&&(V instanceof HTMLImageElement?M.push(V):M.push(new Kf(V.data,V.width,V.height)))}n[K.uuid]=
new Xe(M)}else C=await b(K.url),n[K.uuid]=new Xe(C)}}return n}parseTextures(a,b){function h(t,C){if("number"===typeof t)return t;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t);return C[t]}const n={};if(void 0!==a)for(let t=0,C=a.length;t<C;t++){const G=a[t];void 0===G.image&&console.warn('THREE.ObjectLoader: No "image" specified for',G.uuid);void 0===b[G.image]&&console.warn("THREE.ObjectLoader: Undefined image",G.image);const I=b[G.image],K=I.data;let M;Array.isArray(K)?
(M=new hg,6===K.length&&(M.needsUpdate=!0)):(M=K&&K.data?new Kf:new Qc,K&&(M.needsUpdate=!0));M.source=I;M.uuid=G.uuid;void 0!==G.name&&(M.name=G.name);void 0!==G.mapping&&(M.mapping=h(G.mapping,Wl));void 0!==G.offset&&M.offset.fromArray(G.offset);void 0!==G.repeat&&M.repeat.fromArray(G.repeat);void 0!==G.center&&M.center.fromArray(G.center);void 0!==G.rotation&&(M.rotation=G.rotation);void 0!==G.wrap&&(M.wrapS=h(G.wrap[0],Ck),M.wrapT=h(G.wrap[1],Ck));void 0!==G.format&&(M.format=G.format);void 0!==
G.internalFormat&&(M.internalFormat=G.internalFormat);void 0!==G.type&&(M.type=G.type);void 0!==G.encoding&&(M.encoding=G.encoding);void 0!==G.minFilter&&(M.minFilter=h(G.minFilter,Dk));void 0!==G.magFilter&&(M.magFilter=h(G.magFilter,Dk));void 0!==G.anisotropy&&(M.anisotropy=G.anisotropy);void 0!==G.flipY&&(M.flipY=G.flipY);void 0!==G.generateMipmaps&&(M.generateMipmaps=G.generateMipmaps);void 0!==G.premultiplyAlpha&&(M.premultiplyAlpha=G.premultiplyAlpha);void 0!==G.unpackAlignment&&(M.unpackAlignment=
G.unpackAlignment);void 0!==G.userData&&(M.userData=G.userData);n[G.uuid]=M}return n}parseObject(a,b,h,n,t){function C(V){void 0===b[V]&&console.warn("THREE.ObjectLoader: Undefined geometry",V);return b[V]}function G(V){if(void 0!==V){if(Array.isArray(V)){const ba=[];for(let aa=0,S=V.length;aa<S;aa++){const ea=V[aa];void 0===h[ea]&&console.warn("THREE.ObjectLoader: Undefined material",ea);ba.push(h[ea])}return ba}void 0===h[V]&&console.warn("THREE.ObjectLoader: Undefined material",V);return h[V]}}
function I(V){void 0===n[V]&&console.warn("THREE.ObjectLoader: Undefined texture",V);return n[V]}let K;switch(a.type){case "Scene":var M=new yj;void 0!==a.background&&(Number.isInteger(a.background)?M.background=new wb(a.background):M.background=I(a.background));void 0!==a.environment&&(M.environment=I(a.environment));void 0!==a.fog&&("Fog"===a.fog.type?M.fog=new pi(a.fog.color,a.fog.near,a.fog.far):"FogExp2"===a.fog.type&&(M.fog=new oi(a.fog.color,a.fog.density)));void 0!==a.backgroundBlurriness&&
(M.backgroundBlurriness=a.backgroundBlurriness);void 0!==a.backgroundIntensity&&(M.backgroundIntensity=a.backgroundIntensity);break;case "PerspectiveCamera":M=new gd(a.fov,a.aspect,a.near,a.far);void 0!==a.focus&&(M.focus=a.focus);void 0!==a.zoom&&(M.zoom=a.zoom);void 0!==a.filmGauge&&(M.filmGauge=a.filmGauge);void 0!==a.filmOffset&&(M.filmOffset=a.filmOffset);void 0!==a.view&&(M.view=Object.assign({},a.view));break;case "OrthographicCamera":M=new bh(a.left,a.right,a.top,a.bottom,a.near,a.far);void 0!==
a.zoom&&(M.zoom=a.zoom);void 0!==a.view&&(M.view=Object.assign({},a.view));break;case "AmbientLight":M=new xk(a.color,a.intensity);break;case "DirectionalLight":M=new wk(a.color,a.intensity);break;case "PointLight":M=new vk(a.color,a.intensity,a.distance,a.decay);break;case "RectAreaLight":M=new yk(a.color,a.intensity,a.width,a.height);break;case "SpotLight":M=new tk(a.color,a.intensity,a.distance,a.angle,a.penumbra,a.decay);break;case "HemisphereLight":M=new qk(a.color,a.groundColor,a.intensity);
break;case "LightProbe":M=(new Ah).fromJSON(a);break;case "SkinnedMesh":M=C(a.geometry);K=G(a.material);M=new Ij(M,K);void 0!==a.bindMode&&(M.bindMode=a.bindMode);void 0!==a.bindMatrix&&M.bindMatrix.fromArray(a.bindMatrix);void 0!==a.skeleton&&(M.skeleton=a.skeleton);break;case "Mesh":M=C(a.geometry);K=G(a.material);M=new dd(M,K);break;case "InstancedMesh":M=C(a.geometry);K=G(a.material);var T=a.instanceMatrix,U=a.instanceColor;M=new Mj(M,K,a.count);M.instanceMatrix=new Lf(new Float32Array(T.array),
16);void 0!==U&&(M.instanceColor=new Lf(new Float32Array(U.array),U.itemSize));break;case "LOD":M=new Dj;break;case "Line":M=new Je(C(a.geometry),G(a.material));break;case "LineLoop":M=new Sj(C(a.geometry),G(a.material));break;case "LineSegments":M=new he(C(a.geometry),G(a.material));break;case "PointCloud":case "Points":M=new Uj(C(a.geometry),G(a.material));break;case "Sprite":M=new Bj(G(a.material));break;case "Group":M=new Ff;break;case "Bone":M=new si;break;default:M=new wc}M.uuid=a.uuid;void 0!==
a.name&&(M.name=a.name);void 0!==a.matrix?(M.matrix.fromArray(a.matrix),void 0!==a.matrixAutoUpdate&&(M.matrixAutoUpdate=a.matrixAutoUpdate),M.matrixAutoUpdate&&M.matrix.decompose(M.position,M.quaternion,M.scale)):(void 0!==a.position&&M.position.fromArray(a.position),void 0!==a.rotation&&M.rotation.fromArray(a.rotation),void 0!==a.quaternion&&M.quaternion.fromArray(a.quaternion),void 0!==a.scale&&M.scale.fromArray(a.scale));void 0!==a.castShadow&&(M.castShadow=a.castShadow);void 0!==a.receiveShadow&&
(M.receiveShadow=a.receiveShadow);a.shadow&&(void 0!==a.shadow.bias&&(M.shadow.bias=a.shadow.bias),void 0!==a.shadow.normalBias&&(M.shadow.normalBias=a.shadow.normalBias),void 0!==a.shadow.radius&&(M.shadow.radius=a.shadow.radius),void 0!==a.shadow.mapSize&&M.shadow.mapSize.fromArray(a.shadow.mapSize),void 0!==a.shadow.camera&&(M.shadow.camera=this.parseObject(a.shadow.camera)));void 0!==a.visible&&(M.visible=a.visible);void 0!==a.frustumCulled&&(M.frustumCulled=a.frustumCulled);void 0!==a.renderOrder&&
(M.renderOrder=a.renderOrder);void 0!==a.userData&&(M.userData=a.userData);void 0!==a.layers&&(M.layers.mask=a.layers);if(void 0!==a.children)for(T=a.children,U=0;U<T.length;U++)M.add(this.parseObject(T[U],b,h,n,t));if(void 0!==a.animations)for(T=a.animations,U=0;U<T.length;U++)M.animations.push(t[T[U]]);if("LOD"===a.type)for(void 0!==a.autoUpdate&&(M.autoUpdate=a.autoUpdate),a=a.levels,t=0;t<a.length;t++)T=a[t],U=M.getObjectByProperty("uuid",T.object),void 0!==U&&M.addLevel(U,T.distance,T.hysteresis);
return M}bindSkeletons(a,b){0!==Object.keys(b).length&&a.traverse(function(h){if(!0===h.isSkinnedMesh&&void 0!==h.skeleton){const n=b[h.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",h.skeleton):h.bind(n,h.bindMatrix)}})}}const Wl={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,CubeUVReflectionMapping:306},Ck={RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},
Dk={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};class Xl extends Id{constructor(a){super(a);this.isImageBitmapLoader=!0;"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported.");this.options={premultiplyAlpha:"none"}}setOptions(a){this.options=
a;return this}load(a,b,h,n){void 0===a&&(a="");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);const t=this,C=df.get(a);if(void 0!==C)return t.manager.itemStart(a),setTimeout(function(){b&&b(C);t.manager.itemEnd(a)},0),C;h={};h.credentials="anonymous"===this.crossOrigin?"same-origin":"include";h.headers=this.requestHeader;fetch(a,h).then(function(G){return G.blob()}).then(function(G){return createImageBitmap(G,Object.assign(t.options,{colorSpaceConversion:"none"}))}).then(function(G){df.add(a,
G);b&&b(G);t.manager.itemEnd(a)}).catch(function(G){n&&n(G);t.manager.itemError(a);t.manager.itemEnd(a)});t.manager.itemStart(a)}}let Bh;class Oi{static getContext(){void 0===Bh&&(Bh=new (window.AudioContext||window.webkitAudioContext));return Bh}static setContext(a){Bh=a}}class Yl extends Id{constructor(a){super(a)}load(a,b,h,n){const t=this,C=new xe(this.manager);C.setResponseType("arraybuffer");C.setPath(this.path);C.setRequestHeader(this.requestHeader);C.setWithCredentials(this.withCredentials);
C.load(a,function(G){try{const I=G.slice(0);Oi.getContext().decodeAudioData(I,function(K){b(K)})}catch(I){n?n(I):console.error(I),t.manager.itemError(a)}},h,n)}}class Zl extends Ah{constructor(a,b,h=1){super(void 0,h);this.isHemisphereLightProbe=!0;a=(new wb).set(a);h=(new wb).set(b);b=new ka(a.r,a.g,a.b);a=new ka(h.r,h.g,h.b);h=Math.sqrt(Math.PI);const n=h*Math.sqrt(.75);this.sh.coefficients[0].copy(b).add(a).multiplyScalar(h);this.sh.coefficients[1].copy(b).sub(a).multiplyScalar(n)}}class $l extends Ah{constructor(a,
b=1){super(void 0,b);this.isAmbientLightProbe=!0;a=(new wb).set(a);this.sh.coefficients[0].set(a.r,a.g,a.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const Ek=new $b,Fk=new $b,ef=new $b;class am{constructor(){this.type="StereoCamera";this.aspect=1;this.eyeSep=.064;this.cameraL=new gd;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new gd;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1;this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,
eyeSep:null}}update(a){const b=this._cache;if(b.focus!==a.focus||b.fov!==a.fov||b.aspect!==a.aspect*this.aspect||b.near!==a.near||b.far!==a.far||b.zoom!==a.zoom||b.eyeSep!==this.eyeSep){b.focus=a.focus;b.fov=a.fov;b.aspect=a.aspect*this.aspect;b.near=a.near;b.far=a.far;b.zoom=a.zoom;b.eyeSep=this.eyeSep;ef.copy(a.projectionMatrix);var h=b.eyeSep/2;const n=h*b.near/b.focus,t=b.near*Math.tan(Aa*b.fov*.5)/b.zoom;let C;Fk.elements[12]=-h;Ek.elements[12]=h;h=-t*b.aspect+n;C=t*b.aspect+n;ef.elements[0]=
2*b.near/(C-h);ef.elements[8]=(C+h)/(C-h);this.cameraL.projectionMatrix.copy(ef);h=-t*b.aspect-n;C=t*b.aspect-n;ef.elements[0]=2*b.near/(C-h);ef.elements[8]=(C+h)/(C-h);this.cameraR.projectionMatrix.copy(ef)}this.cameraL.matrixWorld.copy(a.matrixWorld).multiply(Fk);this.cameraR.matrixWorld.copy(a.matrixWorld).multiply(Ek)}}class Gk{constructor(a=!0){this.autoStart=a;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1}start(){this.oldTime=this.startTime=Lg();this.elapsedTime=0;this.running=
!0}stop(){this.getElapsedTime();this.autoStart=this.running=!1}getElapsedTime(){this.getDelta();return this.elapsedTime}getDelta(){let a=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const b=Lg();a=(b-this.oldTime)/1E3;this.oldTime=b;this.elapsedTime+=a}return a}}const ff=new ka,Hk=new zb,bm=new ka,gf=new ka;class cm extends wc{constructor(){super();this.type="AudioListener";this.context=Oi.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);
this.filter=null;this.timeDelta=0;this._clock=new Gk}getInput(){return this.gain}removeFilter(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null);return this}getFilter(){return this.filter}setFilter(a){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination);this.filter=a;this.gain.connect(this.filter);
this.filter.connect(this.context.destination);return this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(a){this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01);return this}updateMatrixWorld(a){super.updateMatrixWorld(a);a=this.context.listener;const b=this.up;this.timeDelta=this._clock.getDelta();this.matrixWorld.decompose(ff,Hk,bm);gf.set(0,0,-1).applyQuaternion(Hk);if(a.positionX){const h=this.context.currentTime+this.timeDelta;a.positionX.linearRampToValueAtTime(ff.x,
h);a.positionY.linearRampToValueAtTime(ff.y,h);a.positionZ.linearRampToValueAtTime(ff.z,h);a.forwardX.linearRampToValueAtTime(gf.x,h);a.forwardY.linearRampToValueAtTime(gf.y,h);a.forwardZ.linearRampToValueAtTime(gf.z,h);a.upX.linearRampToValueAtTime(b.x,h);a.upY.linearRampToValueAtTime(b.y,h);a.upZ.linearRampToValueAtTime(b.z,h)}else a.setPosition(ff.x,ff.y,ff.z),a.setOrientation(gf.x,gf.y,gf.z,b.x,b.y,b.z)}}class Ik extends wc{constructor(a){super();this.type="Audio";this.listener=a;this.context=
a.context;this.gain=this.context.createGain();this.gain.connect(a.getInput());this.autoplay=!1;this.buffer=null;this.detune=0;this.loop=!1;this.offset=this.loopEnd=this.loopStart=0;this.duration=void 0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.source=null;this.sourceType="empty";this._progress=this._startedAt=0;this._connected=!1;this.filters=[]}getOutput(){return this.gain}setNodeSource(a){this.hasPlaybackControl=!1;this.sourceType="audioNode";this.source=a;this.connect();
return this}setMediaElementSource(a){this.hasPlaybackControl=!1;this.sourceType="mediaNode";this.source=this.context.createMediaElementSource(a);this.connect();return this}setMediaStreamSource(a){this.hasPlaybackControl=!1;this.sourceType="mediaStreamNode";this.source=this.context.createMediaStreamSource(a);this.connect();return this}setBuffer(a){this.buffer=a;this.sourceType="buffer";this.autoplay&&this.play();return this}play(a=0){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");
else if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this._startedAt=this.context.currentTime+a,a=this.context.createBufferSource(),a.buffer=this.buffer,a.loop=this.loop,a.loopStart=this.loopStart,a.loopEnd=this.loopEnd,a.onended=this.onEnded.bind(this),a.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=a,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1===
this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress%=this.duration||this.buffer.duration),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this._progress=0,null!==this.source&&(this.source.stop(),
this.source.onended=null),this.isPlaying=!1,this}connect(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(let a=1,b=this.filters.length;a<b;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());this._connected=!0;return this}disconnect(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(let a=1,b=this.filters.length;a<b;a++)this.filters[a-1].disconnect(this.filters[a]);
this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());this._connected=!1;return this}getFilters(){return this.filters}setFilters(a){a||(a=[]);!0===this._connected?(this.disconnect(),this.filters=a.slice(),this.connect()):this.filters=a.slice();return this}setDetune(a){this.detune=a;if(void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(a){return this.setFilters(a?
[a]:[])}setPlaybackRate(a){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.playbackRate=a,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(a){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return this.loop=a,!0===this.isPlaying&&(this.source.loop=this.loop),this}setLoopStart(a){this.loopStart=a;return this}setLoopEnd(a){this.loopEnd=a;return this}getVolume(){return this.gain.gain.value}setVolume(a){this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01);return this}}const hf=new ka,Jk=new zb,dm=new ka,jf=new ka;class em extends Ik{constructor(a){super(a);this.panner=this.context.createPanner();this.panner.panningModel="HRTF";this.panner.connect(this.gain)}disconnect(){super.disconnect();
this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(a){this.panner.refDistance=a;return this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(a){this.panner.rolloffFactor=a;return this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(a){this.panner.distanceModel=a;return this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(a){this.panner.maxDistance=a;return this}setDirectionalCone(a,
b,h){this.panner.coneInnerAngle=a;this.panner.coneOuterAngle=b;this.panner.coneOuterGain=h;return this}updateMatrixWorld(a){super.updateMatrixWorld(a);if(!0!==this.hasPlaybackControl||!1!==this.isPlaying)if(this.matrixWorld.decompose(hf,Jk,dm),jf.set(0,0,1).applyQuaternion(Jk),a=this.panner,a.positionX){const b=this.context.currentTime+this.listener.timeDelta;a.positionX.linearRampToValueAtTime(hf.x,b);a.positionY.linearRampToValueAtTime(hf.y,b);a.positionZ.linearRampToValueAtTime(hf.z,b);a.orientationX.linearRampToValueAtTime(jf.x,
b);a.orientationY.linearRampToValueAtTime(jf.y,b);a.orientationZ.linearRampToValueAtTime(jf.z,b)}else a.setPosition(hf.x,hf.y,hf.z),a.setOrientation(jf.x,jf.y,jf.z)}}class fm{constructor(a,b=2048){this.analyser=a.context.createAnalyser();this.analyser.fftSize=b;this.data=new Uint8Array(this.analyser.frequencyBinCount);a.getOutput().connect(this.analyser)}getFrequencyData(){this.analyser.getByteFrequencyData(this.data);return this.data}getAverageFrequency(){let a=0;const b=this.getFrequencyData();
for(let h=0;h<b.length;h++)a+=b[h];return a/b.length}}class Kk{constructor(a,b,h){this.binding=a;this.valueSize=h;let n;switch(b){case "quaternion":a=this._slerp;b=this._slerpAdditive;n=this._setAdditiveIdentityQuaternion;this.buffer=new Float64Array(6*h);this._workIndex=5;break;case "string":case "bool":b=a=this._select;n=this._setAdditiveIdentityOther;this.buffer=Array(5*h);break;default:a=this._lerp,b=this._lerpAdditive,n=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*h)}this._mixBufferRegion=
a;this._mixBufferRegionAdditive=b;this._setIdentity=n;this._origIndex=3;this._addIndex=4;this.referenceCount=this.useCount=this.cumulativeWeightAdditive=this.cumulativeWeight=0}accumulate(a,b){const h=this.buffer,n=this.valueSize;a=a*n+n;var t=this.cumulativeWeight;if(0===t){for(t=0;t!==n;++t)h[a+t]=h[t];t=b}else t+=b,this._mixBufferRegion(h,a,0,b/t,n);this.cumulativeWeight=t}accumulateAdditive(a){const b=this.buffer,h=this.valueSize,n=h*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity();
this._mixBufferRegionAdditive(b,n,0,a,h);this.cumulativeWeightAdditive+=a}apply(a){const b=this.valueSize,h=this.buffer;a=a*b+b;const n=this.cumulativeWeight,t=this.cumulativeWeightAdditive,C=this.binding;this.cumulativeWeightAdditive=this.cumulativeWeight=0;1>n&&this._mixBufferRegion(h,a,b*this._origIndex,1-n,b);0<t&&this._mixBufferRegionAdditive(h,a,this._addIndex*b,1,b);for(let G=b,I=b+b;G!==I;++G)if(h[G]!==h[G+b]){C.setValue(h,a);break}}saveOriginalState(){const a=this.buffer,b=this.valueSize,
h=b*this._origIndex;this.binding.getValue(a,h);for(let n=b,t=h;n!==t;++n)a[n]=a[h+n%b];this._setIdentity();this.cumulativeWeightAdditive=this.cumulativeWeight=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){var a=this._addIndex*this.valueSize;const b=a+this.valueSize;for(;a<b;a++)this.buffer[a]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric();this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const a=
this._origIndex*this.valueSize,b=this._addIndex*this.valueSize;for(let h=0;h<this.valueSize;h++)this.buffer[b+h]=this.buffer[a+h]}_select(a,b,h,n,t){if(.5<=n)for(n=0;n!==t;++n)a[b+n]=a[h+n]}_slerp(a,b,h,n){zb.slerpFlat(a,b,a,b,a,h,n)}_slerpAdditive(a,b,h,n,t){t*=this._workIndex;zb.multiplyQuaternionsFlat(a,t,a,b,a,h);zb.slerpFlat(a,b,a,b,a,t,n)}_lerp(a,b,h,n,t){const C=1-n;for(let G=0;G!==t;++G){const I=b+G;a[I]=a[I]*C+a[h+G]*n}}_lerpAdditive(a,b,h,n,t){for(let C=0;C!==t;++C){const G=b+C;a[G]+=a[h+
C]*n}}}const gm=RegExp("[\\[\\]\\.:\\/]","g"),hm=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),im=/(WCOD+)?/.source.replace("WCOD","[^\\[\\]:\\/]"),jm=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),km=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),lm=new RegExp("^"+hm+im+jm+km+"$"),mm=["material","materials","bones","map"];class nm{constructor(a,b,h){h=h||vc.parseTrackName(b);this._targetGroup=a;this._bindings=a.subscribe_(b,h)}getValue(a,b){this.bind();
const h=this._bindings[this._targetGroup.nCachedObjects_];void 0!==h&&h.getValue(a,b)}setValue(a,b){const h=this._bindings;for(let n=this._targetGroup.nCachedObjects_,t=h.length;n!==t;++n)h[n].setValue(a,b)}bind(){const a=this._bindings;for(let b=this._targetGroup.nCachedObjects_,h=a.length;b!==h;++b)a[b].bind()}unbind(){const a=this._bindings;for(let b=this._targetGroup.nCachedObjects_,h=a.length;b!==h;++b)a[b].unbind()}}class vc{constructor(a,b,h){this.path=b;this.parsedPath=h||vc.parseTrackName(b);
this.node=vc.findNode(a,this.parsedPath.nodeName);this.rootNode=a;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}static create(a,b,h){return a&&a.isAnimationObjectGroup?new vc.Composite(a,b,h):new vc(a,b,h)}static sanitizeNodeName(a){return a.replace(/\s/g,"_").replace(gm,"")}static parseTrackName(a){var b=lm.exec(a);if(null===b)throw Error("PropertyBinding: Cannot parse trackName: "+a);b={nodeName:b[2],objectName:b[3],objectIndex:b[4],propertyName:b[5],propertyIndex:b[6]};
const h=b.nodeName&&b.nodeName.lastIndexOf(".");if(void 0!==h&&-1!==h){const n=b.nodeName.substring(h+1);-1!==mm.indexOf(n)&&(b.nodeName=b.nodeName.substring(0,h),b.objectName=n)}if(null===b.propertyName||0===b.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+a);return b}static findNode(a,b){if(void 0===b||""===b||"."===b||-1===b||b===a.name||b===a.uuid)return a;if(a.skeleton){const h=a.skeleton.getBoneByName(b);if(void 0!==h)return h}if(a.children){const h=
function(n){for(let C=0;C<n.length;C++){var t=n[C];if(t.name===b||t.uuid===b||(t=h(t.children)))return t}return null};if(a=h(a.children))return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(a,b){a[b]=this.targetObject[this.propertyName]}_getValue_array(a,b){const h=this.resolvedProperty;for(let n=0,t=h.length;n!==t;++n)a[b++]=h[n]}_getValue_arrayElement(a,b){a[b]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(a,b){this.resolvedProperty.toArray(a,b)}_setValue_direct(a,
b){this.targetObject[this.propertyName]=a[b]}_setValue_direct_setNeedsUpdate(a,b){this.targetObject[this.propertyName]=a[b];this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(a,b){this.targetObject[this.propertyName]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(a,b){const h=this.resolvedProperty;for(let n=0,t=h.length;n!==t;++n)h[n]=a[b++]}_setValue_array_setNeedsUpdate(a,b){const h=this.resolvedProperty;for(let n=0,t=h.length;n!==t;++n)h[n]=a[b++];this.targetObject.needsUpdate=
!0}_setValue_array_setMatrixWorldNeedsUpdate(a,b){const h=this.resolvedProperty;for(let n=0,t=h.length;n!==t;++n)h[n]=a[b++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(a,b){this.resolvedProperty[this.propertyIndex]=a[b]}_setValue_arrayElement_setNeedsUpdate(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.matrixWorldNeedsUpdate=
!0}_setValue_fromArray(a,b){this.resolvedProperty.fromArray(a,b)}_setValue_fromArray_setNeedsUpdate(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(a,b){this.bind();this.getValue(a,b)}_setValue_unbound(a,b){this.bind();this.setValue(a,b)}bind(){let a=this.node;var b=this.parsedPath,h=b.objectName;const n=b.propertyName;let t=
b.propertyIndex;a||(this.node=a=vc.findNode(this.rootNode,b.nodeName));this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(a){if(h){var C=b.objectIndex;switch(h){case "materials":if(!a.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!a.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}a=
a.material.materials;break;case "bones":if(!a.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}a=a.skeleton.bones;for(h=0;h<a.length;h++)if(a[h].name===C){C=h;break}break;case "map":if("map"in a){a=a.map;break}if(!a.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!a.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",
this);return}a=a.material.map;break;default:if(void 0===a[h]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}a=a[h]}if(void 0!==C){if(void 0===a[C]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,a);return}a=a[C]}}C=a[n];if(void 0===C)console.error("THREE.PropertyBinding: Trying to update property for track: "+b.nodeName+"."+n+" but it wasn't found.",a);else{b=this.Versioning.None;this.targetObject=
a;void 0!==a.needsUpdate?b=this.Versioning.NeedsUpdate:void 0!==a.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate);h=this.BindingType.Direct;if(void 0!==t){if("morphTargetInfluences"===n){if(!a.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!a.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",
this);return}void 0!==a.morphTargetDictionary[t]&&(t=a.morphTargetDictionary[t])}h=this.BindingType.ArrayElement;this.resolvedProperty=C;this.propertyIndex=t}else void 0!==C.fromArray&&void 0!==C.toArray?(h=this.BindingType.HasFromToArray,this.resolvedProperty=C):Array.isArray(C)?(h=this.BindingType.EntireArray,this.resolvedProperty=C):this.propertyName=n;this.getValue=this.GetterByBindingType[h];this.setValue=this.SetterByBindingTypeAndVersioning[h][b]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+
this.path+" but it wasn't found.")}unbind(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}}vc.Composite=nm;vc.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};vc.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};vc.prototype.GetterByBindingType=[vc.prototype._getValue_direct,vc.prototype._getValue_array,vc.prototype._getValue_arrayElement,vc.prototype._getValue_toArray];vc.prototype.SetterByBindingTypeAndVersioning=
[[vc.prototype._setValue_direct,vc.prototype._setValue_direct_setNeedsUpdate,vc.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[vc.prototype._setValue_array,vc.prototype._setValue_array_setNeedsUpdate,vc.prototype._setValue_array_setMatrixWorldNeedsUpdate],[vc.prototype._setValue_arrayElement,vc.prototype._setValue_arrayElement_setNeedsUpdate,vc.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[vc.prototype._setValue_fromArray,vc.prototype._setValue_fromArray_setNeedsUpdate,vc.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];
class om{constructor(){this.isAnimationObjectGroup=!0;this.uuid=q();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;const a={};this._indicesByUUID=a;for(let h=0,n=arguments.length;h!==n;++h)a[arguments[h].uuid]=h;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};const b=this;this.stats={objects:{get total(){return b._objects.length},get inUse(){return this.total-b.nCachedObjects_}},get bindingsPerObject(){return b._bindings.length}}}add(){const a=
this._objects,b=this._indicesByUUID,h=this._paths,n=this._parsedPaths,t=this._bindings,C=t.length;let G=void 0,I=a.length,K=this.nCachedObjects_;for(let U=0,V=arguments.length;U!==V;++U){const ba=arguments[U];var M=ba.uuid;let aa=b[M];if(void 0===aa){aa=I++;b[M]=aa;a.push(ba);for(let S=0,ea=C;S!==ea;++S)t[S].push(new vc(ba,h[S],n[S]))}else if(aa<K){G=a[aa];const S=--K;var T=a[S];b[T.uuid]=aa;a[aa]=T;b[M]=S;a[S]=ba;for(let ea=0,va=C;ea!==va;++ea)M=t[ea],T=M[aa],M[aa]=M[S],void 0===T&&(T=new vc(ba,
h[ea],n[ea])),M[S]=T}else a[aa]!==G&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=K}remove(){const a=this._objects,b=this._indicesByUUID,h=this._bindings,n=h.length;let t=this.nCachedObjects_;for(let I=0,K=arguments.length;I!==K;++I){var C=arguments[I],G=C.uuid;const M=b[G];if(void 0!==M&&M>=t){const T=t++,U=a[T];b[U.uuid]=M;a[M]=U;b[G]=T;a[T]=C;for(let V=0,ba=
n;V!==ba;++V)C=h[V],G=C[M],C[M]=C[T],C[T]=G}}this.nCachedObjects_=t}uncache(){const a=this._objects,b=this._indicesByUUID,h=this._bindings,n=h.length;let t=this.nCachedObjects_,C=a.length;for(let T=0,U=arguments.length;T!==U;++T){var G=arguments[T].uuid;const V=b[G];if(void 0!==V)if(delete b[G],V<t){G=--t;var I=a[G],K=--C,M=a[K];b[I.uuid]=V;a[V]=I;b[M.uuid]=G;a[G]=M;a.pop();for(let ba=0,aa=n;ba!==aa;++ba)I=h[ba],M=I[K],I[V]=I[G],I[G]=M,I.pop()}else{G=--C;K=a[G];0<G&&(b[K.uuid]=V);a[V]=K;a.pop();for(let ba=
0,aa=n;ba!==aa;++ba)K=h[ba],K[V]=K[G],K.pop()}}this.nCachedObjects_=t}subscribe_(a,b){const h=this._bindingsIndicesByPath;let n=h[a];const t=this._bindings;if(void 0!==n)return t[n];const C=this._paths,G=this._parsedPaths,I=this._objects,K=this.nCachedObjects_,M=Array(I.length);n=t.length;h[a]=n;C.push(a);G.push(b);t.push(M);for(let T=K,U=I.length;T!==U;++T)M[T]=new vc(I[T],a,b);return M}unsubscribe_(a){const b=this._bindingsIndicesByPath,h=b[a];if(void 0!==h){const n=this._paths,t=this._parsedPaths,
C=this._bindings,G=C.length-1,I=C[G];b[a[G]]=h;C[h]=I;C.pop();t[h]=t[G];t.pop();n[h]=n[G];n.pop()}}}class pm{constructor(a,b,h=null,n=b.blendMode){this._mixer=a;this._clip=b;this._localRoot=h;this.blendMode=n;a=b.tracks;b=a.length;h=Array(b);n={endingStart:2400,endingEnd:2400};for(let t=0;t!==b;++t){const C=a[t].createInterpolant(null);h[t]=C;C.settings=n}this._interpolantSettings=n;this._interpolants=h;this._propertyBindings=Array(b);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=
this._cacheIndex=null;this.loop=2201;this._loopCount=-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}play(){this._mixer._activateAction(this);return this}stop(){this._mixer._deactivateAction(this);return this.reset()}reset(){this.paused=!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()}isRunning(){return this.enabled&&
!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(a){this._startTime=a;return this}setLoop(a,b){this.loop=a;this.repetitions=b;return this}setEffectiveWeight(a){this.weight=a;this._effectiveWeight=this.enabled?a:0;return this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(a){return this._scheduleFading(a,0,1)}fadeOut(a){return this._scheduleFading(a,1,0)}crossFadeFrom(a,
b,h){a.fadeOut(b);this.fadeIn(b);if(h){h=this._clip.duration;const n=a._clip.duration,t=h/n;a.warp(1,n/h,b);this.warp(t,1,b)}return this}crossFadeTo(a,b,h){return a.crossFadeFrom(this,b,h)}stopFading(){const a=this._weightInterpolant;null!==a&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this}setEffectiveTimeScale(a){this.timeScale=a;this._effectiveTimeScale=this.paused?0:a;return this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(a){this.timeScale=
this._clip.duration/a;return this.stopWarping()}syncWith(a){this.time=a.time;this.timeScale=a.timeScale;return this.stopWarping()}halt(a){return this.warp(this._effectiveTimeScale,0,a)}warp(a,b,h){var n=this._mixer;const t=n.time,C=this.timeScale;var G=this._timeScaleInterpolant;null===G&&(this._timeScaleInterpolant=G=n._lendControlInterpolant());n=G.parameterPositions;G=G.sampleValues;n[0]=t;n[1]=t+h;G[0]=a/C;G[1]=b/C;return this}stopWarping(){const a=this._timeScaleInterpolant;null!==a&&(this._timeScaleInterpolant=
null,this._mixer._takeBackControlInterpolant(a));return this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(a,b,h,n){if(this.enabled){var t=this._startTime;null!==t&&(b=(a-t)*h,0>b||0===h?b=0:(this._startTime=null,b*=h));b*=this._updateTimeScale(a);h=this._updateTime(b);a=this._updateWeight(a);if(0<a)switch(b=this._interpolants,t=this._propertyBindings,this.blendMode){case 2501:for(let C=0,G=b.length;C!==G;++C)b[C].evaluate(h),
t[C].accumulateAdditive(a);break;default:for(let C=0,G=b.length;C!==G;++C)b[C].evaluate(h),t[C].accumulate(n,a)}}else this._updateWeight(a)}_updateWeight(a){let b=0;if(this.enabled){b=this.weight;const h=this._weightInterpolant;if(null!==h){const n=h.evaluate(a)[0];b*=n;a>h.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=b}_updateTimeScale(a){let b=0;if(!this.paused){b=this.timeScale;const h=this._timeScaleInterpolant;if(null!==h){const n=h.evaluate(a)[0];
b*=n;a>h.parameterPositions[1]&&(this.stopWarping(),0===b?this.paused=!0:this.timeScale=b)}}return this._effectiveTimeScale=b}_updateTime(a){const b=this._clip.duration;var h=this.loop;let n=this.time+a,t=this._loopCount;const C=2202===h;if(0===a)return-1===t?n:C&&1===(t&1)?b-n:n;if(2200===h)a:{if(-1===t&&(this._loopCount=0,this._setEndings(!0,!0,!1)),n>=b)n=b;else if(0>n)n=0;else{this.time=n;break a}this.clampWhenFinished?this.paused=!0:this.enabled=!1;this.time=n;this._mixer.dispatchEvent({type:"finished",
action:this,direction:0>a?-1:1})}else{-1===t&&(0<=a?(t=0,this._setEndings(!0,0===this.repetitions,C)):this._setEndings(0===this.repetitions,!0,C));if(n>=b||0>n){h=Math.floor(n/b);n-=b*h;t+=Math.abs(h);const G=this.repetitions-t;0>=G?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n=0<a?b:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<a?1:-1})):(1===G?(a=0>a,this._setEndings(a,!a,C)):this._setEndings(!1,!1,C),this._loopCount=t,this.time=n,this._mixer.dispatchEvent({type:"loop",
action:this,loopDelta:h}))}else this.time=n;if(C&&1===(t&1))return b-n}return n}_setEndings(a,b,h){const n=this._interpolantSettings;h?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=a?this.zeroSlopeAtStart?2401:2400:2402,n.endingEnd=b?this.zeroSlopeAtEnd?2401:2400:2402)}_scheduleFading(a,b,h){var n=this._mixer;const t=n.time;var C=this._weightInterpolant;null===C&&(this._weightInterpolant=C=n._lendControlInterpolant());n=C.parameterPositions;C=C.sampleValues;n[0]=t;C[0]=b;n[1]=t+a;C[1]=h;return this}}
const qm=new Float32Array(1);class rm extends Od{constructor(a){super();this._root=a;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1}_bindAction(a,b){const h=a._localRoot||this._root,n=a._clip.tracks,t=n.length,C=a._propertyBindings;a=a._interpolants;const G=h.uuid;var I=this._bindingsByRootAndName;let K=I[G];void 0===K&&(K={},I[G]=K);for(I=0;I!==t;++I){const M=n[I],T=M.name;let U=K[T];if(void 0!==U)++U.referenceCount;else{U=C[I];if(void 0!==U){null===U._cacheIndex&&(++U.referenceCount,
this._addInactiveBinding(U,G,T));continue}U=new Kk(vc.create(h,T,b&&b._propertyBindings[I].binding.parsedPath),M.ValueTypeName,M.getValueSize());++U.referenceCount;this._addInactiveBinding(U,G,T)}C[I]=U;a[I].resultBuffer=U.buffer}}_activateAction(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var b=(a._localRoot||this._root).uuid,h=a._clip.uuid;const n=this._actionsByClip[h];this._bindAction(a,n&&n.knownActions[0]);this._addInactiveAction(a,h,b)}b=a._propertyBindings;for(let n=0,t=b.length;n!==
t;++n)h=b[n],0===h.useCount++&&(this._lendBinding(h),h.saveOriginalState());this._lendAction(a)}}_deactivateAction(a){if(this._isActiveAction(a)){const b=a._propertyBindings;for(let h=0,n=b.length;h!==n;++h){const t=b[h];0===--t.useCount&&(t.restoreOriginalState(),this._takeBackBinding(t))}this._takeBackAction(a)}}_initMemoryManager(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];
this._nActiveControlInterpolants=0;const a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}}_isActiveAction(a){a=a._cacheIndex;return null!==a&&a<this._nActiveActions}_addInactiveAction(a,b,h){const n=this._actions,t=this._actionsByClip;
let C=t[b];void 0===C?(C={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,t[b]=C):(b=C.knownActions,a._byClipCacheIndex=b.length,b.push(a));a._cacheIndex=n.length;n.push(a);C.actionByRoot[h]=a}_removeInactiveAction(a){var b=this._actions,h=b[b.length-1],n=a._cacheIndex;h._cacheIndex=n;b[n]=h;b.pop();a._cacheIndex=null;b=a._clip.uuid;h=this._actionsByClip;n=h[b];const t=n.knownActions,C=t[t.length-1],G=a._byClipCacheIndex;C._byClipCacheIndex=G;t[G]=C;t.pop();a._byClipCacheIndex=null;delete n.actionByRoot[(a._localRoot||
this._root).uuid];0===t.length&&delete h[b];this._removeInactiveBindingsForAction(a)}_removeInactiveBindingsForAction(a){a=a._propertyBindings;for(let b=0,h=a.length;b!==h;++b){const n=a[b];0===--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(a){const b=this._actions,h=a._cacheIndex,n=this._nActiveActions++,t=b[n];a._cacheIndex=n;b[n]=a;t._cacheIndex=h;b[h]=t}_takeBackAction(a){const b=this._actions,h=a._cacheIndex,n=--this._nActiveActions,t=b[n];a._cacheIndex=n;b[n]=a;t._cacheIndex=
h;b[h]=t}_addInactiveBinding(a,b,h){const n=this._bindingsByRootAndName,t=this._bindings;let C=n[b];void 0===C&&(C={},n[b]=C);C[h]=a;a._cacheIndex=t.length;t.push(a)}_removeInactiveBinding(a){const b=this._bindings;var h=a.binding;const n=h.rootNode.uuid;h=h.path;const t=this._bindingsByRootAndName,C=t[n],G=b[b.length-1];a=a._cacheIndex;G._cacheIndex=a;b[a]=G;b.pop();delete C[h];0===Object.keys(C).length&&delete t[n]}_lendBinding(a){const b=this._bindings,h=a._cacheIndex,n=this._nActiveBindings++,
t=b[n];a._cacheIndex=n;b[n]=a;t._cacheIndex=h;b[h]=t}_takeBackBinding(a){const b=this._bindings,h=a._cacheIndex,n=--this._nActiveBindings,t=b[n];a._cacheIndex=n;b[n]=a;t._cacheIndex=h;b[h]=t}_lendControlInterpolant(){const a=this._controlInterpolants,b=this._nActiveControlInterpolants++;let h=a[b];void 0===h&&(h=new Hi(new Float32Array(2),new Float32Array(2),1,qm),h.__cacheIndex=b,a[b]=h);return h}_takeBackControlInterpolant(a){const b=this._controlInterpolants,h=a.__cacheIndex,n=--this._nActiveControlInterpolants,
t=b[n];a.__cacheIndex=n;b[n]=a;t.__cacheIndex=h;b[h]=t}clipAction(a,b,h){var n=b||this._root;const t=n.uuid;n="string"===typeof a?sg.findByName(n,a):a;a=null!==n?n.uuid:a;const C=this._actionsByClip[a];var G=null;void 0===h&&(h=null!==n?n.blendMode:2500);if(void 0!==C){G=C.actionByRoot[t];if(void 0!==G&&G.blendMode===h)return G;G=C.knownActions[0];null===n&&(n=G._clip)}if(null===n)return null;b=new pm(this,n,b,h);this._bindAction(b,G);this._addInactiveAction(b,a,t);return b}existingAction(a,b){var h=
b||this._root;b=h.uuid;h="string"===typeof a?sg.findByName(h,a):a;a=this._actionsByClip[h?h.uuid:a];return void 0!==a?a.actionByRoot[b]||null:null}stopAllAction(){const a=this._actions;var b=this._nActiveActions;for(--b;0<=b;--b)a[b].stop();return this}update(a){a*=this.timeScale;var b=this._actions,h=this._nActiveActions;const n=this.time+=a,t=Math.sign(a),C=this._accuIndex^=1;for(let G=0;G!==h;++G)b[G]._update(n,a,t,C);a=this._bindings;b=this._nActiveBindings;for(h=0;h!==b;++h)a[h].apply(C);return this}setTime(a){this.time=
0;for(let b=0;b<this._actions.length;b++)this._actions[b].time=0;return this.update(a)}getRoot(){return this._root}uncacheClip(a){const b=this._actions;a=a.uuid;const h=this._actionsByClip;var n=h[a];if(void 0!==n){n=n.knownActions;for(let t=0,C=n.length;t!==C;++t){const G=n[t];this._deactivateAction(G);const I=G._cacheIndex,K=b[b.length-1];G._cacheIndex=null;G._byClipCacheIndex=null;K._cacheIndex=I;b[I]=K;b.pop();this._removeInactiveBindingsForAction(G)}delete h[a]}}uncacheRoot(a){a=a.uuid;const b=
this._actionsByClip;for(var h in b){const n=b[h].actionByRoot[a];void 0!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}h=this._bindingsByRootAndName[a];if(void 0!==h)for(const n in h)a=h[n],a.restoreOriginalState(),this._removeInactiveBinding(a)}uncacheAction(a,b){a=this.existingAction(a,b);null!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}}class Lk{constructor(a){this.value=a}clone(){return new Lk(void 0===this.value.clone?this.value:this.value.clone())}}let sm=
0;class tm extends Od{constructor(){super();this.isUniformsGroup=!0;Object.defineProperty(this,"id",{value:sm++});this.name="";this.usage=35044;this.uniforms=[]}add(a){this.uniforms.push(a);return this}remove(a){a=this.uniforms.indexOf(a);-1!==a&&this.uniforms.splice(a,1);return this}setName(a){this.name=a;return this}setUsage(a){this.usage=a;return this}dispose(){this.dispatchEvent({type:"dispose"});return this}copy(a){this.name=a.name;this.usage=a.usage;a=a.uniforms;this.uniforms.length=0;for(let b=
0,h=a.length;b<h;b++)this.uniforms.push(a[b].clone());return this}clone(){return(new this.constructor).copy(this)}}class um extends ch{constructor(a,b,h=1){super(a,b);this.isInstancedInterleavedBuffer=!0;this.meshPerAttribute=h}copy(a){super.copy(a);this.meshPerAttribute=a.meshPerAttribute;return this}clone(a){a=super.clone(a);a.meshPerAttribute=this.meshPerAttribute;return a}toJSON(a){a=super.toJSON(a);a.isInstancedInterleavedBuffer=!0;a.meshPerAttribute=this.meshPerAttribute;return a}}class vm{constructor(a,
b,h,n,t){this.isGLBufferAttribute=!0;this.name="";this.buffer=a;this.type=b;this.itemSize=h;this.elementSize=n;this.count=t;this.version=0}set needsUpdate(a){!0===a&&this.version++}setBuffer(a){this.buffer=a;return this}setType(a,b){this.type=a;this.elementSize=b;return this}setItemSize(a){this.itemSize=a;return this}setCount(a){this.count=a;return this}}class wm{constructor(a,b,h=0,n=Infinity){this.ray=new eg(a,b);this.near=h;this.far=n;this.camera=null;this.layers=new Cg;this.params={Mesh:{},Line:{threshold:1},
LOD:{},Points:{threshold:1},Sprite:{}}}set(a,b){this.ray.set(a,b)}setFromCamera(a,b){b.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(b.matrixWorld),this.ray.direction.set(a.x,a.y,.5).unproject(b).sub(this.ray.origin).normalize(),this.camera=b):b.isOrthographicCamera?(this.ray.origin.set(a.x,a.y,(b.near+b.far)/(b.near-b.far)).unproject(b),this.ray.direction.set(0,0,-1).transformDirection(b.matrixWorld),this.camera=b):console.error("THREE.Raycaster: Unsupported camera type: "+b.type)}intersectObject(a,
b=!0,h=[]){bg(a,this,h,b);h.sort(Mg);return h}intersectObjects(a,b=!0,h=[]){for(let n=0,t=a.length;n<t;n++)bg(a[n],this,h,b);h.sort(Mg);return h}}class xm{constructor(a=1,b=0,h=0){this.radius=a;this.phi=b;this.theta=h;return this}set(a,b,h){this.radius=a;this.phi=b;this.theta=h;return this}copy(a){this.radius=a.radius;this.phi=a.phi;this.theta=a.theta;return this}makeSafe(){this.phi=Math.max(1E-6,Math.min(Math.PI-1E-6,this.phi));return this}setFromVector3(a){return this.setFromCartesianCoords(a.x,
a.y,a.z)}setFromCartesianCoords(a,b,h){this.radius=Math.sqrt(a*a+b*b+h*h);0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(a,h),this.phi=Math.acos(m(b/this.radius,-1,1)));return this}clone(){return(new this.constructor).copy(this)}}class ym{constructor(a=1,b=0,h=0){this.radius=a;this.theta=b;this.y=h;return this}set(a,b,h){this.radius=a;this.theta=b;this.y=h;return this}copy(a){this.radius=a.radius;this.theta=a.theta;this.y=a.y;return this}setFromVector3(a){return this.setFromCartesianCoords(a.x,
a.y,a.z)}setFromCartesianCoords(a,b,h){this.radius=Math.sqrt(a*a+h*h);this.theta=Math.atan2(a,h);this.y=b;return this}clone(){return(new this.constructor).copy(this)}}const Mk=new La;class zm{constructor(a=new La(Infinity,Infinity),b=new La(-Infinity,-Infinity)){this.isBox2=!0;this.min=a;this.max=b}set(a,b){this.min.copy(a);this.max.copy(b);return this}setFromPoints(a){this.makeEmpty();for(let b=0,h=a.length;b<h;b++)this.expandByPoint(a[b]);return this}setFromCenterAndSize(a,b){b=Mk.copy(b).multiplyScalar(.5);
this.min.copy(a).sub(b);this.max.copy(a).add(b);return this}clone(){return(new this.constructor).copy(this)}copy(a){this.min.copy(a.min);this.max.copy(a.max);return this}makeEmpty(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(a){return this.isEmpty()?a.set(0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(a){return this.isEmpty()?a.set(0,0):a.subVectors(this.max,this.min)}expandByPoint(a){this.min.min(a);
this.max.max(a);return this}expandByVector(a){this.min.sub(a);this.max.add(a);return this}expandByScalar(a){this.min.addScalar(-a);this.max.addScalar(a);return this}containsPoint(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0}containsBox(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y}getParameter(a,b){return b.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(a){return a.max.x<
this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0}clampPoint(a,b){return b.copy(a).clamp(this.min,this.max)}distanceToPoint(a){return this.clampPoint(a,Mk).distanceTo(a)}intersect(a){this.min.max(a.min);this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this}union(a){this.min.min(a.min);this.max.max(a.max);return this}translate(a){this.min.add(a);this.max.add(a);return this}equals(a){return a.min.equals(this.min)&&a.max.equals(this.max)}}const Nk=new ka,Ch=new ka;
class Am{constructor(a=new ka,b=new ka){this.start=a;this.end=b}set(a,b){this.start.copy(a);this.end.copy(b);return this}copy(a){this.start.copy(a.start);this.end.copy(a.end);return this}getCenter(a){return a.addVectors(this.start,this.end).multiplyScalar(.5)}delta(a){return a.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(a,b){return this.delta(b).multiplyScalar(a).add(this.start)}closestPointToPointParameter(a,
b){Nk.subVectors(a,this.start);Ch.subVectors(this.end,this.start);a=Ch.dot(Ch);a=Ch.dot(Nk)/a;b&&(a=m(a,0,1));return a}closestPointToPoint(a,b,h){a=this.closestPointToPointParameter(a,b);return this.delta(h).multiplyScalar(a).add(this.start)}applyMatrix4(a){this.start.applyMatrix4(a);this.end.applyMatrix4(a);return this}equals(a){return a.start.equals(this.start)&&a.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const Ok=new ka;class Bm extends wc{constructor(a,b){super();this.light=
a;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=b;this.type="SpotLightHelper";a=new gc;b=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let h=0,n=1,t=32;h<t;h++,n++){const C=h/t*Math.PI*2,G=n/t*Math.PI*2;b.push(Math.cos(C),Math.sin(C),1,Math.cos(G),Math.sin(G),1)}a.setAttribute("position",new Cb(b,3));b=new sd({fog:!1,toneMapped:!1});this.cone=new he(a,b);this.add(this.cone);this.update()}dispose(){this.cone.geometry.dispose();this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,
!1);this.light.target.updateWorldMatrix(!0,!1);const a=this.light.distance?this.light.distance:1E3,b=a*Math.tan(this.light.angle);this.cone.scale.set(b,b,a);Ok.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(Ok);void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Me=new ka,Dh=new $b,Pi=new $b;class Cm extends he{constructor(a){const b=Ng(a),h=new gc;var n=[];const t=[],C=new wb(0,0,1),G=new wb(0,1,0);for(let I=0;I<
b.length;I++){const K=b[I];K.parent&&K.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),t.push(C.r,C.g,C.b),t.push(G.r,G.g,G.b))}h.setAttribute("position",new Cb(n,3));h.setAttribute("color",new Cb(t,3));n=new sd({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(h,n);this.isSkeletonHelper=!0;this.type="SkeletonHelper";this.root=a;this.bones=b;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1}updateMatrixWorld(a){const b=this.bones,h=this.geometry,n=h.getAttribute("position");
Pi.copy(this.root.matrixWorld).invert();for(let t=0,C=0;t<b.length;t++){const G=b[t];G.parent&&G.parent.isBone&&(Dh.multiplyMatrices(Pi,G.matrixWorld),Me.setFromMatrixPosition(Dh),n.setXYZ(C,Me.x,Me.y,Me.z),Dh.multiplyMatrices(Pi,G.parent.matrixWorld),Me.setFromMatrixPosition(Dh),n.setXYZ(C+1,Me.x,Me.y,Me.z),C+=2)}h.getAttribute("position").needsUpdate=!0;super.updateMatrixWorld(a)}dispose(){this.geometry.dispose();this.material.dispose()}}class Dm extends dd{constructor(a,b,h){b=new qg(b,4,2);const n=
new Ie({wireframe:!0,fog:!1,toneMapped:!1});super(b,n);this.light=a;this.color=h;this.type="PointLightHelper";this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1;this.update()}dispose(){this.geometry.dispose();this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1);void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Em=new ka,Pk=new wb,Qk=new wb;class Fm extends wc{constructor(a,b,h){super();this.light=a;this.matrix=a.matrixWorld;
this.matrixAutoUpdate=!1;this.color=h;this.type="HemisphereLightHelper";a=new pg(b);a.rotateY(.5*Math.PI);this.material=new Ie({wireframe:!0,fog:!1,toneMapped:!1});void 0===this.color&&(this.material.vertexColors=!0);b=a.getAttribute("position");b=new Float32Array(3*b.count);a.setAttribute("color",new Bc(b,3));this.add(new dd(a,this.material));this.update()}dispose(){this.children[0].geometry.dispose();this.children[0].material.dispose()}update(){const a=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);
else{const b=a.geometry.getAttribute("color");Pk.copy(this.light.color);Qk.copy(this.light.groundColor);for(let h=0,n=b.count;h<n;h++){const t=h<n/2?Pk:Qk;b.setXYZ(h,t.r,t.g,t.b)}b.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1);a.lookAt(Em.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Gm extends he{constructor(a=10,b=10,h=4473924,n=8947848){h=new wb(h);n=new wb(n);const t=b/2,C=a/b,G=a/2;a=[];const I=[];for(let K=0,M=0,T=-G;K<=b;K++,T+=C){a.push(-G,0,T,G,0,T);a.push(T,0,-G,T,
0,G);const U=K===t?h:n;U.toArray(I,M);M+=3;U.toArray(I,M);M+=3;U.toArray(I,M);M+=3;U.toArray(I,M);M+=3}b=new gc;b.setAttribute("position",new Cb(a,3));b.setAttribute("color",new Cb(I,3));h=new sd({vertexColors:!0,toneMapped:!1});super(b,h);this.type="GridHelper"}dispose(){this.geometry.dispose();this.material.dispose()}}class Hm extends he{constructor(a=10,b=16,h=8,n=64,t=4473924,C=8947848){t=new wb(t);C=new wb(C);var G=[];const I=[];if(1<b)for(var K=0;K<b;K++){var M=K/b*2*Math.PI,T=Math.sin(M)*a;
M=Math.cos(M)*a;G.push(0,0,0);G.push(T,0,M);T=K&1?t:C;I.push(T.r,T.g,T.b);I.push(T.r,T.g,T.b)}for(b=0;b<h;b++)for(K=b&1?t:C,T=a-a/h*b,M=0;M<n;M++){var U=M/n*2*Math.PI;let V=Math.sin(U)*T;U=Math.cos(U)*T;G.push(V,0,U);I.push(K.r,K.g,K.b);U=(M+1)/n*2*Math.PI;V=Math.sin(U)*T;U=Math.cos(U)*T;G.push(V,0,U);I.push(K.r,K.g,K.b)}a=new gc;a.setAttribute("position",new Cb(G,3));a.setAttribute("color",new Cb(I,3));G=new sd({vertexColors:!0,toneMapped:!1});super(a,G);this.type="PolarGridHelper"}dispose(){this.geometry.dispose();
this.material.dispose()}}const Rk=new ka,Eh=new ka,Sk=new ka;class Im extends wc{constructor(a,b,h){super();this.light=a;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=h;this.type="DirectionalLightHelper";void 0===b&&(b=1);a=new gc;a.setAttribute("position",new Cb([-b,b,0,b,b,0,b,-b,0,-b,-b,0,-b,b,0],3));b=new sd({fog:!1,toneMapped:!1});this.lightPlane=new Je(a,b);this.add(this.lightPlane);a=new gc;a.setAttribute("position",new Cb([0,0,0,0,0,1],3));this.targetLine=new Je(a,b);this.add(this.targetLine);
this.update()}dispose(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1);this.light.target.updateWorldMatrix(!0,!1);Rk.setFromMatrixPosition(this.light.matrixWorld);Eh.setFromMatrixPosition(this.light.target.matrixWorld);Sk.subVectors(Eh,Rk);this.lightPlane.lookAt(Eh);void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):
(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color));this.targetLine.lookAt(Eh);this.targetLine.scale.z=Sk.length()}}const Og=new ka,Nc=new $g;class Jm extends he{constructor(a){function b(T,U){h(T);h(U)}function h(T){C.push(0,0,0);G.push(0,0,0);void 0===I[T]&&(I[T]=[]);I[T].push(C.length/3-1)}var n=new gc,t=new sd({color:16777215,vertexColors:!0,toneMapped:!1});const C=[],G=[],I={};b("n1","n2");b("n2","n4");b("n4","n3");b("n3","n1");b("f1",
"f2");b("f2","f4");b("f4","f3");b("f3","f1");b("n1","f1");b("n2","f2");b("n3","f3");b("n4","f4");b("p","n1");b("p","n2");b("p","n3");b("p","n4");b("u1","u2");b("u2","u3");b("u3","u1");b("c","t");b("p","c");b("cn1","cn2");b("cn3","cn4");b("cf1","cf2");b("cf3","cf4");n.setAttribute("position",new Cb(C,3));n.setAttribute("color",new Cb(G,3));super(n,t);this.type="CameraHelper";this.camera=a;this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix();this.matrix=a.matrixWorld;this.matrixAutoUpdate=
!1;this.pointMap=I;this.update();a=new wb(16755200);n=new wb(16711680);t=new wb(43775);const K=new wb(16777215),M=new wb(3355443);this.setColors(a,n,t,K,M)}setColors(a,b,h,n,t){const C=this.geometry.getAttribute("color");C.setXYZ(0,a.r,a.g,a.b);C.setXYZ(1,a.r,a.g,a.b);C.setXYZ(2,a.r,a.g,a.b);C.setXYZ(3,a.r,a.g,a.b);C.setXYZ(4,a.r,a.g,a.b);C.setXYZ(5,a.r,a.g,a.b);C.setXYZ(6,a.r,a.g,a.b);C.setXYZ(7,a.r,a.g,a.b);C.setXYZ(8,a.r,a.g,a.b);C.setXYZ(9,a.r,a.g,a.b);C.setXYZ(10,a.r,a.g,a.b);C.setXYZ(11,a.r,
a.g,a.b);C.setXYZ(12,a.r,a.g,a.b);C.setXYZ(13,a.r,a.g,a.b);C.setXYZ(14,a.r,a.g,a.b);C.setXYZ(15,a.r,a.g,a.b);C.setXYZ(16,a.r,a.g,a.b);C.setXYZ(17,a.r,a.g,a.b);C.setXYZ(18,a.r,a.g,a.b);C.setXYZ(19,a.r,a.g,a.b);C.setXYZ(20,a.r,a.g,a.b);C.setXYZ(21,a.r,a.g,a.b);C.setXYZ(22,a.r,a.g,a.b);C.setXYZ(23,a.r,a.g,a.b);C.setXYZ(24,b.r,b.g,b.b);C.setXYZ(25,b.r,b.g,b.b);C.setXYZ(26,b.r,b.g,b.b);C.setXYZ(27,b.r,b.g,b.b);C.setXYZ(28,b.r,b.g,b.b);C.setXYZ(29,b.r,b.g,b.b);C.setXYZ(30,b.r,b.g,b.b);C.setXYZ(31,b.r,b.g,
b.b);C.setXYZ(32,h.r,h.g,h.b);C.setXYZ(33,h.r,h.g,h.b);C.setXYZ(34,h.r,h.g,h.b);C.setXYZ(35,h.r,h.g,h.b);C.setXYZ(36,h.r,h.g,h.b);C.setXYZ(37,h.r,h.g,h.b);C.setXYZ(38,n.r,n.g,n.b);C.setXYZ(39,n.r,n.g,n.b);C.setXYZ(40,t.r,t.g,t.b);C.setXYZ(41,t.r,t.g,t.b);C.setXYZ(42,t.r,t.g,t.b);C.setXYZ(43,t.r,t.g,t.b);C.setXYZ(44,t.r,t.g,t.b);C.setXYZ(45,t.r,t.g,t.b);C.setXYZ(46,t.r,t.g,t.b);C.setXYZ(47,t.r,t.g,t.b);C.setXYZ(48,t.r,t.g,t.b);C.setXYZ(49,t.r,t.g,t.b);C.needsUpdate=!0}update(){const a=this.geometry,
b=this.pointMap;Nc.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);Kc("c",b,a,Nc,0,0,-1);Kc("t",b,a,Nc,0,0,1);Kc("n1",b,a,Nc,-1,-1,-1);Kc("n2",b,a,Nc,1,-1,-1);Kc("n3",b,a,Nc,-1,1,-1);Kc("n4",b,a,Nc,1,1,-1);Kc("f1",b,a,Nc,-1,-1,1);Kc("f2",b,a,Nc,1,-1,1);Kc("f3",b,a,Nc,-1,1,1);Kc("f4",b,a,Nc,1,1,1);Kc("u1",b,a,Nc,.7,1.1,-1);Kc("u2",b,a,Nc,-.7,1.1,-1);Kc("u3",b,a,Nc,0,2,-1);Kc("cf1",b,a,Nc,-1,0,1);Kc("cf2",b,a,Nc,1,0,1);Kc("cf3",b,a,Nc,0,-1,1);Kc("cf4",b,a,Nc,0,1,1);Kc("cn1",b,a,Nc,
-1,0,-1);Kc("cn2",b,a,Nc,1,0,-1);Kc("cn3",b,a,Nc,0,-1,-1);Kc("cn4",b,a,Nc,0,1,-1);a.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose();this.material.dispose()}}const Fh=new Ye;class Km extends he{constructor(a,b=16776960){const h=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),t=new gc;t.setIndex(new Bc(h,1));t.setAttribute("position",new Bc(n,3));super(t,new sd({color:b,toneMapped:!1}));this.object=a;this.type="BoxHelper";this.matrixAutoUpdate=
!1;this.update()}update(a){void 0!==a&&console.warn("THREE.BoxHelper: .update() has no longer arguments.");void 0!==this.object&&Fh.setFromObject(this.object);if(!Fh.isEmpty()){a=Fh.min;var b=Fh.max,h=this.geometry.attributes.position,n=h.array;n[0]=b.x;n[1]=b.y;n[2]=b.z;n[3]=a.x;n[4]=b.y;n[5]=b.z;n[6]=a.x;n[7]=a.y;n[8]=b.z;n[9]=b.x;n[10]=a.y;n[11]=b.z;n[12]=b.x;n[13]=b.y;n[14]=a.z;n[15]=a.x;n[16]=b.y;n[17]=a.z;n[18]=a.x;n[19]=a.y;n[20]=a.z;n[21]=b.x;n[22]=a.y;n[23]=a.z;h.needsUpdate=!0;this.geometry.computeBoundingSphere()}}setFromObject(a){this.object=
a;this.update();return this}copy(a,b){super.copy(a,b);this.object=a.object;return this}dispose(){this.geometry.dispose();this.material.dispose()}}class Lm extends he{constructor(a,b=16776960){const h=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new gc;n.setIndex(new Bc(h,1));n.setAttribute("position",new Cb([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));super(n,new sd({color:b,toneMapped:!1}));this.box=a;this.type="Box3Helper";this.geometry.computeBoundingSphere()}updateMatrixWorld(a){const b=
this.box;b.isEmpty()||(b.getCenter(this.position),b.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(a))}dispose(){this.geometry.dispose();this.material.dispose()}}class Mm extends Je{constructor(a,b=1,h=16776960){const n=new gc;n.setAttribute("position",new Cb([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3));n.computeBoundingSphere();super(n,new sd({color:h,toneMapped:!1}));this.type="PlaneHelper";this.plane=a;this.size=b;a=new gc;a.setAttribute("position",new Cb([1,
1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3));a.computeBoundingSphere();this.add(new dd(a,new Ie({color:h,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(a){this.position.set(0,0,0);this.scale.set(.5*this.size,.5*this.size,1);this.lookAt(this.plane.normal);this.translateZ(-this.plane.constant);super.updateMatrixWorld(a)}dispose(){this.geometry.dispose();this.material.dispose();this.children[0].geometry.dispose();this.children[0].material.dispose()}}const Tk=new ka;let Gh,
Qi;class Nm extends wc{constructor(a=new ka(0,0,1),b=new ka(0,0,0),h=1,n=16776960,t=.2*h,C=.2*t){super();this.type="ArrowHelper";void 0===Gh&&(Gh=new gc,Gh.setAttribute("position",new Cb([0,0,0,0,1,0],3)),Qi=new Mf(0,.5,1,5,1),Qi.translate(0,-.5,0));this.position.copy(b);this.line=new Je(Gh,new sd({color:n,toneMapped:!1}));this.line.matrixAutoUpdate=!1;this.add(this.line);this.cone=new dd(Qi,new Ie({color:n,toneMapped:!1}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(a);this.setLength(h,
t,C)}setDirection(a){.99999<a.y?this.quaternion.set(0,0,0,1):-.99999>a.y?this.quaternion.set(1,0,0,0):(Tk.set(a.z,0,-a.x).normalize(),this.quaternion.setFromAxisAngle(Tk,Math.acos(a.y)))}setLength(a,b=.2*a,h=.2*b){this.line.scale.set(1,Math.max(1E-4,a-b),1);this.line.updateMatrix();this.cone.scale.set(h,b,h);this.cone.position.y=a;this.cone.updateMatrix()}setColor(a){this.line.material.color.set(a);this.cone.material.color.set(a)}copy(a){super.copy(a,!1);this.line.copy(a.line);this.cone.copy(a.cone);
return this}dispose(){this.line.geometry.dispose();this.line.material.dispose();this.cone.geometry.dispose();this.cone.material.dispose()}}class Om extends he{constructor(a=1){var b=[0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a];a=new gc;a.setAttribute("position",new Cb(b,3));a.setAttribute("color",new Cb([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));b=new sd({vertexColors:!0,toneMapped:!1});super(a,b);this.type="AxesHelper"}setColors(a,b,h){const n=new wb,t=this.geometry.attributes.color.array;n.set(a);n.toArray(t,
0);n.toArray(t,3);n.set(b);n.toArray(t,6);n.toArray(t,9);n.set(h);n.toArray(t,12);n.toArray(t,15);this.geometry.attributes.color.needsUpdate=!0;return this}dispose(){this.geometry.dispose();this.material.dispose()}}class Pm{constructor(){this.type="ShapePath";this.color=new wb;this.subPaths=[];this.currentPath=null}moveTo(a,b){this.currentPath=new ng;this.subPaths.push(this.currentPath);this.currentPath.moveTo(a,b);return this}lineTo(a,b){this.currentPath.lineTo(a,b);return this}quadraticCurveTo(a,
b,h,n){this.currentPath.quadraticCurveTo(a,b,h,n);return this}bezierCurveTo(a,b,h,n,t,C){this.currentPath.bezierCurveTo(a,b,h,n,t,C);return this}splineThru(a){this.currentPath.splineThru(a);return this}toShapes(a){function b(aa){const S=[];for(let ea=0,va=aa.length;ea<va;ea++){const ma=aa[ea],wa=new cf;wa.curves=ma.curves;S.push(wa)}return S}function h(aa,S){const ea=S.length;let va=!1;for(let wa=ea-1,Ea=0;Ea<ea;wa=Ea++){var ma=S[wa];let ua=S[Ea],Qa=ua.x-ma.x,ya=ua.y-ma.y;if(Math.abs(ya)>Number.EPSILON){if(0>
ya&&(ma=S[Ea],Qa=-Qa,ua=S[wa],ya=-ya),!(aa.y<ma.y||aa.y>ua.y))if(aa.y===ma.y){if(aa.x===ma.x)return!0}else{ma=ya*(aa.x-ma.x)-Qa*(aa.y-ma.y);if(0===ma)return!0;0>ma||(va=!va)}}else if(aa.y===ma.y&&(ua.x<=aa.x&&aa.x<=ma.x||ma.x<=aa.x&&aa.x<=ua.x))return!0}return va}var n=ve.isClockWise,t=this.subPaths;if(0===t.length)return[];const C=[];if(1===t.length){var G=t[0];var I=new cf;I.curves=G.curves;C.push(I);return C}var K=!n(t[0].getPoints());K=a?!K:K;I=[];const M=[];let T=[];var U=0;let V;M[U]=void 0;
T[U]=[];for(let aa=0,S=t.length;aa<S;aa++){G=t[aa];V=G.getPoints();var ba=n(V);(ba=a?!ba:ba)?(!K&&M[U]&&U++,M[U]={s:new cf,p:V},M[U].s.curves=G.curves,K&&U++,T[U]=[]):T[U].push({h:G,p:V[0]})}if(!M[0])return b(t);if(1<M.length){G=!1;a=0;for(let aa=0,S=M.length;aa<S;aa++)I[aa]=[];for(let aa=0,S=M.length;aa<S;aa++)for(n=T[aa],t=0;t<n.length;t++){ba=n[t];K=!0;for(U=0;U<M.length;U++)h(ba.p,M[U].p)&&(aa!==U&&a++,K?(K=!1,I[U].push(ba)):G=!0);K&&I[aa].push(ba)}0<a&&!1===G&&(T=I)}for(let aa=0,S=M.length;aa<
S;aa++){I=M[aa].s;C.push(I);G=T[aa];for(let ea=0,va=G.length;ea<va;ea++)I.holes.push(G[ea].h)}return C}}const ye=function(){var a=new ArrayBuffer(4);const b=new Float32Array(a);a=new Uint32Array(a);const h=new Uint32Array(512),n=new Uint32Array(512);for(var t=0;256>t;++t){var C=t-127;-27>C?(h[t]=0,h[t|256]=32768,n[t]=24,n[t|256]=24):-14>C?(h[t]=1024>>-C-14,h[t|256]=1024>>-C-14|32768,n[t]=-C-1,n[t|256]=-C-1):15>=C?(h[t]=C+15<<10,h[t|256]=C+15<<10|32768,n[t]=13,n[t|256]=13):128>C?(h[t]=31744,h[t|256]=
64512,n[t]=24,n[t|256]=24):(h[t]=31744,h[t|256]=64512,n[t]=13,n[t|256]=13)}t=new Uint32Array(2048);C=new Uint32Array(64);const G=new Uint32Array(64);for(var I=1;1024>I;++I){let K=I<<13,M=0;for(;0===(K&8388608);)K<<=1,M-=8388608;K&=-8388609;M+=947912704;t[I]=K|M}for(I=1024;2048>I;++I)t[I]=939524096+(I-1024<<13);for(I=1;31>I;++I)C[I]=I<<23;C[31]=1199570944;C[32]=2147483648;for(I=33;63>I;++I)C[I]=2147483648+(I-32<<23);C[63]=3347054592;for(I=1;64>I;++I)32!==I&&(G[I]=1024);return{floatView:b,uint32View:a,
baseTable:h,shiftTable:n,mantissaTable:t,exponentTable:C,offsetTable:G}}();class Qm extends Qe{constructor(a,b,h,n,t,C){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry.");super(a,b,h,n,t,C)}}class Rm extends lh{constructor(a,b,h,n){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry.");super(a,b,h,n)}}class Sm extends mh{constructor(a,b,h,n){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry.");super(a,b,h,
n)}}class Tm extends nh{constructor(a,b,h,n,t,C,G){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry.");super(a,b,h,n,t,C,G)}}class Um extends Mf{constructor(a,b,h,n,t,C,G,I){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry.");super(a,b,h,n,t,C,G,I)}}class Vm extends oh{constructor(a,b){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry.");super(a,b)}}class Wm extends sh{constructor(a,b){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry.");
super(a,b)}}class Xm extends th{constructor(a,b){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry.");super(a,b)}}class Ym extends og{constructor(a,b,h,n){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry.");super(a,b,h,n)}}class Zm extends pg{constructor(a,b){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry.");super(a,b)}}class $m extends Tf{constructor(a,b,h,n){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry.");
super(a,b,h,n)}}class an extends Ke{constructor(a,b,h,n){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry.");super(a,b,h,n)}}class bn extends uh{constructor(a,b,h,n,t,C){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry.");super(a,b,h,n,t,C)}}class cn extends vh{constructor(a,b){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry.");super(a,b)}}class dn extends qg{constructor(a,b,h,n,t,C,G){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry.");
super(a,b,h,n,t,C,G)}}class en extends wh{constructor(a,b){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry.");super(a,b)}}class fn extends xh{constructor(a,b,h,n,t){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry.");super(a,b,h,n,t)}}class gn extends yh{constructor(a,b,h,n,t,C){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry.");super(a,b,h,n,t,C)}}class hn extends zh{constructor(a,b,
h,n,t){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry.");super(a,b,h,n,t)}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"150"}}));"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="150");u.ACESFilmicToneMapping=4;u.AddEquation=100;u.AddOperation=2;u.AdditiveAnimationBlendMode=2501;u.AdditiveBlending=2;u.AlphaFormat=
1021;u.AlwaysDepth=1;u.AlwaysStencilFunc=519;u.AmbientLight=xk;u.AmbientLightProbe=$l;u.AnimationClip=sg;u.AnimationLoader=Nl;u.AnimationMixer=rm;u.AnimationObjectGroup=om;u.AnimationUtils=Ll;u.ArcCurve=Vj;u.ArrayCamera=vj;u.ArrowHelper=Nm;u.Audio=Ik;u.AudioAnalyser=fm;u.AudioContext=Oi;u.AudioListener=cm;u.AudioLoader=Yl;u.AxesHelper=Om;u.BackSide=1;u.BasicDepthPacking=3200;u.BasicShadowMap=0;u.Bone=si;u.BooleanKeyframeTrack=Ve;u.Box2=zm;u.Box3=Ye;u.Box3Helper=Lm;u.BoxBufferGeometry=Qm;u.BoxGeometry=
Qe;u.BoxHelper=Km;u.BufferAttribute=Bc;u.BufferGeometry=gc;u.BufferGeometryLoader=Bk;u.ByteType=1010;u.Cache=df;u.Camera=$g;u.CameraHelper=Jm;u.CanvasTexture=Il;u.CapsuleBufferGeometry=Rm;u.CapsuleGeometry=lh;u.CatmullRomCurve3=Wj;u.CineonToneMapping=3;u.CircleBufferGeometry=Sm;u.CircleGeometry=mh;u.ClampToEdgeWrapping=1001;u.Clock=Gk;u.Color=wb;u.ColorKeyframeTrack=Xh;u.ColorManagement=jd;u.CompressedArrayTexture=Hl;u.CompressedTexture=wi;u.CompressedTextureLoader=Ol;u.ConeBufferGeometry=Tm;u.ConeGeometry=
nh;u.CubeCamera=rj;u.CubeReflectionMapping=301;u.CubeRefractionMapping=302;u.CubeTexture=hg;u.CubeTextureLoader=Pl;u.CubeUVReflectionMapping=306;u.CubicBezierCurve=Ai;u.CubicBezierCurve3=Xj;u.CubicInterpolant=mk;u.CullFaceBack=1;u.CullFaceFront=2;u.CullFaceFrontBack=3;u.CullFaceNone=0;u.Curve=Vd;u.CurvePath=Zj;u.CustomBlending=5;u.CustomToneMapping=5;u.CylinderBufferGeometry=Um;u.CylinderGeometry=Mf;u.Cylindrical=ym;u.Data3DTexture=Yh;u.DataArrayTexture=Ag;u.DataTexture=Kf;u.DataTextureLoader=Ql;
u.DataUtils={toHalfFloat:function(a){65504<Math.abs(a)&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range.");a=m(a,-65504,65504);ye.floatView[0]=a;a=ye.uint32View[0];const b=a>>23&511;return ye.baseTable[b]+((a&8388607)>>ye.shiftTable[b])},fromHalfFloat:function(a){const b=a>>10;ye.uint32View[0]=ye.mantissaTable[ye.offsetTable[b]+(a&1023)]+ye.exponentTable[b];return ye.floatView[0]}};u.DecrementStencilOp=7683;u.DecrementWrapStencilOp=34056;u.DefaultLoadingManager=pk;u.DepthFormat=1026;
u.DepthStencilFormat=1027;u.DepthTexture=wj;u.DirectionalLight=wk;u.DirectionalLightHelper=Im;u.DiscreteInterpolant=nk;u.DisplayP3ColorSpace="display-p3";u.DodecahedronBufferGeometry=Vm;u.DodecahedronGeometry=oh;u.DoubleSide=2;u.DstAlphaFactor=206;u.DstColorFactor=208;u.DynamicCopyUsage=35050;u.DynamicDrawUsage=35048;u.DynamicReadUsage=35049;u.EdgesGeometry=ak;u.EllipseCurve=ih;u.EqualDepth=4;u.EqualStencilFunc=514;u.EquirectangularReflectionMapping=303;u.EquirectangularRefractionMapping=304;u.Euler=
Ug;u.EventDispatcher=Od;u.ExtrudeBufferGeometry=Wm;u.ExtrudeGeometry=sh;u.FileLoader=xe;u.Float16BufferAttribute=rl;u.Float32BufferAttribute=Cb;u.Float64BufferAttribute=sl;u.FloatType=1015;u.Fog=pi;u.FogExp2=oi;u.FramebufferTexture=Gl;u.FrontSide=0;u.Frustum=Dg;u.GLBufferAttribute=vm;u.GLSL1="100";u.GLSL3="300 es";u.GreaterDepth=6;u.GreaterEqualDepth=5;u.GreaterEqualStencilFunc=518;u.GreaterStencilFunc=516;u.GridHelper=Gm;u.Group=Ff;u.HalfFloatType=1016;u.HemisphereLight=qk;u.HemisphereLightHelper=
Fm;u.HemisphereLightProbe=Zl;u.IcosahedronBufferGeometry=Xm;u.IcosahedronGeometry=th;u.ImageBitmapLoader=Xl;u.ImageLoader=tg;u.ImageUtils=Hh;u.IncrementStencilOp=7682;u.IncrementWrapStencilOp=34055;u.InstancedBufferAttribute=Lf;u.InstancedBufferGeometry=Ak;u.InstancedInterleavedBuffer=um;u.InstancedMesh=Mj;u.Int16BufferAttribute=pl;u.Int32BufferAttribute=ql;u.Int8BufferAttribute=ml;u.IntType=1013;u.InterleavedBuffer=ch;u.InterleavedBufferAttribute=Gf;u.Interpolant=rg;u.InterpolateDiscrete=2300;u.InterpolateLinear=
2301;u.InterpolateSmooth=2302;u.InvertStencilOp=5386;u.KeepStencilOp=7680;u.KeyframeTrack=Wd;u.LOD=Dj;u.LatheBufferGeometry=Ym;u.LatheGeometry=og;u.Layers=Cg;u.LessDepth=2;u.LessEqualDepth=3;u.LessEqualStencilFunc=515;u.LessStencilFunc=513;u.Light=Le;u.LightProbe=Ah;u.Line=Je;u.Line3=Am;u.LineBasicMaterial=sd;u.LineCurve=kh;u.LineCurve3=Yj;u.LineDashedMaterial=lk;u.LineLoop=Sj;u.LineSegments=he;u.LinearEncoding=3E3;u.LinearFilter=1006;u.LinearInterpolant=Hi;u.LinearMipMapLinearFilter=1008;u.LinearMipMapNearestFilter=
1007;u.LinearMipmapLinearFilter=1008;u.LinearMipmapNearestFilter=1007;u.LinearSRGBColorSpace="srgb-linear";u.LinearToneMapping=1;u.Loader=Id;u.LoaderUtils=Ni;u.LoadingManager=Ii;u.LoopOnce=2200;u.LoopPingPong=2202;u.LoopRepeat=2201;u.LuminanceAlphaFormat=1025;u.LuminanceFormat=1024;u.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2};u.Material=kd;u.MaterialLoader=Mi;u.MathUtils=kb;u.Matrix3=xb;u.Matrix4=$b;u.MaxEquation=104;u.Mesh=dd;u.MeshBasicMaterial=Ie;u.MeshDepthMaterial=Nh;u.MeshDistanceMaterial=
Oh;u.MeshLambertMaterial=jk;u.MeshMatcapMaterial=kk;u.MeshNormalMaterial=ik;u.MeshPhongMaterial=gk;u.MeshPhysicalMaterial=fk;u.MeshStandardMaterial=Gi;u.MeshToonMaterial=hk;u.MinEquation=103;u.MirroredRepeatWrapping=1002;u.MixOperation=1;u.MultiplyBlending=4;u.MultiplyOperation=0;u.NearestFilter=1003;u.NearestMipMapLinearFilter=1005;u.NearestMipMapNearestFilter=1004;u.NearestMipmapLinearFilter=1005;u.NearestMipmapNearestFilter=1004;u.NeverDepth=0;u.NeverStencilFunc=512;u.NoBlending=0;u.NoColorSpace=
"";u.NoToneMapping=0;u.NormalAnimationBlendMode=2500;u.NormalBlending=1;u.NotEqualDepth=7;u.NotEqualStencilFunc=517;u.NumberKeyframeTrack=$f;u.Object3D=wc;u.ObjectLoader=Vl;u.ObjectSpaceNormalMap=1;u.OctahedronBufferGeometry=Zm;u.OctahedronGeometry=pg;u.OneFactor=201;u.OneMinusDstAlphaFactor=207;u.OneMinusDstColorFactor=209;u.OneMinusSrcAlphaFactor=205;u.OneMinusSrcColorFactor=203;u.OrthographicCamera=bh;u.PCFShadowMap=1;u.PCFSoftShadowMap=2;u.PMREMGenerator=Jh;u.Path=ng;u.PerspectiveCamera=gd;u.Plane=
Ce;u.PlaneBufferGeometry=$m;u.PlaneGeometry=Tf;u.PlaneHelper=Mm;u.PointLight=vk;u.PointLightHelper=Dm;u.Points=Uj;u.PointsMaterial=vi;u.PolarGridHelper=Hm;u.PolyhedronBufferGeometry=an;u.PolyhedronGeometry=Ke;u.PositionalAudio=em;u.PropertyBinding=vc;u.PropertyMixer=Kk;u.QuadraticBezierCurve=Bi;u.QuadraticBezierCurve3=Ci;u.Quaternion=zb;u.QuaternionKeyframeTrack=sf;u.QuaternionLinearInterpolant=ok;u.RED_GREEN_RGTC2_Format=36285;u.RED_RGTC1_Format=36283;u.REVISION="150";u.RGBADepthPacking=3201;u.RGBAFormat=
1023;u.RGBAIntegerFormat=1033;u.RGBA_ASTC_10x10_Format=37819;u.RGBA_ASTC_10x5_Format=37816;u.RGBA_ASTC_10x6_Format=37817;u.RGBA_ASTC_10x8_Format=37818;u.RGBA_ASTC_12x10_Format=37820;u.RGBA_ASTC_12x12_Format=37821;u.RGBA_ASTC_4x4_Format=37808;u.RGBA_ASTC_5x4_Format=37809;u.RGBA_ASTC_5x5_Format=37810;u.RGBA_ASTC_6x5_Format=37811;u.RGBA_ASTC_6x6_Format=37812;u.RGBA_ASTC_8x5_Format=37813;u.RGBA_ASTC_8x6_Format=37814;u.RGBA_ASTC_8x8_Format=37815;u.RGBA_BPTC_Format=36492;u.RGBA_ETC2_EAC_Format=37496;u.RGBA_PVRTC_2BPPV1_Format=
35843;u.RGBA_PVRTC_4BPPV1_Format=35842;u.RGBA_S3TC_DXT1_Format=33777;u.RGBA_S3TC_DXT3_Format=33778;u.RGBA_S3TC_DXT5_Format=33779;u.RGB_ETC1_Format=36196;u.RGB_ETC2_Format=37492;u.RGB_PVRTC_2BPPV1_Format=35841;u.RGB_PVRTC_4BPPV1_Format=35840;u.RGB_S3TC_DXT1_Format=33776;u.RGFormat=1030;u.RGIntegerFormat=1031;u.RawShaderMaterial=ek;u.Ray=eg;u.Raycaster=wm;u.RectAreaLight=yk;u.RedFormat=1028;u.RedIntegerFormat=1029;u.ReinhardToneMapping=2;u.RepeatWrapping=1E3;u.ReplaceStencilOp=7681;u.ReverseSubtractEquation=
102;u.RingBufferGeometry=bn;u.RingGeometry=uh;u.SIGNED_RED_GREEN_RGTC2_Format=36286;u.SIGNED_RED_RGTC1_Format=36284;u.SRGBColorSpace="srgb";u.Scene=yj;u.ShaderChunk=cc;u.ShaderLib=Rd;u.ShaderMaterial=de;u.ShadowMaterial=dk;u.Shape=cf;u.ShapeBufferGeometry=cn;u.ShapeGeometry=vh;u.ShapePath=Pm;u.ShapeUtils=ve;u.ShortType=1011;u.Skeleton=ti;u.SkeletonHelper=Cm;u.SkinnedMesh=Ij;u.Source=Xe;u.Sphere=af;u.SphereBufferGeometry=dn;u.SphereGeometry=qg;u.Spherical=xm;u.SphericalHarmonics3=zk;u.SplineCurve=
Di;u.SpotLight=tk;u.SpotLightHelper=Bm;u.Sprite=Bj;u.SpriteMaterial=qi;u.SrcAlphaFactor=204;u.SrcAlphaSaturateFactor=210;u.SrcColorFactor=202;u.StaticCopyUsage=35046;u.StaticDrawUsage=35044;u.StaticReadUsage=35045;u.StereoCamera=am;u.StreamCopyUsage=35042;u.StreamDrawUsage=35040;u.StreamReadUsage=35041;u.StringKeyframeTrack=We;u.SubtractEquation=101;u.SubtractiveBlending=3;u.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3};u.TangentSpaceNormalMap=0;u.TetrahedronBufferGeometry=en;u.TetrahedronGeometry=
wh;u.Texture=Qc;u.TextureLoader=Rl;u.TorusBufferGeometry=fn;u.TorusGeometry=xh;u.TorusKnotBufferGeometry=gn;u.TorusKnotGeometry=yh;u.Triangle=Qd;u.TriangleFanDrawMode=2;u.TriangleStripDrawMode=1;u.TrianglesDrawMode=0;u.TubeBufferGeometry=hn;u.TubeGeometry=zh;u.TwoPassDoubleSide=2;u.UVMapping=300;u.Uint16BufferAttribute=Lh;u.Uint32BufferAttribute=Kh;u.Uint8BufferAttribute=nl;u.Uint8ClampedBufferAttribute=ol;u.Uniform=Lk;u.UniformsGroup=tm;u.UniformsLib=pb;u.UniformsUtils=bj;u.UnsignedByteType=1009;
u.UnsignedInt248Type=1020;u.UnsignedIntType=1014;u.UnsignedShort4444Type=1017;u.UnsignedShort5551Type=1018;u.UnsignedShortType=1012;u.VSMShadowMap=3;u.Vector2=La;u.Vector3=ka;u.Vector4=zc;u.VectorKeyframeTrack=ag;u.VideoTexture=Fl;u.WebGL1Renderer=xj;u.WebGL3DRenderTarget=cl;u.WebGLArrayRenderTarget=bl;u.WebGLCubeRenderTarget=Ri;u.WebGLMultipleRenderTargets=dl;u.WebGLRenderTarget=Sd;u.WebGLRenderer=Xd;u.WebGLUtils=mf;u.WireframeGeometry=bk;u.WrapAroundEnding=2402;u.ZeroCurvatureEnding=2400;u.ZeroFactor=
200;u.ZeroSlopeEnding=2401;u.ZeroStencilOp=0;u._SRGBAFormat=1035;u.sRGBEncoding=3001})};
shadow$provide[8]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Api=void 0;class u{static apply(q){q.set=function(m){const c=this.options||{},f=Object.entries(m).reduce(function(e,[g,k]){c[g]!==k&&(e[g]=k);return e},{});this.options=Object.assign(c,f);this.trigger({type:"change",options:m,changes:f})};q.get=function(){return this.options};q.api=function(m,c){m||(m={});c&&Object.entries(m).forEach(function([f,e]){"function"===typeof e&&(m[f]=(...g)=>e(...g,c))});m.set=this.set.bind(this);
m.get=this.get.bind(this);return m}}}p.Api=u};
shadow$provide[9]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Binder=void 0;var u=y(7);class q{static bind(m,c){return function(f,e){e.__binds||(e.__binds=[]);let g=m;Array.isArray(f)&&(g=f[0],f=f[1]);var k=/^([^.:]*(?:\.[^.:]+)*)?(?::(.*))?$/.exec(f);const l=k[1].split(/\./g),r=l.pop(),v=k[2]||r;k=l.shift();let w={this:e}[k]||c[k]||m[k]||g;for(;w&&(f=l.shift());)w=w[f];if(w&&(w.on||w.addEventListener)){const z=function(A){e[v]&&e[v](A,m)};q._polyfill(w,["addEventListener",
"on"],function(A){w[A](r,z)});e.__binds.push({target:w,name:r,callback:z});return z}throw"Cannot bind '"+f+"' in "+this.__name;}}static unbind(){return function(m){m.__binds&&(m.__binds.forEach(function(c){q._polyfill(c.target,["removeEventListener","off"],function(f){c.target[f](c.name,c.callback)})}.bind(this)),m.__binds=[])}}static apply(m){m.trigger=q._trigger;m.triggerOnce=q._triggerOnce;m.hasEventListener=u.EventDispatcher.prototype.hasEventListener;m.addEventListener=u.EventDispatcher.prototype.addEventListener;
m.removeEventListener=u.EventDispatcher.prototype.removeEventListener;m.on=m.addEventListener;m.off=m.removeEventListener;m.dispatchEvent=m.trigger}static _triggerOnce(m){this.trigger(m);this._listeners&&delete this._listeners[m.type]}static _trigger(m){if(void 0!==this._listeners){var c=this._listeners[m.type];if(void 0!==c){c=c.slice();const f=c.length;m.target=this;for(let e=0;e<f;e++)c[e].call(this,m,this)}}}static _polyfill(m,c,f){c.map(function(e){return m.method});c.length&&f(c[0])}}p.Binder=
q};
shadow$provide[10]=function(D,y,Q,p){function u(c){return c&&"string"===typeof c.valueOf()}Object.defineProperty(p,"__esModule",{value:!0});p.Bootstrap=void 0;D=y(8);y=y(9);const q=(c,f)=>{let e=0;for(const g of c){if(!1===f(g,e,c))break;e++}};class m{static initClass(){this.Plugins={};this.Aliases={}}static registerPlugin(c,f){const e=function(g){m.Plugin.call(this,g);this.__name=c};e.prototype=Object.assign(new m.Plugin,f);this.Plugins[c]=e}static unregisterPlugin(c){delete this.Plugins[c]}static registerAlias(c,
f){this.Aliases[c]=f}static unregisterAlias(c){delete this.Aliases[c]}constructor(c){if(c){var f=[].slice.apply(arguments);c={};if(f[0]instanceof Node){const e=f[0];f=f.slice(1);c.element=e}u(f[0])?c.plugins=f:Array.isArray(f[0])?c.plugins=f[0]:f[0]&&(c=Object.assign({},f[0],c))}this.__options=Object.assign({},{init:!0,element:document.body,plugins:["core"],aliases:{},plugindb:m.Plugins||{},aliasdb:m.Aliases||{}},c||{});this.__destroyed=this.__inited=!1;this.__installed=[];f=this.__options.element;
f===""+f&&(f=document.querySelector(f));this.plugins={};this.element=f;this.trigger=this.trigger.bind(this);this.frame=this.frame.bind(this);this.events=["pre","update","render","post"].map(function(e){return{type:e}});this.__options.init&&this.init()}init(){this.__inited||(this.__inited=!0,this.install(this.__options.plugins))}destroy(){this.__inited&&!this.__destroyed&&(this.__destroyed=!0,this.trigger({type:"destroy"}),this.uninstall())}frame(){this.events.map(this.trigger)}resolve(c){function f(l,
r,v){if(256<=v)throw"Plug-in alias recursion detected.";l=l.filter(k);l.forEach(function(w){const z=g[w];z?r=r.concat(f(z,[],v+1)):r.push(w)});return r}c=Array.isArray(c)?c:[c];const e=this.__options,g=Object.assign({},e.aliasdb,e.aliases),k=function(l){l=l.split(":");if(!l[1])return!0;g[l[0]]=[l[1]];return!1};c=c.filter(k);Object.entries(g).forEach(function([l,r]){g[l]=Array.isArray(r)?r:[r]});return f(c,[],0)}install(c){c=Array.isArray(c)?c:[c];c=this.resolve(c);q(c,f=>this.__install(f));this.__ready()}uninstall(c){c&&
(c=Array.isArray(c)?c:[c],c=this.resolve(c));(c||this.__installed).reverse().forEach(f=>this.__uninstall(f))}__install(c){var f=this.__options.plugindb[c];if(!f)throw"[three.install] Cannot install. '"+c+"' is not registered.";if(this.plugins[c])return console.warn("[three.install] "+c+" is already installed.");f=new f(this.__options[c]||{},c);this.plugins[c]=f;c=f.install(this);this.__installed.push(f);this.trigger({type:"install",plugin:f});return c}__uninstall(c){const f=u(c)?this.plugins[c]:c;
f?(c=f.__name,f.uninstall(this),this.__installed=this.__installed.filter(e=>e!==f),delete this.plugins[c],this.trigger({type:"uninstall",plugin:f})):console.warn("[three.uninstall] "+c+"' is not installed.")}__ready(){this.triggerOnce({type:"ready"})}}p.Bootstrap=m;m.initClass();m.Plugin=function(c){this.options=Object.assign({},this.defaults,c||{})};m.Plugin.prototype={listen:[],defaults:{},install:function(c){},uninstall:function(c){}};y.Binder.apply(m.prototype);y.Binder.apply(m.Plugin.prototype);
D.Api.apply(m.Plugin.prototype)};
shadow$provide[11]=function(D,y,Q,p){y(10).Bootstrap.registerPlugin("splash",{defaults:{color:"mono",fancy:!0},listen:["ready","mathbox/init:init","mathbox/progress:progress","mathbox/destroy:destroy"],uninstall(){return this.destroy()},ready(u,q){if(q.MathBox&&!this.div)return this.init(u,q)},init(u,q){this.destroy();({color:u}=this.options);var m=`\
<div class="mathbox-loader mathbox-splash-${u}">
  <div class="mathbox-logo">
    <div> <div></div><div></div><div></div> </div>
    <div> <div></div><div></div><div></div> </div>
  </div>
  <div class="mathbox-progress"><div></div></div>
</div>\
`;this.div=u=document.createElement("div");u.innerHTML=m;q.element.appendChild(u);m=2*Math.random()-1;const c=2*Math.random()-1,f=2*Math.random()-1,e=1/Math.sqrt(m*m+c*c+f*f);this.loader=u.querySelector(".mathbox-loader");this.bar=u.querySelector(".mathbox-progress \x3e div");this.gyro=u.querySelectorAll(".mathbox-logo \x3e div");this.transforms=["rotateZ(22deg) rotateX(24deg) rotateY(30deg)","rotateZ(11deg) rotateX(12deg) rotateY(15deg) scale3d(.6, .6, .6)"];this.random=[m*e,c*e,f*e];this.start=
q.Time.now;return this.timer=null},progress(u,q){if(this.div){var {current:m,total:c}=u;u=m<c;clearTimeout(this.timer);u?(this.loader.classList.remove("mathbox-exit"),this.loader.style.display="block"):(this.loader.classList.add("mathbox-exit"),this.timer=setTimeout(()=>this.loader.style.display="none",150));this.bar.style.width=m<c?.1*Math.round(1E3*m/c)+"%":"100%";if(this.options.fancy){const f=this.random,e=Math.max(0,Math.min(1,q.Time.now-this.start)),g=function(k,l){null==l&&(l=0);return k.replace(/(-?[0-9.e]+)deg/g,
(r,v)=>+v+f[l++]*e*q.Time.step*60+"deg")};return(()=>{const k=[];for(let l=0;l<this.gyro.length;l++){let r;const v=this.gyro[l];this.transforms[l]=r=g(this.transforms[l]);k.push(v.style.transform=v.style.WebkitTransform=r)}return k})()}}},destroy(){null!=this.div&&this.div.remove();return this.div=null}})};
shadow$provide[12]=function(D,y,Q,p){D=y(10);D.Bootstrap.registerAlias("empty","fallback bind renderer size fill loop time".split(" "));D.Bootstrap.registerAlias("core",["empty","scene","camera","render","warmup"]);D.Bootstrap.registerAlias("VR",["core","cursor","fullscreen","render:vr"])};
shadow$provide[13]=function(D,y,Q,p){D=y(10);var u=y(9);D.Bootstrap.registerPlugin("bind",{install:function(q){q.bind=u.Binder.bind(q,{three:q,window});q.unbind=u.Binder.unbind(q);q.bind("install:bind",this);q.bind("uninstall:unbind",this)},uninstall:function(q){q.unbind(this);delete q.bind;delete q.unbind},bind:function(q,m){const c=q.plugin;(q=c.listen)&&q.forEach(function(f){m.bind(f,c)})},unbind:function(q,m){m.unbind(q.plugin)}})};
shadow$provide[14]=function(D,y,Q,p){var u=y(7);y(10).Bootstrap.registerPlugin("camera",{defaults:{near:.01,far:1E4,type:"perspective",fov:60,aspect:null,left:-1,right:1,bottom:-1,top:1,klass:null,parameters:null},listen:["resize","this.change"],install:function(q){q.Camera=this.api();q.camera=null;this.aspect=1;this.change({},q)},uninstall:function(q){delete q.Camera;delete q.camera},change:function(q,m){const c=this.options,f=m.camera;if(!m.camera||q.changes.type||q.changes.klass)q=c.klass||{perspective:u.PerspectiveCamera,
orthographic:u.OrthographicCamera}[c.type]||u.Camera,m.camera=c.parameters?new q(c.parameters):new q;Object.entries(c).forEach(function([e]){Object.prototype.hasOwnProperty.call(m.camera,e)&&(m.camera[e]=c[e])}.bind(this));this.update(m);f===m.camera||m.trigger({type:"camera",camera:m.camera})},resize:function(q,m){this.aspect=q.viewWidth/Math.max(1,q.viewHeight);this.update(m)},update:function(q){q.camera.aspect=this.options.aspect||this.aspect;q.camera.updateProjectionMatrix()}})};
shadow$provide[15]=function(D,y,Q,p){y(10).Bootstrap.registerPlugin("fallback",{defaults:{force:!1,fill:!0,begin:'\x3cdiv class\x3d"threestrap-fallback" style\x3d"display: table; width: 100%; height: 100%;box-sizing: border-box; border: 1px dashed rgba(0, 0, 0, .25);"\x3e\x3cdiv style\x3d"display: table-cell; padding: 10px; vertical-align: middle; text-align: center;"\x3e',end:"\x3c/div\x3e\x3c/div\x3e",message:'\x3cbig\x3e\x3cstrong\x3eThis example requires WebGL\x3c/strong\x3e\x3c/big\x3e\x3cbr\x3eVisit \x3ca target\x3d"_blank" href\x3d"http://get.webgl.org/"\x3eget.webgl.org\x3c/a\x3e for more info\x3c/a\x3e'},
install:function(u){try{var q=document.createElement("canvas");var m=q.getContext("webgl")||q.getContext("experimental-webgl");if(!m||this.options.force)throw"WebGL unavailable.";u.fallback=!1}catch(c){q=this.options.message;m=this.options.begin;const f=this.options.end,e=this.options.fill,g=document.createElement("div");g.innerHTML=m+q+f;for(this.children=[];0<g.childNodes.length;)this.children.push(g.firstChild),u.element.appendChild(g.firstChild);e&&u.install("fill");this.div=g;u.fallback=!0;return!1}},
uninstall:function(u){this.children&&(this.children.forEach(function(q){q.parentNode.removeChild(q)}),this.children=null);delete u.fallback}})};
shadow$provide[16]=function(D,y,Q,p){y(10).Bootstrap.registerPlugin("fill",{defaults:{block:!0,body:!0,layout:!0},install:function(u){function q(c){c=c.style.height;return"auto"==c||""==c}function m(c){c.style.height="100%";c.style.margin=0;c.style.padding=0;return c}this.options.body&&u.element==document.body&&(this.applied=[u.element,document.documentElement].filter(q).map(m));this.options.block&&u.canvas&&(u.canvas.style.display="block",this.block=!0);this.options.layout&&u.element&&"static"==
window.getComputedStyle(u.element).position&&(u.element.style.position="relative",this.layout=!0)},uninstall:function(u){this.applied&&(this.applied.map(function(q){q.style.height="";q.style.margin="";q.style.padding="";return q}),delete this.applied);this.block&&u.canvas&&(u.canvas.style.display="",delete this.block);this.layout&&u.element&&(u.element.style.position="",delete this.layout)},change:function(u){this.uninstall(u);this.install(u)}})};
shadow$provide[17]=function(D,y,Q,p){y(10).Bootstrap.registerPlugin("loop",{defaults:{start:!0,each:1},listen:["ready"],install:function(u){this.running=!1;this.lastRequestId=null;u.Loop=this.api({start:this.start.bind(this),stop:this.stop.bind(this),running:!1,window},u);this.events=["pre","update","render","post"].map(function(q){return{type:q}})},uninstall:function(u){this.stop(u)},ready:function(u,q){this.options.start&&this.start(q)},start:function(u){if(!this.running){u.Loop.running=this.running=
!0;var q=u.trigger.bind(u),m=function(){this.running&&(this.lastRequestId=u.Loop.window.requestAnimationFrame(m),this.events.map(q))}.bind(this);this.lastRequestId=u.Loop.window.requestAnimationFrame(m);u.trigger({type:"start"})}},stop:function(u){this.running&&(u.Loop.running=this.running=!1,u.Loop.window.cancelAnimationFrame(this.lastRequestId),this.lastRequestId=null,u.trigger({type:"stop"}))}})};
shadow$provide[18]=function(D,y,Q,p){y(10).Bootstrap.registerPlugin("render",{listen:["render"],render:function(u,q){q.scene&&q.camera&&q.renderer.render(q.scene,q.camera)}})};
shadow$provide[19]=function(D,y,Q,p){D=y(7);y(10).Bootstrap.registerPlugin("renderer",{defaults:{klass:D.WebGL1Renderer,parameters:{depth:!0,stencil:!0,preserveDrawingBuffer:!0,antialias:!0}},listen:["resize"],install:function(u){const q=u.renderer=new this.options.klass(this.options.parameters);u.canvas=q.domElement;u.element.appendChild(q.domElement)},uninstall:function(u){u.element.removeChild(u.renderer.domElement);delete u.renderer;delete u.canvas},resize:function(u,q){q=q.renderer;const m=q.domElement;
m&&"CANVAS"==m.tagName?q.setSize(u.renderWidth,u.renderHeight,!1):(q.setRenderSize&&q.setRenderSize(u.renderWidth,u.renderHeight),q.setSize(u.viewWidth,u.viewHeight,!1))}})};
shadow$provide[20]=function(D,y,Q,p){var u=y(7);y(10).Bootstrap.registerPlugin("scene",{install:function(q){q.scene=new u.Scene},uninstall:function(q){delete q.scene}})};
shadow$provide[21]=function(D,y,Q,p){y(10).Bootstrap.registerPlugin("size",{defaults:{width:null,height:null,aspect:null,scale:1,maxRenderWidth:Infinity,maxRenderHeight:Infinity,devicePixelRatio:!0},listen:["window.resize:queue","element.resize:queue","this.change:queue","ready:resize","pre:pre"],install:function(u){u.Size=this.api({renderWidth:0,renderHeight:0,viewWidth:0,viewHeight:0});this.resized=!1},uninstall:function(u){delete u.Size},queue:function(u,q){this.resized=!0},pre:function(u,q){this.resized&&
(this.resized=!1,this.resize(u,q))},resize:function(u,q){var m=this.options,c=q.element,f=q.renderer,e,g;let k,l=0,r=0;u=e=void 0===m.width||null==m.width?c.offsetWidth||c.innerWidth||0:m.width;c=g=void 0===m.height||null==m.height?c.offsetHeight||c.innerHeight||0:m.height;k=u/c;m.aspect&&(m.aspect>k?(c=Math.round(u/m.aspect),r=Math.floor((g-c)/2)):(u=Math.round(c*m.aspect),l=Math.floor((e-u)/2)),k=u/c);g=1;m.devicePixelRatio&&"undefined"!=typeof window&&(g=window.devicePixelRatio||1);e=Math.round(Math.min(u*
g*m.scale,m.maxRenderWidth));m=Math.round(Math.min(c*g*m.scale,m.maxRenderHeight));e/m>k?e=Math.round(m*k):m=Math.round(e/k);g=m/c;f=f.domElement.style;f.width=u+"px";f.height=c+"px";f.marginLeft=l+"px";f.marginTop=r+"px";Object.assign(q.Size,{renderWidth:e,renderHeight:m,viewWidth:u,viewHeight:c,aspect:k,pixelRatio:g});q.trigger({type:"resize",renderWidth:e,renderHeight:m,viewWidth:u,viewHeight:c,aspect:k,pixelRatio:g})}})};
shadow$provide[22]=function(D,y,Q,p){y(10).Bootstrap.registerPlugin("time",{defaults:{speed:1,warmup:0,timeout:1},listen:["pre:tick","this.change"],now:function(){return+new Date/1E3},install:function(u){u.Time=this.api({now:this.now(),clock:0,step:1/60,frames:0,time:0,delta:1/60,average:0,fps:0});this.clock=this.time=this.last=0;this.wait=this.options.warmup;this.timeStart=this.clockStart=0},tick:function(u,q){u=this.options.speed;const m=this.options.timeout;q=q.Time;const c=q.now=this.now();var f=
this.last;let e=this.time,g=this.clock;if(f){f=q.delta=c-f;const k=q.average||f;f>m&&(f=0);u*=f;e+=f;g+=u;0<q.frames&&(q.average=k+.1*(f-k),q.fps=1/k);q.step=u;q.clock=g-this.clockStart;q.time=e-this.timeStart;q.frames++;0<this.wait--&&(this.clockStart=g,this.timeStart=e,q.clock=0,q.step=1E-100)}this.last=c;this.clock=g;this.time=e},uninstall:function(u){delete u.Time}})};
shadow$provide[23]=function(D,y,Q,p){y(10).Bootstrap.registerPlugin("warmup",{defaults:{delay:2},listen:["ready","post"],ready:function(u,q){q.renderer.domElement.style.visibility="hidden";this.frame=0;this.hidden=!0},post:function(u,q){this.hidden&&this.frame>=this.options.delay&&(q.renderer.domElement.style.visibility="visible",this.hidden=!1);this.frame++}})};
shadow$provide[24]=function(D,y,Q,p){y(13);y(14);y(15);y(16);y(17);y(18);y(19);y(20);y(21);y(22);y(23)};
shadow$provide[25]=function(D,y,Q,p){var u=y(7);y(10).Bootstrap.registerPlugin("controls",{listen:["update","resize","camera","this.change"],defaults:{klass:null,parameters:{}},install:function(q){if(!this.options.klass)throw"Must provide class for `controls.klass`";q.controls=null;this._camera=q.camera||new u.PerspectiveCamera;this.change(null,q)},uninstall:function(q){delete q.controls},change:function(q,m){if(this.options.klass){if(!q||q.changes.klass)m.controls=new this.options.klass(this._camera,
m.renderer.domElement);Object.assign(m.controls,this.options.parameters)}else m.controls=null},update:function(q,m){q=m.Time&&m.Time.delta||1/60;const c=m.VR&&m.VR.state;m.controls.vr&&m.controls.vr(c);m.controls.update(q)},camera:function(q,m){m.controls.object=this._camera=q.camera},resize:function(q,m){m.controls.handleResize&&m.controls.handleResize()}})};
shadow$provide[26]=function(D,y,Q,p){y(10).Bootstrap.registerPlugin("cursor",{listen:"update this.change install:change uninstall:change element.mousemove vr".split(" "),defaults:{cursor:null,hide:!1,timeout:3},install:function(u){this.timeout=this.options.timeout;this.element=u.element;this.change(null,u)},uninstall:function(u){delete u.controls},change:function(u,q){this.applyCursor(q)},mousemove:function(u,q){this.options.hide&&(this.applyCursor(q),this.timeout=+this.options.timeout||0)},update:function(u,
q){u=q.Time&&q.Time.delta||1/60;this.options.hide&&(this.timeout-=u,0>this.timeout&&this.applyCursor(q,"none"))},vr:function(u,q){this.hide=u.active&&!u.hmd.fake;this.applyCursor(q)},applyCursor:function(u,q){u=u.controls?"move":"";q=q||this.options.cursor||u;this.hide&&(q="none");this.cursor!=q&&(this.element.style.cursor=q)}})};
shadow$provide[27]=function(D,y,Q,p){y(10).Bootstrap.registerPlugin("fullscreen",{defaults:{key:"f"},listen:["ready","update"],install:function(u){u.Fullscreen=this.api({active:!1,toggle:this.toggle.bind(this)},u)},uninstall:function(u){delete u.Fullscreen},ready:function(u,q){document.body.addEventListener("keypress",function(m){this.options.key&&m.charCode==this.options.key.charCodeAt(0)&&this.toggle(q)}.bind(this));u=function(){const m=!!document.fullscreenElement||!!document.mozFullScreenElement||
!!document.webkitFullscreenElement||!!document.msFullscreenElement;q.Fullscreen.active=this.active=m;q.trigger({type:"fullscreen",active:m})}.bind(this);document.addEventListener("fullscreenchange",u,!1);document.addEventListener("webkitfullscreenchange",u,!1);document.addEventListener("mozfullscreenchange",u,!1)},toggle:function(u){const q=u.canvas;u=u.VR&&u.VR.active?{vrDisplay:u.VR.hmd}:{};this.active?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():
document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen&&document.mozCancelFullScreen():q.requestFullScreen?q.requestFullScreen(u):q.msRequestFullScreen?q.msRequestFullscreen(u):q.webkitRequestFullscreen?q.webkitRequestFullscreen(u):q.mozRequestFullScreen&&q.mozRequestFullScreen(u)}})};
shadow$provide[28]=function(D,y,Q,p){(function(u,q){"object"===typeof p&&"undefined"!==typeof Q?Q.exports=q():"function"===typeof define&&define.amd?define(q):u.Stats=q()})(this,function(){var u=function(){function q(w){f.appendChild(w.dom);return w}function m(w){for(var z=0;z<f.children.length;z++)f.children[z].style.display=z===w?"block":"none";c=w}var c=0,f=document.createElement("div");f.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000";f.addEventListener("click",
function(w){w.preventDefault();m(++c%f.children.length)},!1);var e=(performance||Date).now(),g=e,k=0,l=q(new u.Panel("FPS","#0ff","#002")),r=q(new u.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var v=q(new u.Panel("MB","#f08","#201"));m(0);return{REVISION:16,dom:f,addPanel:q,showPanel:m,begin:function(){e=(performance||Date).now()},end:function(){k++;var w=(performance||Date).now();r.update(w-e,200);if(w>g+1E3&&(l.update(1E3*k/(w-g),100),g=w,k=0,v)){var z=performance.memory;
v.update(z.usedJSHeapSize/1048576,z.jsHeapSizeLimit/1048576)}return w},update:function(){e=this.end()},domElement:f,setMode:m}};u.Panel=function(q,m,c){var f=Infinity,e=0,g=Math.round,k=g(window.devicePixelRatio||1),l=80*k,r=48*k,v=3*k,w=2*k,z=3*k,A=15*k,H=74*k,F=30*k,L=document.createElement("canvas");L.width=l;L.height=r;L.style.cssText="width:80px;height:48px";var N=L.getContext("2d");N.font="bold "+9*k+"px Helvetica,Arial,sans-serif";N.textBaseline="top";N.fillStyle=c;N.fillRect(0,0,l,r);N.fillStyle=
m;N.fillText(q,v,w);N.fillRect(z,A,H,F);N.fillStyle=c;N.globalAlpha=.9;N.fillRect(z,A,H,F);return{dom:L,update:function(R,J){f=Math.min(f,R);e=Math.max(e,R);N.fillStyle=c;N.globalAlpha=1;N.fillRect(0,0,l,A);N.fillStyle=m;N.fillText(g(R)+" "+q+" ("+g(f)+"-"+g(e)+")",v,w);N.drawImage(L,z+k,A,H-k,F,z,A,H-k,F);N.fillRect(z+H-k,A,k,F);N.fillStyle=c;N.globalAlpha=.9;N.fillRect(z+H-k,A,k,g((1-R/J)*F))}}};return u})};
shadow$provide[29]=function(D,y,Q,p){var u=function(q){return q&&q.__esModule?q:{default:q}}(y(28));y(10).Bootstrap.registerPlugin("stats",{listen:["pre","post"],install:function(q){const m=this.stats=new u.default,c=m.domElement.style;c.position="absolute";c.top=c.left=0;q.element.appendChild(m.domElement);q.stats=m},uninstall:function(q){this.stats.domElement.remove();delete q.stats},pre:function(q,m){this.stats.begin()},post:function(q,m){this.stats.end()}})};
shadow$provide[30]=function(D,y,Q,p){y(10).Bootstrap.registerPlugin("ui",{defaults:{theme:"white",style:".threestrap-ui { position: absolute; bottom: 5px; right: 5px; float: left; }.threestrap-ui button { border: 0; background: none;  vertical-align: middle; font-weight: bold; } .threestrap-ui .glyphicon { top: 2px; font-weight: bold; } @media (max-width: 640px) { .threestrap-ui button { font-size: 120% } }.threestrap-white button { color: #fff; text-shadow: 0 1px 1px rgba(0, 0, 0, 1), 0 1px 3px rgba(0, 0, 0, 1); }.threestrap-black button { color: #000; text-shadow: 0 0px 1px rgba(255, 255, 255, 1), 0 0px 2px rgba(255, 255, 255, 1), 0 0px 2px rgba(255, 255, 255, 1) }"},
listen:["fullscreen"],markup:function(u,q,m){let c="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css";location.href.match(/^file:\/\//)&&(c="http://"+c);const f=[];u.Fullscreen&&f.push('\x3cbutton class\x3d"fullscreen" title\x3d"Full Screen"\x3e\x3cspan class\x3d"glyphicon glyphicon-fullscreen"\x3e\x3c/span\x3e\x3c/button\x3e');u.VR&&f.push('\x3cbutton class\x3d"vr" title\x3d"VR Headset"\x3eVR\x3c/button\x3e');return'\x3cstyle type\x3d"text/css"\x3e@import url("'+c+'"); '+m+
'\x3c/style\x3e\x3cdiv class\x3d"threestrap-ui threestrap-'+q+'"\x3e'+f.join("\n")+"\x3c/div\x3e"},install:function(u){var q=this.ui=document.createElement("div");q.innerHTML=this.markup(u,this.options.theme,this.options.style);document.body.appendChild(q);const m=this.ui.fullscreen=q.querySelector("button.fullscreen");m&&u.bind([m,"click:goFullscreen"],this);(q=this.ui.vr=q.querySelector("button.vr"))&&u.VR&&(u.VR.set({mode:"2d"}),u.bind([q,"click:goVR"],this))},fullscreen:function(u,q){this.ui.style.display=
u.active?"none":"block";u.active||q.VR&&q.VR.set({mode:"2d"})},goFullscreen:function(u,q){q.Fullscreen&&q.Fullscreen.toggle()},goVR:function(u,q){q.VR&&(q.VR.set({mode:"auto"}),q.Fullscreen.toggle())},uninstall:function(u){document.body.removeChild(this.ui)}})};
shadow$provide[31]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.VRRenderer=void 0;var u=y(7);class q{constructor(m,c){this.renderer=m;this.right=new u.Vector3;this.cameraLeft=new u.PerspectiveCamera;this.cameraRight=new u.PerspectiveCamera;m=c.getEyeTranslation("left");this.halfIPD=(new u.Vector3(m.x,m.y,m.z)).length();this.fovLeft=c.getRecommendedEyeFieldOfView("left");this.fovRight=c.getRecommendedEyeFieldOfView("right")}FovToNDCScaleOffset(m){const c=2/(m.leftTan+m.rightTan),
f=2/(m.upTan+m.downTan);return{scale:[c,f],offset:[(m.leftTan-m.rightTan)*c*.5,(m.upTan-m.downTan)*f*.5]}}FovPortToProjection(m,c,f,e,g){e=void 0===e?.01:e;g=void 0===g?1E4:g;f=void 0===f||f?-1:1;const k=m.elements;c=this.FovToNDCScaleOffset(c);k[0]=c.scale[0];k[1]=0;k[2]=c.offset[0]*f;k[3]=0;k[4]=0;k[5]=c.scale[1];k[6]=-c.offset[1]*f;k[7]=0;k[8]=0;k[9]=0;k[10]=g/(e-g)*-f;k[11]=g*e/(e-g);k[12]=0;k[13]=0;k[14]=f;k[15]=0;m.transpose()}FovToProjection(m,c,f,e,g){return this.FovPortToProjection(m,{upTan:Math.tan(c.upDegrees*
Math.PI/180),downTan:Math.tan(c.downDegrees*Math.PI/180),leftTan:Math.tan(c.leftDegrees*Math.PI/180),rightTan:Math.tan(c.rightDegrees*Math.PI/180)},f,e,g)}render(m,c){this.FovToProjection(this.cameraLeft.projectionMatrix,this.fovLeft,!0,c.near,c.far);this.FovToProjection(this.cameraRight.projectionMatrix,this.fovRight,!0,c.near,c.far);this.right.set(this.halfIPD,0,0);this.right.applyQuaternion(c.quaternion);this.cameraLeft.position.copy(c.position).sub(this.right);this.cameraRight.position.copy(c.position).add(this.right);
this.cameraLeft.quaternion.copy(c.quaternion);this.cameraRight.quaternion.copy(c.quaternion);var f=this.renderer.devicePixelRatio||1;c=this.renderer.domElement.width/2/f;f=this.renderer.domElement.height/f;this.renderer.enableScissorTest(!0);this.renderer.setViewport(0,0,c,f);this.renderer.setScissor(0,0,c,f);this.renderer.render(m,this.cameraLeft);this.renderer.setViewport(c,0,c,f);this.renderer.setScissor(c,0,c,f);this.renderer.render(m,this.cameraRight)}}p.VRRenderer=q};
shadow$provide[32]=function(D,y,Q,p){D=y(10);var u=y(31);D.Bootstrap.registerPlugin("vr",{defaults:{mode:"auto",device:null,fov:80},listen:["window.load","pre","render","resize","this.change"],install:function(q){q.VR=this.api({active:!1,devices:[],hmd:null,sensor:null,renderer:null,state:null},q)},uninstall:function(q){delete q.VR},mocks:function(q,m,c){return[{fake:!0,force:1,deviceId:"emu",deviceName:"Emulated",getEyeTranslation:function(f){return{left:{x:-.03,y:0,z:0},right:{x:.03,y:0,z:0}}[f]},
getRecommendedEyeFieldOfView:function(f){var e=q.camera;const g=(m||e&&e.fov||c)/2;e=180*Math.atan(Math.tan(g*Math.PI/180)*(e&&e.aspect||16/9)/2)/Math.PI;return{left:{rightDegrees:e,leftDegrees:e,downDegrees:g,upDegrees:g},right:{rightDegrees:e,leftDegrees:e,downDegrees:g,upDegrees:g}}[f]}},{force:2,getState:function(){return{}}}]},load:function(q,m){q=function(c){this.callback(c,m)}.bind(this);navigator.getVRDevices?navigator.getVRDevices().then(q):navigator.mozGetVRDevices?navigator.mozGetVRDevices(q):
(console.warn("No native VR support detected."),q(this.mocks(m,this.options.fov,this.defaults.fov),m))},callback:function(q,m){let c,f;var e=window.HMDVRDevice||function(){};const g=window.PositionSensorVRDevice||function(){};q=m.VR.devices=q||m.VR.devices;var k=this.options.device;let l;for(let r=0;r<q.length;++r)if(l=q[r],(1==l.force||l instanceof e)&&(!k||k==l.deviceId)){c=l;break}if(c){for(k=0;k<q.length;++k)if(e=q[k],2==e.force||e instanceof g&&e.hardwareUnitId==c.hardwareUnitId){f=e;break}this.hookup(c,
f,m)}},hookup:function(q,m,c){u.VRRenderer||console.log("VRRenderer not found");this.renderer=new (u.VRRenderer||function(){})(c.renderer,q);this.hmd=q;this.sensor=m;c.VR.renderer=this.renderer;c.VR.hmd=q;c.VR.sensor=m;console.log("VRRenderer",q.deviceName)},change:function(q,m){q.changes.device&&this.callback(null,m);this.pre(q,m)},pre:function(q,m){q=this.active;const c=this.active=this.renderer&&"2d"!=this.options.mode;if((m.VR.active=c)&&this.sensor){const f=this.sensor.getState();m.VR.state=
f}else m.VR.state=null;q!=this.active&&m.trigger({type:"vr",active:c,hmd:this.hmd,sensor:this.sensor})},resize:function(q,m){this.active&&this.renderer.initialize()},render:function(q,m){if(m.scene&&m.camera){q=this.active?this.renderer:m.renderer;if(this.last!=q&&q==m.renderer){var c=q.getPixelRatio();const f=q.domElement.width/c;c=q.domElement.height/c;q.setScissorTest(!1);q.setViewport(0,0,f,c)}this.last=q;q.render(m.scene,m.camera)}}})};
shadow$provide[33]=function(D,y,Q,p){y(25);y(26);y(27);y(29);y(30);y(32)};
shadow$provide[34]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.VRControls=void 0;var u=y(7);class q{constructor(m,c){function f(e){this.vrDisplays=e;0<e.length?this.vrDisplay=e[0]:c&&c("VR input not available.")}this.object=m;this.standingMatrix=new u.Matrix4;this.frameData=null;"VRFrameData"in window&&(this.frameData=new VRFrameData);navigator.getVRDisplays&&navigator.getVRDisplays().then(f).catch(function(){console.warn("VRControls: Unable to get VR Displays")});this.scale=
1;this.standing=!1;this.userHeight=1.6}getVRDisplay(){return this.vrDisplay}setVRDisplay(m){this.vrDisplay=m}getVRDisplays(){console.warn("VRControls: getVRDisplays() is being deprecated.");return this.vrDisplays}getStandingMatrix(){return this.standingMatrix}update(){if(this.vrDisplay){let m;this.vrDisplay.getFrameData?(this.vrDisplay.getFrameData(this.frameData),m=this.frameData.pose):this.vrDisplay.getPose&&(m=this.vrDisplay.getPose());null!==m.orientation&&this.object.quaternion.fromArray(m.orientation);
null!==m.position?this.object.position.fromArray(m.position):this.object.position.set(0,0,0);this.standing&&(this.vrDisplay.stageParameters?(this.object.updateMatrix(),this.standingMatrix.fromArray(this.vrDisplay.stageParameters.sittingToStandingTransform),this.object.applyMatrix(this.standingMatrix)):this.object.position.setY(this.object.position.y+this.userHeight));this.object.position.multiplyScalar(this.scale)}}dispose(){this.vrDisplay=null}}p.VRControls=q};
shadow$provide[35]=function(D,y,Q,p){y(34)};
shadow$provide[36]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.MultiRenderer=void 0;var u=y(7);class q{constructor(m){console.log("MultiRenderer",u.REVISION);this.domElement=document.createElement("div");this.domElement.style.position="relative";this.renderers=[];this._renderSizeSet=!1;const c=m.renderers||[];m=m.parameters||[];for(let f=0;f<c.length;f++){const e=new c[f](m[f]);e.domElement.style.position="absolute";e.domElement.style.top="0px";e.domElement.style.left="0px";
this.domElement.appendChild(e.domElement);this.renderers.push(e)}}setSize(m,c){this.domElement.style.width=m+"px";this.domElement.style.height=c+"px";for(let f=0;f<this.renderers.length;f++){const e=this.renderers[f],g=e.domElement;(!this._renderSizeSet||g&&"CANVAS"!==g.tagName)&&e.setSize(m,c);g.style.width=m+"px";g.style.height=c+"px"}}setRenderSize(m,c){this._renderSizeSet=!0;for(let f=0;f<this.renderers.length;f++){const e=this.renderers[f],g=e.domElement;g&&"CANVAS"===g.tagName&&e.setSize(m,
c,!1)}}render(m,c){for(let f=0;f<this.renderers.length;f++)this.renderers[f].render(m,c)}}p.MultiRenderer=q};
shadow$provide[37]=function(D,y,Q,p){y(36);y(31)};
shadow$provide[38]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});Object.defineProperty(p,"Api",{enumerable:!0,get:function(){return u.Api}});Object.defineProperty(p,"Binder",{enumerable:!0,get:function(){return q.Binder}});Object.defineProperty(p,"Bootstrap",{enumerable:!0,get:function(){return m.Bootstrap}});Object.defineProperty(p,"VRControls",{enumerable:!0,get:function(){return c.VRControls}});Object.defineProperty(p,"MultiRenderer",{enumerable:!0,get:function(){return f.MultiRenderer}});
Object.defineProperty(p,"VRRenderer",{enumerable:!0,get:function(){return e.VRRenderer}});y(12);y(9);y(10);y(24);y(33);y(35);y(37);var u=y(8),q=y(9),m=y(10),c=y(34),f=y(36),e=y(31)};
shadow$provide[39]=function(D,y,Q,p){function u(f,e){return"undefined"!==typeof f&&null!==f?e(f):void 0}Object.defineProperty(p,"__esModule",{value:!0});p.Attributes=void 0;class q{constructor(f,e){this.context=e;this.traits=f.Traits;this.types=f.Types;this.pending=[];this.bound=[];this.last=null}make(f){return{enum:"function"===typeof f.enum?f.enum():void 0,type:"function"===typeof f.uniform?f.uniform():void 0,value:f.make()}}apply(f,e){return new c(f,e,this)}bind(f){return this.bound.push(f)}unbind(f){return this.bound=
Array.from(this.bound).filter(e=>e!==f)}queue(f,e,g,k){this.lastObject=e;this.lastKey=g;this.lastValue=k;return this.pending.push(f)}invoke(f){return f(this.context.time.clock,this.context.time.step)}compute(){if(this.bound.length)for(const f of Array.from(this.bound))this.invoke(f)}digest(){let f;if(!this.pending.length)return!1;[f,this.pending]=Array.from([this.pending,[]]);for(const e of Array.from(f))e();return!0}getTrait(f){return this.traits[f]}getLastTrigger(){return`${this.lastObject.toString()} - ${this.lastKey}=\`${this.lastValue}\``}}
p.Attributes=q;const m=function(f){const e={};for(const g in f)e[g]=f[g];return e};class c{constructor(f,e,g){let k;let l,r,v,w,z,{props:A}=e;const {traits:H,finals:F,freeform:L}=e,N=this;null!=f.props&&null!=f.expr&&null!=f.orig&&null!=f.computed&&null!=f.attributes&&(w=m(f.props),r=m(f.expr),v=f.orig(),l=f.computed(),null!=f.attributes&&f.attributes.dispose());const R={},J={},Y={},fa=xa=>null!=(null!=N[xa]?N[xa].value:void 0)?null!=N[xa]?N[xa].value:void 0:u(N[null!=Y[xa]?Y[xa]:xa],jb=>jb.value),
Z=function(xa,jb,cb,Ub){let fc;xa=null!=Y[xa]?Y[xa]:xa;if(null==(fc=N[xa])){if(!L)throw Error(`${f.toString()} - Setting unknown property \`${xa}={${jb}}\``);fc=N[xa]={short:xa,type:null,last:null,value:null};Wa[xa]=Wb=>Wb}if(!cb){if(ra[xa])throw Error(`${f.toString()} - Can't set bound property \`${xa}={${jb}}\``);if(za[xa])throw Error(`${f.toString()} - Can't set computed property \`${xa}={${jb}}\``);if(O[xa])throw Error(`${f.toString()} - Can't set final property \`${xa}={${jb}}\``);}let Fa=!0;
const vb=Ob(xa,jb,fc.last,function(){Fa=!1;return null});if(Fa){[fc.value,fc.last]=Array.from([vb,fc.value]);const {short:Wb}=fc;R[Wb]=vb;cb||(J[Wb]=jb);Ub||Xa[xa](fc.value,fc.last)||Pb(xa,jb)}return Fa};e=function(xa,jb,cb){xa=null!=Y[xa]?Y[xa]:xa;Z(xa,jb,!0,cb);return O[xa]=!0};const da={},la={},W={},ra={},za={},O={},pa=function(xa,jb,cb){null==cb&&(cb=!1);xa=null!=Y[xa]?Y[xa]:xa;if("function"!==typeof jb)throw Error(`${f.toString()} - Expression \`${xa}=>{${da}}\` is not a function`);if(ra[xa])throw Error(`${f.toString()} - Property \`${xa}=>{${da}}\` is already bound`);
if(za[xa])throw Error(`${f.toString()} - Property \`${xa}\` is computed`);if(O[xa])throw Error(`${f.toString()} - Property \`${xa}\` is final`);(cb?za:ra)[xa]=jb;const Ub=null!=N[xa]?N[xa].short:xa;cb||(da[Ub]=jb);W[xa]=jb;jb=jb.bind(f);la[xa]=function(fc,Fa){let vb;if(vb=null!=f.clock?f.clock.getTime():void 0)fc=vb.clock,Fa=vb.step;return f.set(xa,jb(fc,Fa),!0)};return g.bind(la[xa])},Ta=function(xa,jb){null==jb&&(jb=!1);xa=null!=Y[xa]?Y[xa]:xa;jb=jb?za:ra;if(jb[xa])return g.unbind(la[xa]),delete la[xa],
delete jb[xa],null!=N[xa]&&(xa=N[xa].short),delete da[xa]},na=function(xa,jb){let cb;xa=null!=Y[xa]?Y[xa]:xa;return null!=(cb="function"===typeof W[xa]?W[xa](jb,0):void 0)?cb:N[xa].value};f.expr=da;f.props=R;f.evaluate=function(xa,jb){if(null!=xa)return na(xa,jb);const cb={};for(xa in A)cb[xa]=na(xa,jb);return cb};f.get=function(xa){return null!=xa?fa(xa):R};f.set=function(xa,jb,cb,Ub){if("string"===typeof xa)Z(xa,jb,cb,Ub);else{Ub=cb;cb=jb;const fc=xa;for(xa in fc)jb=fc[xa],Z(xa,jb,cb,Ub)}};f.bind=
function(xa,jb,cb){if("string"===typeof xa)pa(xa,jb,cb);else{cb=jb;const Ub=xa;for(xa in Ub)jb=Ub[xa],pa(xa,jb,cb)}};f.unbind=function(xa,jb){if("string"===typeof xa)Ta(xa,jb);else{jb=da;const cb=xa;for(xa in cb)Ta(xa,jb)}};f.attribute=function(xa){return null!=xa?N[null!=Y[xa]?Y[xa]:xa]:N};f.orig=function(xa){return null!=xa?J[null!=Y[xa]?Y[xa]:xa]:m(J)};f.computed=function(xa){return null!=xa?za[null!=Y[xa]?Y[xa]:xa]:m(za)};const Ra={},Wa={},Xa={},Ob=(xa,jb,cb,Ub)=>Wa[xa](jb,cb,Ub);f.validate=function(xa,
jb){let cb;xa=null!=Y[xa]?Y[xa]:xa;const Ub=Ra[xa];null!=Ub&&(cb=Ub());return cb=Ob(xa,jb,cb,function(){throw Error(`${f.toString()} - Invalid value \`${xa}={${jb}}\``);})};let Db=!1,Gb={},ec={},ob={},Sb={};const Pb=function(xa,jb){Db||(Db=!0,g.queue(pc,f,xa,jb));jb=xa.split(".")[0];Gb[xa]=!0;return ec[jb]=!0},bc={type:"change",changed:null,touched:null},pc=function(){bc.changed=Gb;bc.touched=ec;Gb=ob;ec=Sb;({changed:ob}=bc);({touched:Sb}=bc);Db=!1;for(xa in Gb)Gb[xa]=!1;for(xa in ec)ec[xa]=!1;bc.type=
"change";f.trigger(bc);var xa=[];for(const jb in bc.touched)bc.type=`change:${jb}`,xa.push(f.trigger(bc));return xa},Eb=function(xa){xa=xa.split(/\./g);const jb=xa.pop();xa.pop();xa.unshift(jb);return xa.reduce((cb,Ub)=>cb+Ub.charAt(0).toUpperCase()+Ub.substring(1))},hb=(xa,jb)=>(()=>{const cb=[];for(let Ub in jb){let fc;const Fa=jb[Ub];Ub=[xa,Ub].join(".");const vb=Eb(Ub);N[Ub]={T:Fa,ns:xa,short:vb,enum:"function"===typeof Fa.enum?Fa.enum():void 0,type:"function"===typeof Fa.uniform?Fa.uniform():
void 0,last:Fa.make(),value:fc=Fa.make()};if(Y[vb])throw Error(`${f.toString()} - Duplicate property \`${vb}\``);Y[vb]=Ub;R[vb]=fc;Ra[Ub]=Fa.make;Wa[Ub]=null!=Fa.validate?Fa.validate:Wb=>Wb;cb.push(Xa[Ub]=null!=Fa.equals?Fa.equals:(Wb,Ic)=>Wb===Ic)}return cb})(),Mb=[];for(let xa of Array.from(H)){[xa,yc]=Array.from(xa.split(":"));const jb=yc?[yc,xa].join("."):xa;z=g.getTrait(xa);Mb.push(xa);null!=z&&hb(jb,z)}if(null!=A)for(yc in A)z=A[yc],hb(yc,z);var yc=Mb.filter((xa,jb)=>Mb.indexOf(xa)===jb);f.traits=
yc;null!=w&&f.set(w,!0,!0);if(null!=F)for(k in F)e(k,F[k],!0);null!=v&&f.set(v,!1,!0);null!=l&&f.bind(l,!0);null!=r&&f.bind(r,!1);this.dispose=function(){for(k in za)Ta(k,!0);for(k in ra)Ta(k,!1);A={};delete f.attributes;delete f.get;return delete f.set};null}}};
shadow$provide[40]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.format=p.print=p.number=p.markup=p.JSX=void 0;const u=(r,v)=>1E-4>Math.abs(r/v-Math.round(r/v)),q=function(r,v,w,z){r=Math.round(r/v);return 1===r?`${w}`:-1===r?`-${w}`:"1"===w?`${r}`:z?`${r}${w}`:`${r}*${w}`},m=function(r,v,w,z){r=Math.round(r*v);1===Math.abs(r)?r=(0>r?"-":"")+w:"1"!==w&&(r+=z?`${w}`:`*${w}`);return`${r}/${v}`},c=[{1:1},{1:1,"τ":2*Math.PI},{1:1,"π":Math.PI},{1:1,"τ":2*Math.PI,"π":Math.PI},{1:1,
e:Math.E},{1:1,"τ":2*Math.PI,e:Math.E},{1:1,"π":Math.PI,e:Math.E},{1:1,"τ":2*Math.PI,"π":Math.PI,e:Math.E}],f=[[420,[2,3,5,7]],[88200,[2,3,5,7]],[60060,[2,3,5,7,11,13]],[861764,[2,17,19,23,29]],[65536,[2]],[1E6,[2,5]]],e=function(r){let v,w,z,A,H;r&&({cache:v,compact:w,tau:H,pi:A,e:z}=r);w=+!(null!=w&&!w);const F=+!(null!=H&&!H)+2*+!(null!=A&&!A)+4*+!(null!=z&&!z),L=+!(null!=v&&!v)?{}:null;return function(N){if(null!=L){var R;if(null!=(R=L[N]))return R;if(N===Math.round(N))return L[N]=`${N}`}let J=
`${N}`,Y=J.length+J.indexOf(".")+2;R=function(fa){const Z=fa.length;if(Z<=Y)return J=`${fa}`,Y=Z};for(const fa in c[F]){const Z=c[F][fa];if(u(N/Z,1))R(`${q(N/Z,1,fa,w)}`);else for(let [da,la]of Array.from(f)){let W=N/Z*da;if(u(W,1)){for(const ra of Array.from(la)){let za,O;for(;u(O=W/ra,1)&&u(za=da/ra,1);)W=O,da=za}R(`${m(N/Z,da,fa,w)}`);break}}}5<`${N}`.length&&R(`${N.toPrecision(5)}`);null!=L&&(L[N]=J);return J}};p.number=e;p.print=function(r,v){null==v&&(v="info");r=g(r);return console[v].apply(console,
r)};const g=function(r){let v=!1,w=0;const z=[];r=r.replace(/(\\[<={}> "'])|(=>|[<={}> "'])/g,function(A,H,F){return null!=H&&H.length?H:v&&!['"',"'"].includes(F)||w&&!['"',"'","{","}"].includes(F)?F:(()=>{switch(F){case "\x3c":return z.push("color:rgb(128,0,128)"),"%c\x3c";case "\x3e":return z.push("color:rgb(128,0,128)"),z.push("color:inherit"),"%c\x3e%c";case " ":return z.push("color:rgb(144,64,0)")," %c";case "\x3d":case "\x3d\x3e":return z.push("color:rgb(128,0,128)"),`%c${F}`;case '"':case "'":if(v=
!v)return z.push(w?"color:rgb(144,64,0)":"color:rgb(0,0,192)"),`${F}%c`;z.push(w?"color:rgb(0,70,156)":"color:rgb(128,0,128)");return`%c${F}`;case "{":return 0===w++?(z.push("color:rgb(0,70,156)"),`%c${F}`):F;case "}":return 0===--w?(z.push("color:rgb(128,0,128)"),`${F}%c`):F;default:return F}})()});return[r].concat(z)};p.markup=g;const k=function(){const r=e({compact:!1});return function(v,w,z){const A=function(H){if(H instanceof Array)return`[${H.map(A).join(", ")}]`;switch(typeof H){case "string":return H.match("\n")?
`"\n${H}"\n`:`"${H}"`;case "function":return H=`${H}`,H.match("\n")?`\n${H}\n`:`${H}`,H=H.replace(/^function (\([^)]*\))/,"$1 \x3d\x3e"),H=H.replace(/^(\([^)]*\)) =>\s*{\s*return\s*([^}]+)\s*;\s*}/,"$1 \x3d\x3e $2");case "number":return r(H);default:return null!=H&&H!==!!H?null!=H._up?A(H.map(F=>F)):H.toMarkup?H.toString():"{"+(()=>{const F=[];for(const J in H){const Y=H[J];if(Object.prototype.hasOwnProperty.call(H,J)){var L=F,N=L.push;var R=J;R=R===""+ +R||R.match(/^[A-Za-z_][A-Za-z0-9]*$/)?R:JSON.stringify(R);
N.call(L,`${R}: ${A(Y)}`)}}return F})().join(", ")+"}":`${JSON.stringify(H)}`}};return[v,z,function(H){return H.match('\n*"')?H:`{${H}}`}(A(w))].join("")}}(),l=function(r){r=r.replace(/&/g,"\x26amp;");r=r.replace(/</g,"\x26lt;");return r.replace(/"/g,"\x26quot;")};p.format=function(r){const v=[].slice.call(arguments);v.shift();let w="\x3cspan\x3e";r=l(r);for(const z of Array.from(v))r=r.replace(/%([a-z])/,function(A,H){A=v.shift();switch(H){case "c":return`</span><span style="${l(A)}">`;default:return l(A)}});
w+=r;return w+="\x3c/span\x3e"};p.JSX={prop:(r,v)=>k(r,v,"\x3d"),bind:(r,v)=>k(r,v,"\x3d\x3e")}};
shadow$provide[41]=function(D,y,Q,p){function u(f){if("function"!==typeof WeakMap)return null;var e=new WeakMap,g=new WeakMap;return(u=function(k){return k?g:e})(f)}Object.defineProperty(p,"__esModule",{value:!0});p.Node=void 0;var q=function(f,e){if(!e&&f&&f.__esModule)return f;if(null===f||"object"!==typeof f&&"function"!==typeof f)return{default:f};if((e=u(e))&&e.has(f))return e.get(f);var g={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor,l;for(l in f)if("default"!==l&&Object.prototype.hasOwnProperty.call(f,
l)){var r=k?Object.getOwnPropertyDescriptor(f,l):null;r&&(r.get||r.set)?Object.defineProperty(g,l,r):g[l]=f[l]}g.default=f;e&&e.set(f,g);return g}(y(40));D=y(9);let m=0;class c{constructor(f,e,g,k,l,r){this.type=f;this._id=(++m).toString();this.configure(l,r);this.parent=this.root=this.path=this.index=null;this.set(e,!0,!0);this.set(g,!1,!0);this.bind(k,!1)}configure(f,e){let {traits:g,props:k,finals:l,freeform:r}=f;null==g&&(g=null!=(null!=this._config?this._config.traits:void 0)?null!=this._config?
this._config.traits:void 0:[]);null==k&&(k=null!=(null!=this._config?this._config.props:void 0)?null!=this._config?this._config.props:void 0:{});null==l&&(l=null!=(null!=this._config?this._config.finals:void 0)?null!=this._config?this._config.finals:void 0:{});null==r&&(r=null!=(null!=this._config?this._config.freeform:void 0)?null!=this._config?this._config.freeform:void 0:!1);this._config={traits:g,props:k,finals:l,freeform:r};return this.attributes=e.apply(this,this._config)}dispose(){this.attributes.dispose();
return this.attributes=null}_added(f){this.parent=f;this.root=f.root;f={type:"add",node:this,parent:this.parent};this.root&&this.root.trigger(f);f.type="added";return this.trigger(f)}_removed(){const f={type:"remove",node:this};this.root&&this.root.trigger(f);f.type="removed";this.trigger(f);return this.root=this.parent=null}_index(f,e){null==e&&({parent:e}=this);this.index=f;this.path=f=null!=f?(null!=(null!=e?e.path:void 0)?null!=e?e.path:void 0:[]).concat([f]):null;this.order=null!=f?this._encode(f):
Infinity;if(null!=this.root)return this.trigger({type:"reindex"})}_encode(f){let e=1+1/3,g=0;for(const k of Array.from(f))[e,g]=Array.from([g+3/(k+1+3)*(e-g),g+3/(k+2+3)*(e-g)]);return e}toString(){const f=null!=this.type?this.type:"node";let e;e=f+`#${null!=this.id?this.id:this._id}`;null!=this.classes&&this.classes.length&&(e+=`.${this.classes.join(".")}`);if(null!=this.children){let g;return(g=this.children.length)?`<${e}>…(${g})…</${f}>`:`<${e}></${f}>`}return`<${e} />`}toMarkup(f=null,e){let g,
k;null==e&&(e="");if(f&&"function"!==typeof f){var l;f=null!=(l=null!=this.root?this.root.model._matcher(f):void 0)?l:()=>!0}l=null!=this.type?this.type:"node";let {expr:r}=this;const v={id:this._id};var w="function"===typeof this.orig?this.orig():void 0;for(g in w)k=w[g],v[g]=k;w=(()=>{const H=[];for(g in v)k=v[g],this.expr[g]||H.push(q.JSX.prop(g,k));return H})();r=(()=>{const H=[];for(g in r)k=r[g],H.push(q.JSX.bind(g,k));return H})();var z=[""];w.length&&(z=z.concat(w));r.length&&(z=z.concat(r));
z=z.join(" ");let A=e;w=()=>null!=this.children&&this.children.length?this.children.map(H=>H.toMarkup(f,A)).filter(H=>null!=H&&H.length).join("\n"):"";return f&&!f(this)?w():null!=this.children?(z=`<${l}${z}>`,l=`</${l}>`,A=e+"  ",w=w(),w.length&&(w="\n"+w+"\n"+e),null==w&&(w=""),e+z+w+l):`${e}<${l}${z} />`}print(f,e){return q.print(this.toMarkup(f),e)}}p.Node=c;D.Binder.apply(c.prototype)};
shadow$provide[42]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Group=void 0;D=y(41);class u extends D.Node{constructor(q,m,c,f,e,g){super(q,m,c,f,e,g);this.children=[];this.on("reindex",k=>Array.from(this.children).map(l=>l.trigger(k)))}add(q){null!=q.parent&&q.parent.remove(q);q._index(this.children.length,this);this.children.push(q);return q._added(this)}remove(q){null!=q.children&&q.children.length&&q.empty();const m=this.children.indexOf(q);if(-1!==m){this.children.splice(m,
1);q._index(null);q._removed(this);for(let c=0;c<this.children.length;c++)q=this.children[c],c>=m&&q._index(c)}}empty(){const q=this.children.slice().reverse();for(const m of Array.from(q))this.remove(m)}}p.Group=u};
shadow$provide[43]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Guard=void 0;class u{constructor(q){null==q&&(q=10);this.limit=q}iterate(q){const {step:m,last:c}=q;for({limit:q}=this;m();)if(!--q)throw console.warn("Last iteration","function"===typeof c?c():void 0),Error("Exceeded iteration limit.");return null}}p.Guard=u};
shadow$provide[44]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Doctype=p.CDATA=p.Tag=p.Style=p.Script=p.Comment=p.Directive=p.Text=p.Root=p.isTag=p.ElementType=void 0;var u;(function(q){q.Root="root";q.Text="text";q.Directive="directive";q.Comment="comment";q.Script="script";q.Style="style";q.Tag="tag";q.CDATA="cdata";q.Doctype="doctype"})(u=p.ElementType||(p.ElementType={}));p.isTag=function(q){return q.type===u.Tag||q.type===u.Script||q.type===u.Style};p.Root=u.Root;p.Text=
u.Text;p.Directive=u.Directive;p.Comment=u.Comment;p.Script=u.Script;p.Style=u.Style;p.Tag=u.Tag;p.CDATA=u.CDATA;p.Doctype=u.Doctype};
shadow$provide[45]=function(D,y,Q,p){function u(R){return(0,v.isTag)(R)}function q(R){return R.type===v.ElementType.CDATA}function m(R){return R.type===v.ElementType.Text}function c(R){return R.type===v.ElementType.Comment}function f(R){return R.type===v.ElementType.Directive}function e(R){return R.type===v.ElementType.Root}function g(R,J){void 0===J&&(J=!1);if(m(R))J=new z(R.data);else if(c(R))J=new A(R.data);else if(u(R)){J=J?k(R.children):[];var Y=new N(R.name,r({},R.attribs),J);J.forEach(function(da){return da.parent=
Y});null!=R.namespace&&(Y.namespace=R.namespace);R["x-attribsNamespace"]&&(Y["x-attribsNamespace"]=r({},R["x-attribsNamespace"]));R["x-attribsPrefix"]&&(Y["x-attribsPrefix"]=r({},R["x-attribsPrefix"]));J=Y}else if(q(R)){J=J?k(R.children):[];var fa=new F(v.ElementType.CDATA,J);J.forEach(function(da){return da.parent=fa});J=fa}else if(e(R)){J=J?k(R.children):[];var Z=new L(J);J.forEach(function(da){return da.parent=Z});R["x-mode"]&&(Z["x-mode"]=R["x-mode"]);J=Z}else if(f(R))J=new H(R.name,R.data),null!=
R["x-name"]&&(J["x-name"]=R["x-name"],J["x-publicId"]=R["x-publicId"],J["x-systemId"]=R["x-systemId"]);else throw Error("Not implemented yet: ".concat(R.type));J.startIndex=R.startIndex;J.endIndex=R.endIndex;null!=R.sourceCodeLocation&&(J.sourceCodeLocation=R.sourceCodeLocation);return J}function k(R){R=R.map(function(Y){return g(Y,!0)});for(var J=1;J<R.length;J++)R[J].prev=R[J-1],R[J-1].next=R[J];return R}var l=this&&this.__extends||function(){var R=function(J,Y){R=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(fa,Z){fa.__proto__=Z}||function(fa,Z){for(var da in Z)Object.prototype.hasOwnProperty.call(Z,da)&&(fa[da]=Z[da])};return R(J,Y)};return function(J,Y){function fa(){this.constructor=J}if("function"!==typeof Y&&null!==Y)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");R(J,Y);J.prototype=null===Y?Object.create(Y):(fa.prototype=Y.prototype,new fa)}}(),r=this&&this.__assign||function(){r=Object.assign||function(R){for(var J,Y=1,fa=arguments.length;Y<
fa;Y++){J=arguments[Y];for(var Z in J)Object.prototype.hasOwnProperty.call(J,Z)&&(R[Z]=J[Z])}return R};return r.apply(this,arguments)};Object.defineProperty(p,"__esModule",{value:!0});p.cloneNode=p.hasChildren=p.isDocument=p.isDirective=p.isComment=p.isText=p.isCDATA=p.isTag=p.Element=p.Document=p.NodeWithChildren=p.ProcessingInstruction=p.Comment=p.Text=p.DataNode=p.Node=void 0;var v=y(44),w=new Map([[v.ElementType.Tag,1],[v.ElementType.Script,1],[v.ElementType.Style,1],[v.ElementType.Directive,
1],[v.ElementType.Text,3],[v.ElementType.CDATA,4],[v.ElementType.Comment,8],[v.ElementType.Root,9]]);D=function(){function R(J){this.type=J;this.endIndex=this.startIndex=this.next=this.prev=this.parent=null}Object.defineProperty(R.prototype,"nodeType",{get:function(){var J;return null!==(J=w.get(this.type))&&void 0!==J?J:1},enumerable:!1,configurable:!0});Object.defineProperty(R.prototype,"parentNode",{get:function(){return this.parent},set:function(J){this.parent=J},enumerable:!1,configurable:!0});
Object.defineProperty(R.prototype,"previousSibling",{get:function(){return this.prev},set:function(J){this.prev=J},enumerable:!1,configurable:!0});Object.defineProperty(R.prototype,"nextSibling",{get:function(){return this.next},set:function(J){this.next=J},enumerable:!1,configurable:!0});R.prototype.cloneNode=function(J){void 0===J&&(J=!1);return g(this,J)};return R}();p.Node=D;y=function(R){function J(Y,fa){Y=R.call(this,Y)||this;Y.data=fa;return Y}l(J,R);Object.defineProperty(J.prototype,"nodeValue",
{get:function(){return this.data},set:function(Y){this.data=Y},enumerable:!1,configurable:!0});return J}(D);p.DataNode=y;var z=function(R){function J(Y){return R.call(this,v.ElementType.Text,Y)||this}l(J,R);return J}(y);p.Text=z;var A=function(R){function J(Y){return R.call(this,v.ElementType.Comment,Y)||this}l(J,R);return J}(y);p.Comment=A;var H=function(R){function J(Y,fa){fa=R.call(this,v.ElementType.Directive,fa)||this;fa.name=Y;return fa}l(J,R);return J}(y);p.ProcessingInstruction=H;var F=function(R){function J(Y,
fa){Y=R.call(this,Y)||this;Y.children=fa;return Y}l(J,R);Object.defineProperty(J.prototype,"firstChild",{get:function(){var Y;return null!==(Y=this.children[0])&&void 0!==Y?Y:null},enumerable:!1,configurable:!0});Object.defineProperty(J.prototype,"lastChild",{get:function(){return 0<this.children.length?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0});Object.defineProperty(J.prototype,"childNodes",{get:function(){return this.children},set:function(Y){this.children=Y},enumerable:!1,
configurable:!0});return J}(D);p.NodeWithChildren=F;var L=function(R){function J(Y){return R.call(this,v.ElementType.Root,Y)||this}l(J,R);return J}(F);p.Document=L;var N=function(R){function J(Y,fa,Z,da){void 0===Z&&(Z=[]);void 0===da&&(da="script"===Y?v.ElementType.Script:"style"===Y?v.ElementType.Style:v.ElementType.Tag);Z=R.call(this,da,Z)||this;Z.name=Y;Z.attribs=fa;return Z}l(J,R);Object.defineProperty(J.prototype,"tagName",{get:function(){return this.name},set:function(Y){this.name=Y},enumerable:!1,
configurable:!0});Object.defineProperty(J.prototype,"attributes",{get:function(){var Y=this;return Object.keys(this.attribs).map(function(fa){var Z,da;return{name:fa,value:Y.attribs[fa],namespace:null===(Z=Y["x-attribsNamespace"])||void 0===Z?void 0:Z[fa],prefix:null===(da=Y["x-attribsPrefix"])||void 0===da?void 0:da[fa]}})},enumerable:!1,configurable:!0});return J}(F);p.Element=N;p.isTag=u;p.isCDATA=q;p.isText=m;p.isComment=c;p.isDirective=f;p.isDocument=e;p.hasChildren=function(R){return Object.prototype.hasOwnProperty.call(R,
"children")};p.cloneNode=g};
shadow$provide[46]=function(D,y,Q,p){var u=this&&this.__createBinding||(Object.create?function(e,g,k,l){void 0===l&&(l=k);var r=Object.getOwnPropertyDescriptor(g,k);if(!r||("get"in r?!g.__esModule:r.writable||r.configurable))r={enumerable:!0,get:function(){return g[k]}};Object.defineProperty(e,l,r)}:function(e,g,k,l){void 0===l&&(l=k);e[l]=g[k]});D=this&&this.__exportStar||function(e,g){for(var k in e)"default"===k||Object.prototype.hasOwnProperty.call(g,k)||u(g,e,k)};Object.defineProperty(p,"__esModule",
{value:!0});p.DomHandler=void 0;var q=y(44),m=y(45);D(y(45),p);var c=/\s+/g,f={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1,xmlMode:!1};y=function(){function e(g,k,l){this.dom=[];this.root=new m.Document(this.dom);this.done=!1;this.tagStack=[this.root];this.parser=this.lastNode=null;"function"===typeof k&&(l=k,k=f);"object"===typeof g&&(k=g,g=void 0);this.callback=null!==g&&void 0!==g?g:null;this.options=null!==k&&void 0!==k?k:f;this.elementCB=null!==l&&void 0!==l?l:null}e.prototype.onparserinit=
function(g){this.parser=g};e.prototype.onreset=function(){this.dom=[];this.root=new m.Document(this.dom);this.done=!1;this.tagStack=[this.root];this.parser=this.lastNode=null};e.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))};e.prototype.onerror=function(g){this.handleCallback(g)};e.prototype.onclosetag=function(){this.lastNode=null;var g=this.tagStack.pop();this.options.withEndIndices&&(g.endIndex=this.parser.endIndex);this.elementCB&&this.elementCB(g)};
e.prototype.onopentag=function(g,k){g=new m.Element(g,k,void 0,this.options.xmlMode?q.ElementType.Tag:void 0);this.addNode(g);this.tagStack.push(g)};e.prototype.ontext=function(g){var k=this.options.normalizeWhitespace,l=this.lastNode;l&&l.type===q.ElementType.Text?(l.data=k?(l.data+g).replace(c," "):l.data+g,this.options.withEndIndices&&(l.endIndex=this.parser.endIndex)):(k&&(g=g.replace(c," ")),g=new m.Text(g),this.addNode(g),this.lastNode=g)};e.prototype.oncomment=function(g){this.lastNode&&this.lastNode.type===
q.ElementType.Comment?this.lastNode.data+=g:(g=new m.Comment(g),this.addNode(g),this.lastNode=g)};e.prototype.oncommentend=function(){this.lastNode=null};e.prototype.oncdatastart=function(){var g=new m.Text(""),k=new m.NodeWithChildren(q.ElementType.CDATA,[g]);this.addNode(k);g.parent=k;this.lastNode=g};e.prototype.oncdataend=function(){this.lastNode=null};e.prototype.onprocessinginstruction=function(g,k){g=new m.ProcessingInstruction(g,k);this.addNode(g)};e.prototype.handleCallback=function(g){if("function"===
typeof this.callback)this.callback(g,this.dom);else if(g)throw g;};e.prototype.addNode=function(g){var k=this.tagStack[this.tagStack.length-1],l=k.children[k.children.length-1];this.options.withStartIndices&&(g.startIndex=this.parser.startIndex);this.options.withEndIndices&&(g.endIndex=this.parser.endIndex);k.children.push(g);l&&(g.prev=l,l.next=g);g.parent=k;this.lastNode=null};return e}();p.DomHandler=y;p.default=y};
shadow$provide[47]=function(D,y,Q,p){Q.exports={Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"\ud835\udd04",afr:"\ud835\udd1e",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",amp:"\x26",AMP:"\x26",andand:"⩕",And:"⩓",and:"∧",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",
angmsdag:"⦮",angmsdah:"⦯",angmsd:"∡",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"\ud835\udd38",aopf:"\ud835\udd52",apacir:"⩯",ap:"≈",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"\ud835\udc9c",ascr:"\ud835\udcb6",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",
Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"\ud835\udd05",bfr:"\ud835\udd1f",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",
blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"\x3d⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"\ud835\udd39",bopf:"\ud835\udd53",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxHd:"╤",boxhD:"╥",boxHD:"╦",boxhu:"┴",boxHu:"╧",boxhU:"╨",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",
boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"\ud835\udcb7",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsolb:"⧅",bsol:"\\",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",capand:"⩄",capbrcup:"⩉",capcap:"⩋",cap:"∩",Cap:"⋒",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",
caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"\ud835\udd20",Cfr:"ℭ",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",
cir:"○",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"\ud835\udd54",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",
Cscr:"\ud835\udc9e",cscr:"\ud835\udcb8",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cup:"∪",Cup:"⋓",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",Darr:"↡",dArr:"⇓",dash:"‐",
Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",ddagger:"‡",ddarr:"⇊",DD:"ⅅ",dd:"ⅆ",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"\ud835\udd07",dfr:"\ud835\udd21",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",
divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"\ud835\udd3b",dopf:"\ud835\udd55",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",
DoubleVerticalBar:"∥",DownArrowBar:"⤓",downarrow:"↓",DownArrow:"↓",Downarrow:"⇓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVectorBar:"⥖",DownLeftVector:"↽",DownRightTeeVector:"⥟",DownRightVectorBar:"⥗",DownRightVector:"⇁",DownTeeArrow:"↧",DownTee:"⊤",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"\ud835\udc9f",dscr:"\ud835\udcb9",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",
dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",Ecirc:"Ê",ecirc:"ê",ecir:"≖",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",edot:"ė",eDot:"≑",ee:"ⅇ",efDot:"≒",Efr:"\ud835\udd08",efr:"\ud835\udd22",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp13:" ",emsp14:" ",
emsp:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"\ud835\udd3c",eopf:"\ud835\udd56",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"\x3d",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",
exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"\ud835\udd09",ffr:"\ud835\udd23",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"\ud835\udd3d",fopf:"\ud835\udd57",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",
frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"\ud835\udcbb",Fscr:"ℱ",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",ge:"≥",gE:"≧",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",gescc:"⪩",ges:"⩾",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"\ud835\udd0a",gfr:"\ud835\udd24",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gla:"⪥",gl:"≷",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",
gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"\ud835\udd3e",gopf:"\ud835\udd58",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"\ud835\udca2",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",gtcc:"⪧",gtcir:"⩺",gt:"\x3e",GT:"\x3e",Gt:"≫",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",
HARDcy:"Ъ",hardcy:"ъ",harrcir:"⥈",harr:"↔",hArr:"⇔",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"\ud835\udd25",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"\ud835\udd59",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"\ud835\udcbd",Hscr:"ℋ",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",
icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",ifr:"\ud835\udd26",Ifr:"ℑ",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",Im:"ℑ",imof:"⊷",imped:"Ƶ",Implies:"⇒",incare:"℅","in":"∈",infin:"∞",infintie:"⧝",inodot:"ı",intcal:"⊺","int":"∫",Int:"∬",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",
iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"\ud835\udd40",iopf:"\ud835\udd5a",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",iscr:"\ud835\udcbe",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"\ud835\udd0d",jfr:"\ud835\udd27",jmath:"ȷ",Jopf:"\ud835\udd41",jopf:"\ud835\udd5b",Jscr:"\ud835\udca5",jscr:"\ud835\udcbf",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",
Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"\ud835\udd0e",kfr:"\ud835\udd28",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"\ud835\udd42",kopf:"\ud835\udd5c",Kscr:"\ud835\udca6",kscr:"\ud835\udcc0",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larrb:"⇤",larrbfs:"⤟",larr:"←",Larr:"↞",lArr:"⇐",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",latail:"⤙",lAtail:"⤛",lat:"⪫",late:"⪭",
lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",LeftArrowBar:"⇤",leftarrow:"←",LeftArrow:"←",Leftarrow:"⇐",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVectorBar:"⥙",LeftDownVector:"⇃",LeftFloor:"⌊",leftharpoondown:"↽",
leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTeeArrow:"↤",LeftTee:"⊣",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangleBar:"⧏",LeftTriangle:"⊲",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVectorBar:"⥘",LeftUpVector:"↿",LeftVectorBar:"⥒",LeftVector:"↼",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",lescc:"⪨",les:"⩽",lesdot:"⩿",lesdoto:"⪁",
lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"\ud835\udd0f",lfr:"\ud835\udd29",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",llarr:"⇇",ll:"≪",Ll:"⋘",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoustache:"⎰",lmoust:"⎰",lnap:"⪉",lnapprox:"⪉",
lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftrightarrow:"⟷",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longmapsto:"⟼",longrightarrow:"⟶",LongRightArrow:"⟶",Longrightarrow:"⟹",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"\ud835\udd43",lopf:"\ud835\udd5d",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",
lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"\ud835\udcc1",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",ltcc:"⪦",ltcir:"⩹",lt:"\x3c",LT:"\x3c",Lt:"≪",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",
mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"\ud835\udd10",mfr:"\ud835\udd2a",mho:"℧",micro:"µ",midast:"*",midcir:"⫰",mid:"∣",middot:"·",minusb:"⊟",minus:"−",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"\ud835\udd44",mopf:"\ud835\udd5e",mp:"∓",mscr:"\ud835\udcc2",Mscr:"ℳ",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natural:"♮",naturals:"ℕ",
natur:"♮",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",ne:"≠",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"\ud835\udd11",nfr:"\ud835\udd2b",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",
nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nlE:"≦̸",nle:"≰",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"\ud835\udd5f",Nopf:"ℕ",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",
NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangleBar:"⧏̸",NotLeftTriangle:"⋪",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",
NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangleBar:"⧐̸",NotRightTriangle:"⋫",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",
NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",nparallel:"∦",npar:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",nprec:"⊀",npreceq:"⪯̸",npre:"⪯̸",nrarrc:"⤳̸",nrarr:"↛",nrArr:"⇏",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"\ud835\udca9",nscr:"\ud835\udcc3",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",
nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:"\x3e⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"\x3c⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",
nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",Ocirc:"Ô",ocirc:"ô",ocir:"⊚",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"\ud835\udd12",ofr:"\ud835\udd2c",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"\ud835\udd46",oopf:"\ud835\udd60",opar:"⦷",
OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",orarr:"↻",Or:"⩔",or:"∨",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"\ud835\udcaa",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",otimesas:"⨶",Otimes:"⨷",otimes:"⊗",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",para:"¶",parallel:"∥",par:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",
permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"\ud835\udd13",pfr:"\ud835\udd2d",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plus:"+",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"\ud835\udd61",Popf:"ℙ",pound:"£",prap:"⪷",Pr:"⪻",pr:"≺",prcue:"≼",precapprox:"⪷",prec:"≺",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",
PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",pre:"⪯",prE:"⪳",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportional:"∝",Proportion:"∷",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"\ud835\udcab",pscr:"\ud835\udcc5",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"\ud835\udd14",qfr:"\ud835\udd2e",qint:"⨌",qopf:"\ud835\udd62",Qopf:"ℚ",qprime:"⁗",Qscr:"\ud835\udcac",qscr:"\ud835\udcc6",quaternions:"ℍ",
quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarr:"→",Rarr:"↠",rArr:"⇒",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",
rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",Re:"ℜ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"\ud835\udd2f",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrowBar:"⇥",rightarrow:"→",RightArrow:"→",Rightarrow:"⇒",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",
RightDownTeeVector:"⥝",RightDownVectorBar:"⥕",RightDownVector:"⇂",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTeeArrow:"↦",RightTee:"⊢",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangleBar:"⧐",RightTriangle:"⊳",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVectorBar:"⥔",RightUpVector:"↾",RightVectorBar:"⥓",RightVector:"⇀",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",
rmoustache:"⎱",rmoust:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"\ud835\udd63",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"\ud835\udcc7",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",scap:"⪸",Scaron:"Š",scaron:"š",Sc:"⪼",sc:"≻",sccue:"≽",sce:"⪰",scE:"⪴",Scedil:"Ş",
scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdotb:"⊡",sdot:"⋅",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"\ud835\udd16",sfr:"\ud835\udd30",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",
sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",solbar:"⌿",solb:"⧄",sol:"/",Sopf:"\ud835\udd4a",sopf:"\ud835\udd64",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",square:"□",Square:"□",
SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squ:"□",squf:"▪",srarr:"→",Sscr:"\ud835\udcae",sscr:"\ud835\udcc8",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",
subsim:"⫇",subsub:"⫕",subsup:"⫓",succapprox:"⪸",succ:"≻",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup1:"¹",sup2:"²",sup3:"³",sup:"⊃",Sup:"⋑",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",
supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"\ud835\udd17",tfr:"\ud835\udd31",there4:"∴",therefore:"∴",Therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",ThinSpace:" ",thinsp:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",tilde:"˜",Tilde:"∼",
TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",timesbar:"⨱",timesb:"⊠",times:"×",timesd:"⨰",tint:"∭",toea:"⤨",topbot:"⌶",topcir:"⫱",top:"⊤",Topf:"\ud835\udd4b",topf:"\ud835\udd65",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"\ud835\udcaf",tscr:"\ud835\udcc9",TScy:"Ц",tscy:"ц",
TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",uarr:"↑",Uarr:"↟",uArr:"⇑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"\ud835\udd18",ufr:"\ud835\udd32",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",
UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"\ud835\udd4c",uopf:"\ud835\udd66",UpArrowBar:"⤒",uparrow:"↑",UpArrow:"↑",Uparrow:"⇑",UpArrowDownArrow:"⇅",updownarrow:"↕",UpDownArrow:"↕",Updownarrow:"⇕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTeeArrow:"↥",UpTee:"⊥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"\ud835\udcb0",
uscr:"\ud835\udcca",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",Vcy:"В",vcy:"в",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",veebar:"⊻",vee:"∨",Vee:"⋁",veeeq:"≚",
vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"\ud835\udd19",vfr:"\ud835\udd33",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"\ud835\udd4d",vopf:"\ud835\udd67",vprop:"∝",vrtri:"⊳",Vscr:"\ud835\udcb1",vscr:"\ud835\udccb",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",Wfr:"\ud835\udd1a",wfr:"\ud835\udd34",Wopf:"\ud835\udd4e",
wopf:"\ud835\udd68",wp:"℘",wr:"≀",wreath:"≀",Wscr:"\ud835\udcb2",wscr:"\ud835\udccc",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"\ud835\udd1b",xfr:"\ud835\udd35",xharr:"⟷",xhArr:"⟺",Xi:"Ξ",xi:"ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"\ud835\udd4f",xopf:"\ud835\udd69",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",Xscr:"\ud835\udcb3",xscr:"\ud835\udccd",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",
Yfr:"\ud835\udd1c",yfr:"\ud835\udd36",YIcy:"Ї",yicy:"ї",Yopf:"\ud835\udd50",yopf:"\ud835\udd6a",Yscr:"\ud835\udcb4",yscr:"\ud835\udcce",YUcy:"Ю",yucy:"ю",yuml:"ÿ",Yuml:"Ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",zfr:"\ud835\udd37",Zfr:"ℨ",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",zopf:"\ud835\udd6b",Zopf:"ℤ",Zscr:"\ud835\udcb5",zscr:"\ud835\udccf",zwj:"‍",zwnj:"‌"}};
shadow$provide[48]=function(D,y,Q,p){Q.exports={Aacute:"Á",aacute:"á",Acirc:"Â",acirc:"â",acute:"´",AElig:"Æ",aelig:"æ",Agrave:"À",agrave:"à",amp:"\x26",AMP:"\x26",Aring:"Å",aring:"å",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",brvbar:"¦",Ccedil:"Ç",ccedil:"ç",cedil:"¸",cent:"¢",copy:"©",COPY:"©",curren:"¤",deg:"°",divide:"÷",Eacute:"É",eacute:"é",Ecirc:"Ê",ecirc:"ê",Egrave:"È",egrave:"è",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",frac12:"½",frac14:"¼",frac34:"¾",gt:"\x3e",GT:"\x3e",Iacute:"Í",iacute:"í",Icirc:"Î",
icirc:"î",iexcl:"¡",Igrave:"Ì",igrave:"ì",iquest:"¿",Iuml:"Ï",iuml:"ï",laquo:"«",lt:"\x3c",LT:"\x3c",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",Ntilde:"Ñ",ntilde:"ñ",Oacute:"Ó",oacute:"ó",Ocirc:"Ô",ocirc:"ô",Ograve:"Ò",ograve:"ò",ordf:"ª",ordm:"º",Oslash:"Ø",oslash:"ø",Otilde:"Õ",otilde:"õ",Ouml:"Ö",ouml:"ö",para:"¶",plusmn:"±",pound:"£",quot:'"',QUOT:'"',raquo:"»",reg:"®",REG:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",THORN:"Þ",thorn:"þ",times:"×",Uacute:"Ú",uacute:"ú",Ucirc:"Û",
ucirc:"û",Ugrave:"Ù",ugrave:"ù",uml:"¨",Uuml:"Ü",uuml:"ü",Yacute:"Ý",yacute:"ý",yen:"¥",yuml:"ÿ"}};
shadow$provide[49]=function(D,y,Q,p){Q.exports={amp:"\x26",apos:"'",gt:"\x3e",lt:"\x3c",quot:'"'}};
shadow$provide[50]=function(D,y,Q,p){Q.exports={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376}};
shadow$provide[51]=function(D,y,Q,p){D=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{"default":m}};Object.defineProperty(p,"__esModule",{value:!0});var u=D(y(50)),q=String.fromCodePoint||function(m){var c="";65535<m&&(m-=65536,c+=String.fromCharCode(m>>>10&1023|55296),m=56320|m&1023);return c+=String.fromCharCode(m)};p.default=function(m){if(55296<=m&&57343>=m||1114111<m)return"�";m in u.default&&(m=u.default[m]);return q(m)}};
shadow$provide[52]=function(D,y,Q,p){function u(k){var l=q(k);return function(r){return String(r).replace(e,l)}}function q(k){return function(l){if("#"===l.charAt(1)){var r=l.charAt(2);return"X"===r||"x"===r?f.default(parseInt(l.substr(3),16)):f.default(parseInt(l.substr(2),10))}return k[l.slice(1,-1)]||l}}D=this&&this.__importDefault||function(k){return k&&k.__esModule?k:{"default":k}};Object.defineProperty(p,"__esModule",{value:!0});p.decodeHTML=p.decodeHTMLStrict=p.decodeXML=void 0;var m=D(y(47)),
c=D(y(48));Q=D(y(49));var f=D(y(51)),e=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;p.decodeXML=u(Q.default);p.decodeHTMLStrict=u(m.default);var g=function(k,l){return k<l?1:-1};p.decodeHTML=function(){function k(H){";"!==H.substr(-1)&&(H+=";");return A(H)}for(var l=Object.keys(c.default).sort(g),r=Object.keys(m.default).sort(g),v=0,w=0;v<r.length;v++)l[w]===r[v]?(r[v]+=";?",w++):r[v]+=";";var z=new RegExp("\x26(?:"+r.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),A=q(m.default);return function(H){return String(H).replace(z,
k)}}()};
shadow$provide[53]=function(D,y,Q,p){function u(l){return Object.keys(l).sort().reduce(function(r,v){r[l[v]]="\x26"+v+";";return r},{})}function q(l){var r=[],v=[],w=0;for(l=Object.keys(l);w<l.length;w++){var z=l[w];1===z.length?r.push("\\"+z):v.push(z)}r.sort();for(w=0;w<r.length-1;w++){for(l=w;l<r.length-1&&r[l].charCodeAt(1)+1===r[l+1].charCodeAt(1);)l+=1;z=1+l-w;3>z||r.splice(w,z,r[w]+"-"+r[l])}v.unshift("["+r.join("")+"]");return new RegExp(v.join("|"),"g")}function m(l){return"\x26#x"+(1<l.length?
g(l):l.charCodeAt(0)).toString(16).toUpperCase()+";"}function c(l){return function(r){return r.replace(k,function(v){return l[v]||m(v)})}}D=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{"default":l}};Object.defineProperty(p,"__esModule",{value:!0});p.escapeUTF8=p.escape=p.encodeNonAsciiHTML=p.encodeHTML=p.encodeXML=void 0;Q=D(y(49));Q=u(Q.default);var f=q(Q);p.encodeXML=c(Q);y=D(y(47));y=u(y.default);D=q(y);p.encodeHTML=function(l,r){return function(v){return v.replace(r,function(w){return l[w]}).replace(e,
m)}}(y,D);p.encodeNonAsciiHTML=c(y);var e=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,g=null!=String.prototype.codePointAt?function(l){return l.codePointAt(0)}:function(l){return 1024*(l.charCodeAt(0)-55296)+l.charCodeAt(1)-56320+65536},k=new RegExp(f.source+"|"+e.source,"g");p.escape=function(l){return l.replace(k,m)};p.escapeUTF8=function(l){return l.replace(f,m)}};
shadow$provide[54]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.decodeXMLStrict=p.decodeHTML5Strict=p.decodeHTML4Strict=p.decodeHTML5=p.decodeHTML4=p.decodeHTMLStrict=p.decodeHTML=p.decodeXML=p.encodeHTML5=p.encodeHTML4=p.escapeUTF8=p.escape=p.encodeNonAsciiHTML=p.encodeHTML=p.encodeXML=p.encode=p.decodeStrict=p.decode=void 0;var u=y(52),q=y(53);p.decode=function(f,e){return(!e||0>=e?u.decodeXML:u.decodeHTML)(f)};p.decodeStrict=function(f,e){return(!e||0>=e?u.decodeXML:u.decodeHTMLStrict)(f)};
p.encode=function(f,e){return(!e||0>=e?q.encodeXML:q.encodeHTML)(f)};var m=y(53);Object.defineProperty(p,"encodeXML",{enumerable:!0,get:function(){return m.encodeXML}});Object.defineProperty(p,"encodeHTML",{enumerable:!0,get:function(){return m.encodeHTML}});Object.defineProperty(p,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return m.encodeNonAsciiHTML}});Object.defineProperty(p,"escape",{enumerable:!0,get:function(){return m.escape}});Object.defineProperty(p,"escapeUTF8",{enumerable:!0,get:function(){return m.escapeUTF8}});
Object.defineProperty(p,"encodeHTML4",{enumerable:!0,get:function(){return m.encodeHTML}});Object.defineProperty(p,"encodeHTML5",{enumerable:!0,get:function(){return m.encodeHTML}});var c=y(52);Object.defineProperty(p,"decodeXML",{enumerable:!0,get:function(){return c.decodeXML}});Object.defineProperty(p,"decodeHTML",{enumerable:!0,get:function(){return c.decodeHTML}});Object.defineProperty(p,"decodeHTMLStrict",{enumerable:!0,get:function(){return c.decodeHTMLStrict}});Object.defineProperty(p,"decodeHTML4",
{enumerable:!0,get:function(){return c.decodeHTML}});Object.defineProperty(p,"decodeHTML5",{enumerable:!0,get:function(){return c.decodeHTML}});Object.defineProperty(p,"decodeHTML4Strict",{enumerable:!0,get:function(){return c.decodeHTMLStrict}});Object.defineProperty(p,"decodeHTML5Strict",{enumerable:!0,get:function(){return c.decodeHTMLStrict}});Object.defineProperty(p,"decodeXMLStrict",{enumerable:!0,get:function(){return c.decodeXML}})};
shadow$provide[55]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.attributeNames=p.elementNames=void 0;p.elementNames=new Map([["altglyph","altGlyph"],["altglyphdef","altGlyphDef"],["altglyphitem","altGlyphItem"],["animatecolor","animateColor"],["animatemotion","animateMotion"],["animatetransform","animateTransform"],["clippath","clipPath"],["feblend","feBlend"],["fecolormatrix","feColorMatrix"],["fecomponenttransfer","feComponentTransfer"],["fecomposite","feComposite"],["feconvolvematrix",
"feConvolveMatrix"],["fediffuselighting","feDiffuseLighting"],["fedisplacementmap","feDisplacementMap"],["fedistantlight","feDistantLight"],["fedropshadow","feDropShadow"],["feflood","feFlood"],["fefunca","feFuncA"],["fefuncb","feFuncB"],["fefuncg","feFuncG"],["fefuncr","feFuncR"],["fegaussianblur","feGaussianBlur"],["feimage","feImage"],["femerge","feMerge"],["femergenode","feMergeNode"],["femorphology","feMorphology"],["feoffset","feOffset"],["fepointlight","fePointLight"],["fespecularlighting",
"feSpecularLighting"],["fespotlight","feSpotLight"],["fetile","feTile"],["feturbulence","feTurbulence"],["foreignobject","foreignObject"],["glyphref","glyphRef"],["lineargradient","linearGradient"],["radialgradient","radialGradient"],["textpath","textPath"]]);p.attributeNames=new Map([["definitionurl","definitionURL"],["attributename","attributeName"],["attributetype","attributeType"],["basefrequency","baseFrequency"],["baseprofile","baseProfile"],["calcmode","calcMode"],["clippathunits","clipPathUnits"],
["diffuseconstant","diffuseConstant"],["edgemode","edgeMode"],["filterunits","filterUnits"],["glyphref","glyphRef"],["gradienttransform","gradientTransform"],["gradientunits","gradientUnits"],["kernelmatrix","kernelMatrix"],["kernelunitlength","kernelUnitLength"],["keypoints","keyPoints"],["keysplines","keySplines"],["keytimes","keyTimes"],["lengthadjust","lengthAdjust"],["limitingconeangle","limitingConeAngle"],["markerheight","markerHeight"],["markerunits","markerUnits"],["markerwidth","markerWidth"],
["maskcontentunits","maskContentUnits"],["maskunits","maskUnits"],["numoctaves","numOctaves"],["pathlength","pathLength"],["patterncontentunits","patternContentUnits"],["patterntransform","patternTransform"],["patternunits","patternUnits"],["pointsatx","pointsAtX"],["pointsaty","pointsAtY"],["pointsatz","pointsAtZ"],["preservealpha","preserveAlpha"],["preserveaspectratio","preserveAspectRatio"],["primitiveunits","primitiveUnits"],["refx","refX"],["refy","refY"],["repeatcount","repeatCount"],["repeatdur",
"repeatDur"],["requiredextensions","requiredExtensions"],["requiredfeatures","requiredFeatures"],["specularconstant","specularConstant"],["specularexponent","specularExponent"],["spreadmethod","spreadMethod"],["startoffset","startOffset"],["stddeviation","stdDeviation"],["stitchtiles","stitchTiles"],["surfacescale","surfaceScale"],["systemlanguage","systemLanguage"],["tablevalues","tableValues"],["targetx","targetX"],["targety","targetY"],["textlength","textLength"],["viewbox","viewBox"],["viewtarget",
"viewTarget"],["xchannelselector","xChannelSelector"],["ychannelselector","yChannelSelector"],["zoomandpan","zoomAndPan"]])};
shadow$provide[56]=function(D,y,Q,p){function u(A,H){if(A)return Object.keys(A).map(function(F){var L,N,R=null!==(L=A[F])&&void 0!==L?L:"";"foreign"===H.xmlMode&&(F=null!==(N=l.attributeNames.get(F))&&void 0!==N?N:F);return H.emptyAttrs||H.xmlMode||""!==R?F+'\x3d"'+(!1!==H.decodeEntities?k.encodeXML(R):R.replace(/"/g,"\x26quot;"))+'"':F}).join(" ")}function q(A,H){void 0===H&&(H={});A="length"in A?A:[A];for(var F="",L=0;L<A.length;L++)F+=m(A[L],H);return F}function m(A,H){switch(A.type){case g.Root:return q(A.children,
H);case g.Directive:case g.Doctype:return"\x3c"+A.data+"\x3e";case g.Comment:return"\x3c!--"+A.data+"--\x3e";case g.CDATA:return"\x3c![CDATA["+A.children[0].data+"]]\x3e";case g.Script:case g.Style:case g.Tag:var F;"foreign"===H.xmlMode&&(A.name=null!==(F=l.elementNames.get(A.name))&&void 0!==F?F:A.name,A.parent&&w.has(A.parent.name)&&(H=c(c({},H),{xmlMode:!1})));!H.xmlMode&&z.has(A.name)&&(H=c(c({},H),{xmlMode:"foreign"}));F="\x3c"+A.name;var L=u(A.attribs,H);L&&(F+=" "+L);if(0===A.children.length&&
(H.xmlMode?!1!==H.selfClosingTags:H.selfClosingTags&&v.has(A.name)))H.xmlMode||(F+=" "),F+="/\x3e";else if(F+="\x3e",0<A.children.length&&(F+=q(A.children,H)),H.xmlMode||!v.has(A.name))F+="\x3c/"+A.name+"\x3e";return F;case g.Text:return F=A.data||"",!1===H.decodeEntities||!H.xmlMode&&A.parent&&r.has(A.parent.name)||(F=k.encodeXML(F)),F}}var c=this&&this.__assign||function(){c=Object.assign||function(A){for(var H,F=1,L=arguments.length;F<L;F++){H=arguments[F];for(var N in H)Object.prototype.hasOwnProperty.call(H,
N)&&(A[N]=H[N])}return A};return c.apply(this,arguments)},f=this&&this.__createBinding||(Object.create?function(A,H,F,L){void 0===L&&(L=F);Object.defineProperty(A,L,{enumerable:!0,get:function(){return H[F]}})}:function(A,H,F,L){void 0===L&&(L=F);A[L]=H[F]}),e=this&&this.__setModuleDefault||(Object.create?function(A,H){Object.defineProperty(A,"default",{enumerable:!0,value:H})}:function(A,H){A["default"]=H});D=this&&this.__importStar||function(A){if(A&&A.__esModule)return A;var H={};if(null!=A)for(var F in A)"default"!==
F&&Object.prototype.hasOwnProperty.call(A,F)&&f(H,A,F);e(H,A);return H};Object.defineProperty(p,"__esModule",{value:!0});var g=D(y(44)),k=y(54),l=y(55),r=new Set("style script xmp iframe noembed noframes plaintext noscript".split(" ")),v=new Set("area base basefont br col command embed frame hr img input isindex keygen link meta param source track wbr".split(" "));p.default=q;var w=new Set("mi mo mn ms mtext annotation-xml foreignObject desc title".split(" ")),z=new Set(["svg","math"])};
shadow$provide[57]=function(D,y,Q,p){function u(k,l){return(0,e.default)(k,l)}function q(k){return Array.isArray(k)?k.map(q).join(""):(0,f.isTag)(k)?"br"===k.name?"\n":q(k.children):(0,f.isCDATA)(k)?q(k.children):(0,f.isText)(k)?k.data:""}function m(k){return Array.isArray(k)?k.map(m).join(""):(0,f.hasChildren)(k)&&!(0,f.isComment)(k)?m(k.children):(0,f.isText)(k)?k.data:""}function c(k){return Array.isArray(k)?k.map(c).join(""):(0,f.hasChildren)(k)&&(k.type===g.ElementType.Tag||(0,f.isCDATA)(k))?
c(k.children):(0,f.isText)(k)?k.data:""}D=this&&this.__importDefault||function(k){return k&&k.__esModule?k:{"default":k}};Object.defineProperty(p,"__esModule",{value:!0});p.innerText=p.textContent=p.getText=p.getInnerHTML=p.getOuterHTML=void 0;var f=y(46),e=D(y(56)),g=y(44);p.getOuterHTML=u;p.getInnerHTML=function(k,l){return(0,f.hasChildren)(k)?k.children.map(function(r){return u(r,l)}).join(""):""};p.getText=q;p.textContent=m;p.innerText=c};
shadow$provide[58]=function(D,y,Q,p){function u(f){var e;return null!==(e=f.children)&&void 0!==e?e:c}function q(f){return f.parent||null}Object.defineProperty(p,"__esModule",{value:!0});p.prevElementSibling=p.nextElementSibling=p.getName=p.hasAttrib=p.getAttributeValue=p.getSiblings=p.getParent=p.getChildren=void 0;var m=y(46),c=[];p.getChildren=u;p.getParent=q;p.getSiblings=function(f){var e=q(f);if(null!=e)return u(e);e=[f];var g=f.prev;for(f=f.next;null!=g;)e.unshift(g),g=g.prev;for(;null!=f;)e.push(f),
f=f.next;return e};p.getAttributeValue=function(f,e){var g;return null===(g=f.attribs)||void 0===g?void 0:g[e]};p.hasAttrib=function(f,e){return null!=f.attribs&&Object.prototype.hasOwnProperty.call(f.attribs,e)&&null!=f.attribs[e]};p.getName=function(f){return f.name};p.nextElementSibling=function(f){for(f=f.next;null!==f&&!(0,m.isTag)(f);)f=f.next;return f};p.prevElementSibling=function(f){for(f=f.prev;null!==f&&!(0,m.isTag)(f);)f=f.prev;return f}};
shadow$provide[59]=function(D,y,Q,p){function u(q){q.prev&&(q.prev.next=q.next);q.next&&(q.next.prev=q.prev);if(q.parent){var m=q.parent.children;m.splice(m.lastIndexOf(q),1)}}Object.defineProperty(p,"__esModule",{value:!0});p.prepend=p.prependChild=p.append=p.appendChild=p.replaceElement=p.removeElement=void 0;p.removeElement=u;p.replaceElement=function(q,m){var c=m.prev=q.prev;c&&(c.next=m);if(c=m.next=q.next)c.prev=m;if(c=m.parent=q.parent)c=c.children,c[c.lastIndexOf(q)]=m};p.appendChild=function(q,
m){u(m);m.next=null;m.parent=q;1<q.children.push(m)?(q=q.children[q.children.length-2],q.next=m,m.prev=q):m.prev=null};p.append=function(q,m){u(m);var c=q.parent,f=q.next;m.next=f;m.prev=q;q.next=m;m.parent=c;f?(f.prev=m,c&&(q=c.children,q.splice(q.lastIndexOf(f),0,m))):c&&c.children.push(m)};p.prependChild=function(q,m){u(m);m.parent=q;m.prev=null;1!==q.children.unshift(m)?(q=q.children[1],q.prev=m,m.next=q):m.next=null};p.prepend=function(q,m){u(m);var c=q.parent;if(c){var f=c.children;f.splice(f.indexOf(q),
0,m)}q.prev&&(q.prev.next=m);m.parent=c;m.prev=q.prev;m.next=q;q.prev=m}};
shadow$provide[60]=function(D,y,Q,p){function u(f,e,g,k){for(var l=[],r=0;r<e.length;r++){var v=e[r];if(f(v)&&(l.push(v),0>=--k))break;if(g&&(0,c.hasChildren)(v)&&0<v.children.length&&(v=u(f,v.children,g,k),l.push.apply(l,v),k-=v.length,0>=k))break}return l}function q(f,e,g){void 0===g&&(g=!0);for(var k=null,l=0;l<e.length&&!k;l++){var r=e[l];(0,c.isTag)(r)&&(f(r)?k=r:g&&0<r.children.length&&(k=q(f,r.children)))}return k}function m(f,e){return e.some(function(g){return(0,c.isTag)(g)&&(f(g)||0<g.children.length&&
m(f,g.children))})}Object.defineProperty(p,"__esModule",{value:!0});p.findAll=p.existsOne=p.findOne=p.findOneChild=p.find=p.filter=void 0;var c=y(46);p.filter=function(f,e,g,k){void 0===g&&(g=!0);void 0===k&&(k=Infinity);Array.isArray(e)||(e=[e]);return u(f,e,g,k)};p.find=u;p.findOneChild=function(f,e){return e.find(f)};p.findOne=q;p.existsOne=m;p.findAll=function(f,e){var g,k=[];e=e.filter(c.isTag);for(var l;l=e.shift();){var r=null===(g=l.children)||void 0===g?void 0:g.filter(c.isTag);r&&0<r.length&&
e.unshift.apply(e,r);f(l)&&k.push(l)}return k}};
shadow$provide[61]=function(D,y,Q,p){function u(g,k){return"function"===typeof k?function(l){return(0,c.isTag)(l)&&k(l.attribs[g])}:function(l){return(0,c.isTag)(l)&&l.attribs[g]===k}}function q(g,k){return function(l){return g(l)||k(l)}}function m(g){var k=Object.keys(g).map(function(l){var r=g[l];return Object.prototype.hasOwnProperty.call(e,l)?e[l](r):u(l,r)});return 0===k.length?null:k.reduce(q)}Object.defineProperty(p,"__esModule",{value:!0});p.getElementsByTagType=p.getElementsByTagName=p.getElementById=
p.getElements=p.testElement=void 0;var c=y(46),f=y(60),e={tag_name:function(g){return"function"===typeof g?function(k){return(0,c.isTag)(k)&&g(k.name)}:"*"===g?c.isTag:function(k){return(0,c.isTag)(k)&&k.name===g}},tag_type:function(g){return"function"===typeof g?function(k){return g(k.type)}:function(k){return k.type===g}},tag_contains:function(g){return"function"===typeof g?function(k){return(0,c.isText)(k)&&g(k.data)}:function(k){return(0,c.isText)(k)&&k.data===g}}};p.testElement=function(g,k){return(g=
m(g))?g(k):!0};p.getElements=function(g,k,l,r){void 0===r&&(r=Infinity);return(g=m(g))?(0,f.filter)(g,k,l,r):[]};p.getElementById=function(g,k,l){void 0===l&&(l=!0);Array.isArray(k)||(k=[k]);return(0,f.findOne)(u("id",g),k,l)};p.getElementsByTagName=function(g,k,l,r){void 0===l&&(l=!0);void 0===r&&(r=Infinity);return(0,f.filter)(e.tag_name(g),k,l,r)};p.getElementsByTagType=function(g,k,l,r){void 0===l&&(l=!0);void 0===r&&(r=Infinity);return(0,f.filter)(e.tag_type(g),k,l,r)}};
shadow$provide[62]=function(D,y,Q,p){function u(m,c){var f=[],e=[];if(m===c)return 0;for(var g=(0,q.hasChildren)(m)?m:m.parent;g;)f.unshift(g),g=g.parent;for(g=(0,q.hasChildren)(c)?c:c.parent;g;)e.unshift(g),g=g.parent;var k=Math.min(f.length,e.length);for(g=0;g<k&&f[g]===e[g];)g++;if(0===g)return 1;k=f[g-1];var l=k.children;e=e[g];return l.indexOf(f[g])>l.indexOf(e)?k===c?20:4:k===m?10:2}Object.defineProperty(p,"__esModule",{value:!0});p.uniqueSort=p.compareDocumentPosition=p.removeSubsets=void 0;
var q=y(46);p.removeSubsets=function(m){for(var c=m.length;0<=--c;){var f=m[c];if(0<c&&0<=m.lastIndexOf(f,c-1))m.splice(c,1);else for(f=f.parent;f;f=f.parent)if(m.includes(f)){m.splice(c,1);break}}return m};p.compareDocumentPosition=u;p.uniqueSort=function(m){m=m.filter(function(c,f,e){return!e.includes(c,f+1)});m.sort(function(c,f){c=u(c,f);return c&2?-1:c&4?1:0});return m}};
shadow$provide[63]=function(D,y,Q,p){function u(w){var z;w=w.children;var A={type:"atom",items:(0,l.getElementsByTagName)("entry",w).map(function(F){var L,N=F.children;F={media:m(N)};e(F,"id","id",N);e(F,"title","title",N);var R=null===(L=c("link",N))||void 0===L?void 0:L.attribs.href;R&&(F.link=R);if(L=f("summary",N)||f("content",N))F.description=L;if(L=f("updated",N))F.pubDate=new Date(L);return F})};e(A,"id","id",w);e(A,"title","title",w);var H=null===(z=c("link",w))||void 0===z?void 0:z.attribs.href;
H&&(A.link=H);e(A,"description","subtitle",w);if(z=f("updated",w))A.updated=new Date(z);e(A,"author","email",w,!0);return A}function q(w){var z,A,H=null!==(A=null===(z=c("channel",w.children))||void 0===z?void 0:z.children)&&void 0!==A?A:[];w={type:w.name.substr(0,3),id:"",items:(0,l.getElementsByTagName)("item",w.children).map(function(F){var L=F.children;F={media:m(L)};e(F,"id","guid",L);e(F,"title","title",L);e(F,"link","link",L);e(F,"description","description",L);if(L=f("pubDate",L))F.pubDate=
new Date(L);return F})};e(w,"title","title",H);e(w,"link","link",H);e(w,"description","description",H);if(z=f("lastBuildDate",H))w.updated=new Date(z);e(w,"author","managingEditor",H,!0);return w}function m(w){return(0,l.getElementsByTagName)("media:content",w).map(function(z){z=z.attribs;for(var A={medium:z.medium,isDefault:!!z.isDefault},H=0,F=r;H<F.length;H++){var L=F[H];z[L]&&(A[L]=z[L])}H=0;for(F=v;H<F.length;H++)L=F[H],z[L]&&(A[L]=parseInt(z[L],10));z.expression&&(A.expression=z.expression);
return A})}function c(w,z){return(0,l.getElementsByTagName)(w,z,!0,1)[0]}function f(w,z,A){void 0===A&&(A=!1);return(0,k.textContent)((0,l.getElementsByTagName)(w,z,A,1)).trim()}function e(w,z,A,H,F){void 0===F&&(F=!1);(A=f(A,H,F))&&(w[z]=A)}function g(w){return"rss"===w||"feed"===w||"rdf:RDF"===w}Object.defineProperty(p,"__esModule",{value:!0});p.getFeed=void 0;var k=y(57),l=y(61);p.getFeed=function(w){return(w=c(g,w))?"feed"===w.name?u(w):q(w):null};var r=["url","type","lang"],v="fileSize bitrate framerate samplingrate channels duration height width".split(" ")};
shadow$provide[64]=function(D,y,Q,p){var u=this&&this.__createBinding||(Object.create?function(m,c,f,e){void 0===e&&(e=f);Object.defineProperty(m,e,{enumerable:!0,get:function(){return c[f]}})}:function(m,c,f,e){void 0===e&&(e=f);m[e]=c[f]});D=this&&this.__exportStar||function(m,c){for(var f in m)"default"===f||Object.prototype.hasOwnProperty.call(c,f)||u(c,m,f)};Object.defineProperty(p,"__esModule",{value:!0});p.hasChildren=p.isDocument=p.isComment=p.isText=p.isCDATA=p.isTag=void 0;D(y(57),p);D(y(58),
p);D(y(59),p);D(y(60),p);D(y(61),p);D(y(62),p);D(y(63),p);var q=y(46);Object.defineProperty(p,"isTag",{enumerable:!0,get:function(){return q.isTag}});Object.defineProperty(p,"isCDATA",{enumerable:!0,get:function(){return q.isCDATA}});Object.defineProperty(p,"isText",{enumerable:!0,get:function(){return q.isText}});Object.defineProperty(p,"isComment",{enumerable:!0,get:function(){return q.isComment}});Object.defineProperty(p,"isDocument",{enumerable:!0,get:function(){return q.isDocument}});Object.defineProperty(p,
"hasChildren",{enumerable:!0,get:function(){return q.hasChildren}})};
shadow$provide[65]=function(D,y,Q,p){Q.exports={trueFunc:function(){return!0},falseFunc:function(){return!1}}};
shadow$provide[66]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.AttributeAction=p.IgnoreCaseMode=p.SelectorType=void 0;(function(u){u.Attribute="attribute";u.Pseudo="pseudo";u.PseudoElement="pseudo-element";u.Tag="tag";u.Universal="universal";u.Adjacent="adjacent";u.Child="child";u.Descendant="descendant";u.Parent="parent";u.Sibling="sibling";u.ColumnCombinator="column-combinator"})(p.SelectorType||(p.SelectorType={}));p.IgnoreCaseMode={Unknown:null,QuirksMode:"quirks",IgnoreCase:!0,
CaseSensitive:!1};(function(u){u.Any="any";u.Element="element";u.End="end";u.Equals="equals";u.Exists="exists";u.Hyphen="hyphen";u.Not="not";u.Start="start"})(p.AttributeAction||(p.AttributeAction={}))};
shadow$provide[67]=function(D,y,Q,p){function u(w){switch(w.type){case e.SelectorType.Adjacent:case e.SelectorType.Child:case e.SelectorType.Descendant:case e.SelectorType.Parent:case e.SelectorType.Sibling:case e.SelectorType.ColumnCombinator:return!0;default:return!1}}function q(w,z,A){w=parseInt(z,16)-65536;return w!==w||A?z:0>w?String.fromCharCode(w+65536):String.fromCharCode(w>>10|55296,w&1023|56320)}function m(w){return 39===w||34===w}function c(w){return 32===w||9===w||10===w||12===w||13===
w}function f(w,z,A){function H(pa){var Ta=z.slice(A+pa).match(g);if(!Ta)throw Error("Expected name, found ".concat(z.slice(A)));Ta=Ta[0];A+=pa+Ta.length;return Ta.replace(k,q)}function F(pa){for(A+=pa;A<z.length&&c(z.charCodeAt(A));)A++}function L(){for(var pa=A+=1,Ta=1;0<Ta&&A<z.length;A++)40!==z.charCodeAt(A)||N(A)?41!==z.charCodeAt(A)||N(A)||Ta--:Ta++;if(Ta)throw Error("Parenthesis not matched");return z.slice(pa,A-1).replace(k,q)}function N(pa){for(var Ta=0;92===z.charCodeAt(--pa);)Ta++;return 1===
(Ta&1)}function R(){if(0<Z.length&&u(Z[Z.length-1]))throw Error("Did not expect successive traversals.");}function J(pa){0<Z.length&&Z[Z.length-1].type===e.SelectorType.Descendant?Z[Z.length-1].type=pa:(R(),Z.push({type:pa}))}function Y(pa,Ta){Z.push({type:e.SelectorType.Attribute,name:pa,action:Ta,value:H(1),namespace:null,ignoreCase:"quirks"})}function fa(){Z.length&&Z[Z.length-1].type===e.SelectorType.Descendant&&Z.pop();if(0===Z.length)throw Error("Empty sub-selector");w.push(Z)}var Z=[];F(0);
if(z.length===A)return A;a:for(;A<z.length;){var da=z.charCodeAt(A);switch(da){case 32:case 9:case 10:case 12:case 13:if(0===Z.length||Z[0].type!==e.SelectorType.Descendant)R(),Z.push({type:e.SelectorType.Descendant});F(1);break;case 62:J(e.SelectorType.Child);F(1);break;case 60:J(e.SelectorType.Parent);F(1);break;case 126:J(e.SelectorType.Sibling);F(1);break;case 43:J(e.SelectorType.Adjacent);F(1);break;case 46:Y("class",e.AttributeAction.Element);break;case 35:Y("id",e.AttributeAction.Equals);break;
case 91:F(1);da=void 0;var la=null;124===z.charCodeAt(A)?da=H(1):z.startsWith("*|",A)?(la="*",da=H(2)):(da=H(0),124===z.charCodeAt(A)&&61!==z.charCodeAt(A+1)&&(la=da,da=H(1)));F(0);var W=e.AttributeAction.Exists,ra=l.get(z.charCodeAt(A));if(ra){W=ra;if(61!==z.charCodeAt(A+1))throw Error("Expected `\x3d`");F(2)}else 61===z.charCodeAt(A)&&(W=e.AttributeAction.Equals,F(1));var za="";ra=null;if("exists"!==W){if(m(z.charCodeAt(A))){za=z.charCodeAt(A);for(var O=A+1;O<z.length&&(z.charCodeAt(O)!==za||N(O));)O+=
1;if(z.charCodeAt(O)!==za)throw Error("Attribute value didn't end");za=z.slice(A+1,O).replace(k,q);A=O+1}else{for(za=A;A<z.length&&(!c(z.charCodeAt(A))&&93!==z.charCodeAt(A)||N(A));)A+=1;za=z.slice(za,A).replace(k,q)}F(0);O=z.charCodeAt(A)|32;115===O?(ra=!1,F(1)):105===O&&(ra=!0,F(1))}if(93!==z.charCodeAt(A))throw Error("Attribute selector didn't terminate");A+=1;Z.push({type:e.SelectorType.Attribute,name:da,action:W,value:za,namespace:la,ignoreCase:ra});break;case 58:if(58===z.charCodeAt(A+1)){Z.push({type:e.SelectorType.PseudoElement,
name:H(2).toLowerCase(),data:40===z.charCodeAt(A)?L():null});continue}la=H(1).toLowerCase();da=null;if(40===z.charCodeAt(A))if(r.has(la)){if(m(z.charCodeAt(A+1)))throw Error("Pseudo-selector ".concat(la," cannot be quoted"));da=[];A=f(da,z,A+1);if(41!==z.charCodeAt(A))throw Error("Missing closing parenthesis in :".concat(la," (").concat(z,")"));A+=1}else da=L(),v.has(la)&&(W=da.charCodeAt(0),W===da.charCodeAt(da.length-1)&&m(W)&&(da=da.slice(1,-1))),da=da.replace(k,q);Z.push({type:e.SelectorType.Pseudo,
name:la,data:da});break;case 44:fa();Z=[];F(1);break;default:if(z.startsWith("/*",A)){la=z.indexOf("*/",A+2);if(0>la)throw Error("Comment was not terminated");A=la+2;0===Z.length&&F(0)}else{la=null;W=void 0;if(42===da)A+=1,W="*";else if(124===da){if(W="",124===z.charCodeAt(A+1)){J(e.SelectorType.ColumnCombinator);F(2);break}}else if(g.test(z.slice(A)))W=H(0);else break a;124===z.charCodeAt(A)&&124!==z.charCodeAt(A+1)&&(la=W,42===z.charCodeAt(A+1)?(W="*",A+=2):W=H(1));Z.push("*"===W?{type:e.SelectorType.Universal,
namespace:la}:{type:e.SelectorType.Tag,name:W,namespace:la})}}}fa();return A}Object.defineProperty(p,"__esModule",{value:!0});p.parse=p.isTraversal=void 0;var e=y(66),g=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,k=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,l=new Map([[126,e.AttributeAction.Element],[94,e.AttributeAction.Start],[36,e.AttributeAction.End],[42,e.AttributeAction.Any],[33,e.AttributeAction.Not],[124,e.AttributeAction.Hyphen]]),r=new Set("has not matches is where host host-context".split(" "));
p.isTraversal=u;var v=new Set(["contains","icontains"]);p.parse=function(w){var z=[],A=f(z,"".concat(w),0);if(A<w.length)throw Error("Unmatched selector: ".concat(w.slice(A)));return z}};
shadow$provide[68]=function(D,y,Q,p){function u(v){return v.map(function(w){return w.map(q).join("")}).join(", ")}function q(v,w,z){switch(v.type){case g.SelectorType.Child:return 0===w?"\x3e ":" \x3e ";case g.SelectorType.Parent:return 0===w?"\x3c ":" \x3c ";case g.SelectorType.Sibling:return 0===w?"~ ":" ~ ";case g.SelectorType.Adjacent:return 0===w?"+ ":" + ";case g.SelectorType.Descendant:return" ";case g.SelectorType.ColumnCombinator:return 0===w?"|| ":" || ";case g.SelectorType.Universal:return"*"===
v.namespace&&w+1<z.length&&"name"in z[w+1]?"":"".concat(f(v.namespace),"*");case g.SelectorType.Tag:return c(v);case g.SelectorType.PseudoElement:return"::".concat(e(v.name,r)).concat(null===v.data?"":"(".concat(e(v.data,l),")"));case g.SelectorType.Pseudo:return":".concat(e(v.name,r)).concat(null===v.data?"":"(".concat("string"===typeof v.data?e(v.data,l):u(v.data),")"));case g.SelectorType.Attribute:if("id"===v.name&&v.action===g.AttributeAction.Equals&&"quirks"===v.ignoreCase&&!v.namespace)return"#".concat(e(v.value,
r));if("class"===v.name&&v.action===g.AttributeAction.Element&&"quirks"===v.ignoreCase&&!v.namespace)return".".concat(e(v.value,r));w=c(v);return v.action===g.AttributeAction.Exists?"[".concat(w,"]"):"[".concat(w).concat(m(v.action),'\x3d"').concat(e(v.value,k),'"').concat(null===v.ignoreCase?"":v.ignoreCase?" i":" s","]")}}function m(v){switch(v){case g.AttributeAction.Equals:return"";case g.AttributeAction.Element:return"~";case g.AttributeAction.Start:return"^";case g.AttributeAction.End:return"$";
case g.AttributeAction.Any:return"*";case g.AttributeAction.Not:return"!";case g.AttributeAction.Hyphen:return"|";case g.AttributeAction.Exists:throw Error("Shouldn't be here");}}function c(v){return"".concat(f(v.namespace)).concat(e(v.name,r))}function f(v){return null!==v?"".concat("*"===v?"*":e(v,r),"|"):""}function e(v,w){for(var z=0,A="",H=0;H<v.length;H++)w.has(v.charCodeAt(H))&&(A+="".concat(v.slice(z,H),"\\").concat(v.charAt(H)),z=H+1);return 0<A.length?A+v.slice(z):v}D=this&&this.__spreadArray||
function(v,w,z){if(z||2===arguments.length)for(var A=0,H=w.length,F;A<H;A++)!F&&A in w||(F||(F=Array.prototype.slice.call(w,0,A)),F[A]=w[A]);return v.concat(F||Array.prototype.slice.call(w))};Object.defineProperty(p,"__esModule",{value:!0});p.stringify=void 0;var g=y(66);y=["\\",'"'];Q=D(D([],y,!0),["(",")"],!1);var k=new Set(y.map(function(v){return v.charCodeAt(0)})),l=new Set(Q.map(function(v){return v.charCodeAt(0)})),r=new Set(D(D([],Q,!0),"~^$*+!|:[] .".split(""),!1).map(function(v){return v.charCodeAt(0)}));
p.stringify=u};
shadow$provide[69]=function(D,y,Q,p){var u=this&&this.__createBinding||(Object.create?function(c,f,e,g){void 0===g&&(g=e);var k=Object.getOwnPropertyDescriptor(f,e);if(!k||("get"in k?!f.__esModule:k.writable||k.configurable))k={enumerable:!0,get:function(){return f[e]}};Object.defineProperty(c,g,k)}:function(c,f,e,g){void 0===g&&(g=e);c[g]=f[e]});D=this&&this.__exportStar||function(c,f){for(var e in c)"default"===e||Object.prototype.hasOwnProperty.call(f,e)||u(f,c,e)};Object.defineProperty(p,"__esModule",
{value:!0});p.stringify=p.parse=p.isTraversal=void 0;D(y(66),p);var q=y(67);Object.defineProperty(p,"isTraversal",{enumerable:!0,get:function(){return q.isTraversal}});Object.defineProperty(p,"parse",{enumerable:!0,get:function(){return q.parse}});var m=y(68);Object.defineProperty(p,"stringify",{enumerable:!0,get:function(){return m.stringify}})};
shadow$provide[70]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.isTraversal=p.procedure=void 0;p.procedure={universal:50,tag:30,attribute:1,pseudo:0,"pseudo-element":0,"column-combinator":-1,descendant:-1,child:-1,parent:-1,sibling:-1,adjacent:-1,_flexibleDescendant:-1};p.isTraversal=function(u){return 0>p.procedure[u.type]}};
shadow$provide[71]=function(D,y,Q,p){function u(f){var e=m.procedure[f.type];if(f.type===q.SelectorType.Attribute)e=c[f.action],e===c.equals&&"id"===f.name&&(e=9),f.ignoreCase&&(e>>=1);else if(f.type===q.SelectorType.Pseudo)if(f.data)if("has"===f.name||"contains"===f.name)e=0;else if(Array.isArray(f.data)){for(var g=e=0;g<f.data.length;g++)if(1===f.data[g].length){var k=u(f.data[g][0]);if(0===k){e=0;break}k>e&&(e=k)}1<f.data.length&&0<e&&--e}else e=1;else e=3;return e}Object.defineProperty(p,"__esModule",
{value:!0});var q=y(69),m=y(70),c={exists:10,equals:8,not:7,start:6,end:6,any:5,hyphen:4,element:4};p.default=function(f){for(var e=f.map(u),g=1;g<f.length;g++){var k=e[g];if(!(0>k))for(var l=g-1;0<=l&&k<e[l];l--){var r=f[l+1];f[l+1]=f[l];f[l]=r;e[l+1]=e[l];e[l]=k}}}};
shadow$provide[72]=function(D,y,Q,p){function u(f,e){return"boolean"===typeof f.ignoreCase?f.ignoreCase:"quirks"===f.ignoreCase?!!e.quirksMode:!e.xmlMode&&c.has(f.name)}Object.defineProperty(p,"__esModule",{value:!0});p.attributeRules=void 0;var q=y(65),m=/[-[\]{}()*+?.,\\^$|#\s]/g,c=new Set("accept accept-charset align alink axis bgcolor charset checked clear codetype color compact declare defer dir direction disabled enctype face frame hreflang http-equiv lang language link media method multiple nohref noresize noshade nowrap readonly rel rev rules scope scrolling selected shape target text type valign valuetype vlink".split(" "));
p.attributeRules={equals:function(f,e,g){var k=g.adapter,l=e.name,r=e.value;return u(e,g)?(r=r.toLowerCase(),function(v){var w=k.getAttributeValue(v,l);return null!=w&&w.length===r.length&&w.toLowerCase()===r&&f(v)}):function(v){return k.getAttributeValue(v,l)===r&&f(v)}},hyphen:function(f,e,g){var k=g.adapter,l=e.name,r=e.value,v=r.length;return u(e,g)?(r=r.toLowerCase(),function(w){var z=k.getAttributeValue(w,l);return null!=z&&(z.length===v||"-"===z.charAt(v))&&z.substr(0,v).toLowerCase()===r&&
f(w)}):function(w){var z=k.getAttributeValue(w,l);return null!=z&&(z.length===v||"-"===z.charAt(v))&&z.substr(0,v)===r&&f(w)}},element:function(f,e,g){var k=g.adapter,l=e.name,r=e.value;if(/\s/.test(r))return q.falseFunc;var v=new RegExp("(?:^|\\s)".concat(r.replace(m,"\\$\x26"),"(?:$|\\s)"),u(e,g)?"i":"");return function(w){var z=k.getAttributeValue(w,l);return null!=z&&z.length>=r.length&&v.test(z)&&f(w)}},exists:function(f,e,g){var k=e.name,l=g.adapter;return function(r){return l.hasAttrib(r,k)&&
f(r)}},start:function(f,e,g){var k=g.adapter,l=e.name,r=e.value,v=r.length;return 0===v?q.falseFunc:u(e,g)?(r=r.toLowerCase(),function(w){var z=k.getAttributeValue(w,l);return null!=z&&z.length>=v&&z.substr(0,v).toLowerCase()===r&&f(w)}):function(w){var z;return!(null===(z=k.getAttributeValue(w,l))||void 0===z||!z.startsWith(r))&&f(w)}},end:function(f,e,g){var k=g.adapter,l=e.name,r=e.value,v=-r.length;return 0===v?q.falseFunc:u(e,g)?(r=r.toLowerCase(),function(w){var z;return(null===(z=k.getAttributeValue(w,
l))||void 0===z?void 0:z.substr(v).toLowerCase())===r&&f(w)}):function(w){var z;return!(null===(z=k.getAttributeValue(w,l))||void 0===z||!z.endsWith(r))&&f(w)}},any:function(f,e,g){var k=g.adapter,l=e.name,r=e.value;if(""===r)return q.falseFunc;if(u(e,g)){var v=new RegExp(r.replace(m,"\\$\x26"),"i");return function(w){var z=k.getAttributeValue(w,l);return null!=z&&z.length>=r.length&&v.test(z)&&f(w)}}return function(w){var z;return!(null===(z=k.getAttributeValue(w,l))||void 0===z||!z.includes(r))&&
f(w)}},not:function(f,e,g){var k=g.adapter,l=e.name,r=e.value;return""===r?function(v){return!!k.getAttributeValue(v,l)&&f(v)}:u(e,g)?(r=r.toLowerCase(),function(v){var w=k.getAttributeValue(v,l);return(null==w||w.length!==r.length||w.toLowerCase()!==r)&&f(v)}):function(v){return k.getAttributeValue(v,l)!==r&&f(v)}}}};
shadow$provide[73]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.parse=void 0;var u=new Set([9,10,12,13,32]);p.parse=function(q){function m(){if("-"===q.charAt(e))return e++,-1;"+"===q.charAt(e)&&e++;return 1}function c(){for(var r=e,v=0;e<q.length&&48<=q.charCodeAt(e)&&57>=q.charCodeAt(e);)v=10*v+(q.charCodeAt(e)-48),e++;return e===r?null:v}function f(){for(;e<q.length&&u.has(q.charCodeAt(e));)e++}q=q.trim().toLowerCase();if("even"===q)return[2,0];if("odd"===q)return[2,1];
var e=0,g=0,k=m(),l=c();e<q.length&&"n"===q.charAt(e)&&(e++,g=k*(null!==l&&void 0!==l?l:1),f(),e<q.length?(k=m(),f(),l=c()):k=l=0);if(null===l||e<q.length)throw Error("n-th rule couldn't be parsed ('".concat(q,"')"));return[g,k*l]}};
shadow$provide[74]=function(D,y,Q,p){D=this&&this.__importDefault||function(q){return q&&q.__esModule?q:{"default":q}};Object.defineProperty(p,"__esModule",{value:!0});p.generate=p.compile=void 0;var u=D(y(65));p.compile=function(q){var m=q[0],c=q[1]-1;if(0>c&&0>=m)return u.default.falseFunc;if(-1===m)return function(g){return g<=c};if(0===m)return function(g){return g===c};if(1===m)return 0>c?u.default.trueFunc:function(g){return g>=c};var f=Math.abs(m),e=(c%f+f)%f;return 1<m?function(g){return g>=
c&&g%f===e}:function(g){return g<=c&&g%f===e}};p.generate=function(q){var m=q[0],c=q[1]-1,f=0;if(0>m){var e=-m,g=(c%e+e)%e;return function(){var k=g+e*f++;return k>c?null:k}}if(0===m)return 0>c?function(){return null}:function(){return 0===f++?c:null};0>c&&(c+=m*Math.ceil(-c/m));return function(){return m*f++ +c}}};
shadow$provide[75]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.sequence=p.generate=p.compile=p.parse=void 0;var u=y(73);Object.defineProperty(p,"parse",{enumerable:!0,get:function(){return u.parse}});var q=y(74);Object.defineProperty(p,"compile",{enumerable:!0,get:function(){return q.compile}});Object.defineProperty(p,"generate",{enumerable:!0,get:function(){return q.generate}});p.default=function(m){return(0,q.compile)((0,u.parse)(m))};p.sequence=function(m){return(0,q.generate)((0,u.parse)(m))}};
shadow$provide[76]=function(D,y,Q,p){function u(f,e){return function(g){var k=e.getParent(g);return null!=k&&e.isTag(k)&&f(g)}}function q(f){return function(e,g,k){var l=k.adapter[f];return"function"!==typeof l?c.falseFunc:function(r){return l(r)&&e(r)}}}D=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{"default":f}};Object.defineProperty(p,"__esModule",{value:!0});p.filters=void 0;var m=D(y(75)),c=y(65);p.filters={contains:function(f,e,g){var k=g.adapter;return function(l){return f(l)&&
k.getText(l).includes(e)}},icontains:function(f,e,g){var k=g.adapter,l=e.toLowerCase();return function(r){return f(r)&&k.getText(r).toLowerCase().includes(l)}},"nth-child":function(f,e,g){var k=g.adapter,l=g.equals,r=(0,m.default)(e);return r===c.falseFunc?c.falseFunc:r===c.trueFunc?u(f,k):function(v){for(var w=k.getSiblings(v),z=0,A=0;A<w.length&&!l(v,w[A]);A++)k.isTag(w[A])&&z++;return r(z)&&f(v)}},"nth-last-child":function(f,e,g){var k=g.adapter,l=g.equals,r=(0,m.default)(e);return r===c.falseFunc?
c.falseFunc:r===c.trueFunc?u(f,k):function(v){for(var w=k.getSiblings(v),z=0,A=w.length-1;0<=A&&!l(v,w[A]);A--)k.isTag(w[A])&&z++;return r(z)&&f(v)}},"nth-of-type":function(f,e,g){var k=g.adapter,l=g.equals,r=(0,m.default)(e);return r===c.falseFunc?c.falseFunc:r===c.trueFunc?u(f,k):function(v){for(var w=k.getSiblings(v),z=0,A=0;A<w.length;A++){var H=w[A];if(l(v,H))break;k.isTag(H)&&k.getName(H)===k.getName(v)&&z++}return r(z)&&f(v)}},"nth-last-of-type":function(f,e,g){var k=g.adapter,l=g.equals,r=
(0,m.default)(e);return r===c.falseFunc?c.falseFunc:r===c.trueFunc?u(f,k):function(v){for(var w=k.getSiblings(v),z=0,A=w.length-1;0<=A;A--){var H=w[A];if(l(v,H))break;k.isTag(H)&&k.getName(H)===k.getName(v)&&z++}return r(z)&&f(v)}},root:function(f,e,g){var k=g.adapter;return function(l){var r=k.getParent(l);return(null==r||!k.isTag(r))&&f(l)}},scope:function(f,e,g,k){var l=g.equals;return k&&0!==k.length?1===k.length?function(r){return l(k[0],r)&&f(r)}:function(r){return k.includes(r)&&f(r)}:p.filters.root(f,
e,g)},hover:q("isHovered"),visited:q("isVisited"),active:q("isActive")}};
shadow$provide[77]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.verifyPseudoArgs=p.pseudos=void 0;p.pseudos={empty:function(u,q){var m=q.adapter;return!m.getChildren(u).some(function(c){return m.isTag(c)||""!==m.getText(c)})},"first-child":function(u,q){var m=q.adapter;q=q.equals;var c=m.getSiblings(u).find(function(f){return m.isTag(f)});return null!=c&&q(u,c)},"last-child":function(u,q){var m=q.adapter;q=q.equals;for(var c=m.getSiblings(u),f=c.length-1;0<=f;f--){if(q(u,c[f]))return!0;
if(m.isTag(c[f]))break}return!1},"first-of-type":function(u,q){var m=q.adapter;q=q.equals;for(var c=m.getSiblings(u),f=m.getName(u),e=0;e<c.length;e++){var g=c[e];if(q(u,g))return!0;if(m.isTag(g)&&m.getName(g)===f)break}return!1},"last-of-type":function(u,q){var m=q.adapter;q=q.equals;for(var c=m.getSiblings(u),f=m.getName(u),e=c.length-1;0<=e;e--){var g=c[e];if(q(u,g))return!0;if(m.isTag(g)&&m.getName(g)===f)break}return!1},"only-of-type":function(u,q){var m=q.adapter,c=q.equals,f=m.getName(u);return m.getSiblings(u).every(function(e){return c(u,
e)||!m.isTag(e)||m.getName(e)!==f})},"only-child":function(u,q){var m=q.adapter,c=q.equals;return m.getSiblings(u).every(function(f){return c(u,f)||!m.isTag(f)})}};p.verifyPseudoArgs=function(u,q,m){if(null===m){if(2<u.length)throw Error("pseudo-selector :".concat(q," requires an argument"));}else if(2===u.length)throw Error("pseudo-selector :".concat(q," doesn't have any arguments"));}};
shadow$provide[78]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.aliases=void 0;p.aliases={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:":is(\n        :is(button, input, select, textarea, optgroup, option)[disabled],\n        optgroup[disabled] \x3e option,\n        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)\n    )",enabled:":not(:disabled)",checked:":is(:is(input[type\x3dradio], input[type\x3dcheckbox])[checked], option:selected)",
required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(\x3e option[selected])) \x3e :first-of-type)",checkbox:"[type\x3dcheckbox]",file:"[type\x3dfile]",password:"[type\x3dpassword]",radio:"[type\x3dradio]",reset:"[type\x3dreset]",image:"[type\x3dimage]",submit:"[type\x3dsubmit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type\x3dbutton])",input:":is(input, textarea, select, button)",
text:"input:is(:not([type!\x3d'']), [type\x3dtext])"}};
shadow$provide[79]=function(D,y,Q,p){function u(e,g){return e===c.falseFunc?c.falseFunc:function(k){return g.isTag(k)&&e(k)}}function q(e,g){var k=g.getSiblings(e);if(1>=k.length)return[];e=k.indexOf(e);return 0>e||e===k.length-1?[]:k.slice(e+1).filter(g.isTag)}var m=this&&this.__spreadArray||function(e,g,k){if(k||2===arguments.length)for(var l=0,r=g.length,v;l<r;l++)!v&&l in g||(v||(v=Array.prototype.slice.call(g,0,l)),v[l]=g[l]);return e.concat(v||Array.prototype.slice.call(g))};Object.defineProperty(p,
"__esModule",{value:!0});p.subselects=p.getNextSiblings=p.ensureIsTag=p.PLACEHOLDER_ELEMENT=void 0;var c=y(65),f=y(70);p.PLACEHOLDER_ELEMENT={};p.ensureIsTag=u;p.getNextSiblings=q;D=function(e,g,k,l,r){var v=r(g,{xmlMode:!!k.xmlMode,adapter:k.adapter,equals:k.equals},l);return function(w){return v(w)&&e(w)}};p.subselects={is:D,matches:D,where:D,not:function(e,g,k,l,r){var v=r(g,{xmlMode:!!k.xmlMode,adapter:k.adapter,equals:k.equals},l);return v===c.falseFunc?e:v===c.trueFunc?c.falseFunc:function(w){return!v(w)&&
e(w)}},has:function(e,g,k,l,r){var v=k.adapter;k={xmlMode:!!k.xmlMode,adapter:v,equals:k.equals};var w=g.some(function(H){return H.some(f.isTraversal)})?[p.PLACEHOLDER_ELEMENT]:void 0;g=r(g,k,w);if(g===c.falseFunc)return c.falseFunc;if(g===c.trueFunc)return function(H){return v.getChildren(H).some(v.isTag)&&e(H)};var z=u(g,v);g=g.shouldTestNextSiblings;var A=void 0===g?!1:g;return w?function(H){w[0]=H;var F=v.getChildren(H);F=A?m(m([],F,!0),q(H,v),!0):F;return e(H)&&v.existsOne(z,F)}:function(H){return e(H)&&
v.existsOne(z,v.getChildren(H))}}}};
shadow$provide[80]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.compilePseudoSelector=p.aliases=p.pseudos=p.filters=void 0;var u=y(65),q=y(69),m=y(76);Object.defineProperty(p,"filters",{enumerable:!0,get:function(){return m.filters}});var c=y(77);Object.defineProperty(p,"pseudos",{enumerable:!0,get:function(){return c.pseudos}});var f=y(78);Object.defineProperty(p,"aliases",{enumerable:!0,get:function(){return f.aliases}});var e=y(79);p.compilePseudoSelector=function(g,k,l,
r,v){var w=k.name,z=k.data;if(Array.isArray(z))return e.subselects[w](g,z,l,r,v);if(w in f.aliases){if(null!=z)throw Error("Pseudo ".concat(w," doesn't have any arguments"));k=(0,q.parse)(f.aliases[w]);return e.subselects.is(g,k,l,r,v)}if(w in m.filters)return m.filters[w](g,z,l,r);if(w in c.pseudos){var A=c.pseudos[w];(0,c.verifyPseudoArgs)(A,w,z);return A===u.falseFunc?u.falseFunc:g===u.trueFunc?function(H){return A(H,l,z)}:function(H){return A(H,l,z)&&g(H)}}throw Error("unmatched pseudo-class :".concat(w));
}};
shadow$provide[81]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.compileGeneralSelector=void 0;var u=y(72),q=y(80),m=y(69);p.compileGeneralSelector=function(c,f,e,g,k){var l=e.adapter,r=e.equals;switch(f.type){case m.SelectorType.PseudoElement:throw Error("Pseudo-elements are not supported by css-select");case m.SelectorType.ColumnCombinator:throw Error("Column combinators are not yet supported by css-select");case m.SelectorType.Attribute:if(null!=f.namespace)throw Error("Namespaced attributes are not yet supported by css-select");
if(!e.xmlMode||e.lowerCaseAttributeNames)f.name=f.name.toLowerCase();return u.attributeRules[f.action](c,f,e);case m.SelectorType.Pseudo:return(0,q.compilePseudoSelector)(c,f,e,g,k);case m.SelectorType.Tag:if(null!=f.namespace)throw Error("Namespaced tag names are not yet supported by css-select");var v=f.name;if(!e.xmlMode||e.lowerCaseTags)v=v.toLowerCase();return function(z){return l.getName(z)===v&&c(z)};case m.SelectorType.Descendant:if(!1===e.cacheResults||"undefined"===typeof WeakSet)return function(z){for(;z=
l.getParent(z);)if(l.isTag(z)&&c(z))return!0;return!1};var w=new WeakSet;return function(z){for(;z=l.getParent(z);)if(!w.has(z)){if(l.isTag(z)&&c(z))return!0;w.add(z)}return!1};case "_flexibleDescendant":return function(z){do if(l.isTag(z)&&c(z))return!0;while(z=l.getParent(z));return!1};case m.SelectorType.Parent:return function(z){return l.getChildren(z).some(function(A){return l.isTag(A)&&c(A)})};case m.SelectorType.Child:return function(z){z=l.getParent(z);return null!=z&&l.isTag(z)&&c(z)};case m.SelectorType.Sibling:return function(z){for(var A=
l.getSiblings(z),H=0;H<A.length;H++){var F=A[H];if(r(z,F))break;if(l.isTag(F)&&c(F))return!0}return!1};case m.SelectorType.Adjacent:return l.prevElementSibling?function(z){z=l.prevElementSibling(z);return null!=z&&c(z)}:function(z){for(var A=l.getSiblings(z),H,F=0;F<A.length;F++){var L=A[F];if(r(z,L))break;l.isTag(L)&&(H=L)}return!!H&&c(H)};case m.SelectorType.Universal:if(null!=f.namespace&&"*"!==f.namespace)throw Error("Namespaced universal selectors are not yet supported by css-select");return c}}};
shadow$provide[82]=function(D,y,Q,p){function u(F,L,N){F="string"===typeof F?(0,g.parse)(F):F;return c(F,L,N)}function q(F){return"pseudo"===F.type&&("scope"===F.name||Array.isArray(F.data)&&F.data.some(function(L){return L.some(q)}))}function m(F,L,N){var R=L.adapter;L=!(null===N||void 0===N||!N.every(function(Y){var fa=R.isTag(Y)&&R.getParent(Y);return Y===w.PLACEHOLDER_ELEMENT||fa&&R.isTag(fa)}));for(N=0;N<F.length;N++){var J=F[N];if(!(0<J.length&&(0,r.isTraversal)(J[0])&&"descendant"!==J[0].type))if(L&&
!J.some(q))J.unshift(z);else continue;J.unshift(H)}}function c(F,L,N){var R;F=F.filter(function(Z){return 0<Z.length});F.forEach(l.default);N=null!==(R=L.context)&&void 0!==R?R:N;var J=Array.isArray(N),Y=N&&(Array.isArray(N)?N:[N]);m(F,L,Y);var fa=!1;F=F.map(function(Z){if(2<=Z.length){var da=Z[0],la=Z[1];if("pseudo"===da.type&&"scope"===da.name)if(J&&"descendant"===la.type)Z[1]=A;else if("adjacent"===la.type||"sibling"===la.type)fa=!0}return f(Z,L,Y)}).reduce(e,k.falseFunc);F.shouldTestNextSiblings=
fa;return F}function f(F,L,N){var R;return F.reduce(function(J,Y){return J===k.falseFunc?k.falseFunc:(0,v.compileGeneralSelector)(J,Y,L,N,c)},null!==(R=L.rootFunc)&&void 0!==R?R:k.trueFunc)}function e(F,L){return L===k.falseFunc||F===k.trueFunc?F:F===k.falseFunc||L===k.trueFunc?L:function(N){return F(N)||L(N)}}D=this&&this.__importDefault||function(F){return F&&F.__esModule?F:{"default":F}};Object.defineProperty(p,"__esModule",{value:!0});p.compileToken=p.compileUnsafe=p.compile=void 0;var g=y(69),
k=y(65),l=D(y(71)),r=y(70),v=y(81),w=y(79);p.compile=function(F,L,N){F=u(F,L,N);return(0,w.ensureIsTag)(F,L.adapter)};p.compileUnsafe=u;var z={type:g.SelectorType.Descendant},A={type:"_flexibleDescendant"},H={type:g.SelectorType.Pseudo,name:"scope",data:null};p.compileToken=c};
shadow$provide[83]=function(D,y,Q,p){function u(A){var H,F,L,N;A=null!==A&&void 0!==A?A:w;null!==(H=A.adapter)&&void 0!==H?H:A.adapter=g;null!==(F=A.equals)&&void 0!==F?F:A.equals=null!==(N=null===(L=A.adapter)||void 0===L?void 0:L.equals)&&void 0!==N?N:v;return A}function q(A){return function(H,F,L){F=u(F);return A(H,F,L)}}function m(A){return function(H,F,L){L=u(L);"function"!==typeof H&&(H=(0,l.compileUnsafe)(H,L,F));F=c(F,L.adapter,H.shouldTestNextSiblings);return A(H,F,L)}}function c(A,H,F){void 0===
F&&(F=!1);if(F){A=Array.isArray(A)?A.slice(0):[A];F=A.length;for(var L=0;L<F;L++){var N=(0,r.getNextSiblings)(A[L],H);A.push.apply(A,N)}}return Array.isArray(A)?H.removeSubsets(A):H.getChildren(A)}var f=this&&this.__createBinding||(Object.create?function(A,H,F,L){void 0===L&&(L=F);var N=Object.getOwnPropertyDescriptor(H,F);if(!N||("get"in N?!H.__esModule:N.writable||N.configurable))N={enumerable:!0,get:function(){return H[F]}};Object.defineProperty(A,L,N)}:function(A,H,F,L){void 0===L&&(L=F);A[L]=
H[F]}),e=this&&this.__setModuleDefault||(Object.create?function(A,H){Object.defineProperty(A,"default",{enumerable:!0,value:H})}:function(A,H){A["default"]=H});D=this&&this.__importStar||function(A){if(A&&A.__esModule)return A;var H={};if(null!=A)for(var F in A)"default"!==F&&Object.prototype.hasOwnProperty.call(A,F)&&f(H,A,F);e(H,A);return H};Object.defineProperty(p,"__esModule",{value:!0});p.aliases=p.pseudos=p.filters=p.is=p.selectOne=p.selectAll=p.prepareContext=p._compileToken=p._compileUnsafe=
p.compile=void 0;var g=D(y(64)),k=y(65),l=y(82),r=y(79),v=function(A,H){return A===H},w={adapter:g,equals:v};p.compile=q(l.compile);p._compileUnsafe=q(l.compileUnsafe);p._compileToken=q(l.compileToken);p.prepareContext=c;p.selectAll=m(function(A,H,F){return A!==k.falseFunc&&H&&0!==H.length?F.adapter.findAll(A,H):[]});p.selectOne=m(function(A,H,F){return A!==k.falseFunc&&H&&0!==H.length?F.adapter.findOne(A,H):null});p.is=function(A,H,F){F=u(F);return("function"===typeof H?H:(0,l.compile)(H,F))(A)};
p.default=p.selectAll;var z=y(80);Object.defineProperty(p,"filters",{enumerable:!0,get:function(){return z.filters}});Object.defineProperty(p,"pseudos",{enumerable:!0,get:function(){return z.pseudos}});Object.defineProperty(p,"aliases",{enumerable:!0,get:function(){return z.aliases}})};
shadow$provide[84]=function(D,y,Q,p){function u(m){return m.children||[]}Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;const q={isTag:function(m){return!0},existsOne(m,c){return c.some(f=>m(f)||q.existsOne(m,u(f)))},getSiblings(m){const c=m.parent;return c?u(c):[m]},getChildren:u,getParent:function(m){return m.parent},getAttributeValue(m,c){return"class"===c?m.props.classes.join(" "):"id"===c?m.id:""},hasAttrib(m,c){return"id"===c?!!m.id:"class"===c?0<m.props.classes.length:m.traits.hash?
Object.prototype.hasOwnProperty.call(m.traits.hash,c):!1},removeSubsets:function(m){const c=new Set(m);c.forEach(f=>{let e=f.parent;for(;e;){if(c.has(e)){c.delete(f);break}e=e.parent}});return Array.from(c)},getName(m){var c;return null!==(c=m.type)&&void 0!==c?c:""},findOne:function e(c,f){for(const g of f){if(c(g))return g;if(f=e(c,u(g)))return f}return null},findAll:function g(f,e){const k=[];for(const l of e)f(l)&&k.push(l),k.push(...g(f,u(l)));return k},getText:function(f){return""}};p.default=
q};
shadow$provide[85]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.compile=p.selectAll=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==
k&&Object.prototype.hasOwnProperty.call(c,k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(83)),m=function(c){return c&&c.__esModule?c:{default:c}}(y(84));p.selectAll=(c,f)=>{try{q.compile(c)}catch(g){return[]}var e=Array.isArray(f);if(e&&0===f.length)return[];for(e=e?f[0]:f;null!==m.default.getParent(e);)e=m.default.getParent(e);e=q.selectAll(c,e,{adapter:m.default});if(f){c=[];f=Array.isArray(f)?
f:[f];f=new Set(f);for(const g of Array.from(e))for(e=g;null!=e;){if(f.has(e)){c.push(g);break}e=m.default.getParent(e)}return c}return e};p.compile=c=>{try{return q.compile(c,{adapter:m.default})}catch(f){return()=>!1}}};
shadow$provide[86]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Model=void 0;var u=y(85);const q=/^<([0-9]+|<*)$/;class m{constructor(c){this.root=c;this.root.model=this;this.root.root=this.root;this.ids={};this.classes={};this.traits={};this.types={};this.nodes=[];this.watchers=[];this.fire=!1;this.lastNode=null;this.event={type:"update"};this.root.on("add",Z=>f(Z.node));this.root.on("remove",Z=>{Z=Z.node;N(Z);J(Z);fa(Z);A(Z.id,Z);F(Z.classes,Z);Z.off("change:node",l);return k(Z)});
const f=Z=>{L(Z);R(Z);Y(Z);Z.on("change:node",l);l(null,Z,!0);return k(Z)},e=Z=>{for(const da of Array.from(this.watchers))da.match=da.matcher(Z);return null},g=Z=>{for(const da of Array.from(this.watchers)){const la=da.fire||(da.fire=da.match!==da.matcher(Z));la&&(this.lastNode=Z);this.fire||(this.fire=la)}return null},k=Z=>{for(const da of Array.from(this.watchers)){const la=da.fire||(da.fire=da.matcher(Z));la&&(this.lastNode=Z);this.fire||(this.fire=la)}return null};this.digest=()=>{if(!this.fire)return!1;
for(const Z of Array.from(this.watchers.slice()))Z.fire&&(Z.fire=!1,Z.handler());this.fire=!1;return!0};const l=(Z,da,la)=>{var W=la||Z.changed["node.classes"];let ra=!1;if(la||Z.changed["node.id"])Z=da.get("node.id"),Z!==da.id&&(la||e(da),ra=!0,null!=da.id&&A(da.id,da),z(Z,da));if(W){var za;W=null!=(za=da.get("node.classes"))?za:[];za=W.join(",");za!==(null!=da.classes?da.classes.klass:void 0)&&(W=W.slice(),la||ra||e(da),ra=!0,null!=da.classes&&F(da.classes,da),H(W,da),da.classes=W,da.classes.klass=
za)}!la&&ra&&g(da);return null},r=function(Z,da,la){if(null!=da){for(const W of Array.from(da))da=null!=Z[W]?Z[W]:[],da.push(la),Z[W]=da;return null}},v=function(Z,da,la){if(null!=da){for(const W of Array.from(da)){da=Z[W];const ra=da.indexOf(la);0<=ra&&da.splice(ra,1);0===da.length&&delete Z[W]}return null}},w=function(Z){if(0<Z.length){var da=Z.hash={};return Array.from(Z).map(la=>da[la]=!0)}},z=(Z,da)=>{if(this.ids[Z])throw Error(`Duplicate node id \`${Z}\``);null!=Z&&(this.ids[Z]=[da]);return da.id=
null!=Z?Z:da._id},A=(Z,da)=>{null!=Z&&delete this.ids[Z];return da.id=da._id},H=(Z,da)=>{r(this.classes,Z,da);if(null!=Z)return w(Z)},F=(Z,da)=>{v(this.classes,Z,da);if(null!=Z)return delete Z.hash},L=Z=>this.nodes.push(Z),N=Z=>this.nodes.splice(this.nodes.indexOf(Z),1),R=Z=>r(this.types,[Z.type],Z),J=Z=>v(this.types,[Z.type],Z),Y=Z=>{r(this.traits,Z.traits,Z);return w(Z.traits)},fa=Z=>{v(this.traits,Z.traits,Z);return delete Z.traits.hash};f(this.root);this.root.trigger({type:"added"})}select(c,
f){return(0,u.selectAll)(c,f||this.getRoot())}watch(c,f){let e;f.unwatch=()=>this.unwatch(f);f.watcher=e={selector:c,handler:f,matcher:this._matcher(c),match:!1,fire:!1};this.watchers.push(e);return this.select(c)}unwatch(c){const {watcher:f}=c;if(null!=f)return this.watchers.splice(this.watchers.indexOf(f),1),delete c.unwatch,delete c.watcher}_matcher(c){if(q.test(c))throw Error("Auto-link matcher unsupported");return(0,u.compile)(c)}getRoot(){return this.root}getLastTrigger(){return this.lastNode.toString()}}
p.Model=m};
shadow$provide[87]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});var u=y(39);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in p&&p[e]===u[e]||Object.defineProperty(p,e,{enumerable:!0,get:function(){return u[e]}}))});var q=y(42);Object.keys(q).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in p&&p[e]===q[e]||Object.defineProperty(p,e,{enumerable:!0,get:function(){return q[e]}}))});var m=y(43);Object.keys(m).forEach(function(e){"default"!==e&&"__esModule"!==
e&&(e in p&&p[e]===m[e]||Object.defineProperty(p,e,{enumerable:!0,get:function(){return m[e]}}))});var c=y(86);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in p&&p[e]===c[e]||Object.defineProperty(p,e,{enumerable:!0,get:function(){return c[e]}}))});var f=y(41);Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in p&&p[e]===f[e]||Object.defineProperty(p,e,{enumerable:!0,get:function(){return f[e]}}))})};
shadow$provide[88]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.OverlayFactory=void 0;class u{constructor(q,m){this.classes=q;this.canvas=m;q=document.createElement("div");q.classList.add("mathbox-overlays");this.div=q}inject(){const q=this.canvas.parentNode;if(!q)throw Error("Canvas not inserted into document.");return q.insertBefore(this.div,this.canvas)}unject(){return this.div.parentNode.removeChild(this.div)}getTypes(){return Object.keys(this.classes)}make(q,m){return new this.classes[q](this.div,
m)}}p.OverlayFactory=u};
shadow$provide[89]=function(D,y,Q,p){function u(z,A,H){const F=[],L=z<A;for(A=H?L?A+1:A-1:A;L?z<A:z>A;L?z++:z--)F.push(z);return F}Object.defineProperty(p,"__esModule",{value:!0});p.createClass=p.apply=p.recycle=p.element=p.hint=p.Types=void 0;const q=[];let m=0;const c={};p.Types=c;const f=()=>({id:m++,type:null,props:null,children:null,rendered:null,instance:null});p.hint=function(z){z=Math.max(0,q.length-2*z);return u(0,z,!1).map(A=>q.push(f()))};const e=function(z,A,H){const F=q.length?q.pop():
f();F.type=null!=z?z:"div";F.props=null!=A?A:null;F.children=null!=H?H:null;return F};p.element=e;const g=function(z){if(z.type){var {children:A}=z;z.type=z.props=z.children=z.instance=null;q.push(z);if(null!=A)for(const H of Array.from(A))g(H)}};p.recycle=g;const k=function(z,A,H,F,L){if(null!=z){if(null==A)return l(z,F,L);var N;if(z instanceof Node){if(N=z===A)return}else N=typeof z===typeof A&&null!==A&&null!==z&&z.type===A.type;if(N){z.instance=A.instance;const da=null!=z.type&&z.type.isComponentClass?
z.type:c[z.type],la=null!=A?A.props:void 0,W=z.props;N=null!=(null!=A?A.children:void 0)?null!=A?A.children:void 0:null;var R=z.children;null!=W&&(W.children=R);if(null!=da){var J=H._COMPONENT_DIRTY;null!=la!==(null!=W)&&(J=!0);N!==R&&(J=!0);if(null!=la&&null!=W){if(!J)for(Z in la)Object.prototype.hasOwnProperty.call(W,Z)||(J=!0);if(!J)for(Z in W){var Y=W[Z];la[Z]!==Y&&(J=!0)}}if(J){var fa;N=A.instance;null==z.props&&(z.props={});for(const ra in N.defaultProps)R=N.defaultProps[ra],null==z.props[ra]&&
(z.props[ra]=R);z.props.children=z.children;"function"===typeof N.willReceiveProps&&N.willReceiveProps(z.props);if(R=H._COMPONENT_FORCE||(null!=(fa="function"===typeof N.shouldUpdate?N.shouldUpdate(z.props):void 0)?fa:!0)){var Z=N.getNextState();"function"===typeof N.willUpdate&&N.willUpdate(z.props,Z)}Z=N.props;fa=N.applyNextState();N.props=z.props;N.children=z.children;R&&(z=z.rendered="function"===typeof N.render?N.render(e,z.props,z.children):void 0,k(z,A.rendered,H,F,L),"function"===typeof N.didUpdate&&
N.didUpdate(Z,fa))}}else{if(null!=la)for(Z in la)if(!Object.prototype.hasOwnProperty.call(W,Z))if(z=H,A=Z,F=la[Z],"style"===A)for(Y in F)z.style[null!=v[Y]?v[Y]:Y]="";else null!=z[A]&&(z[A]=void 0),z instanceof Node&&z.removeAttribute(A);if(null!=W)for(Z in W)Y=W[Z],(J=la[Z])!==Y&&"children"!==Z&&w(H,Z,Y,J);if(null!=R)if(["string","number"].includes(typeof R))R!==N&&(H.textContent=R);else if(null!=R.type)k(R,N,H.childNodes[0],H,0);else if({childNodes:F}=H,null!=N)for(A=0;A<R.length;A++)z=R[A],k(z,
N[A],F[A],H,A);else for(A=0;A<R.length;A++)z=R[A],k(z,null,F[A],H,A);else null!=N&&(r(null,H),H.innerHTML="")}return}r(A.instance,H);H.remove();return l(z,F,L)}if(null!=A)return r(A.instance,H),A.node.remove()};p.apply=k;const l=function(z,A,H){null==H&&(H=0);var F=null!=z.type&&z.type.isComponentClass?z.type:c[z.type];if(z instanceof Node)var L=z;else{if(null!=F){var N=null!=z.type&&z.type.isComponentClass?z.type:c[z.type];if(!N)return z=z.rendered=e("noscript"),L=l(z,A,H);z.instance=N=new N(A);
null==z.props&&(z.props={});for(L in N.defaultProps)F=N.defaultProps[L],null==z.props[L]&&(z.props[L]=F);z.props.children=z.children;N.props=z.props;N.children=z.children;N.setState("function"===typeof N.getInitialState?N.getInitialState():void 0);"function"===typeof N.willMount&&N.willMount();z=z.rendered="function"===typeof N.render?N.render(e,z.props,z.children):void 0;L=l(z,A,H);"function"===typeof N.didMount&&N.didMount(z);L._COMPONENT=N;return L}if(["string","number"].includes(typeof z))L=document.createTextNode(z);
else for(N in L=document.createElement(z.type),z.props)w(L,N,z.props[N]);({children:z}=z);if(null!=z)if(["string","number"].includes(typeof z))L.textContent=z;else if(null!=z.type)l(z,L,0);else for(N=0;N<z.length;N++)l(z[N],L,N)}A.insertBefore(L,A.childNodes[H]);return L},r=function(z,A){if(z){"function"===typeof z.willUnmount&&z.willUnmount();for(const H in z)delete z[H]}z=[];for(const H of Array.from(A.childNodes))r(H._COMPONENT,H),z.push(delete H._COMPONENT);return z};D=function(z){if("undefined"===
typeof document)return!0;if(null!=document.documentElement.style[z])return z;z=z[0].toUpperCase()+z.slice(1);const A=["webkit","moz","ms","o"];for(const H of Array.from(A))if(null!=document.documentElement.style[H+z])return H+z};const v={};for(const z of["transform"])v[z]=D(z);const w=function(z,A,H,F){if("style"===A)for(const L in H)A=H[L],(null!=F?F[L]:void 0)!==A&&(z.style[null!=v[L]?v[L]:L]=A);else if(null!=z[A])try{z[A]=H}catch(L){console.log("failed setting "+A)}else z instanceof Node&&z.setAttribute(A,
H)};p.createClass=function(z){let A;const H={willMount:"componentWillMount",didMount:"componentDidMount",willReceiveProps:"componentWillReceiveProps",shouldUpdate:"shouldComponentUpdate",willUpdate:"componentWillUpdate",didUpdate:"componentDidUpdate",willUnmount:"componentWillUnmount"};for(const L in H){const N=H[L];null==z[L]&&(z[L]=z[N])}class F{constructor(L,N,R=null,J=null){let Y,fa;null==N&&(N={});this.props=N;this.state=R;this.children=J;N=function(da,la){return"function"===typeof da?da.bind(la):
da};for(Y in z)fa=z[Y],this[Y]=N(fa,this);let Z=null;this.setState=function(da){null==Z&&(Z=da?null!=Z?Z:{}:null);for(Y in da)fa=da[Y],Z[Y]=fa;L._COMPONENT_DIRTY=!0};this.forceUpdate=function(){L._COMPONENT_FORCE=L._COMPONENT_DIRTY=!0;let da=L;const la=[];for(;da=da.parentNode;)da._COMPONENT?la.push(da._COMPONENT_FORCE=!0):la.push(void 0);return la};this.getNextState=()=>Z;this.applyNextState=function(){L._COMPONENT_FORCE=L._COMPONENT_DIRTY=!1;const da=this.state;[Z,this.state]=Array.from([null,Z]);
return da}}}F.isComponentClass=!0;F.prototype.defaultProps=null!=(A="function"===typeof z.getDefaultProps?z.getDefaultProps():void 0)?A:{};return F}};
shadow$provide[90]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Overlay=void 0;class u{constructor(q,m){this.element=q;"function"===typeof this.init&&this.init(m)}dispose(){}}p.Overlay=u};
shadow$provide[91]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.DOM=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(89));D=y(90);class m extends D.Overlay{static initClass(){this.prototype.el=q.element;this.prototype.hint=q.hint;this.prototype.apply=q.apply;this.prototype.recycle=q.recycle}init(c){return this.last=null}dispose(){this.unmount();return super.dispose()}mount(){const c=document.createElement("div");c.classList.add("mathbox-overlay");this.element.appendChild(c);
return this.overlay=c}unmount(c){this.overlay&&this.overlay.parentNode&&this.element.removeChild(this.overlay);return this.overlay=null}render(c){this.overlay||this.mount();["string","number"].includes(typeof c)&&(c=this.el("div",null,c));c instanceof Array&&(c=this.el("div",null,c));null==c&&(c=this.el("div"));var f="div"===c.type;let {last:e}=this;const {overlay:g}=this,k=f?g:g.childNodes[0];f=f?g.parentNode:g;!e&&k&&(e=this.el("div"));this.apply(c,e,k,f,0);this.last=c;null!=e&&this.recycle(e)}}
p.DOM=m;m.initClass()};
shadow$provide[92]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Classes=void 0;D={dom:y(91).DOM};p.Classes=D};
shadow$provide[93]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});var u={Factory:!0};Object.defineProperty(p,"Factory",{enumerable:!0,get:function(){return q.OverlayFactory}});var q=y(88),m=y(92);Object.keys(m).forEach(function(f){"default"!==f&&"__esModule"!==f&&(Object.prototype.hasOwnProperty.call(u,f)||f in p&&p[f]===m[f]||Object.defineProperty(p,f,{enumerable:!0,get:function(){return m[f]}}))});var c=y(90);Object.keys(c).forEach(function(f){"default"!==f&&"__esModule"!==f&&
(Object.prototype.hasOwnProperty.call(u,f)||f in p&&p[f]===c[f]||Object.defineProperty(p,f,{enumerable:!0,get:function(){return c[f]}}))})};
shadow$provide[94]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.Primitive=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(87));D=y(9);class m{static initClass(){this.Node=q.Node;this.Group=q.Group;this.model=this.Node;this.finals=this.props=this.traits=this.defaults=null;this.freeform=!1}constructor(c,f,e){this.node=c;this._context=f;this._renderables=this._context.renderables;this._attributes=this._context.attributes;this._shaders=this._context.shaders;this._overlays=this._context.overlays;
this._animator=this._context.animator;this._types=this._attributes.types;this.node.controller=this;this.node.on("added",g=>this._added());this.node.on("removed",g=>this._removed());this.node.on("change",g=>{if(this._root)return this.change(g.changed,g.touched)});this.reconfigure();this._get=this.node.get.bind(this.node);this._helpers=e(this,this.node.traits);this._handlers={inherit:{},listen:[],watch:[],compute:[]};this._root=this._parent=null;this.init()}is(c){return this.traits.hash[c]}init(){}make(){}made(){}unmake(c){}unmade(){}change(c,
f,e){}refresh(){return this.change({},{},!0)}rebuild(){if(this._root)return this._removed(!0),this._added()}reconfigure(c){null!=c&&this.node.configure(c,this._attributes);this.traits=this.node.traits;return this.props=this.node.props}_added(){let c,f;this._parent=null!=this.node.parent?this.node.parent.controller:void 0;this._root=null!=this.node.root?this.node.root.controller:void 0;this.node.clock=null!=(f=this._inherit("clock"))?f:this._root;try{try{return this.make(),this.refresh(),this.made()}catch(e){throw c=
e,this.node.print("warn"),console.error(c),c;}}catch(e){try{return this._removed()}catch(g){}}}_removed(c){null==c&&(c=!1);this.unmake(c);this._unlisten();this._unattach();this._uncompute();this._parent=this._root=null;return this.unmade(c)}_listen(c,f,e,g){null==g&&(g=this);if(c instanceof Array)for(const k of Array.from(c))return this.__listen(k,f,e,g);return this.__listen(c,f,e,g)}__listen(c,f,e,g){null==g&&(g=this);"string"===typeof c&&(c=this._inherit(c));null!=c&&(e=e.bind(g),e.node=this.node,
c.on(f,e),this._handlers.listen.push([c,f,e]));return c}_unlisten(){if(this._handlers.listen.length){for(const [c,f,e]of Array.from(this._handlers.listen))c.off(f,e);return this._handlers.listen=[]}}_inherit(c){const f=this._handlers.inherit[c];return void 0!==f?f:this._handlers.inherit[c]=null!=this._parent?this._parent._find(null!=c?c:null):void 0}_find(c){return this.is(c)?this:null!=this._parent?this._parent._find(c):void 0}_uninherit(){return this._handlers.inherit={}}_attach(c,f,e,g,k,l,r){null==
g&&(g=this);null==k&&(k=this);null==l&&(l=!1);null==r&&(r=!1);const v=function(H){if(null!=H&&Array.from(H.traits).includes(f))return H},w=H=>null!=H?H.controller:void 0,z=function(H){if(null==H)return H;let F=[];for(const L of Array.from(H))L instanceof Array?F=F.concat(L):F.push(L);return F},A=H=>{let F;if("object"===typeof H){var L=H;if(null!=L&&L._up)return H=r?L._targets:[L[0]];if(L instanceof Array)return H=r?z(L.map(A)):A(L[0]);if(L instanceof q.Node)return[L]}else if("string"===typeof H&&
"\x3c"===H[0]){var N=0;if(L=H.match(/^<([0-9])+$/))N=+L[1]-1;H.match(/^<+$/)&&(N=+H.length-1);F=[];let R=k.node;for(;R;){({parent:L}=R);if(!L)break;(R=L.children[R.index-1])||F.length||(R=L);L=null;v(R)&&(L=R);null!=L&&0>=N--&&F.push(L);if(!r&&F.length)return F}if(r&&F.length)return F}else if("string"===typeof H)if(N=e.bind(g),this._handlers.watch.push(N),N=this._root.watch(H,N),r){if(F=N.filter(v),F.length)return F}else if(v(N[0])&&(L=N[0]),null!=L)return[L];if(!l)throw console.warn(this.node.toMarkup()),
Error(`${this.node.toString()} - Could not find ${f} \`${H}\``);return r?[]:null};c=z(A(c));return r?null!=c?c.map(w):null:null!=c?w(c[0]):null}_unattach(){if(this._handlers.watch.length){for(const c of Array.from(this._handlers.watch))null!=c&&c.unwatch();return this._handlers.watch=[]}}_compute(c,f){this._handlers.compute.push(c);return this.node.bind(c,f,!0)}_uncompute(){if(this._handlers.compute.length){for(const c of Array.from(this._handlers.compute))this.node.unbind(c,!0);return this._handlers.compute=
[]}}}p.Primitive=m;m.initClass();D.Binder.apply(m.prototype)};
shadow$provide[95]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Parent=void 0;var u=y(94);class q extends u.Primitive{static initClass(){this.model=u.Primitive.Group;this.traits=["node"]}}p.Parent=q;q.initClass()};
shadow$provide[96]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Group=void 0;D=y(95);class u extends D.Parent{static initClass(){this.traits=["node","object","entity","visible","active"]}make(){this._helpers.visible.make();return this._helpers.active.make()}unmake(){this._helpers.visible.unmake();return this._helpers.active.unmake()}}p.Group=u;u.initClass()};
shadow$provide[97]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Inherit=void 0;D=y(95);class u extends D.Parent{static initClass(){this.traits=["node","bind"]}make(){return this._helpers.bind.make([{to:"inherit.source",trait:"node"}])}unmake(){return this._helpers.bind.unmake()}_find(q){return this.bind.source&&Array.from(this.props.traits).includes(q)?this.bind.source._inherit(q):super._find()}}p.Inherit=u;u.initClass()};
shadow$provide[98]=function(D,y,Q,p){function u(m,c){return"undefined"!==typeof m&&null!==m?c(m):void 0}Object.defineProperty(p,"__esModule",{value:!0});p.Root=void 0;D=y(95);class q extends D.Parent{static initClass(){this.traits="node root clock scene vertex unit".split(" ")}init(){this.size=null;this.cameraEvent={type:"root.camera"};this.preEvent={type:"root.pre"};this.updateEvent={type:"root.update"};this.renderEvent={type:"root.render"};this.postEvent={type:"root.post"};this.clockEvent={type:"clock.tick"};
return this.camera=null}make(){return this._helpers.unit.make()}unmake(){return this._helpers.unit.unmake()}change(m,c,f){if(m["root.camera"]||f)return this._unattach(),this._attach(this.props.camera,"camera",this.setCamera,this,this,!0),this.setCamera()}adopt(m){return Array.from(m.renders).map(c=>this._context.scene.add(c))}unadopt(m){return Array.from(m.renders).map(c=>this._context.scene.remove(c))}select(m){return this.node.model.select(m)}watch(m,c){return this.node.model.watch(m,c)}unwatch(m){return this.node.model.unwatch(m)}resize(m){this.size=
m;return this.trigger({type:"root.resize",size:m})}getSize(){return this.size}getSpeed(){return this.props.speed}getUnit(){return this._helpers.unit.get()}getUnitUniforms(){return this._helpers.unit.uniforms()}pre(){this.getCamera().updateProjectionMatrix();this.trigger(this.clockEvent);return this.trigger(this.preEvent)}update(){return this.trigger(this.updateEvent)}render(){return this.trigger(this.renderEvent)}post(){return this.trigger(this.postEvent)}setCamera(){const m=u(this.select(this.props.camera)[0],
c=>c.controller);if(this.camera!==m)return this.camera=m,this.trigger({type:"root.camera"})}getCamera(){let m;return null!=(m=null!=this.camera?this.camera.getCamera():void 0)?m:this._context.defaultCamera}getTime(){return this._context.time}vertex(m,c){return 2===c?m.pipe("view.position"):3===c?m.pipe("root.position"):m}}p.Root=q;q.initClass()};
shadow$provide[99]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Unit=void 0;D=y(95);class u extends D.Parent{static initClass(){this.traits=["node","unit"]}make(){return this._helpers.unit.make()}unmake(){return this._helpers.unit.unmake()}getUnit(){return this._helpers.unit.get()}getUnitUniforms(){return this._helpers.unit.uniforms()}}p.Unit=u;u.initClass()};
shadow$provide[100]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});var u=y(96);Object.keys(u).forEach(function(f){"default"!==f&&"__esModule"!==f&&(f in p&&p[f]===u[f]||Object.defineProperty(p,f,{enumerable:!0,get:function(){return u[f]}}))});var q=y(97);Object.keys(q).forEach(function(f){"default"!==f&&"__esModule"!==f&&(f in p&&p[f]===q[f]||Object.defineProperty(p,f,{enumerable:!0,get:function(){return q[f]}}))});var m=y(98);Object.keys(m).forEach(function(f){"default"!==f&&
"__esModule"!==f&&(f in p&&p[f]===m[f]||Object.defineProperty(p,f,{enumerable:!0,get:function(){return m[f]}}))});var c=y(99);Object.keys(c).forEach(function(f){"default"!==f&&"__esModule"!==f&&(f in p&&p[f]===c[f]||Object.defineProperty(p,f,{enumerable:!0,get:function(){return c[f]}}))})};
shadow$provide[101]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.transformComposer=p.swizzleToEulerOrder=p.paramToArrayStorage=p.paramToGL=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,
k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(7));p.paramToGL=function(c,f){return f===q.RepeatWrapping?c.REPEAT:f===q.ClampToEdgeWrapping?c.CLAMP_TO_EDGE:f===q.MirroredRepeatWrapping?c.MIRRORED_REPEAT:f===q.NearestFilter?c.NEAREST:f===q.NearestMipMapNearestFilter?c.NEAREST_MIPMAP_NEAREST:f===q.NearestMipMapLinearFilter?c.NEAREST_MIPMAP_LINEAR:
f===q.LinearFilter?c.LINEAR:f===q.LinearMipMapNearestFilter?c.LINEAR_MIPMAP_NEAREST:f===q.LinearMipMapLinearFilter?c.LINEAR_MIPMAP_LINEAR:f===q.UnsignedByteType?c.UNSIGNED_BYTE:f===q.UnsignedShort4444Type?c.UNSIGNED_SHORT_4_4_4_4:f===q.UnsignedShort5551Type?c.UNSIGNED_SHORT_5_5_5_1:f===q.ByteType?c.BYTE:f===q.ShortType?c.SHORT:f===q.UnsignedShortType?c.UNSIGNED_SHORT:f===q.IntType?c.INT:f===q.UnsignedIntType?c.UNSIGNED_INT:f===q.FloatType?c.FLOAT:f===q.AlphaFormat?c.ALPHA:f===q.RGBAFormat?c.RGBA:
f===q.LuminanceFormat?c.LUMINANCE:f===q.LuminanceAlphaFormat?c.LUMINANCE_ALPHA:f===q.AddEquation?c.FUNC_ADD:f===q.SubtractEquation?c.FUNC_SUBTRACT:f===q.ReverseSubtractEquation?c.FUNC_REVERSE_SUBTRACT:f===q.ZeroFactor?c.ZERO:f===q.OneFactor?c.ONE:f===q.SrcColorFactor?c.SRC_COLOR:f===q.OneMinusSrcColorFactor?c.ONE_MINUS_SRC_COLOR:f===q.SrcAlphaFactor?c.SRC_ALPHA:f===q.OneMinusSrcAlphaFactor?c.ONE_MINUS_SRC_ALPHA:f===q.DstAlphaFactor?c.DST_ALPHA:f===q.OneMinusDstAlphaFactor?c.ONE_MINUS_DST_ALPHA:f===
q.DstColorFactor?c.DST_COLOR:f===q.OneMinusDstColorFactor?c.ONE_MINUS_DST_COLOR:f===q.SrcAlphaSaturateFactor?c.SRC_ALPHA_SATURATE:0};p.paramToArrayStorage=function(c){switch(c){case q.UnsignedByteType:return Uint8Array;case q.ByteType:return Int8Array;case q.ShortType:return Int16Array;case q.UnsignedShortType:return Uint16Array;case q.IntType:return Int32Array;case q.UnsignedIntType:return Uint32Array;case q.FloatType:return Float32Array}};const m=c=>c.map(f=>["","X","Y","Z"][f]).join("");p.swizzleToEulerOrder=
m;p.transformComposer=function(){const c=new q.Euler,f=new q.Quaternion,e=new q.Vector3,g=new q.Vector3,k=new q.Matrix4;return function(l,r,v,w,z,A){null==A&&(A="XYZ");null!=r?(A instanceof Array&&(A=m(A)),c.setFromVector3(r,A),f.setFromEuler(c)):f.set(0,0,0,1);null!=v&&f.multiply(v);null!=l?e.copy(l):e.set(0,0,0);null!=w?g.copy(w):g.set(1,1,1);k.compose(e,f,g);null!=z&&k.multiplyMatrices(k,z);return k}}};
shadow$provide[102]=function(D,y,Q,p){function u(f){if("function"!==typeof WeakMap)return null;var e=new WeakMap,g=new WeakMap;return(u=function(k){return k?g:e})(f)}Object.defineProperty(p,"__esModule",{value:!0});p.Camera=void 0;var q=function(f,e){if(!e&&f&&f.__esModule)return f;if(null===f||"object"!==typeof f&&"function"!==typeof f)return{default:f};if((e=u(e))&&e.has(f))return e.get(f);var g={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor,l;for(l in f)if("default"!==l&&Object.prototype.hasOwnProperty.call(f,
l)){var r=k?Object.getOwnPropertyDescriptor(f,l):null;r&&(r.get||r.set)?Object.defineProperty(g,l,r):g[l]=f[l]}g.default=f;e&&e.set(f,g);return g}(y(101)),m=y(7);D=y(94);class c extends D.Primitive{static initClass(){this.traits=["node","camera"]}init(){}make(){const f=this._context.defaultCamera;this.camera=this.props.proxy?f:f.clone();this.euler=new m.Euler;return this.quat=new m.Quaternion}unmake(){}getCamera(){return this.camera}change(f,e,g){if(f["camera.position"]||f["camera.quaternion"]||f["camera.rotation"]||
f["camera.lookAt"]||f["camera.up"]||f["camera.fov"]||g){const {position:k,quaternion:l,rotation:r,lookAt:v,up:w,fov:z}=this.props;null!=k&&this.camera.position.copy(k);if(null!=l||null!=r||null!=v)null!=v?this.camera.lookAt(v):this.camera.quaternion.set(0,0,0,1),null!=r&&(this.euler.setFromVector3(r,q.swizzleToEulerOrder(this.props.eulerOrder)),this.quat.setFromEuler(this.euler),this.camera.quaternion.multiply(this.quat)),null!=l&&this.camera.quaternion.multiply(l);null!=z&&null!=this.camera.fov&&
(this.camera.fov=z);null!=w&&this.camera.up.copy(w);return this.camera.updateMatrix()}}}p.Camera=c;c.initClass()};
shadow$provide[103]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});var u=y(102);Object.keys(u).forEach(function(q){"default"!==q&&"__esModule"!==q&&(q in p&&p[q]===u[q]||Object.defineProperty(p,q,{enumerable:!0,get:function(){return u[q]}}))})};
shadow$provide[104]=function(D,y,Q,p){function u(c,f,e){const g=[],k=c<f;for(f=e?k?f+1:f-1:f;k?c<f:c>f;k?c++:c--)g.push(c);return g}Object.defineProperty(p,"__esModule",{value:!0});p.getLerpThunk=p.getLerpEmitter=p.getStreamer=p.getThunk=p.makeEmitter=p.repeatCall=p.getDimensions=p.getSizes=void 0;const q=function(c){const f=[];for(;"string"!==typeof c&&null!=(null!=c?c.length:void 0);)f.push(c.length),c=c[0];return f};p.getSizes=q;p.getDimensions=function(c,f){let e;null==f&&(f={});const {items:g,
channels:k,width:l,height:r,depth:v}=f;f={};if(!c||!c.length)return{items:g,channels:k,width:null!=l?l:0,height:null!=r?r:0,depth:null!=v?v:0};c=q(c);var w=c.length;f.channels=1!==k&&1<c.length?c.pop():k;f.items=1!==g&&1<c.length?c.pop():g;f.width=1!==l&&1<c.length?c.pop():l;f.height=1!==r&&1<c.length?c.pop():r;f.depth=1!==v&&1<c.length?c.pop():v;1===k&&w++;1===g&&1<w&&w++;1===l&&2<w&&w++;1===r&&3<w&&w++;c=null!=(e=c.pop())?e:1;1>=w&&(c/=null!=f.channels?f.channels:1);2>=w&&(c/=null!=f.items?f.items:
1);3>=w&&(c/=null!=f.width?f.width:1);4>=w&&(c/=null!=f.height?f.height:1);c=Math.floor(c);null==f.width&&(f.width=c,c=1);null==f.height&&(f.height=c,c=1);null==f.depth&&(f.depth=c);return f};p.repeatCall=function(c,f){switch(f){case 0:return()=>!0;case 1:return()=>c();case 2:return function(){c();return c()};case 3:return function(){c();c();c();return c()};case 4:return function(){c();c();c();return c()};case 6:return function(){c();c();c();c();c();return c()};case 8:return function(){c();c();c();
c();c();return c()}}};p.makeEmitter=function(c,f,e){let g;const k=(()=>{switch(e){case 0:return()=>!0;case 1:return r=>r(c());case 2:return r=>r(c(),c());case 3:return r=>r(c(),c(),c());case 4:return r=>r(c(),c(),c(),c());case 6:return r=>r(c(),c(),c(),c(),c(),c());case 8:return r=>r(c(),c(),c(),c(),c(),c(),c(),c())}})();let l=null;for(;0<f;){const r=Math.min(f,8);g=(()=>{switch(r){case 1:return v=>k(v);case 2:return function(v){k(v);return k(v)};case 3:return function(v){k(v);k(v);return k(v)};case 4:return function(v){k(v);
k(v);k(v);return k(v)};case 5:return function(v){k(v);k(v);k(v);k(v);return k(v)};case 6:return function(v){k(v);k(v);k(v);k(v);k(v);return k(v)};case 7:return function(v){k(v);k(v);k(v);k(v);k(v);k(v);return k(v)};case 8:return function(v){k(v);k(v);k(v);k(v);k(v);k(v);k(v);return k(v)}}})();l=null!=l?((v,w)=>function(z){v(z);return w(z)})(g,l):g;f-=r}g=null!=l?l:()=>!0;g.reset=c.reset;g.rebind=c.rebind;return g};const m=function(c){let f,e,g,k,l,r=q(c);const v=r.length;let w=r.pop(),z=r.pop(),A=
r.pop();const H=r.pop();let F,L,N,R,J;switch(v){case 0:f=()=>0;f.reset=function(){};break;case 1:F=0;f=()=>c[F++];f.reset=()=>F=0;break;case 2:F=e=0;L=null!=c[e]?c[e]:[];f=function(){const Y=L[F++];F===w&&(F=0,e++,L=null!=c[e]?c[e]:[]);return Y};f.reset=function(){F=e=0;L=null!=c[e]?c[e]:[]};break;case 3:F=e=g=0;N=null!=c[g]?c[g]:[];L=null!=N[e]?N[e]:[];f=function(){const Y=L[F++];F===w&&(F=0,e++,e===z&&(e=0,g++,N=null!=c[g]?c[g]:[]),L=null!=N[e]?N[e]:[]);return Y};f.reset=function(){F=e=g=0;N=null!=
c[g]?c[g]:[];L=null!=N[e]?N[e]:[]};break;case 4:F=e=g=k=0;R=null!=c[k]?c[k]:[];N=null!=R[g]?R[g]:[];L=null!=N[e]?N[e]:[];f=function(){const Y=L[F++];F===w&&(F=0,e++,e===z&&(e=0,g++,g===A&&(g=0,k++,R=null!=c[k]?c[k]:[]),N=null!=R[g]?R[g]:[]),L=null!=N[e]?N[e]:[]);return Y};f.reset=function(){F=e=g=k=0;R=null!=c[k]?c[k]:[];N=null!=R[g]?R[g]:[];L=null!=N[e]?N[e]:[]};break;case 5:F=e=g=k=l=0,J=null!=c[l]?c[l]:[],R=null!=J[k]?J[k]:[],N=null!=R[g]?R[g]:[],L=null!=N[e]?N[e]:[],f=function(){const Y=L[F++];
F===w&&(F=0,e++,e===z&&(e=0,g++,g===A&&(g=0,k++,k===H&&(k=0,l++,J=null!=c[l]?c[l]:[]),R=null!=J[k]?J[k]:[]),N=null!=R[g]?R[g]:[]),L=null!=N[e]?N[e]:[]);return Y},f.reset=function(){F=e=g=k=l=0;J=null!=c[l]?c[l]:[];R=null!=J[k]?J[k]:[];N=null!=R[g]?R[g]:[];L=null!=N[e]?N[e]:[]}}f.rebind=function(Y){c=Y;r=q(c);r.length&&(w=r.pop());r.length&&(z=r.pop());r.length&&(A=r.pop());if(r.length)return r.pop()};return f};p.getThunk=m;p.getStreamer=function(c,f,e,g){let k,l,r=k=l=0;const v=function(){r=f*e*g;
return k=l=0},w=(()=>{switch(e){case 1:return function(H){k+=H;l+=H};case 2:return function(H){k+=2*H;l+=H};case 3:return function(H){k+=3*H;l+=H};case 4:return function(H){k+=4*H;l+=H}}})(),z=(()=>{switch(e){case 1:return function(H){H(c[k++]);++l};case 2:return function(H){H(c[k++],c[k++]);++l};case 3:return function(H){H(c[k++],c[k++],c[k++]);++l};case 4:return function(H){H(c[k++],c[k++],c[k++],c[k++]);++l}}})(),A=(()=>{switch(e){case 1:return function(H){c[k++]=H;++l};case 2:return function(H,
F){c[k++]=H;c[k++]=F;++l};case 3:return function(H,F,L){c[k++]=H;c[k++]=F;c[k++]=L;++l};case 4:return function(H,F,L,N){c[k++]=H;c[k++]=F;c[k++]=L;c[k++]=N;++l}}})();z.reset=v;A.reset=v;v();return{emit:A,consume:z,skip:w,count:()=>l,done:()=>0>=r-k,reset:v}};p.getLerpEmitter=function(c,f){let e,g,k,l;const r=new Float32Array(4096);let v=e=.5,w=g=k=l=0;const z=function(F,L,N,R){k++;r[w++]=F*v;r[w++]=L*v;r[w++]=N*v;return r[w++]=R*v},A=function(F,L,N,R){l++;r[g++]+=F*e;r[g++]+=L*e;r[g++]+=N*e;return r[g++]+=
R*e};var H=Math.max(c.length,f.length);H=3>=H?function(F,L,N){w=g=k=l=0;c(z,L,N);f(A,L,N);let R=0;return u(0,Math.min(k,l),!1).map(J=>F(r[R++],r[R++],r[R++],r[R++]))}:5>=H?function(F,L,N,R,J){w=g=k=l=0;c(z,L,N,R,J);f(A,L,N,R,J);let Y=0;return u(0,Math.min(k,l),!1).map(fa=>F(r[Y++],r[Y++],r[Y++],r[Y++]))}:7>=H?function(F,L,N,R,J,Y,fa){w=g=k=l=0;c(z,L,N,R,J,Y,fa);f(A,L,N,R,J,Y,fa);L=Math.min(k,l);N=0;J=[];fa=0;for(R=0<=L;R?fa<L:fa>L;R?fa++:fa--)J.push(F(r[N++],r[N++],r[N++],r[N++]));return J}:9>=H?
function(F,L,N,R,J,Y,fa,Z,da){w=g=k=l=0;c(z,L,N,R,J,Y,fa,Z,da);f(A,L,N,R,J,Y,fa,Z,da);L=Math.min(k,l);da=0;R=[];Z=0;for(N=0<=L;N?Z<L:Z>L;N?Z++:Z--)R.push(F(r[da++],r[da++],r[da++],r[da++]));return R}:function(F,L,N,R,J,Y,fa,Z,da,la,W){w=g=0;c(z,L,N,R,J,Y,fa,Z,da,la,W);f(A,L,N,R,J,Y,fa,Z,da,la,W);L=Math.min(k,l);da=0;R=[];Z=0;for(N=0<=L;N?Z<L:Z>L;N?Z++:Z--)R.push(F(r[da++],r[da++],r[da++],r[da++]));return R};H.lerp=function(F){let L;return[v,e]=Array.from(L=[1-F,F]),L};return H};p.getLerpThunk=function(c,
f){const e=q(c).reduce((w,z)=>w*z),g=q(f).reduce((w,z)=>w*z),k=Math.min(e,g),l=m(c),r=m(f),v=new Float32Array(k);v.lerp=function(w){l.reset();r.reset();let z=0;const A=[];for(;z<k;){const H=l(),F=r();A.push(v[z++]=H+(F-H)*w)}return A};return v}};
shadow$provide[105]=function(D,y,Q,p){function u(l,r,v){const w=[],z=l<r;for(r=v?z?r+1:r-1:r;z?l<r:l>r;z?l++:l--)w.push(l);return w}Object.defineProperty(p,"__esModule",{value:!0});p.constant=p.identity=p.invertSwizzleVec4=p.swizzleVec4=p.injectVec4=p.truncateVec=p.extendVec=p.binaryOperator=p.sample2DArray=p.mapByte2FloatOffset=p.toType=void 0;const q=["x","y","z","w"],m={0:-1,x:0,y:1,z:2,w:3},c=function(l){l===""+l&&(l=l.split(""));l===+l&&(l=[l]);return l},f=function(l){l===+l&&(l="vec"+l);"vec1"===
l&&(l="float");return l};p.toType=f;const e=function(l){l=""+l;if(0>l.indexOf("."))return l+".0"};p.mapByte2FloatOffset=function(l){null==l&&(l=4);l=e(l);return`\
vec4 float2ByteIndex(vec4 xyzw, out float channelIndex) {
  float relative = xyzw.w / ${l};
  float w = floor(relative);
  channelIndex = (relative - w) * ${l};
  return vec4(xyzw.xyz, w);
}\
`};p.sample2DArray=function(l){const r=function(w,z){if(w===z)w=`\
return texture2D(dataTextures[${w}], uv);\
`;else{const A=Math.ceil(w+(z-w)/2);w=`\
if (z < ${A-.5}) {
  ${r(w,A-1)}
}
else {
  ${r(A,z)}
}\
`}return w.replace(/\n/g,"\n  ")},v=r(0,l-1);return`\
uniform sampler2D dataTextures[${l}];

vec4 sample2DArray(vec2 uv, float z) {
  ${v}
}\
`};p.binaryOperator=function(l,r,v){l=f(l);return null!=v?`\
${l} binaryOperator(${l} a) {
  return a ${r} ${v};
}\
`:`\
${l} binaryOperator(${l} a, ${l} b) {
  return a ${r} b;
}\
`};const g=function(l,r,v){null==v&&(v=0);if(l>r)return k(l,r);var w=r-l;l=f(l);r=f(r);v=e(v);w=u(0,w,!0).map(function(z){return z?v:"v"}).join(",");return`\
${r} extendVec(${l} v) { return ${r}(${w}); }\
`};p.extendVec=g;const k=function(l,r){if(l<r)return g(l,r);const v="."+"xyzw".substr(0,r);l=f(l);r=f(r);return`\
${r} truncateVec(${l} v) { return v${v}; }\
`};p.truncateVec=k;p.injectVec4=function(l){var r=["0.0","0.0","0.0","0.0"];l=c(l);l=l.map(function(v){return v===""+v?m[v]:v});for(let v=0;v<l.length;v++)r[l[v]]=["a","b","c","d"][v];r=r.slice(0,4).join(", ");return`\
vec4 inject(${["float a","float b","float c","float d"].slice(0,l.length)}) {
  return vec4(${r});
}\
`};p.swizzleVec4=function(l,r=null){const v=["0.0","xyzw.x","xyzw.y","xyzw.z","xyzw.w"];null==r&&(r=l.length);l=c(l);for(l=l.map(function(w){Array.from([0,1,2,3,4]).includes(+w)&&(w=+w);w===""+w&&(w=m[w]+1);return v[w]});l.length<r;)l.push("0.0");l=l.join(", ");return`\
vec${r} swizzle(vec4 xyzw) {
  return vec${r}(${l});
}\
`.replace(/vec1/g,"float")};p.invertSwizzleVec4=function(l){const r=["0.0","0.0","0.0","0.0"];l=c(l);l=l.map(function(v){return v===+v?q[v-1]:v});for(let v=0;v<l.length;v++)r[m[l[v]]]=`xyzw.${q[v]}`;return`\
vec4 invertSwizzle(vec4 xyzw) {
  return vec4(${r.join(", ")});
}\
`};p.identity=function(l){let r=[].slice.call(arguments);return 1<r.length?(r=r.map((v,w)=>["inout",v,String.fromCharCode(97+w)].join(" ")),r=r.join(", "),`\
void identity(${r}) { }\
`):`\
${l} identity(${l} x) {
  return x;
}\
`};p.constant=(l,r)=>`\
${l} constant() {
return ${r};
}\
`};
shadow$provide[106]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.Source=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(105));D=y(94);class m extends D.Primitive{static initClass(){this.traits=["node","source","index"]}made(){return this.trigger({type:"source.rebuild"})}indexShader(c){return c.pipe(q.identity("vec4"))}sourceShader(c){return c.pipe(q.identity("vec4"))}getDimensions(){return{items:1,width:1,height:1,depth:1}}getActiveDimensions(){return this.getDimensions()}getIndexDimensions(){return this.getActiveDimensions()}getFutureDimensions(){return this.getActiveDimensions()}}
p.Source=m;m.initClass()};
shadow$provide[107]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.Data=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(104));D=y(106);class m extends D.Source{static initClass(){this.traits="node data source index entity active".split(" ")}init(){return this.dataSizes=this.dataEmitter=null}emitter(c,f){const {data:e,bind:g,expr:k}=this.props;if(null!=e){var l=this.dataSizes;var r=q.getSizes(e);l&&l.length===r.length||(l=q.getThunk(e),this.dataEmitter=this.callback(q.makeEmitter(l,
f,c)),this.dataSizes=r);c=this.dataEmitter}else null!=r?(r=this._inherit("resolve"),c=this.callback(r.callback(g))):c=null!=k?this.callback(k):this.callback(this.passthrough);return c}callback(c){return null!=c?c:function(){}}update(){}make(){this._helpers.active.make();this.first=!0;return this._listen("root","root.update",()=>{(this.isActive||this.first)&&this.update();return this.first=!1})}unmake(){this._helpers.active.unmake();return this.dataSizes=this.dataEmitter=null}}p.Data=m;m.initClass()};
shadow$provide[108]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Buffer=void 0;D=y(107);class u extends D.Data{static initClass(){this.traits="node buffer active data source index texture".split(" ")}init(){this.bufferStep=this.bufferClock=this.bufferDelta=this.bufferTime=this.bufferFrames=this.bufferSlack=0;super.init()}make(){super.make();this.clockParent=this._inherit("clock");this.latchParent=this._inherit("latch")}unmake(){return super.unmake()}rawBuffer(){return this.buffer}emitter(){const {channels:q,
items:m}=this.props;return super.emitter(q,m)}change(q,m,c){if(q["buffer.fps"]||c)return{fps:q}=this.props,this.bufferSlack=q?.5/q:0}syncBuffer(q){let m,c;if(this.buffer){var {live:f,fps:e,hurry:g,limit:k,realtime:l,observe:r}=this.props,v=this.buffer.getFilled();if(!v||f)if(!this.latchParent||this.latchParent.isDirty){var w=this.clockParent.getTime();if(null!=e){const z=this.bufferSlack,A=w.step/w.delta;m=l?w.delta:w.step;const H=1/e;c=l&&r?A*H:H;Math.abs(w.time-this.bufferTime)>w.step*k&&(this.bufferTime=
w.time,this.bufferClock=w.clock);this.bufferSlack=Math.min(k/e,z+m);this.bufferDelta=m;this.bufferStep=c;let F=Math.min(g,Math.floor(z*e));v||(F=Math.max(1,F));let L=!1;const N=()=>L=!0;return(()=>{const R=[];for(let J=0,Y=F,fa=0<=Y;fa?J<Y:J>Y;fa?J++:J--){this.bufferTime+=m;this.bufferClock+=c;if(L)break;q(N,this.bufferFrames++,J,F);R.push(this.bufferSlack-=H)}return R})()}this.bufferTime=w.time;this.bufferDelta=w.delta;this.bufferClock=w.clock;this.bufferStep=w.step;return q(function(){},this.bufferFrames++,
0,1)}}}alignShader(q,m){const {minFilter:c,magFilter:f,aligned:e}=this.props;q=1<q.items&&1<q.width||1<q.height&&1<q.depth;if(!e&&q)return c===this.node.attributes["texture.minFilter"].enum.nearest&&f===this.node.attributes["texture.magFilter"].enum.nearest||console.warn(`${this.node.toString()} - Cannot use linear min/magFilter with 3D/4D sampling`),m.pipe("map.xyzw.align")}}p.Buffer=u;u.initClass()};
shadow$provide[109]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.Array_=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(104));D=y(108);class m extends D.Buffer{static initClass(){this.traits="node buffer active data source index array texture raw".split(" ")}init(){this.buffer=this.spec=null;this.space={width:0,history:0};this.used={width:0};this.storage="arrayBuffer";this.passthrough=(c,f)=>c(f,0,0,0);return super.init()}sourceShader(c){const f=this.getDimensions();this.alignShader(f,
c);return this.buffer.shader(c)}getDimensions(){return{items:this.items,width:this.space.width,height:this.space.history,depth:1}}getActiveDimensions(){return{items:this.items,width:this.used.width,height:this.buffer.getFilled(),depth:1}}getFutureDimensions(){return{items:this.items,width:this.used.width,height:this.space.history,depth:1}}getRawDimensions(){return{items:this.items,width:this.space.width,height:1,depth:1}}make(){super.make();const c=null!=this.minFilter?this.minFilter:this.props.minFilter,
f=null!=this.magFilter?this.magFilter:this.props.magFilter,e=null!=this.type?this.type:this.props.type;var {width:g}=this.props;const {history:k}=this.props,l=this.props.bufferWidth,{channels:r}=this.props,{items:v}=this.props;g=this.spec={channels:r,items:v,width:g};this.items=g.items;this.channels=g.channels;var {data:w}=this.props;g=q.getDimensions(w,g);({space:w}=this);w.width=Math.max(l,g.width||1);w.history=k;return this.buffer=this._renderables.make(this.storage,{width:w.width,history:w.history,
channels:r,items:v,minFilter:c,magFilter:f,type:e})}unmake(){super.unmake();if(this.buffer)return this.buffer.dispose(),this.buffer=this.spec=null}change(c,f,e){if(f.texture||c["history.history"]||c["buffer.channels"]||c["buffer.items"]||c["array.bufferWidth"])return this.rebuild();if(this.buffer){if(c["array.width"]){const {width:g,bufferWidth:k}=this.props;this.spec.width=g;if(g>k)return this.rebuild()}if(c["data.map"]||c["data.data"]||c["data.resolve"]||c["data.expr"]||e)return this.buffer.setCallback(this.emitter())}}callback(c){return 2>=
c.length?c:(f,e)=>c(f,e,this.bufferClock,this.bufferStep)}update(){if(this.buffer){var {data:c}=this.props,{width:f}=this.props,{space:e,used:g}=this,k=g.width,l=this.buffer.getFilled();this.syncBuffer(r=>{if(null!=c){const v=q.getDimensions(c,this.spec);if(v.width>e.width)return r(),this.rebuild();g.width=v.width;this.buffer.setActive(g.width);"function"===typeof this.buffer.callback.rebind&&this.buffer.callback.rebind(c);return this.buffer.update()}f=this.spec.width||1;this.buffer.setActive(f);
f=this.buffer.update();return g.width=f});if(g.width!==k||l!==this.buffer.getFilled())return this.trigger({type:"source.resize"})}}}p.Array_=m;m.initClass()};
shadow$provide[110]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Interval=void 0;D=y(109);class u extends D.Array_{static initClass(){this.traits="node buffer active data source index texture array span interval sampler raw".split(" ")}updateSpan(){var q=this.props.axis;({width:f}=this.props);const {centered:m}=this.props,c=this.props.padding;q=this._helpers.span.get("",q);f+=2*c;this.a=q.x;q=q.y-q.x;if(m){var f=1/Math.max(1,f);this.a+=q*f/2}else f=1/Math.max(1,f-1);this.b=
q*f;return this.a+=c*this.b}callback(q){this.updateSpan();if(this.last===q)return this._callback;this.last=q;return 3>=q.length?this._callback=(m,c)=>q(m,this.a+this.b*c,c):this._callback=(m,c)=>q(m,this.a+this.b*c,c,this.bufferClock,this.bufferStep)}make(){super.make();this._helpers.span.make();return this._listen(this,"span.range",this.updateSpan)}unmake(){super.unmake();return this._helpers.span.unmake()}change(q,m,c){super.change(q,m,c);m.span&&this.updateSpan()}}p.Interval=u;u.initClass()};
shadow$provide[111]=function(D,y,Q,p){Q.exports=function(){this.__data__=[];this.size=0}};
shadow$provide[112]=function(D,y,Q,p){Q.exports=function(u,q){return u===q||u!==u&&q!==q}};
shadow$provide[113]=function(D,y,Q,p){var u=y(112);Q.exports=function(q,m){for(var c=q.length;c--;)if(u(q[c][0],m))return c;return-1}};
shadow$provide[114]=function(D,y,Q,p){var u=y(113),q=Array.prototype.splice;Q.exports=function(m){var c=this.__data__;m=u(c,m);if(0>m)return!1;m==c.length-1?c.pop():q.call(c,m,1);--this.size;return!0}};
shadow$provide[115]=function(D,y,Q,p){var u=y(113);Q.exports=function(q){var m=this.__data__;q=u(m,q);return 0>q?void 0:m[q][1]}};
shadow$provide[116]=function(D,y,Q,p){var u=y(113);Q.exports=function(q){return-1<u(this.__data__,q)}};
shadow$provide[117]=function(D,y,Q,p){var u=y(113);Q.exports=function(q,m){var c=this.__data__,f=u(c,q);0>f?(++this.size,c.push([q,m])):c[f][1]=m;return this}};
shadow$provide[118]=function(D,y,Q,p){function u(c){var f=-1,e=null==c?0:c.length;for(this.clear();++f<e;){var g=c[f];this.set(g[0],g[1])}}D=y(111);p=y(114);var q=y(115),m=y(116);y=y(117);u.prototype.clear=D;u.prototype["delete"]=p;u.prototype.get=q;u.prototype.has=m;u.prototype.set=y;Q.exports=u};
shadow$provide[119]=function(D,y,Q,p){var u=y(118);Q.exports=function(){this.__data__=new u;this.size=0}};
shadow$provide[120]=function(D,y,Q,p){Q.exports=function(u){var q=this.__data__;u=q["delete"](u);this.size=q.size;return u}};
shadow$provide[121]=function(D,y,Q,p){Q.exports=function(u){return this.__data__.get(u)}};
shadow$provide[122]=function(D,y,Q,p){Q.exports=function(u){return this.__data__.has(u)}};
shadow$provide[123]=function(D,y,Q,p){Q.exports="object"==typeof D&&D&&D.Object===Object&&D};
shadow$provide[124]=function(D,y,Q,p){D=y(123);y="object"==typeof self&&self&&self.Object===Object&&self;D=D||y||Function("return this")();Q.exports=D};
shadow$provide[125]=function(D,y,Q,p){D=y(124).Symbol;Q.exports=D};
shadow$provide[126]=function(D,y,Q,p){D=y(125);y=Object.prototype;var u=y.hasOwnProperty,q=y.toString,m=D?D.toStringTag:void 0;Q.exports=function(c){var f=u.call(c,m),e=c[m];try{c[m]=void 0;var g=!0}catch(l){}var k=q.call(c);g&&(f?c[m]=e:delete c[m]);return k}};
shadow$provide[127]=function(D,y,Q,p){var u=Object.prototype.toString;Q.exports=function(q){return u.call(q)}};
shadow$provide[128]=function(D,y,Q,p){D=y(125);var u=y(126),q=y(127),m=D?D.toStringTag:void 0;Q.exports=function(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":m&&m in Object(c)?u(c):q(c)}};
shadow$provide[129]=function(D,y,Q,p){Q.exports=function(u){var q=typeof u;return null!=u&&("object"==q||"function"==q)}};
shadow$provide[130]=function(D,y,Q,p){var u=y(128),q=y(129);Q.exports=function(m){if(!q(m))return!1;m=u(m);return"[object Function]"==m||"[object GeneratorFunction]"==m||"[object AsyncFunction]"==m||"[object Proxy]"==m}};
shadow$provide[131]=function(D,y,Q,p){D=y(124)["__core-js_shared__"];Q.exports=D};
shadow$provide[132]=function(D,y,Q,p){var u=y(131),q=function(){var m=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||"");return m?"Symbol(src)_1."+m:""}();Q.exports=function(m){return!!q&&q in m}};
shadow$provide[133]=function(D,y,Q,p){var u=Function.prototype.toString;Q.exports=function(q){if(null!=q){try{return u.call(q)}catch(m){}return q+""}return""}};
shadow$provide[134]=function(D,y,Q,p){var u=y(130),q=y(132),m=y(129),c=y(133),f=/^\[object .+?Constructor\]$/,e=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$\x26").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");Q.exports=function(g){return!m(g)||q(g)?!1:(u(g)?e:f).test(c(g))}};
shadow$provide[135]=function(D,y,Q,p){Q.exports=function(u,q){return null==u?void 0:u[q]}};
shadow$provide[136]=function(D,y,Q,p){var u=y(134),q=y(135);Q.exports=function(m,c){m=q(m,c);return u(m)?m:void 0}};
shadow$provide[137]=function(D,y,Q,p){D=y(136);y=y(124);y=D(y,"Map");Q.exports=y};
shadow$provide[138]=function(D,y,Q,p){D=y(136)(Object,"create");Q.exports=D};
shadow$provide[139]=function(D,y,Q,p){var u=y(138);Q.exports=function(){this.__data__=u?u(null):{};this.size=0}};
shadow$provide[140]=function(D,y,Q,p){Q.exports=function(u){u=this.has(u)&&delete this.__data__[u];this.size-=u?1:0;return u}};
shadow$provide[141]=function(D,y,Q,p){var u=y(138),q=Object.prototype.hasOwnProperty;Q.exports=function(m){var c=this.__data__;return u?(m=c[m],"__lodash_hash_undefined__"===m?void 0:m):q.call(c,m)?c[m]:void 0}};
shadow$provide[142]=function(D,y,Q,p){var u=y(138),q=Object.prototype.hasOwnProperty;Q.exports=function(m){var c=this.__data__;return u?void 0!==c[m]:q.call(c,m)}};
shadow$provide[143]=function(D,y,Q,p){var u=y(138);Q.exports=function(q,m){var c=this.__data__;this.size+=this.has(q)?0:1;c[q]=u&&void 0===m?"__lodash_hash_undefined__":m;return this}};
shadow$provide[144]=function(D,y,Q,p){function u(c){var f=-1,e=null==c?0:c.length;for(this.clear();++f<e;){var g=c[f];this.set(g[0],g[1])}}D=y(139);p=y(140);var q=y(141),m=y(142);y=y(143);u.prototype.clear=D;u.prototype["delete"]=p;u.prototype.get=q;u.prototype.has=m;u.prototype.set=y;Q.exports=u};
shadow$provide[145]=function(D,y,Q,p){var u=y(144),q=y(118),m=y(137);Q.exports=function(){this.size=0;this.__data__={hash:new u,map:new (m||q),string:new u}}};
shadow$provide[146]=function(D,y,Q,p){Q.exports=function(u){var q=typeof u;return"string"==q||"number"==q||"symbol"==q||"boolean"==q?"__proto__"!==u:null===u}};
shadow$provide[147]=function(D,y,Q,p){var u=y(146);Q.exports=function(q,m){q=q.__data__;return u(m)?q["string"==typeof m?"string":"hash"]:q.map}};
shadow$provide[148]=function(D,y,Q,p){var u=y(147);Q.exports=function(q){q=u(this,q)["delete"](q);this.size-=q?1:0;return q}};
shadow$provide[149]=function(D,y,Q,p){var u=y(147);Q.exports=function(q){return u(this,q).get(q)}};
shadow$provide[150]=function(D,y,Q,p){var u=y(147);Q.exports=function(q){return u(this,q).has(q)}};
shadow$provide[151]=function(D,y,Q,p){var u=y(147);Q.exports=function(q,m){var c=u(this,q),f=c.size;c.set(q,m);this.size+=c.size==f?0:1;return this}};
shadow$provide[152]=function(D,y,Q,p){function u(c){var f=-1,e=null==c?0:c.length;for(this.clear();++f<e;){var g=c[f];this.set(g[0],g[1])}}D=y(145);p=y(148);var q=y(149),m=y(150);y=y(151);u.prototype.clear=D;u.prototype["delete"]=p;u.prototype.get=q;u.prototype.has=m;u.prototype.set=y;Q.exports=u};
shadow$provide[153]=function(D,y,Q,p){var u=y(118),q=y(137),m=y(152);Q.exports=function(c,f){var e=this.__data__;if(e instanceof u){var g=e.__data__;if(!q||199>g.length)return g.push([c,f]),this.size=++e.size,this;e=this.__data__=new m(g)}e.set(c,f);this.size=e.size;return this}};
shadow$provide[154]=function(D,y,Q,p){function u(f){this.size=(this.__data__=new q(f)).size}var q=y(118);D=y(119);p=y(120);var m=y(121),c=y(122);y=y(153);u.prototype.clear=D;u.prototype["delete"]=p;u.prototype.get=m;u.prototype.has=c;u.prototype.set=y;Q.exports=u};
shadow$provide[155]=function(D,y,Q,p){Q.exports=function(u,q){for(var m=-1,c=null==u?0:u.length;++m<c&&!1!==q(u[m],m,u););return u}};
shadow$provide[156]=function(D,y,Q,p){D=y(136);a:{try{var u=D(Object,"defineProperty");u({},"",{});var q=u;break a}catch(m){}q=void 0}Q.exports=q};
shadow$provide[157]=function(D,y,Q,p){var u=y(156);Q.exports=function(q,m,c){"__proto__"==m&&u?u(q,m,{configurable:!0,enumerable:!0,value:c,writable:!0}):q[m]=c}};
shadow$provide[158]=function(D,y,Q,p){var u=y(157),q=y(112),m=Object.prototype.hasOwnProperty;Q.exports=function(c,f,e){var g=c[f];m.call(c,f)&&q(g,e)&&(void 0!==e||f in c)||u(c,f,e)}};
shadow$provide[159]=function(D,y,Q,p){var u=y(158),q=y(157);Q.exports=function(m,c,f,e){var g=!f;f||(f={});for(var k=-1,l=c.length;++k<l;){var r=c[k],v=e?e(f[r],m[r],r,f,m):void 0;void 0===v&&(v=m[r]);g?q(f,r,v):u(f,r,v)}return f}};
shadow$provide[160]=function(D,y,Q,p){Q.exports=function(u,q){for(var m=-1,c=Array(u);++m<u;)c[m]=q(m);return c}};
shadow$provide[161]=function(D,y,Q,p){Q.exports=function(u){return null!=u&&"object"==typeof u}};
shadow$provide[162]=function(D,y,Q,p){var u=y(128),q=y(161);Q.exports=function(m){return q(m)&&"[object Arguments]"==u(m)}};
shadow$provide[163]=function(D,y,Q,p){D=y(162);var u=y(161);y=Object.prototype;var q=y.hasOwnProperty,m=y.propertyIsEnumerable;y=D(function(){return arguments}())?D:function(c){return u(c)&&q.call(c,"callee")&&!m.call(c,"callee")};Q.exports=y};
shadow$provide[164]=function(D,y,Q,p){Q.exports=Array.isArray};
shadow$provide[165]=function(D,y,Q,p){Q.exports=function(){return!1}};
shadow$provide[166]=function(D,y,Q,p){D=y(124);y=y(165);var u=(p="object"==typeof p&&p&&!p.nodeType&&p)&&"object"==typeof Q&&Q&&!Q.nodeType&&Q;D=u&&u.exports===p?D.Buffer:void 0;Q.exports=(D?D.isBuffer:void 0)||y};
shadow$provide[167]=function(D,y,Q,p){var u=/^(?:0|[1-9]\d*)$/;Q.exports=function(q,m){var c=typeof q;m=null==m?9007199254740991:m;return!!m&&("number"==c||"symbol"!=c&&u.test(q))&&-1<q&&0==q%1&&q<m}};
shadow$provide[168]=function(D,y,Q,p){Q.exports=function(u){return"number"==typeof u&&-1<u&&0==u%1&&9007199254740991>=u}};
shadow$provide[169]=function(D,y,Q,p){var u=y(128),q=y(168),m=y(161),c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0;c["[object Arguments]"]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c["[object Function]"]=c["[object Map]"]=
c["[object Number]"]=c["[object Object]"]=c["[object RegExp]"]=c["[object Set]"]=c["[object String]"]=c["[object WeakMap]"]=!1;Q.exports=function(f){return m(f)&&q(f.length)&&!!c[u(f)]}};
shadow$provide[170]=function(D,y,Q,p){Q.exports=function(u){return function(q){return u(q)}}};
shadow$provide[171]=function(D,y,Q,p){D=y(123);D=(p=(y="object"==typeof p&&p&&!p.nodeType&&p)&&"object"==typeof Q&&Q&&!Q.nodeType&&Q)&&p.exports===y&&D.process;a:{try{var u=p&&p.require&&p.require("util").types;if(u){var q=u;break a}q=D&&D.binding&&D.binding("util");break a}catch(m){}q=void 0}Q.exports=q};
shadow$provide[172]=function(D,y,Q,p){D=y(169);p=y(170);y=(y=(y=y(171))&&y.isTypedArray)?p(y):D;Q.exports=y};
shadow$provide[173]=function(D,y,Q,p){var u=y(160),q=y(163),m=y(164),c=y(166),f=y(167),e=y(172),g=Object.prototype.hasOwnProperty;Q.exports=function(k,l){var r=m(k),v=!r&&q(k),w=!r&&!v&&c(k),z=!r&&!v&&!w&&e(k);v=(r=r||v||w||z)?u(k.length,String):[];var A=v.length,H;for(H in k)!l&&!g.call(k,H)||r&&("length"==H||w&&("offset"==H||"parent"==H)||z&&("buffer"==H||"byteLength"==H||"byteOffset"==H)||f(H,A))||v.push(H);return v}};
shadow$provide[174]=function(D,y,Q,p){var u=Object.prototype;Q.exports=function(q){var m=q&&q.constructor;return q===("function"==typeof m&&m.prototype||u)}};
shadow$provide[175]=function(D,y,Q,p){Q.exports=function(u,q){return function(m){return u(q(m))}}};
shadow$provide[176]=function(D,y,Q,p){D=y(175)(Object.keys,Object);Q.exports=D};
shadow$provide[177]=function(D,y,Q,p){var u=y(174),q=y(176),m=Object.prototype.hasOwnProperty;Q.exports=function(c){if(!u(c))return q(c);var f=[],e;for(e in Object(c))m.call(c,e)&&"constructor"!=e&&f.push(e);return f}};
shadow$provide[178]=function(D,y,Q,p){var u=y(130),q=y(168);Q.exports=function(m){return null!=m&&q(m.length)&&!u(m)}};
shadow$provide[179]=function(D,y,Q,p){var u=y(173),q=y(177),m=y(178);Q.exports=function(c){return m(c)?u(c):q(c)}};
shadow$provide[180]=function(D,y,Q,p){var u=y(159),q=y(179);Q.exports=function(m,c){return m&&u(c,q(c),m)}};
shadow$provide[181]=function(D,y,Q,p){Q.exports=function(u){var q=[];if(null!=u)for(var m in Object(u))q.push(m);return q}};
shadow$provide[182]=function(D,y,Q,p){var u=y(129),q=y(174),m=y(181),c=Object.prototype.hasOwnProperty;Q.exports=function(f){if(!u(f))return m(f);var e=q(f),g=[],k;for(k in f)("constructor"!=k||!e&&c.call(f,k))&&g.push(k);return g}};
shadow$provide[183]=function(D,y,Q,p){var u=y(173),q=y(182),m=y(178);Q.exports=function(c){return m(c)?u(c,!0):q(c)}};
shadow$provide[184]=function(D,y,Q,p){var u=y(159),q=y(183);Q.exports=function(m,c){return m&&u(c,q(c),m)}};
shadow$provide[185]=function(D,y,Q,p){D=y(124);var u=(p=(y=(p="object"==typeof p&&p&&!p.nodeType&&p)&&"object"==typeof Q&&Q&&!Q.nodeType&&Q)&&y.exports===p?D.Buffer:void 0)?p.allocUnsafe:void 0;Q.exports=function(q,m){if(m)return q.slice();m=q.length;m=u?u(m):new q.constructor(m);q.copy(m);return m}};
shadow$provide[186]=function(D,y,Q,p){Q.exports=function(u,q){var m=-1,c=u.length;for(q||(q=Array(c));++m<c;)q[m]=u[m];return q}};
shadow$provide[187]=function(D,y,Q,p){Q.exports=function(u,q){for(var m=-1,c=null==u?0:u.length,f=0,e=[];++m<c;){var g=u[m];q(g,m,u)&&(e[f++]=g)}return e}};
shadow$provide[188]=function(D,y,Q,p){Q.exports=function(){return[]}};
shadow$provide[189]=function(D,y,Q,p){var u=y(187);D=y(188);var q=Object.prototype.propertyIsEnumerable,m=Object.getOwnPropertySymbols;Q.exports=m?function(c){if(null==c)return[];c=Object(c);return u(m(c),function(f){return q.call(c,f)})}:D};
shadow$provide[190]=function(D,y,Q,p){var u=y(159),q=y(189);Q.exports=function(m,c){return u(m,q(m),c)}};
shadow$provide[191]=function(D,y,Q,p){Q.exports=function(u,q){for(var m=-1,c=q.length,f=u.length;++m<c;)u[f+m]=q[m];return u}};
shadow$provide[192]=function(D,y,Q,p){D=y(175)(Object.getPrototypeOf,Object);Q.exports=D};
shadow$provide[193]=function(D,y,Q,p){var u=y(191),q=y(192),m=y(189);D=y(188);Q.exports=Object.getOwnPropertySymbols?function(c){for(var f=[];c;)u(f,m(c)),c=q(c);return f}:D};
shadow$provide[194]=function(D,y,Q,p){var u=y(159),q=y(193);Q.exports=function(m,c){return u(m,q(m),c)}};
shadow$provide[195]=function(D,y,Q,p){var u=y(191),q=y(164);Q.exports=function(m,c,f){c=c(m);return q(m)?c:u(c,f(m))}};
shadow$provide[196]=function(D,y,Q,p){var u=y(195),q=y(189),m=y(179);Q.exports=function(c){return u(c,m,q)}};
shadow$provide[197]=function(D,y,Q,p){var u=y(195),q=y(193),m=y(183);Q.exports=function(c){return u(c,m,q)}};
shadow$provide[198]=function(D,y,Q,p){D=y(136);y=y(124);y=D(y,"DataView");Q.exports=y};
shadow$provide[199]=function(D,y,Q,p){D=y(136);y=y(124);y=D(y,"Promise");Q.exports=y};
shadow$provide[200]=function(D,y,Q,p){D=y(136);y=y(124);y=D(y,"Set");Q.exports=y};
shadow$provide[201]=function(D,y,Q,p){D=y(136);y=y(124);y=D(y,"WeakMap");Q.exports=y};
shadow$provide[202]=function(D,y,Q,p){D=y(198);p=y(137);var u=y(199),q=y(200),m=y(201),c=y(128),f=y(133),e=f(D),g=f(p),k=f(u),l=f(q),r=f(m);y=c;if(D&&"[object DataView]"!=y(new D(new ArrayBuffer(1)))||p&&"[object Map]"!=y(new p)||u&&"[object Promise]"!=y(u.resolve())||q&&"[object Set]"!=y(new q)||m&&"[object WeakMap]"!=y(new m))y=function(v){var w=c(v);if(v=(v="[object Object]"==w?v.constructor:void 0)?f(v):"")switch(v){case e:return"[object DataView]";case g:return"[object Map]";case k:return"[object Promise]";
case l:return"[object Set]";case r:return"[object WeakMap]"}return w};Q.exports=y};
shadow$provide[203]=function(D,y,Q,p){var u=Object.prototype.hasOwnProperty;Q.exports=function(q){var m=q.length,c=new q.constructor(m);m&&"string"==typeof q[0]&&u.call(q,"index")&&(c.index=q.index,c.input=q.input);return c}};
shadow$provide[204]=function(D,y,Q,p){D=y(124).Uint8Array;Q.exports=D};
shadow$provide[205]=function(D,y,Q,p){var u=y(204);Q.exports=function(q){var m=new q.constructor(q.byteLength);(new u(m)).set(new u(q));return m}};
shadow$provide[206]=function(D,y,Q,p){var u=y(205);Q.exports=function(q,m){m=m?u(q.buffer):q.buffer;return new q.constructor(m,q.byteOffset,q.byteLength)}};
shadow$provide[207]=function(D,y,Q,p){var u=/\w*$/;Q.exports=function(q){var m=new q.constructor(q.source,u.exec(q));m.lastIndex=q.lastIndex;return m}};
shadow$provide[208]=function(D,y,Q,p){var u=(D=(D=y(125))?D.prototype:void 0)?D.valueOf:void 0;Q.exports=function(q){return u?Object(u.call(q)):{}}};
shadow$provide[209]=function(D,y,Q,p){var u=y(205);Q.exports=function(q,m){m=m?u(q.buffer):q.buffer;return new q.constructor(m,q.byteOffset,q.length)}};
shadow$provide[210]=function(D,y,Q,p){var u=y(205),q=y(206),m=y(207),c=y(208),f=y(209);Q.exports=function(e,g,k){var l=e.constructor;switch(g){case "[object ArrayBuffer]":return u(e);case "[object Boolean]":case "[object Date]":return new l(+e);case "[object DataView]":return q(e,k);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return f(e,
k);case "[object Map]":return new l;case "[object Number]":case "[object String]":return new l(e);case "[object RegExp]":return m(e);case "[object Set]":return new l;case "[object Symbol]":return c(e)}}};
shadow$provide[211]=function(D,y,Q,p){var u=y(129),q=Object.create;D=function(){function m(){}return function(c){if(!u(c))return{};if(q)return q(c);m.prototype=c;c=new m;m.prototype=void 0;return c}}();Q.exports=D};
shadow$provide[212]=function(D,y,Q,p){var u=y(211),q=y(192),m=y(174);Q.exports=function(c){return"function"!=typeof c.constructor||m(c)?{}:u(q(c))}};
shadow$provide[213]=function(D,y,Q,p){var u=y(202),q=y(161);Q.exports=function(m){return q(m)&&"[object Map]"==u(m)}};
shadow$provide[214]=function(D,y,Q,p){D=y(213);p=y(170);y=(y=(y=y(171))&&y.isMap)?p(y):D;Q.exports=y};
shadow$provide[215]=function(D,y,Q,p){var u=y(202),q=y(161);Q.exports=function(m){return q(m)&&"[object Set]"==u(m)}};
shadow$provide[216]=function(D,y,Q,p){D=y(215);p=y(170);y=(y=(y=y(171))&&y.isSet)?p(y):D;Q.exports=y};
shadow$provide[217]=function(D,y,Q,p){function u(la,W,ra,za,O,pa){var Ta,na=W&1,Ra=W&2,Wa=W&4;ra&&(Ta=O?ra(la,za,O,pa):ra(la));if(void 0!==Ta)return Ta;if(!J(la))return la;if(za=L(la)){if(Ta=A(la),!na)return k(la,Ta)}else{var Xa=z(la),Ob="[object Function]"==Xa||"[object GeneratorFunction]"==Xa;if(N(la))return g(la,na);if("[object Object]"==Xa||"[object Arguments]"==Xa||Ob&&!O){if(Ta=Ra||Ob?{}:F(la),!na)return Ra?r(la,e(Ta,la)):l(la,f(Ta,la))}else{if(!da[Xa])return O?la:{};Ta=H(la,Xa,na)}}pa||(pa=
new q);if(O=pa.get(la))return O;pa.set(la,Ta);Y(la)?la.forEach(function(Gb){Ta.add(u(Gb,W,ra,Gb,la,pa))}):R(la)&&la.forEach(function(Gb,ec){Ta.set(ec,u(Gb,W,ra,ec,la,pa))});Ra=Wa?Ra?w:v:Ra?Z:fa;var Db=za?void 0:Ra(la);m(Db||la,function(Gb,ec){Db&&(ec=Gb,Gb=la[ec]);c(Ta,ec,u(Gb,W,ra,ec,la,pa))});return Ta}var q=y(154),m=y(155),c=y(158),f=y(180),e=y(184),g=y(185),k=y(186),l=y(190),r=y(194),v=y(196),w=y(197),z=y(202),A=y(203),H=y(210),F=y(212),L=y(164),N=y(166),R=y(214),J=y(129),Y=y(216),fa=y(179),Z=
y(183),da={};da["[object Arguments]"]=da["[object Array]"]=da["[object ArrayBuffer]"]=da["[object DataView]"]=da["[object Boolean]"]=da["[object Date]"]=da["[object Float32Array]"]=da["[object Float64Array]"]=da["[object Int8Array]"]=da["[object Int16Array]"]=da["[object Int32Array]"]=da["[object Map]"]=da["[object Number]"]=da["[object Object]"]=da["[object RegExp]"]=da["[object Set]"]=da["[object String]"]=da["[object Symbol]"]=da["[object Uint8Array]"]=da["[object Uint8ClampedArray]"]=da["[object Uint16Array]"]=
da["[object Uint32Array]"]=!0;da["[object Error]"]=da["[object Function]"]=da["[object WeakMap]"]=!1;Q.exports=u};
shadow$provide[218]=function(D,y,Q,p){var u=y(217);Q.exports=function(q){return u(q,5)}};
shadow$provide[219]=function(D,y,Q,p){Q.exports=function(u){this.__data__.set(u,"__lodash_hash_undefined__");return this}};
shadow$provide[220]=function(D,y,Q,p){Q.exports=function(u){return this.__data__.has(u)}};
shadow$provide[221]=function(D,y,Q,p){function u(m){var c=-1,f=null==m?0:m.length;for(this.__data__=new q;++c<f;)this.add(m[c])}var q=y(152);D=y(219);y=y(220);u.prototype.add=u.prototype.push=D;u.prototype.has=y;Q.exports=u};
shadow$provide[222]=function(D,y,Q,p){Q.exports=function(u,q){for(var m=-1,c=null==u?0:u.length;++m<c;)if(q(u[m],m,u))return!0;return!1}};
shadow$provide[223]=function(D,y,Q,p){Q.exports=function(u,q){return u.has(q)}};
shadow$provide[224]=function(D,y,Q,p){var u=y(221),q=y(222),m=y(223);Q.exports=function(c,f,e,g,k,l){var r=e&1,v=c.length,w=f.length;if(v!=w&&!(r&&w>v))return!1;w=l.get(c);var z=l.get(f);if(w&&z)return w==f&&z==c;w=-1;z=!0;var A=e&2?new u:void 0;l.set(c,f);for(l.set(f,c);++w<v;){var H=c[w],F=f[w];if(g)var L=r?g(F,H,w,f,c,l):g(H,F,w,c,f,l);if(void 0!==L){if(L)continue;z=!1;break}if(A){if(!q(f,function(N,R){if(!m(A,R)&&(H===N||k(H,N,e,g,l)))return A.push(R)})){z=!1;break}}else if(H!==F&&!k(H,F,e,g,
l)){z=!1;break}}l["delete"](c);l["delete"](f);return z}};
shadow$provide[225]=function(D,y,Q,p){Q.exports=function(u){var q=-1,m=Array(u.size);u.forEach(function(c,f){m[++q]=[f,c]});return m}};
shadow$provide[226]=function(D,y,Q,p){Q.exports=function(u){var q=-1,m=Array(u.size);u.forEach(function(c){m[++q]=c});return m}};
shadow$provide[227]=function(D,y,Q,p){D=y(125);var u=y(204),q=y(112),m=y(224),c=y(225),f=y(226),e=(y=D?D.prototype:void 0)?y.valueOf:void 0;Q.exports=function(g,k,l,r,v,w,z){switch(l){case "[object DataView]":if(g.byteLength!=k.byteLength||g.byteOffset!=k.byteOffset)break;g=g.buffer;k=k.buffer;case "[object ArrayBuffer]":if(g.byteLength!=k.byteLength||!w(new u(g),new u(k)))break;return!0;case "[object Boolean]":case "[object Date]":case "[object Number]":return q(+g,+k);case "[object Error]":return g.name==
k.name&&g.message==k.message;case "[object RegExp]":case "[object String]":return g==k+"";case "[object Map]":var A=c;case "[object Set]":A||(A=f);if(g.size!=k.size&&!(r&1))break;if(l=z.get(g))return l==k;r|=2;z.set(g,k);k=m(A(g),A(k),r,v,w,z);z["delete"](g);return k;case "[object Symbol]":if(e)return e.call(g)==e.call(k)}return!1}};
shadow$provide[228]=function(D,y,Q,p){var u=y(196),q=Object.prototype.hasOwnProperty;Q.exports=function(m,c,f,e,g,k){var l=f&1,r=u(m),v=r.length,w=u(c).length;if(v!=w&&!l)return!1;for(w=v;w--;){var z=r[w];if(!(l?z in c:q.call(c,z)))return!1}var A=k.get(m);z=k.get(c);if(A&&z)return A==c&&z==m;A=!0;k.set(m,c);k.set(c,m);for(var H=l;++w<v;){z=r[w];var F=m[z],L=c[z];if(e)var N=l?e(L,F,z,c,m,k):e(F,L,z,m,c,k);if(void 0===N?F!==L&&!g(F,L,f,e,k):!N){A=!1;break}H||(H="constructor"==z)}A&&!H&&(f=m.constructor,
e=c.constructor,f!=e&&"constructor"in m&&"constructor"in c&&!("function"==typeof f&&f instanceof f&&"function"==typeof e&&e instanceof e)&&(A=!1));k["delete"](m);k["delete"](c);return A}};
shadow$provide[229]=function(D,y,Q,p){var u=y(154),q=y(224),m=y(227),c=y(228),f=y(202),e=y(164),g=y(166),k=y(172),l=Object.prototype.hasOwnProperty;Q.exports=function(r,v,w,z,A,H){var F=e(r),L=e(v),N=F?"[object Array]":f(r),R=L?"[object Array]":f(v);N="[object Arguments]"==N?"[object Object]":N;R="[object Arguments]"==R?"[object Object]":R;var J="[object Object]"==N;L="[object Object]"==R;if((R=N==R)&&g(r)){if(!g(v))return!1;F=!0;J=!1}if(R&&!J)return H||(H=new u),F||k(r)?q(r,v,w,z,A,H):m(r,v,N,w,
z,A,H);if(!(w&1)&&(F=J&&l.call(r,"__wrapped__"),N=L&&l.call(v,"__wrapped__"),F||N))return r=F?r.value():r,v=N?v.value():v,H||(H=new u),A(r,v,w,z,H);if(!R)return!1;H||(H=new u);return c(r,v,w,z,A,H)}};
shadow$provide[230]=function(D,y,Q,p){function u(c,f,e,g,k){return c===f?!0:null==c||null==f||!m(c)&&!m(f)?c!==c&&f!==f:q(c,f,e,g,u,k)}var q=y(229),m=y(161);Q.exports=u};
shadow$provide[231]=function(D,y,Q,p){var u=y(230);Q.exports=function(q,m){return u(q,m)}};
shadow$provide[232]=function(D,y,Q,p){function u(f){return f&&f.__esModule?f:{default:f}}Object.defineProperty(p,"__esModule",{value:!0});p.Latch=void 0;D=y(95);var q=u(y(218)),m=u(y(231));class c extends D.Parent{static initClass(){this.traits=["node","entity","active","latch"]}init(){this.data=void 0;this.isDirty=!0}make(){this._helpers.active.make();this._listen("root","root.update",function(){this.isActive&&this.update()})}unmake(){this._helpers.active.unmake();this.data=void 0}swap(){const {deep:f,
data:e}=this.props;(f?(0,m.default)(e,this.data):e==this.data)||(this.data=f?(0,q.default)(e):e)}update(){this.isDirty=this.swap()}}p.Latch=c;c.initClass()};
shadow$provide[233]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.Matrix=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(104));D=y(108);class m extends D.Buffer{static initClass(){this.traits="node buffer active data source index texture matrix raw".split(" ")}init(){this.buffer=this.spec=null;this.space={width:0,height:0,history:0};this.used={width:0,height:0};this.storage="matrixBuffer";this.passthrough=(c,f,e)=>c(f,e,0,0);return super.init()}sourceShader(c){const f=
this.getDimensions();this.alignShader(f,c);return this.buffer.shader(c)}getDimensions(){return{items:this.items,width:this.space.width,height:this.space.height,depth:this.space.history}}getActiveDimensions(){return{items:this.items,width:this.used.width,height:this.used.height,depth:this.buffer.getFilled()}}getFutureDimensions(){return{items:this.items,width:this.used.width,height:this.used.height,depth:this.space.history}}getRawDimensions(){return{items:this.items,width:this.space.width,height:this.space.height,
depth:1}}make(){super.make();const c=null!=this.minFilter?this.minFilter:this.props.minFilter,f=null!=this.magFilter?this.magFilter:this.props.magFilter,e=null!=this.type?this.type:this.props.type;var {width:g}=this.props,{height:k}=this.props;const {history:l}=this.props,r=this.props.bufferWidth,v=this.props.bufferHeight,{channels:w}=this.props,{items:z}=this.props;g=this.spec={channels:w,items:z,width:g,height:k};this.items=g.items;this.channels=g.channels;({data:k}=this.props);g=q.getDimensions(k,
g);({space:k}=this);k.width=Math.max(r,g.width||1);k.height=Math.max(v,g.height||1);k.history=l;return this.buffer=this._renderables.make(this.storage,{width:k.width,height:k.height,history:k.history,channels:w,items:z,minFilter:c,magFilter:f,type:e})}unmake(){super.unmake();if(this.buffer)return this.buffer.dispose(),this.buffer=this.spec=null}change(c,f,e){if(f.texture||c["matrix.history"]||c["buffer.channels"]||c["buffer.items"]||c["matrix.bufferWidth"]||c["matrix.bufferHeight"])return this.rebuild();
if(this.buffer){if(c["matrix.width"]){const {width:g,bufferWidth:k}=this.props;this.spec.width=g;if(g>k)return this.rebuild()}if(c["matrix.height"]){const {height:g,bufferHeight:k}=this.props;this.spec.height=g;if(g>k)return this.rebuild()}if(c["data.map"]||c["data.data"]||c["data.resolve"]||c["data.expr"]||e)return this.buffer.setCallback(this.emitter())}}callback(c){return 3>=c.length?c:(f,e,g)=>c(f,e,g,this.bufferClock,this.bufferStep)}update(){if(this.buffer){var {data:c}=this.props,{space:f,
used:e}=this,g=e.width,k=e.height,l=this.buffer.getFilled();this.syncBuffer(r=>{if(null!=c){var v=q.getDimensions(c,this.spec);if(v.width>f.width||v.height>f.height)return r(),this.rebuild();e.width=v.width;e.height=v.height;this.buffer.setActive(e.width,e.height);"function"===typeof this.buffer.callback.rebind&&this.buffer.callback.rebind(c);return this.buffer.update()}r=this.spec.width||1;v=this.spec.height||1;this.buffer.setActive(r,v);const w=this.buffer.update();e.width=r;e.height=Math.min(v,
Math.ceil(w/r));1===e.height&&(e.width=Math.min(r,w))});if(e.width!==g||e.height!==k||l!==this.buffer.getFilled())return this.trigger({type:"source.resize"})}}}p.Matrix=m;m.initClass()};
shadow$provide[234]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Area=void 0;D=y(233);class u extends D.Matrix{static initClass(){this.traits="node buffer active data source index matrix texture raw span:x span:y area sampler:x sampler:y".split(" ")}updateSpan(){var q=this.props.axes;({width:k}=this.props);({height:l}=this.props);const {centeredX:m}=this.props,{centeredY:c}=this.props,f=this.props.paddingX,e=this.props.paddingY;var g=this._helpers.span.get("x.",q[0]);q=this._helpers.span.get("y.",
q[1]);this.aX=g.x;this.aY=q.x;g=g.y-g.x;q=q.y-q.x;k+=2*f;l+=2*e;if(m){var k=1/Math.max(1,k);this.aX+=g*k/2}else k=1/Math.max(1,k-1);if(c){var l=1/Math.max(1,l);this.aY+=q*l/2}else l=1/Math.max(1,l-1);this.bX=g*k;this.bY=q*l;this.aX+=f*this.bX;return this.aY+=e*this.bY}callback(q){this.updateSpan();if(this.last===q)return this._callback;this.last=q;return 5>=q.length?this._callback=(m,c,f)=>q(m,this.aX+this.bX*c,this.aY+this.bY*f,c,f):this._callback=(m,c,f)=>q(m,this.aX+this.bX*c,this.aY+this.bY*f,
c,f,this.bufferClock,this.bufferStep)}make(){super.make();this._helpers.span.make();return this._listen(this,"span.range",this.updateSpan)}unmake(){super.unmake();return this._helpers.span.unmake()}change(q,m,c){super.change(q,m,c);(m.x||m.y)&&this.updateSpan()}}p.Area=u;u.initClass()};
shadow$provide[235]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.Voxel=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(104));D=y(108);class m extends D.Buffer{constructor(...c){super(...c);this.update=this.update.bind(this)}static initClass(){this.traits="node buffer active data source index texture voxel raw".split(" ")}init(){this.buffer=this.spec=null;this.space={width:0,height:0,depth:0};this.used={width:0,height:0,depth:0};this.storage="voxelBuffer";this.passthrough=
(c,f,e,g)=>c(f,e,g,0);super.init()}sourceShader(c){const f=this.getDimensions();this.alignShader(f,c);return this.buffer.shader(c)}getDimensions(){return{items:this.items,width:this.space.width,height:this.space.height,depth:this.space.depth}}getActiveDimensions(){return{items:this.items,width:this.used.width,height:this.used.height,depth:this.used.depth*this.buffer.getFilled()}}getRawDimensions(){return this.getDimensions()}make(){super.make();const c=null!=this.minFilter?this.minFilter:this.props.minFilter,
f=null!=this.magFilter?this.magFilter:this.props.magFilter,e=null!=this.type?this.type:this.props.type;var {width:g}=this.props,{height:k}=this.props;const {depth:l}=this.props,r=this.props.bufferWidth,v=this.props.bufferHeight,w=this.props.bufferDepth,{channels:z}=this.props,{items:A}=this.props;g=this.spec={channels:z,items:A,width:g,height:k,depth:l};this.items=g.items;this.channels=g.channels;({data:k}=this.props);g=q.getDimensions(k,g);({space:k}=this);k.width=Math.max(r,g.width||1);k.height=
Math.max(v,g.height||1);k.depth=Math.max(w,g.depth||1);return this.buffer=this._renderables.make(this.storage,{width:k.width,height:k.height,depth:k.depth,channels:z,items:A,minFilter:c,magFilter:f,type:e})}unmake(){super.unmake();if(this.buffer)return this.buffer.dispose(),this.buffer=this.spec=null}change(c,f,e){if(f.texture||c["buffer.channels"]||c["buffer.items"]||c["voxel.bufferWidth"]||c["voxel.bufferHeight"]||c["voxel.bufferDepth"])return this.rebuild();if(this.buffer){if(c["voxel.width"]){const {width:g,
bufferWidth:k}=this.props;this.spec.width=g;if(g>k)return this.rebuild()}if(c["voxel.height"]){const {height:g,bufferHeight:k}=this.props;this.spec.height=g;if(g>k)return this.rebuild()}if(c["voxel.depth"]){const {depth:g,bufferDepth:k}=this.props;this.spec.depth=g;if(g>k)return this.rebuild()}if(c["data.map"]||c["data.data"]||c["data.resolve"]||c["data.expr"]||e)return this.buffer.setCallback(this.emitter())}}callback(c){return 4>=c.length?c:(f,e,g,k)=>c(f,e,g,k,this.bufferClock,this.bufferStep)}update(){if(this.buffer){var {data:c}=
this.props,{space:f,used:e}=this,g=e.width,k=e.height,l=e.depth,r=this.buffer.getFilled();this.syncBuffer(v=>{if(null!=c){var w=q.getDimensions(c,this.spec);if(w.width>f.width||w.height>f.height||w.depth>f.depth)return v(),this.rebuild();e.width=w.width;e.height=w.height;e.depth=w.depth;this.buffer.setActive(e.width,e.height,e.depth);"function"===typeof this.buffer.callback.rebind&&this.buffer.callback.rebind(c);return this.buffer.update()}v=this.spec.width||1;w=this.spec.height||1;const z=this.spec.depth||
1;this.buffer.setActive(v,w,z);const A=this.buffer.update();e.width=v;e.height=w;e.depth=Math.min(z,Math.ceil(A/v/w));1===e.depth&&(e.height=Math.min(w,Math.ceil(A/v)),1===e.height&&(e.width=Math.min(v,A)))});if(e.width!==g||e.height!==k||e.depth!==l||r!==this.buffer.getFilled())return this.trigger({type:"source.resize"})}}}p.Voxel=m;m.initClass()};
shadow$provide[236]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Volume=void 0;D=y(235);class u extends D.Voxel{static initClass(){this.traits="node buffer active data source index texture voxel span:x span:y span:z volume sampler:x sampler:y sampler:z raw".split(" ")}updateSpan(){var q=this.props.axes;({width:v}=this.props);({height:w}=this.props);({depth:z}=this.props);const {centeredX:m}=this.props,{centeredY:c}=this.props,{centeredZ:f}=this.props,e=this.props.paddingX,
g=this.props.paddingY,k=this.props.paddingZ;var l=this._helpers.span.get("x.",q[0]),r=this._helpers.span.get("y.",q[1]);q=this._helpers.span.get("z.",q[2]);this.aX=l.x;this.aY=r.x;this.aZ=q.x;l=l.y-l.x;r=r.y-r.x;q=q.y-q.x;v+=2*e;w+=2*g;z+=2*k;if(m){var v=1/Math.max(1,v);this.aX+=l*v/2}else v=1/Math.max(1,v-1);if(c){var w=1/Math.max(1,w);this.aY+=r*w/2}else w=1/Math.max(1,w-1);if(f){var z=1/Math.max(1,z);this.aZ+=q*z/2}else z=1/Math.max(1,z-1);this.bX=l*v;this.bY=r*w;this.bZ=q*z;this.aX+=this.bX*e;
this.aY+=this.bY*g;return this.aZ+=this.bZ*g}callback(q){this.updateSpan();if(this.last===q)return this._callback;this.last=q;return 7>=q.length?this._callback=(m,c,f,e)=>q(m,this.aX+this.bX*c,this.aY+this.bY*f,this.aZ+this.bZ*e,c,f,e):this._callback=(m,c,f,e)=>q(m,this.aX+this.bX*c,this.aY+this.bY*f,this.aZ+this.bZ*e,c,f,e,this.bufferClock,this.bufferStep)}make(){super.make();this._helpers.span.make();return this._listen(this,"span.range",this.updateSpan)}unmake(){super.unmake();return this._helpers.span.unmake()}change(q,
m,c){super.change(q,m,c);(m.x||m.y||m.z)&&this.updateSpan()}}p.Volume=u;u.initClass()};
shadow$provide[237]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.recenterAxis=p.setDimensionNormal=p.setDimension=p.addOrigin=p.setOrigin=void 0;var u=y(7);const q=function(m,c,f){+c===c&&(c=[c]);const e=Array.from(c).includes(1)?0:f.x,g=Array.from(c).includes(2)?0:f.y,k=Array.from(c).includes(3)?0:f.z;c=Array.from(c).includes(4)?0:f.w;return m.set(e,g,k,c)};p.setOrigin=q;D=function(){const m=new u.Vector4;return function(c,f,e){q(m,f,e);return c.add(m)}}();p.addOrigin=D;p.setDimension=
function(m,c){return m.set(1===c?1:0,2===c?1:0,3===c?1:0,4===c?1:0)};p.setDimensionNormal=function(m,c){return m.set(2===c?1:0,(3===c?1:0)+(1===c?1:0),4===c?1:0,0)};D=function(){const m=[0,0];return function(c,f,e,g){null==g&&(g=0);if(0<e){var k=c;c+=f;f=Math.max(Math.abs(k),Math.abs(c));g*=f;const l=Math.min(k,c);k=Math.max(k,c);c=l+(-f+g-l)*e;f=k+(f+g-k)*e-c}m[0]=c;m[1]=f;return m}}();p.recenterAxis=D};
shadow$provide[238]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.Scale=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(237));D=y(106);class m extends D.Source{static initClass(){this.traits="node source index interval span scale raw origin".split(" ")}init(){return this.used=this.space=this.scaleAxis=this.sampler=null}rawBuffer(){return this.buffer}sourceShader(c){return c.pipe(this.sampler)}getDimensions(){return{items:1,width:this.space,height:1,depth:1}}getActiveDimensions(){return{items:1,
width:this.used,height:this.buffer.getFilled(),depth:1}}getRawDimensions(){return this.getDimensions()}make(){var c;this.space=c=this._helpers.scale.divide("");this.buffer=this._renderables.make("dataBuffer",{width:c,channels:1,items:1});c={scaleAxis:this._attributes.make(this._types.vec4()),scaleOffset:this._attributes.make(this._types.vec4())};this.scaleAxis=c.scaleAxis.value;this.scaleOffset=c.scaleOffset.value;const f=this.sampler=this._shaders.shader();f.require(this.buffer.shader(this._shaders.shader(),
1));f.pipe("scale.position",c);this._helpers.span.make();return this._listen(this,"span.range",this.updateRanges)}unmake(){this.scaleAxis=null;return this._helpers.span.unmake()}change(c,f,e){if(c["scale.divide"])return this.rebuild();if(f.view||f.interval||f.span||f.scale||f.origin||e)return this.updateRanges()}updateRanges(){const {used:c}=this,{axis:f,origin:e}=this.props;var g=this._helpers.span.get("",f);g=this._helpers.scale.generate("",this.buffer,g.x,g.y);q.setDimension(this.scaleAxis,f);
q.setOrigin(this.scaleOffset,f,e);this.used=g.length;if(this.used!==c)return this.trigger({type:"source.resize"})}}p.Scale=m;m.initClass()};
shadow$provide[239]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});var u=y(109);Object.keys(u).forEach(function(l){"default"!==l&&"__esModule"!==l&&(l in p&&p[l]===u[l]||Object.defineProperty(p,l,{enumerable:!0,get:function(){return u[l]}}))});var q=y(110);Object.keys(q).forEach(function(l){"default"!==l&&"__esModule"!==l&&(l in p&&p[l]===q[l]||Object.defineProperty(p,l,{enumerable:!0,get:function(){return q[l]}}))});var m=y(232);Object.keys(m).forEach(function(l){"default"!==
l&&"__esModule"!==l&&(l in p&&p[l]===m[l]||Object.defineProperty(p,l,{enumerable:!0,get:function(){return m[l]}}))});var c=y(233);Object.keys(c).forEach(function(l){"default"!==l&&"__esModule"!==l&&(l in p&&p[l]===c[l]||Object.defineProperty(p,l,{enumerable:!0,get:function(){return c[l]}}))});var f=y(234);Object.keys(f).forEach(function(l){"default"!==l&&"__esModule"!==l&&(l in p&&p[l]===f[l]||Object.defineProperty(p,l,{enumerable:!0,get:function(){return f[l]}}))});var e=y(235);Object.keys(e).forEach(function(l){"default"!==
l&&"__esModule"!==l&&(l in p&&p[l]===e[l]||Object.defineProperty(p,l,{enumerable:!0,get:function(){return e[l]}}))});var g=y(236);Object.keys(g).forEach(function(l){"default"!==l&&"__esModule"!==l&&(l in p&&p[l]===g[l]||Object.defineProperty(p,l,{enumerable:!0,get:function(){return g[l]}}))});var k=y(238);Object.keys(k).forEach(function(l){"default"!==l&&"__esModule"!==l&&(l in p&&p[l]===k[l]||Object.defineProperty(p,l,{enumerable:!0,get:function(){return k[l]}}))})};
shadow$provide[240]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.parseQuoted=p.clone=p.merge=void 0;p.merge=function(){const u={};for(const q of Array.from(arguments))for(const m in q)u[m]=q[m];return u};p.clone=u=>JSON.parse(JSON.serialize(u));p.parseQuoted=function(u){let q="";const m=function(e){if(q.length){var g=f,k=g.push;var l=q.replace(/\\/g,"");k.call(g,l)}return q=null!=e?e:""};u=u.split(/(?=(?:\\.|["' ,]))/g);let c=!1;const f=[];for(const e of Array.from(u)){const g=
e[0],k=e.slice(1);switch(g){case '"':case "'":if(c)c===g?(c=!1,m(k)):q+=e;else{if(""!==q)throw Error(`ParseError: String \`${u}\` does not contain comma-separated quoted tokens.`);c=g;q+=k}break;case " ":case ",":c?q+=e:m(k);break;default:q+=e}}m();return f}};
shadow$provide[241]=function(D,y,Q,p){function u(e){if("function"!==typeof WeakMap)return null;var g=new WeakMap,k=new WeakMap;return(u=function(l){return l?k:g})(e)}function q(e,g){if(!g&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};if((g=u(g))&&g.has(e))return g.get(e);var k={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor,r;for(r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var v=l?Object.getOwnPropertyDescriptor(e,
r):null;v&&(v.get||v.set)?Object.defineProperty(k,r,v):k[r]=e[r]}k.default=e;g&&g.set(e,k);return k}Object.defineProperty(p,"__esModule",{value:!0});p.Axis=void 0;var m=q(y(237)),c=q(y(240));D=y(94);class f extends D.Primitive{static initClass(){this.traits="node object visible style line axis span interval arrow position origin shade".split(" ");this.defaults={end:!0,zBias:-1}}constructor(e,g,k){super(e,g,k);this.axisPosition=this.axisStep=this.resolution=this.line=this.arrows=null}make(){var e=
{axisPosition:this._attributes.make(this._types.vec4()),axisStep:this._attributes.make(this._types.vec4())};this.axisPosition=e.axisPosition.value;this.axisStep=e.axisStep.value;let g=this._shaders.shader();g.pipe("axis.position",e);g=this._helpers.position.pipeline(g);var k=this._helpers.style.uniforms();const l=this._helpers.line.uniforms(),r=this._helpers.arrow.uniforms(),v=this._inherit("unit").getUnitUniforms();var {detail:w}=this.props;e=w+1;this.resolution=1/w;const {start:z,end:A}=this.props,
{stroke:H,join:F}=this.props;w=this._helpers.object.mask();const L=this._helpers.shade.pipeline()||!1,{crossed:N,axis:R}=this.props;!N&&null!=w&&1<R&&(w=this._helpers.position.swizzle(w,["x000","y000","z000","w000"][R]));k=c.merge(r,l,k,v);this.line=this._renderables.make("line",{uniforms:k,samples:e,position:g,clip:z||A,stroke:H,join:F,mask:w,material:L});this.arrows=[];z&&this.arrows.push(this._renderables.make("arrow",{uniforms:k,flip:!0,samples:e,position:g,mask:w,material:L}));A&&this.arrows.push(this._renderables.make("arrow",
{uniforms:k,samples:e,position:g,mask:w,material:L}));this._helpers.visible.make();this._helpers.object.make(this.arrows.concat([this.line]));this._helpers.span.make();return this._listen(this,"span.range",this.updateRanges)}unmake(){this._helpers.visible.unmake();this._helpers.object.unmake();return this._helpers.span.unmake()}change(e,g,k){if(e["axis.detail"]||e["line.stroke"]||e["line.join"]||e["axis.crossed"]||e["interval.axis"]&&this.props.crossed)return this.rebuild();if(g.interval||g.span||
g.view||g.origin||k)return this.updateRanges()}updateRanges(){const {axis:e,origin:g}=this.props;var k=this._helpers.span.get("",e);const l=k.x;k=k.y;m.setDimension(this.axisPosition,e).multiplyScalar(l);m.setDimension(this.axisStep,e).multiplyScalar((k-l)*this.resolution);return m.addOrigin(this.axisPosition,e,g)}}p.Axis=f;f.initClass()};
shadow$provide[242]=function(D,y,Q,p){function u(e){if("function"!==typeof WeakMap)return null;var g=new WeakMap,k=new WeakMap;return(u=function(l){return l?k:g})(e)}function q(e,g){if(!g&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};if((g=u(g))&&g.has(e))return g.get(e);var k={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor,r;for(r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var v=l?Object.getOwnPropertyDescriptor(e,
r):null;v&&(v.get||v.set)?Object.defineProperty(k,r,v):k[r]=e[r]}k.default=e;g&&g.set(e,k);return k}Object.defineProperty(p,"__esModule",{value:!0});p.Face=void 0;var m=q(y(105)),c=q(y(240));D=y(94);class f extends D.Primitive{static initClass(){this.traits="node object visible style line mesh face geometry position bind shade".split(" ")}constructor(e,g,k){super(e,g,k);this.face=null}resize(){if(null!=this.bind.points){var e=this.bind.points.getActiveDimensions(),{items:g,width:k,height:l,depth:r}=
e;this.face&&this.face.geometry.clip(k,l,r,g);this.line&&this.line.geometry.clip(g,k,l,r);if(null!=this.bind.map&&(e=this.bind.map.getActiveDimensions(),this.face))return this.face.geometry.map(e.width,e.height,e.depth,e.items)}}make(){let e;this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"},{to:"mesh.map",trait:"source"}]);if(null!=this.bind.points){var g=this.bind.points.sourceShader(this._shaders.shader());g=this._helpers.position.pipeline(g);var k=
this._helpers.style.uniforms();var l=this._helpers.line.uniforms();var r=this._inherit("unit").getUnitUniforms(),v={};v.styleZBias=this._attributes.make(this._types.number());this.wireZBias=v.styleZBias;var w=this.bind.points.getDimensions(),{items:z,width:A,height:H,depth:F}=w,{line:L,shaded:N,fill:R,stroke:J,join:Y}=this.props;this.bind.colors&&(e=this._shaders.shader(),this.bind.colors.sourceShader(e));w=this._helpers.object.mask();var fa=this._helpers.shade.map(null!=this.bind.map?this.bind.map.sourceShader(this._shaders.shader()):
void 0),Z=this._helpers.shade.pipeline(),da=Z||N;Z=Z||!1;var la=[];if(L){const W=this._shaders.shader();W.pipe(m.swizzleVec4("yzwx"));W.pipe(g);l=c.merge(r,l,k,v);this.line=this._renderables.make("line",{uniforms:l,samples:z,strips:A,ribbons:H,layers:F,position:W,color:e,stroke:J,join:Y,material:Z,mask:w,closed:!0});la.push(this.line)}R&&(l=c.merge(r,k,{}),this.face=this._renderables.make("face",{uniforms:l,width:A,height:H,depth:F,items:z,position:g,color:e,material:da,mask:w,map:fa}),la.push(this.face));
this._helpers.visible.make();return this._helpers.object.make(la)}}made(){return this.resize()}unmake(){this._helpers.bind.unmake();this._helpers.visible.unmake();this._helpers.object.unmake();return this.face=this.line=null}change(e,g,k){if(e["geometry.points"]||g.mesh)return this.rebuild();if(e["style.zBias"]||e["mesh.lineBias"]||k){const {fill:l,zBias:r,lineBias:v}=this.props;return this.wireZBias.value=r+(l?v:0)}}}p.Face=f;f.initClass()};
shadow$provide[243]=function(D,y,Q,p){function u(e){if("function"!==typeof WeakMap)return null;var g=new WeakMap,k=new WeakMap;return(u=function(l){return l?k:g})(e)}function q(e,g){if(!g&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};if((g=u(g))&&g.has(e))return g.get(e);var k={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor,r;for(r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var v=l?Object.getOwnPropertyDescriptor(e,
r):null;v&&(v.get||v.set)?Object.defineProperty(k,r,v):k[r]=e[r]}k.default=e;g&&g.set(e,k);return k}Object.defineProperty(p,"__esModule",{value:!0});p.Grid=void 0;var m=q(y(237)),c=q(y(240));D=y(94);class f extends D.Primitive{static initClass(){this.traits="node object visible style line grid area position origin shade axis:x axis:y scale:x scale:y span:x span:y".split(" ");this.defaults={width:1,zBias:-2}}constructor(e,g,k){super(e,g,k);this.axes=null}make(){let e,g=this._helpers.object.mask();
const k=this._helpers.shade.pipeline()||!1;e=(F,L,N)=>{var R,J=this._get(F+"axis.detail");const Y=J+1;J=1/J;const fa=this._helpers.scale.divide(L),Z=this._renderables.make("dataBuffer",{width:fa,channels:1});var da={gridPosition:this._attributes.make(this._types.vec4()),gridStep:this._attributes.make(this._types.vec4()),gridAxis:this._attributes.make(this._types.vec4())};const la={gridPosition:da.gridPosition.value,gridStep:da.gridStep.value,gridAxis:da.gridAxis.value};var W=R=this._shaders.shader();
null!=N&&null!=g&&(g=this._helpers.position.swizzle(g,N));W.require(Z.shader(this._shaders.shader(),2));W.pipe("grid.position",da);R=this._helpers.position.pipeline(W);N=this._helpers.style.uniforms();da=this._helpers.line.uniforms();W=this._inherit("unit").getUnitUniforms();N=c.merge(da,N,W);R=this._renderables.make("line",{uniforms:N,samples:Y,strips:fa,position:R,stroke:A,join:H,mask:g,material:k});return{first:F,second:L,resolution:J,samples:Y,line:R,buffer:Z,values:la}};const {lineX:l,lineY:r,
crossed:v,axes:w}=this.props;var z=["0000","x000","y000","z000","w000"][w[1]];const {stroke:A,join:H}=this.props;this.axes=[];l&&this.axes.push(e("x.","y.",null));r&&this.axes.push(e("y.","x.",v?null:z));z=(()=>{const F=[];for(e of this.axes)F.push(e.line);return F})();this._helpers.visible.make();this._helpers.object.make(z);this._helpers.span.make();return this._listen(this,"span.range",this.updateRanges)}unmake(){this._helpers.visible.unmake();this._helpers.object.unmake();this._helpers.span.unmake();
for(const e of this.axes)e.buffer.dispose();this.axes=null}change(e,g,k){if(e["x.axis.detail"]||e["y.axis.detail"]||e["x.axis.factor"]||e["y.axis.factor"]||e["grid.lineX"]||e["grid.lineY"]||e["line.stroke"]||e["line.join"]||e["grid.crossed"]||e["grid.axes"]&&this.props.crossed)return this.rebuild();if(g.x||g.y||g.area||g.grid||g.view||g.origin||k)return this.updateRanges()}updateRanges(){const e=(z,A,H,F,L)=>{const {second:N,resolution:R,samples:J,line:Y,buffer:fa,values:Z}=L;L=H.x;H=H.y;m.setDimension(Z.gridPosition,
z).multiplyScalar(L);m.setDimension(Z.gridStep,z).multiplyScalar((H-L)*R);m.addOrigin(Z.gridPosition,g,k);L=F.x;H=F.y;z=this._helpers.scale.generate(N,fa,L,H);m.setDimension(Z.gridAxis,A);return Y.geometry.clip(J,z.length,1,1)},{axes:g,origin:k}=this.props,l=this._helpers.span.get("x.",g[0]),r=this._helpers.span.get("y.",g[1]),{lineX:v,lineY:w}=this.props;v&&e(g[0],g[1],l,r,this.axes[0]);w&&e(g[1],g[0],r,l,this.axes[+v]);window.cake1=this.axes[0].buffer;window.cake2=this.axes[1].buffer;window.cake3=
this.axes[0]}}p.Grid=f;f.initClass()};
shadow$provide[244]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.Line=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(240));D=y(94);class m extends D.Primitive{static initClass(){this.traits="node object visible style line arrow geometry position bind shade".split(" ")}constructor(c,f,e){super(c,f,e);this.line=this.arrows=null}resize(){if(null!=this.bind.points){var c=this.bind.points.getActiveDimensions(),f=c.width,e=c.height,g=c.depth,k=c.items;this.line.geometry.clip(f,
e,g,k);return Array.from(this.arrows).map(l=>l.geometry.clip(f,e,g,k))}}make(){let c;this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"}]);if(null!=this.bind.points){var f=this._shaders.shader();f=this.bind.points.sourceShader(f);f=this._helpers.position.pipeline(f);var e=this._helpers.style.uniforms(),g=this._helpers.line.uniforms(),k=this._helpers.arrow.uniforms(),l=this._inherit("unit").getUnitUniforms(),{start:r,end:v}=this.props,{stroke:w,join:z,
proximity:A,closed:H}=this.props;this.proximity=A;var F=this.bind.points.getDimensions(),L=F.width,N=F.height,R=F.depth;F=F.items;this.bind.colors&&(c=this._shaders.shader(),this.bind.colors.sourceShader(c));var J=this._helpers.object.mask(),Y=this._helpers.shade.pipeline()||!1;e=q.merge(k,g,e,l);this.line=this._renderables.make("line",{uniforms:e,samples:L,strips:N,ribbons:R,layers:F,position:f,color:c,clip:r||v,stroke:w,join:z,proximity:A,closed:H,mask:J,material:Y});this.arrows=[];r&&this.arrows.push(this._renderables.make("arrow",
{uniforms:e,flip:!0,samples:L,strips:N,ribbons:R,layers:F,position:f,color:c,closed:H,mask:J,material:Y}));v&&this.arrows.push(this._renderables.make("arrow",{uniforms:e,samples:L,strips:N,ribbons:R,layers:F,position:f,color:c,closed:H,mask:J,material:Y}));this._helpers.visible.make();return this._helpers.object.make(this.arrows.concat([this.line]))}}made(){return this.resize()}unmake(){this._helpers.bind.unmake();this._helpers.visible.unmake();this._helpers.object.unmake();return this.line=this.arrows=
null}change(c,f,e){if(c["geometry.points"]||c["line.stroke"]||c["line.join"]||c["arrow.start"]||c["arrow.end"]||c["line.proximity"]&&null!=this.proximity!==(null!=this.props.proximity))return this.rebuild()}}p.Line=m;m.initClass()};
shadow$provide[245]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.Point=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(240));D=y(94);class m extends D.Primitive{static initClass(){this.traits="node object visible style point geometry position bind shade".split(" ")}constructor(c,f,e){super(c,f,e);this.point=null}resize(){if(null!=this.bind.points){var c=this.bind.points.getActiveDimensions(),{items:f,width:e,height:g,depth:k}=c;return this.point.geometry.clip(e,g,k,f)}}make(){let c,
f;this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"},{to:"point.sizes",trait:"source"}]);if(null!=this.bind.points){var e=this._shaders.shader();e=this.bind.points.sourceShader(e);e=this._helpers.position.pipeline(e);var g=this.bind.points.getDimensions(),{items:k,width:l,height:r,depth:v}=g,w=this._helpers.style.uniforms(),z=this._helpers.point.uniforms(),A=this._inherit("unit").getUnitUniforms();this.bind.colors&&(c=this._shaders.shader(),this.bind.colors.sourceShader(c));
this.bind.sizes&&(f=this._shaders.shader(),this.bind.sizes.sourceShader(f));g=this._helpers.object.mask();var H=this._helpers.shade.pipeline()||!1,{shape:F}=this.props,{fill:L}=this.props,{optical:N}=this.props;w=q.merge(A,z,w);this.point=this._renderables.make("point",{uniforms:w,width:l,height:r,depth:v,items:k,position:e,color:c,size:f,shape:F,optical:N,fill:L,mask:g,material:H});this._helpers.visible.make();this._helpers.object.make([this.point])}}made(){return this.resize()}unmake(){this._helpers.bind.unmake();
this._helpers.visible.unmake();this._helpers.object.unmake();this.point=null}change(c,f,e){if(c["geometry.points"]||c["point.shape"]||c["point.fill"])return this.rebuild()}}p.Point=m;m.initClass()};
shadow$provide[246]=function(D,y,Q,p){function u(e){if("function"!==typeof WeakMap)return null;var g=new WeakMap,k=new WeakMap;return(u=function(l){return l?k:g})(e)}function q(e,g){if(!g&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};if((g=u(g))&&g.has(e))return g.get(e);var k={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor,r;for(r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var v=l?Object.getOwnPropertyDescriptor(e,
r):null;v&&(v.get||v.set)?Object.defineProperty(k,r,v):k[r]=e[r]}k.default=e;g&&g.set(e,k);return k}Object.defineProperty(p,"__esModule",{value:!0});p.Strip=void 0;var m=q(y(105)),c=q(y(240));D=y(94);class f extends D.Primitive{static initClass(){this.traits="node object visible style line mesh strip geometry position bind shade".split(" ")}constructor(e,g,k){super(e,g,k);this.strip=null}resize(){if(null!=this.bind.points){var e=this.bind.points.getActiveDimensions(),{items:g,width:k,height:l,depth:r}=
e;this.strip&&this.strip.geometry.clip(k,l,r,g);this.line&&this.line.geometry.clip(g,k,l,r);if(null!=this.bind.map&&(e=this.bind.map.getActiveDimensions(),this.strip))return this.strip.geometry.map(e.width,e.height,e.depth,e.items)}}make(){let e;this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"},{to:"mesh.map",trait:"source"}]);if(null!=this.bind.points){var g=this._shaders.shader();g=this.bind.points.sourceShader(g);g=this._helpers.position.pipeline(g);
var k=this._helpers.style.uniforms();var l=this._helpers.line.uniforms();var r=this._inherit("unit").getUnitUniforms(),{line:v,shaded:w,fill:z,stroke:A,join:H}=this.props,F={};F.styleZBias=this._attributes.make(this._types.number());this.wireZBias=F.styleZBias;var L=this.bind.points.getDimensions(),{items:N,width:R,height:J,depth:Y}=L;this.bind.colors&&(e=this._shaders.shader(),e=this.bind.colors.sourceShader(e));L=this._helpers.object.mask();this._helpers.shade.map(null!=this.bind.map?this.bind.map.sourceShader(this._shaders.shader()):
void 0);var fa=this._helpers.shade.pipeline(),Z=fa||w;fa=fa||!1;var da=[];if(v){const la=this._shaders.shader();la.pipe(m.swizzleVec4("yzwx"));la.pipe(g);l=c.merge(r,l,k,F);this.line=this._renderables.make("line",{uniforms:l,samples:N,strips:R,ribbons:J,layers:Y,position:la,color:e,stroke:A,join:H,mask:L,material:fa});da.push(this.line)}z&&(l=c.merge(k,{}),this.strip=this._renderables.make("strip",{uniforms:l,width:R,height:J,depth:Y,items:N,position:g,color:e,material:Z}),da.push(this.strip));this._helpers.visible.make();
return this._helpers.object.make(da)}}made(){return this.resize()}unmake(){this._helpers.bind.unmake();this._helpers.visible.unmake();this._helpers.object.unmake();return this.strip=null}change(e,g,k){if(e["geometry.points"]||g.mesh)return this.rebuild();if(e["style.zBias"]||e["mesh.lineBias"]||k){const {fill:l,zBias:r,lineBias:v}=this.props;return this.wireZBias.value=r+(l?v:0)}}}p.Strip=f;f.initClass()};
shadow$provide[247]=function(D,y,Q,p){function u(f){if("function"!==typeof WeakMap)return null;var e=new WeakMap,g=new WeakMap;return(u=function(k){return k?g:e})(f)}Object.defineProperty(p,"__esModule",{value:!0});p.Surface=void 0;var q=function(f,e){if(!e&&f&&f.__esModule)return f;if(null===f||"object"!==typeof f&&"function"!==typeof f)return{default:f};if((e=u(e))&&e.has(f))return e.get(f);var g={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor,l;for(l in f)if("default"!==l&&Object.prototype.hasOwnProperty.call(f,
l)){var r=k?Object.getOwnPropertyDescriptor(f,l):null;r&&(r.get||r.set)?Object.defineProperty(g,l,r):g[l]=f[l]}g.default=f;e&&e.set(f,g);return g}(y(240)),m=y(7);D=y(94);class c extends D.Primitive{static initClass(){this.traits="node object visible style line mesh geometry surface position grid bind shade".split(" ");this.defaults={lineX:!1,lineY:!1}}constructor(f,e,g){super(f,e,g);this.lineX=this.lineY=this.surface=null}resize(){if(null!=this.bind.points){var f=this.bind.points.getActiveDimensions(),
{width:e,height:g,depth:k,items:l}=f;this.surface&&this.surface.geometry.clip(e,g,k,l);this.lineX&&this.lineX.geometry.clip(e,g,k,l);this.lineY&&this.lineY.geometry.clip(g,e,k,l);if(null!=this.bind.map&&(f=this.bind.map.getActiveDimensions(),this.surface))return this.surface.geometry.map(f.width,f.height,f.depth,f.items)}}make(){let f,e;this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"},{to:"mesh.normals",trait:"source"},{to:"mesh.map",trait:"source"}]);
if(null!=this.bind.points){var g=this._shaders.shader();g=this.bind.points.sourceShader(g);g=this._helpers.position.pipeline(g);var k=this._helpers.style.uniforms(),l=this._helpers.style.uniforms(),r=this._helpers.line.uniforms(),v=this._helpers.surface.uniforms(),w=this._inherit("unit").getUnitUniforms();l.styleColor=this._attributes.make(this._types.color());l.styleZBias=this._attributes.make(this._types.number());this.wireColor=l.styleColor.value;this.wireZBias=l.styleZBias;this.wireScratch=new m.Color;
var z=this.bind.points.getDimensions(),{width:A,height:H,depth:F,items:L}=z,{shaded:N,fill:R,lineX:J,lineY:Y,closedX:fa,closedY:Z,stroke:da,join:la,proximity:W,crossed:ra}=this.props;z=[];this.proximity=W;null!=this.bind.normals&&(e=this._shaders.shader(),this.bind.normals.sourceShader(e),this._helpers.shade.normal(e));null!=this.bind.colors&&(f=this._shaders.shader(),this.bind.colors.sourceShader(f));var za=this._helpers.object.mask(),O=this._helpers.shade.map(null!=this.bind.map?this.bind.map.sourceShader(this._shaders.shader()):
void 0),pa=this._helpers.shade.pipeline(),Ta=pa||N;pa=pa||!1;var {swizzle:na,swizzle2:Ra}=this._helpers.position;l=q.merge(w,r,k,l);r=J||Y?-50:0;J&&(this.lineX=this._renderables.make("line",{uniforms:l,samples:A,strips:H,ribbons:F,layers:L,position:g,color:f,normal:e,zUnits:-r,stroke:da,join:la,mask:za,material:pa,proximity:W,closed:fa||closed}),z.push(this.lineX));Y&&(this.lineY=this._renderables.make("line",{uniforms:l,samples:H,strips:A,ribbons:F,layers:L,position:Ra(g,"yxzw","yxzw"),color:na(f,
"yxzw"),zUnits:-r,stroke:da,join:la,mask:na(za,ra?"xyzw":"yxzw"),material:pa,proximity:W,closed:Z||closed}),z.push(this.lineY));R&&(l=q.merge(w,v,k),this.surface=this._renderables.make("surface",{uniforms:l,width:A,height:H,surfaces:F,layers:L,position:g,color:f,zUnits:r,stroke:da,material:Ta,mask:za,map:O,intUV:!0,closedX:fa||closed,closedY:Z||closed}),z.push(this.surface));this._helpers.visible.make();return this._helpers.object.make(z)}}made(){return this.resize()}unmake(){this._helpers.bind.unmake();
this._helpers.visible.unmake();this._helpers.object.unmake();return this.lineX=this.lineY=this.surface=null}_convertGammaToLinear(f,e=2){f.r=Math.pow(f.r,e);f.g=Math.pow(f.g,e);f.b=Math.pow(f.b,e);return f}_convertLinearToGamma(f,e=2){e=0<e?1/e:1;f.r=Math.pow(f.r,e);f.g=Math.pow(f.g,e);f.b=Math.pow(f.b,e);return f}change(f,e,g){if(f["geometry.points"]||f["mesh.shaded"]||f["mesh.fill"]||f["line.stroke"]||f["line.join"]||e.grid)return this.rebuild();if(f["style.color"]||f["style.zBias"]||f["mesh.fill"]||
f["mesh.lineBias"]||g){const {fill:k,color:l,zBias:r,lineBias:v}=this.props;this.wireZBias.value=r+(k?v:0);this.wireColor.copy(l);k&&(e=this.wireScratch,e.setRGB(l.r,l.g,l.b),this._convertLinearToGamma(this._convertGammaToLinear(e).multiplyScalar(.75)),this.wireColor.r=e.r,this.wireColor.g=e.g,this.wireColor.b=e.b)}if(f["line.proximity"]&&null!=this.proximity!==(null!=this.props.proximity))return this.rebuild()}}p.Surface=c;c.initClass()};
shadow$provide[248]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.Ticks=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(240));D=y(94);class m extends D.Primitive{static initClass(){this.traits="node object visible style line ticks geometry position bind shade".split(" ")}init(){return this.tickStrip=this.line=null}resize(){if(null!=this.bind.points){var c=this.bind.points.getActiveDimensions(),f=+(0<c.items),e=c.width*f;this.line.geometry.clip(2,e,c.height*f,c.depth*f);
return this.tickStrip.set(0,e-1)}}make(){let c;this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"}]);if(null!=this.bind.points){var f=this._helpers.style.uniforms();var e=this._helpers.line.uniforms(),g=this._inherit("unit").getUnitUniforms();e=q.merge(e,f,g);g={tickEpsilon:this.node.attributes["ticks.epsilon"],tickSize:this.node.attributes["ticks.size"],tickNormal:this.node.attributes["ticks.normal"],tickStrip:this._attributes.make(this._types.vec2(0,
0)),worldUnit:e.worldUnit,focusDepth:e.focusDepth};this.tickStrip=g.tickStrip.value;var k=f=this._shaders.shader();k.require(this.bind.points.sourceShader(this._shaders.shader()));k.require(this._helpers.position.pipeline(this._shaders.shader()));k.pipe("ticks.position",g);var {stroke:l,join:r}=this.props,v=this.bind.points.getDimensions();g=v.width;k=v.height;v=v.depth;this.bind.colors&&(c=this._shaders.shader(),this.bind.colors.sourceShader(c));var w=this._helpers.object.mask(),z=this._helpers.shade.pipeline()||
!1,{swizzle:A}=this._helpers.position;this.line=this._renderables.make("line",{uniforms:e,samples:2,strips:g,ribbons:k,layers:v,position:f,color:c,stroke:l,join:r,mask:A(w,"yzwx"),material:z});this._helpers.visible.make();return this._helpers.object.make([this.line])}}made(){return this.resize()}unmake(){this.line=null;this._helpers.visible.unmake();return this._helpers.object.unmake()}change(c,f,e){if(c["geometry.points"]||c["line.stroke"]||c["line.join"])return this.rebuild()}}p.Ticks=m;m.initClass()};
shadow$provide[249]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.Vector=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(240));D=y(94);class m extends D.Primitive{static initClass(){this.traits="node object visible style line arrow geometry position bind shade".split(" ")}constructor(c,f,e){super(c,f,e);this.line=this.arrows=null}resize(){if(null!=this.bind.points){var c=this.bind.points.getActiveDimensions(),f=c.items,e=c.width,g=c.height,k=c.depth;this.line.geometry.clip(f,
e,g,k);return Array.from(this.arrows).map(l=>l.geometry.clip(f,e,g,k))}}make(){let c;this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"}]);if(null!=this.bind.points){var f=this._shaders.shader();this.bind.points.sourceShader(f);this._helpers.position.pipeline(f);var e=this._helpers.style.uniforms(),g=this._helpers.line.uniforms(),k=this._helpers.arrow.uniforms(),l=this._inherit("unit").getUnitUniforms(),{start:r,end:v}=this.props,{stroke:w,join:z,proximity:A,
closed:H}=this.props;this.proximity=A;var F=this.bind.points.getDimensions(),L=F.items,N=F.width,R=F.height;F=F.depth;this.bind.colors&&(c=this._shaders.shader(),this.bind.colors.sourceShader(c));var J=this._helpers.object.mask(),Y=this._helpers.shade.pipeline()||!1,{swizzle:fa,swizzle2:Z}=this._helpers.position;f=Z(f,"yzwx","yzwx");c=fa(c,"yzwx");J=fa(J,"yzwx");Y=fa(Y,"yzwx");e=q.merge(k,g,e,l);this.line=this._renderables.make("line",{uniforms:e,samples:L,ribbons:R,strips:N,layers:F,position:f,color:c,
clip:r||v,stroke:w,join:z,proximity:A,closed:H,mask:J,material:Y});this.arrows=[];r&&this.arrows.push(this._renderables.make("arrow",{uniforms:e,flip:!0,samples:L,ribbons:R,strips:N,layers:F,position:f,color:c,closed:H,mask:J,material:Y}));v&&this.arrows.push(this._renderables.make("arrow",{uniforms:e,samples:L,ribbons:R,strips:N,layers:F,position:f,color:c,closed:H,mask:J,material:Y}));this._helpers.visible.make();return this._helpers.object.make(this.arrows.concat([this.line]))}}made(){return this.resize()}unmake(){this._helpers.bind.unmake();
this._helpers.visible.unmake();this._helpers.object.unmake();return this.line=this.arrows=null}change(c,f,e){if(c["geometry.points"]||c["line.stroke"]||c["line.join"]||c["arrow.start"]||c["arrow.end"]||c["line.proximity"]&&null!=this.proximity!==(null!=this.props.proximity))return this.rebuild()}}p.Vector=m;m.initClass()};
shadow$provide[250]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});var u=y(241);Object.keys(u).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in p&&p[r]===u[r]||Object.defineProperty(p,r,{enumerable:!0,get:function(){return u[r]}}))});var q=y(242);Object.keys(q).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in p&&p[r]===q[r]||Object.defineProperty(p,r,{enumerable:!0,get:function(){return q[r]}}))});var m=y(243);Object.keys(m).forEach(function(r){"default"!==
r&&"__esModule"!==r&&(r in p&&p[r]===m[r]||Object.defineProperty(p,r,{enumerable:!0,get:function(){return m[r]}}))});var c=y(244);Object.keys(c).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in p&&p[r]===c[r]||Object.defineProperty(p,r,{enumerable:!0,get:function(){return c[r]}}))});var f=y(245);Object.keys(f).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in p&&p[r]===f[r]||Object.defineProperty(p,r,{enumerable:!0,get:function(){return f[r]}}))});var e=y(246);Object.keys(e).forEach(function(r){"default"!==
r&&"__esModule"!==r&&(r in p&&p[r]===e[r]||Object.defineProperty(p,r,{enumerable:!0,get:function(){return e[r]}}))});var g=y(247);Object.keys(g).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in p&&p[r]===g[r]||Object.defineProperty(p,r,{enumerable:!0,get:function(){return g[r]}}))});var k=y(248);Object.keys(k).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in p&&p[r]===k[r]||Object.defineProperty(p,r,{enumerable:!0,get:function(){return k[r]}}))});var l=y(249);Object.keys(l).forEach(function(r){"default"!==
r&&"__esModule"!==r&&(r in p&&p[r]===l[r]||Object.defineProperty(p,r,{enumerable:!0,get:function(){return l[r]}}))})};
shadow$provide[251]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.HTML=void 0;D=y(235);class u extends D.Voxel{static initClass(){this.traits="node buffer active data voxel html".split(" ");this.finals={channels:1}}init(){super.init();this.storage="pushBuffer"}make(){super.make();const {items:q,width:m,height:c,depth:f}=this.getDimensions();this.dom=this._overlays.make("dom");return this.dom.hint(q*m*c*f)}unmake(){super.unmake();if(null!=this.dom)return this.dom.dispose(),this.dom=
null}update(){return super.update()}change(q,m,c){return m.html?this.rebuild():super.change(q,m,c)}nodes(){return this.buffer.read()}callback(q){const {el:m}=this.dom;return 6>=q.length?(c,f,e,g,k)=>q(c,m,f,e,g,k):(c,f,e,g,k)=>q(c,m,f,e,g,k,this.bufferClock,this.bufferStep)}}p.HTML=u;u.initClass()};
shadow$provide[252]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.DOM=void 0;D=y(94);class u extends D.Primitive{static initClass(){this.traits="node bind object visible overlay dom attach position".split(" ")}init(){this.emitter=this.root=null;this.active={}}make(){super.make();this._helpers.bind.make([{to:"dom.html",trait:"html"},{to:"dom.points",trait:"source"}]);if(null!=this.bind.points&&null!=this.bind.html){this.root=this._inherit("root");this._listen("root","root.update",
this.update);this._listen("root","root.post",this.post);var q=this.bind.points.getDimensions(),m=this.bind.html.getDimensions(),c=Math.min(q.items,m.items),f=Math.min(q.width,m.width),e=Math.min(q.height,m.height);q=Math.min(q.depth,m.depth);m=this.bind.points.sourceShader(this._shaders.shader());m=this._helpers.position.pipeline(m);var g=this._shaders.shader({globals:["projectionMatrix"]});g.pipe("project.readback");m.pipe(g);g=this._shaders.shader();this.readback=this._renderables.make("readback",
{map:m,indexer:g,items:c,width:f,height:e,depth:q,channels:4,stpq:!0});this.dom=this._overlays.make("dom");this.dom.hint(c*f*e*q*2);this.emitter=this.callback(this.bind.html.nodes());this.readback.setCallback(this.emitter);this._helpers.visible.make()}}unmake(){null!=this.readback&&(this.readback.dispose(),this.dom.dispose(),this.emitter=this.root=this.readback=this.dom=null,this.active={});this._helpers.bind.unmake();this._helpers.visible.unmake()}update(){null!=this.readback&&this.props.visible&&
(this.readback.update(null!=this.root?this.root.getCamera():void 0),this.readback.post(),this.readback.iterate())}post(){null!=this.readback&&this.dom.render(this.isVisible?this.emitter.nodes():null)}callback(q){let m,c;var f=this._inherit("unit").getUnitUniforms();const e=f.viewWidth,g=f.viewHeight,k=this.node.attributes["dom.attributes"],l=this.node.attributes["dom.size"],r=this.node.attributes["dom.zoom"],v=this.node.attributes["dom.color"],w=this.node.attributes["dom.outline"],z=this.node.attributes["dom.pointerEvents"],
A=this.node.attributes["overlay.opacity"],H=this.node.attributes["overlay.zIndex"],F=this.node.attributes["attach.offset"],L=this.node.attributes["attach.depth"],N=this.node.attributes["attach.snap"],{el:R}=this.dom;let J=[],Y=null,fa=null,Z=m=c=0,da="";f=function(la,W,ra,za,O,pa,Ta,na){ra=q[na+Z*O+m*pa+c*Ta];O=0>za;pa=1+(1/za-1)*L.value;pa=O?0:pa;la=(la+1)*e.value*.5+ +F.value.x*pa;W=(W-1)*g.value*.5+ +F.value.y*pa;la/=r.value;W/=r.value;N.value&&(la=Math.round(la),W=Math.round(W));W={className:fa,
style:{transform:`translate3d(${la}px, ${-W}px, ${1-za}px) translate(-50%, -50%) scale(${pa},${pa})`,opacity:Math.min(.999,O?0:A.value)}};for(Ta in Y)za=Y[Ta],W.style[Ta]=za;la=k.value;if(null!=la){O=la.style;for(Ta in la)za=la[Ta],["style","className"].includes(Ta)||(W[Ta]=za);if(null!=O)for(Ta in O)za=O[Ta],W.style[Ta]=za}W.className+=" "+(null!=(null!=la?la.className:void 0)?null!=la?la.className:void 0:"mathbox-label");return J.push(R("div",W,ra))};f.reset=()=>{J=[];[Z,m,c]=Array.from([this.strideI,
this.strideJ,this.strideK]);const la=v.value;da=la?`rgb(${[Math.floor(255*la.x),Math.floor(255*la.y),Math.floor(255*la.z)]})`:"";fa=`mathbox-outline-${Math.round(w.value)}`;Y={};la&&(Y.color=da);Y.fontSize=`${l.value}px`;1!==r.value&&(Y.zoom=r.value);0<H.value&&(Y.zIndex=H.value);if(z.value)return Y.pointerEvents="auto"};f.nodes=()=>J;return f}resize(){if(null!=this.readback){var q=this.bind.points.getActiveDimensions();var m=this.bind.html.getActiveDimensions();this.readback.setActive(Math.min(q.items,
m.items),Math.min(q.width,m.width),Math.min(q.height,m.height),Math.min(q.depth,m.depth));this.strideI=q=m.items;this.strideJ=q*=m.width;this.strideK=q*m.height}}change(q,m,c){if(q["dom.html"]||q["dom.points"])return this.rebuild()}}p.DOM=u;u.initClass()};
shadow$provide[253]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});var u=y(251);Object.keys(u).forEach(function(m){"default"!==m&&"__esModule"!==m&&(m in p&&p[m]===u[m]||Object.defineProperty(p,m,{enumerable:!0,get:function(){return u[m]}}))});var q=y(252);Object.keys(q).forEach(function(m){"default"!==m&&"__esModule"!==m&&(m in p&&p[m]===q[m]||Object.defineProperty(p,m,{enumerable:!0,get:function(){return q[m]}}))})};
shadow$provide[254]=function(D,y,Q,p){function u(e){if("function"!==typeof WeakMap)return null;var g=new WeakMap,k=new WeakMap;return(u=function(l){return l?k:g})(e)}Object.defineProperty(p,"__esModule",{value:!0});p.Text=void 0;var q=function(e,g){if(!g&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};if((g=u(g))&&g.has(e))return g.get(e);var k={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor,r;for(r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,
r)){var v=l?Object.getOwnPropertyDescriptor(e,r):null;v&&(v.get||v.set)?Object.defineProperty(k,r,v):k[r]=e[r]}k.default=e;g&&g.set(e,k);return k}(y(104)),m=y(7),c=y(108);D=y(235);class f extends D.Voxel{static initClass(){this.traits="node buffer active data texture voxel text font".split(" ");this.defaults={minFilter:"linear",magFilter:"linear"};this.finals={channels:1}}init(){super.init();return this.atlas=null}textShader(e){return this.atlas.shader(e)}textIsSDF(){return 0<this.props.sdf}textHeight(){return this.props.detail}make(){let {minFilter:e,
magFilter:g,type:k}=this.props;const {font:l,style:r,variant:v,weight:w,detail:z,sdf:A}=this.props;this.atlas=this._renderables.make("textAtlas",{font:l,size:z,style:r,variant:v,weight:w,outline:A,minFilter:e,magFilter:g,type:k});this.magFilter=this.minFilter=m.NearestFilter;this.type=m.FloatType;c.Buffer.prototype.make.call(this);e=null!=this.minFilter?this.minFilter:this.props.minFilter;g=null!=this.magFilter?this.magFilter:this.props.magFilter;k=null!=this.type?this.type:this.props.type;var {width:H}=
this.props,{height:F}=this.props;const {depth:L}=this.props,N=this.props.bufferWidth,R=this.props.bufferHeight,J=this.props.bufferDepth,{channels:Y}=this.props,{items:fa}=this.props;H=this.spec={channels:Y,items:fa,width:H,height:F,depth:L};this.items=H.items;this.channels=H.channels;({data:F}=this.props);H=q.getDimensions(F,H);({space:F}=this);F.width=Math.max(N,H.width||1);F.height=Math.max(R,H.height||1);F.depth=Math.max(J,H.depth||1);this.buffer=this._renderables.make(this.storage,{width:F.width,
height:F.height,depth:F.depth,channels:4,items:fa,minFilter:e,magFilter:g,type:k});const {atlas:Z}=this,{emit:da}=this.buffer.streamer;return this.buffer.streamer.emit=la=>Z.map(la,da)}unmake(){super.unmake();if(this.atlas)return this.atlas.dispose(),this.atlas=null}update(){this.atlas.begin();super.update();return this.atlas.end()}change(e,g,k){return g.font?this.rebuild():super.change(e,g,k)}}p.Text=f;f.initClass()};
shadow$provide[255]=function(D,y,Q,p){function u(m,c,f){if("undefined"!==typeof m&&null!==m&&"function"===typeof m[c])return f(m,c)}Object.defineProperty(p,"__esModule",{value:!0});p.Operator=void 0;D=y(106);class q extends D.Source{static initClass(){this.traits=["node","bind","operator","source","index"]}indexShader(m){return u(this.bind.source,"indexShader",c=>c.indexShader(m))}sourceShader(m){return u(this.bind.source,"sourceShader",c=>c.sourceShader(m))}getDimensions(){return this.bind.source.getDimensions()}getFutureDimensions(){return this.bind.source.getFutureDimensions()}getActiveDimensions(){return this.bind.source.getActiveDimensions()}getIndexDimensions(){return this.bind.source.getIndexDimensions()}init(){return this.sourceSpec=
[{to:"operator.source",trait:"source",optional:!0}]}make(){super.make();return this._helpers.bind.make(this.sourceSpec)}made(){this.resize();return super.made()}unmake(){return this._helpers.bind.unmake()}resize(m){return this.trigger({type:"source.resize"})}}p.Operator=q;q.initClass()};
shadow$provide[256]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Format=void 0;var u=y(7);D=y(255);class q extends D.Operator{static initClass(){this.traits="node bind operator texture text format font".split(" ");this.defaults={minFilter:"linear",magFilter:"linear"}}init(){super.init();this.atlas=this.buffer=this.used=this.time=null;return this.filled=!1}sourceShader(m){return this.buffer.shader(m)}textShader(m){return this.atlas.shader(m)}textIsSDF(){return 0<this.props.sdf}textHeight(){return this.props.detail}make(){this._helpers.bind.make([{to:"operator.source",
trait:"raw"}]);let {minFilter:m,magFilter:c,type:f}=this.props;const {font:e,style:g,variant:k,weight:l,detail:r,sdf:v}=this.props;this.atlas=this._renderables.make("textAtlas",{font:e,size:r,style:g,variant:k,weight:l,outline:v,minFilter:m,magFilter:c,type:f});c=m=u.NearestFilter;f=u.FloatType;const w=this.bind.source.getDimensions(),{items:z,width:A,height:H,depth:F}=w;this.buffer=this._renderables.make("voxelBuffer",{width:A,height:H,depth:F,channels:4,items:z,minFilter:m,magFilter:c,type:f});
const {atlas:L}=this,{emit:N}=this.buffer.streamer;this.buffer.streamer.emit=R=>L.map(R,N);this.clockParent=this._inherit("clock");return this._listen("root","root.update",this.update)}made(){super.made();return this.resize()}unmake(){super.unmake();this.buffer&&(this.buffer.dispose(),this.buffer=null);if(this.atlas)return this.atlas.dispose(),this.atlas=null}update(){if((!this.filled||this.props.live)&&this.through){this.time=this.clockParent.getTime();var {used:m}=this;this.atlas.begin();this.used=
this.through();this.buffer.write(this.used);this.atlas.end();this.filled=!0;if(m!==this.used)return this.trigger({type:"source.resize"})}}change(m,c,f){if(c.font)return this.rebuild();if(m["format.expr"]||m["format.digits"]||m["format.data"]||f){let {expr:e}=this.props;const {digits:g,data:k}=this.props;null==e&&(e=null!=k?(l,r,v,w,z)=>k[z]:l=>l);({length:m}=e);null!=g&&(e=(l=>(r,v,w,z,A,H,F,L,N,R)=>+l(r,v,w,z,A,H,F,L,N,R).toPrecision(g))(e));m=8<m?(l,r,v,w,z,A,H,F,L,N,R)=>l(e(r,v,w,z,A,H,F,L,this.time.clock,
this.time.step)):(l,r,v,w,z,A,H,F,L)=>l(e(r,v,w,z,A,H,F,L));return this.through=this.bind.source.rawBuffer().through(m,this.buffer)}}}p.Format=q;q.initClass()};
shadow$provide[257]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.Label=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(240));D=y(94);class m extends D.Primitive{static initClass(){this.traits="node bind object visible style label attach geometry position".split(" ")}make(){let c;super.make();this._helpers.bind.make([{to:"label.text",trait:"text"},{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"}]);if(null!=this.bind.points&&null!=this.bind.text){var f=
this.bind.points.getDimensions(),e=this.bind.text.getDimensions(),g=this.bind.text.textIsSDF(),k=Math.min(f.items,e.items),l=Math.min(f.width,e.width),r=Math.min(f.height,e.height);f=Math.min(f.depth,e.depth);e=this.bind.points.sourceShader(this._shaders.shader());e=this._helpers.position.pipeline(e);var v=this.bind.text.sourceShader(this._shaders.shader()),w=this._shaders.shader().pipe("label.map");w.pipe(this.bind.text.textShader(this._shaders.shader()));var z={spriteDepth:this.node.attributes["attach.depth"],
spriteOffset:this.node.attributes["attach.offset"],spriteSnap:this.node.attributes["attach.snap"],spriteScale:this._attributes.make(this._types.number()),outlineStep:this._attributes.make(this._types.number()),outlineExpand:this._attributes.make(this._types.number()),outlineColor:this.node.attributes["label.background"]};this.spriteScale=z.spriteScale;this.outlineStep=z.outlineStep;this.outlineExpand=z.outlineExpand;g=g?"label.outline":"label.alpha";g=this._shaders.shader().pipe(g,z);this.bind.colors&&
(c=this._shaders.shader(),this.bind.colors.sourceShader(c));var A=this._helpers.object.mask(),H=this._helpers.style.uniforms(),F=this._inherit("unit").getUnitUniforms();z=q.merge(F,H,z);this.sprite=this._renderables.make("sprite",{uniforms:z,width:l,height:r,depth:f,items:k,position:e,sprite:v,map:w,combine:g,color:c,mask:A,linear:!0});this._helpers.visible.make();return this._helpers.object.make([this.sprite])}}unmake(){this._helpers.bind.unmake();this._helpers.visible.unmake();this._helpers.object.unmake();
return this.sprite=null}resize(){const c=this.bind.points.getActiveDimensions(),f=this.bind.text.getActiveDimensions();return this.sprite.geometry.clip(Math.min(c.width,f.width),Math.min(c.height,f.height),Math.min(c.depth,f.depth),Math.min(c.items,f.items))}change(c,f,e){if(f.geometry||c["label.text"])return this.rebuild();if(null!=this.bind.points){({size:e}=this.props);({outline:c}=this.props);({expand:f}=this.props);var g=this.bind.text.textHeight();e/=g;this.outlineExpand.value=f/e*16/255;this.outlineStep.value=
c/e*16/255;return this.spriteScale.value=e}}}p.Label=m;m.initClass()};
shadow$provide[258]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.Resample=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(105));D=y(255);class m extends D.Operator{static initClass(){this.traits="node bind operator source index resample sampler:x sampler:y sampler:z sampler:w include".split(" ")}indexShader(c){c.pipe(this.indexer);return super.indexShader(c)}sourceShader(c){return c.pipe(this.operator)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(c){const f=
this.resampled,e=this.centered,g=this.padding;this.relativeSize?(e.items||c.items--,e.width||c.width--,e.height||c.height--,e.depth||c.depth--,null!=f.items&&(c.items*=f.items),null!=f.width&&(c.width*=f.width),null!=f.height&&(c.height*=f.height),null!=f.depth&&(c.depth*=f.depth),e.items||c.items++,e.width||c.width++,e.height||c.height++,e.depth||c.depth++,c.items-=2*g.items,c.width-=2*g.width,c.height-=2*g.height,c.depth-=2*g.depth):(null!=f.items&&(c.items=f.items),null!=f.width&&(c.width=f.width),
null!=f.height&&(c.height=f.height),null!=f.depth&&(c.depth=f.depth));c.items=Math.max(0,Math.floor(c.items));c.width=Math.max(0,Math.floor(c.width));c.height=Math.max(0,Math.floor(c.height));c.depth=Math.max(0,Math.floor(c.depth));return c}make(){super.make();if(null!=this.bind.source){this._helpers.bind.make([{to:"include.shader",trait:"shader",optional:!0}]);var {indices:c,channels:f}=this.props,{shader:e}=this.bind,{sample:g,size:k,items:l,width:r,height:v,depth:w}=this.props,z=g===this.node.attributes["resample.sample"].enum.relative,
A=k===this.node.attributes["resample.size"].enum.relative;this.resampled={};null!=l&&(this.resampled.items=l);null!=r&&(this.resampled.width=r);null!=v&&(this.resampled.height=v);null!=w&&(this.resampled.depth=w);this.centered={};this.centered.items=this.props.centeredW;this.centered.width=this.props.centeredX;this.centered.height=this.props.centeredY;this.centered.depth=this.props.centeredZ;this.padding={};this.padding.items=this.props.paddingW;this.padding.width=this.props.paddingX;this.padding.height=
this.props.paddingY;this.padding.depth=this.props.paddingZ;var H=this._shaders.shader(),F=this._shaders.shader(),L=[null,this._types.number,this._types.vec2,this._types.vec3,this._types.vec4][c];L={dataSize:this._attributes.make(L(0,0,0,0)),dataResolution:this._attributes.make(L(0,0,0,0)),targetSize:this._attributes.make(L(0,0,0,0)),targetResolution:this._attributes.make(L(0,0,0,0)),resampleFactor:this._attributes.make(this._types.vec4(0,0,0,0)),resampleBias:this._attributes.make(this._types.vec4(0,
0,0,0))};this.dataResolution=L.dataResolution;this.dataSize=L.dataSize;this.targetResolution=L.targetResolution;this.targetSize=L.targetSize;this.resampleFactor=L.resampleFactor;this.resampleBias=L.resampleBias;var N=null!=l||null!=r||null!=v||null!=w;H.pipe("resample.padding",L);var R=[],J=!1,Y=["width","height","depth","items"];for(let fa=0;fa<Y.length;fa++){const Z=this.centered[Y[fa]];J||(J=Z);R[fa]=Z?"0.5":"0.0"}J&&(R=`vec4(${R})`,H.pipe(q.binaryOperator(4,"+",R)),N&&F.pipe(q.binaryOperator(4,
"+",R)));z&&(N?(H.pipe("resample.relative",L),F.pipe("resample.relative",L)):F.pipe(q.identity("vec4")));null!=e?(4!==c&&H.pipe(q.truncateVec(4,c)),H.callback(),4!==c&&H.pipe(q.extendVec(c,4)),J&&H.pipe(q.binaryOperator(4,"-",R)),H.pipe(this.bind.source.sourceShader(this._shaders.shader())),4!==f&&H.pipe(q.truncateVec(4,f)),H.join(),null!=this.bind.shader&&H.pipe(this.bind.shader.shaderBind(L)),4!==f&&H.pipe(q.extendVec(f,4))):(J&&H.pipe(q.binaryOperator(4,"-",R)),H.pipe(this.bind.source.sourceShader(this._shaders.shader())));
J&&N&&F.pipe(q.binaryOperator(4,"-",R));this.operator=H;this.indexer=F;this.indices=c;this.relativeSample=z;return this.relativeSize=A}}unmake(){super.unmake();return this.operator=null}resize(){if(null!=this.bind.source){var c=this.bind.source.getActiveDimensions(),f=this.getActiveDimensions(),e=H=>{const F=this.centered[H],L=this.padding[H];f[H]+=2*L;return[F?c[H]/Math.max(1,f[H]):Math.max(1,c[H]-1)/Math.max(1,f[H]-1),L]},[g,k]=Array.from(e("width")),[l,r]=Array.from(e("height")),[v,w]=Array.from(e("depth")),
[z,A]=Array.from(e("items"));1===this.indices?(this.dataResolution.value=1/c.width,this.targetResolution.value=1/f.width,this.dataSize.value=c.width,this.targetSize.value=f.width):(this.dataResolution.value.set(1/c.width,1/c.height,1/c.depth,1/c.items),this.targetResolution.value.set(1/f.width,1/f.height,1/f.depth,1/f.items),this.dataSize.value.set(c.width,c.height,c.depth,c.items),this.targetSize.value.set(f.width,f.height,f.depth,f.items));this.resampleFactor.value.set(g,l,v,z);this.resampleBias.value.set(k,
r,w,A);return super.resize()}}change(c,f,e){if(f.operator||f.resample||f.sampler||f.include)return this.rebuild()}}p.Resample=m;m.initClass()};
shadow$provide[259]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Retext=void 0;D=y(258);class u extends D.Resample{static initClass(){this.traits="node bind operator resample sampler:x sampler:y sampler:z sampler:w include text".split(" ")}init(){return this.sourceSpec=[{to:"operator.source",trait:"text"}]}textShader(q){return this.bind.source.textShader(q)}textIsSDF(){return 0<(null!=this.bind.source?this.bind.source.props.sdf:void 0)}textHeight(){return null!=this.bind.source?
this.bind.source.props.detail:void 0}}p.Retext=u;u.initClass()};
shadow$provide[260]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});var u=y(254);Object.keys(u).forEach(function(f){"default"!==f&&"__esModule"!==f&&(f in p&&p[f]===u[f]||Object.defineProperty(p,f,{enumerable:!0,get:function(){return u[f]}}))});var q=y(256);Object.keys(q).forEach(function(f){"default"!==f&&"__esModule"!==f&&(f in p&&p[f]===q[f]||Object.defineProperty(p,f,{enumerable:!0,get:function(){return q[f]}}))});var m=y(257);Object.keys(m).forEach(function(f){"default"!==
f&&"__esModule"!==f&&(f in p&&p[f]===m[f]||Object.defineProperty(p,f,{enumerable:!0,get:function(){return m[f]}}))});var c=y(259);Object.keys(c).forEach(function(f){"default"!==f&&"__esModule"!==f&&(f in p&&p[f]===c[f]||Object.defineProperty(p,f,{enumerable:!0,get:function(){return c[f]}}))})};
shadow$provide[261]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Clock=void 0;D=y(95);class u extends D.Parent{static initClass(){this.traits=["node","clock","seek","play"]}init(){this.last=this.skew=0;return this.time={now:+new Date/1E3,time:0,delta:0,clock:0,step:0}}make(){return this._listen("clock","clock.tick",this.tick)}reset(){return this.skew=0}tick(q){const {from:m,to:c,speed:f,seek:e,pace:g,delay:k,realtime:l}=this.props,r=this._inherit("clock").getTime(),v=l?r.time:
r.clock,w=l?r.delta:r.step,z=f/g;this.skew+=w*(z-1);this.last>v&&(this.skew=0);this.time.now=r.now+this.skew;this.time.time=r.time;this.time.delta=r.delta;this.time.clock=Math.min(c,m+Math.max(0,(null!=e?e:r.clock+this.skew)-k*z));this.time.step=w*z;this.last=v;return this.trigger(q)}getTime(){return this.time}}p.Clock=u;u.initClass()};
shadow$provide[262]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Now=void 0;D=y(95);class u extends D.Parent{static initClass(){this.traits=["node","clock","now"]}init(){let q;this.now=q=+new Date/1E3;this.skew=0;return this.time={now:q,time:0,delta:0,clock:0,step:0}}make(){this.clockParent=this._inherit("clock");return this._listen("clock","clock.tick",this.tick)}unmake(){return this.clockParent=null}change(q,m,c){if(q["date.now"])return this.skew=0}tick(q){const {seek:m,
pace:c,speed:f}=this.props,e=this.clockParent.getTime();this.skew+=e.step*c/f;null!=m&&(this.skew=m);this.time.now=this.time.time=this.time.clock=(null!=this.props.now?this.props.now:this.now)+this.skew;this.time.delta=this.time.step=e.delta;return this.trigger(q)}getTime(){return this.time}}p.Now=u;u.initClass()};
shadow$provide[263]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});var u=y(261);Object.keys(u).forEach(function(m){"default"!==m&&"__esModule"!==m&&(m in p&&p[m]===u[m]||Object.defineProperty(p,m,{enumerable:!0,get:function(){return u[m]}}))});var q=y(262);Object.keys(q).forEach(function(m){"default"!==m&&"__esModule"!==m&&(m in p&&p[m]===q[m]||Object.defineProperty(p,m,{enumerable:!0,get:function(){return q[m]}}))})};
shadow$provide[264]=function(D,y,Q,p){function u(m,c){return"undefined"!==typeof m&&null!==m?c(m):void 0}Object.defineProperty(p,"__esModule",{value:!0});p.Transform=void 0;D=y(95);class q extends D.Parent{static initClass(){this.traits=["node","vertex","fragment"]}vertex(m,c){let f;return null!=(f=u(this._inherit("vertex"),e=>e.vertex(m,c)))?f:m}fragment(m,c){let f;return null!=(f=u(this._inherit("fragment"),e=>e.fragment(m,c)))?f:m}}p.Transform=q;q.initClass()};
shadow$provide[265]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.Transform3=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(101));D=y(264);class m extends D.Transform{static initClass(){this.traits=["node","vertex","transform3"]}make(){this.uniforms={transformMatrix:this._attributes.make(this._types.mat4())};return this.composer=q.transformComposer()}unmake(){return delete this.uniforms}change(c,f,e){if(c["transform3.pass"])return this.rebuild();if(f.transform3||e)return this.uniforms.transformMatrix.value=
this.composer(this.props.position,this.props.rotation,this.props.quaternion,this.props.scale,this.props.matrix,this.props.eulerOrder)}vertex(c,f){f===this.props.pass&&c.pipe("transform3.position",this.uniforms);return super.vertex(c,f)}}p.Transform3=m;m.initClass()};
shadow$provide[266]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Transform4=void 0;D=y(264);class u extends D.Transform{static initClass(){this.traits=["node","vertex","transform4"]}make(){this.uniforms={transformMatrix:this._attributes.make(this._types.mat4()),transformOffset:this.node.attributes["transform4.position"]};return this.transformMatrix=this.uniforms.transformMatrix.value}unmake(){return delete this.uniforms}change(q,m,c){if(q["transform4.pass"])return this.rebuild();
if(m.transform4||c)return q=this.props.scale,m=this.transformMatrix,m.copy(this.props.matrix),m.scale(q)}vertex(q,m){m===this.props.pass&&q.pipe("transform4.position",this.uniforms);return super.vertex(q,m)}}p.Transform4=u;u.initClass()};
shadow$provide[267]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Vertex=void 0;D=y(264);class u extends D.Transform{static initClass(){this.traits=["node","include","vertex","bind"]}make(){return this._helpers.bind.make([{to:"include.shader",trait:"shader",optional:!0}])}unmake(){return this._helpers.bind.unmake()}change(q,m,c){if(m.include)return this.rebuild()}vertex(q,m){null!=this.bind.shader&&m===this.props.pass&&q.pipe(this.bind.shader.shaderBind());return super.vertex(q,
m)}}p.Vertex=u;u.initClass()};
shadow$provide[268]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Fragment=void 0;D=y(264);class u extends D.Transform{static initClass(){this.traits=["node","include","fragment","bind"]}make(){return this._helpers.bind.make([{to:"include.shader",trait:"shader",optional:!0}])}unmake(){return this._helpers.bind.unmake()}change(q,m,c){if(m.include||q["fragment.gamma"])return this.rebuild()}fragment(q,m){null!=this.bind.shader&&m===this.props.pass&&(this.props.gamma&&q.pipe("mesh.gamma.out"),
q.pipe(this.bind.shader.shaderBind()),q.split(),this.props.gamma&&q.pipe("mesh.gamma.in"),q.pass());return super.fragment(q,m)}}p.Fragment=u;u.initClass()};
shadow$provide[269]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Layer=void 0;D=y(264);class u extends D.Transform{static initClass(){this.traits=["node","vertex","layer"]}make(){this._listen("root","root.resize",this.update);return this.uniforms={layerScale:this._attributes.make(this._types.vec4()),layerBias:this._attributes.make(this._types.vec4())}}update(){var q=this._inherit("root").getCamera();const m=null!=q.aspect?q.aspect:1;q=Math.tan((null!=q.fov?q.fov:1)*Math.PI/
360);const c=this.node.attributes["layer.fit"].enum;let {fit:f}=this.props;const {depth:e}=this.props;switch(f){case c.contain:f=1<m?c.y:c.x;break;case c.cover:f=1<m?c.x:c.y}switch(f){case c.x:this.uniforms.layerScale.value.set(q*m,q*m,1,1);break;case c.y:this.uniforms.layerScale.value.set(q,q,1,1)}return this.uniforms.layerBias.value.set(0,0,-e,0)}change(q,m,c){if(q["layer.fit"]||q["layer.depth"]||c)return this.update()}vertex(q,m){return 2===m?q.pipe("layer.position",this.uniforms):3===m?q.pipe("root.position"):
q}}p.Layer=u;u.initClass()};
shadow$provide[270]=function(D,y,Q,p){function u(f){if("function"!==typeof WeakMap)return null;var e=new WeakMap,g=new WeakMap;return(u=function(k){return k?g:e})(f)}function q(f,e){return"undefined"!==typeof f&&null!==f?e(f):void 0}Object.defineProperty(p,"__esModule",{value:!0});p.Mask=void 0;var m=function(f,e){if(!e&&f&&f.__esModule)return f;if(null===f||"object"!==typeof f&&"function"!==typeof f)return{default:f};if((e=u(e))&&e.has(f))return e.get(f);var g={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor,
l;for(l in f)if("default"!==l&&Object.prototype.hasOwnProperty.call(f,l)){var r=k?Object.getOwnPropertyDescriptor(f,l):null;r&&(r.get||r.set)?Object.defineProperty(g,l,r):g[l]=f[l]}g.default=f;e&&e.set(f,g);return g}(y(105));D=y(95);class c extends D.Parent{static initClass(){this.traits=["node","include","mask","bind"]}make(){return this._helpers.bind.make([{to:"include.shader",trait:"shader",optional:!0}])}unmake(){return this._helpers.bind.unmake()}change(f,e,g){if(e.include)return this.rebuild()}mask(f){let e,
g;null!=this.bind.shader?f?(g=this._shaders.shader(),g.pipe(m.identity("vec4")),g.fan(),g.pipe(f),g.next(),g.pipe(this.bind.shader.shaderBind()),g.end(),g.pipe("float combine(float a, float b) { return min(a, b); }")):(g=this._shaders.shader(),g.pipe(this.bind.shader.shaderBind())):g=f;return null!=(e=q(this._inherit("mask"),k=>k.mask(g)))?e:g}}p.Mask=c;c.initClass()};
shadow$provide[271]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});var u=y(264);Object.keys(u).forEach(function(k){"default"!==k&&"__esModule"!==k&&(k in p&&p[k]===u[k]||Object.defineProperty(p,k,{enumerable:!0,get:function(){return u[k]}}))});var q=y(265);Object.keys(q).forEach(function(k){"default"!==k&&"__esModule"!==k&&(k in p&&p[k]===q[k]||Object.defineProperty(p,k,{enumerable:!0,get:function(){return q[k]}}))});var m=y(266);Object.keys(m).forEach(function(k){"default"!==
k&&"__esModule"!==k&&(k in p&&p[k]===m[k]||Object.defineProperty(p,k,{enumerable:!0,get:function(){return m[k]}}))});var c=y(267);Object.keys(c).forEach(function(k){"default"!==k&&"__esModule"!==k&&(k in p&&p[k]===c[k]||Object.defineProperty(p,k,{enumerable:!0,get:function(){return c[k]}}))});var f=y(268);Object.keys(f).forEach(function(k){"default"!==k&&"__esModule"!==k&&(k in p&&p[k]===f[k]||Object.defineProperty(p,k,{enumerable:!0,get:function(){return f[k]}}))});var e=y(269);Object.keys(e).forEach(function(k){"default"!==
k&&"__esModule"!==k&&(k in p&&p[k]===e[k]||Object.defineProperty(p,k,{enumerable:!0,get:function(){return e[k]}}))});var g=y(270);Object.keys(g).forEach(function(k){"default"!==k&&"__esModule"!==k&&(k in p&&p[k]===g[k]||Object.defineProperty(p,k,{enumerable:!0,get:function(){return g[k]}}))})};
shadow$provide[272]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Clamp=void 0;D=y(255);class u extends D.Operator{static initClass(){this.traits="node bind operator source index clamp".split(" ")}indexShader(q){q.pipe(this.operator);return super.indexShader(q)}sourceShader(q){q.pipe(this.operator);return super.sourceShader(q)}make(){super.make();if(null!=this.bind.source){var q={clampLimit:this._attributes.make(this._types.vec4())};this.clampLimit=q.clampLimit;var m=this._shaders.shader();
m.pipe("clamp.position",q);return this.operator=m}}unmake(){return super.unmake()}resize(){if(null!=this.bind.source){const q=this.bind.source.getActiveDimensions();this.clampLimit.value.set(q.width-1,q.height-1,q.depth-1,q.items-1)}return super.resize()}change(q,m,c){if(m.operator||m.clamp)return this.rebuild()}}p.Clamp=u;u.initClass()};
shadow$provide[273]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Grow=void 0;D=y(255);class u extends D.Operator{static initClass(){this.traits="node bind operator source index grow".split(" ")}sourceShader(q){return q.pipe(this.operator)}make(){super.make();if(null!=this.bind.source){var q={growScale:this.node.attributes["grow.scale"],growMask:this._attributes.make(this._types.vec4()),growAnchor:this._attributes.make(this._types.vec4())};this.growMask=q.growMask.value;this.growAnchor=
q.growAnchor.value;var m=this._shaders.shader();m.require(this.bind.source.sourceShader(this._shaders.shader()));m.pipe("grow.position",q);return this.operator=m}}unmake(){return super.unmake()}resize(){this.update();return super.resize()}update(){const q=this.bind.source.getFutureDimensions(),m=["width","height","depth","items"];return(()=>{const c=[];for(let f=0;f<m.length;f++){const e=m[f],g=this.props[e];this.growMask.setComponent(f,+(null==g));c.push(this.growAnchor.setComponent(f,null!=g?((q[e]||
1)-1)*(.5-.5*g):0))}return c})()}change(q,m,c){if(m.operator)return this.rebuild();if(m.grow)return this.update()}}p.Grow=u;u.initClass()};
shadow$provide[274]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.Join=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(105));D=y(255);class m extends D.Operator{static initClass(){this.traits="node bind operator source index join".split(" ")}indexShader(c){c.pipe(this.operator);return super.indexShader(c)}sourceShader(c){c.pipe(this.operator);return super.sourceShader(c)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(c){var f;
let e;const {order:g,axis:k,stride:l}=this,r=["width","height","depth","items"],v=g.map(H=>r[H-1]);var w=g.indexOf(k);let z=(()=>{const H=[];for(e of Array.from(v))H.push(c[e]);return H})();const A=(null!=(f=z[w+1])?f:1)*l;z.splice(w,2,A);z=z.slice(0,3);z.push(1);f={};for(w=0;w<v.length;w++)e=v[w],f[e]=z[w];return f}make(){super.make();if(null!=this.bind.source){var {order:c}=this.props,{axis:f}=this.props,{overlap:e}=this.props,g=c.join("");null==f&&(f=c[0]);var k=g.indexOf(f);g=g.replace(f,"00").substring(0,
4);var l=[null,"width","height","depth","items"][f];l=this.bind.source.getDimensions()[l];e=Math.min(l-1,e);var r=l-e,v={joinStride:this._attributes.make(this._types.number(r)),joinStrideInv:this._attributes.make(this._types.number(1/r))},w=this._shaders.shader();w.require(q.swizzleVec4(f,1));w.require(q.swizzleVec4(g,4));w.require(q.injectVec4([k,k+1]));w.pipe("join.position",v);w.pipe(q.invertSwizzleVec4(c));this.operator=w;this.order=c;this.axis=f;this.overlap=e;this.length=l;return this.stride=
r}}unmake(){return super.unmake()}change(c,f,e){if(f.join||f.operator)return this.rebuild()}}p.Join=m;m.initClass()};
shadow$provide[275]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.Lerp=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(105));D=y(255);class m extends D.Operator{static initClass(){this.traits="node bind operator source index lerp sampler:x sampler:y sampler:z sampler:w".split(" ")}indexShader(c){c.pipe(this.indexer);return super.indexShader(c)}sourceShader(c){return c.pipe(this.operator)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(c){const f=
this.resampled,e=this.centered,g=this.padding;this.relativeSize?(e.items||c.items--,e.width||c.width--,e.height||c.height--,e.depth||c.depth--,null!=f.items&&(c.items*=f.items),null!=f.width&&(c.width*=f.width),null!=f.height&&(c.height*=f.height),null!=f.depth&&(c.depth*=f.depth),e.items||c.items++,e.width||c.width++,e.height||c.height++,e.depth||c.depth++,c.items-=2*g.items,c.width-=2*g.width,c.height-=2*g.height,c.depth-=2*g.depth):(null!=f.items&&(c.items=f.items),null!=f.width&&(c.width=f.width),
null!=f.height&&(c.height=f.height),null!=f.depth&&(c.depth=f.depth));c.items=Math.max(0,Math.floor(c.items));c.width=Math.max(0,Math.floor(c.width));c.height=Math.max(0,Math.floor(c.height));c.depth=Math.max(0,Math.floor(c.depth));return c}make(){let c;super.make();if(null!=this.bind.source){var {size:f,items:e,width:g,height:k,depth:l}=this.props,r=f===this.node.attributes["lerp.size"].enum.relative;this.resampled={};null!=e&&(this.resampled.items=e);null!=g&&(this.resampled.width=g);null!=k&&(this.resampled.height=
k);null!=l&&(this.resampled.depth=l);this.centered={};this.centered.items=this.props.centeredW;this.centered.width=this.props.centeredX;this.centered.height=this.props.centeredY;this.centered.depth=this.props.centeredZ;this.padding={};this.padding.items=this.props.paddingW;this.padding.width=this.props.paddingX;this.padding.height=this.props.paddingY;this.padding.depth=this.props.paddingZ;var v=this._shaders.shader(),w=this._shaders.shader(),z={resampleFactor:this._attributes.make(this._types.vec4(0,
0,0,0)),resampleBias:this._attributes.make(this._types.vec4(0,0,0,0))};this.resampleFactor=z.resampleFactor;this.resampleBias=z.resampleBias;var A=null!=e||null!=g||null!=k||null!=l;v.pipe("resample.padding",z);var H=[],F=!1,L=["width","height","depth","items"];for(c=0;c<L.length;c++){var N=L[c];N=this.centered[N];F||(F=N);H[c]=N?"0.5":"0.0"}if(F&&A){var R=`vec4(${H})`;v.pipe(q.binaryOperator(4,"+",R));w.pipe(q.binaryOperator(4,"+",R))}A?(v.pipe("resample.relative",z),w.pipe("resample.relative",z)):
(v.pipe(q.identity("vec4")),w.pipe(q.identity("vec4")));F&&A&&(v.pipe(q.binaryOperator(4,"-",R)),w.pipe(q.binaryOperator(4,"-",R)));A=this.bind.source.sourceShader(this._shaders.shader());H=["width","height","depth","items"];for(c=0;c<H.length;c++)N=H[c],F=`lerp.${N}`,null!=this.props[N]&&(A=this._shaders.shader().require(A),A.pipe(F,z));v.pipe(A);this.operator=v;this.indexer=w;return this.relativeSize=r}}unmake(){super.unmake();return this.operator=null}resize(){if(null!=this.bind.source){var c=
this.bind.source.getActiveDimensions(),f=this.getActiveDimensions(),e=H=>{const F=this.centered[H],L=this.padding[H];f[H]+=2*L;return[F?c[H]/Math.max(1,f[H]):Math.max(1,c[H]-1)/Math.max(1,f[H]-1),L]},[g,k]=Array.from(e("width")),[l,r]=Array.from(e("height")),[v,w]=Array.from(e("depth")),[z,A]=Array.from(e("items"));this.resampleFactor.value.set(g,l,v,z);this.resampleBias.value.set(k,r,w,A);return super.resize()}}change(c,f,e){if(f.operator||f.lerp||f.sampler)return this.rebuild()}}p.Lerp=m;m.initClass()};
shadow$provide[276]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Memo=void 0;D=y(255);class u extends D.Operator{static initClass(){this.traits="node bind active operator source index texture memo".split(" ")}sourceShader(q){return this.memo.shaderAbsolute(q,1)}make(){super.make();if(null!=this.bind.source){this._helpers.active.make();this._listen("root","root.update",()=>{if(this.isActive)return this.update()});var {minFilter:q,magFilter:m,type:c}=this.props,f=this.bind.source.getDimensions(),
{items:e,width:g,height:k,depth:l}=f;this.memo=this._renderables.make("memo",{items:e,width:g,height:k,depth:l,minFilter:q,magFilter:m,type:c});f=this._shaders.shader();this.bind.source.sourceShader(f);this.compose=this._renderables.make("memoScreen",{map:f,items:e,width:g,height:k,depth:l});this.memo.adopt(this.compose);this.objects=[this.compose];return this.renders=this.compose.renders}}unmake(){this._helpers.active.unmake();null!=this.bind.source&&(this.memo.unadopt(this.compose),this.memo.dispose(),
this.memo=this.compose=null,super.unmake())}update(){return null!=this.memo?this.memo.render():void 0}resize(){if(null!=this.bind.source){var q=this.bind.source.getActiveDimensions(),{width:m,height:c,depth:f}=q;this.compose.cover(m,c,f);return super.resize()}}change(q,m,c){if(m.texture||m.operator)return this.rebuild()}}p.Memo=u;u.initClass()};
shadow$provide[277]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Readback=void 0;D=y(94);class u extends D.Primitive{static initClass(){this.traits="node bind operator readback entity active".split(" ");this.finals={channels:4}}init(){this.emitter=this.root=null;return this.active={}}make(){super.make();this._compute("readback.data",()=>null!=this.readback?this.readback.data:void 0);this._compute("readback.items",()=>null!=this.readback?this.readback.items:void 0);this._compute("readback.width",
()=>null!=this.readback?this.readback.width:void 0);this._compute("readback.height",()=>null!=this.readback?this.readback.height:void 0);this._compute("readback.depth",()=>null!=this.readback?this.readback.depth:void 0);this._helpers.bind.make([{to:"operator.source",trait:"source"}]);if(null!=this.bind.source){var {type:q,channels:m,expr:c}=this.props;this.root=this._inherit("root");this._listen("root","root.update",this.update);var {items:f,width:e,height:g,depth:k}=this.bind.source.getDimensions(),
l=this.bind.source.sourceShader(this._shaders.shader());this.readback=this._renderables.make("readback",{map:l,items:f,width:e,height:g,depth:k,channels:m,type:q});null!=c&&this.readback.setCallback(c);this._helpers.active.make()}}unmake(){null!=this.readback&&(this.readback.dispose(),this.emitter=this.root=this.readback=null,this.active={});this._helpers.active.unmake();return this._helpers.bind.unmake()}update(){null!=this.readback&&this.isActive&&(this.readback.update(null!=this.root?this.root.getCamera():
void 0),this.readback.post(),null!=this.props.expr&&this.readback.iterate())}resize(){let q;if(null!=this.readback){var {items:m,width:c,height:f,depth:e}=this.bind.source.getActiveDimensions();this.readback.setActive(m,c,f,e);this.strideI=m;this.strideJ=q=m*c;return this.strideK=q*f}}change(q,m,c){if(q["readback.type"])return this.rebuild();if(q["readback.expr"]&&this.readback)return this.readback.setCallback(this.props.expr)}}p.Readback=u;u.initClass()};
shadow$provide[278]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Repeat=void 0;D=y(255);class u extends D.Operator{static initClass(){this.traits="node bind operator source index repeat".split(" ")}indexShader(q){q.pipe(this.operator);return super.indexShader(q)}sourceShader(q){q.pipe(this.operator);return super.sourceShader(q)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(q){const m=
this.resample;return{items:m.items*q.items,width:m.width*q.width,height:m.height*q.height,depth:m.depth*q.depth}}make(){super.make();if(null!=this.bind.source){this.resample={};var q={repeatModulus:this._attributes.make(this._types.vec4())};this.repeatModulus=q.repeatModulus;var m=this._shaders.shader();m.pipe("repeat.position",q);return this.operator=m}}unmake(){return super.unmake()}resize(){if(null!=this.bind.source){const q=this.bind.source.getActiveDimensions();this.repeatModulus.value.set(q.width,
q.height,q.depth,q.items)}return super.resize()}change(q,m,c){if(m.operator||m.repeat)return this.rebuild();if(c)return["items","width","height","depth"].map(f=>this.resample[f]=this.props[f])}}p.Repeat=u;u.initClass()};
shadow$provide[279]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Reverse=void 0;D=y(255);class u extends D.Operator{static initClass(){this.traits="node bind operator source index reverse".split(" ")}getDimensions(){return this.bind.source.getDimensions()}getActiveDimensions(){return this.bind.source.getActiveDimensions()}getFutureDimensions(){return this.bind.source.getFutureDimensions()}getIndexDimensions(){return this.bind.source.getIndexDimensions()}sourceShader(q){q.pipe("reverse.position",
this.uniforms);return this.bind.source.sourceShader(q)}_resolveScale(q,m){return this.props[q]?-1:1}_resolveOffset(q,m){m=m[q];return this.props[q]?m-1:0}make(){super.make();if(null!=this.bind.source)return this.uniforms={reverseScale:this._attributes.make(this._types.vec4()),reverseOffset:this._attributes.make(this._types.vec4())}}unmake(){return super.unmake()}resize(){if(null!=this.bind.source){var q=this.bind.source.getActiveDimensions();this.uniforms.reverseScale.value.set(this._resolveScale("width",
q),this._resolveScale("height",q),this._resolveScale("depth",q),this._resolveScale("items",q));this.uniforms.reverseOffset.value.set(this._resolveOffset("width",q),this._resolveOffset("height",q),this._resolveOffset("depth",q),this._resolveOffset("items",q));return super.resize()}}change(q,m,c){if(m.operator)return this.rebuild();if(m.reverse)return this.resize()}}p.Reverse=u;u.initClass()};
shadow$provide[280]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.Swizzle=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(105));D=y(255);class m extends D.Operator{static initClass(){this.traits="node bind operator source index swizzle".split(" ")}sourceShader(c){c=super.sourceShader(c);this.swizzler&&c.pipe(this.swizzler);return c}make(){super.make();if(null!=this.bind.source){var {order:c}=this.props;if("1234"!==c.join())return this.swizzler=q.swizzleVec4(c,4)}}unmake(){super.unmake();
return this.swizzler=null}change(c,f,e){if(f.swizzle||f.operator)return this.rebuild()}}p.Swizzle=m;m.initClass()};
shadow$provide[281]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Spread=void 0;D=y(255);class u extends D.Operator{static initClass(){this.traits="node bind operator source index spread".split(" ")}sourceShader(q){return q.pipe(this.operator)}make(){super.make();if(null!=this.bind.source){var q={spreadMatrix:this._attributes.make(this._types.mat4()),spreadOffset:this._attributes.make(this._types.vec4())};this.spreadMatrix=q.spreadMatrix;this.spreadOffset=q.spreadOffset;var m=
this._shaders.shader();m.require(this.bind.source.sourceShader(this._shaders.shader()));m.pipe("spread.position",q);return this.operator=m}}unmake(){return super.unmake()}resize(){this.update();return super.resize()}update(){let q,m,c,f;const e=this.bind.source.getFutureDimensions(),g=this.spreadMatrix.value.elements,k=["width","height","depth","items"],l=["alignWidth","alignHeight","alignDepth","alignItems"],{unit:r}=this.props,v=this.node.attributes["spread.unit"].enum,w=(()=>{switch(r){case v.relative:return(z,
A,H,F)=>g[4*A+H]=F/Math.max(1,e[z]-1);case v.absolute:return(z,A,H,F)=>g[4*A+H]=F}})();return(()=>{const z=[];for(m=0;m<k.length;m++){q=k[m];const F=this.props[q];var A=this.props[l[m]];this.spreadOffset.value.setComponent(m,null!=F?-((null!=e[q]?e[q]:1)-1)*(.5-.5*A):0);A=z;var H=A.push;const L=[];for(c=0;3>=c;c++){let N;f=null!=(N=null!=F?F.getComponent(c):void 0)?N:0;L.push(g[4*m+c]=w(q,m,c,f))}H.call(A,L)}return z})()}change(q,m,c){if(m.operator)return this.rebuild();if(m.spread)return this.update()}}
p.Spread=u;u.initClass()};
shadow$provide[282]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.Split=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(105));D=y(255);class m extends D.Operator{static initClass(){this.traits="node bind operator source index split".split(" ")}indexShader(c){c.pipe(this.operator);return super.indexShader(c)}sourceShader(c){c.pipe(this.operator);return super.sourceShader(c)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(c){let f;
var {order:e}=this,{axis:g}=this,{overlap:k}=this,{length:l}=this;const {stride:r}=this,v=["width","height","depth","items"],w=e.map(z=>v[z-1]);g=e.indexOf(g);e=(()=>{const z=[];for(f of Array.from(w))z.push(c[f]);return z})();e.splice(g,1,l,Math.floor((e[g]-k)/r));e=e.slice(0,4);k={};for(l=0;l<w.length;l++)f=w[l],k[f]=e[l];return k}make(){var c;super.make();if(null!=this.bind.source){var {order:f}=this.props,{axis:e}=this.props,{overlap:g}=this.props,{length:k}=this.props,l=f.join("");null==e&&(e=
f[0]);var r=l.indexOf(e),v=l[r]+(null!=(c=l[r+1])?c:0);c=l.replace(v[1],"").replace(v[0],"0")+"0";g=Math.min(k-1,g);l=k-g;var w={splitStride:this._attributes.make(this._types.number(l))},z=this._shaders.shader();z.require(q.swizzleVec4(v,2));z.require(q.swizzleVec4(c,4));z.require(q.injectVec4(r));z.pipe("split.position",w);z.pipe(q.invertSwizzleVec4(f));this.operator=z;this.order=f;this.axis=e;this.overlap=g;this.length=k;return this.stride=l}}unmake(){return super.unmake()}change(c,f,e){if(c["split.axis"]||
c["split.order"]||f.operator)return this.rebuild()}}p.Split=m;m.initClass()};
shadow$provide[283]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Slice=void 0;D=y(255);class u extends D.Operator{static initClass(){this.traits="node bind operator source index slice".split(" ")}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}sourceShader(q){q.pipe("slice.position",
this.uniforms);return this.bind.source.sourceShader(q)}_resolve(q,m){var c=this.props[q];q=m[q];if(null==c)return[0,q];m=Math.round(c.x);m=0>m?q+m:m;c=Math.round(c.y);c=Math.max(m,0>c?q+c:c);return[m,c-m]}_resample(q){q.width=this._resolve("width",q)[1];q.height=this._resolve("height",q)[1];q.depth=this._resolve("depth",q)[1];q.items=this._resolve("items",q)[1];return q}make(){super.make();if(null!=this.bind.source)return this.uniforms={sliceOffset:this._attributes.make(this._types.vec4())}}unmake(){return super.unmake()}resize(){if(null!=
this.bind.source){var q=this.bind.source.getActiveDimensions();this.uniforms.sliceOffset.value.set(this._resolve("width",q)[0],this._resolve("height",q)[0],this._resolve("depth",q)[0],this._resolve("items",q)[0]);return super.resize()}}change(q,m,c){if(m.operator)return this.rebuild();if(m.slice)return this.resize()}}p.Slice=u;u.initClass()};
shadow$provide[284]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.Subdivide=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(105));D=y(255);class m extends D.Operator{static initClass(){this.traits="node bind operator source index subdivide".split(" ")}indexShader(c){c.pipe(this.indexer);return super.indexShader(c)}sourceShader(c){return c.pipe(this.operator)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(c){const f=
this.resampled;c.items--;c.width--;c.height--;c.depth--;null!=f.items&&(c.items*=f.items);null!=f.width&&(c.width*=f.width);null!=f.height&&(c.height*=f.height);null!=f.depth&&(c.depth*=f.depth);c.items++;c.width++;c.height++;c.depth++;return c}make(){super.make();if(null!=this.bind.source){var {lerp:c}=this.props,{items:f,width:e,height:g,depth:k}=this.props;this.resampled={};null!=f&&(this.resampled.items=f);null!=e&&(this.resampled.width=e);null!=g&&(this.resampled.height=g);null!=k&&(this.resampled.depth=
k);var l=this._shaders.shader(),r=this._shaders.shader(),v={resampleFactor:this._attributes.make(this._types.vec4(0,0,0,0)),subdivideBevel:this.node.attributes["subdivide.bevel"]};this.resampleFactor=v.resampleFactor;this.resampleBias=v.resampleBias;null!=f||null!=e||null!=g||null!=k?(l.pipe("resample.relative",v),r.pipe("resample.relative",v)):(l.pipe(q.identity("vec4")),r.pipe(q.identity("vec4")));var w=this.bind.source.sourceShader(this._shaders.shader());c=c?".lerp":"";var z=["width","height",
"depth","items"];for(let A=0;A<z.length;A++){const H=z[A],F=`subdivide.${H}${c}`;null!=this.props[H]&&(w=this._shaders.shader().require(w),w.pipe(F,v))}l.pipe(w);this.operator=l;return this.indexer=r}}unmake(){super.unmake();return this.operator=null}resize(){if(null!=this.bind.source){var c=this.bind.source.getActiveDimensions(),f=this.getActiveDimensions(),e=r=>Math.max(1,c[r]-1)/Math.max(1,f[r]-1),g=e("width"),k=e("height"),l=e("depth");e=e("items");this.resampleFactor.value.set(g,k,l,e);return super.resize()}}change(c,
f,e){if(f.operator||f.subdivide)return this.rebuild()}}p.Subdivide=m;m.initClass()};
shadow$provide[285]=function(D,y,Q,p){function u(f){if("function"!==typeof WeakMap)return null;var e=new WeakMap,g=new WeakMap;return(u=function(k){return k?g:e})(f)}Object.defineProperty(p,"__esModule",{value:!0});p.Transpose=void 0;var q=function(f,e){if(!e&&f&&f.__esModule)return f;if(null===f||"object"!==typeof f&&"function"!==typeof f)return{default:f};if((e=u(e))&&e.has(f))return e.get(f);var g={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor,l;for(l in f)if("default"!==l&&Object.prototype.hasOwnProperty.call(f,
l)){var r=k?Object.getOwnPropertyDescriptor(f,l):null;r&&(r.get||r.set)?Object.defineProperty(g,l,r):g[l]=f[l]}g.default=f;e&&e.set(f,g);return g}(y(105));D=y(255);const m={1:"width",2:"height",3:"depth",4:"items"};class c extends D.Operator{static initClass(){this.traits="node bind operator source index transpose".split(" ")}indexShader(f){this.swizzler&&f.pipe(this.swizzler);return super.indexShader(f)}sourceShader(f){this.swizzler&&f.pipe(this.swizzler);return super.sourceShader(f)}getDimensions(){return this._remap(this.transpose,
this.bind.source.getDimensions())}getActiveDimensions(){return this._remap(this.transpose,this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._remap(this.transpose,this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._remap(this.transpose,this.bind.source.getIndexDimensions())}_remap(f,e){const g={};for(let k=0;3>=k;k++){const l=m[f[k]];g[m[k+1]]=null!=e[l]?e[l]:1}return g}make(){super.make();if(null!=this.bind.source){var {order:f}=this.props;"1234"!==f.join()&&
(this.swizzler=q.invertSwizzleVec4(f));this.transpose=f;return this.trigger({type:"source.rebuild"})}}unmake(){super.unmake();return this.swizzler=null}change(f,e,g){if(e.transpose||e.operator)return this.rebuild()}}p.Transpose=c;c.initClass()};
shadow$provide[286]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});var u=y(272);Object.keys(u).forEach(function(F){"default"!==F&&"__esModule"!==F&&(F in p&&p[F]===u[F]||Object.defineProperty(p,F,{enumerable:!0,get:function(){return u[F]}}))});var q=y(273);Object.keys(q).forEach(function(F){"default"!==F&&"__esModule"!==F&&(F in p&&p[F]===q[F]||Object.defineProperty(p,F,{enumerable:!0,get:function(){return q[F]}}))});var m=y(274);Object.keys(m).forEach(function(F){"default"!==
F&&"__esModule"!==F&&(F in p&&p[F]===m[F]||Object.defineProperty(p,F,{enumerable:!0,get:function(){return m[F]}}))});var c=y(275);Object.keys(c).forEach(function(F){"default"!==F&&"__esModule"!==F&&(F in p&&p[F]===c[F]||Object.defineProperty(p,F,{enumerable:!0,get:function(){return c[F]}}))});var f=y(276);Object.keys(f).forEach(function(F){"default"!==F&&"__esModule"!==F&&(F in p&&p[F]===f[F]||Object.defineProperty(p,F,{enumerable:!0,get:function(){return f[F]}}))});var e=y(277);Object.keys(e).forEach(function(F){"default"!==
F&&"__esModule"!==F&&(F in p&&p[F]===e[F]||Object.defineProperty(p,F,{enumerable:!0,get:function(){return e[F]}}))});var g=y(258);Object.keys(g).forEach(function(F){"default"!==F&&"__esModule"!==F&&(F in p&&p[F]===g[F]||Object.defineProperty(p,F,{enumerable:!0,get:function(){return g[F]}}))});var k=y(278);Object.keys(k).forEach(function(F){"default"!==F&&"__esModule"!==F&&(F in p&&p[F]===k[F]||Object.defineProperty(p,F,{enumerable:!0,get:function(){return k[F]}}))});var l=y(279);Object.keys(l).forEach(function(F){"default"!==
F&&"__esModule"!==F&&(F in p&&p[F]===l[F]||Object.defineProperty(p,F,{enumerable:!0,get:function(){return l[F]}}))});var r=y(280);Object.keys(r).forEach(function(F){"default"!==F&&"__esModule"!==F&&(F in p&&p[F]===r[F]||Object.defineProperty(p,F,{enumerable:!0,get:function(){return r[F]}}))});var v=y(281);Object.keys(v).forEach(function(F){"default"!==F&&"__esModule"!==F&&(F in p&&p[F]===v[F]||Object.defineProperty(p,F,{enumerable:!0,get:function(){return v[F]}}))});var w=y(282);Object.keys(w).forEach(function(F){"default"!==
F&&"__esModule"!==F&&(F in p&&p[F]===w[F]||Object.defineProperty(p,F,{enumerable:!0,get:function(){return w[F]}}))});var z=y(283);Object.keys(z).forEach(function(F){"default"!==F&&"__esModule"!==F&&(F in p&&p[F]===z[F]||Object.defineProperty(p,F,{enumerable:!0,get:function(){return z[F]}}))});var A=y(284);Object.keys(A).forEach(function(F){"default"!==F&&"__esModule"!==F&&(F in p&&p[F]===A[F]||Object.defineProperty(p,F,{enumerable:!0,get:function(){return A[F]}}))});var H=y(285);Object.keys(H).forEach(function(F){"default"!==
F&&"__esModule"!==F&&(F in p&&p[F]===H[F]||Object.defineProperty(p,F,{enumerable:!0,get:function(){return H[F]}}))})};
shadow$provide[287]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Transition=void 0;D=y(95);class u extends D.Parent{static initClass(){this.traits="node transition transform mask visible active".split(" ")}init(){this.uniforms=this.animate=null;this.state={isVisible:!0,isActive:!0,enter:1,exit:1};return this.locked=this.latched=null}make(){this.uniforms={transitionFrom:this._attributes.make(this._types.vec4()),transitionTo:this._attributes.make(this._types.vec4()),transitionActive:this._attributes.make(this._types.bool()),
transitionScale:this._attributes.make(this._types.vec4()),transitionBias:this._attributes.make(this._types.vec4()),transitionEnter:this._attributes.make(this._types.number()),transitionExit:this._attributes.make(this._types.number()),transitionSkew:this._attributes.make(this._types.number())};const q=this._inherit("slide"),m=this._inherit("visible"),c=this._inherit("active");this._listen(q,"transition.latch",f=>this.latch(f.step));this._listen(q,"transition.release",()=>this.release());this._listen(m,
"visible.change",()=>this.update(this.state.isVisible=m.isVisible));this._listen(c,"active.change",()=>this.update(this.state.isActive=c.isActive));this.animate=this._animator.make(this._types.vec2(1,1),{step:f=>{this.state.enter=f.x;this.state.exit=f.y;return this.update()},complete:f=>this.complete(f)});return this.move=null!=this.props.from||null!=this.props.to}unmake(){return this.animate.dispose()}latch(q){this.locked=null;this.latched=q={isVisible:this.state.isVisible,isActive:this.state.isActive,
step:q};if(!this.isVisible){const [m,c]=Array.from(0<=q.step?[0,1]:[1,0]);return this.animate.set(m,c)}}release(){const {latched:q}=this,{state:m}=this;this.latched=null;if(q.isVisible!==m.isVisible){const c=0<=q.step,f=m.isVisible,[e,g]=Array.from(f?[1,1]:c?[1,0]:[0,1]);let {duration:k,durationEnter:l,durationExit:r}=this.props;null==l&&(l=k);null==r&&(r=k);let {delay:v,delayEnter:w,delayExit:z}=this.props;null==w&&(w=v);null==z&&(z=v);this.animate.immediate({x:e,y:g},{duration:f*l+!f*r,delay:f*
w+!f*z,ease:"linear"});this.locked={isVisible:!0,isActive:q.isActive||m.isActive}}return this.update()}complete(q){if(q)return this.locked=null,this.update()}update(){if(null==this.latched){var {enter:q,exit:m}=this.props;null==q&&({enter:q}=this.state);null==m&&({exit:m}=this.state);var c=q*m,f=0<c;this.uniforms.transitionEnter.value=q;this.uniforms.transitionExit.value=m;this.uniforms.transitionActive.value=1>c;f&&(f=!!this.state.isVisible);null!=this.locked&&(f=this.locked.isVisible);this.isVisible!==
f&&(this.isVisible=f,this.trigger({type:"visible.change"}));c=!!(this.state.isActive||null!=this.locked&&this.locked.isActive);if(this.isActive!==c)return this.isActive=c,this.trigger({type:"active.change"})}}change(q,m,c){(q["transition.enter"]||q["transition.exit"]||c)&&this.update();if(q["transition.stagger"]||c){var {stagger:f}=this.props;q=0>f.x;m=0>f.y;c=0>f.z;const e=0>f.w,g=Math.abs(f.x),k=Math.abs(f.y),l=Math.abs(f.z);f=Math.abs(f.w);this.uniforms.transitionSkew.value=g+k+l+f;this.uniforms.transitionScale.value.set((1-
2*q)*g,(1-2*m)*k,(1-2*c)*l,(1-2*e)*f);return this.uniforms.transitionBias.value.set(q*g,m*k,c*l,e*f)}}}p.Transition=u;u.initClass()};
shadow$provide[288]=function(D,y,Q,p){function u(m,c){return"undefined"!==typeof m&&null!==m?c(m):void 0}Object.defineProperty(p,"__esModule",{value:!0});p.Move=void 0;D=y(287);class q extends D.Transition{static initClass(){this.traits="node transition vertex move visible active".split(" ")}make(){super.make();const m={moveFrom:this.node.attributes["move.from"],moveTo:this.node.attributes["move.to"]};for(const c in m)this.uniforms[c]=m[c]}vertex(m,c){let f;c===this.props.pass&&m.pipe("move.position",
this.uniforms);return null!=(f=u(this._inherit("vertex"),e=>e.vertex(m,c)))?f:m}}p.Move=q;q.initClass()};
shadow$provide[289]=function(D,y,Q,p){function u(q,m,c){return Math.max(m,Math.min(c,q))}Object.defineProperty(p,"__esModule",{value:!0});p.clamp=u;p.cosine=function(q){return.5-.5*Math.cos(u(q,0,1)*Math.PI)};p.binary=function(q){return+(.5<=q)};p.hold=function(q){return+(1<=q)}};
shadow$provide[290]=function(D,y,Q,p){function u(f){if("function"!==typeof WeakMap)return null;var e=new WeakMap,g=new WeakMap;return(u=function(k){return k?g:e})(f)}Object.defineProperty(p,"__esModule",{value:!0});p.Track=void 0;var q=function(f,e){if(!e&&f&&f.__esModule)return f;if(null===f||"object"!==typeof f&&"function"!==typeof f)return{default:f};if((e=u(e))&&e.has(f))return e.get(f);var g={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor,l;for(l in f)if("default"!==l&&Object.prototype.hasOwnProperty.call(f,
l)){var r=k?Object.getOwnPropertyDescriptor(f,l):null;r&&(r.get||r.set)?Object.defineProperty(g,l,r):g[l]=f[l]}g.default=f;e&&e.set(f,g);return g}(y(289));D=y(94);const m=function(f){const e={};for(const g in f){const k=f[g];e[g]=k instanceof Array?k.slice():null!=k&&"object"===typeof k?m(k):k}return e};class c extends D.Primitive{static initClass(){this.traits=["node","track","seek","bind"]}init(){this.handlers={};this.values=this.script=null;this.playhead=0;return this.expr=this.section=this.velocity=
null}make(){let f;this._helpers.bind.make([{to:"track.target",trait:"node",callback:null}]);const {script:e}=this.props,{node:g}=this.bind.target;this.targetNode=g;return[this.script,this.values,this.start,this.end]=Array.from(f=this._process(g,e)),f}unmake(){this.unbindExpr();this._helpers.bind.unmake();this.script=this.values=this.start=this.end=this.section=this.expr=null;return this.playhead=0}bindExpr(f){this.unbindExpr();this.expr=f;this.targetNode.bind(f,!0);const {clock:e}=this.targetNode,
g=this;return this._attributes.bind(this.measure=function(){let k=null;return()=>{const {step:l}=e.getTime();null!=k&&(g.velocity=(g.playhead-k)/l);return k=g.playhead}}())}unbindExpr(){null!=this.expr&&this.targetNode.unbind(this.expr,!0);null!=this.measure&&this._attributes.unbind(this.measure);return this.expr=this.measure=null}_process(f,e){let g;let k;if(e instanceof Array){var l={};for(var r=0;r<e.length;r++)k=e[r],l[r]=k;e=l}l=[];for(A in e)k=e[A],null==k&&(k=[]),k instanceof Array?k={key:+A,
props:null!=k[0]?m(k[0]):{},bind:null!=k[1]?m(k[1]):{}}:(k=null!=k.key||k.props||k.bind?m(k):{props:m(k)},k.key=null!=k.key?+k.key:+A,null==k.props&&(k.props={}),null==k.bind&&(k.bind={})),l.push(k);e=l;if(!e.length)return[[],{},0,0];e.sort((H,F)=>H.key-F.key);r=e[0].key;const v=e[e.length-1].key;for(A in e){k=e[A];null!=w&&(w.next=k);var w=k}w.next=w;e=l;l={};const z={};for(A in e)for(g in k=e[A],k.props)w=k.props[g],l[g]=!0;for(A in e)for(g in k=e[A],k.bind)w=k.bind[g],l[g]=!0;for(g in l)l[g]=f.get(g);
try{for(g in l)z[g]=[f.attribute(g).T.make(),f.attribute(g).T.make(),f.attribute(g).T.make()]}catch(H){throw console.warn(this.node.toMarkup()),f=`${this.node.toString()} - Target ${f} has no \`${g}\` property`,Error(f);}var A=[];for(k of Array.from(e)){for(g in l)if(w=l[g],w=f.validate(g,null!=k.props[g]?k.props[g]:w),l[g]=k.props[g]=w,null!=k.bind[g]&&"function"!==typeof k.bind[g])throw console.warn(this.node.toMarkup()),f=`${this.node.toString()} - Bind expression \`${k.bind[g]}\` on property \`${g}\` is not a function`,
Error(f);A.push(k)}return[A,z,r,v]}update(){let {playhead:f}=this;const {script:e}=this,{ease:g,seek:k}=this.props,l=this.targetNode;null!=k&&(f=k);if(e.length){let J;var r=function(){let Y=e[0];for(let fa=0;fa<e.length;fa++){const Z=e[fa];if(Z.key>f)break;Y=Z}return Y},{section:v}=this;if(!v||f<v.key||f>v.next.key)v=r(e,f);if(v!==this.section){var w=this.section=v,z=v.next,A=w.key,H=z.key,F=(()=>{switch(g){case "linear":case 0:return q.clamp;case "cosine":case 1:return q.cosine;case "binary":case 2:return q.binary;
case "hold":case 3:return q.hold;default:return q.cosine}})(),{clock:L}=l,N=Y=>{if(null==this.velocity)return this.playhead;const fa=L.getTime();return this.playhead+this.velocity*(Y-fa.time)},R=function(){const Y=1/Math.max(1E-4,H-A);return fa=>F((N(fa)-A)*Y,0,1)}();r=Y=>{const fa=w.bind[Y],Z=z.bind[Y],da=w.props[Y],la=z.props[Y],W=function(){console.warn(l.toMarkup());throw Error(`${this.node.toString()} - Invalid expression result on track \`${Y}\``);},ra=l.attribute(Y),za=this.values[Y],O=this._animator;
return fa&&Z?((pa,Ta,na)=>function(Ra,Wa){let Xa;pa[0]=Xa=ra.T.validate(fa(Ra,Wa),pa[0],W);pa[1]=Wa=ra.T.validate(Z(Ra,Wa),pa[1],W);return pa[2]=O.lerp(ra.T,Xa,Wa,R(Ra),pa[2])})(za,w,z):fa?((pa,Ta,na)=>function(Ra,Wa){pa[0]=Wa=ra.T.validate(fa(Ra,Wa),pa[0],W);return pa[1]=O.lerp(ra.T,Wa,la,R(Ra),pa[1])})(za,w,z):Z?((pa,Ta,na)=>function(Ra,Wa){pa[0]=Wa=ra.T.validate(Z(Ra,Wa),pa[0],W);return pa[1]=O.lerp(ra.T,da,Wa,R(Ra),pa[1])})(za,w,z):((pa,Ta,na)=>(Ra,Wa)=>pa[0]=O.lerp(ra.T,da,la,R(Ra),pa[0]))(za,
w,z)};v={};for(J in w.bind)null==v[J]&&(v[J]=r(J));for(J in z.bind)null==v[J]&&(v[J]=r(J));for(J in w.props)null==v[J]&&(v[J]=r(J));for(J in z.props)null==v[J]&&(v[J]=r(J));return this.bindExpr(v)}}}change(f,e,g){if(f["track.target"]||f["track.script"]||f["track.mode"])return this.rebuild();if(f["seek.seek"]||g)return this.update()}}p.Track=c;c.initClass()};
shadow$provide[291]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Play=void 0;D=y(290);class u extends D.Track{static initClass(){this.traits=["node","track","trigger","play","bind"]}init(){super.init();return this.start=this.skew=null}reset(q){null==q&&(q=!0);this.skew=q?0:null;return this.start=null}make(){super.make();this._listen("slide","slide.step",m=>{const {trigger:c}=this.props;if(null!=c&&m.index===c)return this.reset();if(null!=c&&0===m.index)return this.reset(!1)});
this.props.trigger&&null!=this._inherit("slide")||this.reset();const q=this._inherit("clock");return this._listen(q,"clock.tick",()=>{const {from:m,to:c,speed:f,pace:e,delay:g,realtime:k}=this.props;var l=q.getTime();if(null!=this.skew){var r=k?l.time:l.clock;l=k?l.delta:l.step;const v=f/e;null==this.start&&(this.start=r);this.skew+=l*(v-1);r=Math.max(0,r-this.start+this.skew-g*v);this.props.loop&&(r%=c-m);this.playhead=Math.min(c,m+r)}else this.playhead=0;return this.update()})}update(){return super.update()}change(q,
m,c){return q["trigger.trigger"]||q["play.realtime"]?this.rebuild():super.change(q,m,c)}}p.Play=u;u.initClass()};
shadow$provide[292]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Present=void 0;D=y(95);class u extends D.Parent{static initClass(){this.traits=["node","present"]}init(){}make(){this.nodes=[];this.steps=[];this.length=0;this.last=[];this.index=0;this.dirty=[];this._listen("root","root.update",this.update);return this._compute("present.length",()=>this.length)}adopt(q){const {node:m}=q;0>this.nodes.indexOf(q)&&this.nodes.push(m);return this.dirty.push(q)}unadopt(q){this.nodes=
this.nodes.filter(m=>m!==q);return this.dirty.push(q)}update(){if(this.dirty.length){for(const q of Array.from(this.dirty))this.slideReset(q);[this.steps,this.indices]=Array.from(this.process(this.nodes));this.length=this.steps.length;this.index=null;this.go(this.props.index);return this.dirty=[]}}slideLatch(q,m,c){return q.slideLatch(m,c)}slideStep(q,m,c){return q.slideStep(this.mapIndex(q,m),c)}slideRelease(q,m){return q.slideRelease()}slideReset(q){return q.slideReset()}mapIndex(q,m){return m-
this.indices[q.node._id]}process(q){const m=(e=>g=>{let k,l;const r=[];for(;g&&([g,k]=Array.from(l=[e(g),g]),l);)r.push(k);return r})(function(e){return e.parent.traits.hash.present?null:e.parent}),c=e=>0<=q.indexOf(e),f=e=>e.sort((g,k)=>g.order-k.order);return function(e){let g;const [k,l]=Array.from(e),r={};let v=[];e=function(z,A){let H;const {props:F}=H=z[0];var L=z[1];const N=null!=L?r[L._id]:0;L=null!=F.from?N+F.from:A-F.early;A=null!=F.to?N+F.to:A+F.steps+F.late;L=Math.max(0,L);A=Math.min(100,
A);null==r[H._id]&&(r[H._id]=L);for(let R=L,J=A,Y=L<=J;Y?R<J:R>J;Y?R++:R--)v[R]=(null!=v[R]?v[R]:v[R]=[]).concat(z);return F.steps};let w=0;for(g of Array.from(k))w+=e(g,w);for(g of Array.from(l))e(g,0);v=(()=>{const z=[];for(g of Array.from(v)){var A=z,H=A.push,F;if(F=g){const L=[];for(let N=0;N<F.length;N++){const R=F[N];F.indexOf(R)===N&&L.push(R)}F=L}else F=[];H.call(A,f(F))}return z})();return[v,r]}(function(e){const g=[],k=[];for(const l of Array.from(e))(null!=l[0].props.steps?g:k).push(l);
return[g,k]}((e=>e.sort(function(g,k){const l=g.length,r=k.length;let v=Math.min(l,r);for(let w=1,z=v,A=1<=z;A?w<=z:w>=z;A?w++:w--){const H=g[l-w],F=k[r-w],L=H.props.order,N=F.props.order;if(null!=L||null!=N){if(null!=L&&null!=N&&0!==(v=L-N))return v;if(null!=L)return-1;if(null!=N)return 1}if(F.order!==H.order)return F.order-H.order}v=l-r;return 0!==v?v:0}))((e=>Array.from(e).map(g=>m(g).filter(c)))(q))))}go(q){var m;let c;q=Math.max(0,Math.min(this.length+1,+q||0));const f=null!=(m=this.steps[q-
1])?m:[];m=this.props.directed?q-this.index:1;this.index=q;const e=(()=>{const v=[];for(c of Array.from(f))0>this.last.indexOf(c)&&v.push(c);return v})(),g=(()=>{const v=[];for(c of Array.from(this.last))0>f.indexOf(c)&&v.push(c);return v})(),k=(()=>{const v=[];for(c of Array.from(f))0>e.indexOf(c)&&0>g.indexOf(c)&&v.push(c);return v})(),l=v=>v.sort((w,z)=>w.order-z.order),r=v=>v.sort((w,z)=>z.order-w.order);for(c of Array.from(l(e)))this.slideLatch(c.controller,!0,m);for(c of Array.from(l(k)))this.slideLatch(c.controller,
null,m);for(c of Array.from(l(g)))this.slideLatch(c.controller,!1,m);for(c of Array.from(e))this.slideStep(c.controller,q,m);for(c of Array.from(k))this.slideStep(c.controller,q,m);for(c of Array.from(g))this.slideStep(c.controller,q,m);for(c of Array.from(r(e)))this.slideRelease(c.controller);for(c of Array.from(r(k)))this.slideRelease(c.controller);for(c of Array.from(r(g)))this.slideRelease(c.controller);this.last=f}change(q,m,c){if(q["present.index"]||c)return this.go(this.props.index)}}p.Present=
u;u.initClass()};
shadow$provide[293]=function(D,y,Q,p){function u(f){if("function"!==typeof WeakMap)return null;var e=new WeakMap,g=new WeakMap;return(u=function(k){return k?g:e})(f)}function q(f,e){return"undefined"!==typeof f&&null!==f?e(f):void 0}Object.defineProperty(p,"__esModule",{value:!0});p.Reveal=void 0;var m=function(f,e){if(!e&&f&&f.__esModule)return f;if(null===f||"object"!==typeof f&&"function"!==typeof f)return{default:f};if((e=u(e))&&e.has(f))return e.get(f);var g={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor,
l;for(l in f)if("default"!==l&&Object.prototype.hasOwnProperty.call(f,l)){var r=k?Object.getOwnPropertyDescriptor(f,l):null;r&&(r.get||r.set)?Object.defineProperty(g,l,r):g[l]=f[l]}g.default=f;e&&e.set(f,g);return g}(y(105));D=y(287);class c extends D.Transition{static initClass(){this.traits=["node","transition","mask","visible","active"]}mask(f){let e,g;f?(g=this._shaders.shader(),g.pipe(m.identity("vec4")),g.fan(),g.pipe(f,this.uniforms),g.next(),g.pipe("reveal.mask",this.uniforms),g.end(),g.pipe("float combine(float a, float b) { return min(a, b); }")):
(g=this._shaders.shader(),g.pipe("reveal.mask",this.uniforms));return null!=(e=q(this._inherit("mask"),k=>k.mask(g)))?e:g}}p.Reveal=c;c.initClass()};
shadow$provide[294]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Slide=void 0;D=y(95);class u extends D.Parent{static initClass(){this.traits=["node","slide","visible","active"]}make(){this._helpers.visible.make();this._helpers.active.make();if(!this._inherit("present"))throw Error(`${this.node.toString()} must be placed inside <present></present>`);return this._inherit("present").adopt(this)}unmake(){this._helpers.visible.unmake();this._helpers.active.unmake();return this._inherit("present").unadopt(this)}change(q,
m,c){if(q["slide.early"]||q["slide.late"]||q["slide.steps"]||q["slide.from"]||q["slide.to"])return this.rebuild()}slideLatch(q,m){this.trigger({type:"transition.latch",step:m});if(null!=q)return this._instant(q)}slideStep(q,m){return this.trigger({type:"slide.step",index:q,step:m})}slideRelease(){return this.trigger({type:"transition.release"})}slideReset(){this._instant(!1);return this.trigger({type:"slide.reset"})}_instant(q){this.setVisible(q);return this.setActive(q)}}p.Slide=u;u.initClass()};
shadow$provide[295]=function(D,y,Q,p){function u(m,c,f){const e=[],g=m<c;for(c=f?g?c+1:c-1:c;g?m<c:m>c;g?m++:m--)e.push(m);return e}Object.defineProperty(p,"__esModule",{value:!0});p.Step=void 0;D=y(290);class q extends D.Track{static initClass(){this.traits=["node","track","step","trigger","bind"]}make(){super.make();const m=this._inherit("clock");null==this.actualIndex&&(this.actualIndex=null);this.animateIndex=this._animator.make(this._types.number(0),{clock:m,realtime:this.props.realtime,step:c=>
this.actualIndex=c});null==this.lastIndex&&(this.lastIndex=null);this.animateStep=this._animator.make(this._types.number(0),{clock:m,realtime:this.props.realtime,step:c=>{this.playhead=c;return this.update()}});this.stops=null!=this.props.stops?this.props.stops:u(0,this.script.length,!1);this._listen("slide","slide.reset",c=>this.lastIndex=null);return this._listen("slide","slide.step",c=>{var f;let {duration:e}=this.props;const {delay:g,pace:k,speed:l,playback:r,rewind:v,skip:w,trigger:z}=this.props,
A=Math.max(0,Math.min(this.stops.length-1,c.index-z)),H=this.playhead,F=this.stops[A];if(null==this.lastIndex&&z)this.lastIndex=A,this.animateStep.set(F),this.animateIndex.set(A);else{var L=null!=(f=null!=this.actualIndex?this.actualIndex:this.lastIndex)?f:0;f=A-L;var N=this.stops.slice(Math.min(L,A),Math.max(L,A)),R=0;L=N.shift();for(const J of Array.from(N))L===J&&R++,L=J;this.lastIndex=A;c=l*(0<=c.step?1:v);c*=w?Math.max(1,Math.abs(f)-R):1;e+=Math.abs(F-H)*k/c;if(H!==F)return this.animateIndex.immediate(A,
{delay:g,duration:e,ease:r}),this.animateStep.immediate(F,{delay:g,duration:e,ease:r})}})}made(){return this.update()}unmake(){this.animateIndex.dispose();this.animateStep.dispose();this.animateIndex=this.animateStep=null;return super.unmake()}change(m,c,f){return m["step.stops"]||m["step.realtime"]?this.rebuild():super.change(m,c,f)}}p.Step=q;q.initClass()};
shadow$provide[296]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});var u=y(288);Object.keys(u).forEach(function(g){"default"!==g&&"__esModule"!==g&&(g in p&&p[g]===u[g]||Object.defineProperty(p,g,{enumerable:!0,get:function(){return u[g]}}))});var q=y(291);Object.keys(q).forEach(function(g){"default"!==g&&"__esModule"!==g&&(g in p&&p[g]===q[g]||Object.defineProperty(p,g,{enumerable:!0,get:function(){return q[g]}}))});var m=y(292);Object.keys(m).forEach(function(g){"default"!==
g&&"__esModule"!==g&&(g in p&&p[g]===m[g]||Object.defineProperty(p,g,{enumerable:!0,get:function(){return m[g]}}))});var c=y(293);Object.keys(c).forEach(function(g){"default"!==g&&"__esModule"!==g&&(g in p&&p[g]===c[g]||Object.defineProperty(p,g,{enumerable:!0,get:function(){return c[g]}}))});var f=y(294);Object.keys(f).forEach(function(g){"default"!==g&&"__esModule"!==g&&(g in p&&p[g]===f[g]||Object.defineProperty(p,g,{enumerable:!0,get:function(){return f[g]}}))});var e=y(295);Object.keys(e).forEach(function(g){"default"!==
g&&"__esModule"!==g&&(g in p&&p[g]===e[g]||Object.defineProperty(p,g,{enumerable:!0,get:function(){return e[g]}}))})};
shadow$provide[297]=function(D,y,Q,p){function u(m,c){return"undefined"!==typeof m&&null!==m?c(m):void 0}Object.defineProperty(p,"__esModule",{value:!0});p.RTT=void 0;D=y(95);class q extends D.Parent{static initClass(){this.traits="node root scene vertex texture rtt source index image".split(" ");this.defaults={minFilter:"linear",magFilter:"linear",type:"unsignedByte"}}init(){return this.rtt=this.scene=this.camera=this.width=this.height=this.history=this.rootSize=this.size=null}indexShader(m){return m}imageShader(m){return this.rtt.shaderRelative(m)}sourceShader(m){return this.rtt.shaderAbsolute(m,
this.history)}getDimensions(){return{items:1,width:this.width,height:this.height,depth:this.history}}getActiveDimensions(){return this.getDimensions()}make(){this.parentRoot=this._inherit("root");this.rootSize=this.parentRoot.getSize();this._listen(this.parentRoot,"root.pre",this.pre);this._listen(this.parentRoot,"root.update",this.update);this._listen(this.parentRoot,"root.render",this.render);this._listen(this.parentRoot,"root.post",this.post);this._listen(this.parentRoot,"root.camera",this.setCamera);
this._listen(this.parentRoot,"root.resize",function(w){return this.resize(w.size)});if(null!=this.rootSize){var {minFilter:m,magFilter:c,type:f}=this.props,{width:e,height:g,history:k,size:l}=this.props,r=l===this.node.attributes["rtt.size"].enum.relative;var v=r?this.rootSize.renderWidth:1;r=r?this.rootSize.renderHeight:1;this.width=Math.round(null!=e?e*v:this.rootSize.renderWidth);this.height=Math.round(null!=g?g*r:this.rootSize.renderHeight);this.history=k;this.aspect=v=this.width/this.height;
null==this.scene&&(this.scene=this._renderables.make("scene"));this.rtt=this._renderables.make("renderToTexture",{scene:this.scene,camera:this._context.defaultCamera,width:this.width,height:this.height,frames:this.history,minFilter:m,magFilter:c,type:f});v=e||g?v:this.rootSize.aspect;r=null!=g?g:this.rootSize.viewHeight;return this.size={renderWidth:this.width,renderHeight:this.height,aspect:v,viewWidth:null!=e?e:this.rootSize.viewWidth,viewHeight:r,pixelRatio:this.height/r}}}made(){this.trigger({type:"source.rebuild"});
if(this.size)return this.trigger({type:"root.resize",size:this.size})}unmake(m){if(null!=this.rtt)return this.rtt.dispose(),m||this.scene.dispose(),this.rtt=this.width=this.height=this.history=null}change(m,c,f){if(c.texture||m["rtt.width"]||m["rtt.height"])return this.rebuild();if(m["root.camera"]||f)return this._unattach(),this._attach(this.props.camera,"camera",this.setCamera,this,this,!0),this.setCamera()}adopt(m){return Array.from(m.renders).map(c=>this.scene.add(c))}unadopt(m){return Array.from(m.renders).map(c=>
this.scene.remove(c))}resize(m){let c,f;this.rootSize=m;({width:f,height:c,size:m}=this.props);m=m===this.node.attributes["rtt.size"].enum.relative;if(!this.rtt||null==f||null==c||m)return this.rebuild()}select(m){return this._root.node.model.select(m,[this.node])}watch(m,c){return this._root.node.model.watch(m,c)}unwatch(m){return this._root.node.model.unwatch(m)}pre(m){return this.trigger(m)}update(m){let c;null!=(c=this.getOwnCamera())&&(c.aspect=this.aspect||1,c.updateProjectionMatrix());return this.trigger(m)}render(m){this.trigger(m);
return null!=this.rtt?this.rtt.render(this.getCamera()):void 0}post(m){return this.trigger(m)}setCamera(){const m=u(this.select(this.props.camera)[0],c=>c.controller);if(this.camera!==m)return this.camera=m,this.rtt.camera=this.getCamera(),this.trigger({type:"root.camera"});if(!this.camera)return this.trigger({type:"root.camera"})}getOwnCamera(){return null!=this.camera?this.camera.getCamera():void 0}getCamera(){let m;return null!=(m=this.getOwnCamera())?m:this._inherit("root").getCamera()}vertex(m,
c){return 2===c?m.pipe("view.position"):3===c?m.pipe("root.position"):m}}p.RTT=q;q.initClass()};
shadow$provide[298]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Compose=void 0;D=y(94);class u extends D.Primitive{static initClass(){this.traits="node bind object visible operator style compose".split(" ");this.defaults={zWrite:!1,zTest:!1,color:"#ffffff"}}init(){return this.compose=null}resize(){if(this.compose&&this.bind.source){var q=this.bind.source.getActiveDimensions(),{width:m}=q;({height:q}=q);return this.remapUVScale.set(m,q)}}make(){this._helpers.bind.make([{to:"operator.source",
trait:"source"}]);if(null!=this.bind.source){var q={remapUVScale:this._attributes.make(this._types.vec2())};this.remapUVScale=q.remapUVScale.value;var m=this._shaders.shader(),{alpha:c}=this.props;this.bind.source.is("image")?(m.pipe("screen.pass.uv",q),m=this.bind.source.imageShader(m)):(m.pipe("screen.map.xy",q),m=this.bind.source.sourceShader(m));c||m.pipe("color.opaque");q=this._helpers.style.uniforms();this.compose=this._renderables.make("screen",{map:m,uniforms:q,linear:!0});this._helpers.visible.make();
return this._helpers.object.make([this.compose])}}made(){return this.resize()}unmake(){this._helpers.bind.unmake();this._helpers.visible.unmake();return this._helpers.object.unmake()}change(q,m,c){if(q["operator.source"]||q["compose.alpha"])return this.rebuild()}}p.Compose=u;u.initClass()};
shadow$provide[299]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});var u=y(297);Object.keys(u).forEach(function(m){"default"!==m&&"__esModule"!==m&&(m in p&&p[m]===u[m]||Object.defineProperty(p,m,{enumerable:!0,get:function(){return u[m]}}))});var q=y(298);Object.keys(q).forEach(function(m){"default"!==m&&"__esModule"!==m&&(m in p&&p[m]===q[m]||Object.defineProperty(p,m,{enumerable:!0,get:function(){return q[m]}}))})};
shadow$provide[300]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.View=void 0;D=y(264);class u extends D.Transform{static initClass(){this.traits=["node","object","visible","view","vertex"]}make(){return this._helpers.visible.make()}unmake(){return this._helpers.visible.unmake()}axis(q){return this.props.range[q-1]}}p.View=u;u.initClass()};
shadow$provide[301]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.Cartesian=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(101));D=y(300);class m extends D.View{static initClass(){this.traits="node object visible view view3 vertex".split(" ")}make(){super.make();this.uniforms={viewMatrix:this._attributes.make(this._types.mat4())};this.viewMatrix=this.uniforms.viewMatrix.value;this.composer=q.transformComposer()}unmake(){super.unmake();delete this.viewMatrix;delete this.objectMatrix;
delete this.uniforms}change(c,f,e){if(f.view||f.view3||e){f=this.props.position;e=this.props.scale;var g=this.props.quaternion,k=this.props.rotation,l=this.props.range,r=this.props.eulerOrder,{x:v}=l[0],w=l[1].x,z=l[2].x,A=l[0].y-v||1,H=l[1].y-w||1;l=l[2].y-z||1;this.viewMatrix.set(2/A,0,0,-(2*v+A)/A,0,2/H,0,-(2*w+H)/H,0,0,2/l,-(2*z+l)/l,0,0,0,1);f=this.composer(f,k,g,e,null,r);this.viewMatrix.multiplyMatrices(f,this.viewMatrix);c["view.range"]&&this.trigger({type:"view.range"})}}vertex(c,f){1===
f&&c.pipe("cartesian.position",this.uniforms);return super.vertex(c,f)}}p.Cartesian=m;m.initClass()};
shadow$provide[302]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Cartesian4=void 0;D=y(300);class u extends D.View{static initClass(){this.traits="node object visible view view4 vertex".split(" ")}make(){super.make();this.uniforms={basisOffset:this._attributes.make(this._types.vec4()),basisScale:this._attributes.make(this._types.vec4())};this.basisScale=this.uniforms.basisScale.value;return this.basisOffset=this.uniforms.basisOffset.value}unmake(){super.unmake();delete this.basisScale;
delete this.basisOffset;return delete this.uniforms}change(q,m,c){if(m.view||m.view4||c){m=this.props.position;c=this.props.scale;var f=this.props.range,{x:e}=f[0],g=f[1].x,k=f[2].x,l=f[3].x,r=f[0].y-e||1,v=f[1].y-g||1,w=f[2].y-k||1;f=f[3].y-l||1;var z=function(A,H){A.x*=H.x;A.y*=H.y;A.z*=H.z;return A.w*=H.w};this.basisScale.set(2/r,2/v,2/w,2/f);this.basisOffset.set(-(2*e+r)/r,-(2*g+v)/v,-(2*k+w)/w,-(2*l+f)/f);z(this.basisScale,c);z(this.basisOffset,c);this.basisOffset.add(m);if(q["view.range"])return this.trigger({type:"view.range"})}}vertex(q,
m){1===m&&q.pipe("cartesian4.position",this.uniforms);return super.vertex(q,m)}}p.Cartesian4=u;u.initClass()};
shadow$provide[303]=function(D,y,Q,p){function u(g){if("function"!==typeof WeakMap)return null;var k=new WeakMap,l=new WeakMap;return(u=function(r){return r?l:k})(g)}function q(g,k){if(!k&&g&&g.__esModule)return g;if(null===g||"object"!==typeof g&&"function"!==typeof g)return{default:g};if((k=u(k))&&k.has(g))return k.get(g);var l={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor,v;for(v in g)if("default"!==v&&Object.prototype.hasOwnProperty.call(g,v)){var w=r?Object.getOwnPropertyDescriptor(g,
v):null;w&&(w.get||w.set)?Object.defineProperty(l,v,w):l[v]=g[v]}l.default=g;k&&k.set(g,l);return l}Object.defineProperty(p,"__esModule",{value:!0});p.Polar=void 0;var m=q(y(237)),c=q(y(101)),f=y(7);D=y(300);class e extends D.View{static initClass(){this.traits="node object visible view view3 polar vertex".split(" ")}make(){super.make();const {types:g}=this._attributes;this.uniforms={polarBend:this.node.attributes["polar.bend"],polarHelix:this.node.attributes["polar.helix"],polarFocus:this._attributes.make(g.number()),
polarAspect:this._attributes.make(g.number()),viewMatrix:this._attributes.make(g.mat4())};this.viewMatrix=this.uniforms.viewMatrix.value;this.composer=c.transformComposer();return this.aspect=1}unmake(){super.unmake();delete this.viewMatrix;delete this.objectMatrix;delete this.aspect;return delete this.uniforms}change(g,k,l){var r;if(k.view||k.view3||k.polar||l){this.helix=this.props.helix;this.bend=r=this.props.bend;this.focus=l=0<r?1/r-1:0;var v=this.props.position,w=this.props.scale,z=this.props.quaternion,
A=this.props.rotation,H=this.props.range,F=this.props.eulerOrder,{x:L}=H[0],N=H[1].x,R=H[2].x,J=H[0].y-L||1,Y=H[1].y-N||1;H=H[2].y-R||1;var fa=w.x;var Z=w.y,da=0<J?1:-1;[N,Y]=Array.from(m.recenterAxis(N,Y,r));r=J+(Math.abs(Y)*da-J)*r;this.aspect=fa=Math.abs(r/fa/(Y/Z));this.uniforms.polarFocus.value=l;this.uniforms.polarAspect.value=fa;this.viewMatrix.set(2/r,0,0,-(2*L+J)/J,0,2/Y,0,-(2*N+Y)/Y,0,0,2/H,-(2*R+H)/H,0,0,0,1);l=this.composer(v,A,z,w,null,F);this.viewMatrix.multiplyMatrices(l,this.viewMatrix);
(g["view.range"]||k.polar)&&this.trigger({type:"view.range"})}}vertex(g,k){1===k&&g.pipe("polar.position",this.uniforms);return super.vertex(g,k)}axis(g){var k=this.props.range[g-1];let l=k.x;k=k.y;2===g&&0<this.bend&&(k=Math.max(Math.abs(k),Math.abs(l)),l=Math.max(-this.focus/this.aspect,l));return new f.Vector2(l,k)}}p.Polar=e;e.initClass()};
shadow$provide[304]=function(D,y,Q,p){function u(g){if("function"!==typeof WeakMap)return null;var k=new WeakMap,l=new WeakMap;return(u=function(r){return r?l:k})(g)}function q(g,k){if(!k&&g&&g.__esModule)return g;if(null===g||"object"!==typeof g&&"function"!==typeof g)return{default:g};if((k=u(k))&&k.has(g))return k.get(g);var l={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor,v;for(v in g)if("default"!==v&&Object.prototype.hasOwnProperty.call(g,v)){var w=r?Object.getOwnPropertyDescriptor(g,
v):null;w&&(w.get||w.set)?Object.defineProperty(l,v,w):l[v]=g[v]}l.default=g;k&&k.set(g,l);return l}Object.defineProperty(p,"__esModule",{value:!0});p.Spherical=void 0;var m=q(y(237)),c=q(y(101)),f=y(7);D=y(300);class e extends D.View{static initClass(){this.traits="node object visible view view3 spherical vertex".split(" ")}make(){super.make();this.uniforms={sphericalBend:this.node.attributes["spherical.bend"],sphericalFocus:this._attributes.make(this._types.number()),sphericalAspectX:this._attributes.make(this._types.number()),
sphericalAspectY:this._attributes.make(this._types.number()),sphericalScaleY:this._attributes.make(this._types.number()),viewMatrix:this._attributes.make(this._types.mat4())};this.viewMatrix=this.uniforms.viewMatrix.value;this.composer=c.transformComposer();return this.aspectY=this.aspectX=1}unmake(){super.unmake();delete this.viewMatrix;delete this.objectMatrix;delete this.aspectX;delete this.aspectY;return delete this.uniforms}change(g,k,l){let r;if(k.view||k.view3||k.spherical||l){this.bend=l=
this.props.bend;this.focus=r=0<l?1/l-1:0;var v=this.props.position,w=this.props.scale,z=this.props.quaternion,A=this.props.rotation,H=this.props.range,F=this.props.eulerOrder,{x:L}=H[0],N=H[1].x,R=H[2].x,J=H[0].y-L||1,Y=H[1].y-N||1;H=H[2].y-R||1;var fa=w.x;var Z=w.y;var da=w.z;[N,Y]=Array.from(m.recenterAxis(N,Y,l));[R,H]=Array.from(m.recenterAxis(R,H,l));var la=Math.abs(H),W=J+(la*(0<J?1:-1)-J)*l;la=Y+(la*(0<Y?1:-1)-Y)*l;var ra=H/da;this.aspectX=da=Math.abs(W/fa/ra);this.aspectY=ra=Math.abs(la/Z/
ra/da);this.scaleY=fa=Math.min(ra/l,1+(Y/J*fa/Z*2-1)*l);this.uniforms.sphericalBend.value=l;this.uniforms.sphericalFocus.value=r;this.uniforms.sphericalAspectX.value=da;this.uniforms.sphericalAspectY.value=ra;this.uniforms.sphericalScaleY.value=fa;this.viewMatrix.set(2/W,0,0,-(2*L+J)/J,0,2/la,0,-(2*N+Y)/Y,0,0,2/H,-(2*R+H)/H,0,0,0,1);l=this.composer(v,A,z,w,null,F);this.viewMatrix.multiplyMatrices(l,this.viewMatrix);if(g["view.range"]||k.spherical)return this.trigger({type:"view.range"})}}vertex(g,
k){1===k&&g.pipe("spherical.position",this.uniforms);return super.vertex(g,k)}axis(g){var k=this.props.range[g-1];let l=k.x;k=k.y;3===g&&0<this.bend&&(k=Math.max(Math.abs(k),Math.abs(l)),l=Math.max(-this.focus/this.aspectX+.001,l));return new f.Vector2(l,k)}}p.Spherical=e;e.initClass()};
shadow$provide[305]=function(D,y,Q,p){function u(e){if("function"!==typeof WeakMap)return null;var g=new WeakMap,k=new WeakMap;return(u=function(l){return l?k:g})(e)}function q(e,g){if(!g&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};if((g=u(g))&&g.has(e))return g.get(e);var k={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor,r;for(r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var v=l?Object.getOwnPropertyDescriptor(e,
r):null;v&&(v.get||v.set)?Object.defineProperty(k,r,v):k[r]=e[r]}k.default=e;g&&g.set(e,k);return k}Object.defineProperty(p,"__esModule",{value:!0});p.Stereographic=void 0;var m=q(y(237)),c=q(y(101));D=y(300);class f extends D.View{static initClass(){this.traits="node object visible view view3 stereographic vertex".split(" ")}make(){super.make();this.uniforms={stereoBend:this.node.attributes["stereographic.bend"],viewMatrix:this._attributes.make(this._types.mat4())};this.viewMatrix=this.uniforms.viewMatrix.value;
return this.composer=c.transformComposer()}unmake(){super.unmake();delete this.viewMatrix;delete this.rotationMatrix;return delete this.uniforms}change(e,g,k){if(g.view||g.view3||g.stereographic||k){this.bend=k=this.props.bend;var l=this.props.position,r=this.props.scale,v=this.props.quaternion,w=this.props.rotation,z=this.props.range,A=this.props.eulerOrder,{x:H}=z[0],F=z[1].x,L=z[2].x,N=z[0].y-H||1,R=z[1].y-F||1;z=z[2].y-L||1;[L,z]=Array.from(m.recenterAxis(L,z,k,1));this.uniforms.stereoBend.value=
k;this.viewMatrix.set(2/N,0,0,-(2*H+N)/N,0,2/R,0,-(2*F+R)/R,0,0,2/z,-(2*L+z)/z,0,0,0,1);k=this.composer(l,w,v,r,null,A);this.viewMatrix.multiplyMatrices(k,this.viewMatrix);if(e["view.range"]||g.stereographic)return this.trigger({type:"view.range"})}}vertex(e,g){1===g&&e.pipe("stereographic.position",this.uniforms);return super.vertex(e,g)}}p.Stereographic=f;f.initClass()};
shadow$provide[306]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.Stereographic4=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(237));D=y(300);class m extends D.View{static initClass(){this.traits="node object visible view view4 stereographic vertex".split(" ")}make(){super.make();this.uniforms={basisOffset:this._attributes.make(this._types.vec4()),basisScale:this._attributes.make(this._types.vec4()),stereoBend:this.node.attributes["stereographic.bend"]};this.basisScale=this.uniforms.basisScale.value;
this.basisOffset=this.uniforms.basisOffset.value}unmake(){super.unmake();delete this.basisScale;delete this.basisOffset;delete this.uniforms}change(c,f,e){if(f.view||f.view4||f.stereographic||e){this.bend=e=this.props.bend;var g=this.props.position,k=this.props.scale,l=this.props.range,{x:r}=l[0],v=l[1].x,w=l[2].x,z=l[3].x,A=l[0].y-r||1,H=l[1].y-v||1,F=l[2].y-w||1;l=l[3].y-z||1;var L=function(N,R){N.x*=R.x;N.y*=R.y;N.z*=R.z;N.w*=R.w};[z,l]=Array.from(q.recenterAxis(z,l,e,1));this.basisScale.set(2/
A,2/H,2/F,2/l);this.basisOffset.set(-(2*r+A)/A,-(2*v+H)/H,-(2*w+F)/F,-(2*z+l)/l);L(this.basisScale,k);L(this.basisOffset,k);this.basisOffset.add(g);(c["view.range"]||f.stereographic)&&this.trigger({type:"view.range"})}}vertex(c,f){1===f&&c.pipe("stereographic4.position",this.uniforms);return super.vertex(c,f)}}p.Stereographic4=m;m.initClass()};
shadow$provide[307]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});var u=y(300);Object.keys(u).forEach(function(k){"default"!==k&&"__esModule"!==k&&(k in p&&p[k]===u[k]||Object.defineProperty(p,k,{enumerable:!0,get:function(){return u[k]}}))});var q=y(301);Object.keys(q).forEach(function(k){"default"!==k&&"__esModule"!==k&&(k in p&&p[k]===q[k]||Object.defineProperty(p,k,{enumerable:!0,get:function(){return q[k]}}))});var m=y(302);Object.keys(m).forEach(function(k){"default"!==
k&&"__esModule"!==k&&(k in p&&p[k]===m[k]||Object.defineProperty(p,k,{enumerable:!0,get:function(){return m[k]}}))});var c=y(303);Object.keys(c).forEach(function(k){"default"!==k&&"__esModule"!==k&&(k in p&&p[k]===c[k]||Object.defineProperty(p,k,{enumerable:!0,get:function(){return c[k]}}))});var f=y(304);Object.keys(f).forEach(function(k){"default"!==k&&"__esModule"!==k&&(k in p&&p[k]===f[k]||Object.defineProperty(p,k,{enumerable:!0,get:function(){return f[k]}}))});var e=y(305);Object.keys(e).forEach(function(k){"default"!==
k&&"__esModule"!==k&&(k in p&&p[k]===e[k]||Object.defineProperty(p,k,{enumerable:!0,get:function(){return e[k]}}))});var g=y(306);Object.keys(g).forEach(function(k){"default"!==k&&"__esModule"!==k&&(k in p&&p[k]===g[k]||Object.defineProperty(p,k,{enumerable:!0,get:function(){return g[k]}}))})};
shadow$provide[308]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.Shader=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(105));D=y(94);class m extends D.Primitive{static initClass(){this.traits=["node","bind","shader"];this.freeform=!0}init(){return this.shader=null}make(){const {language:c,code:f}=this.props;if("glsl"!==c)throw Error("GLSL required");this._helpers.bind.make([{to:"shader.sources",trait:"source",multiple:!0}]);var e=this._shaders.fetch(f);const g=this._types,
k={},l=r=>{switch(r){case "i":return g.int();case "f":return g.number();case "v2":return g.vec2();case "v3":return g.vec3();case "v4":return g.vec4();case "m3":return g.mat3();case "m4":return g.mat4();case "t":return g.object();default:return r=r.split(""),"v"===r.pop()?g.array(l(r.join(""))):null}};for(const r of Array.from(e._signatures.uniform))if(e=l(r.type))k[r.name]=e;return this.reconfigure({props:{uniform:k}})}made(){return this.trigger({type:"source.rebuild"})}unmake(){return this.shader=
null}change(c,f,e){if(c["shader.uniforms"]||c["shader.code"]||c["shader.language"])return this.rebuild()}shaderBind(c){let f,e;null==c&&(c={});const {code:g,indices:k,channels:l}=this.props;for(r in this.node.attributes)e=this.node.attributes[r],null!=e.type&&null!=e.short&&"uniform"===e.ns&&null==c[e.short]&&(c[e.short]=e);if(null!=(f=this.props.uniforms))for(r in f)e=f[r],c[r]=e;var r=this._shaders.shader();if(null!=this.bind.sources)for(const v of Array.from(this.bind.sources))r.callback(),4!=
k&&r.pipe(q.extendVec(k,4)),r.pipe(v.sourceShader(this._shaders.shader())),4!=l&&r.pipe(q.truncateVec(4,l)),r.join();return r.pipe(g,c)}}p.Shader=m;m.initClass()};
shadow$provide[309]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});var u=y(308);Object.keys(u).forEach(function(q){"default"!==q&&"__esModule"!==q&&(q in p&&p[q]===u[q]||Object.defineProperty(p,q,{enumerable:!0,get:function(){return u[q]}}))})};
shadow$provide[310]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Classes=void 0;D=y(100);Q=y(103);var u=y(239),q=y(250),m=y(253),c=y(260),f=y(263),e=y(271),g=y(286),k=y(296),l=y(299),r=y(307);y=y(309);p.Classes={axis:q.Axis,face:q.Face,grid:q.Grid,line:q.Line,point:q.Point,strip:q.Strip,surface:q.Surface,ticks:q.Ticks,vector:q.Vector,view:r.View,cartesian:r.Cartesian,cartesian4:r.Cartesian4,polar:r.Polar,spherical:r.Spherical,stereographic:r.Stereographic,stereographic4:r.Stereographic4,
transform:e.Transform3,transform4:e.Transform4,vertex:e.Vertex,fragment:e.Fragment,layer:e.Layer,mask:e.Mask,array:u.Array_,interval:u.Interval,matrix:u.Matrix,area:u.Area,voxel:u.Voxel,volume:u.Volume,scale:u.Scale,latch:u.Latch,html:m.HTML,dom:m.DOM,text:c.Text,format:c.Format,label:c.Label,retext:c.Retext,clamp:g.Clamp,grow:g.Grow,join:g.Join,lerp:g.Lerp,memo:g.Memo,readback:g.Readback,resample:g.Resample,repeat:g.Repeat,reverse:g.Reverse,swizzle:g.Swizzle,spread:g.Spread,split:g.Split,slice:g.Slice,
subdivide:g.Subdivide,transpose:g.Transpose,group:D.Group,inherit:D.Inherit,root:D.Root,unit:D.Unit,shader:y.Shader,camera:Q.Camera,rtt:l.RTT,compose:l.Compose,clock:f.Clock,now:f.Now,move:k.Move,play:k.Play,present:k.Present,reveal:k.Reveal,slide:k.Slide,step:k.Step}};
shadow$provide[311]=function(D,y,Q,p){function u(l){if("function"!==typeof WeakMap)return null;var r=new WeakMap,v=new WeakMap;return(u=function(w){return w?v:r})(l)}function q(l,r){if(!r&&l&&l.__esModule)return l;if(null===l||"object"!==typeof l&&"function"!==typeof l)return{default:l};if((r=u(r))&&r.has(l))return r.get(l);var v={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor,z;for(z in l)if("default"!==z&&Object.prototype.hasOwnProperty.call(l,z)){var A=w?Object.getOwnPropertyDescriptor(l,
z):null;A&&(A.get||A.set)?Object.defineProperty(v,z,A):v[z]=l[z]}v.default=l;r&&r.set(l,v);return v}function m(l,r,v){const w=[],z=l<r;for(r=v?z?r+1:r-1:r;z?l<r:l>r;z?l++:l--)w.push(l);return w}function c(l,r,v){if("undefined"!==typeof l&&null!==l&&"function"===typeof l[r])return v(l,r)}Object.defineProperty(p,"__esModule",{value:!0});p.Types=void 0;var f=q(y(104)),e=q(y(240)),g=y(7);const k=function(l){for(const r in l)l[r]=(v=>function(){const w=v.apply(v,arguments);null==w.validate&&(w.validate=
z=>null!=z);null==w.equals&&(w.equals=(z,A)=>z===A);null==w.clone&&(w.clone=function(z){let A;return null!=(A=c(z,"clone",H=>H.clone()))?A:z});return w})(l[r]);return l}({array(l,r,v=null){const w=l.lerp?function(A,H,F,L){const N=Math.min(A.length,H.length);for(let R=0,J=N,Y=0<=J;Y?R<J:R>J;Y?R++:R--)F[R]=l.lerp(A[R],H[R],F[R],L);return F}:void 0,z=l.op?function(A,H,F,L){const N=Math.min(A.length,H.length);for(let R=0,J=N,Y=0<=J;Y?R<J:R>J;Y?R++:R--)F[R]=l.op(A[R],H[R],F[R],L);return F}:void 0;null==
v||v instanceof Array||(v=[v]);return{uniform(){if(l.uniform)return l.uniform()+"v"},make(){return null!=v?v.slice():r?m(0,r,!1).map(A=>l.make()):[]},validate(A,H,F){A instanceof Array||(A=[A]);var L=H.length=r?r:A.length;for(let N=0,R=L,J=0<=R;J?N<R:N>R;J?N++:N--)L=null!=A[N]?A[N]:l.make(),H[N]=l.validate(L,H[N],F);return H},equals(A,H){var F=A.length;const L=H.length;if(F!==L)return!1;F=Math.min(F,L);for(let N=0,R=F,J=0<=R;J?N<R:N>R;J?N++:N--)if("function"!==typeof l.equals||!l.equals(A[N],H[N]))return!1;
return!0},lerp:w,op:z,clone(A){return Array.from(A).map(H=>l.clone(H))}}},letters(l,r,v=null){if(null!=v){v===""+v&&(v=v.split(""));for(let z=0;z<v.length;z++){const A=v[z];v[z]=l.validate(A,A)}}const w=k.array(l,r,v);return{uniform(){return w.uniform()},make(){return w.make()},validate(z,A,H){z===""+z&&(z=z.split(""));return w.validate(z,A,H)},equals(z,A){return w.equals(z,A)},clone:w.clone}},nullable(l,r){null==r&&(r=!1);let v=r?l.make():null;return{make(){return v},validate(w,z,A){if(null===w)return w;
null===z&&(z=l.make());return l.validate(w,z,A)},uniform(){return"function"===typeof l.uniform?l.uniform():void 0},equals(w,z){let A;const H=null===w,F=null===z;return H&&F?!0:H^F?!1:null!=(A="function"===typeof l.equals?l.equals(w,z):void 0)?A:w===z},lerp:l.lerp?function(w,z,A,H){if(null===w||null===z)return.5>H?w:z;null==A&&(A=l.make());v=l.lerp(w,z,A,H);return A}:void 0,op:l.op?function(w,z,A,H){if(null===w||null===z)return null;null==A&&(A=l.make());return v=l.op(w,z,A,H)}:void 0,emitter:l.emitter?
function(w,z){return null==z?w:null==w?z:l.emitter(w,z)}:void 0}},enum(l,r,v){let w;null==r&&(r=[]);null==v&&(v={});let z=0;const A={};for(w of Array.from(r))w!==+w&&null==v[w]&&(v[w]=z++);for(w of Array.from(r))w===+w&&(A[w]=w);for(w in v)z=v[w],A[z]=!0;null==A[l]&&(l=v[l]);return{enum(){return v},make(){return l},validate(H,F,L){H=A[H]?H:v[H];return null!=H?H:L()}}},enumber(l,r,v){null==v&&(v={});const w=k.enum(l,r,v);return{enum:w.enum,uniform(){return"f"},make(){let z;return null!=(z=w.make())?
z:+l},validate(z,A,H){return z===+z?z:w.validate(z,A,H)},op(z,A,H,F){return F(z,A)}}},select(l){null==l&&(l="\x3c");l;return{make(){return l},validate(r,v,w){return"string"===typeof r||"object"===typeof r?r:w()}}},bool(l){l=!!l;return{uniform(){return"f"},make(){return l},validate(r,v,w){return!!r}}},int(l){null==l&&(l=0);l=+Math.round(l);return{uniform(){return"i"},make(){return l},validate(r,v,w){let z;return r!==(z=+r)?w():Math.round(z)||0},op(r,v,w,z){return z(r,v)}}},round(l){null==l&&(l=0);
l=+Math.round(l);return{uniform(){return"f"},make(){return l},validate(r,v,w){let z;return r!==(z=+r)?w():Math.round(z)||0},op(r,v,w,z){return z(r,v)}}},number(l){null==l&&(l=0);return{uniform(){return"f"},make(){return+l},validate(r,v,w){let z;return r!==(z=+r)?w():z||0},op(r,v,w,z){return z(r,v)}}},positive(l,r){null==r&&(r=!1);return{uniform:l.uniform,make:l.make,validate(v,w,z){v=l.validate(v,w,z);return 0>v||r&&0>=v?z():v},op(v,w,z,A){return A(v,w)}}},string(l){null==l&&(l="");return{make(){return""+
l},validate(r,v,w){let z;return r!==(z=""+r)?w():z}}},func(){return{make(){return function(){}},validate(l,r,v){return"function"===typeof l?l:v()}}},emitter(){return{make(){return l=>l(1,1,1,1)},validate(l,r,v){return"function"===typeof l?l:v()},emitter(l,r){return f.getLerpEmitter(l,r)}}},object(l){return{make(){return null!=l?l:{}},validate(r,v,w){return"object"===typeof r?r:w()},clone(r){return JSON.parse(JSON.stringify(r))}}},timestamp(l=null){"string"===typeof l&&(l=Date.parse(l));return{uniform(){return"f"},
make(){return null!=l?l:+new Date},validate(r,v,w){r=Date.parse(r);return r!==+r?w():r},op(r,v,w,z){return z(r,v)}}},vec2(l,r){null==l&&(l=0);null==r&&(r=0);const v=[l,r];return{uniform(){return"v2"},make(){return new g.Vector2(l,r)},validate(w,z,A){w===+w&&(w=[w]);if(null===w||void 0===w?0:w.isVector2)z.copy(w);else if(w instanceof Array)w=w.concat(v.slice(w.length)),z.set.apply(z,w);else if(null!=w)z.set(null!=w.x?w.x:l,null!=w.y?w.y:r);else return A();return z},equals(w,z){return w.x===z.x&&w.y===
z.y},op(w,z,A,H){A.x=H(w.x,z.x);A.y=H(w.y,z.y);return A}}},ivec2(l,r){null==l&&(l=0);null==r&&(r=0);l=k.vec2(l,r);const {validate:v}=l;l.validate=function(w,z,A){v(w,z,A);z.x=Math.round(z.x);z.y=Math.round(z.y);return z};return l},vec3(l,r,v){null==l&&(l=0);null==r&&(r=0);null==v&&(v=0);const w=[l,r,v];return{uniform(){return"v3"},make(){return new g.Vector3(l,r,v)},validate(z,A,H){z===+z&&(z=[z]);if(null===z||void 0===z?0:z.isVector3)A.copy(z);else if(z instanceof Array)z=z.concat(w.slice(z.length)),
A.set.apply(A,z);else if(null!=z)A.set(null!=z.x?z.x:l,null!=z.y?z.y:r,null!=z.z?z.z:v);else return H();return A},equals(z,A){return z.x===A.x&&z.y===A.y&&z.z===A.z},op(z,A,H,F){H.x=F(z.x,A.x);H.y=F(z.y,A.y);H.z=F(z.z,A.z);return H}}},ivec3(l,r,v){null==l&&(l=0);null==r&&(r=0);null==v&&(v=0);l=k.vec3(l,r,v);const {validate:w}=l;l.validate=function(z,A,H){w(z,A,H);A.x=Math.round(A.x);A.y=Math.round(A.y);A.z=Math.round(A.z);return A};return l},vec4(l,r,v,w){null==l&&(l=0);null==r&&(r=0);null==v&&(v=
0);null==w&&(w=0);const z=[l,r,v,w];return{uniform(){return"v4"},make(){return new g.Vector4(l,r,v,w)},validate(A,H,F){A===+A&&(A=[A]);if(null===A||void 0===A?0:A.isVector4)H.copy(A);else if(A instanceof Array)A=A.concat(z.slice(A.length)),H.set.apply(H,A);else if(null!=A)H.set(null!=A.x?A.x:l,null!=A.y?A.y:r,null!=A.z?A.z:v,null!=A.w?A.w:w);else return F();return H},equals(A,H){return A.x===H.x&&A.y===H.y&&A.z===H.z&&A.w===H.w},op(A,H,F,L){F.x=L(A.x,H.x);F.y=L(A.y,H.y);F.z=L(A.z,H.z);F.w=L(A.w,H.w);
return F}}},ivec4(l,r,v,w){null==l&&(l=0);null==r&&(r=0);null==v&&(v=0);null==w&&(w=0);l=k.vec4(l,r,v,w);const {validate:z}=l;l.validate=function(A,H,F){z(A,H,F);H.x=Math.round(H.x);H.y=Math.round(H.y);H.z=Math.round(H.z);H.w=Math.round(H.w);return H};return l},mat3(l,r,v,w,z,A,H,F,L){null==l&&(l=1);null==r&&(r=0);null==v&&(v=0);null==w&&(w=0);null==z&&(z=1);null==A&&(A=0);null==H&&(H=0);null==F&&(F=0);null==L&&(L=1);const N=[l,r,v,w,z,A,H,F,L];return{uniform(){return"m4"},make(){const R=new g.Matrix3;
R.set(l,r,v,w,z,A,H,F,L);return R},validate(R,J,Y){if(null===R||void 0===R?0:R.isMatrix3)J.copy(R);else if(R instanceof Array)R=R.concat(N.slice(R.length)),J.set.apply(J,R);else return Y();return J}}},mat4(l,r,v,w,z,A,H,F,L,N,R,J,Y,fa,Z,da){null==l&&(l=1);null==r&&(r=0);null==v&&(v=0);null==w&&(w=0);null==z&&(z=0);null==A&&(A=1);null==H&&(H=0);null==F&&(F=0);null==L&&(L=0);null==N&&(N=0);null==R&&(R=1);null==J&&(J=0);null==Y&&(Y=0);null==fa&&(fa=0);null==Z&&(Z=0);null==da&&(da=1);const la=[l,r,v,
w,z,A,H,F,L,N,R,J,Y,fa,Z,da];return{uniform(){return"m4"},make(){const W=new g.Matrix4;W.set(l,r,v,w,z,A,H,F,L,N,R,J,Y,fa,Z,da);return W},validate(W,ra,za){if(null===W||void 0===W?0:W.isMatrix4)ra.copy(W);else if(W instanceof Array)W=W.concat(la.slice(W.length)),ra.set.apply(ra,W);else return za();return ra}}},quat(l,r,v,w){null==l&&(l=0);null==r&&(r=0);null==v&&(v=0);null==w&&(w=1);const z=k.vec4(l,r,v,w);return{uniform(){return"v4"},make(){return new g.Quaternion},validate(A,H,F){(null===A||void 0===
A?0:A.isQuaternion)?H.copy(A):H=z.validate(A,H,F);H.normalize();return H},equals(A,H){return A.x===H.x&&A.y===H.y&&A.z===H.z&&A.w===H.w},op(A,H,F,L){F.x=L(A.x,H.x);F.y=L(A.y,H.y);F.z=L(A.z,H.z);F.w=L(A.w,H.w);F.normalize();return F},lerp(A,H,F,L){F.slerpQuaternions?F.slerpQuaternions(A,H,L):g.Quaternion.slerp(A,H,F,L);return F}}},color(l,r,v){null==l&&(l=.5);null==r&&(r=.5);null==v&&(v=.5);const w=[l,r,v];return{uniform(){return"c"},make(){return new g.Color(l,r,v)},validate(z,A,H){z===""+z?z=(new g.Color).setStyle(z):
z===+z&&(z=new g.Color(z));if(null===z||void 0===z?0:z.isColor)A.copy(z);else if(z instanceof Array)z=z.concat(w.slice(z.length)),A.setRGB.apply(A,z);else if(null!=z)A.set(null!=z.r?z.r:l,null!=z.g?z.g:r,null!=z.b?z.b:v);else return H();return A},equals(z,A){return z.r===A.r&&z.g===A.g&&z.b===A.b},op(z,A,H,F){H.r=F(z.r,A.r);H.g=F(z.g,A.g);H.b=F(z.b,A.b);return H}}},axis(l,r){let v;null==l&&(l=1);null==r&&(r=!1);const w={x:1,y:2,z:3,w:4,W:1,H:2,D:3,I:4,zero:0,null:0,width:1,height:2,depth:3,items:4},
z=r?[0,1,2,3,4]:[1,2,3,4];null!=(v=w[l])&&(l=v);return{make(){return l},validate(A,H,F){let L;null!=(v=w[A])&&(A=v);A=null!=(L=Math.round(A))?L:0;return Array.from(z).includes(A)?A:F()}}},transpose(l){null==l&&(l=[1,2,3,4]);const r=k.letters(k.axis(null,!1),0,l),v=k.letters(k.axis(null,!1),4,l);return{make(){return v.make()},validate(w,z,A){let H=[1,2,3,4];r.validate(w,H,A);4>H.length&&(w=[1,2,3,4].filter(F=>-1===H.indexOf(F)),H=H.concat(w));return 0>Array.from(H).map((F,L)=>H.indexOf(F)===L).indexOf(!1)?
v.validate(H,z,A):A()},equals:v.equals,clone:v.clone}},swizzle(l,r=null){null==l&&(l=[1,2,3,4]);null==r&&(r=l.length);l=l.slice(0,r);const v=k.letters(k.axis(null,!1),0,l),w=k.letters(k.axis(null,!0),r,l);return{make(){return w.make()},validate(z,A,H){let F=l.slice();v.validate(z,F,H);F.length<r&&(F=F.concat([0,0,0,0]).slice(0,r));return w.validate(F,A,H)},equals:w.equals,clone:w.clone}},classes(){const l=k.array(k.string());return{make(){return l.make()},validate(r,v,w){r===""+r&&(r=r.split(" "));
r=r.filter(z=>!!z.length);return l.validate(r,v,w)},equals:l.equals,clone:l.clone}},blending(l){null==l&&(l="normal");return k.enum(l,"no normal add subtract multiply custom".split(" "))},filter(l){null==l&&(l="nearest");return k.enum(l,[],{nearest:g.NearestFilter,nearestMipMapNearest:g.NearestMipMapNearestFilter,nearestMipMapLinear:g.NearestMipMapLinearFilter,linear:g.LinearFilter,linearMipMapNearest:g.LinearMipMapNearestFilter,linearMipmapLinear:g.LinearMipMapLinearFilter})},type(l){null==l&&(l=
"unsignedByte");return k.enum(l,[],{unsignedByte:g.UnsignedByteType,byte:g.ByteType,short:g.ShortType,unsignedShort:g.UnsignedShortType,int:g.IntType,unsignedInt:g.UnsignedIntType,float:g.FloatType})},scale(l){null==l&&(l="linear");return k.enum(l,["linear","log"])},mapping(l){null==l&&(l="relative");return k.enum(l,["relative","absolute"])},indexing(l){null==l&&(l="original");return k.enum(l,["original","final"])},shape(l){null==l&&(l="circle");return k.enum(l,"circle square diamond up down left right".split(" "))},
join(l){null==l&&(l="miter");return k.enum(l,["miter","round","bevel"])},stroke(l){null==l&&(l="solid");return k.enum(l,["solid","dotted","dashed"])},vertexPass(l){null==l&&(l="view");return k.enum(l,["data","view","world","eye"])},fragmentPass(l){null==l&&(l="light");return k.enum(l,["color","light","rgba"])},ease(l){null==l&&(l="linear");return k.enum(l,["linear","cosine","binary","hold"])},fit(l){null==l&&(l="contain");return k.enum(l,["x","y","contain","cover"])},anchor(l){null==l&&(l="middle");
return k.enumber(l,[],{first:1,middle:0,last:-1})},transitionState(l){null==l&&(l="enter");return k.enumber(l,[],{enter:-1,visible:0,exit:1})},font(l){null==l&&(l="sans-serif");const r=e.parseQuoted;l instanceof Array||(l=r(l));const v=k.array(k.string(),0,l);return{make(){return v.make()},validate(w,z,A){try{w instanceof Array||(w=r(w))}catch(H){return A()}w=w.filter(H=>!!H.length);return v.validate(w,z,A)},equals:v.equals,clone:v.clone}},data(l){null==l&&(l=[]);return{make(){return[]},validate(r,
v,w){return r instanceof Array?r:null!=(null!=r?r.length:void 0)?r:w()},emitter(r,v){return f.getLerpThunk(r,v)}}}});p.Types=k};
shadow$provide[312]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Types=void 0;D=y(311).Types;p.Types=D};
shadow$provide[313]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Traits=void 0;D=y(312);D={node:{id:D.Types.nullable(D.Types.string()),classes:D.Types.classes()},entity:{active:D.Types.bool(!0)},object:{visible:D.Types.bool(!0)},latch:{data:D.Types.nullable(D.Types.object()),deep:D.Types.nullable(D.Types.bool(!0))},unit:{scale:D.Types.nullable(D.Types.number()),fov:D.Types.nullable(D.Types.number()),focus:D.Types.nullable(D.Types.number(1),!0)},span:{range:D.Types.nullable(D.Types.vec2(-1,
1))},view:{range:D.Types.array(D.Types.vec2(-1,1),4)},view3:{position:D.Types.vec3(),quaternion:D.Types.quat(),rotation:D.Types.vec3(),scale:D.Types.vec3(1,1,1),eulerOrder:D.Types.swizzle("xyz")},view4:{position:D.Types.vec4(),scale:D.Types.vec4(1,1,1,1)},layer:{depth:D.Types.number(1),fit:D.Types.fit("y")},vertex:{pass:D.Types.vertexPass()},fragment:{pass:D.Types.fragmentPass(),gamma:D.Types.bool(!1)},transform3:{position:D.Types.vec3(),quaternion:D.Types.quat(),rotation:D.Types.vec3(),eulerOrder:D.Types.swizzle("xyz"),
scale:D.Types.vec3(1,1,1),matrix:D.Types.mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transform4:{position:D.Types.vec4(),scale:D.Types.vec4(1,1,1,1),matrix:D.Types.mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},camera:{proxy:D.Types.bool(!1),position:D.Types.nullable(D.Types.vec3()),quaternion:D.Types.nullable(D.Types.quat()),rotation:D.Types.nullable(D.Types.vec3()),lookAt:D.Types.nullable(D.Types.vec3()),up:D.Types.nullable(D.Types.vec3()),eulerOrder:D.Types.swizzle("xyz"),fov:D.Types.nullable(D.Types.number(1))},
polar:{bend:D.Types.number(1),helix:D.Types.number(0)},spherical:{bend:D.Types.number(1)},stereographic:{bend:D.Types.number(1)},interval:{axis:D.Types.axis()},area:{axes:D.Types.swizzle([1,2],2)},volume:{axes:D.Types.swizzle([1,2,3],3)},origin:{origin:D.Types.vec4()},scale:{divide:D.Types.number(10),unit:D.Types.number(1),base:D.Types.number(10),mode:D.Types.scale(),start:D.Types.bool(!0),end:D.Types.bool(!0),zero:D.Types.bool(!0),factor:D.Types.positive(D.Types.number(1)),nice:D.Types.bool(!0)},
grid:{lineX:D.Types.bool(!0),lineY:D.Types.bool(!0),crossed:D.Types.bool(!1),closedX:D.Types.bool(!1),closedY:D.Types.bool(!1)},axis:{detail:D.Types.int(1),crossed:D.Types.bool(!1)},data:{data:D.Types.nullable(D.Types.data()),expr:D.Types.nullable(D.Types.emitter()),bind:D.Types.nullable(D.Types.func()),live:D.Types.bool(!0)},buffer:{channels:D.Types.enum(4,[1,2,3,4]),items:D.Types.int(1),fps:D.Types.nullable(D.Types.int(60)),hurry:D.Types.int(5),limit:D.Types.int(60),realtime:D.Types.bool(!1),observe:D.Types.bool(!1),
aligned:D.Types.bool(!1)},sampler:{centered:D.Types.bool(!1),padding:D.Types.number(0)},array:{width:D.Types.nullable(D.Types.positive(D.Types.int(1),!0)),bufferWidth:D.Types.int(1),history:D.Types.int(1)},matrix:{width:D.Types.nullable(D.Types.positive(D.Types.int(1),!0)),height:D.Types.nullable(D.Types.positive(D.Types.int(1),!0)),history:D.Types.int(1),bufferWidth:D.Types.int(1),bufferHeight:D.Types.int(1)},voxel:{width:D.Types.nullable(D.Types.positive(D.Types.int(1),!0)),height:D.Types.nullable(D.Types.positive(D.Types.int(1),
!0)),depth:D.Types.nullable(D.Types.positive(D.Types.int(1),!0)),bufferWidth:D.Types.int(1),bufferHeight:D.Types.int(1),bufferDepth:D.Types.int(1)},resolve:{expr:D.Types.nullable(D.Types.func()),items:D.Types.int(1)},style:{opacity:D.Types.positive(D.Types.number(1)),color:D.Types.color(),blending:D.Types.blending(),zWrite:D.Types.bool(!0),zTest:D.Types.bool(!0),zIndex:D.Types.positive(D.Types.round()),zBias:D.Types.number(0),zOrder:D.Types.nullable(D.Types.int())},geometry:{points:D.Types.select(),
colors:D.Types.nullable(D.Types.select())},point:{size:D.Types.positive(D.Types.number(4)),sizes:D.Types.nullable(D.Types.select()),shape:D.Types.shape(),optical:D.Types.bool(!0),fill:D.Types.bool(!0),depth:D.Types.number(1)},line:{width:D.Types.positive(D.Types.number(2)),depth:D.Types.positive(D.Types.number(1)),join:D.Types.join(),stroke:D.Types.stroke(),proximity:D.Types.nullable(D.Types.number(Infinity)),closed:D.Types.bool(!1)},mesh:{fill:D.Types.bool(!0),shaded:D.Types.bool(!1),normals:D.Types.nullable(D.Types.select()),
map:D.Types.nullable(D.Types.select()),lineBias:D.Types.number(5)},strip:{line:D.Types.bool(!1)},face:{line:D.Types.bool(!1)},arrow:{size:D.Types.number(3),start:D.Types.bool(!1),end:D.Types.bool(!1)},ticks:{normal:D.Types.vec3(0,0,1),size:D.Types.positive(D.Types.number(10)),epsilon:D.Types.positive(D.Types.number(.001))},attach:{offset:D.Types.vec2(0,-20),snap:D.Types.bool(!1),depth:D.Types.number(0)},format:{digits:D.Types.nullable(D.Types.positive(D.Types.number(3))),data:D.Types.nullable(D.Types.data()),
expr:D.Types.nullable(D.Types.func()),live:D.Types.bool(!0)},font:{font:D.Types.font("sans-serif"),style:D.Types.string(),variant:D.Types.string(),weight:D.Types.string(),detail:D.Types.number(24),sdf:D.Types.number(5)},label:{text:D.Types.select(),size:D.Types.number(16),outline:D.Types.number(2),expand:D.Types.number(0),background:D.Types.color(1,1,1)},overlay:{opacity:D.Types.number(1),zIndex:D.Types.positive(D.Types.round(0))},dom:{points:D.Types.select(),html:D.Types.select(),size:D.Types.number(16),
outline:D.Types.number(2),zoom:D.Types.number(1),color:D.Types.nullable(D.Types.color()),attributes:D.Types.nullable(D.Types.object()),pointerEvents:D.Types.bool(!1)},texture:{minFilter:D.Types.filter("nearest"),magFilter:D.Types.filter("nearest"),type:D.Types.type("float")},shader:{sources:D.Types.nullable(D.Types.select()),indices:D.Types.number(4),channels:D.Types.number(4),language:D.Types.string("glsl"),code:D.Types.string(),uniforms:D.Types.nullable(D.Types.object())},include:{shader:D.Types.select()},
operator:{source:D.Types.select()},spread:{unit:D.Types.mapping(),items:D.Types.nullable(D.Types.vec4()),width:D.Types.nullable(D.Types.vec4()),height:D.Types.nullable(D.Types.vec4()),depth:D.Types.nullable(D.Types.vec4()),alignItems:D.Types.anchor(),alignWidth:D.Types.anchor(),alignHeight:D.Types.anchor(),alignDepth:D.Types.anchor()},grow:{scale:D.Types.number(1),items:D.Types.nullable(D.Types.anchor()),width:D.Types.nullable(D.Types.anchor()),height:D.Types.nullable(D.Types.anchor()),depth:D.Types.nullable(D.Types.anchor())},
split:{order:D.Types.transpose("wxyz"),axis:D.Types.nullable(D.Types.axis()),length:D.Types.int(1),overlap:D.Types.int(0)},join:{order:D.Types.transpose("wxyz"),axis:D.Types.nullable(D.Types.axis()),overlap:D.Types.int(0)},swizzle:{order:D.Types.swizzle()},transpose:{order:D.Types.transpose()},repeat:{items:D.Types.number(1),width:D.Types.number(1),height:D.Types.number(1),depth:D.Types.number(1)},slice:{items:D.Types.nullable(D.Types.vec2()),width:D.Types.nullable(D.Types.vec2()),height:D.Types.nullable(D.Types.vec2()),
depth:D.Types.nullable(D.Types.vec2())},reverse:{items:D.Types.bool(!1),width:D.Types.bool(!1),height:D.Types.bool(!1),depth:D.Types.bool(!1)},lerp:{size:D.Types.mapping("absolute"),items:D.Types.nullable(D.Types.number()),width:D.Types.nullable(D.Types.number()),height:D.Types.nullable(D.Types.number()),depth:D.Types.nullable(D.Types.number())},subdivide:{items:D.Types.nullable(D.Types.positive(D.Types.int(),!0)),width:D.Types.nullable(D.Types.positive(D.Types.int(),!0)),height:D.Types.nullable(D.Types.positive(D.Types.int(),
!0)),depth:D.Types.nullable(D.Types.positive(D.Types.int(),!0)),bevel:D.Types.number(1),lerp:D.Types.bool(!0)},resample:{indices:D.Types.number(4),channels:D.Types.number(4),sample:D.Types.mapping(),size:D.Types.mapping("absolute"),items:D.Types.nullable(D.Types.number()),width:D.Types.nullable(D.Types.number()),height:D.Types.nullable(D.Types.number()),depth:D.Types.nullable(D.Types.number())},readback:{type:D.Types.type("float"),expr:D.Types.nullable(D.Types.func()),data:D.Types.data(),channels:D.Types.enum(4,
[1,2,3,4]),items:D.Types.nullable(D.Types.int()),width:D.Types.nullable(D.Types.int()),height:D.Types.nullable(D.Types.int()),depth:D.Types.nullable(D.Types.int())},root:{speed:D.Types.number(1),camera:D.Types.select("[camera]")},inherit:{source:D.Types.select(),traits:D.Types.array(D.Types.string())},rtt:{size:D.Types.mapping("absolute"),width:D.Types.nullable(D.Types.number()),height:D.Types.nullable(D.Types.number()),history:D.Types.int(1)},compose:{alpha:D.Types.bool(!1)},present:{index:D.Types.int(1),
directed:D.Types.bool(!0),length:D.Types.number(0)},slide:{order:D.Types.nullable(D.Types.int(0)),steps:D.Types.number(1),early:D.Types.int(0),late:D.Types.int(0),from:D.Types.nullable(D.Types.int(0)),to:D.Types.nullable(D.Types.int(1))},transition:{stagger:D.Types.vec4(),enter:D.Types.nullable(D.Types.number(1)),exit:D.Types.nullable(D.Types.number(1)),delay:D.Types.number(0),delayEnter:D.Types.nullable(D.Types.number(0)),delayExit:D.Types.nullable(D.Types.number(0)),duration:D.Types.number(.3),
durationEnter:D.Types.nullable(D.Types.number(0)),durationExit:D.Types.nullable(D.Types.number(0))},move:{from:D.Types.vec4(),to:D.Types.vec4()},seek:{seek:D.Types.nullable(D.Types.number(0))},track:{target:D.Types.select(),script:D.Types.object({}),ease:D.Types.ease("cosine")},trigger:{trigger:D.Types.nullable(D.Types.int(1),!0)},step:{playback:D.Types.ease("linear"),stops:D.Types.nullable(D.Types.array(D.Types.number())),delay:D.Types.number(0),duration:D.Types.number(.3),pace:D.Types.number(0),
speed:D.Types.number(1),rewind:D.Types.number(2),skip:D.Types.bool(!0),realtime:D.Types.bool(!1)},play:{delay:D.Types.number(0),pace:D.Types.number(1),speed:D.Types.number(1),from:D.Types.number(0),to:D.Types.number(Infinity),realtime:D.Types.bool(!1),loop:D.Types.bool(!1)},now:{now:D.Types.nullable(D.Types.timestamp()),seek:D.Types.nullable(D.Types.number(0)),pace:D.Types.number(1),speed:D.Types.number(1)}};p.Traits=D};
shadow$provide[314]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.make=p.log=p.linear=void 0;const u=function(m,c,f,e,g,k,l,r,v,w){let z,A;null==w&&(w=!0);f||(f=10);e||(e=1);g||(g=10);k||(k=1);const H=(c-m)/f;if(!w)return c=(()=>{let J,Y;const fa=[];z=0;Y=f;for(J=0<=Y;J?z<=Y:z>=Y;J?z++:z--)fa.push(m+z*H);return fa})(),l||c.shift(),r||c.pop(),v||(c=c.filter(J=>0!==J)),c;e||(e=1);g||(g=10);const F=e*Math.pow(g,Math.floor(Math.log(H/e)/Math.log(g))),L=0===g%2?[g/2,1,.5]:0===g%
3?[g/3,1,1/3]:[1];e=(()=>{const J=[];for(A of Array.from(L))J.push(F*A);return J})();let N=Infinity,R=e.reduce(function(J,Y){A=Y/H;const fa=Math.max(A,1/A);return fa<N?(N=fa,Y):J},F);R*=k;m=Math.ceil(m/R+ +!l)*R;c=(Math.floor(c/R)-+!r)*R;f=Math.ceil((c-m)/R);c=(()=>{let J,Y;const fa=[];z=0;Y=f;for(J=0<=Y;J?z<=Y:z>=Y;J?z++:z--)fa.push(m+z*R);return fa})();v||(c=c.filter(J=>0!==J));return c};p.linear=u;const q=function(m,c,f,e,g,k,l,r,v,w){throw Error("Log ticks not yet implemented.");};p.log=q;p.make=
function(m,c,f,e,g,k,l,r,v,w,z){switch(m){case 0:return u(c,f,e,g,k,l,r,v,w,z);case 1:return q(c,f,e,g,k,l,r,v,w,z)}}};
shadow$provide[315]=function(D,y,Q,p){function u(k){if("function"!==typeof WeakMap)return null;var l=new WeakMap,r=new WeakMap;return(u=function(v){return v?r:l})(k)}function q(k,l){if(!l&&k&&k.__esModule)return k;if(null===k||"object"!==typeof k&&"function"!==typeof k)return{default:k};if((l=u(l))&&l.has(k))return l.get(k);var r={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor,w;for(w in k)if("default"!==w&&Object.prototype.hasOwnProperty.call(k,w)){var z=v?Object.getOwnPropertyDescriptor(k,
w):null;z&&(z.get||z.set)?Object.defineProperty(r,w,z):r[w]=k[w]}r.default=k;l&&l.set(k,r);return r}function m(k,l){return"undefined"!==typeof k&&null!==k?l(k):void 0}Object.defineProperty(p,"__esModule",{value:!0});p.Helpers=void 0;var c=q(y(105)),f=q(y(314)),e=y(7);const g={bind:{make(k){null==this.bind&&(this.bind={});null==this.bound&&(this.bound=[]);for(const r of Array.from(k)){({callback:k}=r);const {to:v,trait:w,optional:z,unique:A,multiple:H}=r;null==k&&(k=this.rebuild);const F=v.split(/\./g).pop(),
L=this._get(v);let N=null;if(null!=L){let R=this;for(var l=!1;!l;)R=N=this._attach(L,w,k,this,R,z,H),l=A&&(null==N||0>this.bound.indexOf(N)),l=H||z||!A||l}if(null!=N)if(null!=this.resize&&this._listen(N,"source.resize",this.resize),k&&this._listen(N,"source.rebuild",k),H)for(const R of Array.from(N))this.bound.push(R);else this.bound.push(N);this.bind[F]=N}return null},unmake(){if(this.bind)return delete this.bind,delete this.bound}},span:{make(){this.spanView=this._inherit("view");return this._listen("view",
"view.range",()=>this.trigger({type:"span.range"}))},unmake(){return delete this.spanView},get:function(){const k=new e.Vector2(-1,1);return function(l,r){let v;l=this._get(l+"span.range");return null!=l?l:null!=(v=null!=this.spanView?this.spanView.axis(r):void 0)?v:k}}()},scale:{divide(k){const l=this._get(k+"scale.divide");k=this._get(k+"scale.factor");return Math.round(2.5*l/k)},generate(k,l,r,v){const w=this._get(k+"scale.mode"),z=this._get(k+"scale.divide"),A=this._get(k+"scale.unit"),H=this._get(k+
"scale.base"),F=this._get(k+"scale.factor"),L=this._get(k+"scale.start"),N=this._get(k+"scale.end"),R=this._get(k+"scale.zero");k=this._get(k+"scale.nice");r=f.make(w,r,v,z,A,H,F,L,N,R,k);l.copy(r);return r}},style:{uniforms(){return{styleColor:this.node.attributes["style.color"],styleOpacity:this.node.attributes["style.opacity"],styleZBias:this.node.attributes["style.zBias"],styleZIndex:this.node.attributes["style.zIndex"]}}},arrow:{uniforms(){var {start:k}=this.props,{end:l}=this.props;const r=
this._attributes.make(this._types.number(1.25/(k+l)));k=this._attributes.make(this._types.vec2(+k,+l));l=this.node.attributes["arrow.size"];return{clipStyle:k,clipRange:l,clipSpace:r,arrowSpace:r,arrowSize:l}}},point:{uniforms(){return{pointSize:this.node.attributes["point.size"],pointDepth:this.node.attributes["point.depth"]}}},line:{uniforms(){return{lineWidth:this.node.attributes["line.width"],lineDepth:this.node.attributes["line.depth"],lineProximity:this.node.attributes["line.proximity"]}}},
surface:{uniforms(){return{}}},shade:{pipeline(k){if(!this._inherit("fragment"))return k;null==k&&(k=this._shaders.shader());for(let l=0;2>=l;l++)k=m(this._inherit("fragment"),r=>r.fragment(k,l));k.pipe("fragment.map.rgba");return k},normal(k){k.pipe(c.swizzleVec4("xyz"));return k},map(k){return k?this._shaders.shader().pipe("mesh.map.uvwo").pipe(k):k}},position:{pipeline(k){if(!this._inherit("vertex"))return k;null==k&&(k=this._shaders.shader());for(let l=0;3>=l;l++)k=m(this._inherit("vertex"),r=>
r.vertex(k,l));return k},swizzle(k,l){if(k)return this._shaders.shader().pipe(c.swizzleVec4(l)).pipe(k)},swizzle2(k,l,r){if(k)return this._shaders.shader().split().pipe(c.swizzleVec4(l)).next().pipe(c.swizzleVec4(r)).join().pipe(k)}},visible:{make(){const k={type:"visible.change"};let l=null;this.setVisible=function(w){null!=w&&(l=w);return r()};const r=()=>{let w;const z=this.isVisible;let A=null!=(w=null!=l?l:this._get("object.visible"))?w:!0;null!=v&&A&&(A=v.isVisible);this.isVisible=A;if(z!==
this.isVisible)return this.trigger(k)},v=this._inherit("visible");v&&this._listen(v,"visible.change",r);this.is("object")&&this._listen(this.node,"change:object",r);return r()},unmake(){return delete this.isVisible}},active:{make(){const k={type:"active.change"};let l=null;this.setActive=function(w){null!=w&&(l=w);return r()};const r=()=>{let w;const z=this.isActive;let A=null!=(w=null!=l?l:this._get("entity.active"))?w:!0;null!=v&&A&&(A=v.isActive);this.isActive=A;if(z!==this.isActive)return this.trigger(k)},
v=this._inherit("active");v&&this._listen(v,"active.change",r);this.is("entity")&&this._listen(this.node,"change:entity",r);return r()},unmake(){return delete this.isActive}},object:{make(k){let l,r;null==k&&(k=[]);this.objects=k;this.renders=this.objects.reduce((F,L)=>F.concat(L.renders),[]);k=this._inherit("scene");let v=l=r=null;const w=Array.from(this.traits).includes("style");v=1;l=e.NormalBlending;let z=!0,A=!0;w&&({opacity:v}=this.props,{blending:l}=this.props,{zOrder:r}=this.props,{zWrite:z}=
this.props,{zTest:A}=this.props);const H=()=>{const F=null!=r?-r:this.node.order;return(null!=this.isVisible?this.isVisible:1)&&0<v?w?(()=>{const L=[];for(const N of Array.from(this.objects))N.show(1>v,l,F),L.push(N.depth(z,A));return L})():(()=>{const L=[];for(const N of Array.from(this.objects))L.push(N.show(!0,l,F));return L})():(()=>{const L=[];for(const N of Array.from(this.objects))L.push(N.hide());return L})()};this._listen(this.node,"change:style",F=>{({changed:F}=F);let L=null;F["style.opacity"]&&
(L=v=this.props.opacity);F["style.blending"]&&(L=l=this.props.blending);F["style.zOrder"]&&(L=r=this.props.zOrder);F["style.zWrite"]&&(L=z=this.props.zWrite);F["style.zTest"]&&(L=A=this.props.zTest);if(null!=L)return H()});this._listen(this.node,"reindex",H);this._listen(this,"visible.change",H);for(const F of Array.from(this.objects))k.adopt(F);return H()},unmake(k){let l;null==k&&(k=!0);if(this.objects){var r=this._inherit("scene");for(l of Array.from(this.objects))r.unadopt(l);if(k)return(()=>
{const v=[];for(l of Array.from(this.objects))v.push(l.dispose());return v})()}},mask(){let k;if(k=this._inherit("mask"))return k.mask(void 0)}},unit:{make(){let k,l,r,v,w,z,A,H,F,L,N,R,J=Math.PI;this.unitUniforms={renderScaleInv:H=this._attributes.make(this._types.number(1)),renderScale:A=this._attributes.make(this._types.number(1)),renderAspect:v=this._attributes.make(this._types.number(1)),renderWidth:F=this._attributes.make(this._types.number(0)),renderHeight:w=this._attributes.make(this._types.number(0)),
viewWidth:N=this._attributes.make(this._types.number(0)),viewHeight:L=this._attributes.make(this._types.number(0)),pixelRatio:l=this._attributes.make(this._types.number(1)),pixelUnit:r=this._attributes.make(this._types.number(1)),worldUnit:R=this._attributes.make(this._types.number(1)),focusDepth:k=this._attributes.make(this._types.number(1)),renderOdd:z=this._attributes.make(this._types.vec2())};const Y=new e.Vector3,fa=new e.Vector3,Z=()=>{var la;let W;if(null!=(W=null!=da?da.getSize():void 0)){J=
Math.PI;var {scale:ra}=this.props,{fov:za}=this.props,O=null!=this.props.focus?this.props.focus:this.inherit("unit").props.focus,pa=null===ra,Ta=1;if(la=null!=da?da.getCamera():void 0)Ta=la.projectionMatrix,Y.set(0,-.5,1).applyMatrix4(Ta),fa.set(0,.5,1).applyMatrix4(Ta),Y.sub(fa),Ta=Y.y;la=W.renderHeight/W.viewHeight;za=null!=za?Ta*Math.tan(za*J/360):1;ra=pa?la:W.renderHeight/ra*za;pa=W.renderHeight*Ta/2;N.value=W.viewWidth;L.value=W.viewHeight;F.value=W.renderWidth;w.value=W.renderHeight;v.value=
W.aspect;A.value=pa;H.value=1/pa;l.value=la;r.value=ra;R.value=ra/pa;k.value=O;return z.value.set(W.renderWidth%2,W.renderHeight%2).multiplyScalar(.5)}},da=this.is("root")?this:this._inherit("root");this._listen(da,"root.update",Z);return Z()},unmake(){return delete this.unitUniforms},get(){const k={};for(const l in this.unitUniforms)k[l]=this.unitUniforms[l].value;return k},uniforms(){return this.unitUniforms}}};p.Helpers=function(k,l){const r={};for(const v of Array.from(l))if(l=g[v]){r[v]={};for(const w in l)r[v][w]=
l[w].bind(k)}return r}};
shadow$provide[316]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});var u={Types:!0};Object.defineProperty(p,"Types",{enumerable:!0,get:function(){return m.Types}});var q=y(310);Object.keys(q).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(u,e)||e in p&&p[e]===q[e]||Object.defineProperty(p,e,{enumerable:!0,get:function(){return q[e]}}))});var m=y(312),c=y(313);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(u,
e)||e in p&&p[e]===c[e]||Object.defineProperty(p,e,{enumerable:!0,get:function(){return c[e]}}))});var f=y(315);Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(u,e)||e in p&&p[e]===f[e]||Object.defineProperty(p,e,{enumerable:!0,get:function(){return f[e]}}))})};
shadow$provide[317]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.PrimitiveFactory=void 0;class u{constructor(q,m){this.context=m;this.classes=q.Classes;this.helpers=q.Helpers}getTypes(){return Object.keys(this.classes)}make(q,m,c=null){null==m&&(m={});const f=this.classes[q];if(null==f)throw Error(`Unknown primitive class \`${q}\``);q=new f.model(q,f.defaults,m,c,f,this.context.attributes);new f(q,this.context,this.helpers);return q}}p.PrimitiveFactory=u};
shadow$provide[318]=function(D,y,Q,p){function u(f){if("function"!==typeof WeakMap)return null;var e=new WeakMap,g=new WeakMap;return(u=function(k){return k?g:e})(f)}Object.defineProperty(p,"__esModule",{value:!0});var q={Types:!0,Factory:!0};Object.defineProperty(p,"Factory",{enumerable:!0,get:function(){return m.PrimitiveFactory}});p.Types=void 0;D=function(f,e){if(!e&&f&&f.__esModule)return f;if(null===f||"object"!==typeof f&&"function"!==typeof f)return{default:f};if((e=u(e))&&e.has(f))return e.get(f);
var g={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor,l;for(l in f)if("default"!==l&&Object.prototype.hasOwnProperty.call(f,l)){var r=k?Object.getOwnPropertyDescriptor(f,l):null;r&&(r.get||r.set)?Object.defineProperty(g,l,r):g[l]=f[l]}g.default=f;e&&e.set(f,g);return g}(y(316));var m=y(317),c=y(94);Object.keys(c).forEach(function(f){"default"!==f&&"__esModule"!==f&&(Object.prototype.hasOwnProperty.call(q,f)||f in p&&p[f]===c[f]||Object.defineProperty(p,f,{enumerable:!0,get:function(){return c[f]}}))});
p.Types=D};
shadow$provide[319]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Renderable=void 0;class u{constructor(q,m){this.renderer=q;this.shaders=m;this.gl=this.renderer.getContext();null==this.uniforms&&(this.uniforms={})}dispose(){this.uniforms=null}_adopt(q){for(const m in q)this.uniforms[m]=q[m]}_set(q){for(const m in q){const c=q[m];null!=this.uniforms[m]&&(this.uniforms[m].value=c)}}}p.Renderable=u};
shadow$provide[320]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Scene=void 0;var u=y(7);D=y(319);class q extends u.Object3D{constructor(){super();this.matrixAutoUpdate=this.frustumCulled=this.rotationAutoUpdate=!1}}class m extends D.Renderable{constructor(c,f,e){super(c,f,e);this.root=new q;null!=(null!=e?e.scene:void 0)&&(this.scene=e.scene);null==this.scene&&(this.scene=new u.Scene);this.pending=[];this.async=0;this.scratch=new u.WebGLRenderTarget(1,1);this.camera=new u.PerspectiveCamera}inject(c){null!=
c&&(this.scene=c);return this.scene.add(this.root)}unject(){return null!=this.scene?this.scene.remove(this.root):void 0}add(c){return this.async?this.pending.push(c):this._add(c)}remove(c){this.pending=this.pending.filter(f=>f!==c);if(null!=c.parent)return this._remove(c)}_add(c){return this.root.add(c)}_remove(c){return this.root.remove(c)}dispose(){if(null!=this.root.parent)return this.unject()}warmup(c){return this.async=+c||0}render(){if(this.pending.length){var {children:c}=this.root,f=[];for(let k=
0,l=this.async,r=0<=l;r?k<l:k>l;r?k++:k--){var e=this.pending.shift();if(!e)break;this._add(e);f.push(f)}var g=c.map(function(k){return k.visible});c.map(k=>k.visible=!Array.from(f).includes(k));e=this.renderer.getRenderTarget();this.renderer.setRenderTarget(this.scratch);this.renderer.render(this.scene,this.camera);this.renderer.setRenderTarget(e);return c.map((k,l)=>k.visible=g[l])}}toJSON(){return this.root.toJSON()}}p.Scene=m};
shadow$provide[321]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.RenderFactory=void 0;class u{constructor(q,m,c){this.classes=q;this.renderer=m;this.shaders=c}getTypes(){return Object.keys(this.classes)}make(q,m){return new this.classes[q](this.renderer,this.shaders,m)}}p.RenderFactory=u};
shadow$provide[322]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.Buffer=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(104));D=y(319);class m extends D.Renderable{constructor(c,f,e){super(c,f);null==this.items&&(this.items=e.items||1);null==this.samples&&(this.samples=e.samples||1);null==this.channels&&(this.channels=e.channels||4);null==this.callback&&(this.callback=e.callback||function(){})}dispose(){return super.dispose()}update(){const c=this.fill();this.write(c);
return c}setActive(c,f,e,g){}setCallback(c){this.callback=c}write(){}fill(){}generate(c){return q.getStreamer(c,this.samples,this.channels,this.items)}}p.Buffer=m};
shadow$provide[323]=function(D,y,Q,p){function u(e){if("function"!==typeof WeakMap)return null;var g=new WeakMap,k=new WeakMap;return(u=function(l){return l?k:g})(e)}function q(e,g){if(!g&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};if((g=u(g))&&g.has(e))return g.get(e);var k={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor,r;for(r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var v=l?Object.getOwnPropertyDescriptor(e,
r):null;v&&(v.get||v.set)?Object.defineProperty(k,r,v):k[r]=e[r]}k.default=e;g&&g.set(e,k);return k}Object.defineProperty(p,"__esModule",{value:!0});p.DataTexture=void 0;var m=q(y(7)),c=q(y(101));class f{constructor(e,g,k,l,r){this.renderer=e;this.width=g;this.height=k;this.channels=l;this.n=this.width*this.height*this.channels;this.gl=e=this.renderer.getContext();g=null!=(null!=r?r.magFilter:void 0)?null!=r?r.magFilter:void 0:m.NearestFilter;k=null!=(null!=r?r.type:void 0)?null!=r?r.type:void 0:
m.FloatType;this.minFilter=c.paramToGL(e,null!=(null!=r?r.minFilter:void 0)?null!=r?r.minFilter:void 0:m.NearestFilter);this.magFilter=c.paramToGL(e,g);this.type=c.paramToGL(e,k);this.ctor=c.paramToArrayStorage(k);this.build(r)}build(e){const {gl:g}=this,k=this.renderer.state;this.texture=g.createTexture();this.format=[null,g.LUMINANCE,g.LUMINANCE_ALPHA,g.RGB,g.RGBA][this.channels];this.format3=[null,m.LuminanceFormat,m.LuminanceAlphaFormat,m.RGBFormat,m.RGBAFormat][this.channels];k.bindTexture(g.TEXTURE_2D,
this.texture);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,this.minFilter);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,this.magFilter);this.data=new this.ctor(this.n);g.pixelStorei(g.UNPACK_ALIGNMENT,1);g.texImage2D(g.TEXTURE_2D,0,this.format,this.width,this.height,0,this.format,this.type,this.data);this.textureObject=new m.Texture(new Image,m.UVMapping,m.ClampToEdgeWrapping,
m.ClampToEdgeWrapping,null!=e?e.minFilter:void 0,null!=e?e.magFilter:void 0);this.textureProperties=this.renderer.properties.get(this.textureObject);this.textureProperties.__webglInit=!0;this.textureProperties.__webglTexture=this.texture;this.textureObject.format=this.format3;this.textureObject.type=m.FloatType;this.textureObject.unpackAlignment=1;this.textureObject.flipY=!1;this.textureObject.generateMipmaps=!1;this.uniforms={dataResolution:{type:"v2",value:new m.Vector2(1/this.width,1/this.height)},
dataTexture:{type:"t",value:this.textureObject}}}write(e,g,k,l,r){const {gl:v}=this;this.renderer.state.bindTexture(v.TEXTURE_2D,this.texture);v.pixelStorei(v.UNPACK_ALIGNMENT,1);v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,!1);v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);return v.texSubImage2D(v.TEXTURE_2D,0,g,k,l,r,this.format,this.type,e)}dispose(){this.gl.deleteTexture(this.texture);this.textureProperties.__webglInit=!1;return this.textureObject=this.texture=this.textureProperties=this.textureProperties.__webglTexture=
null}}p.DataTexture=f};
shadow$provide[324]=function(D,y,Q,p){function u(k){if("function"!==typeof WeakMap)return null;var l=new WeakMap,r=new WeakMap;return(u=function(v){return v?r:l})(k)}function q(k,l){if(!l&&k&&k.__esModule)return k;if(null===k||"object"!==typeof k&&"function"!==typeof k)return{default:k};if((l=u(l))&&l.has(k))return l.get(k);var r={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor,w;for(w in k)if("default"!==w&&Object.prototype.hasOwnProperty.call(k,w)){var z=v?Object.getOwnPropertyDescriptor(k,
w):null;z&&(z.get||z.set)?Object.defineProperty(r,w,z):r[w]=k[w]}r.default=k;l&&l.set(k,r);return r}Object.defineProperty(p,"__esModule",{value:!0});p.DataBuffer=void 0;var m=q(y(104)),c=q(y(105));D=y(322);var f=y(323),e=y(7);class g extends D.Buffer{constructor(k,l,r,v){null==v&&(v=!0);const w=r.width||1,z=r.height||1,A=r.depth||1,H=w*z*A;r.samples||(r.samples=H);super(k,l,r);this.width=w;this.height=z;this.depth=A;null==this.samples&&(this.samples=H);v&&this.build(r)}shader(k,l){null==l&&(l=4);
1<this.items||1<this.depth?(4!==l&&k.pipe(c.extendVec(l,4)),k.pipe("map.xyzw.texture",this.uniforms)):2!==l&&k.pipe(c.truncateVec(l,2));k.pipe(`map.2d.data${this.wrap?".wrap":""}`,this.uniforms);k.pipe("sample.2d",this.uniforms);4>this.channels&&k.pipe(c.swizzleVec4(["0000","x000","xw00","xyz0"][this.channels]));return k}build(k){this.data=new Float32Array(this.samples*this.channels*this.items);this.texture=new f.DataTexture(this.renderer,this.items*this.width,this.height*this.depth,this.channels,
k);this.used=this.filled=0;this._adopt(this.texture.uniforms);this._adopt({dataPointer:{type:"v2",value:new e.Vector2},textureItems:{type:"f",value:this.items},textureHeight:{type:"f",value:this.height}});this.dataPointer=this.uniforms.dataPointer.value;this.streamer=this.generate(this.data)}dispose(){this.data=null;this.texture.dispose();return super.dispose()}getFilled(){return this.filled}setCallback(k){this.callback=k;return this.filled=0}copy(k){const l=Math.min(k.length,this.samples*this.channels*
this.items),r=this.data;for(let v=0,w=l,z=0<=w;z?v<w:v>w;z?v++:v--)r[v]=k[v];this.write(Math.ceil(l/this.channels/this.items))}write(k){null==k&&(k=this.samples);let l=k/this.width;k*=this.items;const r=1>l?k:this.items*this.width;l=Math.ceil(l);this.texture.write(this.data,0,0,r,l);this.dataPointer.set(.5,.5);this.filled=1;this.used=k}through(k,l){let r,v;const {consume:w,done:z}=v=this.streamer,{emit:A}=r=l.streamer;let H=0,F=()=>w((L,N,R,J)=>k(A,L,N,R,J,H));F=m.repeatCall(F,this.items);return()=>
{v.reset();r.reset();const L=this.used;for(H=0;!z()&&H<L;)F(),H++;return v.count()}}}p.DataBuffer=g};
shadow$provide[325]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.ArrayBuffer_=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(104));D=y(324);class m extends D.DataBuffer{constructor(c,f,e){const g=e.width||1,k=e.history||1;e.width=g;e.height=k;e.depth=1;super(c,f,e,!1);this.width=g;this.history=k;this.samples=g;this.wrap=1<k;this.build(e)}build(c){super.build();this.pad=this.index=0;return this.streamer=this.generate(this.data)}setActive(c){return this.pad=Math.max(0,this.width-
c)}fill(){const {callback:c}=this;"function"===typeof c.reset&&c.reset();const {emit:f,count:e,done:g,reset:k}=this.streamer;k();const l=this.samples-this.pad;let r=0;for(;!g()&&r<l&&!1!==c(f,r++);)!0;return Math.floor(e()/this.items)}write(c){null==c&&(c=this.samples);c*=this.items;this.texture.write(this.data,0,this.index,c,1);this.dataPointer.set(.5,this.index+.5);this.index=(this.index+this.history-1)%this.history;return this.filled=Math.min(this.history,this.filled+1)}through(c,f){let e,g;const {consume:k,
done:l}=g=this.streamer,{emit:r}=e=f.streamer;let v=0,w=()=>k((z,A,H,F)=>c(r,z,A,H,F,v));w=q.repeatCall(w,this.items);return()=>{g.reset();e.reset();const z=this.samples-this.pad;for(v=0;!l()&&v<z;)w(),v++;return g.count()}}}p.ArrayBuffer_=m};
shadow$provide[326]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Geometry=void 0;var u=y(7);class q extends u.BufferGeometry{constructor(){super();new u.BufferGeometry(this);null==this.uniforms&&(this.uniforms={});null==this.groups&&(this.groups=[])}_reduce(m,c){let f=!1;for(let e=0;e<m.length;e++){const g=m[e],k=c[e];f&&(m[e]=k);1<g&&(f=!0)}return m.reduce((e,g)=>e*g)}_emitter(m){m="index"==m?this.getIndex():this.getAttribute(m);const c=m.itemSize,{array:f}=m;let e=0;return[null,
function(g){f[e++]=g},function(g,k){f[e++]=g;f[e++]=k},function(g,k,l){f[e++]=g;f[e++]=k;f[e++]=l},function(g,k,l,r){f[e++]=g;f[e++]=k;f[e++]=l;f[e++]=r}][c]}_finalize(){}_offsets(m){this.groups=m}}p.Geometry=q};
shadow$provide[327]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.ClipGeometry=void 0;D=y(326);var u=y(7);class q extends D.Geometry{_clipUniforms(){this.geometryClip=new u.Vector4(1E10,1E10,1E10,1E10);this.geometryResolution=new u.Vector4;this.mapSize=new u.Vector4;null==this.uniforms&&(this.uniforms={});this.uniforms.geometryClip={type:"v4",value:this.geometryClip};this.uniforms.geometryResolution={type:"v4",value:this.geometryResolution};return this.uniforms.mapSize={type:"v4",
value:this.mapSize}}_clipGeometry(m,c,f,e){this.geometryClip.set(Math.max(0,m-1),Math.max(0,c-1),Math.max(0,f-1),Math.max(0,e-1));return this.geometryResolution.set(1/Math.max(1,m-1),1/Math.max(1,c-1),1/Math.max(1,f-1),1/Math.max(1,e-1))}_clipMap(m,c,f,e){return this.mapSize.set(m,c,f,e)}_clipOffsets(m,c,f,e,g,k,l,r,v){c=this._reduce([e,f,c,g],[r,l,k,v]);return this._offsets([{start:0,count:c*m,materialIndex:0}])}}p.ClipGeometry=q};
shadow$provide[328]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.ArrowGeometry=void 0;var u=y(7);D=y(327);class q extends D.ClipGeometry{constructor(m){var c,f,e;let g;var k;let l,r;var v;super(m);this._clipUniforms();this.sides=l=+m.sides||12;this.samples=k=+m.samples||2;this.strips=r=+m.strips||1;this.ribbons=g=+m.ribbons||1;this.layers=e=+m.layers||1;this.flip=c=null!=m.flip?m.flip:!1;this.closed=f=null!=m.closed?m.closed:!1;this.anchor=m=null!=m.anchor?m.anchor:c||f?0:
k-1;var w=r*g*e;var z=(l+2)*w;this.setIndex(new u.BufferAttribute(new Uint32Array(2*l*w*3),1));this.setAttribute("position4",new u.BufferAttribute(new Float32Array(4*z),4));this.setAttribute("arrow",new u.BufferAttribute(new Float32Array(3*z),3));this.setAttribute("attach",new u.BufferAttribute(new Float32Array(2*z),2));var A=this._emitter("index");const H=this._emitter("position4"),F=this._emitter("arrow"),L=this._emitter("attach"),N=[];z=0;for(v=0<=l;v?z<l:z>l;v?z++:z--){var R=z/l*2*Math.PI;N.push([Math.cos(R),
Math.sin(R),1])}v=0;for(let J=0,Y=w,fa=0<=Y;fa?J<Y:J>Y;fa?J++:J--){const Z=v++,da=Z+l+1;z=0;R=l;for(w=0<=R;w?z<R:z>R;w?z++:z--){const la=v+z%l,W=v+(z+1)%l;A(Z);A(la);A(W);A(W);A(la);A(da)}v+=l+1}A=c?1:f?k-1:-1;c=c&&!f?k-1:0;for(let J=0,Y=e,fa=0<=Y;fa?J<Y:J>Y;fa?J++:J--)for(let Z=0,da=g,la=0<=da;la?Z<da:Z>da;la?Z++:Z--)for(let W=0,ra=r,za=0<=ra;za?W<ra:W>ra;za?W++:W--){H(m,W,Z,J);F(0,0,0);L(A,c);z=0;f=l;for(e=0<=f;e?z<f:z>f;e?z++:z--)H(m,W,Z,J),k=N[z],F(k[0],k[1],k[2]),L(A,c);H(m,W,Z,J);F(0,0,1);L(A,
c)}this._finalize();this.clip()}clip(m,c,f,e){null==m&&({samples:m}=this);null==c&&({strips:c}=this);null==f&&({ribbons:f}=this);null==e&&({layers:e}=this);this._clipGeometry(m,c,f,e);m=0<m?this.sides*this._reduce([e,f,c],[this.layers,this.ribbons,this.strips]):0;return this._offsets([{start:0,count:6*m,materialIndex:0}])}}p.ArrowGeometry=q};
shadow$provide[329]=function(D,y,Q,p){function u(f){if("function"!==typeof WeakMap)return null;var e=new WeakMap,g=new WeakMap;return(u=function(k){return k?g:e})(f)}Object.defineProperty(p,"__esModule",{value:!0});p.Base=void 0;var q=function(f,e){if(!e&&f&&f.__esModule)return f;if(null===f||"object"!==typeof f&&"function"!==typeof f)return{default:f};if((e=u(e))&&e.has(f))return e.get(f);var g={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor,l;for(l in f)if("default"!==l&&Object.prototype.hasOwnProperty.call(f,
l)){var r=k?Object.getOwnPropertyDescriptor(f,l):null;r&&(r.get||r.set)?Object.defineProperty(g,l,r):g[l]=f[l]}g.default=f;e&&e.set(f,g);return g}(y(105)),m=y(7);D=y(319);class c extends D.Renderable{constructor(f,e,g){super(f,e,g);this.zUnits=null!=g.zUnits?g.zUnits:0}raw(){for(const f of Array.from(this.renders))this._raw(f);return null}depth(f,e){for(const g of Array.from(this.renders))this._depth(g,f,e);return null}polygonOffset(f,e){for(const g of Array.from(this.renders))this._polygonOffset(g,
f,e);return null}show(f,e,g){return Array.from(this.renders).map(k=>this._show(k,f,e,g))}hide(){for(const f of Array.from(this.renders))this._hide(f);return null}_injectPreamble(f,e){f=f+"\n"+e;return e.match(/#extension/)?this._hoist(f):f}_hoist(f){f=f.split("\n");const e=[];for(const g of Array.from(f))g.match(/^\s*#extension/)?e.unshift(g):e.push(g);return e.join("\n")}_material(f){var e=this.renderer.capabilities.precision;const g=`\
    precision ${e} float;
    precision ${e} int;
uniform mat4 modelMatrix;
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 cameraPosition;\
`;e=`\
    precision ${e} float;
    precision ${e} int;
uniform mat4 viewMatrix;
uniform vec3 cameraPosition;\
`;const k={};Object.assign(k,f);delete k.attributes;delete k.varyings;delete k.inspect;delete k.vertexGraph;delete k.fragmentGraph;const l=new m.RawShaderMaterial(k);["vertexGraph","fragmentGraph","inspect"].forEach(r=>l[r]=f[r]);l.vertexShader=this._injectPreamble(g,l.vertexShader);l.fragmentShader=this._injectPreamble(e,l.fragmentShader);return l}_raw(f){f.rotationAutoUpdate=!1;f.frustumCulled=!1;f.matrixAutoUpdate=!1;f.material.defaultAttributeValues=void 0}_depth(f,e,g){f=f.material;f.depthWrite=
e;return f.depthTest=g}_polygonOffset(f,e,g){g-=this.zUnits;const k=0!==g;f=f.material;if(f.polygonOffset=k)return f.polygonOffsetFactor=e,f.polygonOffsetUnits=g}_show(f,e,g,k){e=f.material;f.renderOrder=-k;f.visible=!0;e.transparent=!0;e.blending=g;return null}_hide(f){return f.visible=!1}_vertexColor(f,e){if(f||e){var g=this.shaders.shader();f&&(g.require(f),g.pipe("mesh.vertex.color",this.uniforms));e&&(g.require(e),g.pipe("mesh.vertex.mask",this.uniforms));return g}}_vertexPosition(f,e,g,k,l){let r;
const v=this.shaders.shader();if(g||e&&!0!==e){r={};if(0<k||l)r.POSITION_MAP="";0<k&&(r[["POSITION_U","POSITION_UV","POSITION_UVW","POSITION_UVWO"][k-1]]="");l&&(r.POSITION_STPQ="")}v.require(f);return v.pipe("mesh.vertex.position",this.uniforms,r)}_fragmentColor(f,e,g,k,l,r,v,w,z){const A=this.shaders.shader();let H=!1,F=!1;const L={};0<r&&(L[["POSITION_U","POSITION_UV","POSITION_UVW","POSITION_UVWO"][r-1]]="");v&&(L.POSITION_STPQ="");f&&(A.pipe("style.color",this.uniforms),H=!0,g||l||e)&&(z&&!g||
A.pipe("mesh.gamma.in"),F=!0);g&&(A.isolate(),A.pipe("mesh.fragment.color",this.uniforms),z&&!H||A.pipe("mesh.gamma.in"),A.end(),H&&A.pipe(q.binaryOperator("vec4","*")),z&&H&&A.pipe("mesh.gamma.out"),F=H=!0);l&&(!H&&w&&A.pipe(q.constant("vec4","vec4(1.0)")),A.isolate(),A.require(l),A.pipe("mesh.fragment.map",this.uniforms,L),z||A.pipe("mesh.gamma.in"),A.end(),w?A.pipe(w):H&&A.pipe(q.binaryOperator("vec4","*")),F=H=!0);e&&(H||A.pipe(q.constant("vec4","vec4(1.0)")),!0===e?A.pipe("mesh.fragment.shaded",
this.uniforms):(A.require(e),A.pipe("mesh.fragment.material",this.uniforms,L)),F=!0);F&&!z&&A.pipe("mesh.gamma.out");k&&(A.pipe("mesh.fragment.mask",this.uniforms),H&&A.pipe(q.binaryOperator("vec4","*")));return A}}p.Base=c};
shadow$provide[330]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Arrow=void 0;var u=y(7),q=y(328);D=y(329);class m extends D.Base{constructor(c,f,e){super(c,f,e);var {uniforms:g}=e;const {material:k,position:l,color:r,mask:v,map:w,combine:z,stpq:A,linear:H}=e;null==g&&(g={});c=null!=g.styleColor;this.geometry=new q.ArrowGeometry({sides:e.sides,samples:e.samples,strips:e.strips,ribbons:e.ribbons,layers:e.layers,anchor:e.anchor,flip:e.flip,closed:e.closed});this._adopt(g);this._adopt(this.geometry.uniforms);
e={};closed&&(e.ARROW_CLOSED="");f=f.material();g=f.vertex;g.pipe(this._vertexColor(r,v));g.require(this._vertexPosition(l,k,w,1,A));g.pipe("arrow.position",this.uniforms,e);g.pipe("project.position",this.uniforms);f.fragment=c=this._fragmentColor(c,k,r,v,w,1,A,z,H);c.pipe("fragment.color",this.uniforms);c=f.link({side:u.DoubleSide});this.material=this._material(c);f=new u.Mesh(this.geometry,this.material);f.frustumCulled=!1;f.matrixAutoUpdate=!1;f.userData=c;this._raw(f);this.renders=[f]}dispose(){this.geometry.dispose();
this.material.dispose();this.renders=this.geometry=this.material=null;return super.dispose()}}p.Arrow=m};
shadow$provide[331]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.BackedTexture=void 0;D=y(323);class u extends D.DataTexture{constructor(q,m,c,f,e){super(q,m,c,f,e);this.data=new this.ctor(this.n)}resize(q,m){const c=this.data,f=this.width,e=this.height;this.width=q;this.height=m;this.n=q*m*this.channels;this.data=new this.ctor(this.n);const {gl:g}=this;this.renderer.state.bindTexture(g.TEXTURE_2D,this.texture);g.pixelStorei(g.UNPACK_ALIGNMENT,1);g.texImage2D(g.TEXTURE_2D,
0,this.format,q,m,0,this.format,this.type,this.data);this.uniforms.dataResolution.value.set(1/q,1/m);return this.write(c,0,0,f,e)}write(q,m,c,f,e){({width:r}=this);const g=this.data;var {channels:k}=this;let l=0;if(r===f&&0===m){var r=c*f*k;for(var v=f*e*k;l<v;)g[r++]=q[l++]}else{v=r*k;const w=f*k;k*=m;let z=c;const A=c+e;for(;z<A;){let H=0;for(r=k+z*v;H++<w;)g[r++]=q[l++];z++}}return super.write(q,m,c,f,e)}dispose(){this.data=null;return super.dispose()}}p.BackedTexture=u};
shadow$provide[332]=function(D,y,Q,p){function u(l){if("function"!==typeof WeakMap)return null;var r=new WeakMap,v=new WeakMap;return(u=function(w){return w?v:r})(l)}function q(l,r){return"undefined"!==typeof l&&null!==l?r(l):void 0}Object.defineProperty(p,"__esModule",{value:!0});p.Atlas=void 0;var m=function(l,r){if(!r&&l&&l.__esModule)return l;if(null===l||"object"!==typeof l&&"function"!==typeof l)return{default:l};if((r=u(r))&&r.has(l))return r.get(l);var v={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor,
z;for(z in l)if("default"!==z&&Object.prototype.hasOwnProperty.call(l,z)){var A=w?Object.getOwnPropertyDescriptor(l,z):null;A&&(A.get||A.set)?Object.defineProperty(v,z,A):v[z]=l[z]}v.default=l;r&&r.set(l,v);return v}(y(105)),c=y(331),f=y(323);D=y(319);var e=y(7);class g extends D.Renderable{constructor(l,r,v,w){null==w&&(w=!0);super(l,r);null==this.width&&(this.width=v.width||512);null==this.height&&(this.height=v.height||512);null==this.channels&&(this.channels=v.channels||4);null==this.backed&&
(this.backed=v.backed||!1);this.samples=this.width*this.height;w&&this.build(v)}shader(l){l.pipe("map.2d.data",this.uniforms);l.pipe("sample.2d",this.uniforms);4>this.channels&&l.pipe(m.swizzleVec4(["0000","x000","xw00","xyz0"][this.channels]));return l}build(l){let r;this.klass=r=this.backed?c.BackedTexture:f.DataTexture;this.texture=new r(this.renderer,this.width,this.height,this.channels,l);this.uniforms={dataPointer:{type:"v2",value:new e.Vector2(0,0)}};this._adopt(this.texture.uniforms);return this.reset()}reset(){this.rows=
[];return this.bottom=0}resize(l,r){if(!this.backed)throw Error("Cannot resize unbacked texture atlas");2048<l&&2048<r?console.warn(`Giant text atlas ${l}x${r}.`):console.info(`Resizing text atlas ${l}x${r}.`);this.texture.resize(l,r);this.width=l;this.height=r;return this.samples=l*r}collapse(l){let r;const {rows:v}=this;v.splice(v.indexOf(l),1);this.bottom=null!=(r=q(v[v.length-1],w=>w.bottom))?r:0;if(this.last===l)return this.last=null}allocate(l,r,v,w){const z=this.width,A=this.height,H=2*v;if(r>
z)return this.resize(2*z,2*A),this.last=null,this.allocate(l,r,v,w);let F=this.last;if(null!=F&&F.height>=v&&F.height<H&&F.width+r<=z)F.append(l,r,v,w);else{var L=0,N=-1,R=0;for(let J=0;J<this.rows.length;J++)if(F=this.rows[J],F.top-L>=v&&0>N&&(N=J,R=L),{bottom:L}=F,F.height>=v&&F.height<H&&F.width+r<=z){F.append(l,r,v,w);this.last=F;return}if(0<=N)F=new k(R,v),this.rows.splice(N,0,F);else{R=L;L+=v;if(L>=A)return this.resize(2*z,2*A),this.last=null,this.allocate(l,r,v,w);F=new k(R,v);this.rows.push(F);
this.bottom=L}F.append(l,r,v,w);this.last=F}}read(){return this.texture.textureObject}write(l,r,v,w,z){return this.texture.write(l,r,v,w,z)}dispose(){this.texture.dispose();this.data=null;return super.dispose()}}p.Atlas=g;class k{constructor(l,r){this.top=l;this.bottom=l+r;this.width=0;this.height=r;this.alive=0;this.keys=[]}append(l,r,v,w){v=this.width;const z=this.top;this.alive++;this.width+=r;this.keys.push(l);return w(this,v,z)}}};
shadow$provide[333]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Debug=void 0;var u=y(7);D=y(329);class q extends D.Base{constructor(m,c,f){super(m,c,f);this.geometry=new u.PlaneGeometry(1,1);this.material=new u.MeshBasicMaterial({map:f.map});this.material.side=u.DoubleSide;m=new u.Mesh(this.geometry,this.material);m.position.x+=f.x||0;m.position.y+=f.y||0;m.frustumCulled=!1;m.scale.set(2,2,2);m.__debug=!0;this.objects=[m]}dispose(){this.geometry.dispose();this.material.dispose();
this.objects=this.geometry=this.material=null;return super.dispose()}}p.Debug=q};
shadow$provide[334]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.FaceGeometry=void 0;var u=y(7);D=y(327);class q extends D.ClipGeometry{constructor(m){let c,f,e,g;super(m);this._clipUniforms();this.items=f=+m.items||2;this.width=g=+m.width||1;this.height=c=+m.height||1;this.depth=m=+m.depth||1;this.sides=e=Math.max(0,f-2);const k=g*c*m;var l=f*k;this.setIndex(new u.BufferAttribute(new Uint32Array(e*k*3),1));this.setAttribute("position4",new u.BufferAttribute(new Float32Array(4*
l),4));l=this._emitter("index");const r=this._emitter("position4");let v=0;for(let w=0,z=k,A=0<=z;A?w<z:w>z;A?w++:w--){for(let H=0,F=e,L=0<=F;L?H<F:H>F;L?H++:H--)l(v),l(v+H+1),l(v+H+2);v+=f}for(let w=0,z=m,A=0<=z;A?w<z:w>z;A?w++:w--)for(let H=0,F=c,L=0<=F;L?H<F:H>F;L?H++:H--)for(let N=0,R=g,J=0<=R;J?N<R:N>R;J?N++:N--)for(let Y=0,fa=f,Z=0<=fa;Z?Y<fa:Y>fa;Z?Y++:Y--)r(N,H,w,Y);this._finalize();this.clip()}clip(m,c,f,e){null==m&&({width:m}=this);null==c&&({height:c}=this);null==f&&({depth:f}=this);null==
e&&({items:e}=this);const g=Math.max(0,e-2);this._clipGeometry(m,c,f,e);return this._clipOffsets(3,m,c,f,g,this.width,this.height,this.depth,this.sides)}}p.FaceGeometry=q};
shadow$provide[335]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Face=void 0;var u=y(7);D=y(329);var q=y(334);class m extends D.Base{constructor(c,f,e){super(c,f,e);let {uniforms:g,material:k}=e;const {position:l,color:r,mask:v,map:w,combine:z,stpq:A,linear:H}=e;null==g&&(g={});null==k&&(k=!0);c=null!=g.styleColor;this.geometry=new q.FaceGeometry({items:e.items,width:e.width,height:e.height,depth:e.depth});this._adopt(g);this._adopt(this.geometry.uniforms);f=f.material();e=
f.vertex;e.pipe(this._vertexColor(r,v));e.require(this._vertexPosition(l,k,w,2,A));k||e.pipe("face.position",this.uniforms);k&&e.pipe("face.position.normal",this.uniforms);e.pipe("project.position",this.uniforms);f.fragment=c=this._fragmentColor(c,k,r,v,w,2,A,z,H);c.pipe("fragment.color",this.uniforms);c=f.link({side:u.DoubleSide});this.material=this._material(c);f=new u.Mesh(this.geometry,this.material);f.userData=c;this._raw(f);this.renders=[f]}dispose(){this.geometry.dispose();this.material.dispose();
this.renders=this.geometry=this.material=null;return super.dispose()}}p.Face=m};
shadow$provide[336]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.LineGeometry=void 0;var u=y(7);D=y(327);class q extends D.ClipGeometry{constructor(m){var c,f,e,g;let k,l,r;var v;let w;super(m);this._clipUniforms();this.closed=c=m.closed||!1;this.samples=r=(+m.samples||2)+(c?1:0);this.strips=w=+m.strips||1;this.ribbons=l=+m.ribbons||1;this.layers=k=+m.layers||1;this.detail=f=+m.detail||1;var z=r-1;this.joints=g=f-1;this.vertices=m=(z-(c?0:1))*g+r;this.segments=v=(z-(c?0:1))*
g+z;m=m*w*l*k*2;this.setIndex(new u.BufferAttribute(new Uint32Array(v*w*l*k*6),1));this.setAttribute("position4",new u.BufferAttribute(new Float32Array(4*m),4));this.setAttribute("line",new u.BufferAttribute(new Float32Array(1*m),1));1<f&&this.setAttribute("joint",new u.BufferAttribute(new Float32Array(m),1));var A=this._emitter("index");m=this._emitter("position4");z=this._emitter("line");1<f&&(e=this._emitter("joint"));var H=0;for(let Y=0,fa=l*k,Z=0<=fa;Z?Y<fa:Y>fa;Z?Y++:Y--)for(let da=0,la=w,W=
0<=la;W?da<la:da>la;W?da++:da--){for(let ra=0,za=v,O=0<=za;O?ra<za:ra>za;O?ra++:ra--)A(H),A(H+1),A(H+2),A(H+2),A(H+1),A(H+3),H+=2;H+=2}var F=c?()=>0:function(Y){return 0===Y?-1:Y===r-1?1:0};if(1<f){var L;c=0;for(L=0<=k;L?c<k:c>k;L?c++:c--){var N=void 0,R=void 0;H=0;R=l;for(N=0<=R;N?H<R:H>R;N?H++:H--){let Y,fa;A=0;fa=w;for(Y=0<=fa;Y?A<fa:A>fa;Y?A++:A--){let Z,da,la;v=la=0;da=r;for(Z=0<=da;Z?la<da:la>da;Z?la++:la--,v=la){var J=F(v);if(0!==J)m(v,A,H,c),m(v,A,H,c),z(1),z(-1),e(.5),e(.5);else for(let W=
0,ra=f,za=0<=ra;za?W<ra:W>ra;za?W++:W--)m(v,A,H,c),m(v,A,H,c),z(1),z(-1),e(W/g),e(W/g)}}}}}else for(c=0,e=0<=k;e?c<k:c>k;e?c++:c--)for(H=0,g=l,f=0<=g;f?H<g:H>g;f?H++:H--)for(A=0,F=w,J=0<=F;J?A<F:A>F;J?A++:A--)for(v=R=0,N=r,L=0<=N;L?R<N:R>N;L?R++:R--,v=R)m(v,A,H,c),m(v,A,H,c),z(1),z(-1);this._finalize();this.clip()}clip(m,c,f,e){null==m&&(m=this.samples-this.closed);null==c&&({strips:c}=this);null==f&&({ribbons:f}=this);null==e&&({layers:e}=this);const g=m+(m-(this.closed?0:2))*this.joints-(this.closed?
0:1);m+=this.closed;this._clipGeometry(m,c,f,e);return this._clipOffsets(6,g,c,f,e,this.segments,this.strips,this.ribbons,this.layers)}}p.LineGeometry=q};
shadow$provide[337]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Line=void 0;var u=y(7);D=y(329);var q=y(336);class m extends D.Base{constructor(c,f,e){var g;super(c,f,e);let {uniforms:k,stroke:l,join:r}=e;const {material:v,position:w,color:z,mask:A,map:H,combine:F,stpq:L,linear:N,clip:R,proximity:J,closed:Y}=e;null==k&&(k={});l=[null,"dotted","dashed"][l];c=null!=k.styleColor;r=null!=(g=["miter","round","bevel"][r])?g:"miter";g={miter:1,round:4,bevel:2}[r];this.geometry=new q.LineGeometry({samples:e.samples,
strips:e.strips,ribbons:e.ribbons,layers:e.layers,anchor:e.anchor,closed:e.closed,detail:g});this._adopt(k);this._adopt(this.geometry.uniforms);f=f.material();e={};l&&(e.LINE_STROKE="");R&&(e.LINE_CLIP="");null!=J&&(e.LINE_PROXIMITY="");e["LINE_JOIN_"+r.toUpperCase()]="";1<g&&(e.LINE_JOIN_DETAIL=g);Y&&(e.LINE_CLOSED="");g=f.vertex;g.pipe(this._vertexColor(z,A));g.require(this._vertexPosition(w,v,H,2,L));g.pipe("line.position",this.uniforms,e);g.pipe("project.position",this.uniforms);e=f.fragment;
l&&e.pipe(`fragment.clip.${l}`,this.uniforms);R&&e.pipe("fragment.clip.ends",this.uniforms);null!=J&&e.pipe("fragment.clip.proximity",this.uniforms);e.pipe(this._fragmentColor(c,v,z,A,H,2,L,F,N));e.pipe("fragment.color",this.uniforms);c=f.link({side:u.DoubleSide});this.material=this._material(c);f=new u.Mesh(this.geometry,this.material);f.userData=c;this._raw(f);this.renders=[f]}dispose(){this.geometry.dispose();this.material.dispose();this.renders=this.geometry=this.material=null;return super.dispose()}}
p.Line=m};
shadow$provide[338]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.MatrixBuffer=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(104));D=y(324);class m extends D.DataBuffer{constructor(c,f,e){const g=e.width||1,k=e.height||1,l=e.history||1;e.depth=l;super(c,f,e,!1);this.width=g;this.height=k;this.history=l;this.samples=g*k;this.wrap=1<l;this.build(e)}build(c){super.build();this.index=0;this.pad={x:0,y:0};return this.streamer=this.generate(this.data)}getFilled(){return this.filled}setActive(c,
f){let e;return[this.pad.x,this.pad.y]=Array.from(e=[Math.max(0,this.width-c),Math.max(0,this.height-f)]),e}fill(){let c,f,e;const {callback:g}=this;"function"===typeof g.reset&&g.reset();const {emit:k,skip:l,count:r,done:v,reset:w}=this.streamer;w();const z=this.width,A=this.pad.x,H=this.samples-this.pad.y*z;let F=c=f=0;if(A)for(;!v()&&f<H&&(f++,e=g(k,F,c),++F===z-A&&(l(A),f+=A,F=0,c++),!1!==e););else for(;!v()&&f<H&&(f++,e=g(k,F,c),++F===z&&(F=0,c++),!1!==e););return Math.floor(r()/this.items)}write(c){null==
c&&(c=this.samples);c*=this.items;const f=this.width*this.items;this.texture.write(this.data,0,this.index*this.height,f,Math.ceil(c/f));this.dataPointer.set(.5,this.index*this.height+.5);this.index=(this.index+this.history-1)%this.history;return this.filled=Math.min(this.history,this.filled+1)}through(c,f){let e,g,k;const {consume:l,skip:r,done:v}=k=this.streamer,{emit:w}=e=f.streamer;let z=g=0,A=()=>l((H,F,L,N)=>c(w,H,F,L,N,z,g));A=q.repeatCall(A,this.items);return()=>{let H;k.reset();e.reset();
const F=this.width,L=this.pad.x,N=this.samples-this.pad.y*F;z=g=H=0;if(L)for(;!v()&&H<N;)H++,A(),++z===F-L&&(r(L),z=0,g++);else for(;!v()&&H<N;)H++,A(),++z===F&&(z=0,g++);return k.count()}}}p.MatrixBuffer=m};
shadow$provide[339]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.RenderTarget=void 0;var u=y(7);class q{constructor(m,c,f,e,g){this.gl=m;null==g&&(g={});null==g.minFilter&&(g.minFilter=u.NearestFilter);null==g.magFilter&&(g.magFilter=u.NearestFilter);null==g.format&&(g.format=u.RGBAFormat);null==g.type&&(g.type=u.UnsignedByteType);this.options=g;this.width=c||1;this.height=f||1;this.frames=e||1;this.buffers=this.frames+1;this.build()}build(){let m;const c=()=>new u.WebGLRenderTarget(this.width,
this.height,this.options);this.targets=(()=>{let e,g;const k=[];m=0;g=this.buffers;for(e=0<=g;e?m<g:m>g;e?m++:m--)k.push(c());return k})();const f=[];this.targets.forEach(e=>f.push(e.texture));this.reads=f;this.write=this.targets[this.buffers-1];this.uniforms={dataResolution:{type:"v2",value:new u.Vector2(1/this.width,1/this.height)},dataTexture:{type:"t",value:this.reads[0]},dataTextures:{type:"tv",value:this.reads}}}cycle(){this.targets.unshift(this.targets.pop());this.write=this.targets[this.buffers-
1];this.reads.unshift(this.reads.pop());this.uniforms.dataTexture.value=this.reads[0]}warmup(m){return(()=>{const c=[];for(let f=0,e=this.buffers,g=0<=e;g?f<e:f>e;g?f++:f--)m(this.write),c.push(this.cycle());return c})()}dispose(){for(const m of Array.from(this.targets))m.dispose();return this.targets=this.reads=this.write=null}}p.RenderTarget=q};
shadow$provide[340]=function(D,y,Q,p){function u(e){if("function"!==typeof WeakMap)return null;var g=new WeakMap,k=new WeakMap;return(u=function(l){return l?k:g})(e)}Object.defineProperty(p,"__esModule",{value:!0});p.RenderToTexture=void 0;var q=function(e,g){if(!g&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};if((g=u(g))&&g.has(e))return g.get(e);var k={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor,r;for(r in e)if("default"!==r&&
Object.prototype.hasOwnProperty.call(e,r)){var v=l?Object.getOwnPropertyDescriptor(e,r):null;v&&(v.get||v.set)?Object.defineProperty(k,r,v):k[r]=e[r]}k.default=e;g&&g.set(e,k);return k}(y(105)),m=y(7),c=y(339);D=y(319);class f extends D.Renderable{constructor(e,g,k){super(e,g);this.scene=null!=k.scene?k.scene:new m.Scene;this.camera=k.camera;this.build(k)}shaderRelative(e){null==e&&(e=this.shaders.shader());return e.pipe("sample.2d",this.uniforms)}shaderAbsolute(e,g,k){null==g&&(g=1);null==k&&(k=
4);null==e&&(e=this.shaders.shader());if(1>=g)return 2<k&&e.pipe(q.truncateVec(k,2)),e.pipe("map.2d.data",this.uniforms),e.pipe("sample.2d",this.uniforms);g=q.sample2DArray(Math.min(g,this.target.frames));4>k&&e.pipe(q.extendVec(k,4));e.pipe("map.xyzw.2dv");e.split();e.pipe("map.2d.data",this.uniforms);e.pass();return e.pipe(g,this.uniforms)}build(e){this.camera||(this.camera=new m.PerspectiveCamera,this.camera.position.set(0,0,3),this.camera.lookAt(new m.Vector3));"function"===typeof this.scene.inject&&
this.scene.inject();this.target=new c.RenderTarget(this.gl,e.width,e.height,e.frames,e);this.target.warmup(g=>this.renderer.setRenderTarget(g));this.renderer.setRenderTarget(null);this._adopt(this.target.uniforms);this._adopt({dataPointer:{type:"v2",value:new m.Vector2(.5,.5)}});return this.filled=0}adopt(e){return Array.from(e.renders).map(g=>this.scene.add(g))}unadopt(e){return Array.from(e.renders).map(g=>this.scene.remove(g))}render(e){null==e&&({camera:e}=this);const g=this.renderer.getRenderTarget();
this.renderer.setRenderTarget(this.target.write);this.renderer.render(null!=this.scene.scene?this.scene.scene:this.scene,e);this.renderer.setRenderTarget(g);this.target.cycle();if(this.filled<this.target.frames)return this.filled++}read(e){null==e&&(e=0);return this.target.reads[Math.abs(e)]}getFrames(){return this.target.frames}getFilled(){return this.filled}dispose(){"function"===typeof this.scene.unject&&this.scene.unject();this.scene=this.camera=null;this.target.dispose();return super.dispose()}}
p.RenderToTexture=f};
shadow$provide[341]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Memo=void 0;var u=y(7);D=y(340);class q extends D.RenderToTexture{constructor(m,c,f){let e,g;const k=f.items||1,l=f.channels||4,r=f.width||1,v=f.height||1,w=f.depth||1;f.format=u.RGBAFormat;f.width=g=k*r;f.height=e=v*w;f.frames=1;delete f.items;delete f.depth;delete f.channels;super(m,c,f);null==this.items&&(this.items=k);null==this.channels&&(this.channels=l);null==this.width&&(this.width=r);this._width=g;null==
this.height&&(this.height=v);this._height=e;null==this.depth&&(this.depth=w);this._adopt({textureItems:{type:"f",value:this.items},textureHeight:{type:"f",value:this.height}})}shaderAbsolute(m){null==m&&(m=this.shaders.shader());m.pipe("map.xyzw.texture",this.uniforms);return super.shaderAbsolute(m,1,2)}}p.Memo=q};
shadow$provide[342]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.SurfaceGeometry=void 0;var u=y(7);D=y(327);class q extends D.ClipGeometry{constructor(m,c){null==c&&(c=!0);super();c&&this.construct(m)}construct(m){var c,f;let e,g,k;this._clipUniforms();this.closedX=c=m.closedX||!1;this.closedY=f=m.closedY||!1;this.width=c=(+m.width||2)+(c?1:0);this.height=f=(+m.height||2)+(f?1:0);this.surfaces=k=+m.surfaces||1;this.layers=m=+m.layers||1;this.segmentsX=e=Math.max(0,c-1);this.segmentsY=
g=Math.max(0,f-1);var l=c*f*k*m;this.setIndex(new u.BufferAttribute(new Uint32Array(e*g*k*m*6),1));this.setAttribute("position4",new u.BufferAttribute(new Float32Array(4*l),4));this.setAttribute("surface",new u.BufferAttribute(new Float32Array(2*l),2));l=this._emitter("index");const r=this._emitter("position4");let v=0;for(let w=0,z=k*m,A=0<=z;A?w<z:w>z;A?w++:w--){for(let H=0,F=g,L=0<=F;L?H<F:H>F;L?H++:H--){for(let N=0,R=e,J=0<=R;J?N<R:N>R;J?N++:N--)l(v),l(v+1),l(v+c),l(v+c),l(v+1),l(v+c+1),v++;v++}v+=
c}for(let w=0,z=m,A=0<=z;A?w<z:w>z;A?w++:w--)for(let H=0,F=k,L=0<=F;L?H<F:H>F;L?H++:H--)for(let N=0,R=N,J=f,Y=0<=J;Y?N<J:N>J;Y?N++:N--,R=N)for(let fa=0,Z=fa,da=c,la=0<=da;la?fa<da:fa>da;la?fa++:fa--,Z=fa)r(Z,R,H,w);this._finalize();this.clip()}clip(m,c,f,e){null==m&&(m=this.width-this.closedX);null==c&&(c=this.height-this.closedY);null==f&&({surfaces:f}=this);null==e&&({layers:e}=this);m+=this.closedX;c+=this.closedY;const g=Math.max(0,m-1),k=Math.max(0,c-1);this._clipGeometry(m,c,f,e);return this._clipOffsets(6,
g,k,f,e,this.segmentsX,this.segmentsY,this.surfaces,this.layers)}map(m,c,f,e){null==m&&({width:m}=this);null==c&&({height:c}=this);null==f&&({surfaces:f}=this);null==e&&({layers:e}=this);return this._clipMap(m,c,f,e)}}p.SurfaceGeometry=q};
shadow$provide[343]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.ScreenGeometry=void 0;D=y(342);var u=y(7);class q extends D.SurfaceGeometry{constructor(m){m.width=Math.max(2,+m.width);m.height=Math.max(2,+m.height);super(m,!1);null==this.uniforms&&(this.uniforms={});this.uniforms.geometryScale={type:"v4",value:new u.Vector4};this.cover();this.construct(m)}cover(m,c,f,e){null==m&&(m=1);this.scaleX=m;null==c&&(c=1);this.scaleY=c;null==f&&(f=1);this.scaleZ=f;null==e&&(e=1);this.scaleW=
e}clip(m,c,f,e){null==m&&({width:m}=this);null==c&&({height:c}=this);null==f&&({surfaces:f}=this);null==e&&({layers:e}=this);super.clip(m,c,f,e);return this.uniforms.geometryScale.value.set(1/Math.max(1,m-1)*this.scaleX,1/Math.max(1,c-1)*this.scaleY,1/Math.max(1,f-1)*this.scaleZ,1/Math.max(1,e-1)*this.scaleW)}}p.ScreenGeometry=q};
shadow$provide[344]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Screen=void 0;var u=y(7);D=y(329);var q=y(343);class m extends D.Base{constructor(c,f,e){super(c,f,e);let {uniforms:g}=e;const {map:k,combine:l,stpq:r,linear:v}=e;null==g&&(g={});c=null!=g.styleColor;this.geometry=new q.ScreenGeometry({width:e.width,height:e.height});this._adopt(g);this._adopt(this.geometry.uniforms);f=f.material();e=f.vertex;e.pipe("raw.position.scale",this.uniforms);e.fan();e.pipe("stpq.xyzw.2d",
this.uniforms);e.next();e.pipe("screen.position",this.uniforms);e.join();f.fragment=c=this._fragmentColor(c,!1,null,null,k,2,r,l,v);c.pipe("fragment.color",this.uniforms);c=f.link({side:u.DoubleSide});this.material=this._material(c);f=new u.Mesh(this.geometry,this.material);f.frustumCulled=!1;f.userData=c;this._raw(f);this.renders=[f]}dispose(){this.geometry.dispose();this.material.dispose();this.renders=this.geometry=this.material=null;return super.dispose()}}p.Screen=m};
shadow$provide[345]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.MemoScreen=void 0;var u=y(7);D=y(344);class q extends D.Screen{constructor(m,c,f){const {items:e,width:g,height:k,depth:l,stpq:r}=f,v={remapUVScale:{type:"v2",value:new u.Vector2(e*g,k*l)},remapModulus:{type:"v2",value:new u.Vector2(e,k)},remapModulusInv:{type:"v2",value:new u.Vector2(1/Math.max(1,e),1/Math.max(1,k))},remapSTPQScale:{type:"v4",value:new u.Vector4(1/Math.max(1,g-1),1/Math.max(1,k-1),1/Math.max(1,
l-1),1/Math.max(1,e-1))}},w=c.shader();w.pipe("screen.map.xyzw",v);null!=f.map&&(r&&w.pipe("screen.map.stpq",v),w.pipe(f.map));super(m,c,{map:w,linear:!0});this.memo=f;this.uniforms=v;for(const z of Array.from(this.renders))z.transparent=!1}cover(m,c,f,e){null==m&&({width:m}=this.memo);null==c&&({height:c}=this.memo);null==f&&({depth:f}=this.memo);null==e&&({items:e}=this.memo);this.uniforms.remapSTPQScale.value.set(1/Math.max(1,m-1),1/Math.max(1,c-1),1/Math.max(1,f-1),1/Math.max(1,e-1));m/=this.memo.width;
f/=this.memo.depth;1===this.memo.depth&&(f=c/this.memo.height);return this.geometry.cover(m,f)}}p.MemoScreen=q};
shadow$provide[346]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.SpriteGeometry=void 0;var u=y(7);D=y(327);class q extends D.ClipGeometry{constructor(m){let c,f,e;super(m);this._clipUniforms();this.items=f=+m.items||2;this.width=e=+m.width||1;this.height=c=+m.height||1;this.depth=m=+m.depth||1;const g=f*e*c*m;var k=4*g;this.setIndex(new u.BufferAttribute(new Uint32Array(6*g),1));this.setAttribute("position4",new u.BufferAttribute(new Float32Array(4*k),4));this.setAttribute("sprite",
new u.BufferAttribute(new Float32Array(2*k),2));k=this._emitter("index");const l=this._emitter("position4"),r=this._emitter("sprite"),v=[[-1,-1],[-1,1],[1,-1],[1,1]];let w=0;for(let z=0,A=g,H=0<=A;H?z<A:z>A;H?z++:z--)k(w),k(w+1),k(w+2),k(w+1),k(w+2),k(w+3),w+=4;for(let z=0,A=m,H=0<=A;H?z<A:z>A;H?z++:z--)for(let F=0,L=c,N=0<=L;N?F<L:F>L;N?F++:F--)for(let R=0,J=e,Y=0<=J;Y?R<J:R>J;Y?R++:R--)for(let fa=0,Z=f,da=0<=Z;da?fa<Z:fa>Z;da?fa++:fa--)for(const la of Array.from(v))l(R,F,z,fa),r(la[0],la[1]);this._finalize();
this.clip()}clip(m,c,f,e){null==m&&({width:m}=this);null==c&&({height:c}=this);null==f&&({depth:f}=this);null==e&&({items:e}=this);this._clipGeometry(m,c,f,e);return this._clipOffsets(6,m,c,f,e,this.width,this.height,this.depth,this.items)}}p.SpriteGeometry=q};
shadow$provide[347]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Point=void 0;var u=y(7);D=y(329);var q=y(346);class m extends D.Base{constructor(c,f,e){var g;super(c,f,e);let {uniforms:k,shape:l,fill:r}=e;const {material:v,position:w,color:z,size:A,mask:H,map:F,combine:L,linear:N,optical:R,stpq:J}=e;null==k&&(k={});l=+l;null==r&&(r=!0);var Y=null!=k.styleColor;c="circle square diamond up down left right".split(" ");var fa="circle generic generic generic generic generic generic".split(" ");
var Z=[1.2,1,1.414,1.16,1.16,1.16,1.16];fa=null!=fa[l]?fa[l]:fa[0];c=null!=c[l]?c[l]:c[0];Z=null!=(g=R&&Z[l])?g:1;g=r?fa:`${fa}.hollow`;this.geometry=new q.SpriteGeometry({items:e.items,width:e.width,height:e.height,depth:e.depth});this._adopt(k);this._adopt(this.geometry.uniforms);fa={POINT_SHAPE_SCALE:+(Z+1E-5)};e=f.material();Z=e.vertex;Z.pipe(this._vertexColor(z,H));A?(Z.isolate(),Z.require(A),Z.require("point.size.varying",this.uniforms),Z.end()):Z.require("point.size.uniform",this.uniforms);
Z.require(this._vertexPosition(w,v,F,2,J));Z.pipe("point.position",this.uniforms,fa);Z.pipe("project.position",this.uniforms);e.fragment=this._fragmentColor(Y,v,z,H,F,2,J,L,N);Y=f.material();Y.vertex.pipe(Z);fa=Y.fragment.pipe(e.fragment);fa.require(`point.mask.${c}`,this.uniforms);fa.require(`point.alpha.${g}`,this.uniforms);fa.pipe("point.edge",this.uniforms);f=f.material();f.vertex.pipe(Z);fa=f.fragment.pipe(e.fragment);fa.require(`point.mask.${c}`,this.uniforms);fa.require(`point.alpha.${g}`,
this.uniforms);fa.pipe("point.fill",this.uniforms);f=f.link({side:u.DoubleSide});this.fillMaterial=this._material(f);c=Y.link({side:u.DoubleSide});this.edgeMaterial=this._material(c);this.fillObject=new u.Mesh(this.geometry,this.fillMaterial);this.edgeObject=new u.Mesh(this.geometry,this.edgeMaterial);this._raw(this.fillObject);this.fillObject.userData=f;this._raw(this.edgeObject);this.edgeObject.userData=c;this.renders=[this.fillObject,this.edgeObject]}show(c,f,e,g){this._show(this.edgeObject,!0,
f,e,g);return this._show(this.fillObject,c,f,e,g)}dispose(){this.geometry.dispose();this.edgeMaterial.dispose();this.fillMaterial.dispose();this.renders=this.edgeObject=this.fillObject=this.geometry=this.edgeMaterial=this.fillMaterial=null;return super.dispose()}}p.Point=m};
shadow$provide[348]=function(D,y,Q,p){function u(m,c,f){const e=[],g=m<c;for(c=f?g?c+1:c-1:c;g?m<c:m>c;g?m++:m--)e.push(m);return e}Object.defineProperty(p,"__esModule",{value:!0});p.PushBuffer=void 0;D=y(322);class q extends D.Buffer{constructor(m,c,f){const e=f.width||1,g=f.height||1,k=f.depth||1,l=e*g*k;f.samples||(f.samples=l);super(m,c,f);this.width=e;this.height=g;this.depth=k;null==this.samples&&(this.samples=l);this.build(f)}build(m){this.data=[];this.data.length=this.samples;this.filled=
0;this.pad={x:0,y:0,z:0};return this.streamer=this.generate(this.data)}dispose(){this.data=null;return super.dispose()}getFilled(){return this.filled}setActive(m,c,f){let e;return[this.pad.x,this.pad.y,this.pad.z]=Array.from(e=[this.width-m,this.height-c,this.depth-f]),e}read(){return this.data}copy(m){const c=this.data;return u(0,Math.min(m.length,this.samples),!1).map(f=>c[f]=m[f])}fill(){let m,c,f,e;const {callback:g}=this;"function"===typeof g.reset&&g.reset();const {emit:k,skip:l,count:r,done:v,
reset:w}=this.streamer;w();const z=this.width,A=this.height,H=this.pad.x,F=this.pad.y,L=this.samples-this.pad.z*z*A;let N=m=c=f=0;if(0<H||0<F)for(;!v()&&f<L&&(f++,e=g(k,N,m,c),++N===z-H&&(l(H),N=0,++m===A-F&&(l(z*F),m=0,c++)),!1!==e););else for(;!v()&&f<L&&(f++,e=g(k,N,m,c),++N===z&&(N=0,++m===A&&(m=0,c++)),!1!==e););this.filled=1;return r()}}p.PushBuffer=q};
shadow$provide[349]=function(D,y,Q,p){function u(l){if("function"!==typeof WeakMap)return null;var r=new WeakMap,v=new WeakMap;return(u=function(w){return w?v:r})(l)}function q(l,r){if(!r&&l&&l.__esModule)return l;if(null===l||"object"!==typeof l&&"function"!==typeof l)return{default:l};if((r=u(r))&&r.has(l))return r.get(l);var v={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor,z;for(z in l)if("default"!==z&&Object.prototype.hasOwnProperty.call(l,z)){var A=w?Object.getOwnPropertyDescriptor(l,
z):null;A&&(A.get||A.set)?Object.defineProperty(v,z,A):v[z]=l[z]}v.default=l;r&&r.set(l,v);return v}Object.defineProperty(p,"__esModule",{value:!0});p.Readback=void 0;var m=q(y(104)),c=q(y(105)),f=y(7),e=y(341),g=y(345);D=y(319);class k extends D.Renderable{constructor(l,r,v){super(l,r);null==this.items&&(this.items=v.items||1);null==this.channels&&(this.channels=v.channels||4);null==this.width&&(this.width=v.width||1);null==this.height&&(this.height=v.height||1);null==this.depth&&(this.depth=v.depth||
1);null==this.type&&(this.type=v.type||f.FloatType);null==this.stpq&&(this.stpq=v.stpq||!1);this.isFloat=this.type===f.FloatType;this.active=this.sampled=this.rect=this.pad=null;this.build(v)}build(l){let r;({map:L}=l);({indexer:N}=l);l=null!=N&&!N.empty();let {stpq:v}=this;const {items:w,width:z,height:A,depth:H}=this;let F=L;l&&(this._adopt({indexModulus:{type:"v4",value:new f.Vector4(w,w*z,w*z*A,1)}}),F=this.shaders.shader(),F.require(L),F.require(N),F.pipe("float.index.pack",this.uniforms));this.isFloat&&
1<this.channels&&(this.floatMemo=new e.Memo(this.renderer,this.shaders,{items:w,channels:4,width:z,height:A,depth:H,history:0,type:f.FloatType}),this.floatCompose=new g.MemoScreen(this.renderer,this.shaders,{map:F,items:w,width:z,height:A,depth:H,stpq:v}),this.floatMemo.adopt(this.floatCompose),v=!1,F=this.shaders.shader(),this.floatMemo.shaderAbsolute(F));if(this.isFloat){r=this.channels;var L=4}else r=1,L=this.channels;if(1<r){var N=this.shaders.shader();N.pipe(c.mapByte2FloatOffset(r));N.require(F);
N.pipe("float.stretch");N.pipe("float.encode");F=N}else this.isFloat&&(N=this.shaders.shader(),N.pipe(F),N.pipe(c.truncateVec(4,1)),N.pipe("float.encode"),F=N);this.byteMemo=new e.Memo(this.renderer,this.shaders,{items:w*r,channels:L,width:z,height:A,depth:H,history:0,type:f.UnsignedByteType});this.byteCompose=new g.MemoScreen(this.renderer,this.shaders,{map:F,items:w*r,width:z,height:A,depth:H,stpq:v});this.byteMemo.adopt(this.byteCompose);this.samples=this.width*this.height*this.depth;this.bytes=
new Uint8Array(w*z*r*A*H*4);this.isFloat&&(this.floats=new Float32Array(this.bytes.buffer));this.data=this.isFloat?this.floats:this.bytes;this.streamer=this.generate(this.data);this.active={items:0,width:0,height:0,depth:0};this.sampled={items:0,width:0,height:0,depth:0};this.rect={w:0,h:0};this.pad={x:0,y:0,z:0,w:0};this.stretch=r;this.isIndexed=l;return this.setActive(w,z,A,H)}generate(l){return m.getStreamer(l,this.samples,4,this.items)}setActive(l,r,v,w){let z;if(l!==this.active.items||r!==this.active.width||
v!==this.active.height||w!==this.active.depth){[this.active.items,this.active.width,this.active.height,this.active.depth]=Array.from([l,r,v,w]);null!=this.floatCompose&&this.floatCompose.cover(r,v,w);null!=this.byteCompose&&this.byteCompose.cover(r*this.stretch,v,w);({items:l}=this);({width:r}=this.active);v=1===this.depth?this.active.height:this.height;({depth:w}=this.active);var A=l*r*this.stretch,H=v*w;[this.sampled.items,this.sampled.width,this.sampled.height,this.sampled.depth]=Array.from([l,
r,v,w]);[this.rect.w,this.rect.h]=Array.from([A,H]);return[this.pad.x,this.pad.y,this.pad.z,this.pad.w]=Array.from(z=[this.sampled.width-this.active.width,this.sampled.height-this.active.height,this.sampled.depth-this.active.depth,this.sampled.items-this.active.items]),z}}update(l){null!=this.floatMemo&&this.floatMemo.render(l);return null!=this.byteMemo?this.byteMemo.render(l):void 0}post(){const l=this.renderer.getRenderTarget();this.renderer.setRenderTarget(this.byteMemo.target.targets[0]);this.gl.readPixels(0,
0,this.rect.w,this.rect.h,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.bytes);this.renderer.setRenderTarget(l)}readFloat(l){return null!=this.floatMemo?this.floatMemo.read(l):void 0}readByte(l){return null!=this.byteMemo?this.byteMemo.read(l):void 0}setCallback(l){this.emitter=this.callback(l)}callback(l){if(!this.isIndexed)return l;const r=this.width,v=this.height,w=this.items,z=function(A,H,F,L){let N=L;const R=N%w;N=(N-R)/w;const J=N%r;N=(N-J)/r;const Y=N%v;N=(N-Y)/v;return l(A,H,F,L,J,Y,N,R)};z.reset=
()=>"function"===typeof l.reset?l.reset():void 0;return z}iterate(){let l,r,v,w=this.emitter;"function"===typeof w.reset&&w.reset();const {consume:z,skip:A,count:H,done:F,reset:L}=this.streamer;L();const N=this.sampled.width|0;let R=this.sampled.height|0;const J=this.sampled.items|0,Y=this.pad.x|0,fa=this.pad.y|0,Z=this.pad.w|0,da=N*R*J*((this.sampled.depth|0)-(this.pad.z|0));if(!this.isIndexed){const W=w;w=(ra,za,O,pa)=>W(ra,za,O,pa,la,l,r,v)}let la=l=r=v=R=0;for(;!F()&&R<da;){R++;const W=z(w);++v===
J-Z&&(A(Y),v=0,++la===N-Y&&(A(J*Y),la=0,++l===R-fa&&(A(J*N*fa),l=0,r++)));if(!1===W)break}return Math.floor(H()/J)}dispose(){null!=this.floatMemo&&this.floatMemo.unadopt(this.floatCompose);null!=this.floatMemo&&this.floatMemo.dispose();null!=this.floatCompose&&this.floatCompose.dispose();null!=this.byteMemo&&this.byteMemo.unadopt(this.byteCompose);null!=this.byteMemo&&this.byteMemo.dispose();null!=this.byteCompose&&this.byteCompose.dispose();return this.floatMemo=this.byteMemo=this.floatCompose=this.byteCompose=
null}}p.Readback=k};
shadow$provide[350]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Sprite=void 0;var u=y(7);D=y(329);var q=y(346);class m extends D.Base{constructor(c,f,e){var g;super(c,f,e);({uniforms:g}=e);const {material:k,position:l,sprite:r,map:v,combine:w,linear:z,color:A,mask:H,stpq:F}=e;null==g&&(g={});c=null!=g.styleColor;this.geometry=new q.SpriteGeometry({items:e.items,width:e.width,height:e.height,depth:e.depth});this._adopt(g);this._adopt(this.geometry.uniforms);g=f.material();
e=g.vertex;e.pipe(this._vertexColor(A,H));e.require(this._vertexPosition(l,k,v,2,F));e.require(r);e.pipe("sprite.position",this.uniforms);e.pipe("project.position",this.uniforms);g.fragment=g=this._fragmentColor(c,k,A,H,v,2,F,w,z);c=f.material();c.vertex.pipe(e);c.fragment.pipe(g);c.fragment.pipe("fragment.transparent",this.uniforms);f=f.material();f.vertex.pipe(e);f.fragment.pipe(g);f.fragment.pipe("fragment.solid",this.uniforms);f=f.link({side:u.DoubleSide});this.fillMaterial=this._material(f);
e=c.link({side:u.DoubleSide});this.edgeMaterial=this._material(e);this.fillObject=new u.Mesh(this.geometry,this.fillMaterial);this.edgeObject=new u.Mesh(this.geometry,this.edgeMaterial);this._raw(this.fillObject);this.fillObject.userData=f;this._raw(this.edgeObject);this.edgeObject.userData=e;this.renders=[this.fillObject,this.edgeObject]}show(c,f,e,g){this._show(this.edgeObject,!0,f,e,g);return this._show(this.fillObject,c,f,e,g)}dispose(){this.geometry.dispose();this.edgeMaterial.dispose();this.fillMaterial.dispose();
this.renders=this.geometry=this.edgeMaterial=this.fillMaterial=this.edgeObject=this.fillObject=null;return super.dispose()}}p.Sprite=m};
shadow$provide[351]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.StripGeometry=void 0;var u=y(7);D=y(327);class q extends D.ClipGeometry{constructor(m){let c;var f;let e,g;super(m);this._clipUniforms();this.items=f=+m.items||2;this.width=g=+m.width||1;this.height=c=+m.height||1;this.depth=m=+m.depth||1;this.sides=e=Math.max(0,f-2);var k=g*c*m,l=f*k;this.setIndex(new u.BufferAttribute(new Uint32Array(e*k*3),1));this.setAttribute("position4",new u.BufferAttribute(new Float32Array(4*
l),4));this.setAttribute("strip",new u.BufferAttribute(new Float32Array(3*l),3));const r=this._emitter("index");l=this._emitter("position4");const v=this._emitter("strip");let w=0;for(let z=0,A=k,H=0<=A;H?z<A:z>A;H?z++:z--){k=w;for(let F=0,L=e,N=0<=L;N?F<L:F>L;N?F++:F--)F&1?(r(k+1),r(k)):(r(k),r(k+1)),r(k+2),k++;w+=f}--f;for(let z=0,A=m,H=0<=A;H?z<A:z>A;H?z++:z--)for(let F=0,L=c,N=0<=L;N?F<L:F>L;N?F++:F--)for(let R=0,J=g,Y=0<=J;Y?R<J:R>J;Y?R++:R--){m=1;l(R,F,z,0);v(1,2,m);for(let fa=1,Z=f,da=1<=Z;da?
fa<Z:fa>Z;da?fa++:fa--)l(R,F,z,fa),v(fa-1,fa+1,m=-m);l(R,F,z,f);v(f-2,f-1,-m)}this._finalize();this.clip()}clip(m,c,f,e){null==m&&({width:m}=this);null==c&&({height:c}=this);null==f&&({depth:f}=this);null==e&&({items:e}=this);const g=Math.max(0,e-2);this._clipGeometry(m,c,f,e);return this._clipOffsets(3,m,c,f,g,this.width,this.height,this.depth,this.sides)}}p.StripGeometry=q};
shadow$provide[352]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Strip=void 0;var u=y(7);D=y(329);var q=y(351);class m extends D.Base{constructor(c,f,e){super(c,f,e);let {uniforms:g,material:k}=e;const {position:l,color:r,mask:v,map:w,combine:z,linear:A,stpq:H}=e;null==g&&(g={});null==k&&(k=!0);c=null!=g.styleColor;this.geometry=new q.StripGeometry({items:e.items,width:e.width,height:e.height,depth:e.depth});this._adopt(g);this._adopt(this.geometry.uniforms);f=f.material();
e=f.vertex;e.pipe(this._vertexColor(r,v));e.require(this._vertexPosition(l,k,w,2,H));k||e.pipe("mesh.position",this.uniforms);k&&e.pipe("strip.position.normal",this.uniforms);e.pipe("project.position",this.uniforms);f.fragment=c=this._fragmentColor(c,k,r,v,w,2,H,z,A);c.pipe("fragment.color",this.uniforms);c=f.link({side:u.DoubleSide});this.material=this._material(c);f=new u.Mesh(this.geometry,this.material);f.userData=c;this._raw(f);this.renders=[f]}dispose(){this.geometry.dispose();this.material.dispose();
this.renders=this.geometry=this.material=null;return super.dispose()}}p.Strip=m};
shadow$provide[353]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Surface=void 0;var u=y(7);D=y(329);var q=y(342);class m extends D.Base{constructor(c,f,e){super(c,f,e);let {uniforms:g,material:k}=e;const {position:l,color:r,normal:v,mask:w,map:z,combine:A,linear:H,stpq:F,intUV:L}=e;null==g&&(g={});null==k&&(k=!0);c=null!=g.styleColor;this.geometry=new q.SurfaceGeometry({width:e.width,height:e.height,surfaces:e.surfaces,layers:e.layers,closedX:e.closedX,closedY:e.closedY});
this._adopt(g);this._adopt(this.geometry.uniforms);var N={};e.closedX&&(N.SURFACE_CLOSED_X="");e.closedY&&(N.SURFACE_CLOSED_Y="");L&&(N.POSITION_UV_INT="");f=f.material();e=f.vertex;e.pipe(this._vertexColor(r,w));e.require(this._vertexPosition(l,k,z,2,F));v?(e.require(v),e.pipe("surface.position.normal",this.uniforms,N)):(k||e.pipe("surface.position",this.uniforms,N),k&&e.pipe("surface.position.shaded",this.uniforms,N));e.pipe("project.position",this.uniforms);f.fragment=c=this._fragmentColor(c,k,
r,w,z,2,F,A,H);c.pipe("fragment.color",this.uniforms);c=f.link({side:u.DoubleSide});this.material=this._material(c);N=new u.Mesh(this.geometry,this.material);N.userData=c;this._raw(N);this.renders=[N]}dispose(){this.geometry.dispose();this.material.dispose();this.renders=this.geometry=this.material=null;return super.dispose()}}p.Surface=m};
shadow$provide[354]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.TextAtlas=void 0;D=y(332);var u=y(7);class q extends D.Atlas{constructor(m,c,f){let e;f.width||(f.width=256);f.height||(f.height=256);f.type=u.UnsignedByteType;f.channels=1;f.backed=!0;super(m,c,f,!1);this.font=null!=f.font?f.font:["sans-serif"];this.size=f.size||24;this.style=null!=f.style?f.style:"normal";this.variant=null!=f.variant?f.variant:"normal";this.weight=null!=f.weight?f.weight:"normal";this.outline=
null!=(e=+(null!=f.outline?f.outline:5))?e:0;this.gamma=1;"undefined"!==typeof navigator&&(m=navigator.userAgent,m.match(/Chrome/)&&m.match(/OS X/)&&(this.gamma=.5));this.scratchW=this.scratchH=0;this.build(f)}build(m){super.build(m);m=16;m=this.size;m+=4+2*Math.min(1,this.outline);const c=32*m,f=document.createElement("canvas");f.width=c;f.height=m;var e=this.font.map(l=>`${l.replace(/(['"\\])/g,"\\$1")}`).join(", ");const g=f.getContext("2d",{willReadFrequently:!0});g.font=`${this.style} ${this.variant} ${this.weight} ${this.size}px ${e}`;
g.fillStyle="#FF0000";g.textAlign="left";g.textBaseline="bottom";g.lineJoin="round";e=[];var k=3*this.outline;for(let l=0,r=k,v=0<=r;v?l<r:l>r;v?l++:l--)k=("00"+Math.max(0,8*-l+128-8*!l).toString(16)).slice(-2),e.push("#"+k+k+k);k=new Uint8Array(c*m*2);this.canvas=f;this.context=g;this.lineHeight=m;this.maxWidth=c;this.colors=e;this.scratch=k;this._allocate=this.allocate.bind(this);return this._write=this.write.bind(this)}reset(){super.reset();return this.mapped={}}begin(){return Array.from(this.rows).map(m=>
m.alive=0)}end(){const {mapped:m}=this;for(const c of Array.from(this.rows.slice()))if(0===c.alive){for(const f of Array.from(c.keys))delete m[f];this.collapse(c)}}map(m,c){const {mapped:f}=this;var e=f[m];if(null!=e)return e.row.alive++,c(e.x,e.y,e.w,e.h);this.draw(m);const g=this.scratch,k=this.scratchW,l=this.scratchH;e=this._allocate;const r=this._write;return e(m,k,l,function(v,w,z){f[m]={x:w,y:z,w:k,h:l,row:v};r(g,w,z,k,l);return c(w,z,k,l)})}draw(m){const c=this.lineHeight;var f=this.outline;
var e=this.context;const g=this.scratch;var k=this.maxWidth;var {colors:l}=this,r=f+1,v=Math.round(1.05*c-1);var w=e.measureText(m);k=Math.min(k,Math.ceil(w.width+2*r+1));e.clearRect(0,0,k,c);if(0===this.outline)for(e.fillText(m,r,v),{data:m}=e.getImageData(0,0,k,c),w=3,f=0,l=m.length/4,e=0<=l;e?f<l:f>l;e?f++:f--)g[f]=m[w],w+=4;else{var z;e.globalCompositeOperation="source-over";f=w=f+1;for(z=1>=w;z?1>=f:1<=f;z?f++:f--)w=1<f?2*f-2:f,e.strokeStyle=l[w-1],e.lineWidth=w,e.strokeText(m,r,v);e.globalCompositeOperation=
"multiply";e.fillText(m,r,v);({data:m}=e.getImageData(0,0,k,c));w=0;({gamma:r}=this);f=0;l=m.length/4;for(e=0<=l;e?f<l:f>l;e?f++:f--){z=(v=m[w])?m[w+1]/v:1;.5===r&&(z=Math.sqrt(z));z=Math.min(1,Math.max(0,z));const A=256-v;g[f]=Math.max(0,Math.min(255,A+(v-A)*z+2));w+=4}}this.scratchW=k;return this.scratchH=c}}p.TextAtlas=q};
shadow$provide[355]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.VoxelBuffer=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(104));D=y(324);class m extends D.DataBuffer{build(c){super.build();this.pad={x:0,y:0,z:0};return this.streamer=this.generate(this.data)}setActive(c,f,e){let g;return[this.pad.x,this.pad.y,this.pad.z]=Array.from(g=[Math.max(0,this.width-c),Math.max(0,this.height-f),Math.max(0,this.depth-e)]),g}fill(){let c,f,e,g;const {callback:k}=this;"function"===typeof k.reset&&
k.reset();const {emit:l,skip:r,count:v,done:w,reset:z}=this.streamer;z();const A=this.width,H=this.height,F=this.pad.x,L=this.pad.y,N=this.samples-this.pad.z*A*H;let R=c=f=e=0;if(0<F||0<L)for(;!w()&&e<N&&(e++,g=k(l,R,c,f),++R===A-F&&(r(F),e+=F,R=0,++c===H-L&&(r(A*L),e+=A*L,c=0,f++)),!1!==g););else for(;!w()&&e<N&&(e++,g=k(l,R,c,f),++R===A&&(R=0,++c===H&&(c=0,f++)),!1!==g););return Math.floor(v()/this.items)}through(c,f){let e,g,k,l;const {consume:r,done:v,skip:w}=l=this.streamer,{emit:z}=e=f.streamer;
let A=g=k=0,H=()=>r((F,L,N,R)=>c(z,F,L,N,R,A,g,k));H=q.repeatCall(H,this.items);return()=>{let F;l.reset();e.reset();const L=this.width,N=this.height,R=this.pad.x,J=this.pad.y,Y=this.samples-this.pad.z*L*N;A=g=k=F=0;if(0<R||0<J)for(;!v()&&F<Y;)F++,H(),++A===L-R&&(w(R),A=0,++g===N-J&&(w(L*J),g=0,k++));else for(;!v()&&F<Y;)F++,H(),++A===L&&(A=0,++g===N&&(g=0,k++));return l.count()}}}p.VoxelBuffer=m};
shadow$provide[356]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Classes=void 0;D=y(325);Q=y(330);var u=y(332),q=y(324),m=y(333),c=y(335),f=y(337),e=y(338),g=y(341),k=y(345),l=y(347),r=y(348),v=y(349),w=y(340),z=y(320),A=y(344),H=y(350),F=y(352),L=y(353),N=y(354);y=y(355);p.Classes={sprite:H.Sprite,point:l.Point,line:f.Line,surface:L.Surface,face:c.Face,strip:F.Strip,arrow:Q.Arrow,screen:A.Screen,memoScreen:k.MemoScreen,debug:m.Debug,dataBuffer:q.DataBuffer,arrayBuffer:D.ArrayBuffer_,
matrixBuffer:e.MatrixBuffer,voxelBuffer:y.VoxelBuffer,pushBuffer:r.PushBuffer,renderToTexture:w.RenderToTexture,memo:g.Memo,readback:v.Readback,atlas:u.Atlas,textAtlas:N.TextAtlas,scene:z.Scene}};
shadow$provide[357]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});var u={Factory:!0};Object.defineProperty(p,"Factory",{enumerable:!0,get:function(){return m.RenderFactory}});var q=y(320);Object.keys(q).forEach(function(f){"default"!==f&&"__esModule"!==f&&(Object.prototype.hasOwnProperty.call(u,f)||f in p&&p[f]===q[f]||Object.defineProperty(p,f,{enumerable:!0,get:function(){return q[f]}}))});var m=y(321),c=y(356);Object.keys(c).forEach(function(f){"default"!==f&&"__esModule"!==
f&&(Object.prototype.hasOwnProperty.call(u,f)||f in p&&p[f]===c[f]||Object.defineProperty(p,f,{enumerable:!0,get:function(){return c[f]}}))})};
shadow$provide[358]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform float worldUnit;\nuniform float lineDepth;\nuniform float lineWidth;\nuniform float focusDepth;\n\nuniform vec4 geometryClip;\nuniform float arrowSize;\nuniform float arrowSpace;\n\nattribute vec4 position4;\nattribute vec3 arrow;\nattribute vec2 attach;\n\n// External\nvec3 getPosition(vec4 xyzw, float canonical);\n\nvoid getArrowGeometry(vec4 xyzw, float near, float mid, float far, out vec3 left, out vec3 right, out vec3 middle, out vec3 start) {\n  right  \x3d getPosition(xyzw, 1.0);\n  left   \x3d getPosition(vec4(near, xyzw.yzw), 0.0);\n  middle \x3d getPosition(vec4(mid,  xyzw.yzw), 0.0);\n  start  \x3d getPosition(vec4(far,  xyzw.yzw), 0.0);\n}\n\nmat4 getArrowMatrix(vec3 left, vec3 right, vec3 middle, vec3 start) {\n\n  float depth \x3d focusDepth;\n  if (lineDepth \x3c 1.0) {\n    // Depth blending\n    float z \x3d max(0.00001, -right.z);\n    depth \x3d mix(z, focusDepth, lineDepth);\n  }\n\n  vec3 diff \x3d left - right;\n  float l \x3d length(diff);\n  if (l \x3d\x3d 0.0) {\n    return mat4(1.0, 0.0, 0.0, 0.0,\n                0.0, 1.0, 0.0, 0.0,\n                0.0, 0.0, 1.0, 0.0,\n                0.0, 0.0, 0.0, 1.0);\n  }\n\n  // Construct TBN matrix around shaft\n  vec3 t \x3d normalize(diff);\n  vec3 n \x3d normalize(cross(t, t.yzx + vec3(.1, .2, .3)));\n  vec3 b \x3d cross(n, t);\n\n  // Shrink arrows when vector gets too small\n  // Approach linear scaling with cubic ease the smaller we get\n  float size \x3d arrowSize * lineWidth * worldUnit * depth * 1.25;\n  l \x3d max(length(right - middle), length(middle - start)) * 2.0 * arrowSpace;\n  float mini \x3d clamp(1.0 - l / size * .333, 0.0, 1.0);\n  float scale \x3d 1.0 - mini * mini * mini;\n  float range \x3d size * scale;\n\n  // Size to 2.5:1 ratio\n  float rangeNB \x3d range / 2.5;\n\n  // Anchor at end position\n  return mat4(vec4(n * rangeNB,  0),\n              vec4(b * rangeNB,  0),\n              vec4(t * range, 0),\n              vec4(right,  1.0));\n}\n\nvec3 getArrowPosition() {\n  vec3 left, right, middle, start;\n\n  // Clip arrow position and attachment anchors to data\n  vec4 p \x3d min(geometryClip, position4);\n  vec3 a \x3d vec3(min(geometryClip.x, p.x + attach.x), geometryClip.x / 2.0, min(geometryClip.x, attach.y));\n\n  getArrowGeometry(p, a.x, a.y, a.z, left, right, middle, start);\n  mat4 matrix \x3d getArrowMatrix(left, right, middle, start);\n\n  return (matrix * vec4(arrow.xyz, 1.0)).xyz;\n\n}\n"};
shadow$provide[359]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec4 axisStep;\nuniform vec4 axisPosition;\n\nvec4 getAxisPosition(vec4 xyzw, inout vec4 stpq) {\n  return axisStep * xyzw.x + axisPosition;\n}\n"};
shadow$provide[360]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec4 basisScale;\nuniform vec4 basisOffset;\nuniform vec4 viewScale;\nuniform vec4 viewOffset;\n\nvec4 getCartesian4Position(vec4 position, inout vec4 stpq) {\n  return position * basisScale + basisOffset;\n}\n"};
shadow$provide[361]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform mat4 viewMatrix;\n\nvec4 getCartesianPosition(vec4 position, inout vec4 stpq) {\n  return viewMatrix * vec4(position.xyz, 1.0);\n}\n"};
shadow$provide[362]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec4 clampLimit;\n\nvec4 getClampXYZW(vec4 xyzw) {\n  return clamp(xyzw, vec4(0.0), clampLimit);\n}\n"};
shadow$provide[363]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="vec4 opaqueColor(vec4 color) {\n  return vec4(color.rgb, 1.0);\n}\n"};
shadow$provide[364]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec4 geometryClip;\nattribute vec4 position4;\n\n// External\nvec3 getPosition(vec4 xyzw, float canonical);\n\nvec3 getFacePosition() {\n  vec4 p \x3d min(geometryClip, position4);\n  return getPosition(p, 1.0);\n}\n"};
shadow$provide[365]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="attribute vec4 position4;\n\n// External\nvec3 getPosition(vec4 xyzw, float canonical);\n\nvarying vec3 vNormal;\nvarying vec3 vLight;\nvarying vec3 vPosition;\n\nvoid getFaceGeometry(vec4 xyzw, out vec3 pos, out vec3 normal) {\n  vec3 a, b, c;\n\n  a   \x3d getPosition(vec4(xyzw.xyz, 0.0), 0.0);\n  b   \x3d getPosition(vec4(xyzw.xyz, 1.0), 0.0);\n  c   \x3d getPosition(vec4(xyzw.xyz, 2.0), 0.0);\n\n  pos \x3d getPosition(xyzw, 1.0);\n  normal \x3d normalize(cross(c - a, b - a));\n}\n\nvec3 getFacePositionNormal() {\n  vec3 center, normal;\n\n  getFaceGeometry(position4, center, normal);\n  vNormal   \x3d normal;\n  vLight    \x3d normalize((viewMatrix * vec4(1.0, 2.0, 2.0, 0.0)).xyz);\n  vPosition \x3d -center;\n\n  return center;\n}\n"};
shadow$provide[366]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="/*\nFloat encoding technique by\nCarlos Scheidegger\nhttps://github.com/cscheid/lux/blob/master/src/shade/bits/encode_float.js\n\nConversion to GLSL by:\nhttp://concord-consortium.github.io/lab/experiments/webgl-gpgpu/script.js\n*/\n\nfloat shift_right(float v, float amt) { \n  v \x3d floor(v) + 0.5; \n  return floor(v / exp2(amt)); \n}\n\nfloat shift_left(float v, float amt) { \n  return floor(v * exp2(amt) + 0.5); \n}\n\nfloat mask_last(float v, float bits) { \n  return mod(v, shift_left(1.0, bits)); \n}\n\nfloat extract_bits(float num, float from, float to) { \n  from \x3d floor(from + 0.5); to \x3d floor(to + 0.5); \n  return mask_last(shift_right(num, from), to - from); \n}\n\nvec4 encode_float(float val) { \n  if (val \x3d\x3d 0.0) return vec4(0, 0, 0, 0); \n  float valuesign \x3d val \x3e 0.0 ? 0.0 : 1.0; \n  val \x3d abs(val); \n  float exponent \x3d floor(log2(val)); \n  float biased_exponent \x3d exponent + 127.0; \n  float fraction \x3d ((val / exp2(exponent)) - 1.0) * 8388608.0; \n  float t \x3d biased_exponent / 2.0; \n  float last_bit_of_biased_exponent \x3d fract(t) * 2.0; \n  float remaining_bits_of_biased_exponent \x3d floor(t); \n  float byte4 \x3d extract_bits(fraction, 0.0, 8.0) / 255.0; \n  float byte3 \x3d extract_bits(fraction, 8.0, 16.0) / 255.0; \n  float byte2 \x3d (last_bit_of_biased_exponent * 128.0 + extract_bits(fraction, 16.0, 23.0)) / 255.0; \n  float byte1 \x3d (valuesign * 128.0 + remaining_bits_of_biased_exponent) / 255.0; \n  return vec4(byte4, byte3, byte2, byte1); \n}\n"};
shadow$provide[367]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec4 indexModulus;\n\nvec4 getSample(vec4 xyzw);\nvec4 getIndex(vec4 xyzw);\n\nvec4 floatPackIndex(vec4 xyzw) {\n  vec4 value \x3d getSample(xyzw);\n  vec4 index \x3d getIndex(xyzw);\n\n  vec4 offset \x3d floor(index + .5) * indexModulus;\n  vec2 sum2 \x3d offset.xy + offset.zw;\n  float sum \x3d sum2.x + sum2.y;\n  return vec4(value.xyz, sum);\n}"};
shadow$provide[368]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="vec4 getSample(vec4 xyzw);\n\nfloat floatStretch(vec4 xyzw, float channelIndex) {\n  vec4 sample \x3d getSample(xyzw);\n  vec2 xy \x3d channelIndex \x3e 1.5 ? sample.zw : sample.xy;\n  return mod(channelIndex, 2.0) \x3e .5 ? xy.y : xy.x;\n}"};
shadow$provide[369]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="varying float vClipStrokeWidth;\nvarying float vClipStrokeIndex;\nvarying vec3  vClipStrokeEven;\nvarying vec3  vClipStrokeOdd;\nvarying vec3  vClipStrokePosition;\n\nvoid clipStrokeFragment() {\n  bool odd \x3d mod(vClipStrokeIndex, 2.0) \x3e\x3d 1.0;\n\n  vec3 tangent;\n  if (odd) {\n    tangent \x3d vClipStrokeOdd;\n  }\n  else {\n    tangent \x3d vClipStrokeEven;\n  }\n\n  float travel \x3d dot(vClipStrokePosition, normalize(tangent)) / vClipStrokeWidth;\n  if (mod(travel, 16.0) \x3e 8.0) {\n    discard;\n  }\n}\n"};
shadow$provide[370]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="varying float vClipStrokeWidth;\nvarying float vClipStrokeIndex;\nvarying vec3  vClipStrokeEven;\nvarying vec3  vClipStrokeOdd;\nvarying vec3  vClipStrokePosition;\n\nvoid clipStrokeFragment() {\n  bool odd \x3d mod(vClipStrokeIndex, 2.0) \x3e\x3d 1.0;\n\n  vec3 tangent;\n  if (odd) {\n    tangent \x3d vClipStrokeOdd;\n  }\n  else {\n    tangent \x3d vClipStrokeEven;\n  }\n\n  float travel \x3d dot(vClipStrokePosition, normalize(tangent)) / vClipStrokeWidth;\n  if (mod(travel, 4.0) \x3e 2.0) {\n    discard;\n  }\n}\n"};
shadow$provide[371]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="varying vec2 vClipEnds;\n\nvoid clipEndsFragment() {\n  if (vClipEnds.x \x3c 0.0 || vClipEnds.y \x3c 0.0) discard;\n}\n"};
shadow$provide[372]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="varying float vClipProximity;\n\nvoid clipProximityFragment() {\n  if (vClipProximity \x3e\x3d 0.5) discard;\n}"};
shadow$provide[373]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="void setFragmentColor(vec4 color) {\n  gl_FragColor \x3d color;\n}"};
shadow$provide[374]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="vec4 fragmentRGBA(vec4 rgba, vec4 stpq) {\n  return rgba;\n}"};
shadow$provide[375]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="void setFragmentColor(vec4 color) {\n  if (color.a \x3c 1.0) discard;\n  gl_FragColor \x3d color;\n}"};
shadow$provide[376]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="void setFragmentColor(vec4 color) {\n  if (color.a \x3e\x3d 1.0) discard;\n  gl_FragColor \x3d color;\n}"};
shadow$provide[377]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec4 gridPosition;\nuniform vec4 gridStep;\nuniform vec4 gridAxis;\n\nvec4 sampleData(vec2 xy);\n\nvec4 getGridPosition(vec4 xyzw) {\n  vec4 onAxis  \x3d gridAxis * sampleData(vec2(xyzw.y, 0.0)).x;\n  vec4 offAxis \x3d gridStep * xyzw.x + gridPosition;\n  return onAxis + offAxis;\n}\n"};
shadow$provide[378]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform float growScale;\nuniform vec4  growMask;\nuniform vec4  growAnchor;\n\nvec4 getSample(vec4 xyzw);\n\nvec4 getGrowSample(vec4 xyzw) {\n  vec4 anchor \x3d xyzw * growMask + growAnchor;\n\n  vec4 position \x3d getSample(xyzw);\n  vec4 center \x3d getSample(anchor);\n\n  return mix(center, position, growScale);\n}"};
shadow$provide[379]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform float joinStride;\nuniform float joinStrideInv;\n\nfloat getIndex(vec4 xyzw);\nvec4 getRest(vec4 xyzw);\nvec4 injectIndices(float a, float b);\n\nvec4 getJoinXYZW(vec4 xyzw) {\n\n  float a \x3d getIndex(xyzw);\n  float b \x3d a * joinStrideInv;\n\n  float integer  \x3d floor(b);\n  float fraction \x3d b - integer;\n  \n  return injectIndices(fraction * joinStride, integer) + getRest(xyzw);\n}\n"};
shadow$provide[380]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="varying float vPixelSize;\n\nvec4 getLabelAlphaColor(vec4 color, vec4 sample) {\n  float mask \x3d clamp(sample.r * 1000.0, 0.0, 1.0);\n  float alpha \x3d (sample.r - .5) * vPixelSize + .5;\n  float a \x3d mask * alpha * color.a;\n  if (a \x3c\x3d 0.0) discard;\n  return vec4(color.xyz, a);\n}\n"};
shadow$provide[381]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="vec2 mapUV(vec4 uvwo, vec4 stpq) {\n  return uvwo.xy;\n}\n"};
shadow$provide[382]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform float outlineExpand;\nuniform float outlineStep;\nuniform vec3  outlineColor;\n\nvarying float vPixelSize;\n\nconst float PIXEL_STEP \x3d 255.0 / 16.0;\n\nvec4 getLabelOutlineColor(vec4 color, vec4 sample) {\n  float ps \x3d vPixelSize * PIXEL_STEP;\n  float os \x3d outlineStep;\n\n  float sdf \x3d sample.r - .5 + outlineExpand;\n  vec2  sdfs \x3d vec2(sdf, sdf + os);\n  vec2  alpha \x3d clamp(sdfs * ps + .5, 0.0, 1.0);\n\n  if (alpha.y \x3c\x3d 0.0) {\n    discard;\n  }\n\n  vec3 blend \x3d color.xyz;\n  if (alpha.y \x3e alpha.x) {\n    blend \x3d sqrt(mix(outlineColor * outlineColor, blend * blend, alpha.x));\n  }\n  \n  return vec4(blend, alpha.y * color.a);\n}\n"};
shadow$provide[383]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec4 layerScale;\nuniform vec4 layerBias;\n\n#define PROJECT_ORTHOGONAL\n\nvec4 layerPosition(vec4 position, inout vec4 stpq) {\n  return layerScale * position + layerBias;\n}\n"};
shadow$provide[384]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="// External\nvec4 sampleData(vec4 xyzw);\n\nvec4 lerpDepth(vec4 xyzw) {\n  float x \x3d xyzw.z;\n  float i \x3d floor(x);\n  float f \x3d x - i;\n    \n  vec4 xyzw1 \x3d vec4(xyzw.xy, i, xyzw.w);\n  vec4 xyzw2 \x3d vec4(xyzw.xy, i + 1.0, xyzw.w);\n  \n  vec4 a \x3d sampleData(xyzw1);\n  vec4 b \x3d sampleData(xyzw2);\n\n  return mix(a, b, f);\n}\n"};
shadow$provide[385]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="// External\nvec4 sampleData(vec4 xyzw);\n\nvec4 lerpHeight(vec4 xyzw) {\n  float x \x3d xyzw.y;\n  float i \x3d floor(x);\n  float f \x3d x - i;\n    \n  vec4 xyzw1 \x3d vec4(xyzw.x, i, xyzw.zw);\n  vec4 xyzw2 \x3d vec4(xyzw.x, i + 1.0, xyzw.zw);\n  \n  vec4 a \x3d sampleData(xyzw1);\n  vec4 b \x3d sampleData(xyzw2);\n\n  return mix(a, b, f);\n}\n"};
shadow$provide[386]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="// External\nvec4 sampleData(vec4 xyzw);\n\nvec4 lerpItems(vec4 xyzw) {\n  float x \x3d xyzw.w;\n  float i \x3d floor(x);\n  float f \x3d x - i;\n    \n  vec4 xyzw1 \x3d vec4(xyzw.xyz, i);\n  vec4 xyzw2 \x3d vec4(xyzw.xyz, i + 1.0);\n  \n  vec4 a \x3d sampleData(xyzw1);\n  vec4 b \x3d sampleData(xyzw2);\n\n  return mix(a, b, f);\n}\n"};
shadow$provide[387]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="// External\nvec4 sampleData(vec4 xyzw);\n\nvec4 lerpWidth(vec4 xyzw) {\n  float x \x3d xyzw.x;\n  float i \x3d floor(x);\n  float f \x3d x - i;\n    \n  vec4 xyzw1 \x3d vec4(i, xyzw.yzw);\n  vec4 xyzw2 \x3d vec4(i + 1.0, xyzw.yzw);\n  \n  vec4 a \x3d sampleData(xyzw1);\n  vec4 b \x3d sampleData(xyzw2);\n\n  return mix(a, b, f);\n}\n"};
shadow$provide[388]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="// Units and calibration\nuniform float worldUnit;\nuniform float lineWidth;\nuniform float lineDepth;\nuniform float focusDepth;\n\n// General data index\nuniform vec4 geometryClip;\nattribute vec4 position4;\n\n// (Top/bottom -1,1)\nattribute float line;\n\n// 0...1 for round or bevel joins\n#ifdef LINE_JOIN_DETAIL\nattribute float joint;\n#else\nconst float joint \x3d 0.0;\n#endif\n\n// Knock out excessively long line segments (e.g. for asymtpotes)\n#ifdef LINE_PROXIMITY\nuniform float lineProximity;\nvarying float vClipProximity;\n#endif\n\n// Ghetto line stroking (local only, not global)\n#ifdef LINE_STROKE\nvarying float vClipStrokeWidth;\nvarying float vClipStrokeIndex;\nvarying vec3  vClipStrokeEven;\nvarying vec3  vClipStrokeOdd;\nvarying vec3  vClipStrokePosition;\n#endif\n\n// External\nvec3 getPosition(vec4 xyzw, float canonical);\n\n// Clip line ends for arrows / decoration\n#ifdef LINE_CLIP\nuniform float clipRange;\nuniform vec2  clipStyle;\nuniform float clipSpace;\n\nattribute vec2 strip;\n\nvarying vec2 vClipEnds;\n\nvoid clipEnds(vec4 xyzw, vec3 center, vec3 pos) {\n\n  // Sample start of line strip\n  vec4 xyzwS \x3d vec4(0.0, xyzw.yzw);\n  vec3 start \x3d getPosition(xyzwS, 0.0);\n\n  // Sample middle of line strip\n  vec4 xyzwM \x3d vec4(geometryClip.x / 2.0, xyzw.yzw);\n  vec3 middle \x3d getPosition(xyzwM, 0.0);\n\n#ifdef LINE_CLOSED\n  vec3 end \x3d start;\n#else\n  // Sample other end of line strip\n  vec4 xyzwE \x3d vec4(geometryClip.x, xyzw.yzw);\n  vec3 end   \x3d getPosition(xyzwE, 0.0);\n#endif\n\n  // Measure length\n  float l \x3d max(length(end - middle), length(middle - start)) * clipSpace * 2.0;\n\n  // Arrow length (\x3d2.5x radius)\n  float arrowSize \x3d 1.25 * clipRange * lineWidth * worldUnit;\n\n#ifdef LINE_CLOSED\n  // Clip around start/end\n  end \x3d start;\n#endif\n\n  vClipEnds \x3d vec2(1.0);\n\n  if (clipStyle.y \x3e 0.0) {\n    // Depth blend end\n    float depth \x3d focusDepth;\n    if (lineDepth \x3c 1.0) {\n      float z \x3d max(0.00001, -end.z);\n      depth \x3d mix(z, focusDepth, lineDepth);\n    }\n\n    // Absolute arrow length\n    float size \x3d arrowSize * depth;\n\n    // Adjust clip range\n    // Approach linear scaling with cubic ease the smaller we get\n    float mini \x3d clamp(1.0 - l / size * .333, 0.0, 1.0);\n    float scale \x3d 1.0 - mini * mini * mini;\n    float invrange \x3d 1.0 / (size * scale);\n\n    // Clip end\n    vec3 diff \x3d end - center;\n    if(diff \x3d\x3d vec3(0.0))\n      vClipEnds.x \x3d -1.0;\n    else {\n      diff \x3d normalize(end - center);\n      float d \x3d dot(end - pos, diff);\n      vClipEnds.x \x3d d * invrange - 1.0;\n    }\n  }\n\n  if (clipStyle.x \x3e 0.0) {\n    // Depth blend start\n    float depth \x3d focusDepth;\n    if (lineDepth \x3c 1.0) {\n      float z \x3d max(0.00001, -start.z);\n      depth \x3d mix(z, focusDepth, lineDepth);\n    }\n\n    // Absolute arrow length\n    float size \x3d arrowSize * depth;\n\n    // Adjust clip range\n    // Approach linear scaling with cubic ease the smaller we get\n    float mini \x3d clamp(1.0 - l / size * .333, 0.0, 1.0);\n    float scale \x3d 1.0 - mini * mini * mini;\n    float invrange \x3d 1.0 / (size * scale);\n\n    // Clip start\n    vec3 diff \x3d center - start;\n    if(diff \x3d\x3d vec3(0.0))\n      vClipEnds.y \x3d -1.0;\n    else {\n      diff \x3d normalize(center - start);\n      float d \x3d dot(pos - start, diff);\n      vClipEnds.y \x3d d * invrange - 1.0;\n    }\n  }\n}\n#endif\n\n// Adjust left/center/right to be inside near/far z range\nconst float epsilon \x3d 1e-5;\nvoid fixCenter(inout vec3 left, inout vec3 center, inout vec3 right) {\n  if (center.z \x3e\x3d 0.0) {\n    if (left.z \x3c 0.0) {\n      float d \x3d (center.z + epsilon) / (center.z - left.z);\n      center \x3d mix(center, left, d);\n    }\n    else if (right.z \x3c 0.0) {\n      float d \x3d (center.z + epsilon) / (center.z - right.z);\n      center \x3d mix(center, right, d);\n    }\n  }\n\n  if (left.z \x3e\x3d 0.0) {\n    if (center.z \x3c 0.0) {\n      float d \x3d (left.z + epsilon) / (left.z - center.z);\n      left \x3d mix(left, center, d);\n    }\n  }\n\n  if (right.z \x3e\x3d 0.0) {\n    if (center.z \x3c 0.0) {\n      float d \x3d (right.z + epsilon) / (right.z - center.z);\n      right \x3d mix(right, center, d);\n    }\n  }\n}\n\nvec4 wrapAround(vec4 xyzw) {\n#ifdef LINE_CLOSED\n  float gx \x3d geometryClip.x;\n  if (xyzw.x \x3c 0.0) xyzw.x +\x3d gx;\n  if (xyzw.x \x3e\x3d gx) xyzw.x -\x3d gx;\n#endif\n  return xyzw;\n}\n\n// Sample the source data in an edge-aware manner\nvoid getLineGeometry(vec4 xyzw, float edge, out vec3 left, out vec3 center, out vec3 right) {\n  vec4 delta \x3d vec4(1.0, 0.0, 0.0, 0.0);\n\n  center \x3d getPosition(xyzw, 1.0);\n  left   \x3d (edge \x3e -0.5) ? getPosition(wrapAround(xyzw - delta), 0.0) : center;\n  right  \x3d (edge \x3c 0.5)  ? getPosition(wrapAround(xyzw + delta), 0.0) : center;\n}\n\n// Calculate the position for a vertex along the line, including joins\nvec3 getLineJoin(float edge, bool odd, vec3 left, vec3 center, vec3 right, float width, float offset, float joint) {\n  vec2 join \x3d vec2(1.0, 0.0);\n\n  fixCenter(left, center, right);\n\n  vec4 a \x3d vec4(left.xy, right.xy);\n  vec4 b \x3d a / vec4(left.zz, right.zz);\n\n  vec2 l \x3d b.xy;\n  vec2 r \x3d b.zw;\n  vec2 c \x3d center.xy / center.z;\n\n  vec4 d \x3d vec4(l, c) - vec4(c, r);\n  float l1 \x3d dot(d.xy, d.xy);\n  float l2 \x3d dot(d.zw, d.zw);\n\n  if (l1 + l2 \x3e 0.0) {\n\n    if (edge \x3e 0.5 || l2 \x3d\x3d 0.0) {\n      vec2 nl \x3d normalize(d.xy);\n      vec2 tl \x3d vec2(nl.y, -nl.x);\n\n#ifdef LINE_PROXIMITY\n      vClipProximity \x3d 1.0;\n#endif\n\n#ifdef LINE_STROKE\n      vClipStrokeEven \x3d vClipStrokeOdd \x3d normalize(left - center);\n#endif\n      join \x3d tl;\n    }\n    else if (edge \x3c -0.5 || l1 \x3d\x3d 0.0) {\n      vec2 nr \x3d normalize(d.zw);\n      vec2 tr \x3d vec2(nr.y, -nr.x);\n\n#ifdef LINE_PROXIMITY\n      vClipProximity \x3d 1.0;\n#endif\n\n#ifdef LINE_STROKE\n      vClipStrokeEven \x3d vClipStrokeOdd \x3d normalize(center - right);\n#endif\n      join \x3d tr;\n    }\n    else {\n      // Limit join stretch for tiny segments\n      float lmin2 \x3d min(l1, l2) / (width * width);\n\n      // Hide line segment if ratio of leg lengths exceeds promixity threshold\n#ifdef LINE_PROXIMITY\n      float lr     \x3d l1 / l2;\n      float rl     \x3d l2 / l1;\n      float ratio  \x3d max(lr, rl);\n      float thresh \x3d lineProximity + 1.0;\n      vClipProximity \x3d (ratio \x3e thresh * thresh) ? 1.0 : 0.0;\n#endif\n\n      // Calculate normals/tangents\n      vec2 nl \x3d normalize(d.xy);\n      vec2 nr \x3d normalize(d.zw);\n\n      // Calculate tangents\n      vec2 tl \x3d vec2(nl.y, -nl.x);\n      vec2 tr \x3d vec2(nr.y, -nr.x);\n\n#ifdef LINE_PROXIMITY\n      // Mix tangents according to leg lengths\n      vec2 tc \x3d normalize(mix(tl, tr, l1/(l1+l2)));\n#else\n      // Average tangent\n      vec2 tc \x3d normalize(tl + tr);\n#endif\n\n      // Miter join\n      float cosA   \x3d dot(nl, tc);\n      float sinA   \x3d max(0.1, abs(dot(tl, tc)));\n      float factor \x3d cosA / sinA;\n      float scale  \x3d sqrt(1.0 + min(lmin2, factor * factor));\n\n      // Stroke normals\n#ifdef LINE_STROKE\n      vec3 stroke1 \x3d normalize(left - center);\n      vec3 stroke2 \x3d normalize(center - right);\n\n      if (odd) {\n        vClipStrokeEven \x3d stroke1;\n        vClipStrokeOdd  \x3d stroke2;\n      }\n      else {\n        vClipStrokeEven \x3d stroke2;\n        vClipStrokeOdd  \x3d stroke1;\n      }\n#endif\n\n#ifdef LINE_JOIN_MITER\n      // Apply straight up miter\n      join \x3d tc * scale;\n#endif\n\n#ifdef LINE_JOIN_ROUND\n      // Slerp bevel join into circular arc\n      float dotProduct \x3d dot(nl, nr);\n      float angle \x3d acos(dotProduct);\n      float sinT  \x3d sin(angle);\n      join \x3d (sin((1.0 - joint) * angle) * tl + sin(joint * angle) * tr) / sinT;\n#endif\n\n#ifdef LINE_JOIN_BEVEL\n      // Direct bevel join between two flat ends\n      float dotProduct \x3d dot(nl, nr);\n      join \x3d mix(tl, tr, joint);\n#endif\n\n#ifdef LINE_JOIN_DETAIL\n      // Check if on inside or outside of joint\n      float crossProduct \x3d nl.x * nr.y - nl.y * nr.x;\n      if (offset * crossProduct \x3c 0.0) {\n        // For near-180-degree bends, correct back to a miter to avoid discontinuities\n        float ratio \x3d clamp(-dotProduct * 2.0 - 1.0, 0.0, 1.0);\n        // Otherwise collapse the inside vertices into one.\n        join \x3d mix(tc * scale, join, ratio * ratio * ratio);\n      }\n#endif\n\n    }\n    return vec3(join, 0.0);\n  }\n  else {\n    return vec3(0.0);\n  }\n\n}\n\n// Calculate final line position\nvec3 getLinePosition() {\n  vec3 left, center, right, join;\n\n  // Up/down along segment\n  float offset \x3d line;\n\n  // Clip data\n  vec4 p \x3d min(geometryClip, position4);\n\n  // Left/center/right\n  float edge \x3d 0.0;\n#ifdef LINE_CLOSED\n  if (p.x \x3d\x3d geometryClip.x) p.x \x3d 0.0;\n#else\n  if (p.x \x3d\x3d geometryClip.x) edge \x3d 1.0;\n  if (p.x \x3d\x3d 0.0) edge \x3d -1.0;\n#endif\n\n  // Get position + adjacent neighbours\n  getLineGeometry(p, edge, left, center, right);\n\n#ifdef LINE_STROKE\n  // Set parameters for line stroke fragment shader\n  vClipStrokePosition \x3d center;\n  vClipStrokeIndex \x3d p.x;\n  bool odd \x3d mod(p.x, 2.0) \x3e\x3d 1.0;\n#else\n  bool odd \x3d true;\n#endif\n\n  // Divide line width up/down\n  float width \x3d lineWidth * 0.5;\n\n  float depth \x3d focusDepth;\n  if (lineDepth \x3c 1.0) {\n    // Depth blending\n    float z \x3d max(0.00001, -center.z);\n    depth \x3d mix(z, focusDepth, lineDepth);\n  }\n  width *\x3d depth;\n\n  // Convert to world units\n  width *\x3d worldUnit;\n\n  // Calculate line join\n#ifdef LINE_CLOSED\n  join \x3d getLineJoin(0.0, odd, left, center, right, width, offset, joint);\n#else\n  join \x3d getLineJoin(edge, odd, left, center, right, width, offset, joint);\n#endif\n  vec3 pos \x3d center + join * offset * width;\n\n#ifdef LINE_STROKE\n  vClipStrokeWidth \x3d width;\n#endif\n\n#ifdef LINE_CLIP\n  clipEnds(p, center, pos);\n#endif\n\n  return pos;\n}\n"};
shadow$provide[389]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec2 dataResolution;\nuniform vec2 dataPointer;\n\nvec2 map2DData(vec2 xy) {\n  return (xy + dataPointer) * dataResolution;\n}\n"};
shadow$provide[390]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec2 dataResolution;\nuniform vec2 dataPointer;\n\nvec2 map2DData(vec2 xy) {\n  return fract((xy + dataPointer) * dataResolution);\n}\n"};
shadow$provide[391]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="void mapXyzw2DV(vec4 xyzw, out vec2 xy, out float z) {\n  xy \x3d xyzw.xy;\n  z  \x3d xyzw.z;\n}\n\n"};
shadow$provide[392]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="vec4 alignXYZW(vec4 xyzw) {\n  return floor(xyzw + .5);\n}\n\n"};
shadow$provide[393]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform float textureItems;\nuniform float textureHeight;\n\nvec2 mapXyzwTexture(vec4 xyzw) {\n  \n  float x \x3d xyzw.x;\n  float y \x3d xyzw.y;\n  float z \x3d xyzw.z;\n  float i \x3d xyzw.w;\n  \n  return vec2(i, y) + vec2(x, z) * vec2(textureItems, textureHeight);\n}\n\n"};
shadow$provide[394]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="varying vec4 vColor;\n\nvec4 getColor() {\n  if (vColor.a \x3c\x3d 0.0) discard;\n  return vColor;\n}\n"};
shadow$provide[395]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="#ifdef POSITION_STPQ\nvarying vec4 vSTPQ;\n#endif\n#ifdef POSITION_U\nvarying float vU;\n#endif\n#ifdef POSITION_UV\nvarying vec2 vUV;\n#endif\n#ifdef POSITION_UVW\nvarying vec3 vUVW;\n#endif\n#ifdef POSITION_UVWO\nvarying vec4 vUVWO;\n#endif\n\nvec4 getSample(vec4 uvwo, vec4 stpq);\n\nvec4 getMapColor() {\n  #ifdef POSITION_STPQ\n  vec4 stpq \x3d vSTPQ;\n  #else\n  vec4 stpq \x3d vec4(0.0);\n  #endif\n\n  #ifdef POSITION_U\n  vec4 uvwo \x3d vec4(vU, 0.0, 0.0, 0.0);\n  #endif\n  #ifdef POSITION_UV\n  vec4 uvwo \x3d vec4(vUV, 0.0, 0.0);\n  #endif\n  #ifdef POSITION_UVW\n  vec4 uvwo \x3d vec4(vUVW, 0.0);\n  #endif\n  #ifdef POSITION_UVWO\n  vec4 uvwo \x3d vec4(vUVWO);\n  #endif\n\n  return getSample(uvwo, stpq);\n}\n"};
shadow$provide[396]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="varying float vMask;\n\nfloat ease(float t) {\n  t \x3d clamp(t, 0.0, 1.0);\n  return t * t * (3.0 - 2.0 * t);\n}\n\nvec4 maskColor() {\n  if (vMask \x3c\x3d 0.0) discard;\n  return vec4(vec3(1.0), ease(vMask));\n}\n"};
shadow$provide[397]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="#ifdef POSITION_STPQ\nvarying vec4 vSTPQ;\n#endif\n#ifdef POSITION_U\nvarying float vU;\n#endif\n#ifdef POSITION_UV\nvarying vec2 vUV;\n#endif\n#ifdef POSITION_UVW\nvarying vec3 vUVW;\n#endif\n#ifdef POSITION_UVWO\nvarying vec4 vUVWO;\n#endif\n\nvec4 getSample(vec4 rgba, vec4 stpq);\n\nvec4 getMaterialColor(vec4 rgba) {\n  vec4 stpq \x3d vec4(0.0);\n\n  #ifdef POSITION_U\n  stpq.x \x3d vU;\n  #endif\n  #ifdef POSITION_UV\n  stpq.xy \x3d vUV;\n  #endif\n  #ifdef POSITION_UVW\n  stpq.xyz \x3d vUVW;\n  #endif\n  #ifdef POSITION_UVWO\n  stpq \x3d vUVWO;\n  #endif\n\n  #ifdef POSITION_STPQ\n  stpq \x3d vSTPQ;\n  #endif\n\n  return getSample(rgba, stpq);\n}\n"};
shadow$provide[398]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="\n#extension GL_OES_standard_derivatives : enable\nvarying vec3 vNormal;\nvarying vec3 vLight;\nvarying vec3 vPosition;\n\nvec3 offSpecular(vec3 color) {\n  vec3 c \x3d 1.0 - color;\n  return 1.0 - c * c;\n}\n\nvec4 getShadedColor(vec4 rgba) {\n  \n  vec3 color \x3d rgba.xyz;\n  vec3 color2 \x3d offSpecular(rgba.xyz);\n\n  vec3 normal \x3d normalize(vNormal);\n  vec3 light \x3d normalize(vLight);\n  vec3 position \x3d normalize(vPosition);\n  \n  // Workaround to avoid gl_FrontFacing. See https://github.com/unconed/mathbox/pull/26\n  vec3 pdx \x3d dFdx(vPosition);\n  vec3 pdy \x3d dFdy(vPosition);\n  bool frontFacting \x3d dot(vNormal, cross(pdx, pdy)) \x3e 0.0;\n\n  float side \x3d frontFacting ? 1.0 : -1.0;\n  float cosine  \x3d side * dot(normal, light);\n  float diffuse \x3d mix(max(0.0, cosine), .5 + .5 * cosine, .1);\n  \n  vec3  halfLight \x3d normalize(light + position);\n\tfloat cosineHalf \x3d max(0.0, side * dot(normal, halfLight));\n\tfloat specular \x3d pow(cosineHalf, 16.0);\n\t\n\treturn vec4(color * (diffuse * .9 + .05) + .25 * color2 * specular, rgba.a);\n}\n"};
shadow$provide[399]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default=""};
shadow$provide[400]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="vec4 getGammaInColor(vec4 rgba) {\n  return vec4(rgba.rgb * rgba.rgb, rgba.a);\n}\n"};
shadow$provide[401]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="vec4 getGammaOutColor(vec4 rgba) {\n  return vec4(sqrt(rgba.rgb), rgba.a);\n}\n"};
shadow$provide[402]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="vec4 mapUVWO(vec4 uvwo, vec4 stpq) {\n  return uvwo;\n}\n"};
shadow$provide[403]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec4 geometryClip;\nattribute vec4 position4;\n\n// External\nvec3 getPosition(vec4 xyzw, float canonical);\n\nvec3 getMeshPosition() {\n  vec4 p \x3d min(geometryClip, position4);\n  return getPosition(p, 1.0);\n}\n"};
shadow$provide[404]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="attribute vec4 position4;\nuniform vec4 geometryClip;\nvarying vec4 vColor;\n\n// External\nvec4 getSample(vec4 xyzw);\n\nvoid vertexColor() {\n  vec4 p \x3d min(geometryClip, position4);\n  vColor \x3d getSample(p);\n}\n"};
shadow$provide[405]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="attribute vec4 position4;\nuniform vec4 geometryResolution;\nuniform vec4 geometryClip;\nvarying float vMask;\n\n// External\nfloat getSample(vec4 xyzw);\n\nvoid maskLevel() {\n  vec4 p \x3d min(geometryClip, position4);\n  vMask \x3d getSample(p * geometryResolution);\n}\n"};
shadow$provide[406]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec4 geometryResolution;\n\n#ifdef POSITION_STPQ\nvarying vec4 vSTPQ;\n#endif\n#ifdef POSITION_U\nvarying float vU;\n#endif\n#ifdef POSITION_UV\nvarying vec2 vUV;\n#endif\n#ifdef POSITION_UVW\nvarying vec3 vUVW;\n#endif\n#ifdef POSITION_UVWO\nvarying vec4 vUVWO;\n#endif\n\n// External\nvec3 getPosition(vec4 xyzw, in vec4 stpqIn, out vec4 stpqOut);\n\nvec3 getMeshPosition(vec4 xyzw, float canonical) {\n  vec4 stpqOut, stpqIn \x3d xyzw * geometryResolution;\n  vec3 xyz \x3d getPosition(xyzw, stpqIn, stpqOut);\n\n  #ifdef POSITION_MAP\n  if (canonical \x3e 0.5) {\n    #ifdef POSITION_STPQ\n    vSTPQ \x3d stpqOut;\n    #endif\n    #ifdef POSITION_U\n    vU \x3d stpqOut.x;\n    #endif\n    #ifdef POSITION_UV\n    vUV \x3d stpqOut.xy;\n    #endif\n    #ifdef POSITION_UVW\n    vUVW \x3d stpqOut.xyz;\n    #endif\n    #ifdef POSITION_UVWO\n    vUVWO \x3d stpqOut;\n    #endif\n  }\n  #endif\n  return xyz;\n}\n"};
shadow$provide[407]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform float transitionEnter;\nuniform float transitionExit;\nuniform vec4  transitionScale;\nuniform vec4  transitionBias;\nuniform float transitionSkew;\nuniform float transitionActive;\n\nuniform vec4  moveFrom;\nuniform vec4  moveTo;\n\nfloat ease(float t) {\n  t \x3d clamp(t, 0.0, 1.0);\n  return 1.0 - (2.0 - t) * t;\n}\n\nvec4 getTransitionPosition(vec4 xyzw, inout vec4 stpq) {\n  if (transitionActive \x3c 0.5) return xyzw;\n\n  float enter   \x3d transitionEnter;\n  float exit    \x3d transitionExit;\n  float skew    \x3d transitionSkew;\n  vec4  scale   \x3d transitionScale;\n  vec4  bias    \x3d transitionBias;\n\n  float factor  \x3d 1.0 + skew;\n  float offset  \x3d dot(vec4(1.0), stpq * scale + bias);\n\n  float a1 \x3d ease(enter * factor - offset);\n  float a2 \x3d ease(exit  * factor + offset - skew);\n\n  return xyzw + a1 * moveFrom + a2 * moveTo;\n}"};
shadow$provide[408]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="vec4 getMask(vec4 xyzw) {\n  return vec4(1.0);\n}"};
shadow$provide[409]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="varying float vPixelSize;\n\nfloat getDiscAlpha(float mask) {\n  // Approximation: 1 - x*x is approximately linear around x \x3d 1 with slope 2\n  return vPixelSize * (1.0 - mask);\n  //  return vPixelSize * 2.0 * (1.0 - sqrt(mask));\n}\n"};
shadow$provide[410]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="varying float vPixelSize;\n\nfloat getDiscHollowAlpha(float mask) {\n  return vPixelSize * (0.5 - 2.0 * abs(sqrt(mask) - .75));\n}\n"};
shadow$provide[411]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="varying float vPixelSize;\n\nfloat getGenericAlpha(float mask) {\n  return vPixelSize * 2.0 * (1.0 - mask);\n}\n"};
shadow$provide[412]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="varying float vPixelSize;\n\nfloat getGenericHollowAlpha(float mask) {\n  return vPixelSize * (0.5 - 2.0 * abs(mask - .75));\n}\n"};
shadow$provide[413]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="varying vec2 vSprite;\n\nfloat getSpriteMask(vec2 xy);\nfloat getSpriteAlpha(float mask);\n\nvoid setFragmentColorFill(vec4 color) {\n  float mask \x3d getSpriteMask(vSprite);\n  if (mask \x3e 1.0) {\n    discard;\n  }\n  float alpha \x3d getSpriteAlpha(mask);\n  if (alpha \x3e\x3d 1.0) {\n    discard;\n  }\n  gl_FragColor \x3d vec4(color.rgb, alpha * color.a);\n}\n"};
shadow$provide[414]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="varying vec2 vSprite;\n\nfloat getSpriteMask(vec2 xy);\nfloat getSpriteAlpha(float mask);\n\nvoid setFragmentColorFill(vec4 color) {\n  float mask \x3d getSpriteMask(vSprite);\n  if (mask \x3e 1.0) {\n    discard;\n  }\n  float alpha \x3d getSpriteAlpha(mask);\n  if (alpha \x3c 1.0) {\n    discard;\n  }\n  gl_FragColor \x3d color;\n}\n\n"};
shadow$provide[415]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="varying float vPixelSize;\n\nfloat getCircleMask(vec2 uv) {\n  return dot(uv, uv);\n}\n"};
shadow$provide[416]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="varying float vPixelSize;\n\nfloat getDiamondMask(vec2 uv) {\n  vec2 a \x3d abs(uv);\n  return a.x + a.y;\n}\n"};
shadow$provide[417]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="varying float vPixelSize;\n\nfloat getTriangleDownMask(vec2 uv) {\n  uv.y +\x3d .25;\n  return max(uv.y, abs(uv.x) * .866 - uv.y * .5 + .6);\n}\n"};
shadow$provide[418]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="varying float vPixelSize;\n\nfloat getTriangleLeftMask(vec2 uv) {\n  uv.x +\x3d .25;\n  return max(uv.x, abs(uv.y) * .866 - uv.x * .5 + .6);\n}\n"};
shadow$provide[419]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="varying float vPixelSize;\n\nfloat getTriangleRightMask(vec2 uv) {\n  uv.x -\x3d .25;\n  return max(-uv.x, abs(uv.y) * .866 + uv.x * .5 + .6);\n}\n"};
shadow$provide[420]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="varying float vPixelSize;\n\nfloat getSquareMask(vec2 uv) {\n  vec2 a \x3d abs(uv);\n  return max(a.x, a.y);\n}\n"};
shadow$provide[421]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="varying float vPixelSize;\n\nfloat getTriangleUpMask(vec2 uv) {\n  uv.y -\x3d .25;\n  return max(-uv.y, abs(uv.x) * .866 + uv.y * .5 + .6);\n}\n"};
shadow$provide[422]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform float pointDepth;\n\nuniform float pixelUnit;\nuniform float renderScale;\nuniform float renderScaleInv;\nuniform float focusDepth;\n\nuniform vec4 geometryClip;\nattribute vec4 position4;\nattribute vec2 sprite;\n\nvarying vec2 vSprite;\nvarying float vPixelSize;\n\nconst float pointScale \x3d POINT_SHAPE_SCALE;\n\n// External\nfloat getPointSize(vec4 xyzw);\nvec3 getPosition(vec4 xyzw, float canonical);\n\nvec3 getPointPosition() {\n  // Discard out-of-range points by generating degenerate face\n  if (\n    position4.x \x3e geometryClip.x ||\n    position4.y \x3e geometryClip.y ||\n    position4.z \x3e geometryClip.z ||\n    position4.w \x3e geometryClip.w\n  ) return vec3(0.0, 0.0, 0.0);\n  vec4 p \x3d position4;\n\n  vec3 center \x3d getPosition(p, 1.0);\n\n  // Depth blending\n  // TODO: orthographic camera\n  // Workaround: set depth \x3d 0\n  float z \x3d -center.z;\n  float depth \x3d mix(z, focusDepth, pointDepth);\n\n  // Match device/unit mapping\n  // Sprite goes from -1..1, width \x3d 2.\n  float pointSize \x3d getPointSize(p);\n  float size \x3d pointScale * pointSize * pixelUnit * .5;\n  float depthSize \x3d depth * size;\n\n  // Pad sprite by half a pixel to make the anti-aliasing straddle the pixel edge\n  // Note: pixelsize measures radius\n  float pixelSize \x3d .5 * (pointDepth \x3e 0.0 ? depthSize / z : size);\n  float paddedSize \x3d pixelSize + 0.5;\n  float padFactor \x3d paddedSize / pixelSize;\n\n  vPixelSize \x3d paddedSize;\n  vSprite    \x3d sprite;\n\n  return center + vec3(sprite * depthSize * renderScaleInv * padFactor, 0.0);\n}\n"};
shadow$provide[423]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform float pointSize;\n\nfloat getPointSize(vec4 xyzw) {\n  return pointSize;\n}"};
shadow$provide[424]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform float pointSize;\n\nvec4 getSample(vec4 xyzw);\n\nfloat getPointSize(vec4 xyzw) {\n  return pointSize * getSample(xyzw).x;\n}"};
shadow$provide[425]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform float polarBend;\nuniform float polarFocus;\nuniform float polarAspect;\nuniform float polarHelix;\n\nuniform mat4 viewMatrix;\n\nvec4 getPolarPosition(vec4 position, inout vec4 stpq) {\n  if (polarBend \x3e 0.0) {\n\n    if (polarBend \x3c 0.001) {\n      // Factor out large addition/subtraction of polarFocus\n      // to avoid numerical error\n      // sin(x) ~ x\n      // cos(x) ~ 1 - x * x / 2\n      vec2 pb \x3d position.xy * polarBend;\n      float ppbbx \x3d pb.x * pb.x;\n      return viewMatrix * vec4(\n        position.x * (1.0 - polarBend + (pb.y * polarAspect)),\n        position.y * (1.0 - .5 * ppbbx) - (.5 * ppbbx) * polarFocus / polarAspect,\n        position.z + position.x * polarHelix * polarBend,\n        1.0\n      );\n    }\n    else {\n      vec2 xy \x3d position.xy * vec2(polarBend, polarAspect);\n      float radius \x3d polarFocus + xy.y;\n      return viewMatrix * vec4(\n        sin(xy.x) * radius,\n        (cos(xy.x) * radius - polarFocus) / polarAspect,\n        position.z + position.x * polarHelix * polarBend,\n        1.0\n      );\n    }\n  }\n  else {\n    return viewMatrix * vec4(position.xyz, 1.0);\n  }\n}"};
shadow$provide[426]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform float styleZBias;\nuniform float styleZIndex;\n\nvoid setPosition(vec3 position) {\n\n  #ifdef PROJECT_ORTHOGONAL\n  // Orthogonal projection with depth preservation around z \x3d 1\n  vec4 pos \x3d projectionMatrix * vec4(position, 1.0);\n  pos.xy *\x3d -position.z;\n  #else\n  // Normal perspective projection\n  vec4 pos \x3d projectionMatrix * vec4(position, 1.0);\n  #endif\n\n  // Apply relative Z bias\n  float bias  \x3d (1.0 - styleZBias / 32768.0);\n  pos.z *\x3d bias;\n\n  // Apply large scale Z index changes\n  if (styleZIndex \x3e 0.0) {\n    float z \x3d pos.z / pos.w;\n    pos.z \x3d ((z + 1.0) / (styleZIndex + 1.0) - 1.0) * pos.w;\n  }\n\n  gl_Position \x3d pos;\n}"};
shadow$provide[427]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="// This is three.js' global uniform, missing from fragment shaders.\nuniform mat4 projectionMatrix;\n\nvec4 readbackPosition(vec3 position, vec4 stpq) {\n  vec4 pos \x3d projectionMatrix * vec4(position, 1.0);\n  vec3 final \x3d pos.xyz / pos.w;\n  if (final.z \x3c -1.0) {\n    return vec4(0.0, 0.0, 0.0, -1.0);\n  }\n  else {\n    return vec4(final, -position.z);\n  }\n}\n"};
shadow$provide[428]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec4 geometryScale;\nattribute vec4 position4;\n\nvec4 getRawPositionScale() {\n  return geometryScale * position4;\n}\n"};
shadow$provide[429]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec4 repeatModulus;\n\nvec4 getRepeatXYZW(vec4 xyzw) {\n  return mod(xyzw + .5, repeatModulus) - .5;\n}\n"};
shadow$provide[430]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec4 resampleBias;\n\nvec4 resamplePadding(vec4 xyzw) {\n  return xyzw + resampleBias;\n}"};
shadow$provide[431]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec4 resampleFactor;\n\nvec4 resampleRelative(vec4 xyzw) {\n  return xyzw * resampleFactor;\n}"};
shadow$provide[432]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform float transitionEnter;\nuniform float transitionExit;\nuniform vec4  transitionScale;\nuniform vec4  transitionBias;\nuniform float transitionSkew;\nuniform float transitionActive;\n\nfloat getTransitionSDFMask(vec4 stpq) {\n  if (transitionActive \x3c 0.5) return 1.0;\n\n  float enter   \x3d transitionEnter;\n  float exit    \x3d transitionExit;\n  float skew    \x3d transitionSkew;\n  vec4  scale   \x3d transitionScale;\n  vec4  bias    \x3d transitionBias;\n\n  float factor  \x3d 1.0 + skew;\n  float offset  \x3d dot(vec4(1.0), stpq * scale + bias);\n\n  vec2 d \x3d vec2(enter, exit) * factor + vec2(-offset, offset - skew);\n  if (exit  \x3d\x3d 1.0) return d.x;\n  if (enter \x3d\x3d 1.0) return d.y;\n  return min(d.x, d.y);\n}"};
shadow$provide[433]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec4 reverseScale;\nuniform vec4 reverseOffset;\n\nvec4 getReverseOffset(vec4 xyzw) {\n  return xyzw * reverseScale + reverseOffset;\n}"};
shadow$provide[434]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="vec3 getRootPosition(vec4 position, in vec4 stpqIn, out vec4 stpqOut) {\n  stpqOut \x3d stpqIn; // avoid inout confusion\n  return position.xyz;\n}"};
shadow$provide[435]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform sampler2D dataTexture;\n\nvec4 sample2D(vec2 uv) {\n  return texture2D(dataTexture, uv);\n}\n"};
shadow$provide[436]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec4 scaleAxis;\nuniform vec4 scaleOffset;\n\nvec4 sampleData(float x);\n\nvec4 getScalePosition(vec4 xyzw) {\n  return scaleAxis * sampleData(xyzw.x).x + scaleOffset;\n}\n"};
shadow$provide[437]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec4 remapSTPQScale;\n\nvec4 screenMapSTPQ(vec4 xyzw, out vec4 stpq) {\n  stpq \x3d xyzw * remapSTPQScale;\n  return xyzw;\n}\n"};
shadow$provide[438]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec2 remapUVScale;\n\nvec4 screenMapXY(vec4 uvwo, vec4 stpq) {\n  return vec4(floor(remapUVScale * uvwo.xy), 0.0, 0.0);\n}\n"};
shadow$provide[439]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec2 remapUVScale;\nuniform vec2 remapModulus;\nuniform vec2 remapModulusInv;\n\nvec4 screenMapXYZW(vec4 uvwo, vec4 stpq) {\n  vec2 st \x3d floor(remapUVScale * uvwo.xy);\n  vec2 xy \x3d st * remapModulusInv;\n  vec2 ixy \x3d floor(xy);\n  vec2 fxy \x3d xy - ixy;\n  vec2 zw \x3d fxy * remapModulus;\n  return vec4(ixy.x, zw.y, ixy.y, zw.x);\n}\n"};
shadow$provide[440]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="vec2 screenPassUV(vec4 uvwo, vec4 stpq) {\n  return uvwo.xy;\n}\n"};
shadow$provide[441]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="void setScreenPosition(vec4 position) {\n  gl_Position \x3d vec4(position.xy * 2.0 - 1.0, 0.5, 1.0);\n}\n"};
shadow$provide[442]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec4 sliceOffset;\n\nvec4 getSliceOffset(vec4 xyzw) {\n  return xyzw + sliceOffset;\n}\n"};
shadow$provide[443]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform float sphericalBend;\nuniform float sphericalFocus;\nuniform float sphericalAspectX;\nuniform float sphericalAspectY;\nuniform float sphericalScaleY;\n\nuniform mat4 viewMatrix;\n\nvec4 getSphericalPosition(vec4 position, inout vec4 stpq) {\n  if (sphericalBend \x3e 0.0001) {\n\n    vec3 xyz \x3d position.xyz * vec3(sphericalBend, sphericalBend / sphericalAspectY * sphericalScaleY, sphericalAspectX);\n    float radius \x3d sphericalFocus + xyz.z;\n    float cosine \x3d cos(xyz.y) * radius;\n\n    return viewMatrix * vec4(\n      sin(xyz.x) * cosine,\n      sin(xyz.y) * radius * sphericalAspectY,\n      (cos(xyz.x) * cosine - sphericalFocus) / sphericalAspectX,\n      1.0\n    );\n  }\n  else {\n    return viewMatrix * vec4(position.xyz, 1.0);\n  }\n}"};
shadow$provide[444]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform float splitStride;\n\nvec2 getIndices(vec4 xyzw);\nvec4 getRest(vec4 xyzw);\nvec4 injectIndex(float v);\n\nvec4 getSplitXYZW(vec4 xyzw) {\n  vec2 uv \x3d getIndices(xyzw);\n  float offset \x3d uv.x + uv.y * splitStride;\n  return injectIndex(offset) + getRest(xyzw);\n}\n"};
shadow$provide[445]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec4 spreadOffset;\nuniform mat4 spreadMatrix;\n\n// External\nvec4 getSample(vec4 xyzw);\n\nvec4 getSpreadSample(vec4 xyzw) {\n  vec4 sample \x3d getSample(xyzw);\n  return sample + spreadMatrix * (spreadOffset + xyzw);\n}\n"};
shadow$provide[446]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="varying vec2 vSprite;\n\nvec4 getSample(vec2 xy);\n\nvec4 getSpriteColor() {\n  return getSample(vSprite);\n}"};
shadow$provide[447]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec2 spriteOffset;\nuniform float spriteScale;\nuniform float spriteDepth;\nuniform float spriteSnap;\n\nuniform vec2 renderOdd;\nuniform float renderScale;\nuniform float renderScaleInv;\nuniform float pixelUnit;\nuniform float focusDepth;\n\nuniform vec4 geometryClip;\nattribute vec4 position4;\nattribute vec2 sprite;\n\nvarying float vPixelSize;\n\n// External\nvec3 getPosition(vec4 xyzw, float canonical);\nvec4 getSprite(vec4 xyzw);\n\nvec3 getSpritePosition() {\n  // Clip points\n  vec4 p \x3d min(geometryClip, position4);\n  float diff \x3d length(position4 - p);\n  if (diff \x3e 0.0) {\n    return vec3(0.0, 0.0, 1000.0);\n  }\n\n  // Make sprites\n  vec3 center \x3d getPosition(p, 1.0);\n  vec4 atlas \x3d getSprite(p);\n\n  // Sprite goes from -1..1, width \x3d 2.\n  // -1..1 -\x3e -0.5..0.5\n  vec2 halfSprite \x3d sprite * .5;\n  vec2 halfFlipSprite \x3d vec2(halfSprite.x, -halfSprite.y);\n\n#ifdef POSITION_UV\n  // Assign UVs\n  vUV \x3d atlas.xy + atlas.zw * (halfFlipSprite + .5);\n#endif\n\n  // Depth blending\n  // TODO: orthographic camera\n  // Workaround: set depth \x3d 0\n  float depth \x3d focusDepth, z;\n  z \x3d -center.z;\n  if (spriteDepth \x3c 1.0) {\n    depth \x3d mix(z, focusDepth, spriteDepth);\n  }\n  \n  // Match device/unit mapping \n  float size \x3d pixelUnit * spriteScale;\n  float depthSize \x3d depth * size;\n\n  // Calculate pixelSize for anti-aliasing\n  float pixelSize \x3d (spriteDepth \x3e 0.0 ? depthSize / z : size);\n  vPixelSize \x3d pixelSize;\n\n  // Position sprite\n  vec2 atlasOdd \x3d fract(atlas.zw / 2.0);\n  vec2 offset \x3d (spriteOffset + halfSprite * atlas.zw) * depthSize;\n  if (spriteSnap \x3e 0.5) {\n    // Snap to pixel (w/ epsilon shift to avoid jitter)\n    return vec3(((floor(center.xy / center.z * renderScale + 0.001) + renderOdd + atlasOdd) * center.z + offset) * renderScaleInv, center.z);\n  }\n  else {\n    // Place directly\n    return center + vec3(offset * renderScaleInv, 0.0);\n  }\n\n}\n"};
shadow$provide[448]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform float stereoBend;\nuniform vec4 basisScale;\nuniform vec4 basisOffset;\nuniform mat4 viewMatrix;\nuniform vec2 view4D;\n\nvec4 getStereographic4Position(vec4 position, inout vec4 stpq) {\n  \n  vec4 transformed;\n  if (stereoBend \x3e 0.0001) {\n\n    float r \x3d length(position);\n    float w \x3d r + position.w;\n    vec4 project \x3d vec4(position.xyz / w, r);\n    \n    transformed \x3d mix(position, project, stereoBend);\n  }\n  else {\n    transformed \x3d position;\n  }\n\n  vec4 pos4 \x3d transformed * basisScale - basisOffset;\n  vec3 xyz \x3d (viewMatrix * vec4(pos4.xyz, 1.0)).xyz;\n  return vec4(xyz, pos4.w * view4D.y + view4D.x);\n}\n"};
shadow$provide[449]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform float stereoBend;\n\nuniform mat4 viewMatrix;\n\nvec4 getStereoPosition(vec4 position, inout vec4 stpq) {\n  if (stereoBend \x3e 0.0001) {\n\n    vec3 pos \x3d position.xyz;\n    float r \x3d length(pos);\n    float z \x3d r + pos.z;\n    vec3 project \x3d vec3(pos.xy / z, r);\n    \n    vec3 lerped \x3d mix(pos, project, stereoBend);\n\n    return viewMatrix * vec4(lerped, 1.0);\n  }\n  else {\n    return viewMatrix * vec4(position.xyz, 1.0);\n  }\n}"};
shadow$provide[450]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="varying vec2 vST;\n\nvec4 getSample(vec2 st);\n\nvec4 getSTSample() {\n  return getSample(vST);\n}\n"};
shadow$provide[451]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="varying vec2 vUV;\n\nvoid setRawUV(vec4 xyzw) {\n  vUV \x3d xyzw.xy;\n}\n"};
shadow$provide[452]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec4 geometryClip;\nattribute vec4 position4;\nattribute vec3 strip;\n\n// External\nvec3 getPosition(vec4 xyzw, float canonical);\n\nvarying vec3 vNormal;\nvarying vec3 vLight;\nvarying vec3 vPosition;\n\nvoid getStripGeometry(vec4 xyzw, vec3 strip, out vec3 pos, out vec3 normal) {\n  vec3 a, b, c;\n\n  a   \x3d getPosition(xyzw, 1.0);\n  b   \x3d getPosition(vec4(xyzw.xyz, strip.x), 0.0);\n  c   \x3d getPosition(vec4(xyzw.xyz, strip.y), 0.0);\n\n  normal \x3d normalize(cross(c - a, b - a)) * strip.z;\n  \n  pos \x3d a;\n}\n\nvec3 getStripPositionNormal() {\n  vec3 center, normal;\n\n  vec4 p \x3d min(geometryClip, position4);\n\n  getStripGeometry(p, strip, center, normal);\n  vNormal   \x3d normal;\n  vLight    \x3d normalize((viewMatrix * vec4(1.0, 2.0, 2.0, 0.0)).xyz);\n  vPosition \x3d -center;\n\n  return center;\n}\n"};
shadow$provide[453]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec3 styleColor;\nuniform float styleOpacity;\n\nvec4 getStyleColor() {\n  return vec4(styleColor, styleOpacity);\n}\n"};
shadow$provide[454]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform float subdivideBevel;\n\n// External\nvec4 sampleData(vec4 xyzw);\n\nvec4 subdivideDepth(vec4 xyzw) {\n  float x \x3d xyzw.z;\n  float i \x3d floor(x);\n  float f \x3d x - i;\n\n  float minf \x3d subdivideBevel * min(f, 1.0 - f);\n  float g \x3d (f \x3e 0.5) ? 1.0 - minf : (f \x3c 0.5) ? minf : 0.5;\n\n  return sampleData(vec4(xyzw.xy, i + g, xyzw.w));\n}\n"};
shadow$provide[455]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform float subdivideBevel;\n\n// External\nvec4 sampleData(vec4 xyzw);\n\nvec4 subdivideDepthLerp(vec4 xyzw) {\n  float x \x3d xyzw.z;\n  float i \x3d floor(x);\n  float f \x3d x - i;\n\n  float minf \x3d subdivideBevel * min(f, 1.0 - f);\n  float g \x3d (f \x3e 0.5) ? 1.0 - minf : (f \x3c 0.5) ? minf : 0.5;\n\n  vec4 xyzw1 \x3d vec4(xyzw.xy, i, xyzw.w);\n  vec4 xyzw2 \x3d vec4(xyzw.xy, i + 1.0, xyzw.w);\n  \n  vec4 a \x3d sampleData(xyzw1);\n  vec4 b \x3d sampleData(xyzw2);\n\n  return mix(a, b, g);\n}\n"};
shadow$provide[456]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform float subdivideBevel;\n\n// External\nvec4 sampleData(vec4 xyzw);\n\nvec4 subdivideHeight(vec4 xyzw) {\n  float x \x3d xyzw.y;\n  float i \x3d floor(x);\n  float f \x3d x - i;\n\n  float minf \x3d subdivideBevel * min(f, 1.0 - f);\n  float g \x3d (f \x3e 0.5) ? 1.0 - minf : (f \x3c 0.5) ? minf : 0.5;\n\n  return sampleData(vec4(xyzw.x, i + g, xyzw.zw));\n}\n"};
shadow$provide[457]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform float subdivideBevel;\n\n// External\nvec4 sampleData(vec4 xyzw);\n\nvec4 subdivideHeightLerp(vec4 xyzw) {\n  float x \x3d xyzw.y;\n  float i \x3d floor(x);\n  float f \x3d x - i;\n\n  float minf \x3d subdivideBevel * min(f, 1.0 - f);\n  float g \x3d (f \x3e 0.5) ? 1.0 - minf : (f \x3c 0.5) ? minf : 0.5;\n\n  vec4 xyzw1 \x3d vec4(xyzw.x, i, xyzw.zw);\n  vec4 xyzw2 \x3d vec4(xyzw.x, i + 1.0, xyzw.zw);\n  \n  vec4 a \x3d sampleData(xyzw1);\n  vec4 b \x3d sampleData(xyzw2);\n\n  return mix(a, b, g);\n}\n"};
shadow$provide[458]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform float subdivideBevel;\n\n// External\nvec4 sampleData(vec4 xyzw);\n\nvec4 subdivideItems(vec4 xyzw) {\n  float x \x3d xyzw.w;\n  float i \x3d floor(x);\n  float f \x3d x - i;\n\n  float minf \x3d subdivideBevel * min(f, 1.0 - f);\n  float g \x3d (f \x3e 0.5) ? 1.0 - minf : (f \x3c 0.5) ? minf : 0.5;\n\n  return sampleData(vec4(xyzw.xyz, i + g));\n}\n"};
shadow$provide[459]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform float subdivideBevel;\n\n// External\nvec4 sampleData(vec4 xyzw);\n\nvec4 subdivideItemsLerp(vec4 xyzw) {\n  float x \x3d xyzw.w;\n  float i \x3d floor(x);\n  float f \x3d x - i;\n\n  float minf \x3d subdivideBevel * min(f, 1.0 - f);\n  float g \x3d (f \x3e 0.5) ? 1.0 - minf : (f \x3c 0.5) ? minf : 0.5;\n\n  vec4 xyzw1 \x3d vec4(xyzw.xyz, i);\n  vec4 xyzw2 \x3d vec4(xyzw.xyz, i + 1.0);\n  \n  vec4 a \x3d sampleData(xyzw1);\n  vec4 b \x3d sampleData(xyzw2);\n\n  return mix(a, b, g);\n}\n"};
shadow$provide[460]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform float subdivideBevel;\n\n// External\nvec4 sampleData(vec4 xyzw);\n\nvec4 subdivideWidth(vec4 xyzw) {\n  float x \x3d xyzw.x;\n  float i \x3d floor(x);\n  float f \x3d x - i;\n\n  float minf \x3d subdivideBevel * min(f, 1.0 - f);\n  float g \x3d (f \x3e 0.5) ? 1.0 - minf : (f \x3c 0.5) ? minf : 0.5;\n\n  return sampleData(vec4(i + g, xyzw.yzw));\n}\n"};
shadow$provide[461]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform float subdivideBevel;\n\n// External\nvec4 sampleData(vec4 xyzw);\n\nvec4 subdivideWidthLerp(vec4 xyzw) {\n  float x \x3d xyzw.x;\n  float i \x3d floor(x);\n  float f \x3d x - i;\n\n  float minf \x3d subdivideBevel * min(f, 1.0 - f);\n  float g \x3d (f \x3e 0.5) ? 1.0 - minf : (f \x3c 0.5) ? minf : 0.5;\n\n  vec4 xyzw1 \x3d vec4(i, xyzw.yzw);\n  vec4 xyzw2 \x3d vec4(i + 1.0, xyzw.yzw);\n  \n  vec4 a \x3d sampleData(xyzw1);\n  vec4 b \x3d sampleData(xyzw2);\n\n  return mix(a, b, g);\n}\n"};
shadow$provide[462]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="attribute vec4 position4;\n\nfloat getSurfaceHollowMask(vec4 xyzw) {\n  vec4 df \x3d abs(fract(position4) - .5);\n  vec2 df2 \x3d min(df.xy, df.zw);\n  float df3 \x3d min(df2.x, df2.y);\n  return df3;\n}"};
shadow$provide[463]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec4 geometryClip;\nuniform vec4 geometryResolution;\nuniform vec4 mapSize;\n\nattribute vec4 position4;\n\n// External\nvec3 getPosition(vec4 xyzw, float canonical);\n\nvec3 getSurfacePosition() {\n  vec4 p \x3d min(geometryClip, position4);\n\n#ifdef SURFACE_CLOSED_X\n  if (p.x \x3d\x3d geometryClip.x) p.x \x3d 0.0;\n#endif\n#ifdef SURFACE_CLOSED_Y\n  if (p.y \x3d\x3d geometryClip.y) p.y \x3d 0.0;\n#endif\n\n  vec3 xyz \x3d getPosition(p, 1.0);\n\n  // Overwrite UVs\n#ifdef POSITION_UV\n#ifdef POSITION_UV_INT\n  vUV \x3d -.5 + (position4.xy * geometryResolution.xy) * mapSize.xy;\n#else\n  vUV \x3d position4.xy * geometryResolution.xy;\n#endif\n#endif\n\n  return xyz;\n}\n"};
shadow$provide[464]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec4 mapSize;\nuniform vec4 geometryResolution;\nuniform vec4 geometryClip;\nattribute vec4 position4;\n\n// External\nvec3 getPosition(vec4 xyzw, float canonical);\nvec3 getNormal(vec4 xyzw);\n\nvarying vec3 vNormal;\nvarying vec3 vLight;\nvarying vec3 vPosition;\n\nvec3 getSurfacePositionNormal() {\n\n  vec4 p \x3d min(geometryClip, position4);\n#ifdef SURFACE_CLOSED_X\n  if (p.x \x3d\x3d geometryClip.x) p.x \x3d 0.0;\n#endif\n#ifdef SURFACE_CLOSED_Y\n  if (p.y \x3d\x3d geometryClip.y) p.y \x3d 0.0;\n#endif\n\n  vec3 center \x3d getPosition(p, 1.0);\n  vNormal     \x3d normalMatrix * normalize(getNormal(p));\n  vLight      \x3d normalize((viewMatrix * vec4(1.0, 2.0, 2.0, 0.0)).xyz); // hardcoded directional light\n  vPosition   \x3d -center;\n\n#ifdef POSITION_UV\n#ifdef POSITION_UV_INT\n  vUV \x3d -.5 + (position4.xy * geometryResolution.xy) * mapSize.xy;\n#else\n  vUV \x3d position4.xy * geometryResolution.xy;\n#endif\n#endif\n\n  return center;\n}\n"};
shadow$provide[465]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform vec4 mapSize;\nuniform vec4 geometryResolution;\nuniform vec4 geometryClip;\nattribute vec4 position4;\n\n// External\nvec3 getPosition(vec4 xyzw, float canonical);\n\nvec4 wrapAround(vec4 xyzw) {\n#ifdef SURFACE_CLOSED_X\n  float gx \x3d geometryClip.x;\n  if (xyzw.x \x3c 0.0) xyzw.x +\x3d gx;\n  if (xyzw.x \x3e\x3d gx) xyzw.x -\x3d gx;\n#endif\n#ifdef SURFACE_CLOSED_Y\n  float gy \x3d geometryClip.y;\n  if (xyzw.y \x3c 0.0) xyzw.y +\x3d gy;\n  if (xyzw.y \x3e\x3d gy) xyzw.y -\x3d gy;\n#endif\n  return xyzw;\n}\n\nvoid getSurfaceGeometry(vec4 xyzw, float edgeX, float edgeY, out vec3 left, out vec3 center, out vec3 right, out vec3 up, out vec3 down) {\n  vec4 deltaX \x3d vec4(1.0, 0.0, 0.0, 0.0);\n  vec4 deltaY \x3d vec4(0.0, 1.0, 0.0, 0.0);\n\n  center \x3d                  getPosition(xyzw, 1.0);\n  left   \x3d                  center;\n  down   \x3d                  center;\n  right  \x3d (edgeX \x3c 0.5)  ? getPosition(wrapAround(xyzw + deltaX), 0.0) : (2.0 * center - getPosition(xyzw - deltaX, 0.0));\n  up     \x3d (edgeY \x3c 0.5)  ? getPosition(wrapAround(xyzw + deltaY), 0.0) : (2.0 * center - getPosition(xyzw - deltaY, 0.0));\n}\n\nvec3 getSurfaceNormal(vec3 left, vec3 center, vec3 right, vec3 up, vec3 down) {\n  vec3 dx \x3d right - left;\n  vec3 dy \x3d up    - down;\n  vec3 n \x3d cross(dy, dx);\n  if (length(n) \x3e 0.0) {\n    return normalize(n);\n  }\n  return vec3(0.0, 1.0, 0.0);\n}\n\nvarying vec3 vNormal;\nvarying vec3 vLight;\nvarying vec3 vPosition;\n\nvec3 getSurfacePositionShaded() {\n  vec3 left, center, right, up, down;\n\n  vec4 p \x3d min(geometryClip, position4);\n  vec2 surface \x3d vec2(0.0);\n#ifdef SURFACE_CLOSED_X\n  if (p.x \x3d\x3d geometryClip.x) p.x \x3d 0.0;\n#else\n  if (p.x \x3d\x3d geometryClip.x) surface.x \x3d 1.0;\n  //if (p.x \x3d\x3d 0.0) surface.x \x3d -1.0;\n#endif\n#ifdef SURFACE_CLOSED_Y\n  if (p.y \x3d\x3d geometryClip.y) p.y \x3d 0.0;\n#else\n  if (p.y \x3d\x3d geometryClip.y) surface.y \x3d 1.0;\n  //if (p.y \x3d\x3d 0.0) surface.y \x3d -1.0;\n#endif\n\n  getSurfaceGeometry(p, surface.x, surface.y, left, center, right, up, down);\n  vNormal   \x3d getSurfaceNormal(left, center, right, up, down);\n  vLight    \x3d normalize((viewMatrix * vec4(1.0, 2.0, 2.0, 0.0)).xyz); // hardcoded directional light\n  vPosition \x3d -center;\n\n#ifdef POSITION_UV\n#ifdef POSITION_UV_INT\n  vUV \x3d -.5 + (position4.xy * geometryResolution.xy) * mapSize.xy;\n#else\n  vUV \x3d position4.xy * geometryResolution.xy;\n#endif\n#endif\n\n  return center;\n}\n"};
shadow$provide[466]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform float worldUnit;\nuniform float focusDepth;\nuniform float tickSize;\nuniform float tickEpsilon;\nuniform vec3  tickNormal;\nuniform vec2  tickStrip;\n\nvec4 getSample(vec4 xyzw);\n\nvec3 transformPosition(vec4 position, in vec4 stpqIn, out vec4 stpqOut);\n\nvec3 getTickPosition(vec4 xyzw, in vec4 stpqIn, out vec4 stpqOut) {\n  float epsilon \x3d tickEpsilon;\n\n  // determine tick direction\n  float leftX  \x3d max(tickStrip.x, xyzw.y - 1.0);\n  float rightX \x3d min(tickStrip.y, xyzw.y + 1.0);\n  \n  vec4 left    \x3d getSample(vec4(leftX,  xyzw.zw, 0.0));\n  vec4 right   \x3d getSample(vec4(rightX, xyzw.zw, 0.0));\n  vec4 diff    \x3d right - left;\n\n  vec3 normal  \x3d cross(normalize(diff.xyz + vec3(diff.w)), tickNormal);\n  float bias   \x3d max(0.0, 1.0 - length(normal) * 2.0);\n       normal  \x3d mix(normal, tickNormal.yzx, bias * bias);\n  \n  // transform (point) and (point + delta)\n  vec4 center  \x3d getSample(vec4(xyzw.yzw, 0.0));\n  vec4 delta   \x3d vec4(normal, 0.0) * epsilon;\n\n  vec4 a \x3d center;\n  vec4 b \x3d center + delta;\n\n  vec4 _;\n  vec3 c \x3d transformPosition(a, stpqIn, stpqOut);\n  vec3 d \x3d transformPosition(b, stpqIn, _);\n  \n  // sample on either side to create line\n  float line \x3d xyzw.x - .5;\n  vec3  mid  \x3d c;\n  vec3  side \x3d normalize(d - c);\n\n  return mid + side * line * tickSize * worldUnit * focusDepth;\n}\n"};
shadow$provide[467]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform mat4 transformMatrix;\n\nvec4 transformPosition(vec4 position, inout vec4 stpq) {\n  return transformMatrix * vec4(position.xyz, 1.0);\n}\n"};
shadow$provide[468]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="uniform mat4 transformMatrix;\nuniform vec4 transformOffset;\n\nvec4 transformPosition(vec4 position, inout vec4 stpq) {\n  return transformMatrix * position + transformOffset;\n}\n"};
shadow$provide[469]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.default=void 0;p.default="// Implicit three.js uniform\n// uniform mat4 viewMatrix;\n\nvec4 getViewPosition(vec4 position, inout vec4 stpq) {\n  return (viewMatrix * vec4(position.xyz, 1.0));\n}\n"};
shadow$provide[470]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Graph=void 0;class u{static initClass(){this.IN=this.index=0;this.OUT=1}static id(q){return++u.index}constructor(q,m=null){this.parent=m;this.id=u.id();this.nodes=[];q&&this.add(q)}inputs(){const q=[];for(const m of Array.from(this.nodes))for(const c of Array.from(m.inputs))null===c.input&&q.push(c);return q}outputs(){const q=[];for(const m of Array.from(this.nodes))for(const c of Array.from(m.outputs))0===c.output.length&&
q.push(c);return q}getIn(q){return Array.from(this.inputs()).filter(m=>m.name===q)[0]}getOut(q){return Array.from(this.outputs()).filter(m=>m.name===q)[0]}add(q,m){if(q.length)for(const c of Array.from(q))this.add(c);else{if(q.graph&&!m)throw Error("Adding node to two graphs at once");q.graph=this;this.nodes.push(q)}}remove(q,m){if(q.length)for(const c of Array.from(q))this.remove(c);else{if(q.graph!==this)throw Error("Removing node from wrong graph.");m||q.disconnect();this.nodes.splice(this.nodes.indexOf(q),
1);q.graph=null}}adopt(q){if(q.length)for(const m of Array.from(q))this.adopt(m);else q.graph.remove(q,!0),this.add(q,!0)}}p.Graph=u;u.initClass()};
shadow$provide[471]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Outlet=void 0;var u=y(470);class q{static initClass(){this.index=0}static make(m,c){null==c&&(c={});if(null!=m.meta)for(const f in m.meta)c[f]=m.meta[f];return new q(m.inout,m.name,m.hint,m.type,c)}static id(m){return`_io_${++q.index}_${m}`}static hint(m){m=m.replace(/^_io_[0-9]+_/,"");m=m.replace(/_i_o$/,"");return m.replace(/(In|Out|Inout|InOut)$/,"")}constructor(m,c,f,e,g,k){this.inout=m;this.name=c;this.hint=
f;this.type=e;null==g&&(g={});this.meta=g;this.id=k;null==this.hint&&(this.hint=q.hint(this.name));this.input=this.node=null;this.output=[];null==this.id&&(this.id=q.id(this.hint))}morph(m){this.inout=m.inout;this.name=m.name;this.hint=m.hint;this.type=m.type;return this.meta=m.meta}dupe(m){null==m&&(m=this.id);const c=q.make(this);c.name=m;return c}connect(m){if(this.inout===u.Graph.IN&&m.inout===u.Graph.OUT)return m.connect(this);if(this.inout!==u.Graph.OUT||m.inout!==u.Graph.IN)throw Error("Can only connect out to in.");
if(m.input!==this)return m.disconnect(),m.input=this,this.output.push(m)}disconnect(m){this.input&&this.input.disconnect(this);if(this.output.length)if(m){const c=this.output.indexOf(m);if(0<=c)return this.output.splice(c,1),m.input=null}else{for(m of Array.from(this.output))m.input=null;return this.output=[]}}}p.Outlet=q;q.initClass()};
shadow$provide[472]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Node=void 0;var u=y(470),q=y(471);class m{static initClass(){this.index=0}static id(c){return++m.index}constructor(c,f){this.owner=c;this.graph=null;this.inputs=[];this.outputs=[];this.all=[];this.outlets=null;this.id=m.id();this.setOutlets(f)}getIn(c){return Array.from(this.inputs).filter(f=>f.name===c)[0]}getOut(c){return Array.from(this.outputs).filter(f=>f.name===c)[0]}get(c){return this.getIn(c)||this.getOut(c)}setOutlets(c){if(null!=
c){let f;if(null==this.outlets){this.outlets={};for(f of Array.from(c))f instanceof q.Outlet||(f=q.Outlet.make(f)),this._add(f);return}const e={};for(f of Array.from(c))e[[f.name,f.inout,f.type].join("-")]=!0;for(let g in this.outlets)f=this.outlets[g],g=[f.name,f.inout,f.type].join("-"),e[g]?e[g]=f:this._remove(f);for(f of Array.from(c))c=e[[f.name,f.inout,f.type].join("-")],c instanceof q.Outlet?this._morph(c,f):(f instanceof q.Outlet||(f=q.Outlet.make(f)),this._add(f));this}return this.outlets}connect(c,
f,e){let g;let k;const l={},r={};for(g of Array.from(c.inputs))if(e||!g.input)({type:v}=g),c=v+"/"+g.hint,r[c]||(r[c]=g),l[v]=c=l[v]||[],c.push(g);e=this.outputs;e=e.filter(w=>!(f&&w.output.length));for(k of Array.from(e.slice())){({type:v}=k);c=v+"/"+k.hint;var v=l[v];if(g=r[c])k.connect(g),delete r[c],v.splice(v.indexOf(g),1),e.splice(e.indexOf(k),1)}if(!e.length)return this;for(k of Array.from(e.slice()))({type:v}=k),(v=l[v])&&v.length&&k.connect(v.shift());return this}disconnect(c){let f;for(f of Array.from(this.inputs))f.disconnect();
for(f of Array.from(this.outputs))f.disconnect();return this}_key(c){return[c.name,c.inout].join("-")}_add(c){const f=this._key(c);if(c.node)throw Error("Adding outlet to two nodes at once.");if(this.outlets[f])throw Error(`Adding two identical outlets to same node. (${f})`);c.node=this;c.inout===u.Graph.IN&&this.inputs.push(c);c.inout===u.Graph.OUT&&this.outputs.push(c);this.all.push(c);return this.outlets[f]=c}_morph(c,f){let e=this._key(f);delete this.outlets[e];c.morph(f);e=this._key(f);return this.outlets[e]=
f}_remove(c){const f=this._key(c);if(c.node!==this)throw Error("Removing outlet from wrong node.");c.disconnect();c.node=null;delete this.outlets[f];c.inout===u.Graph.IN&&this.inputs.splice(this.inputs.indexOf(c),1);c.inout===u.Graph.OUT&&this.outputs.splice(this.outputs.indexOf(c),1);this.all.splice(this.all.indexOf(c),1);return this}}p.Node=m;m.initClass()};
shadow$provide[473]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});var u={IN:!0,OUT:!0};p.OUT=p.IN=void 0;var q=y(470);Object.keys(q).forEach(function(g){"default"!==g&&"__esModule"!==g&&(Object.prototype.hasOwnProperty.call(u,g)||g in p&&p[g]===q[g]||Object.defineProperty(p,g,{enumerable:!0,get:function(){return q[g]}}))});var m=y(472);Object.keys(m).forEach(function(g){"default"!==g&&"__esModule"!==g&&(Object.prototype.hasOwnProperty.call(u,g)||g in p&&p[g]===m[g]||Object.defineProperty(p,
g,{enumerable:!0,get:function(){return m[g]}}))});var c=y(471);Object.keys(c).forEach(function(g){"default"!==g&&"__esModule"!==g&&(Object.prototype.hasOwnProperty.call(u,g)||g in p&&p[g]===c[g]||Object.defineProperty(p,g,{enumerable:!0,get:function(){return c[g]}}))});const {IN:f,OUT:e}=q.Graph;p.OUT=e;p.IN=f};
shadow$provide[474]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Snippet=void 0;class u{static initClass(){this.index=0}static namespace(){return`_sn_${++u.index}_`}static load(q,m,c){const f=q.parse(m,c),[e,g]=Array.from(q.compile(f));return new u(q,e,g,m,c)}constructor(q,m,c,f,e){this.language=q;this._signatures=m;this._compiler=c;this._name=f;this._original=e;this.varyings=this.attributes=this.symbols=this.externals=this.uniforms=this.entry=this.main=this.code=this.namespace=
null;this.language||delete this.language;this._signatures||delete this._signatures;this._compiler||delete this._compiler;this._original||delete this._original;this._name||(this._name=null!=this._signatures?this._signatures.main.name:void 0)}clone(){return new u(this.language,this._signatures,this._compiler,this._name,this._original)}bind(q,m,c,f){let e;var g;let k;m===""+m?[c,m,f]=Array.from([m,null!=c?c:{},null!=f?f:{}]):c!==""+c&&([f,c]=Array.from([null!=c?c:{},void 0]));this.main=this._signatures.main;
this.namespace=null!=(g=null!=c?c:this.namespace)?g:u.namespace();this.entry=this.namespace+this.main.name;this.uniforms={};this.varyings={};this.attributes={};this.externals={};this.symbols=[];c={};const l={};g=function(F){l[F]=!0;return F};const r=F=>this.namespace+F;if(q.globals)for(var v of Array.from(q.globals))g(v);const w=q.globalUniforms?g:r,z=q.globalVaryings?g:r,A=q.globalAttributes?g:r;q=(F,L)=>this.uniforms[w(null!=L?L:F.name)]=F;k=F=>this.varyings[z(F.name)]=F;v=F=>this.attributes[A(F.name)]=
F;g=F=>{const L=r(F.name);this.externals[L]=F;return this.symbols.push(L)};const H=F=>({type:F.type,name:F.name,value:F.value});for(e of Array.from(this._signatures.uniform))c[e.name]=!0;for(e of Array.from(this._signatures.uniform))q(H(e));for(e of Array.from(this._signatures.varying))k(H(e));for(e of Array.from(this._signatures.external))g(e);for(e of Array.from(this._signatures.attribute))v(H(e));for(const F in m)e=m[F],c[F]&&q(e,F);this.body=this.code=this._compiler(this.namespace,l,f);f&&(m=
(()=>{const F=[];for(const L in f)k=f[L],F.push(`#define ${L} ${k}`);return F})().join("\n"),m.length&&(this._original=[m,"//----------------------------------------",this._original].join("\n")));return null}}p.Snippet=u;u.initClass()};
shadow$provide[475]=function(D,y,Q,p){p.make=function(u){null==u&&(u=[]);u instanceof Array||(u=[+u]);return u};p.nest=(u,q)=>u.concat(q);p.compare=function(u,q){var m=Math.min(u.length,q.length);for(let c=0,f=m,e=0<=f;e?c<f:c>f;e?c++:c--){m=u[c];const g=q[c];if(m>g)return-1;if(m<g)return 1}u=u.length;q=q.length;return u>q?-1:u<q?1:0};p.max=function(u,q){return 0<p.compare(u,q)?q:u}};
shadow$provide[476]=function(D,y,Q,p){function u(f){if("function"!==typeof WeakMap)return null;var e=new WeakMap,g=new WeakMap;return(u=function(k){return k?g:e})(f)}function q(f,e){if(!e&&f&&f.__esModule)return f;if(null===f||"object"!==typeof f&&"function"!==typeof f)return{default:f};if((e=u(e))&&e.has(f))return e.get(f);var g={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor,l;for(l in f)if("default"!==l&&Object.prototype.hasOwnProperty.call(f,l)){var r=k?Object.getOwnPropertyDescriptor(f,
l):null;r&&(r.get||r.set)?Object.defineProperty(g,l,r):g[l]=f[l]}g.default=f;e&&e.set(f,g);return g}Object.defineProperty(p,"__esModule",{value:!0});p.assemble=void 0;var m=q(y(473)),c=q(y(475));p.assemble=function(f,e,g,k){const l={},r=[],v={},w={},z={},A={},H=Y=>{let fa;Y=(()=>{const la=[];for(const W in Y)fa=Y[W],la.push(fa);return la})();Y.sort((la,W)=>W.priority-la.priority);const Z=(la,W,ra)=>{L(la,W,ra);({main:ra}=W);({entry:W}=W);return f.call(za=>J(la,za),za=>R(la,za),W,ra.signature,da)},
da=f.body();for(fa of Array.from(Y))Z(fa.node,fa.module,fa.priority);return[da,Y]},F=function(Y,fa,Z){const da=A[Y];return null!=da?da.priority=c.max(da.priority,Z):A[Y]={code:fa,priority:Z}},L=function(Y,fa,Z){let da;Z=c.make(Z);for(const la in fa.library){const W=fa.library[la];F(la,W.code,c.nest(Z,W.priority))}F(fa.namespace,fa.body,Z);for(da in fa.uniforms)Z=fa.uniforms[da],v[da]=Z;for(da in fa.varyings)Z=fa.varyings[da],w[da]=Z;for(da in fa.attributes)Z=fa.attributes[da],z[da]=Z;return N(Y,fa)},
N=(Y,fa)=>{const Z=[];for(const da of Array.from(fa.symbols)){const la=fa.externals[da];if(R(Y,la.name)){const W={};for(const ra in la)W[ra]=la[ra];W.name=J(Y,la.name);l[da]=W;Z.push(r.push(da))}else Z.push(void 0)}return Z},R=function(Y,fa){Y=Y.get(fa);if(Y.inout===m.IN)return null===Y.input;if(Y.inout===m.OUT)return 0===Y.output.length},J=function(Y,fa){Y=Y.get(fa);if(!Y)return null;Y.input&&(Y=Y.input);({name:fa}=Y);return Y.id};return function(){let Y;for(Y in k){var fa=k[Y];N(fa.node,fa.module)}[fa,
g]=Array.from(H(g));null!=e&&(fa.entry=e);fa=f.build(fa,g);var Z=(()=>{const da=[];for(Y in A)da.push(A[Y]);return da})().sort((da,la)=>c.compare(da.priority,la.priority)).map(da=>da.code);Z.push(fa.code);Z=f.lines(Z);return{namespace:fa.name,library:A,body:fa.code,code:Z,main:fa,entry:fa.name,symbols:r,externals:l,uniforms:v,varyings:w,attributes:z}}()}};
shadow$provide[477]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Program=void 0;var u=y(474),q=y(476);class m{static initClass(){this.index=0}static entry(){return`_pg_${++m.index}_`}constructor(c,f,e){this.language=c;this.namespace=f;this.graph=e;this.calls={};this.requires={}}call(c,f,e){let g;const k=f.namespace;(g=this.calls[k])?g.priority=Math.max(g.priority,e):this.calls[k]={node:c,module:f,priority:e};return this}require(c,f){return this.requires[f.namespace]={node:c,
module:f}}assemble(){const c=(0,q.assemble)(this.language,null!=this.namespace?this.namespace:m.entry,this.calls,this.requires),f=new u.Snippet;for(const e in c)f[e]=c[e];f.graph=this.graph;return f}}p.Program=m;m.initClass()};
shadow$provide[478]=function(D,y,Q,p){function u(f){if("function"!==typeof WeakMap)return null;var e=new WeakMap,g=new WeakMap;return(u=function(k){return k?g:e})(f)}function q(f,e){if(!e&&f&&f.__esModule)return f;if(null===f||"object"!==typeof f&&"function"!==typeof f)return{default:f};if((e=u(e))&&e.has(f))return e.get(f);var g={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor,l;for(l in f)if("default"!==l&&Object.prototype.hasOwnProperty.call(f,l)){var r=k?Object.getOwnPropertyDescriptor(f,
l):null;r&&(r.get||r.set)?Object.defineProperty(g,l,r):g[l]=f[l]}g.default=f;e&&e.set(f,g);return g}Object.defineProperty(p,"__esModule",{value:!0});p.link=void 0;var m=q(y(473)),c=q(y(475));p.link=function(f,e,g,k){let l=[];const r=[],v={},w={},z={},A={},H={},F=function(N,R,J){const Y=H[N];return null!=Y?Y.priority=c.max(Y.priority,J):H[N]={code:R,priority:J}},L=function(N,R,J){let Y;J=c.make(J);for(var fa in R.library){var Z=R.library[fa];F(fa,Z.code,c.nest(J,Z.priority))}F(R.namespace,R.body,J);
for(Y in R.uniforms)J=R.uniforms[Y],w[Y]=J;for(Y in R.varyings)J=R.varyings[Y],A[Y]=J;for(Y in R.attributes)J=R.attributes[Y],z[Y]=J;J=[];for(Y of Array.from(R.symbols)){fa=R.externals[Y];{Z=N;var da=fa.name;const la=Z.get(da);if(!la)throw Error(`Unable to link program. Unlinked callback \`${da}\` on \`${null!=(null!=Z.owner.snippet?Z.owner.snippet._name:void 0)?null!=Z.owner.snippet?Z.owner.snippet._name:void 0:Z.owner.namespace}\``);Z=la.inout===m.IN?null===la.input:la.inout===m.OUT?0===la.output.length:
void 0}Z?(v[Y]=fa,J.push(r.push(Y))):J.push(void 0)}return J};return function(){var N=f.links(e);const R=[];null!=N.defs&&R.push(N.defs);null!=N.bodies&&R.push(N.bodies);for(const J of Array.from(g))L(J.node,J.module,J.priority);l=(()=>{const J=[];for(const Y in H)J.push(H[Y]);return J})().sort((J,Y)=>c.compare(J.priority,Y.priority)).map(J=>J.code);N=f.lines(l);N=f.defuse(N);R.length&&(N=[f.lines(R),N].join("\n"));N=f.hoist(N);N=f.dedupe(N);return{namespace:k.main.name,code:N,main:k.main,entry:k.main.name,
externals:v,uniforms:w,attributes:z,varyings:A}}()}};
shadow$provide[479]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Layout=void 0;var u=y(474),q=y(478);class m{constructor(c,f){this.language=c;this.graph=f;this.links=[];this.includes=[];this.modules={};this.visits={}}callback(c,f,e,g,k){return this.links.push({node:c,module:f,priority:e,name:g,external:k})}include(c,f,e){let g;if(null!=(g=this.modules[f.namespace]))return g.priority=Math.max(e,g.priority);this.modules[f.namespace]=!0;return this.includes.push({node:c,module:f,
priority:e})}visit(c){return this.visits[c]?!1:this.visits[c]=!0}link(c){c=(0,q.link)(this.language,this.links,this.includes,c);const f=new u.Snippet;for(const e in c)f[e]=c[e];f.graph=this.graph;return f}}p.Layout=m};
shadow$provide[480]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});var u={load:!0};p.load=void 0;var q=y(474);Object.keys(q).forEach(function(k){"default"!==k&&"__esModule"!==k&&(Object.prototype.hasOwnProperty.call(u,k)||k in p&&p[k]===q[k]||Object.defineProperty(p,k,{enumerable:!0,get:function(){return q[k]}}))});var m=y(477);Object.keys(m).forEach(function(k){"default"!==k&&"__esModule"!==k&&(Object.prototype.hasOwnProperty.call(u,k)||k in p&&p[k]===m[k]||Object.defineProperty(p,
k,{enumerable:!0,get:function(){return m[k]}}))});var c=y(479);Object.keys(c).forEach(function(k){"default"!==k&&"__esModule"!==k&&(Object.prototype.hasOwnProperty.call(u,k)||k in p&&p[k]===c[k]||Object.defineProperty(p,k,{enumerable:!0,get:function(){return c[k]}}))});var f=y(476);Object.keys(f).forEach(function(k){"default"!==k&&"__esModule"!==k&&(Object.prototype.hasOwnProperty.call(u,k)||k in p&&p[k]===f[k]||Object.defineProperty(p,k,{enumerable:!0,get:function(){return f[k]}}))});var e=y(478);
Object.keys(e).forEach(function(k){"default"!==k&&"__esModule"!==k&&(Object.prototype.hasOwnProperty.call(u,k)||k in p&&p[k]===e[k]||Object.defineProperty(p,k,{enumerable:!0,get:function(){return e[k]}}))});var g=y(475);Object.keys(g).forEach(function(k){"default"!==k&&"__esModule"!==k&&(Object.prototype.hasOwnProperty.call(u,k)||k in p&&p[k]===g[k]||Object.defineProperty(p,k,{enumerable:!0,get:function(){return g[k]}}))});({load:D}=q.Snippet);p.load=D};
shadow$provide[481]=function(D,y,Q,p){function u(g){if("function"!==typeof WeakMap)return null;var k=new WeakMap,l=new WeakMap;return(u=function(r){return r?l:k})(g)}function q(g,k){return"undefined"!==typeof g&&null!==g?k(g):void 0}Object.defineProperty(p,"__esModule",{value:!0});p.Block=void 0;var m=function(g,k){if(!k&&g&&g.__esModule)return g;if(null===g||"object"!==typeof g&&"function"!==typeof g)return{default:g};if((k=u(k))&&k.has(g))return k.get(g);var l={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor,
v;for(v in g)if("default"!==v&&Object.prototype.hasOwnProperty.call(g,v)){var w=r?Object.getOwnPropertyDescriptor(g,v):null;w&&(w.get||w.set)?Object.defineProperty(l,v,w):l[v]=g[v]}l.default=g;k&&k.set(g,l);return l}(y(473)),c=y(480);class f{static previous(g){return null!=g.input?g.input.node.owner:void 0}constructor(g){null==g&&(g=!1);g||this.construct()}construct(){let g;null==this.namespace&&(this.namespace=c.Program.entry());return this.node=new m.Node(this,null!=(g="function"===typeof this.makeOutlets?
this.makeOutlets():void 0)?g:{})}refresh(){let g;return this.node.setOutlets(null!=(g="function"===typeof this.makeOutlets?this.makeOutlets():void 0)?g:{})}clone(){return new f}compile(g,k){g=new c.Program(g,null!=k?k:c.Program.entry(),this.node.graph);this.call(g,0);return g.assemble()}link(g,k){k=this.compile(g,k);g=new c.Layout(g,this.node.graph);this._include(k,g,0);this.export(g,0);return g.link(k)}call(g,k){}callback(g,k,l,r,v){}export(g,k){}_info(g){let k=null!=(null!=this.node.owner.snippet?
this.node.owner.snippet._name:void 0)?null!=this.node.owner.snippet?this.node.owner.snippet._name:void 0:this.node.owner.namespace;if(null!=g)return k+("."+g)}_outlet(g,k){k=m.Outlet.make(g,k);k.meta.def=g;return k}_call(g,k,l){return k.call(this.node,g,l)}_require(g,k){return k.require(this.node,g)}_inputs(g,k,l){return(()=>{const r=[];for(const v of Array.from(g.main.signature)){const w=this.node.get(v.name);r.push(q(f.previous(w),z=>z.call(k,l+1)))}return r})()}_callback(g,k,l,r,v,w){return k.callback(this.node,
g,l,r,v,w)}_include(g,k,l){return k.include(this.node,g,l)}_link(g,k,l){return(()=>{const r=[];for(const v of Array.from(g.symbols)){const w=g.externals[v];let z=this.node.get(w.name);if(!z)throw new e(`External not found on ${this._info(w.name)}`);if(null!=z.meta.child)continue;let A=z,H;for(;!H&&A;)[A,z]=Array.from([z.meta.parent,A]);H=f.previous(z);if(!H)throw new e(`Missing connection on ${this._info(w.name)}`);H.callback(k,l+1,v,w,z.input);r.push(null!=H?H.export(k,l+1):void 0)}return r})()}_trace(g,
k,l){return(()=>{const r=[];for(const v of Array.from(g.main.signature)){const w=this.node.get(v.name);r.push(q(f.previous(w),z=>z.export(k,l+1)))}return r})()}}p.Block=f;const e=function(g){g=Error(g);g.name="OutletError";return g};e.prototype=Error()};
shadow$provide[482]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Call=void 0;D=y(481);class u extends D.Block{constructor(q){super(!0);this.snippet=q;this.namespace=q.namespace;this.construct()}clone(){return new u(this.snippet)}makeOutlets(){var q=this.snippet.main.signature;const {externals:m}=this.snippet;var {symbols:c}=this.snippet;q=Array.from(q).map(f=>this._outlet(f,{callback:!1}));c=Array.from(c).map(f=>this._outlet(m[f],{callback:!0}));return q.concat(c)}call(q,m){this._call(this.snippet,
q,m);return this._inputs(this.snippet,q,m)}export(q,m){if(q.visit(this.namespace,m))return this._link(this.snippet,q,m),this._trace(this.snippet,q,m)}}p.Call=u};
shadow$provide[483]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Callback=void 0;var u=y(473);D=y(481);class q extends D.Block{constructor(m){super(!0);this.graph=m;this.construct()}refresh(){super.refresh();return delete this.subroutine}clone(){return new q(this.graph)}makeOutlets(){let m;this.make();const c=[];let f=[],e=[];const g=(k,l)=>{if(k.meta.callback){if(k.inout===u.Graph.IN)return l=k.dupe(),null==l.meta.child&&(l.meta.child=k),k.meta.parent=l,c.push(l)}else return l.push(k.type)};
for(m of Array.from(this.graph.inputs()))g(m,f);for(m of Array.from(this.graph.outputs()))g(m,e);f=f.join(",");e=e.join(",");c.push({name:"callback",type:`(${f})(${e})`,inout:u.Graph.OUT,meta:{callback:!0,def:this.subroutine.main}});return c}make(){return this.subroutine=this.graph.compile(this.namespace)}export(m,c){if(m.visit(this.namespace,c))return this._link(this.subroutine,m,c),this.graph.export(m,c)}call(m,c){return this._require(this.subroutine,m,c)}callback(m,c,f,e,g){this._include(this.subroutine,
m,c);return this._callback(this.subroutine,m,c,f,e,g)}}p.Callback=q};
shadow$provide[484]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Isolate=void 0;var u=y(473);D=y(481);class q extends D.Block{constructor(m){super(!0);this.graph=m;this.construct()}refresh(){super.refresh();return delete this.subroutine}clone(){return new q(this.graph)}makeOutlets(){this.make();const m=[],c={};for(const f of["inputs","outputs"])for(const e of Array.from(this.graph[f]())){let g=void 0;["return","callback"].includes(e.hint)&&e.inout===u.Graph.OUT&&(g=e.hint);
null!=c[g]&&(g=void 0);const k=e.dupe(g);null==k.meta.child&&(k.meta.child=e);e.meta.parent=k;null!=g&&(c[g]=!0);m.push(k)}return m}make(){return this.subroutine=this.graph.compile(this.namespace)}call(m,c){this._call(this.subroutine,m,c);return this._inputs(this.subroutine,m,c)}export(m,c){if(m.visit(this.namespace,c))return this._link(this.subroutine,m,c),this._trace(this.subroutine,m,c),this.graph.export(m,c)}callback(m,c,f,e,g){g=g.meta.child;return g.node.owner.callback(m,c,f,e,g)}}p.Isolate=
q};
shadow$provide[485]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Join=void 0;D=y(481);class u extends D.Block{constructor(q){super(!0);this.nodes=q;this.construct()}clone(){return new u(this.nodes)}makeOutlets(){return[]}call(q,m){return(()=>{const c=[];for(const f of Array.from(this.nodes))c.push(f.owner.call(q,m));return c})()}export(q,m){return(()=>{const c=[];for(const f of Array.from(this.nodes))c.push(f.owner.export(q,m));return c})()}}p.Join=u};
shadow$provide[486]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});var u=y(481);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in p&&p[e]===u[e]||Object.defineProperty(p,e,{enumerable:!0,get:function(){return u[e]}}))});var q=y(482);Object.keys(q).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in p&&p[e]===q[e]||Object.defineProperty(p,e,{enumerable:!0,get:function(){return q[e]}}))});var m=y(483);Object.keys(m).forEach(function(e){"default"!==
e&&"__esModule"!==e&&(e in p&&p[e]===m[e]||Object.defineProperty(p,e,{enumerable:!0,get:function(){return m[e]}}))});var c=y(484);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in p&&p[e]===c[e]||Object.defineProperty(p,e,{enumerable:!0,get:function(){return c[e]}}))});var f=y(485);Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in p&&p[e]===f[e]||Object.defineProperty(p,e,{enumerable:!0,get:function(){return f[e]}}))})};
shadow$provide[487]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.serialize=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(486));const m=function(c){const f=[],e=[];for(const k of Array.from(c.nodes)){let l;var g={id:k.id,name:null,type:null,depth:null,graph:null,inputs:[],outputs:[]};f.push(g);({inputs:c}=g);const {outputs:r}=g,v=k.owner;v instanceof q.Call?(g.name=v.snippet._name,g.type="call",g.code=v.snippet._original):v instanceof q.Callback?(g.name="Callback",g.type=
"callback",g.graph=m(v.graph)):v instanceof q.Isolate?(g.name="Isolate",g.type="isolate",g.graph=m(v.graph)):v instanceof q.Join?(g.name="Join",g.type="join"):null!=v&&(null==g.name&&(g.name=null!=v.name?v.name:v.type),null==g.type&&(g.type=v.type),null==g.code&&(g.code=v.code),null!=v.graph&&(g.graph=m(v.graph)));g=function(w){w=w.replace(")(",")→(");return w.replace("()","")};for(l of Array.from(k.inputs))c.push({id:l.id,name:l.name,type:g(l.type),open:null==l.input});for(l of Array.from(k.outputs)){r.push({id:l.id,
name:l.name,type:g(l.type),open:!l.output.length});for(const w of Array.from(l.output))e.push({from:k.id,out:l.id,to:w.node.id,in:w.id,type:g(l.type)})}}return{nodes:f,links:e}};p.serialize=m};
shadow$provide[488]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.hash=void 0;let u=function(q,m){const c=q&65535,f=m&65535;return c*f+((q>>>16&65535)*f+c*(m>>>16&65535)<<16>>>0)|0};null!=Math.imul&&({imul:u}=Math);p.hash=function(q){let m;const c=q.length;let f=Math.floor(c/2),e=m=0;const g=function(k,l){k|=l<<16;k=u(k^k<<9,3432918353);k=u(k<<15|k>>>17,461845907);m^=k;m=m<<13|m>>>19;m=u(m,5);return m=m+3864292196|0};for(;f--;)g(q.charCodeAt(e++),q.charCodeAt(e++));c&1&&g(q.charCodeAt(e++),
0);m^=c;m^=m>>>16;m=u(m,2246822507);m^=m>>>13;m=u(m,3266489909);return m^=m>>>16}};
shadow$provide[489]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.merge=p.overlay=p.process=void 0;var u=y(488);const q=function(l,r){null==r&&(r=1);var v=(0,u.hash)(l)^1193046;l=v&255;let w=v>>>8&255;v=v>>>16&255;var z=Math.max(l,w,v);const A=140/z;z=Math.round(z/3);l=Math.min(255,Math.round(A*Math.max(l,z)));w=Math.min(255,Math.round(A*Math.max(w,z)));v=Math.min(255,Math.round(A*Math.max(v,z)));return"rgba("+[l,w,v,r].join(", ")+")"},m=function(l){return(null!=l?l:"").replace(/&/g,
"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/'/g,"\x26#39;").replace(/"/g,"\x26quot;")};p.process=function(l){const r=[],v=e(l,r);v.update=()=>{if(null==v.parentNode)var w=void 0;else{var z=v.getBoundingClientRect();for(w of Array.from(r)){var A=w.out.getBoundingClientRect(),H=w.in.getBoundingClientRect();w.coords={x1:(A.left+A.right)/2-z.left,y1:(A.top+A.bottom)/2-z.top,x2:(H.left+H.right)/2-z.left,y2:(H.top+H.bottom)/2-z.top}}z=v.querySelector("svg");null!=z&&v.removeChild(z);
for(A=v;A.parentNode&&0===A.offsetHeight;)A=A.parentNode;z=g();z.setAttribute("width",A.offsetWidth);z.setAttribute("height",A.offsetHeight);for(w of Array.from(r)){var F=w.coords;const fa=g("path");A=fa;H=A.setAttribute;{var L=void 0;var N=F.x1;var R=F.y1,J=F.x2;F=F.y2;L=J-N;var Y=F-R;const Z=Math.sqrt(L*L+Y*Y);if(Math.abs(Y)>Math.abs(L)){const da=(N+J)/2,la=(R+F)/2;Y=0<Y?.3:-.3;L=Math.min(Math.abs(L)/2,20+Z/8);N=["M",N,R,"C",N+L,R+",",da,la-Z*Y,da,la,"C",da,la+Z*Y,J-L,F+",",J,F].join(" ")}else L=
Math.min(Math.abs(L)/2.5,20+Z/4),N=["M",N,R,"C",N+L,R+",",J-L,F+",",J,F].join(" ")}H.call(A,"d",N);fa.setAttribute("stroke",w.color);fa.setAttribute("stroke-width",3);fa.setAttribute("fill","transparent");z.appendChild(fa)}w=v.appendChild(z)}return w};c(v);return v};const c=function(l){l=l.querySelectorAll(".shadergraph-code");return Array.from(l).map(r=>function(){r.parentNode.classList.add("shadergraph-has-code");return r.parentNode.addEventListener("click",v=>r.style.display={block:"none",none:"block"}[r.style.display||
"none"])}())},f=function(l){let r,v;const w={},z={};for(v of Array.from(l.nodes))w[v.id]=v;for(r of Array.from(l.links))null==z[r.from]&&(z[r.from]=[]),z[r.from].push(r);const A=function(H,F){null==F&&(F=0);H.depth=Math.max(null!=H.depth?H.depth:0,F);if(H=z[H.id])for(r of Array.from(H))A(w[r.to],F+1);return null};for(v of Array.from(l.nodes))null==v.depth&&A(v);return null},e=function(l,r){f(l);const v=document.createElement("div");v.classList.add("shadergraph-graph");const w=[],z={};for(const H of Array.from(l.nodes)){let F;
const L=document.createElement("div");L.classList.add("shadergraph-node");L.classList.add(`shadergraph-node-${H.type}`);L.innerHTML=`\
<div class="shadergraph-header">${m(H.name)}</div>\
`;var A=function(N,R){const J=q(N.type),Y=document.createElement("div");Y.classList.add("shadergraph-outlet");Y.classList.add(`shadergraph-outlet-${R}`);Y.innerHTML=`\
<div class="shadergraph-point" style="background: ${J}"></div>
<div class="shadergraph-type" style="color: ${J}">${m(N.type)}</div>
<div class="shadergraph-name">${m(N.name)}</div>\
`;L.appendChild(Y);return z[N.id]=Y.querySelector(".shadergraph-point")};for(F of Array.from(H.inputs))A(F,"in");for(F of Array.from(H.outputs))A(F,"out");null!=H.graph?L.appendChild(e(H.graph,r)):(A=document.createElement("div"),A.classList.add("shadergraph-clear"),L.appendChild(A));null!=H.code&&(A=document.createElement("div"),A.classList.add("shadergraph-code"),A.innerHTML=m((""+H.code).replace(/^\s+|\s+$/g,"")),L.appendChild(A));A=w[H.depth];null==A&&(A=document.createElement("div"),A.classList.add("shadergraph-column"),
w[H.depth]=A);A.appendChild(L)}for(A of Array.from(w))null!=A&&v.appendChild(A);for(const H of Array.from(l.links))l=q(H.type),r.push({color:l,out:z[H.out],in:z[H.in]});return v},g=function(l){null==l&&(l="svg");return document.createElementNS("http://www.w3.org/2000/svg",l)};p.overlay=function(l){const r=document.createElement("div");r.setAttribute("class","shadergraph-overlay");const v=document.createElement("div");v.setAttribute("class","shadergraph-close");v.innerHTML="\x26times;";const w=document.createElement("div");
w.setAttribute("class","shadergraph-view");const z=document.createElement("div");z.setAttribute("class","shadergraph-inside");z.appendChild(l);w.appendChild(z);r.appendChild(w);r.appendChild(v);v.addEventListener("click",()=>r.parentNode.removeChild(r));return r};const k=function(l){if(l instanceof Node)return l;const r=document.createElement("span");r.innerText=null!=l?l:"";return r};p.merge=function(l){if(1!==l.length){let r;const v=document.createElement("div");for(r of Array.from(l))v.appendChild(k(r));
v.update=()=>{const w=[];for(r of Array.from(l))w.push("function"===typeof r.update?r.update():void 0);return w};return v}return k(l[0])}};
shadow$provide[490]=function(D,y,Q,p){function u(g){if("function"!==typeof WeakMap)return null;var k=new WeakMap,l=new WeakMap;return(u=function(r){return r?l:k})(g)}Object.defineProperty(p,"__esModule",{value:!0});p.inspect=p.visualize=p.markup=p.serialize=void 0;D=y(487);var q=function(g,k){if(!k&&g&&g.__esModule)return g;if(null===g||"object"!==typeof g&&"function"!==typeof g)return{default:g};if((k=u(k))&&k.has(g))return k.get(g);var l={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor,
v;for(v in g)if("default"!==v&&Object.prototype.hasOwnProperty.call(g,v)){var w=r?Object.getOwnPropertyDescriptor(g,v):null;w&&(w.get||w.set)?Object.defineProperty(l,v,w):l[v]=g[v]}l.default=g;k&&k.set(g,l);return l}(y(489));const m=D.serialize;p.serialize=m;p.markup=q;const c=function(g){return null==g?g:g instanceof Array?g.map(c):null!=g.vertex&&null!=g.fragment?[c(g.vertex,c(g.fragment))]:null!=g._graph?g._graph:null!=g.graph?g.graph:g},f=function(g){let k=[];for(const l of Array.from(g))l instanceof
Array?k=k.concat(f(l)):null!=l&&k.push(l);return k},e=function(){const g=f(c([].slice.call(arguments)));return q.merge(Array.from(g).filter(k=>k).map(k=>{k?k.nodes&&(k=m(k),k=q.process(k)):k=void 0;return k}))};p.visualize=e;p.inspect=function(){const g=e.apply(null,arguments),k=q.overlay(g);for(const l of Array.from(document.querySelectorAll(".shadergraph-overlay")))l.remove();document.body.appendChild(k);g.update();return k}};
shadow$provide[491]=function(D,y,Q,p){function u(k){if("function"!==typeof WeakMap)return null;var l=new WeakMap,r=new WeakMap;return(u=function(v){return v?r:l})(k)}function q(k,l){if(!l&&k&&k.__esModule)return k;if(null===k||"object"!==typeof k&&"function"!==typeof k)return{default:k};if((l=u(l))&&l.has(k))return l.get(k);var r={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor,w;for(w in k)if("default"!==w&&Object.prototype.hasOwnProperty.call(k,w)){var z=v?Object.getOwnPropertyDescriptor(k,
w):null;z&&(z.get||z.set)?Object.defineProperty(r,w,z):r[w]=k[w]}r.default=k;l&&l.set(k,r);return r}Object.defineProperty(p,"__esModule",{value:!0});p.Factory=void 0;var m=y(473),c=q(y(486)),f=q(y(490));class e{constructor(k,l,r){this.language=k;this.fetch=l;this.config=r;this.graph()}pipe(k,l,r,v){k instanceof e?this._concat(k):null!=k&&this._call(k,l,r,v);return this}call(k,l,r,v){return this.pipe(k,l,r,v)}require(k,l,r,v){k instanceof e?this._import(k):null!=k&&(this.callback(),this._call(k,l,
r,v),this.end());return this}import(k,l,r,v){return this.require(k,l,r,v)}split(){this._group("_combine",!0);return this}fan(){this._group("_combine",!1);return this}isolate(){this._group("_isolate");return this}callback(){this._group("_callback");return this}next(){this._next();return this}pass(){const k=this._stack[2].end;this.end();this._state.end=this._state.end.concat(k);return this}end(){const [k,l]=Array.from(this._exit()),{op:r}=k;if(this[r])this[r](k,l);return this}join(){return this.end()}graph(){for(;1<
(null!=this._stack?this._stack.length:void 0);)this.end();this._graph&&this._tail(this._state,this._graph);const k=this._graph;this._graph=new m.Graph;this._state=new g;this._stack=[this._state];return k}compile(k){null==k&&(k="main");return this.graph().compile(k)}link(k){null==k&&(k="main");return this.graph().link(k)}serialize(){return f.serialize(this._graph)}empty(){return 0===this._graph.nodes.length}_concat(k){let l;if(0===k._state.nodes.length)return this;this._tail(k._state,k._graph);try{l=
new c.Isolate(k._graph)}catch(r){throw this.config.autoInspect&&f.inspect(r,this._graph,k),r;}this._auto(l);return this}_import(k){let l;if(0===k._state.nodes.length)throw"Can't import empty callback";this._tail(k._state,k._graph);try{l=new c.Callback(k._graph)}catch(r){throw this.config.autoInspect&&f.inspect(r,this._graph,k),r;}this._auto(l);return this}_combine(k,l){for(const r of Array.from(k.start))for(const v of Array.from(l.end))v.connect(r,k.multi);l.end=k.end;return l.nodes=l.nodes.concat(k.nodes)}_isolate(k,
l){if(k.nodes.length){let r;l=this._subgraph(k);this._tail(k,l);try{r=new c.Isolate(l)}catch(v){throw this.config.autoInspect&&f.inspect(v,this._graph,l),v;}return this._auto(r)}}_callback(k,l){if(k.nodes.length){let r;l=this._subgraph(k);this._tail(k,l);try{r=new c.Callback(l)}catch(v){throw this.config.autoInspect&&f.inspect(v,this._graph,l),v;}return this._auto(r)}}_call(k,l,r,v){k=this.fetch(k);k.bind(this.config,l,r,v);l=new c.Call(k);return this._auto(l)}_subgraph(k){const l=new m.Graph(null,
this._graph);l.adopt(k.nodes);return l}_tail(k,l){let r=k.end.concat(k.tail);r=r.filter((v,w)=>r.indexOf(v)===w);1<r.length&&(r=new c.Join(r),r=[r.node],this._graph.add(r));l.tail=r[0];k.end=r;k.tail=[];if(!l.tail)throw Error("Cannot finalize empty graph");l.compile=v=>{null==v&&(v="main");try{return l.tail.owner.compile(this.language,v)}catch(w){throw this.config.autoInspect&&l.inspect(w),w;}};l.link=v=>{null==v&&(v="main");try{return l.tail.owner.link(this.language,v)}catch(w){throw this.config.autoInspect&&
l.inspect(w),w;}};l.export=(v,w)=>l.tail.owner.export(v,w);return l.inspect=(v=null)=>f.inspect(v,l)}_group(k,l){this._push(k,l);this._push();return this}_next(){const k=this._pop();this._state.start=this._state.start.concat(k.start);this._state.end=this._state.end.concat(k.end);this._state.nodes=this._state.nodes.concat(k.nodes);this._state.tail=this._state.tail.concat(k.tail);return this._push()}_exit(){this._next();this._pop();return[this._pop(),this._state]}_push(k,l){this._stack.unshift(new g(k,
l));return this._state=this._stack[0]}_pop(){let k;this._state=this._stack[1];null==this._state&&(this._state=new g);return null!=(k=this._stack.shift())?k:new g}_auto(k){return k.node.inputs.length?this._append(k):this._insert(k)}_append(k){let l;({node:k}=k);this._graph.add(k);for(l of Array.from(this._state.end))l.connect(k);this._state.start.length||(this._state.start=[k]);this._state.end=[k];this._state.nodes.push(k);k.outputs.length||this._state.tail.push(k)}_prepend(k){let l;({node:k}=k);this._graph.add(k);
for(l of Array.from(this._state.start))k.connect(l);this._state.end.length||(this._state.end=[k]);this._state.start=[k];this._state.nodes.push(k);k.outputs.length||this._state.tail.push(k)}_insert(k){({node:k}=k);this._graph.add(k);this._state.start.push(k);this._state.end.push(k);this._state.nodes.push(k);if(!k.outputs.length)return this._state.tail.push(k)}}p.Factory=e;class g{constructor(k=null,l,r,v,w,z){this.op=k;null==l&&(l=!1);this.multi=l;null==r&&(r=[]);this.start=r;null==v&&(v=[]);this.end=
v;null==w&&(w=[]);this.nodes=w;null==z&&(z=[]);this.tail=z}}};
shadow$provide[492]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.Material=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(490));class m{constructor(c,f){this.vertex=c;this.fragment=f}build(c){return this.link(c)}link(c){null==c&&(c={});const f={},e={},g={},k=this.vertex.link("main"),l=this.fragment.link("main");for(const r of[k,l]){for(const v in r.uniforms)f[v]=r.uniforms[v];for(const v in r.varyings)e[v]=r.varyings[v];for(const v in r.attributes)g[v]=r.attributes[v]}c.vertexShader=
k.code;c.vertexGraph=k.graph;c.fragmentShader=l.code;c.fragmentGraph=l.graph;c.attributes=g;c.uniforms=f;c.varyings=e;c.inspect=()=>q.inspect("Vertex Shader",k,"Fragment Shader",l.graph);return c}inspect(){return q.inspect("Vertex Shader",this.vertex,"Fragment Shader",this.fragment.graph)}}p.Material=m};
shadow$provide[493]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.library=void 0;p.library=function(u,q,m){let c=null,f={};null!=q&&("function"===typeof q?c=g=>m(u,g,q(g)):"object"===typeof q&&(c=function(g){if(null==q[g])throw Error(`Unknown snippet \`${g}\``);return m(u,g,q[g])}));var e=g=>m(u,"",g);if(null==c)return e;e=function(g){if(g.match(/[{;]/))return m(u,"",g);f[g]=!0;return c(g)};e.used=function(g){null==g&&(g=f);return f=g};return e}};
shadow$provide[494]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.queue=void 0;p.queue=function(u){null==u&&(u=100);const q={};let m=null,c=null,f=0;const e=function(k){k.prev=null;k.next=m;null!=m&&(m.prev=k);m=k;if(null==c)return c=k},g=function(k){const {prev:l}=k,{next:r}=k;null!=l&&(l.next=r);null!=r&&(r.prev=l);m===k&&(m=r);if(c===k)return c=l};return function(k){let l,r;(r=q[k])&&r!==m?(g(r),e(r)):(f===u?(l=c.key,g(c),delete q[l]):f++,r={next:m,prev:null,key:k},e(r),
q[k]=r);return l}}};
shadow$provide[495]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.cache=void 0;var u=y(494),q=y(488);p.cache=function(m){const c={},f=(0,u.queue)(100);return function(e){const g=32<e.length?"##"+(0,q.hash)(e).toString(16):e,k=f(g);null!=k&&delete c[k];null==c[g]&&(c[g]=m(e));return c[g].clone()}}};
shadow$provide[496]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});var u=y(491);Object.keys(u).forEach(function(g){"default"!==g&&"__esModule"!==g&&(g in p&&p[g]===u[g]||Object.defineProperty(p,g,{enumerable:!0,get:function(){return u[g]}}))});var q=y(492);Object.keys(q).forEach(function(g){"default"!==g&&"__esModule"!==g&&(g in p&&p[g]===q[g]||Object.defineProperty(p,g,{enumerable:!0,get:function(){return q[g]}}))});var m=y(493);Object.keys(m).forEach(function(g){"default"!==
g&&"__esModule"!==g&&(g in p&&p[g]===m[g]||Object.defineProperty(p,g,{enumerable:!0,get:function(){return m[g]}}))});var c=y(495);Object.keys(c).forEach(function(g){"default"!==g&&"__esModule"!==g&&(g in p&&p[g]===c[g]||Object.defineProperty(p,g,{enumerable:!0,get:function(){return c[g]}}))});var f=y(494);Object.keys(f).forEach(function(g){"default"!==g&&"__esModule"!==g&&(g in p&&p[g]===f[g]||Object.defineProperty(p,g,{enumerable:!0,get:function(){return f[g]}}))});var e=y(488);Object.keys(e).forEach(function(g){"default"!==
g&&"__esModule"!==g&&(g in p&&p[g]===e[g]||Object.defineProperty(p,g,{enumerable:!0,get:function(){return e[g]}}))})};
shadow$provide[497]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.compile=void 0;p.compile=function(q){const {code:m,signatures:c}=q;q={};q[c.main.name]=!0;for(var f of["external","internal","varying","uniform","attribute"])for(const e of c[f])q[e.name]=!0;f=u(m,q);return[c,f]};const u=function(q,m){let c;const f=new RegExp("\\b("+(()=>{const e=[];for(c in m)e.push(c);return e})().join("|")+")\\b","g");q=q.replace(/\/\/[^\n]*/g,"");q=q.replace(/\/\*([^*]|\*[^/])*\*\//g,"");
return function(e,g,k){let l;null==e&&(e="");null==g&&(g={});null==k&&(k={});const r={};for(l in m)r[l]=null!=g[l]?l:e+l;e=q.replace(f,v=>r[v]);g=(()=>{const v=[];for(l in k)v.push(`#define ${l} ${k[l]}`);return v})();g.length&&g.push("");return g.join("\n")+e}}};
shadow$provide[498]=function(D,y,Q,p){Q.exports="precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int uint void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")};
shadow$provide[499]=function(D,y,Q,p){Q.exports="\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")};
shadow$provide[500]=function(D,y,Q,p){Q.exports="abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")};
shadow$provide[501]=function(D,y,Q,p){D=y(498);Q.exports=D.slice().concat("layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray".split(" "))};
shadow$provide[502]=function(D,y,Q,p){D=y(500);D=D.slice().filter(function(u){return!/^(gl_|texture)/.test(u)});Q.exports=D.concat("gl_VertexID gl_InstanceID gl_Position gl_PointSize gl_FragCoord gl_FrontFacing gl_FragDepth gl_PointCoord gl_MaxVertexAttribs gl_MaxVertexUniformVectors gl_MaxVertexOutputVectors gl_MaxFragmentInputVectors gl_MaxVertexTextureImageUnits gl_MaxCombinedTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformVectors gl_MaxDrawBuffers gl_MinProgramTexelOffset gl_MaxProgramTexelOffset gl_DepthRangeParameters gl_DepthRange trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" "))};
shadow$provide[503]=function(D,y,Q,p){Q.exports=function(Y){function fa(Mb){Mb.length&&Xa.push({type:J[Ta],data:Mb,position:Gb,line:Ob,column:Db})}function Z(){Wa=Wa.length?[]:Wa;if("/"===Ra&&"*"===na)return Gb=pa+O-1,Ta=k,Ra=na,O+1;if("/"===Ra&&"/"===na)return Gb=pa+O-1,Ta=l,Ra=na,O+1;if("#"===na)return Ta=r,Gb=pa+O,O;if(/\s/.test(na))return Ta=L,Gb=pa+O,O;ec=/\d/.test(na);ob=/[^\w_]/.test(na);Gb=pa+O;Ta=ec?w:ob?v:g;return O}function da(){if(("\r"===na||"\n"===na)&&"\\"!==Ra)return fa(Wa.join("")),
Ta=e,O;Wa.push(na);Ra=na;return O+1}function la(){if("."===Ra&&/\d/.test(na))return Ta=z,O;if("/"===Ra&&"*"===na)return Ta=k,O;if("/"===Ra&&"/"===na)return Ta=l,O;if("."===na&&Wa.length){for(;W(Wa););Ta=z;return O}if(";"===na||")"===na||"("===na){if(Wa.length)for(;W(Wa););fa(na);Ta=e;return O+1}var Mb=2===Wa.length&&"\x3d"!==na;if(/[\w_\d\s]/.test(na)||Mb){for(;W(Wa););Ta=e;return O}Wa.push(na);Ra=na;return O+1}function W(Mb){var yc=0;do{var xa=q.indexOf(Mb.slice(0,Mb.length+yc).join(""));var jb=
q[xa];if(-1===xa){if(0<yc--+Mb.length)continue;jb=Mb.slice(0,1).join("")}fa(jb);Gb+=jb.length;Wa=Wa.slice(jb.length);return Wa.length}while(1)}function ra(){if("."===na||/[eE]/.test(na))return Wa.push(na),Ta=z,Ra=na,O+1;if("x"===na&&1===Wa.length&&"0"===Wa[0])return Ta=R,Wa.push(na),Ra=na,O+1;if(/[^\d]/.test(na))return fa(Wa.join("")),Ta=e,O;Wa.push(na);Ra=na;return O+1}function za(){"f"===na&&(Wa.push(na),Ra=na,O+=1);if(/[eE]/.test(na)||("-"===na||"+"===na)&&/[eE]/.test(Ra))return Wa.push(na),Ra=
na,O+1;if(/[^\d]/.test(na))return fa(Wa.join("")),Ta=e,O;Wa.push(na);Ra=na;return O+1}var O=0,pa=0,Ta=e,na,Ra,Wa=[],Xa=[],Ob=1,Db=0,Gb=0,ec=!1,ob=!1,Sb="",Pb;Y=Y||{};var bc=m,pc=u;"300 es"===Y.version&&(bc=f,pc=c);var Eb={},hb={};for(O=0;O<bc.length;O++)Eb[bc[O]]=!0;for(O=0;O<pc.length;O++)hb[pc[O]]=!0;return function(Mb){Xa=[];if(null!==Mb){O=0;Mb.toString&&(Mb=Mb.toString());Sb+=Mb.replace(/\r\n/g,"\n");for(Pb=Sb.length;na=Sb[O],O<Pb;){Mb=O;switch(Ta){case k:"/"===na&&"*"===Ra?(Wa.push(na),fa(Wa.join("")),
Ta=e):(Wa.push(na),Ra=na);O+=1;break;case l:O=da();break;case r:O=da();break;case v:O=la();break;case w:O=ra();break;case R:/[^a-fA-F0-9]/.test(na)?(fa(Wa.join("")),Ta=e):(Wa.push(na),Ra=na,O+=1);break;case z:O=za();break;case g:if(/[^\d\w_]/.test(na)){var yc=Wa.join("");Ta=hb[yc]?F:Eb[yc]?H:A;fa(Wa.join(""));Ta=e}else Wa.push(na),Ra=na,O+=1;break;case L:/[^\s]/g.test(na)?(fa(Wa.join("")),Ta=e):(Wa.push(na),Ra=na,O+=1);break;case e:O=Z()}if(Mb!==O)switch(Sb[Mb]){case "\n":Db=0;++Ob;break;default:++Db}}pa+=
O;Sb=Sb.slice(O);return Xa}Wa.length&&fa(Wa.join(""));Ta=N;fa("(eof)");return Xa}};var u=y(498),q=y(499),m=y(500),c=y(501),f=y(502),e=999,g=9999,k=0,l=1,r=2,v=3,w=4,z=5,A=6,H=7,F=8,L=9,N=10,R=11,J="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ")};
shadow$provide[504]=function(D,y,Q,p){var u=y(503);Q.exports=function(q,m){m=u(m);var c=[];c=c.concat(m(q));return c=c.concat(m(null))}};
shadow$provide[505]=function(D,y,Q,p){function u(){return this}function q(L,N){let R=F[L];N=N||0;R?N>R.lbp&&(R.lbp=N):(R=Object.create(H),R.id=L,R.lbp=N,F[L]=R);return R}function m(L){let N,R=w;l();for(N=R.nud();L<w.lbp;)R=w,l(),N=R.led(N);return N}function c(L,N,R){q(L,N).led=R||function(J){this.children=[J,m(N)];this.type="binary";return this}}function f(L,N,R){L=q(L,N);L.led=R||function(J){this.children=[J,m(N-1)];this.type="binary";return this};return L}function e(L,N){L=q(L);L.nud=N||function(){this.children=
[m(70)];this.type="unary";return this};return L}function g(L){q(L,150).led=function(N){this.children=[N];this.type="suffix";return this}}function k(L){return f(L,10,function(N){this.children=[N,m(9)];this.assignment=!0;this.type="assign";return this})}function l(L){let N,R,J;if(L&&w.data!==L)return v.unexpected("expected `"+L+"`, got `"+w.data+"`");if(A>=z.length)w=F["(end)"];else{L=z[A++];N=L.data;R=L.type;if("ident"===R)J=v.scope.find(N)||v.create_node(),R=J.type;else if("builtin"===R)J=F["(builtin)"];
else if("keyword"===R)J=F["(keyword)"];else if("operator"===R){if(J=F[N],!J)return v.unexpected("unknown operator `"+N+"`")}else if("float"===R||"integer"===R)R="literal",J=F["(literal)"];else return v.unexpected("unexpected token.");J&&(J.nud||(J.nud=u),J.children||(J.children=[]));J=Object.create(J);J.token=L;J.type=R;J.data||(J.data=N);return w=J}}function r(L){return function(){return v.unexpected(L)}}let v,w,z,A;const H={nud:function(){return this.children&&this.children.length?this:r("unexpected")()},
led:r("missing operator")},F={};q("(ident)").nud=u;q("(keyword)").nud=u;q("(builtin)").nud=u;q("(literal)").nud=u;q("(end)");q(":");q(";");q(",");q(")");q("]");q("}");f("\x26\x26",30);f("||",30);c("|",43);c("^",44);c("\x26",45);c("\x3d\x3d",46);c("!\x3d",46);c("\x3c",47);c("\x3c\x3d",47);c("\x3e",47);c("\x3e\x3d",47);c("\x3e\x3e",48);c("\x3c\x3c",48);c("+",50);c("-",50);c("*",60);c("/",60);c("%",60);c("?",20,function(L){this.children=[L,m(0),(l(":"),m(0))];this.type="ternary";return this});c(".",
80,function(L){w.type="literal";v.fake(w);this.children=[L,w];l();return this});c("[",80,function(L){this.children=[L,m(0)];this.type="binary";l("]");return this});c("(",80,function(L){this.children=[L];this.type="call";if(")"!==w.data)for(;;){this.children.push(m(0));if(","!==w.data)break;l(",")}l(")");return this});e("-");e("+");e("!");e("~");e("defined");e("(",function(){this.type="group";this.children=[m(0)];l(")");return this});e("++");e("--");g("++");g("--");k("\x3d");k("+\x3d");k("-\x3d");
k("*\x3d");k("/\x3d");k("%\x3d");k("\x26\x3d");k("|\x3d");k("^\x3d");k("\x3e\x3e\x3d");k("\x3c\x3c\x3d");Q.exports=function(L,N){function R(J){v.unshift(J,!1);for(let Y=0,fa=J.children.length;Y<fa;++Y)R(J.children[Y]);v.shift()}v=L;z=N;A=0;if(z.length){l();L=m(0);L.parent=v[0];R(L);if(A<z.length)throw Error("did not use all tokens");L.parent.children=[L]}}};
shadow$provide[506]=function(D,y,Q,p){function u(q){if(this.constructor!==u)return new u(q);this.state=q;this.scopes=[];this.current=null}Q.exports=u;D=u.prototype;D.enter=function(q){this.scopes.push(this.current=this.state[0].scope=q||{})};D.exit=function(){this.scopes.pop();this.current=this.scopes[this.scopes.length-1]};D.define=function(q){this.current[q]=this.state[0]};D.find=function(q,m){for(m=this.scopes.length-1;-1<m;--m)if(this.scopes[m].hasOwnProperty(q))return this.scopes[m][q];return null}};
shadow$provide[507]=function(D,y,Q,p){function u(O,pa){return{mode:O,token:pa,children:[],type:za[O],id:(4294967295*Math.random()).toString(16)}}Q.exports=function(){function O(Ua){if(null===Ua)return Ta(),Ec;pd=[];pa(Ua);return pd}function pa(Ua){if("whitespace"===Ua.type||"line-comment"===Ua.type||"block-comment"===Ua.type)Mc.push(Ua);else for(Zb.push(Ua),(ab=ab||Zb[0])&&Mc.length&&(ab.preceding=ab.preceding||[],ab.preceding=ab.preceding.concat(Mc),Mc=[]);cd||!Ja.length?0:ab=Zb[0];)switch(Ja[0].mode){case e:Ra();
break;case g:na();break;case v:Wa();break;case w:Xa();break;case F:Ob();break;case k:hd(!0,!0);break;case L:zd();break;case f:"ident"!==ab.type&&"builtin"!==ab.type?Pb("expected user-defined name, got "+ab.data):(Ja[0].data=ab.data,Ja.shift(),Zb.shift());break;case N:"keyword"!==ab.type?Pb("expected keyword, got "+ab.data):(Ja.shift(),Zb.shift());break;case R:"keyword"===ab.type?(Ja[0].type="keyword",Ja[0].mode=N):"ident"===ab.type?(Ja[0].type="ident",Ja[0].mode=f):Pb("expected keyword or user-defined name, got "+
ab.data);break;case l:Ld();break;case r:Md();break;case z:bd();break;case A:Vb();break;case da:Xb();break;case J:td();break;case H:md();break;case W:Yb()}}function Ta(Ua){arguments.length&&pa(Ua);1<Ja.length&&Pb("unexpected EOF")}function na(){return Eb(function(){Ja.scope.enter();return c},function(){if(ab.data===Ja[0].expecting)return Ja.scope.exit(),Ja.shift();switch(ab.type){case "preprocessor":Ja.fake(u(ra[ab.type],ab,xc));Zb.shift();break;default:Ja.unshift(fc())}})()}function Ra(){if(Ja[0].brace){if("}"!==
ab.data)return Pb("expected `}`, got "+ab.data);Ja[0].brace=!1;return Zb.shift(),Ja.shift()}switch(ab.type){case "eof":return od&&(cd=!0),od=!0,Ja.shift();case "keyword":switch(ab.data){case "for":return Ja.unshift(nd());case "if":return Ja.unshift(Kd());case "while":return Ja.unshift(Uc());case "do":return Ja.unshift(Ad());case "break":return Ja.fake(u(Y,ab)),Zb.shift();case "continue":return Ja.fake(u(fa,ab)),Zb.shift();case "discard":return Ja.fake(u(Z,ab)),Zb.shift();case "return":return Ja.unshift(Vc());
case "precision":return Ja.unshift(vb())}return Ja.unshift(Gb(255));case "ident":var Ua;if(Ua=Ja.scope.find(ab.data))return"struct"===Ua.parent.type?Ja.unshift(Gb(255)):Ja.unshift(ob(";"));case "operator":if("{"===ab.data)return Ja[0].brace=!0,Ua=Ub(),Ua.expecting="}",Zb.shift(),Ja.unshift(Ua);if(";"===ab.data)return Zb.shift(),Ja.shift();default:return Ja.unshift(ob(";"))}}function Wa(){const Ua=Ja[0];return Eb(function(){if("invariant"===ab.data)return Ua.flags&8?(Ja.unshift(Sb()),c):Pb("`invariant` is not allowed here");
Ja.fake(u(la,{data:"",position:ab.position}));return c},function(){if("const"===ab.data||"attribute"===ab.data||"uniform"===ab.data||"varying"===ab.data)return Ua.flags&16?(Ja.unshift(Sb()),c):Pb("storage is not allowed here");Ja.fake(u(la,{data:"",position:ab.position}));return c},function(){if("in"===ab.data||"inout"===ab.data||"out"===ab.data){if(Ua.flags&32)return Pb("parameter is not allowed here");Ja.unshift(Sb());return c}Ja.fake(u(la,{data:"",position:ab.position}));return c},function(){"highp"===
ab.data||"mediump"===ab.data||"lowp"===ab.data?Ja.unshift(Sb()):Ja.fake(u(la,{data:"",position:ab.position}));return c},function(){if("struct"===ab.data){if(!(Ua.flags&64))return Pb("cannot nest structs");Ja.unshift(ec());return c}if("keyword"===ab.type)return Ja.unshift(Sb()),c;const Jb=Ja.scope.find(ab.data);return Jb?(Ja.fake(Object.create(Jb)),Zb.shift(),c):Pb("expected user defined type, struct or keyword, got "+ab.data)},function(){if(","===ab.data&&!(Ua.flags&2))return Ja.shift();if("["===
ab.data)Ja.unshift(Jd());else{if(")"===ab.data)return Ja.shift();if(";"===ab.data)return Ua.stage+3;if("ident"!==ab.type&&"builtin"!==ab.type)return Pb("expected identifier, got "+ab.data);Ua.collected_name=Zb.shift();return c}},function(){return"("===ab.data?(Zb.unshift(Ua.collected_name),delete Ua.collected_name,Ja.unshift(Ic()),Ua.stage+2):c},function(){Zb.unshift(Ua.collected_name);delete Ua.collected_name;Ja.unshift(Fa());return c},function(){return Ja.shift()})()}function Xa(){if("ident"===
ab.type||"builtin"===ab.type){const Ua=ab.data;Ja.unshift(Wb());Ja.scope.define(Ua)}else{if("operator"===ab.type){if(","===ab.data)return Ja[1].flags&2?Zb.shift():Ja.shift();if("\x3d"===ab.data){if(!(Ja[1].flags&1))return Pb("`\x3d` is not allowed here.");Zb.shift();Ja.unshift(ob(",",";"));return}if("["===ab.data){Ja.unshift(Jd());return}}return Ja.shift()}}function Ob(){const Ua=Ja[0].expecting;Ja[0].tokens=Ja[0].tokens||[];void 0===Ja[0].parenlevel&&(Ja[0].parenlevel=0,Ja[0].bracelevel=0);if(1>
Ja[0].parenlevel&&-1<Ua.indexOf(ab.data)){try{q(Ja,Ja[0].tokens)}catch(Jb){throw cd=!0,Jb;}return Ja.shift()}"("===ab.data?++Ja[0].parenlevel:")"===ab.data&&--Ja[0].parenlevel;switch(ab.data){case "{":++Ja[0].bracelevel;break;case "}":--Ja[0].bracelevel;break;case "(":++Ja[0].parenlevel;break;case ")":--Ja[0].parenlevel}if(0>Ja[0].parenlevel)return Pb("unexpected `)`");if(0>Ja[0].bracelevel)return Pb("unexpected `}`");Ja[0].tokens.push(Zb.shift())}function Db(Ua){return function(){return u(Ua,ab)}}
function Gb(Ua){const Jb=u(v,ab,xc);Jb.flags=Ua;return Jb}function ec(Ua,Jb){const Ac=u(k,ab,xc);Ac.allow_assign=void 0===Ua?!0:Ua;Ac.allow_comma=void 0===Jb?!0:Jb;return Ac}function ob(){const Ua=u(F,ab,xc);Ua.expecting=[].slice.call(arguments);return Ua}function Sb(Ua){let Jb=ab;Ua&&(Jb={type:"(implied)",data:"(default)",position:Jb.position});return u(N,Jb,xc)}function Pb(Ua){cd=!0;throw Error((Ua||"unexpected "+Ja)+" at line "+Ja[0].token.line);}function bc(Ua,Jb){return 1,pc(Ua,ab.type)&&pc(Jb,
ab.data)}function pc(Ua,Jb){switch(typeof Ua){case "string":return Jb!==Ua&&Pb("expected `"+Ua+"`, got "+Jb+"\n"+ab.data),!cd;case "object":return Ua&&-1===Ua.indexOf(Jb)&&Pb("expected one of `"+Ua.join("`, `")+"`, got "+Jb),!cd}return!0}function Eb(){let Ua=[].slice.call(arguments),Jb,Ac;return function(){const Jc=Ja[0];Jc.stage||(Jc.stage=0);Jb=Ua[Jc.stage];if(!Jb)return Pb("parser in undefined state!");Ac=Jb();if(Ac===c)return++Jc.stage;void 0!==Ac&&(Jc.stage=Ac)}}function hb(Ua,Jb){Jb=Jb||"operator";
return function(){if(bc(Jb,Ua)){var Ac=Zb.shift(),Jc=Ja[0].children;(Jc=Jc[Jc.length-1])&&Jc.token&&Ac.preceding&&(Jc.token.succeeding=Jc.token.succeeding||[],Jc.token.succeeding=Jc.token.succeeding.concat(Ac.preceding));return c}}}function Mb(Ua){return function(){Ja.unshift(ob(Ua));return c}}function yc(Ua){return Ua?function(){const Jb=ab.data;return bc("ident")&&(Ja.unshift(Wb()),Ja.scope.define(Jb),c)}:function(){if(bc("ident"))return Object.create(Ja.scope.find(ab.data)).token=ab,Zb.shift(),
c}}function xa(){return function(){const Ua=Ub();Ua.expecting="}";return Ja.unshift(Ua),c}}function jb(Ua){return function(){const Jb=Ja[0].stage;return"{"!==ab.data?(Ja.unshift(fc()),Jb+Ua):(Zb.shift(),c)}}function cb(){return function(){return Ja.shift(),Ja.shift()}}const Ub=Db(g),fc=Db(e),Fa=Db(w),vb=Db(L),Wb=Db(f);Db(R);const Ic=Db(l),Cc=Db(r),nd=Db(z),Kd=Db(H),Uc=Db(A),Vc=Db(J),Ad=Db(da),Jd=Db(W);let hd,zd,Yb,bd,md,td,Vb,Xb,Ld,Md,Bd=arguments.length?[].slice.call(arguments):[],od=!1,Ja=[],pd=
[],Zb=[],Mc=[],cd=!1,Ec,ab,xc;Ja.shift=function(){let Ua=[].shift.call(this),Jb=Bd[this.length],Ac=!1;Bd.length?"function"===typeof Bd[0]?Ac=Bd[0](Ua):void 0!==Jb&&(Ac=Jb.test?Jb.test(Ua.type):Jb===Ua.type):Ac=!0;Ac&&!cd&&pd.push(Ua);xc=Ua.parent;return Ua};Ja.unshift=function(Ua,Jb){Ua.parent=Ja[0];const Ac=[].unshift.call(this,Ua);(void 0===Jb||Jb)&&xc!==Ua&&xc.children.push(Ua);xc=Ua;return Ac};Ja.fake=function(Ua){Ja.unshift(Ua);Ja.shift()};Ja.unexpected=Pb;Ja.scope=new m(Ja);Ja.create_node=function(){const Ua=
u(f,ab);Ua.parent=O.program;return Ua};(function(){hd=Eb(hb("struct","keyword"),function(){return"{"===ab.data?(Ja.fake(u(f,{data:"",position:ab.position,type:"ident"})),c):yc(!0)()},function(){Ja.scope.enter();return c},hb("{"),function(){if("preprocessor"===ab.type)Ja.fake(u(ra[ab.type],ab,xc)),Zb.shift();else{if("}"===ab.data)return Ja.scope.exit(),Zb.shift(),Ja.shift();";"===ab.data?Zb.shift():Ja.unshift(Gb(166))}});zd=Eb(function(){return Zb.shift(),c},function(){return bc("keyword",["lowp",
"mediump","highp"])&&(Ja.unshift(Sb()),c)},function(){return Ja.unshift(Sb()),c},function(){return Ja.shift()});Yb=Eb(hb("["),Mb("]"),hb("]"),function(){return Ja.shift()});bd=Eb(hb("for","keyword"),hb("("),function(){let Ua;if("ident"===ab.type){if((Ua=Ja.scope.find(ab.data))||(Ua=Ja.create_node()),"struct"===Ua.parent.type)return Ja.unshift(Gb(255)),c}else if("builtin"===ab.type||"keyword"===ab.type)return Ja.unshift(Gb(255)),c;return Mb(";")()},hb(";"),Mb(";"),hb(";"),Mb(")"),hb(")"),jb(3),xa(),
hb("}"),cb());md=Eb(hb("if","keyword"),hb("("),Mb(")"),hb(")"),jb(3),xa(),hb("}"),function(){return"else"===ab.data?(Zb.shift(),Ja.unshift(fc()),c):cb()()},cb());td=Eb(hb("return","keyword"),function(){return";"===ab.data?c:(Ja.unshift(ob(";")),c)},function(){Zb.shift();cb()()});Vb=Eb(hb("while","keyword"),hb("("),Mb(")"),hb(")"),jb(3),xa(),hb("}"),cb());Xb=Eb(hb("do","keyword"),jb(3),xa(),hb("}"),hb("while","keyword"),hb("("),Mb(")"),hb(")"),cb());Ld=Eb(function(){for(let Ua=1,Jb=Ja.length;Ua<Jb;++Ua)if(Ja[Ua].mode===
l)return Pb("function definition is not allowed within another function");return c},function(){if(bc("ident")){var Ua=ab.data,Jb=Ja.scope.find(Ua);Ja.unshift(Wb());Ja.scope.define(Ua);Ja.scope.enter(Jb?Jb.scope:null);return c}},hb("("),function(){return Ja.unshift(Cc()),c},hb(")"),function(){return";"===ab.data?(Ja.scope.exit(),Ja.shift(),Ja.shift()):c},hb("{"),xa(),hb("}"),function(){Ja.scope.exit();return c},function(){return Ja.shift(),Ja.shift(),Ja.shift()});Md=Eb(function(){if("void"===ab.data)return Ja.fake(Sb()),
Zb.shift(),c;if(")"===ab.data)Ja.shift();else{if("struct"===ab.data)return Ja.unshift(ec(!1,!1)),c;Ja.unshift(Gb(208));return c}},function(){if(","===ab.data)return Zb.shift(),0;")"===ab.data?Ja.shift():Pb("expected one of `,` or `)`, got "+ab.data)})})();xc=Ub();xc.expecting="(eof)";xc.mode=g;xc.token={type:"(program)",data:"(program)"};Ec=xc;O.program=Ec;O.scope=function(Ua){1===arguments.length&&(Ja.scope=Ua);return Ja.scope};Ja.unshift(xc);return O};const q=y(505),m=y(506),c={};D=0;let f=D++,
e=D++,g=D++,k=D++,l=D++,r=D++,v=D++,w=D++,z=D++,A=D++,H=D++,F=D++,L=D++;y=D++;Q=D++;let N=D++,R=D++,J=D++,Y=D++,fa=D++,Z=D++,da=D++,la=D++,W=D++;const ra={"block-comment":y,"line-comment":y,preprocessor:Q},za=D="ident stmt stmtlist struct function functionargs decl decllist forloop whileloop if expr precision comment preprocessor keyword keyword_or_ident return break continue discard do-while placeholder quantifier".split(" ")};
shadow$provide[508]=function(D,y,Q,p){var u=y(507);Q.exports=function(q){for(var m=u(),c=0;c<q.length;c++)m(q[c]);return m(null)}};
shadow$provide[509]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Vector2=void 0;class u{constructor(q=0,m=0){u.prototype.isVector2=!0;this.x=q;this.y=m}get width(){return this.x}set width(q){this.x=q}get height(){return this.y}set height(q){this.y=q}set(q,m){this.x=q;this.y=m;return this}setScalar(q){this.y=this.x=q;return this}setX(q){this.x=q;return this}setY(q){this.y=q;return this}setComponent(q,m){switch(q){case 0:this.x=m;break;case 1:this.y=m;break;default:throw Error("index is out of range: "+
q);}return this}getComponent(q){switch(q){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+q);}}clone(){return new this.constructor(this.x,this.y)}copy(q){this.x=q.x;this.y=q.y;return this}add(q){this.x+=q.x;this.y+=q.y;return this}addScalar(q){this.x+=q;this.y+=q;return this}addVectors(q,m){this.x=q.x+m.x;this.y=q.y+m.y;return this}addScaledVector(q,m){this.x+=q.x*m;this.y+=q.y*m;return this}sub(q){this.x-=q.x;this.y-=q.y;return this}subScalar(q){this.x-=q;
this.y-=q;return this}subVectors(q,m){this.x=q.x-m.x;this.y=q.y-m.y;return this}multiply(q){this.x*=q.x;this.y*=q.y;return this}multiplyScalar(q){this.x*=q;this.y*=q;return this}divide(q){this.x/=q.x;this.y/=q.y;return this}divideScalar(q){return this.multiplyScalar(1/q)}applyMatrix3(q){const m=this.x,c=this.y;q=q.elements;this.x=q[0]*m+q[3]*c+q[6];this.y=q[1]*m+q[4]*c+q[7];return this}min(q){this.x=Math.min(this.x,q.x);this.y=Math.min(this.y,q.y);return this}max(q){this.x=Math.max(this.x,q.x);this.y=
Math.max(this.y,q.y);return this}clamp(q,m){this.x=Math.max(q.x,Math.min(m.x,this.x));this.y=Math.max(q.y,Math.min(m.y,this.y));return this}clampScalar(q,m){this.x=Math.max(q,Math.min(m,this.x));this.y=Math.max(q,Math.min(m,this.y));return this}clampLength(q,m){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(q,Math.min(m,c)))}floor(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this}ceil(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this}round(){this.x=
Math.round(this.x);this.y=Math.round(this.y);return this}roundToZero(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this}negate(){this.x=-this.x;this.y=-this.y;return this}dot(q){return this.x*q.x+this.y*q.y}cross(q){return this.x*q.y-this.y*q.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||
1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(q){return Math.sqrt(this.distanceToSquared(q))}distanceToSquared(q){const m=this.x-q.x;q=this.y-q.y;return m*m+q*q}manhattanDistanceTo(q){return Math.abs(this.x-q.x)+Math.abs(this.y-q.y)}setLength(q){return this.normalize().multiplyScalar(q)}lerp(q,m){this.x+=(q.x-this.x)*m;this.y+=(q.y-this.y)*m;return this}lerpVectors(q,m,c){this.x=q.x+(m.x-q.x)*c;this.y=q.y+(m.y-q.y)*c;return this}equals(q){return q.x===this.x&&q.y===this.y}fromArray(q,
m=0){this.x=q[m];this.y=q[m+1];return this}toArray(q=[],m=0){q[m]=this.x;q[m+1]=this.y;return q}fromBufferAttribute(q,m){this.x=q.getX(m);this.y=q.getY(m);return this}rotateAround(q,m){const c=Math.cos(m);m=Math.sin(m);const f=this.x-q.x,e=this.y-q.y;this.x=f*c-e*m+q.x;this.y=f*m+e*c+q.y;return this}random(){this.x=Math.random();this.y=Math.random();return this}*[Symbol.iterator](){yield this.x;yield this.y}}p.Vector2=u};
shadow$provide[510]=function(D,y,Q,p){function u(){const ra=4294967295*Math.random()|0,za=4294967295*Math.random()|0,O=4294967295*Math.random()|0,pa=4294967295*Math.random()|0;return(Z[ra&255]+Z[ra>>8&255]+Z[ra>>16&255]+Z[ra>>24&255]+"-"+Z[za&255]+Z[za>>8&255]+"-"+Z[za>>16&15|64]+Z[za>>24&255]+"-"+Z[O&63|128]+Z[O>>8&255]+"-"+Z[O>>16&255]+Z[O>>24&255]+Z[pa&255]+Z[pa>>8&255]+Z[pa>>16&255]+Z[pa>>24&255]).toLowerCase()}function q(ra,za,O){return Math.max(za,Math.min(O,ra))}function m(ra,za){return(ra%
za+za)%za}function c(ra,za,O,pa,Ta){return pa+(ra-za)*(Ta-pa)/(O-za)}function f(ra,za,O){return ra!==za?(O-ra)/(za-ra):0}function e(ra,za,O){return(1-O)*ra+O*za}function g(ra,za,O,pa){return e(ra,za,1-Math.exp(-O*pa))}function k(ra,za=1){return za-Math.abs(m(ra,2*za)-za)}function l(ra,za,O){if(ra<=za)return 0;if(ra>=O)return 1;ra=(ra-za)/(O-za);return ra*ra*(3-2*ra)}function r(ra,za,O){if(ra<=za)return 0;if(ra>=O)return 1;ra=(ra-za)/(O-za);return ra*ra*ra*(ra*(6*ra-15)+10)}function v(ra,za){return ra+
Math.floor(Math.random()*(za-ra+1))}function w(ra,za){return ra+Math.random()*(za-ra)}function z(ra){return ra*(.5-Math.random())}function A(ra){void 0!==ra&&(da=ra);ra=da+=1831565813;ra=Math.imul(ra^ra>>>15,ra|1);ra^=ra+Math.imul(ra^ra>>>7,ra|61);return((ra^ra>>>14)>>>0)/4294967296}function H(ra){return ra*la}function F(ra){return ra*W}function L(ra){return 0===(ra&ra-1)&&0!==ra}function N(ra){return Math.pow(2,Math.ceil(Math.log(ra)/Math.LN2))}function R(ra){return Math.pow(2,Math.floor(Math.log(ra)/
Math.LN2))}function J(ra,za,O,pa,Ta){var na=Math.cos;const Ra=Math.sin,Wa=na(O/2);O=Ra(O/2);const Xa=na((za+pa)/2),Ob=Ra((za+pa)/2),Db=na((za-pa)/2),Gb=Ra((za-pa)/2);na=na((pa-za)/2);za=Ra((pa-za)/2);switch(Ta){case "XYX":ra.set(Wa*Ob,O*Db,O*Gb,Wa*Xa);break;case "YZY":ra.set(O*Gb,Wa*Ob,O*Db,Wa*Xa);break;case "ZXZ":ra.set(O*Db,O*Gb,Wa*Ob,Wa*Xa);break;case "XZX":ra.set(Wa*Ob,O*za,O*na,Wa*Xa);break;case "YXY":ra.set(O*na,Wa*Ob,O*za,Wa*Xa);break;case "ZYZ":ra.set(O*za,O*na,Wa*Ob,Wa*Xa);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+
Ta)}}function Y(ra,za){switch(za.constructor){case Float32Array:return ra;case Uint16Array:return ra/65535;case Uint8Array:return ra/255;case Int16Array:return Math.max(ra/32767,-1);case Int8Array:return Math.max(ra/127,-1);default:throw Error("Invalid component type.");}}function fa(ra,za){switch(za.constructor){case Float32Array:return ra;case Uint16Array:return Math.round(65535*ra);case Uint8Array:return Math.round(255*ra);case Int16Array:return Math.round(32767*ra);case Int8Array:return Math.round(127*
ra);default:throw Error("Invalid component type.");}}Object.defineProperty(p,"__esModule",{value:!0});p.generateUUID=u;p.clamp=q;p.euclideanModulo=m;p.mapLinear=c;p.inverseLerp=f;p.lerp=e;p.damp=g;p.pingpong=k;p.smoothstep=l;p.smootherstep=r;p.randInt=v;p.randFloat=w;p.randFloatSpread=z;p.seededRandom=A;p.degToRad=H;p.radToDeg=F;p.isPowerOfTwo=L;p.ceilPowerOfTwo=N;p.floorPowerOfTwo=R;p.setQuaternionFromProperEuler=J;p.normalize=fa;p.denormalize=Y;p.MathUtils=p.RAD2DEG=p.DEG2RAD=void 0;const Z="00 01 02 03 04 05 06 07 08 09 0a 0b 0c 0d 0e 0f 10 11 12 13 14 15 16 17 18 19 1a 1b 1c 1d 1e 1f 20 21 22 23 24 25 26 27 28 29 2a 2b 2c 2d 2e 2f 30 31 32 33 34 35 36 37 38 39 3a 3b 3c 3d 3e 3f 40 41 42 43 44 45 46 47 48 49 4a 4b 4c 4d 4e 4f 50 51 52 53 54 55 56 57 58 59 5a 5b 5c 5d 5e 5f 60 61 62 63 64 65 66 67 68 69 6a 6b 6c 6d 6e 6f 70 71 72 73 74 75 76 77 78 79 7a 7b 7c 7d 7e 7f 80 81 82 83 84 85 86 87 88 89 8a 8b 8c 8d 8e 8f 90 91 92 93 94 95 96 97 98 99 9a 9b 9c 9d 9e 9f a0 a1 a2 a3 a4 a5 a6 a7 a8 a9 aa ab ac ad ae af b0 b1 b2 b3 b4 b5 b6 b7 b8 b9 ba bb bc bd be bf c0 c1 c2 c3 c4 c5 c6 c7 c8 c9 ca cb cc cd ce cf d0 d1 d2 d3 d4 d5 d6 d7 d8 d9 da db dc dd de df e0 e1 e2 e3 e4 e5 e6 e7 e8 e9 ea eb ec ed ee ef f0 f1 f2 f3 f4 f5 f6 f7 f8 f9 fa fb fc fd fe ff".split(" ");
let da=1234567;const la=Math.PI/180;p.DEG2RAD=la;const W=180/Math.PI;p.RAD2DEG=W;p.MathUtils={DEG2RAD:la,RAD2DEG:W,generateUUID:u,clamp:q,euclideanModulo:m,mapLinear:c,inverseLerp:f,lerp:e,damp:g,pingpong:k,smoothstep:l,smootherstep:r,randInt:v,randFloat:w,randFloatSpread:z,seededRandom:A,degToRad:H,radToDeg:F,isPowerOfTwo:L,ceilPowerOfTwo:N,floorPowerOfTwo:R,setQuaternionFromProperEuler:J,normalize:fa,denormalize:Y}};
shadow$provide[511]=function(D,y,Q,p){function u(c){if("function"!==typeof WeakMap)return null;var f=new WeakMap,e=new WeakMap;return(u=function(g){return g?e:f})(c)}Object.defineProperty(p,"__esModule",{value:!0});p.Quaternion=void 0;var q=function(c,f){if(!f&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((f=u(f))&&f.has(c))return f.get(c);var e={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var l=g?Object.getOwnPropertyDescriptor(c,k):null;l&&(l.get||l.set)?Object.defineProperty(e,k,l):e[k]=c[k]}e.default=c;f&&f.set(c,e);return e}(y(510));class m{constructor(c=0,f=0,e=0,g=1){this.isQuaternion=!0;this._x=c;this._y=f;this._z=e;this._w=g}static slerpFlat(c,f,e,g,k,l,r){let v=e[g+0],w=e[g+1],z=e[g+2];e=e[g+3];g=k[l+0];const A=k[l+1],H=k[l+2];k=k[l+3];if(0===r)c[f+0]=v,c[f+1]=w,c[f+2]=z,c[f+3]=e;else if(1===r)c[f+0]=g,c[f+1]=A,c[f+2]=H,c[f+3]=k;else{if(e!==k||v!==g||w!==A||z!==H){l=1-
r;var F=v*g+w*A+z*H+e*k,L=0<=F?1:-1,N=1-F*F;N>Number.EPSILON&&(N=Math.sqrt(N),F=Math.atan2(N,F*L),l=Math.sin(l*F)/N,r=Math.sin(r*F)/N);L*=r;v=v*l+g*L;w=w*l+A*L;z=z*l+H*L;e=e*l+k*L;l===1-r&&(r=1/Math.sqrt(v*v+w*w+z*z+e*e),v*=r,w*=r,z*=r,e*=r)}c[f]=v;c[f+1]=w;c[f+2]=z;c[f+3]=e}}static multiplyQuaternionsFlat(c,f,e,g,k,l){const r=e[g],v=e[g+1],w=e[g+2];e=e[g+3];g=k[l];const z=k[l+1],A=k[l+2];k=k[l+3];c[f]=r*k+e*g+v*A-w*z;c[f+1]=v*k+e*z+w*g-r*A;c[f+2]=w*k+e*A+r*z-v*g;c[f+3]=e*k-r*g-v*z-w*A;return c}get x(){return this._x}set x(c){this._x=
c;this._onChangeCallback()}get y(){return this._y}set y(c){this._y=c;this._onChangeCallback()}get z(){return this._z}set z(c){this._z=c;this._onChangeCallback()}get w(){return this._w}set w(c){this._w=c;this._onChangeCallback()}set(c,f,e,g){this._x=c;this._y=f;this._z=e;this._w=g;this._onChangeCallback();return this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(c){this._x=c.x;this._y=c.y;this._z=c.z;this._w=c.w;this._onChangeCallback();return this}setFromEuler(c,f){var e=
c._x,g=c._y,k=c._z;c=c._order;var l=Math.cos;const r=Math.sin,v=l(e/2),w=l(g/2);l=l(k/2);e=r(e/2);g=r(g/2);k=r(k/2);switch(c){case "XYZ":this._x=e*w*l+v*g*k;this._y=v*g*l-e*w*k;this._z=v*w*k+e*g*l;this._w=v*w*l-e*g*k;break;case "YXZ":this._x=e*w*l+v*g*k;this._y=v*g*l-e*w*k;this._z=v*w*k-e*g*l;this._w=v*w*l+e*g*k;break;case "ZXY":this._x=e*w*l-v*g*k;this._y=v*g*l+e*w*k;this._z=v*w*k+e*g*l;this._w=v*w*l-e*g*k;break;case "ZYX":this._x=e*w*l-v*g*k;this._y=v*g*l+e*w*k;this._z=v*w*k-e*g*l;this._w=v*w*l+
e*g*k;break;case "YZX":this._x=e*w*l+v*g*k;this._y=v*g*l+e*w*k;this._z=v*w*k-e*g*l;this._w=v*w*l-e*g*k;break;case "XZY":this._x=e*w*l-v*g*k;this._y=v*g*l-e*w*k;this._z=v*w*k+e*g*l;this._w=v*w*l+e*g*k;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+c)}!1!==f&&this._onChangeCallback();return this}setFromAxisAngle(c,f){f/=2;const e=Math.sin(f);this._x=c.x*e;this._y=c.y*e;this._z=c.z*e;this._w=Math.cos(f);this._onChangeCallback();return this}setFromRotationMatrix(c){var f=
c.elements,e=f[0];c=f[4];const g=f[8],k=f[1],l=f[5],r=f[9],v=f[2],w=f[6];f=f[10];const z=e+l+f;0<z?(e=.5/Math.sqrt(z+1),this._w=.25/e,this._x=(w-r)*e,this._y=(g-v)*e,this._z=(k-c)*e):e>l&&e>f?(e=2*Math.sqrt(1+e-l-f),this._w=(w-r)/e,this._x=.25*e,this._y=(c+k)/e,this._z=(g+v)/e):l>f?(e=2*Math.sqrt(1+l-e-f),this._w=(g-v)/e,this._x=(c+k)/e,this._y=.25*e,this._z=(r+w)/e):(e=2*Math.sqrt(1+f-e-l),this._w=(k-c)/e,this._x=(g+v)/e,this._y=(r+w)/e,this._z=.25*e);this._onChangeCallback();return this}setFromUnitVectors(c,
f){let e=c.dot(f)+1;e<Number.EPSILON?(e=0,Math.abs(c.x)>Math.abs(c.z)?(this._x=-c.y,this._y=c.x,this._z=0):(this._x=0,this._y=-c.z,this._z=c.y)):(this._x=c.y*f.z-c.z*f.y,this._y=c.z*f.x-c.x*f.z,this._z=c.x*f.y-c.y*f.x);this._w=e;return this.normalize()}angleTo(c){return 2*Math.acos(Math.abs(q.clamp(this.dot(c),-1,1)))}rotateTowards(c,f){const e=this.angleTo(c);if(0===e)return this;this.slerp(c,Math.min(1,f/e));return this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){this._x*=
-1;this._y*=-1;this._z*=-1;this._onChangeCallback();return this}dot(c){return this._x*c._x+this._y*c._y+this._z*c._z+this._w*c._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let c=this.length();0===c?(this._z=this._y=this._x=0,this._w=1):(c=1/c,this._x*=c,this._y*=c,this._z*=c,this._w*=c);this._onChangeCallback();return this}multiply(c){return this.multiplyQuaternions(this,
c)}premultiply(c){return this.multiplyQuaternions(c,this)}multiplyQuaternions(c,f){const e=c._x,g=c._y,k=c._z;c=c._w;const l=f._x,r=f._y,v=f._z;f=f._w;this._x=e*f+c*l+g*v-k*r;this._y=g*f+c*r+k*l-e*v;this._z=k*f+c*v+e*r-g*l;this._w=c*f-e*l-g*r-k*v;this._onChangeCallback();return this}slerp(c,f){if(0===f)return this;if(1===f)return this.copy(c);const e=this._x,g=this._y,k=this._z,l=this._w;var r=l*c._w+e*c._x+g*c._y+k*c._z;0>r?(this._w=-c._w,this._x=-c._x,this._y=-c._y,this._z=-c._z,r=-r):this.copy(c);
if(1<=r)return this._w=l,this._x=e,this._y=g,this._z=k,this;c=1-r*r;if(c<=Number.EPSILON)return r=1-f,this._w=r*l+f*this._w,this._x=r*e+f*this._x,this._y=r*g+f*this._y,this._z=r*k+f*this._z,this.normalize(),this._onChangeCallback(),this;c=Math.sqrt(c);const v=Math.atan2(c,r);r=Math.sin((1-f)*v)/c;f=Math.sin(f*v)/c;this._w=l*r+this._w*f;this._x=e*r+this._x*f;this._y=g*r+this._y*f;this._z=k*r+this._z*f;this._onChangeCallback();return this}slerpQuaternions(c,f,e){return this.copy(c).slerp(f,e)}random(){var c=
Math.random();const f=Math.sqrt(1-c);c=Math.sqrt(c);const e=2*Math.PI*Math.random(),g=2*Math.PI*Math.random();return this.set(f*Math.cos(e),c*Math.sin(g),c*Math.cos(g),f*Math.sin(e))}equals(c){return c._x===this._x&&c._y===this._y&&c._z===this._z&&c._w===this._w}fromArray(c,f=0){this._x=c[f];this._y=c[f+1];this._z=c[f+2];this._w=c[f+3];this._onChangeCallback();return this}toArray(c=[],f=0){c[f]=this._x;c[f+1]=this._y;c[f+2]=this._z;c[f+3]=this._w;return c}fromBufferAttribute(c,f){this._x=c.getX(f);
this._y=c.getY(f);this._z=c.getZ(f);this._w=c.getW(f);return this}_onChange(c){this._onChangeCallback=c;return this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x;yield this._y;yield this._z;yield this._w}}p.Quaternion=m};
shadow$provide[512]=function(D,y,Q,p){function u(e){if("function"!==typeof WeakMap)return null;var g=new WeakMap,k=new WeakMap;return(u=function(l){return l?k:g})(e)}Object.defineProperty(p,"__esModule",{value:!0});p.Vector3=void 0;var q=function(e,g){if(!g&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};if((g=u(g))&&g.has(e))return g.get(e);var k={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor,r;for(r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,
r)){var v=l?Object.getOwnPropertyDescriptor(e,r):null;v&&(v.get||v.set)?Object.defineProperty(k,r,v):k[r]=e[r]}k.default=e;g&&g.set(e,k);return k}(y(510));D=y(511);class m{constructor(e=0,g=0,k=0){m.prototype.isVector3=!0;this.x=e;this.y=g;this.z=k}set(e,g,k){void 0===k&&(k=this.z);this.x=e;this.y=g;this.z=k;return this}setScalar(e){this.z=this.y=this.x=e;return this}setX(e){this.x=e;return this}setY(e){this.y=e;return this}setZ(e){this.z=e;return this}setComponent(e,g){switch(e){case 0:this.x=g;
break;case 1:this.y=g;break;case 2:this.z=g;break;default:throw Error("index is out of range: "+e);}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e);}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){this.x=e.x;this.y=e.y;this.z=e.z;return this}add(e){this.x+=e.x;this.y+=e.y;this.z+=e.z;return this}addScalar(e){this.x+=e;this.y+=e;this.z+=e;return this}addVectors(e,g){this.x=e.x+g.x;
this.y=e.y+g.y;this.z=e.z+g.z;return this}addScaledVector(e,g){this.x+=e.x*g;this.y+=e.y*g;this.z+=e.z*g;return this}sub(e){this.x-=e.x;this.y-=e.y;this.z-=e.z;return this}subScalar(e){this.x-=e;this.y-=e;this.z-=e;return this}subVectors(e,g){this.x=e.x-g.x;this.y=e.y-g.y;this.z=e.z-g.z;return this}multiply(e){this.x*=e.x;this.y*=e.y;this.z*=e.z;return this}multiplyScalar(e){this.x*=e;this.y*=e;this.z*=e;return this}multiplyVectors(e,g){this.x=e.x*g.x;this.y=e.y*g.y;this.z=e.z*g.z;return this}applyEuler(e){return this.applyQuaternion(f.setFromEuler(e))}applyAxisAngle(e,
g){return this.applyQuaternion(f.setFromAxisAngle(e,g))}applyMatrix3(e){const g=this.x,k=this.y,l=this.z;e=e.elements;this.x=e[0]*g+e[3]*k+e[6]*l;this.y=e[1]*g+e[4]*k+e[7]*l;this.z=e[2]*g+e[5]*k+e[8]*l;return this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const g=this.x,k=this.y,l=this.z;e=e.elements;const r=1/(e[3]*g+e[7]*k+e[11]*l+e[15]);this.x=(e[0]*g+e[4]*k+e[8]*l+e[12])*r;this.y=(e[1]*g+e[5]*k+e[9]*l+e[13])*r;this.z=(e[2]*g+e[6]*k+e[10]*l+e[14])*r;return this}applyQuaternion(e){var g=
this.x;const k=this.y,l=this.z,r=e.x,v=e.y,w=e.z;e=e.w;const z=e*g+v*l-w*k,A=e*k+w*g-r*l,H=e*l+r*k-v*g;g=-r*g-v*k-w*l;this.x=z*e+g*-r+A*-w-H*-v;this.y=A*e+g*-v+H*-r-z*-w;this.z=H*e+g*-w+z*-v-A*-r;return this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const g=this.x,k=this.y,l=this.z;e=e.elements;this.x=e[0]*g+e[4]*k+e[8]*l;this.y=e[1]*g+
e[5]*k+e[9]*l;this.z=e[2]*g+e[6]*k+e[10]*l;return this.normalize()}divide(e){this.x/=e.x;this.y/=e.y;this.z/=e.z;return this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){this.x=Math.min(this.x,e.x);this.y=Math.min(this.y,e.y);this.z=Math.min(this.z,e.z);return this}max(e){this.x=Math.max(this.x,e.x);this.y=Math.max(this.y,e.y);this.z=Math.max(this.z,e.z);return this}clamp(e,g){this.x=Math.max(e.x,Math.min(g.x,this.x));this.y=Math.max(e.y,Math.min(g.y,this.y));this.z=Math.max(e.z,Math.min(g.z,
this.z));return this}clampScalar(e,g){this.x=Math.max(e,Math.min(g,this.x));this.y=Math.max(e,Math.min(g,this.y));this.z=Math.max(e,Math.min(g,this.z));return this}clampLength(e,g){const k=this.length();return this.divideScalar(k||1).multiplyScalar(Math.max(e,Math.min(g,k)))}floor(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this}ceil(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this}round(){this.x=Math.round(this.x);
this.y=Math.round(this.y);this.z=Math.round(this.z);return this}roundToZero(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this}negate(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+
Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,g){this.x+=(e.x-this.x)*g;this.y+=(e.y-this.y)*g;this.z+=(e.z-this.z)*g;return this}lerpVectors(e,g,k){this.x=e.x+(g.x-e.x)*k;this.y=e.y+(g.y-e.y)*k;this.z=e.z+(g.z-e.z)*k;return this}cross(e){return this.crossVectors(this,e)}crossVectors(e,g){const k=e.x,l=e.y;e=e.z;const r=g.x,v=g.y;g=g.z;this.x=l*g-e*v;this.y=e*r-k*g;this.z=k*v-l*r;return this}projectOnVector(e){var g=
e.lengthSq();if(0===g)return this.set(0,0,0);g=e.dot(this)/g;return this.copy(e).multiplyScalar(g)}projectOnPlane(e){c.copy(this).projectOnVector(e);return this.sub(c)}reflect(e){return this.sub(c.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const g=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===g)return Math.PI/2;e=this.dot(e)/g;return Math.acos(q.clamp(e,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const g=this.x-e.x,k=this.y-e.y;e=this.z-e.z;return g*
g+k*k+e*e}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,g,k){const l=Math.sin(g)*e;this.x=l*Math.sin(k);this.y=Math.cos(g)*e;this.z=l*Math.cos(k);return this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,g,k){this.x=e*Math.sin(g);this.y=k;this.z=e*Math.cos(g);return this}setFromMatrixPosition(e){e=
e.elements;this.x=e[12];this.y=e[13];this.z=e[14];return this}setFromMatrixScale(e){const g=this.setFromMatrixColumn(e,0).length(),k=this.setFromMatrixColumn(e,1).length();e=this.setFromMatrixColumn(e,2).length();this.x=g;this.y=k;this.z=e;return this}setFromMatrixColumn(e,g){return this.fromArray(e.elements,4*g)}setFromMatrix3Column(e,g){return this.fromArray(e.elements,3*g)}setFromEuler(e){this.x=e._x;this.y=e._y;this.z=e._z;return this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,
g=0){this.x=e[g];this.y=e[g+1];this.z=e[g+2];return this}toArray(e=[],g=0){e[g]=this.x;e[g+1]=this.y;e[g+2]=this.z;return e}fromBufferAttribute(e,g){this.x=e.getX(g);this.y=e.getY(g);this.z=e.getZ(g);return this}random(){this.x=Math.random();this.y=Math.random();this.z=Math.random();return this}randomDirection(){const e=2*(Math.random()-.5),g=Math.random()*Math.PI*2,k=Math.sqrt(1-e**2);this.x=k*Math.cos(g);this.y=k*Math.sin(g);this.z=e;return this}*[Symbol.iterator](){yield this.x;yield this.y;yield this.z}}
p.Vector3=m;const c=new m,f=new D.Quaternion};
shadow$provide[513]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Vector4=void 0;class u{constructor(q=0,m=0,c=0,f=1){u.prototype.isVector4=!0;this.x=q;this.y=m;this.z=c;this.w=f}get width(){return this.z}set width(q){this.z=q}get height(){return this.w}set height(q){this.w=q}set(q,m,c,f){this.x=q;this.y=m;this.z=c;this.w=f;return this}setScalar(q){this.w=this.z=this.y=this.x=q;return this}setX(q){this.x=q;return this}setY(q){this.y=q;return this}setZ(q){this.z=q;return this}setW(q){this.w=
q;return this}setComponent(q,m){switch(q){case 0:this.x=m;break;case 1:this.y=m;break;case 2:this.z=m;break;case 3:this.w=m;break;default:throw Error("index is out of range: "+q);}return this}getComponent(q){switch(q){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+q);}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(q){this.x=q.x;this.y=q.y;this.z=q.z;this.w=void 0!==q.w?q.w:1;return this}add(q){this.x+=
q.x;this.y+=q.y;this.z+=q.z;this.w+=q.w;return this}addScalar(q){this.x+=q;this.y+=q;this.z+=q;this.w+=q;return this}addVectors(q,m){this.x=q.x+m.x;this.y=q.y+m.y;this.z=q.z+m.z;this.w=q.w+m.w;return this}addScaledVector(q,m){this.x+=q.x*m;this.y+=q.y*m;this.z+=q.z*m;this.w+=q.w*m;return this}sub(q){this.x-=q.x;this.y-=q.y;this.z-=q.z;this.w-=q.w;return this}subScalar(q){this.x-=q;this.y-=q;this.z-=q;this.w-=q;return this}subVectors(q,m){this.x=q.x-m.x;this.y=q.y-m.y;this.z=q.z-m.z;this.w=q.w-m.w;
return this}multiply(q){this.x*=q.x;this.y*=q.y;this.z*=q.z;this.w*=q.w;return this}multiplyScalar(q){this.x*=q;this.y*=q;this.z*=q;this.w*=q;return this}applyMatrix4(q){const m=this.x,c=this.y,f=this.z,e=this.w;q=q.elements;this.x=q[0]*m+q[4]*c+q[8]*f+q[12]*e;this.y=q[1]*m+q[5]*c+q[9]*f+q[13]*e;this.z=q[2]*m+q[6]*c+q[10]*f+q[14]*e;this.w=q[3]*m+q[7]*c+q[11]*f+q[15]*e;return this}divideScalar(q){return this.multiplyScalar(1/q)}setAxisAngleFromQuaternion(q){this.w=2*Math.acos(q.w);const m=Math.sqrt(1-
q.w*q.w);1E-4>m?(this.x=1,this.z=this.y=0):(this.x=q.x/m,this.y=q.y/m,this.z=q.z/m);return this}setAxisAngleFromRotationMatrix(q){q=q.elements;var m=q[0];var c=q[4];var f=q[8];const e=q[1];var g=q[5],k=q[9];var l=q[2];var r=q[6];var v=q[10];if(.01>Math.abs(c-e)&&.01>Math.abs(f-l)&&.01>Math.abs(k-r)){if(.1>Math.abs(c+e)&&.1>Math.abs(f+l)&&.1>Math.abs(k+r)&&.1>Math.abs(m+g+v-3))return this.set(1,0,0,0),this;q=Math.PI;m=(m+1)/2;g=(g+1)/2;v=(v+1)/2;c=(c+e)/4;f=(f+l)/4;k=(k+r)/4;m>g&&m>v?.01>m?(r=0,c=
l=.707106781):(r=Math.sqrt(m),l=c/r,c=f/r):g>v?.01>g?(r=.707106781,l=0,c=.707106781):(l=Math.sqrt(g),r=c/l,c=k/l):.01>v?(l=r=.707106781,c=0):(c=Math.sqrt(v),r=f/c,l=k/c);this.set(r,l,c,q);return this}q=Math.sqrt((r-k)*(r-k)+(f-l)*(f-l)+(e-c)*(e-c));.001>Math.abs(q)&&(q=1);this.x=(r-k)/q;this.y=(f-l)/q;this.z=(e-c)/q;this.w=Math.acos((m+g+v-1)/2);return this}min(q){this.x=Math.min(this.x,q.x);this.y=Math.min(this.y,q.y);this.z=Math.min(this.z,q.z);this.w=Math.min(this.w,q.w);return this}max(q){this.x=
Math.max(this.x,q.x);this.y=Math.max(this.y,q.y);this.z=Math.max(this.z,q.z);this.w=Math.max(this.w,q.w);return this}clamp(q,m){this.x=Math.max(q.x,Math.min(m.x,this.x));this.y=Math.max(q.y,Math.min(m.y,this.y));this.z=Math.max(q.z,Math.min(m.z,this.z));this.w=Math.max(q.w,Math.min(m.w,this.w));return this}clampScalar(q,m){this.x=Math.max(q,Math.min(m,this.x));this.y=Math.max(q,Math.min(m,this.y));this.z=Math.max(q,Math.min(m,this.z));this.w=Math.max(q,Math.min(m,this.w));return this}clampLength(q,
m){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(q,Math.min(m,c)))}floor(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this}ceil(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this}round(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this}roundToZero(){this.x=0>this.x?Math.ceil(this.x):
Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this}negate(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this}dot(q){return this.x*q.x+this.y*q.y+this.z*q.z+this.w*q.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+
Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(q){return this.normalize().multiplyScalar(q)}lerp(q,m){this.x+=(q.x-this.x)*m;this.y+=(q.y-this.y)*m;this.z+=(q.z-this.z)*m;this.w+=(q.w-this.w)*m;return this}lerpVectors(q,m,c){this.x=q.x+(m.x-q.x)*c;this.y=q.y+(m.y-q.y)*c;this.z=q.z+(m.z-q.z)*c;this.w=q.w+(m.w-q.w)*c;return this}equals(q){return q.x===this.x&&q.y===this.y&&q.z===this.z&&q.w===this.w}fromArray(q,m=0){this.x=q[m];this.y=
q[m+1];this.z=q[m+2];this.w=q[m+3];return this}toArray(q=[],m=0){q[m]=this.x;q[m+1]=this.y;q[m+2]=this.z;q[m+3]=this.w;return q}fromBufferAttribute(q,m){this.x=q.getX(m);this.y=q.getY(m);this.z=q.getZ(m);this.w=q.getW(m);return this}random(){this.x=Math.random();this.y=Math.random();this.z=Math.random();this.w=Math.random();return this}*[Symbol.iterator](){yield this.x;yield this.y;yield this.z;yield this.w}}p.Vector4=u};
shadow$provide[514]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Matrix3=void 0;class u{constructor(){u.prototype.isMatrix3=!0;this.elements=[1,0,0,0,1,0,0,0,1]}set(m,c,f,e,g,k,l,r,v){const w=this.elements;w[0]=m;w[1]=e;w[2]=l;w[3]=c;w[4]=g;w[5]=r;w[6]=f;w[7]=k;w[8]=v;return this}identity(){this.set(1,0,0,0,1,0,0,0,1);return this}copy(m){const c=this.elements;m=m.elements;c[0]=m[0];c[1]=m[1];c[2]=m[2];c[3]=m[3];c[4]=m[4];c[5]=m[5];c[6]=m[6];c[7]=m[7];c[8]=m[8];return this}extractBasis(m,
c,f){m.setFromMatrix3Column(this,0);c.setFromMatrix3Column(this,1);f.setFromMatrix3Column(this,2);return this}setFromMatrix4(m){m=m.elements;this.set(m[0],m[4],m[8],m[1],m[5],m[9],m[2],m[6],m[10]);return this}multiply(m){return this.multiplyMatrices(this,m)}premultiply(m){return this.multiplyMatrices(m,this)}multiplyMatrices(m,c){var f=m.elements,e=c.elements;c=this.elements;m=f[0];const g=f[3],k=f[6],l=f[1],r=f[4],v=f[7],w=f[2],z=f[5];f=f[8];const A=e[0],H=e[3],F=e[6],L=e[1],N=e[4],R=e[7],J=e[2],
Y=e[5];e=e[8];c[0]=m*A+g*L+k*J;c[3]=m*H+g*N+k*Y;c[6]=m*F+g*R+k*e;c[1]=l*A+r*L+v*J;c[4]=l*H+r*N+v*Y;c[7]=l*F+r*R+v*e;c[2]=w*A+z*L+f*J;c[5]=w*H+z*N+f*Y;c[8]=w*F+z*R+f*e;return this}multiplyScalar(m){const c=this.elements;c[0]*=m;c[3]*=m;c[6]*=m;c[1]*=m;c[4]*=m;c[7]*=m;c[2]*=m;c[5]*=m;c[8]*=m;return this}determinant(){var m=this.elements;const c=m[0],f=m[1],e=m[2],g=m[3],k=m[4],l=m[5],r=m[6],v=m[7];m=m[8];return c*k*m-c*l*v-f*g*m+f*l*r+e*g*v-e*k*r}invert(){const m=this.elements,c=m[0],f=m[1],e=m[2],
g=m[3],k=m[4],l=m[5],r=m[6],v=m[7],w=m[8],z=w*k-l*v,A=l*r-w*g,H=v*g-k*r;var F=c*z+f*A+e*H;if(0===F)return this.set(0,0,0,0,0,0,0,0,0);F=1/F;m[0]=z*F;m[1]=(e*v-w*f)*F;m[2]=(l*f-e*k)*F;m[3]=A*F;m[4]=(w*c-e*r)*F;m[5]=(e*g-l*c)*F;m[6]=H*F;m[7]=(f*r-v*c)*F;m[8]=(k*c-f*g)*F;return this}transpose(){let m;const c=this.elements;m=c[1];c[1]=c[3];c[3]=m;m=c[2];c[2]=c[6];c[6]=m;m=c[5];c[5]=c[7];c[7]=m;return this}getNormalMatrix(m){return this.setFromMatrix4(m).invert().transpose()}transposeIntoArray(m){const c=
this.elements;m[0]=c[0];m[1]=c[3];m[2]=c[6];m[3]=c[1];m[4]=c[4];m[5]=c[7];m[6]=c[2];m[7]=c[5];m[8]=c[8];return this}setUvTransform(m,c,f,e,g,k,l){const r=Math.cos(g);g=Math.sin(g);this.set(f*r,f*g,-f*(r*k+g*l)+k+m,-e*g,e*r,-e*(-g*k+r*l)+l+c,0,0,1);return this}scale(m,c){this.premultiply(q.makeScale(m,c));return this}rotate(m){this.premultiply(q.makeRotation(-m));return this}translate(m,c){this.premultiply(q.makeTranslation(m,c));return this}makeTranslation(m,c){this.set(1,0,m,0,1,c,0,0,1);return this}makeRotation(m){const c=
Math.cos(m);m=Math.sin(m);this.set(c,-m,0,m,c,0,0,0,1);return this}makeScale(m,c){this.set(m,0,0,0,c,0,0,0,1);return this}equals(m){const c=this.elements;m=m.elements;for(let f=0;9>f;f++)if(c[f]!==m[f])return!1;return!0}fromArray(m,c=0){for(let f=0;9>f;f++)this.elements[f]=m[f+c];return this}toArray(m=[],c=0){const f=this.elements;m[c]=f[0];m[c+1]=f[1];m[c+2]=f[2];m[c+3]=f[3];m[c+4]=f[4];m[c+5]=f[5];m[c+6]=f[6];m[c+7]=f[7];m[c+8]=f[8];return m}clone(){return(new this.constructor).fromArray(this.elements)}}
p.Matrix3=u;const q=new u};
shadow$provide[515]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Matrix4=void 0;D=y(512);class u{constructor(){u.prototype.isMatrix4=!0;this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(l,r,v,w,z,A,H,F,L,N,R,J,Y,fa,Z,da){const la=this.elements;la[0]=l;la[4]=r;la[8]=v;la[12]=w;la[1]=z;la[5]=A;la[9]=H;la[13]=F;la[2]=L;la[6]=N;la[10]=R;la[14]=J;la[3]=Y;la[7]=fa;la[11]=Z;la[15]=da;return this}identity(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this}clone(){return(new u).fromArray(this.elements)}copy(l){const r=
this.elements;l=l.elements;r[0]=l[0];r[1]=l[1];r[2]=l[2];r[3]=l[3];r[4]=l[4];r[5]=l[5];r[6]=l[6];r[7]=l[7];r[8]=l[8];r[9]=l[9];r[10]=l[10];r[11]=l[11];r[12]=l[12];r[13]=l[13];r[14]=l[14];r[15]=l[15];return this}copyPosition(l){const r=this.elements;l=l.elements;r[12]=l[12];r[13]=l[13];r[14]=l[14];return this}setFromMatrix3(l){l=l.elements;this.set(l[0],l[3],l[6],0,l[1],l[4],l[7],0,l[2],l[5],l[8],0,0,0,0,1);return this}extractBasis(l,r,v){l.setFromMatrixColumn(this,0);r.setFromMatrixColumn(this,1);
v.setFromMatrixColumn(this,2);return this}makeBasis(l,r,v){this.set(l.x,r.x,v.x,0,l.y,r.y,v.y,0,l.z,r.z,v.z,0,0,0,0,1);return this}extractRotation(l){const r=this.elements,v=l.elements,w=1/q.setFromMatrixColumn(l,0).length(),z=1/q.setFromMatrixColumn(l,1).length();l=1/q.setFromMatrixColumn(l,2).length();r[0]=v[0]*w;r[1]=v[1]*w;r[2]=v[2]*w;r[3]=0;r[4]=v[4]*z;r[5]=v[5]*z;r[6]=v[6]*z;r[7]=0;r[8]=v[8]*l;r[9]=v[9]*l;r[10]=v[10]*l;r[11]=0;r[12]=0;r[13]=0;r[14]=0;r[15]=1;return this}makeRotationFromEuler(l){const r=
this.elements;var v=l.x,w=l.y,z=l.z;const A=Math.cos(v);v=Math.sin(v);const H=Math.cos(w);w=Math.sin(w);const F=Math.cos(z);z=Math.sin(z);if("XYZ"===l.order){l=A*F;var L=A*z,N=v*F,R=v*z;r[0]=H*F;r[4]=-H*z;r[8]=w;r[1]=L+N*w;r[5]=l-R*w;r[9]=-v*H;r[2]=R-l*w;r[6]=N+L*w;r[10]=A*H}else"YXZ"===l.order?(l=H*F,L=H*z,N=w*F,R=w*z,r[0]=l+R*v,r[4]=N*v-L,r[8]=A*w,r[1]=A*z,r[5]=A*F,r[9]=-v,r[2]=L*v-N,r[6]=R+l*v,r[10]=A*H):"ZXY"===l.order?(l=H*F,L=H*z,N=w*F,R=w*z,r[0]=l-R*v,r[4]=-A*z,r[8]=N+L*v,r[1]=L+N*v,r[5]=A*
F,r[9]=R-l*v,r[2]=-A*w,r[6]=v,r[10]=A*H):"ZYX"===l.order?(l=A*F,L=A*z,N=v*F,R=v*z,r[0]=H*F,r[4]=N*w-L,r[8]=l*w+R,r[1]=H*z,r[5]=R*w+l,r[9]=L*w-N,r[2]=-w,r[6]=v*H,r[10]=A*H):"YZX"===l.order?(l=A*H,L=A*w,N=v*H,R=v*w,r[0]=H*F,r[4]=R-l*z,r[8]=N*z+L,r[1]=z,r[5]=A*F,r[9]=-v*F,r[2]=-w*F,r[6]=L*z+N,r[10]=l-R*z):"XZY"===l.order&&(l=A*H,L=A*w,N=v*H,R=v*w,r[0]=H*F,r[4]=-z,r[8]=w*F,r[1]=l*z+R,r[5]=A*F,r[9]=L*z-N,r[2]=N*z-L,r[6]=v*F,r[10]=R*z+l);r[3]=0;r[7]=0;r[11]=0;r[12]=0;r[13]=0;r[14]=0;r[15]=1;return this}makeRotationFromQuaternion(l){return this.compose(c,
l,f)}lookAt(l,r,v){const w=this.elements;k.subVectors(l,r);0===k.lengthSq()&&(k.z=1);k.normalize();e.crossVectors(v,k);0===e.lengthSq()&&(1===Math.abs(v.z)?k.x+=1E-4:k.z+=1E-4,k.normalize(),e.crossVectors(v,k));e.normalize();g.crossVectors(k,e);w[0]=e.x;w[4]=g.x;w[8]=k.x;w[1]=e.y;w[5]=g.y;w[9]=k.y;w[2]=e.z;w[6]=g.z;w[10]=k.z;return this}multiply(l){return this.multiplyMatrices(this,l)}premultiply(l){return this.multiplyMatrices(l,this)}multiplyMatrices(l,r){var v=l.elements,w=r.elements;r=this.elements;
l=v[0];const z=v[4],A=v[8],H=v[12],F=v[1],L=v[5],N=v[9],R=v[13],J=v[2],Y=v[6],fa=v[10],Z=v[14],da=v[3],la=v[7],W=v[11];v=v[15];const ra=w[0],za=w[4],O=w[8],pa=w[12],Ta=w[1],na=w[5],Ra=w[9],Wa=w[13],Xa=w[2],Ob=w[6],Db=w[10],Gb=w[14],ec=w[3],ob=w[7],Sb=w[11];w=w[15];r[0]=l*ra+z*Ta+A*Xa+H*ec;r[4]=l*za+z*na+A*Ob+H*ob;r[8]=l*O+z*Ra+A*Db+H*Sb;r[12]=l*pa+z*Wa+A*Gb+H*w;r[1]=F*ra+L*Ta+N*Xa+R*ec;r[5]=F*za+L*na+N*Ob+R*ob;r[9]=F*O+L*Ra+N*Db+R*Sb;r[13]=F*pa+L*Wa+N*Gb+R*w;r[2]=J*ra+Y*Ta+fa*Xa+Z*ec;r[6]=J*za+Y*
na+fa*Ob+Z*ob;r[10]=J*O+Y*Ra+fa*Db+Z*Sb;r[14]=J*pa+Y*Wa+fa*Gb+Z*w;r[3]=da*ra+la*Ta+W*Xa+v*ec;r[7]=da*za+la*na+W*Ob+v*ob;r[11]=da*O+la*Ra+W*Db+v*Sb;r[15]=da*pa+la*Wa+W*Gb+v*w;return this}multiplyScalar(l){const r=this.elements;r[0]*=l;r[4]*=l;r[8]*=l;r[12]*=l;r[1]*=l;r[5]*=l;r[9]*=l;r[13]*=l;r[2]*=l;r[6]*=l;r[10]*=l;r[14]*=l;r[3]*=l;r[7]*=l;r[11]*=l;r[15]*=l;return this}determinant(){const l=this.elements,r=l[0],v=l[4],w=l[8],z=l[12],A=l[1],H=l[5],F=l[9],L=l[13],N=l[2],R=l[6],J=l[10],Y=l[14];return l[3]*
(+z*F*R-w*L*R-z*H*J+v*L*J+w*H*Y-v*F*Y)+l[7]*(+r*F*Y-r*L*J+z*A*J-w*A*Y+w*L*N-z*F*N)+l[11]*(+r*L*R-r*H*Y-z*A*R+v*A*Y+z*H*N-v*L*N)+l[15]*(-w*H*N-r*F*R+r*H*J+w*A*R-v*A*J+v*F*N)}transpose(){const l=this.elements;let r;r=l[1];l[1]=l[4];l[4]=r;r=l[2];l[2]=l[8];l[8]=r;r=l[6];l[6]=l[9];l[9]=r;r=l[3];l[3]=l[12];l[12]=r;r=l[7];l[7]=l[13];l[13]=r;r=l[11];l[11]=l[14];l[14]=r;return this}setPosition(l,r,v){const w=this.elements;l.isVector3?(w[12]=l.x,w[13]=l.y,w[14]=l.z):(w[12]=l,w[13]=r,w[14]=v);return this}invert(){const l=
this.elements,r=l[0],v=l[1],w=l[2],z=l[3],A=l[4],H=l[5],F=l[6],L=l[7],N=l[8],R=l[9],J=l[10],Y=l[11],fa=l[12],Z=l[13],da=l[14],la=l[15],W=R*da*L-Z*J*L+Z*F*Y-H*da*Y-R*F*la+H*J*la,ra=fa*J*L-N*da*L-fa*F*Y+A*da*Y+N*F*la-A*J*la,za=N*Z*L-fa*R*L+fa*H*Y-A*Z*Y-N*H*la+A*R*la,O=fa*R*F-N*Z*F-fa*H*J+A*Z*J+N*H*da-A*R*da;var pa=r*W+v*ra+w*za+z*O;if(0===pa)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);pa=1/pa;l[0]=W*pa;l[1]=(Z*J*z-R*da*z-Z*w*Y+v*da*Y+R*w*la-v*J*la)*pa;l[2]=(H*da*z-Z*F*z+Z*w*L-v*da*L-H*w*la+v*F*
la)*pa;l[3]=(R*F*z-H*J*z-R*w*L+v*J*L+H*w*Y-v*F*Y)*pa;l[4]=ra*pa;l[5]=(N*da*z-fa*J*z+fa*w*Y-r*da*Y-N*w*la+r*J*la)*pa;l[6]=(fa*F*z-A*da*z-fa*w*L+r*da*L+A*w*la-r*F*la)*pa;l[7]=(A*J*z-N*F*z+N*w*L-r*J*L-A*w*Y+r*F*Y)*pa;l[8]=za*pa;l[9]=(fa*R*z-N*Z*z-fa*v*Y+r*Z*Y+N*v*la-r*R*la)*pa;l[10]=(A*Z*z-fa*H*z+fa*v*L-r*Z*L-A*v*la+r*H*la)*pa;l[11]=(N*H*z-A*R*z-N*v*L+r*R*L+A*v*Y-r*H*Y)*pa;l[12]=O*pa;l[13]=(N*Z*w-fa*R*w+fa*v*J-r*Z*J-N*v*da+r*R*da)*pa;l[14]=(fa*H*w-A*Z*w-fa*v*F+r*Z*F+A*v*da-r*H*da)*pa;l[15]=(A*R*w-N*
H*w+N*v*F-r*R*F-A*v*J+r*H*J)*pa;return this}scale(l){const r=this.elements,v=l.x,w=l.y;l=l.z;r[0]*=v;r[4]*=w;r[8]*=l;r[1]*=v;r[5]*=w;r[9]*=l;r[2]*=v;r[6]*=w;r[10]*=l;r[3]*=v;r[7]*=w;r[11]*=l;return this}getMaxScaleOnAxis(){const l=this.elements;return Math.sqrt(Math.max(l[0]*l[0]+l[1]*l[1]+l[2]*l[2],l[4]*l[4]+l[5]*l[5]+l[6]*l[6],l[8]*l[8]+l[9]*l[9]+l[10]*l[10]))}makeTranslation(l,r,v){this.set(1,0,0,l,0,1,0,r,0,0,1,v,0,0,0,1);return this}makeRotationX(l){const r=Math.cos(l);l=Math.sin(l);this.set(1,
0,0,0,0,r,-l,0,0,l,r,0,0,0,0,1);return this}makeRotationY(l){const r=Math.cos(l);l=Math.sin(l);this.set(r,0,l,0,0,1,0,0,-l,0,r,0,0,0,0,1);return this}makeRotationZ(l){const r=Math.cos(l);l=Math.sin(l);this.set(r,-l,0,0,l,r,0,0,0,0,1,0,0,0,0,1);return this}makeRotationAxis(l,r){const v=Math.cos(r);r=Math.sin(r);const w=1-v,z=l.x,A=l.y;l=l.z;const H=w*z,F=w*A;this.set(H*z+v,H*A-r*l,H*l+r*A,0,H*A+r*l,F*A+v,F*l-r*z,0,H*l-r*A,F*l+r*z,w*l*l+v,0,0,0,0,1);return this}makeScale(l,r,v){this.set(l,0,0,0,0,r,
0,0,0,0,v,0,0,0,0,1);return this}makeShear(l,r,v,w,z,A){this.set(1,v,z,0,l,1,A,0,r,w,1,0,0,0,0,1);return this}compose(l,r,v){const w=this.elements;var z=r._x,A=r._y,H=r._z,F=r._w,L=z+z,N=A+A,R=H+H;r=z*L;const J=z*N;z*=R;const Y=A*N;A*=R;H*=R;L*=F;N*=F;F*=R;R=v.x;const fa=v.y;v=v.z;w[0]=(1-(Y+H))*R;w[1]=(J+F)*R;w[2]=(z-N)*R;w[3]=0;w[4]=(J-F)*fa;w[5]=(1-(r+H))*fa;w[6]=(A+L)*fa;w[7]=0;w[8]=(z+N)*v;w[9]=(A-L)*v;w[10]=(1-(r+Y))*v;w[11]=0;w[12]=l.x;w[13]=l.y;w[14]=l.z;w[15]=1;return this}decompose(l,r,
v){var w=this.elements;let z=q.set(w[0],w[1],w[2]).length();const A=q.set(w[4],w[5],w[6]).length(),H=q.set(w[8],w[9],w[10]).length();0>this.determinant()&&(z=-z);l.x=w[12];l.y=w[13];l.z=w[14];m.copy(this);l=1/z;w=1/A;const F=1/H;m.elements[0]*=l;m.elements[1]*=l;m.elements[2]*=l;m.elements[4]*=w;m.elements[5]*=w;m.elements[6]*=w;m.elements[8]*=F;m.elements[9]*=F;m.elements[10]*=F;r.setFromRotationMatrix(m);v.x=z;v.y=A;v.z=H;return this}makePerspective(l,r,v,w,z,A){const H=this.elements;H[0]=2*z/(r-
l);H[4]=0;H[8]=(r+l)/(r-l);H[12]=0;H[1]=0;H[5]=2*z/(v-w);H[9]=(v+w)/(v-w);H[13]=0;H[2]=0;H[6]=0;H[10]=-(A+z)/(A-z);H[14]=-2*A*z/(A-z);H[3]=0;H[7]=0;H[11]=-1;H[15]=0;return this}makeOrthographic(l,r,v,w,z,A){const H=this.elements,F=1/(r-l),L=1/(v-w),N=1/(A-z);H[0]=2*F;H[4]=0;H[8]=0;H[12]=-((r+l)*F);H[1]=0;H[5]=2*L;H[9]=0;H[13]=-((v+w)*L);H[2]=0;H[6]=0;H[10]=-2*N;H[14]=-((A+z)*N);H[3]=0;H[7]=0;H[11]=0;H[15]=1;return this}equals(l){const r=this.elements;l=l.elements;for(let v=0;16>v;v++)if(r[v]!==l[v])return!1;
return!0}fromArray(l,r=0){for(let v=0;16>v;v++)this.elements[v]=l[v+r];return this}toArray(l=[],r=0){const v=this.elements;l[r]=v[0];l[r+1]=v[1];l[r+2]=v[2];l[r+3]=v[3];l[r+4]=v[4];l[r+5]=v[5];l[r+6]=v[6];l[r+7]=v[7];l[r+8]=v[8];l[r+9]=v[9];l[r+10]=v[10];l[r+11]=v[11];l[r+12]=v[12];l[r+13]=v[13];l[r+14]=v[14];l[r+15]=v[15];return l}}p.Matrix4=u;const q=new D.Vector3,m=new u,c=new D.Vector3(0,0,0),f=new D.Vector3(1,1,1),e=new D.Vector3,g=new D.Vector3,k=new D.Vector3};
shadow$provide[516]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.decl=void 0;D=y(509);Q=y(512);var u=y(513),q=y(514);y=y(515);const m={};p.decl=m;m.in=0;m.out=1;m.inout=2;m.node=function(g){if("function"===(null!=g.children[5]?g.children[5].type:void 0))return m.function(g);if("keyword"===(null!=g.token?g.token.type:void 0))return m.external(g)};m.external=function(g){g=g.children;let k=g[1].token.data;const l=g[4].token.data,r=g[5];["attribute","uniform","varying"].includes(k)||
(k="global");const v=[];for(let z=0;z<r.children.length;z++)if(g=r.children[z],"ident"===g.type){var w=r.children[z+1];w="quantifier"===(null!=w?w.type:void 0);v.push({decl:"external",storage:k,type:l,ident:g.token.data,quant:!!w,count:w})}return v};m.function=function(g){var k=g.children;g=k[1].token.data;const l=k[4].token.data;var r=k[5];k=r.children[0].token.data;const v=r.children[2];r=Array.from(r.children[1].children).map(w=>m.argument(w));return[{decl:"function",storage:g,type:l,ident:k,body:!!v,
args:r}]};m.argument=function(g){g=g.children;const k=g[5],l=k.children[1];return{decl:"argument",storage:g[1].token.data,inout:g[2].token.data,type:g[4].token.data,ident:k.children[0].token.data,quant:!!l,count:l?l.children[0].token.data:void 0}};m.param=function(g,k,l,r,v){let w=[];null!=k&&w.push(k);null!=l&&w.push(l);w.push("");w=w.join(" ");const z=r?"["+v+"]":"";""!==g&&(g+=" ");const A=(H,F)=>(F?g:"")+`${w}${H}${z}`;A.split=H=>m.param(H,k,l,r,v);return A};p="undefined"!==typeof window&&!!window.THREE;
const c={int:0,float:0,vec2:p?D.Vector2:null,vec3:p?Q.Vector3:null,vec4:p?u.Vector4:null,mat2:null,mat3:p?q.Matrix3:null,mat4:p?y.Matrix4:null,sampler2D:0,samplerCube:0},f={int:"i",float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat2:"m2",mat3:"m3",mat4:"m4",sampler2D:"t",samplerCube:"t"};m.type=function(g,k,l,r,v,w){var z={in:m.in,out:m.out,inout:m.inout};let A=f[k];l&&(A+="v");let H=c[k];null!=H&&H.call&&(H=new H);l&&(H=[H]);z=null!=z[v]?z[v]:z.in;w={const:"const"}[w];l=m.param(v,w,k,l,r);return new e(g,
A,k,l,H,z)};class e{constructor(g,k,l,r,v,w,z){this.name=g;this.type=k;this.spec=l;this.param=r;this.value=v;this.inout=w;this.meta=z}split(){var g=null!=this.meta.shadowed;const k=g?m.in:m.out;g=this.param.split(g?"in":"out");return new e(this.name,this.type,this.spec,g,this.value,k)}copy(g,k){return new e(null!=g?g:this.name,this.type,this.spec,this.param,this.value,this.inout,k)}}};
shadow$provide[517]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.SHADOW_ARG="_i_o";p.RETURN_ARG="return"};
shadow$provide[518]=function(D,y,Q,p){function u(A){return A&&A.__esModule?A:{default:A}}Object.defineProperty(p,"__esModule",{value:!0});p.walk=p.parse=void 0;var q=u(y(504)),m=u(y(508)),c=y(516),f=y(517);let e=!1;p.parse=function(A,H){A=g(A,H);let F;e&&(F=z());var L=[];w(k,l(L),A,"");const [N,R,J]=Array.from(r(L));L=v(N,R,J);e&&F("GLSL AST");return{ast:A,code:H,signatures:L}};const g=function(A,H){let F;var L;let N=[];e&&(L=z());try{const R=(0,q.default)(H);F=(0,m.default)(R)}catch(R){N=[{message:R}]}e&&
L("GLSL Tokenize \x26 Parse");L=function(R){R=R.split("\n");const J=(""+R.length).length;return R.map((Y,fa)=>{var Z=fa+1;fa=(Z=""+Z).length<J?("       "+Z).slice(-J):Z;return`${fa}: ${Y}`}).join("\n")};if(!F||N.length){A||(A="(inline code)");console.warn(L(H));for(const R of N)console.error(`${A} -`,R.message);throw Error("GLSL parse error");}return F},k=function(A,H){switch(A.type){case "decl":return H(c.decl.node(A)),!1}return!0},l=A=>function(H){null!=H&&Array.from(H).map(F=>A.push(F))},r=function(A){let H=
null;const F=[];let L=[];const N={};let R=!1;for(const J of Array.from(A))J.body?(N[J.ident]&&(L=Array.from(L).filter(Y=>Y.ident!==J.ident),delete N[J.ident]),F.push(J),"main"===J.ident?(H=J,R=!0):R||(H=J)):"global"===J.storage?F.push(J):(L.push(J),N[J.ident]=!0);return[H,F,L]},v=function(A,H,F){let L;const N={uniform:[],attribute:[],varying:[],external:[],internal:[],global:[],main:null},R=function(J,Y){let fa;const Z=Array.from(J.args).map(W=>c.decl.type(W.ident,W.type,W.quant,W.count,W.inout,W.storage));
for(fa of Array.from(Z))if(fa.inout===c.decl.inout){var da=fa,la=fa.copy();da.inout=c.decl.in;la.inout=c.decl.out;la.meta={shadow:da.name};la.name+=f.SHADOW_ARG;da.meta={shadowed:la.name};Z.push(la)}"void"!==J.type&&Z.unshift(c.decl.type(f.RETURN_ARG,J.type,!1,"","out"));da=(()=>{const W=[];for(fa of Array.from(Z))fa.inout===c.decl.in&&W.push(fa.type);return W})().join(",");la=(()=>{const W=[];for(fa of Array.from(Z))fa.inout===c.decl.out&&W.push(fa.type);return W})().join(",");return{name:J.ident,
type:`(${da})(${la})`,signature:Z,inout:Y,spec:J.type}};N.main=R(A,c.decl.out);for(L of Array.from(H))N.internal.push({name:L.ident});for(L of Array.from(F))switch(L.decl){case "external":A=c.decl.type(L.ident,L.type,L.quant,L.count,L.inout,L.storage);N[L.storage].push(A);break;case "function":A=R(L,c.decl.in),N.external.push(A)}return N};e=!1;const w=function(A,H,F,L){e&&console.log(L,F.type,null!=F.token?F.token.data:void 0,null!=F.token?F.token.type:void 0);if(A(F,H))for(let N=0;N<F.children.length;N++)w(A,
H,F.children[N],L+"  ",e);return null};p.walk=w;const z=function(){const A=+new Date;return function(H){const F=+new Date-A;console.log(H,F+" ms");return F}}};
shadow$provide[519]=function(D,y,Q,p){function u(F){if("function"!==typeof WeakMap)return null;var L=new WeakMap,N=new WeakMap;return(u=function(R){return R?N:L})(F)}function q(F,L){if(!L&&F&&F.__esModule)return F;if(null===F||"object"!==typeof F&&"function"!==typeof F)return{default:F};if((L=u(L))&&L.has(F))return L.get(F);var N={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor,J;for(J in F)if("default"!==J&&Object.prototype.hasOwnProperty.call(F,J)){var Y=R?Object.getOwnPropertyDescriptor(F,
J):null;Y&&(Y.get||Y.set)?Object.defineProperty(N,J,Y):N[J]=F[J]}N.default=F;L&&L.set(F,N);return N}function m(F){return F.join("\n")}function c(F){return F.join(", ")}function f(F){return F.join(";\n")}function e(F){return{entry:F,type:"void",params:[],signature:[],return:"",vars:{},calls:[],post:[],chain:{}}}function g(F,L){return`#define ${F} ${L}`}function k(F,L,N,R,J){return`${F} ${L}(${N}) {\n${R}${J}}`}function l(F,L,N){F=F?`${F} = `:"";N=c(N);return`  ${F}${L}(${N})`}function r(F,L){for(let N=
0;N<F.length;N++){const R=F[N],J=L[N];if(!J||R.type!==J.type||R.name===A.RETURN_ARG!==(J.name===A.RETURN_ARG))return!1}return!0}function v(F,L,N,R,J){const Y=[];let fa="";for(let da of Array.from(R)){var Z=void 0;const {name:la}=da;let W=R=F(la),ra=null,za=null,O=!1;const pa=la===A.RETURN_ARG;if(Z=null!=da.meta?da.meta.shadowed:void 0)if(ra=F(Z))J.vars[ra]="  "+da.param(ra),J.calls.push(`  ${ra} = ${R}`),L(Z)?za={shadowed:ra}:da=da.split();if(Z=null!=da.meta?da.meta.shadow:void 0)if(ra=F(Z))if(L(Z))continue;
else da=da.split(),O=!0;pa?fa=R:O||Y.push(null!=ra?ra:R);L(la)?(Z="push",pa?""===J.return?(Z="unshift",W=la,J.type=da.spec,J.return=`  return ${R}`,J.vars[R]="  "+da.param(R)):(J.vars[R]="  "+da.param(R),J.params.push(da.param(R,!0))):J.params.push(da.param(R,!0)),da=da.copy(W,za),J.signature[Z](da)):J.vars[R]="  "+da.param(R)}return J.calls.push(l(fa,N,Y))}function w(F,L){const {entry:N}=F;var R=null;L&&1===L.length&&"main"!==N&&(L=L[0].module,r(F.signature,L.main.signature)&&(R=g(N,L.entry)));if(null==
R){L=[];for(var J in F.vars)L.push(F.vars[J]);J=L;({calls:L}=F);({post:R}=F);let {params:Y}=F;const {type:fa}=F,Z=F.return;L=L.concat(R);""!==Z&&L.push(Z);L.push("");J.length?(J.push(""),J=f(J)+"\n"):J="";L=f(L);Y=c(Y);R=k(fa,N,Y,J,L)}return{signature:F.signature,code:R,name:N}}Object.defineProperty(p,"__esModule",{value:!0});p.unshadow=function(F){const L=F.replace(A.SHADOW_ARG,"");return L!==F?L:null};p.lines=m;p.list=c;p.statements=f;p.body=e;p.define=g;p.fn=k;p.invoke=l;p.same=r;p.call=v;p.build=
w;p.links=function(F){const L={defs:[],bodies:[]};for(const N of Array.from(F))H(N,L);L.defs=m(L.defs);L.bodies=f(L.bodies);""===L.defs&&delete L.defs;""===L.bodies&&delete L.bodies;return L};p.defuse=function(F){const L=/([A-Za-z0-9_]+\s+)?[A-Za-z0-9_]+\s+[A-Za-z0-9_]+\s*\([^)]*\)\s*;\s*/gm,N=fa=>fa.replace(L,Z=>"");F=F.split(/(?=[{}])/g);let R=0;for(let fa=0;fa<F.length;fa++){var J=F[fa];switch(J[0]){case "{":R++;break;case "}":R--}if(0===R){J=J.split(/^[ \t]*#/m);for(let Z=0;Z<J.length;Z++){var Y=
J[Z];if(0<Z){Y=Y.split(/\n/);const da=Y.shift();Y=Y.join("\n");J[Z]=[da,N(Y)].join("\n")}else J[Z]=N(Y)}F[fa]=J.join("#")}}return F=F.join("")};p.dedupe=function(F){const L={};return F.replace(/((attribute|uniform|varying)\s+)[A-Za-z0-9_]+\s+([A-Za-z0-9_]+)\s*(\[[^\]]*\]\s*)?;\s*/gm,function(N,R,J,Y,fa){if(L[Y])return"";L[Y]=!0;return N})};p.hoist=function(F){const L=function(N,R){const J=[],Y=[];for(const fa of Array.from(N))(fa.match(R)?J:Y).push(fa);return J.concat(Y)};F=F.split("\n");F=L(F,/^#define ([^ ]+ _pg_[0-9]+_|_pg_[0-9]+_ [^ ]+)$/);
F=L(F,/^#extension/);return F.join("\n")};p.link=void 0;var z=q(y(473)),A=q(y(517));const H=(F,L)=>{const {module:N,name:R,external:J}=F;var {main:Y}=N;({entry:F}=N);if(r(Y.signature,J.signature))return L.defs.push(g(R,F));var fa=[],Z=[];let da={};const la=[N.namespace,A.RETURN_ARG].join("");for(ra of Array.from(J.signature)){var W=ra.inout===z.IN?fa:Z;W.push(ra)}for(ra of Array.from(Y.signature))W=ra.inout===z.IN?fa:Z,W=W.shift().name,W===A.RETURN_ARG&&(W=la),da[ra.name]=W;var ra=za=>da[za];fa=()=>
!0;Z=e();v(ra,fa,F,Y.signature,Z);Z.entry=F;da={return:la};ra=za=>null!=da[za]?da[za]:za;Y=e();v(ra,fa,F,J.signature,Y);Y.calls=Z.calls;Y.entry=R;L.bodies.push(w(Z).code.split(" {")[0]);return L.bodies.push(w(Y).code)};p.link=H};
shadow$provide[520]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});var u=y(497);Object.keys(u).forEach(function(f){"default"!==f&&"__esModule"!==f&&(f in p&&p[f]===u[f]||Object.defineProperty(p,f,{enumerable:!0,get:function(){return u[f]}}))});var q=y(518);Object.keys(q).forEach(function(f){"default"!==f&&"__esModule"!==f&&(f in p&&p[f]===q[f]||Object.defineProperty(p,f,{enumerable:!0,get:function(){return q[f]}}))});var m=y(519);Object.keys(m).forEach(function(f){"default"!==
f&&"__esModule"!==f&&(f in p&&p[f]===m[f]||Object.defineProperty(p,f,{enumerable:!0,get:function(){return m[f]}}))});var c=y(517);Object.keys(c).forEach(function(f){"default"!==f&&"__esModule"!==f&&(f in p&&p[f]===c[f]||Object.defineProperty(p,f,{enumerable:!0,get:function(){return c[f]}}))})};
shadow$provide[521]=function(D,y,Q,p){function u(z){if("function"!==typeof WeakMap)return null;var A=new WeakMap,H=new WeakMap;return(u=function(F){return F?H:A})(z)}function q(z,A){if(!A&&z&&z.__esModule)return z;if(null===z||"object"!==typeof z&&"function"!==typeof z)return{default:z};if((A=u(A))&&A.has(z))return A.get(z);var H={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor,L;for(L in z)if("default"!==L&&Object.prototype.hasOwnProperty.call(z,L)){var N=F?Object.getOwnPropertyDescriptor(z,
L):null;N&&(N.get||N.set)?Object.defineProperty(H,L,N):H[L]=z[L]}H.default=z;A&&A.set(z,H);return H}Object.defineProperty(p,"__esModule",{value:!0});p.load=function(z,A={}){return new w(z,A)};p.ShaderGraph=p.inspect=p.visualize=void 0;D=y(486);var m=q(y(496)),c=q(y(520));Q=q(y(473));var f=q(y(480));y=q(y(490));const {library:e,cache:g}=m,{visualize:k,inspect:l}=y;p.inspect=l;p.visualize=k;const {Snippet:r}=f,v=function(z,A={}){const H={};for(let F in z)H[F]=A[F]||z[F];return H};class w{constructor(z,
A){this.config=v({globalUniforms:!1,globalVaryings:!0,globalAttributes:!0,globals:[],autoInspect:!1},A);this.fetch=g(e(c,z,r.load))}shader(z){null==z&&(z={});z=v(this.config,z);return new m.Factory(c,this.fetch,z)}material(z){return new m.Material(this.shader(z),this.shader(z))}inspect(z){return w.inspect(z)}visualize(z){return w.visualize(z)}static inspect(z){return l(z)}static visualize(z){return k(z)}}p.ShaderGraph=w;w.Block=D.Block;w.Factory=m;w.GLSL=c;w.Graph=Q;w.Linker=f;w.Visualize=y};
shadow$provide[522]=function(D,y,Q,p){function u(m){if("function"!==typeof WeakMap)return null;var c=new WeakMap,f=new WeakMap;return(u=function(e){return e?f:c})(m)}Object.defineProperty(p,"__esModule",{value:!0});p.Factory=void 0;var q=function(m,c){if(!c&&m&&m.__esModule)return m;if(null===m||"object"!==typeof m&&"function"!==typeof m)return{default:m};if((c=u(c))&&c.has(m))return c.get(m);var f={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor,g;for(g in m)if("default"!==g&&Object.prototype.hasOwnProperty.call(m,
g)){var k=e?Object.getOwnPropertyDescriptor(m,g):null;k&&(k.get||k.set)?Object.defineProperty(f,g,k):f[g]=m[g]}f.default=m;c&&c.set(m,f);return f}(y(521));p.Factory=function(m){return q.load(function(c){var f=m[c];if(null!=f)return f;f=["#",".",":","["].includes(c[0]);f=document.querySelector(f?c:`#${c}`);if(null!=f&&"SCRIPT"===f.tagName)return f.textContent||f.innerText;throw Error(`Unknown shader \`${c}\``);},{autoInspect:!0})}};
shadow$provide[523]=function(D,y,Q,p){function u(Xc){return Xc&&Xc.__esModule?Xc:{default:Xc}}Object.defineProperty(p,"__esModule",{value:!0});var q={Snippets:!0};p.Snippets=void 0;var m=u(y(358)),c=u(y(359)),f=u(y(360)),e=u(y(361)),g=u(y(362)),k=u(y(363)),l=u(y(364)),r=u(y(365)),v=u(y(366)),w=u(y(367)),z=u(y(368)),A=u(y(369)),H=u(y(370)),F=u(y(371)),L=u(y(372)),N=u(y(373)),R=u(y(374)),J=u(y(375)),Y=u(y(376)),fa=u(y(377)),Z=u(y(378)),da=u(y(379)),la=u(y(380)),W=u(y(381)),ra=u(y(382)),za=u(y(383)),
O=u(y(384)),pa=u(y(385)),Ta=u(y(386)),na=u(y(387)),Ra=u(y(388)),Wa=u(y(389)),Xa=u(y(390)),Ob=u(y(391)),Db=u(y(392)),Gb=u(y(393)),ec=u(y(394)),ob=u(y(395)),Sb=u(y(396)),Pb=u(y(397)),bc=u(y(398)),pc=u(y(399)),Eb=u(y(400)),hb=u(y(401)),Mb=u(y(402)),yc=u(y(403)),xa=u(y(404)),jb=u(y(405)),cb=u(y(406)),Ub=u(y(407)),fc=u(y(408)),Fa=u(y(409)),vb=u(y(410)),Wb=u(y(411)),Ic=u(y(412)),Cc=u(y(413)),nd=u(y(414)),Kd=u(y(415)),Uc=u(y(416)),Vc=u(y(417)),Ad=u(y(418)),Jd=u(y(419)),hd=u(y(420)),zd=u(y(421)),Yb=u(y(422)),
bd=u(y(423)),md=u(y(424)),td=u(y(425)),Vb=u(y(426)),Xb=u(y(427)),Ld=u(y(428)),Md=u(y(429)),Bd=u(y(430)),od=u(y(431)),Ja=u(y(432)),pd=u(y(433)),Zb=u(y(434)),Mc=u(y(435)),cd=u(y(436)),Ec=u(y(437)),ab=u(y(438)),xc=u(y(439)),Ua=u(y(440)),Jb=u(y(441)),Ac=u(y(442)),Jc=u(y(443)),Yd=u(y(444)),oc=u(y(445)),Cd=u(y(446)),Ae=u(y(447)),Qb=u(y(448)),Dd=u(y(449)),Zd=u(y(450)),wd=u(y(451)),$d=u(y(452)),mb=u(y(453)),ie=u(y(454)),ke=u(y(455)),Gc=u(y(456)),je=u(y(457)),ae=u(y(458)),ic=u(y(459)),id=u(y(460)),le=u(y(461)),
Yc=u(y(462)),Wc=u(y(463)),ub=u(y(464)),me=u(y(465)),dc=u(y(466)),Da=u(y(467)),qc=u(y(468)),mc=u(y(469)),Nd=y(522);Object.keys(Nd).forEach(function(Xc){"default"!==Xc&&"__esModule"!==Xc&&(Object.prototype.hasOwnProperty.call(q,Xc)||Xc in p&&p[Xc]===Nd[Xc]||Object.defineProperty(p,Xc,{enumerable:!0,get:function(){return Nd[Xc]}}))});p.Snippets={"arrow.position":m.default,"axis.position":c.default,"cartesian.position":e.default,"cartesian4.position":f.default,"clamp.position":g.default,"color.opaque":k.default,
"face.position":l.default,"face.position.normal":r.default,"float.encode":v.default,"float.index.pack":w.default,"float.stretch":z.default,"fragment.clip.dashed":A.default,"fragment.clip.dotted":H.default,"fragment.clip.ends":F.default,"fragment.clip.proximity":L.default,"fragment.color":N.default,"fragment.map.rgba":R.default,"fragment.solid":J.default,"fragment.transparent":Y.default,"grid.position":fa.default,"grow.position":Z.default,"join.position":da.default,"label.alpha":la.default,"label.map":W.default,
"label.outline":ra.default,"layer.position":za.default,"lerp.depth":O.default,"lerp.height":pa.default,"lerp.items":Ta.default,"lerp.width":na.default,"line.position":Ra.default,"map.2d.data":Wa.default,"map.2d.data.wrap":Xa.default,"map.xyzw.2dv":Ob.default,"map.xyzw.align":Db.default,"map.xyzw.texture":Gb.default,"mesh.fragment.color":ec.default,"mesh.fragment.map":ob.default,"mesh.fragment.mask":Sb.default,"mesh.fragment.material":Pb.default,"mesh.fragment.shaded":bc.default,"mesh.fragment.texture":pc.default,
"mesh.gamma.in":Eb.default,"mesh.gamma.out":hb.default,"mesh.map.uvwo":Mb.default,"mesh.position":yc.default,"mesh.vertex.color":xa.default,"mesh.vertex.mask":jb.default,"mesh.vertex.position":cb.default,"move.position":Ub.default,"object.mask.default":fc.default,"point.alpha.circle":Fa.default,"point.alpha.circle.hollow":vb.default,"point.alpha.generic":Wb.default,"point.alpha.generic.hollow":Ic.default,"point.edge":Cc.default,"point.fill":nd.default,"point.mask.circle":Kd.default,"point.mask.diamond":Uc.default,
"point.mask.down":Vc.default,"point.mask.left":Ad.default,"point.mask.right":Jd.default,"point.mask.square":hd.default,"point.mask.up":zd.default,"point.position":Yb.default,"point.size.uniform":bd.default,"point.size.varying":md.default,"polar.position":td.default,"project.position":Vb.default,"project.readback":Xb.default,"raw.position.scale":Ld.default,"repeat.position":Md.default,"resample.padding":Bd.default,"resample.relative":od.default,"reveal.mask":Ja.default,"reverse.position":pd.default,
"root.position":Zb.default,"sample.2d":Mc.default,"scale.position":cd.default,"screen.map.stpq":Ec.default,"screen.map.xy":ab.default,"screen.map.xyzw":xc.default,"screen.pass.uv":Ua.default,"screen.position":Jb.default,"slice.position":Ac.default,"spherical.position":Jc.default,"split.position":Yd.default,"spread.position":oc.default,"sprite.fragment":Cd.default,"sprite.position":Ae.default,"stereographic.position":Dd.default,"stereographic4.position":Qb.default,"stpq.sample.2d":Zd.default,"stpq.xyzw.2d":wd.default,
"strip.position.normal":$d.default,"style.color":mb.default,"subdivide.depth":ie.default,"subdivide.depth.lerp":ke.default,"subdivide.height":Gc.default,"subdivide.height.lerp":je.default,"subdivide.items":ae.default,"subdivide.items.lerp":ic.default,"subdivide.width":id.default,"subdivide.width.lerp":le.default,"surface.mask.hollow":Yc.default,"surface.position":Wc.default,"surface.position.normal":ub.default,"surface.position.shaded":me.default,"ticks.position":dc.default,"transform3.position":Da.default,
"transform4.position":qc.default,"view.position":mc.default}};
shadow$provide[524]=function(D,y,Q,p){function u(f){if("function"!==typeof WeakMap)return null;var e=new WeakMap,g=new WeakMap;return(u=function(k){return k?g:e})(f)}Object.defineProperty(p,"__esModule",{value:!0});p.Animator=void 0;var q=function(f,e){if(!e&&f&&f.__esModule)return f;if(null===f||"object"!==typeof f&&"function"!==typeof f)return{default:f};if((e=u(e))&&e.has(f))return e.get(f);var g={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor,l;for(l in f)if("default"!==l&&Object.prototype.hasOwnProperty.call(f,
l)){var r=k?Object.getOwnPropertyDescriptor(f,l):null;r&&(r.get||r.set)?Object.defineProperty(g,l,r):g[l]=f[l]}g.default=f;e&&e.set(f,g);return g}(y(289));class m{constructor(f){this.context=f;this.anims=[]}make(f,e){f=new c(this,this.context.time,f,e);this.anims.push(f);return f}unmake(f){return this.anims=Array.from(this.anims).filter(e=>e!==f)}update(){const {time:f}=this.context;return this.anims=(()=>{const e=[];for(const g of Array.from(this.anims))!1!==g.update(f)&&e.push(g);return e})()}lerp(f,
e,g,k,l){null==l&&(l=f.make());if(f.lerp)l=f.lerp(e,g,l,k);else{if(f.emitter){l=e.emitterFrom;const r=g.emitterTo;if(null!=l&&null!=r&&l===r)return l.lerp(k),l;f=f.emitter(e,g);e.emitterFrom=f;g.emitterTo=f;f.lerp(k);return f}l=f.op?f.op(e,g,l,function(r,v){return r===+r&&v===+v?r+(v-r)*k:.5<k?v:r}):.5<k?g:e}return l}}p.Animator=m;class c{constructor(f,e,g,k){this.animator=f;this.time=e;this.type=g;this.options=k;this.value=this.type.make();this.target=this.type.make();this.queue=[]}dispose(){return this.animator.unmake(this)}set(){let {target:f}=
this,e=1<arguments.length?[].slice.call(arguments):arguments[0],g=!1;e=this.type.validate(e,f,()=>g=!0);g||(f=e);this.cancel();this.target=this.value;this.value=f;return this.notify()}getTime(){var {clock:f}=this.options;f=f?f.getTime():this.time;return this.options.realtime?f.time:f.clock}cancel(f){let e;null==f&&(f=this.getTime());const {queue:g}=this,k=(()=>{const l=[];for(e of Array.from(g))e.end>=f&&l.push(e);return l})();this.queue=(()=>{const l=[];for(e of Array.from(g))e.end<f&&l.push(e);
return l})();for(e of Array.from(k))"function"===typeof e.complete&&e.complete(!1);"function"===typeof this.options.complete&&this.options.complete(!1)}notify(){return"function"===typeof this.options.step?this.options.step(this.value):void 0}immediate(f,e){const {duration:g,delay:k,ease:l,step:r,complete:v}=e;e=this.getTime()+k;const w=e+g;let z=!1,A=this.type.make();f=this.type.validate(f,A,function(){z=!0;return null});void 0===f||z||(A=f);this.cancel(e);return this.queue.push({from:null,to:A,start:e,
end:w,ease:l,step:r,complete:v})}update(f){this.time=f;if(0===this.queue.length)return!0;f=this.getTime();let {value:e}=this;const {queue:g}=this;for(var k=!1;!k;){var l=g[0];let {from:r}=l;const {to:v,start:w,end:z,step:A,complete:H,ease:F}=l;null==r&&(r=l.from=this.type.clone(this.value));l=q.clamp((f-w)/Math.max(1E-5,z-w)||0,0,1);if(0===l)return;k=(()=>{switch(F){case "linear":case 0:return null;case "cosine":case 1:return q.cosine;case "binary":case 2:return q.binary;case "hold":case 3:return q.hold;
default:return q.cosine}})();null!=k&&(l=k(l));e=(k=1>l)?this.animator.lerp(this.type,r,v,l,e):v;"function"===typeof A&&A(e);if(!k&&("function"===typeof H&&H(!0),"function"===typeof this.options.complete&&this.options.complete(!0),g.shift(),0===g.length))break}this.value=e;return this.notify()}}};
shadow$provide[525]=function(D,y,Q,p){function u(g){if("function"!==typeof WeakMap)return null;var k=new WeakMap,l=new WeakMap;return(u=function(r){return r?l:k})(g)}function q(g,k){if(!k&&g&&g.__esModule)return g;if(null===g||"object"!==typeof g&&"function"!==typeof g)return{default:g};if((k=u(k))&&k.has(g))return k.get(g);var l={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor,v;for(v in g)if("default"!==v&&Object.prototype.hasOwnProperty.call(g,v)){var w=r?Object.getOwnPropertyDescriptor(g,
v):null;w&&(w.get||w.set)?Object.defineProperty(l,v,w):l[v]=g[v]}l.default=g;k&&k.set(g,l);return l}function m(g,k,l){const r=[],v=g<k;for(k=l?v?k+1:k-1:k;v?g<k:g>k;v?g++:g--)r.push(g);return r}Object.defineProperty(p,"__esModule",{value:!0});p.API=void 0;var c=q(y(40)),f=q(y(521));class e{v2(){return this}constructor(g,k,l){this._context=g;this._up=k;this._targets=l;g=this._context.controller.getRoot();null==this._targets&&(this._targets=[g]);this.isRoot=1===this._targets.length&&this._targets[0]===
g;this.isLeaf=1===this._targets.length&&null==this._targets[0].children;for(g=0;g<this._targets.length;g++)this[g]=this._targets[g];this.length=this._targets.length;for(const r of Array.from(this._context.controller.getTypes()))["root"].includes(r)||(this[r]=(v,w)=>this.add(r,v,w))}select(g){g=this._context.model.select(g,this.isRoot?null:this._targets);return this._push(g)}eq(g){return this._targets.length>g?this._push([this._targets[g]]):this._push([])}filter(g){if("string"===typeof g){const k=
this._context.model._matcher(g);g=l=>k(l)}return this._push(this._targets.filter(g))}map(g){return m(0,this.length,!1).map(k=>g(this[k],k,this))}each(g){for(let k=0,l=this.length,r=0<=l;r?k<l:k>l;r?k++:k--)g(this[k],k,this);return this}add(g,k,l){const {controller:r}=this._context;if(this.isLeaf)return this._pop().add(g,k,l);const v=[];for(const w of this._targets){const z=r.make(g,k,l);r.add(z,w);v.push(z)}return this._push(v)}remove(g){if(g)return this.select(g).remove();for(const k of Array.from(this._targets.slice().reverse()))this._context.controller.remove(k);
return this._pop()}set(g,k){for(const l of Array.from(this._targets))this._context.controller.set(l,g,k);return this}getAll(g){return Array.from(this._targets).map(k=>this._context.controller.get(k,g))}get(g){return null!=this._targets[0]?this._targets[0].get(g):void 0}evaluate(g,k){return null!=this._targets[0]?this._targets[0].evaluate(g,k):void 0}bind(g,k){for(const l of Array.from(this._targets))this._context.controller.bind(l,g,k);return this}unbind(g){for(const k of Array.from(this._targets))this._context.controller.unbind(k,
g);return this}end(){return(this.isLeaf?this._pop():this)._pop()}_push(g){return new e(this._context,this,g)}_pop(){return null!=this._up?this._up:this}_reset(){let g;return null!=(g=null!=this._up?this._up.reset():void 0)?g:this}map(g){return this._targets.map(g)}on(){const g=arguments;this._targets.map(k=>k.on.apply(k,g));return this}off(){const g=arguments;this._targets.map(k=>k.off.apply(k,g));return this}toString(){const g=this._targets.map(k=>k.toString());return 1<this._targets.length?`[${g.join(", ")}]`:
g[0]}toMarkup(){return this._targets.map(g=>g.toMarkup()).join("\n\n")}print(){c.print(this._targets.map(g=>g.toMarkup()).join("\n\n"));return this}debug(){var g=this.inspect();console.log("Renderables: ",g.renderables);console.log("Renders: ",g.renders);console.log("Shaders: ",g.shaders);const k=[];for(const l of Array.from(g.shaders))g=l.owner.constructor.name,k.push(`${g} - Vertex`),k.push(l.vertex),k.push(`${g} - Fragment`),k.push(l.fragment);return f.inspect(k)}inspect(g,k,l){let r;"boolean"===
typeof k&&(l=k,k=null);null==l&&(l=!0);const v=r=function(A,H){null==H&&(H=[]);k&&!A.traits.hash[k]||H.push(null!=(null!=A.controller?A.controller.objects:void 0)?null!=A.controller?A.controller.objects:void 0:[]);if(null!=A.children)for(const F of Array.from(A.children))r(F,H);return H},w=function(A){A=A.reduce((H,F)=>H.concat(F),[]);return A=A.filter((H,F)=>null!=H&&A.indexOf(H)===F)},z={nodes:this._targets.slice(),renderables:[],renders:[],shaders:[]};for(const A of Array.from(this._targets)){let H;
l&&A.print(g,"info");const F={renderables:H=w(v(A)),renders:w(H.map(L=>L.renders)),shaders:w(H.map(L=>null!=L.renders?L.renders.map(N=>{const R={};R.owner=L;R.geometry=N.geometry;R.material=N.material;R.vertex=N.userData.vertexGraph;R.fragment=N.userData.fragmentGraph;return R}):void 0))};for(const L in F)z[L]=z[L].concat(F[L])}return z}}p.API=e};
shadow$provide[526]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.Controller=void 0;class u{constructor(q,m){this.model=q;this.primitives=m}getRoot(){return this.model.getRoot()}getTypes(){return this.primitives.getTypes()}make(q,m,c){return this.primitives.make(q,m,c)}get(q,m){return q.get(m)}set(q,m,c){try{return q.set(m,c)}catch(f){return q.print(null,"warn"),console.error(f)}}bind(q,m,c){try{return q.bind(m,c)}catch(f){return q.print(null,"warn"),console.error(f)}}unbind(q,
m){try{return q.unbind(m)}catch(c){return q.print(null,"warn"),console.error(c)}}add(q,m){null==m&&(m=this.model.getRoot());return m.add(q)}remove(q){const m=q.parent;if(m)return m.remove(q)}}p.Controller=u};
shadow$provide[527]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});var u=y(524);Object.keys(u).forEach(function(c){"default"!==c&&"__esModule"!==c&&(c in p&&p[c]===u[c]||Object.defineProperty(p,c,{enumerable:!0,get:function(){return u[c]}}))});var q=y(525);Object.keys(q).forEach(function(c){"default"!==c&&"__esModule"!==c&&(c in p&&p[c]===q[c]||Object.defineProperty(p,c,{enumerable:!0,get:function(){return q[c]}}))});var m=y(526);Object.keys(m).forEach(function(c){"default"!==
c&&"__esModule"!==c&&(c in p&&p[c]===m[c]||Object.defineProperty(p,c,{enumerable:!0,get:function(){return m[c]}}))})};
shadow$provide[528]=function(D,y,Q,p){function u(l){if("function"!==typeof WeakMap)return null;var r=new WeakMap,v=new WeakMap;return(u=function(w){return w?v:r})(l)}function q(l,r){if(!r&&l&&l.__esModule)return l;if(null===l||"object"!==typeof l&&"function"!==typeof l)return{default:l};if((r=u(r))&&r.has(l))return r.get(l);var v={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor,z;for(z in l)if("default"!==z&&Object.prototype.hasOwnProperty.call(l,z)){var A=w?Object.getOwnPropertyDescriptor(l,
z):null;A&&(A.get||A.set)?Object.defineProperty(v,z,A):v[z]=l[z]}v.default=l;r&&r.set(l,v);return v}Object.defineProperty(p,"__esModule",{value:!0});p.VDOM=p.Ticks=p.Three=p.Pretty=p.JS=p.GLSL=p.Ease=p.Data=p.Axis=void 0;D=q(y(237));Q=q(y(104));var m=q(y(289)),c=q(y(105)),f=q(y(240)),e=q(y(40)),g=q(y(101)),k=q(y(314));y=q(y(89));p.Axis=D;p.Data=Q;p.Ease=m;p.GLSL=c;p.JS=f;p.Pretty=e;p.Three=g;p.Ticks=k;p.VDOM=y};
shadow$provide[529]=function(D,y,Q,p){function u(w){if("function"!==typeof WeakMap)return null;var z=new WeakMap,A=new WeakMap;return(u=function(H){return H?A:z})(w)}function q(w,z){if(!z&&w&&w.__esModule)return w;if(null===w||"object"!==typeof w&&"function"!==typeof w)return{default:w};if((z=u(z))&&z.has(w))return z.get(w);var A={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor,F;for(F in w)if("default"!==F&&Object.prototype.hasOwnProperty.call(w,F)){var L=H?Object.getOwnPropertyDescriptor(w,
F):null;L&&(L.get||L.set)?Object.defineProperty(A,F,L):A[F]=w[F]}A.default=w;z&&z.set(w,A);return A}Object.defineProperty(p,"__esModule",{value:!0});p.Context=void 0;var m=q(y(87)),c=q(y(93)),f=q(y(318)),e=q(y(357)),g=q(y(523)),k=q(y(527)),l=q(y(528)),r=y(7);class v{static initClass(){this.Namespace={Model:m,Overlay:c,Primitives:f,Render:e,Shaders:g,Stage:k,Util:l,DOM:l.VDOM};this.Version="2.3.1"}constructor(w,z=null,A=null){let H;this.canvas=H=w.domElement;this.element=null;this.shaders=g.Factory(g.Snippets);
this.renderables=new e.Factory(e.Classes,w,this.shaders);this.overlays=new c.Factory(c.Classes,H);this.scene=this.renderables.make("scene",{scene:z});this.camera=this.defaultCamera=null!=A?A:new r.PerspectiveCamera;this.attributes=new m.Attributes(f.Types,this);this.primitives=new f.Factory(f.Types,this);this.root=this.primitives.make("root");this.model=new m.Model(this.root);this.guard=new m.Guard;this.controller=new k.Controller(this.model,this.primitives);this.animator=new k.Animator(this);this.api=
new k.API(this);this.speed=1;this.time={now:+new Date/1E3,time:0,delta:0,clock:0,step:0}}init(){this.scene.inject();this.overlays.inject();return this}destroy(){this.scene.unject();this.overlays.unject();return this}resize(w){null==w&&(w={});null==w.renderWidth&&(w.renderWidth=null!=w.viewWidth?w.viewWidth:w.viewWidth=1280);null==w.renderHeight&&(w.renderHeight=null!=w.viewHeight?w.viewHeight:w.viewHeight=720);null==w.pixelRatio&&(w.pixelRatio=w.renderWidth/Math.max(1E-6,w.viewWidth));null==w.aspect&&
(w.aspect=w.viewWidth/Math.max(1E-6,w.viewHeight));this.root.controller.resize(w);return this}frame(w){this.pre(w);this.update();this.render();this.post();return this}pre(w){w||(w={now:+new Date/1E3,time:0,delta:0,clock:0,step:0},w.delta=null!=this.time.now?w.now-this.time.now:0,1<w.delta&&(w.delta=1/60),w.step=w.delta*this.speed,w.time=this.time.time+w.delta,w.clock=this.time.clock+w.step);this.time=w;"function"===typeof this.root.controller.pre&&this.root.controller.pre();return this}update(){this.animator.update();
this.attributes.compute();this.guard.iterate({step:()=>this.attributes.digest()||this.model.digest(),last(){return{attribute:this.attributes.getLastTrigger(),model:this.model.getLastTrigger()}}});"function"===typeof this.root.controller.update&&this.root.controller.update();this.camera=this.root.controller.getCamera();this.speed=this.root.controller.getSpeed();return this}render(){"function"===typeof this.root.controller.render&&this.root.controller.render();this.scene.render();return this}post(){"function"===
typeof this.root.controller.post&&this.root.controller.post();return this}setWarmup(w){this.scene.warmup(w);return this}getPending(){return this.scene.pending.length}}p.Context=v;v.initClass()};
shadow$provide[530]=function(D,y,Q,p){function u(w){if("function"!==typeof WeakMap)return null;var z=new WeakMap,A=new WeakMap;return(u=function(H){return H?A:z})(w)}function q(w,z){if(!z&&w&&w.__esModule)return w;if(null===w||"object"!==typeof w&&"function"!==typeof w)return{default:w};if((z=u(z))&&z.has(w))return z.get(w);var A={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor,F;for(F in w)if("default"!==F&&Object.prototype.hasOwnProperty.call(w,F)){var L=H?Object.getOwnPropertyDescriptor(w,
F):null;L&&(L.get||L.set)?Object.defineProperty(A,F,L):A[F]=w[F]}A.default=w;z&&z.set(w,A);return A}Object.defineProperty(p,"__esModule",{value:!0});p.mathBox=p.DOM=p.Util=p.Stage=p.Shaders=p.Render=p.Primitives=p.Overlay=p.Model=p.version=p.Context=p.e=p.\u03c4=p.\u03c0=void 0;y(11);y(38);D=q(y(87));Q=q(y(93));var m=q(y(318)),c=q(y(357)),f=q(y(523)),e=q(y(527)),g=q(y(528)),k=y(10);y=y(529);const l=Math.PI;p.\u03c0=l;p.\u03c4=2*l;p.e=Math.E;const r=y.Context;p.Context=r;const v=y.Context.Version;
p.version=v;p.Model=D;p.Overlay=Q;p.Primitives=m;p.Render=c;p.Shaders=f;p.Stage=e;p.Util=g;p.DOM=g.VDOM;p.mathBox=function(w){w=new k.Bootstrap(w);w.fallback||(w.Time||w.install("time"),w.MathBox||w.install(["mathbox","splash"]));return null!=w.mathbox?w.mathbox:w};k.Bootstrap.registerPlugin("mathbox",{defaults:{init:!0,warmup:2,inspect:!0,splash:!0},listen:["ready","pre","update","post","resize"],install(w){let z=!1;this.first=!0;return w.MathBox={init:A=>{z||(z=!0,this.context=new r(w.renderer,
(null!=A?A.scene:void 0)||this.options.scene||w.scene,(null!=A?A.camera:void 0)||this.options.camera||w.camera),this.context.api.three=w.three=w,this.context.api.mathbox=w.mathbox=this.context.api,this.context.api.start=()=>w.Loop.start(),this.context.api.stop=()=>w.Loop.stop(),this.context.init(),this.context.resize(w.Size),this.context.setWarmup(this.options.warmup),this.pending=0,this.warm=!this.options.warmup,console.log("MathBox²",v),w.trigger({type:"mathbox/init",version:v,context:this.context}))},
destroy:()=>{z&&(z=!1,w.trigger({type:"mathbox/destroy",context:this.context}),this.context.destroy(),delete w.mathbox,delete this.context.api.three,delete this.context)},object:()=>null!=this.context?this.context.scene.root:void 0}},uninstall(w){w.MathBox.destroy();delete w.MathBox},ready(w,z){if(this.options.init)return z.MathBox.init(),setTimeout(()=>{if(this.options.inspect&&z.MathBox)return this.inspect(z)})},inspect(w){this.context.api.inspect();if(!this.options.warmup)return this.info(w)},
info(w){const z=function(A){const H=[];for(;1E3<=A;)H.unshift(("000"+A%1E3).slice(-3)),A=Math.floor(A/1E3);H.unshift(A);return H.join(",")};w=w.renderer.info.render;console.log("Geometry  ",z(w.triangles)+" triangles  ",z(w.points)+" points  ",z(w.lines)+" lines  ",z(w.calls)+" draw calls  ")},resize(w,z){return null!=this.context?this.context.resize(z.Size):void 0},pre(w,z){return null!=this.context?this.context.pre(z.Time):void 0},update(w,z){let A;null!=this.context&&this.context.update();(A=null!=
this.context?this.context.camera:void 0)&&A!==z.camera&&(z.camera=A);z.Time.set({speed:this.context.speed});this.progress(this.context.getPending(),z);return null!=this.context?this.context.render():void 0},post(w,z){return null!=this.context?this.context.post():void 0},progress(w,z){if(w||this.pending){var A=Math.max(w+this.options.warmup,this.pending),H=A-w,F=A;z.trigger({type:"mathbox/progress",current:A-w,total:A});0===w&&(A=0);this.pending=A;H!==F||this.warm||(this.warm=!0,this.options.inspect&&
this.info(z))}}})};
shadow$provide[531]=function(D,y,Q,p){function u(oa,Aa){var Pa={},kb;for(kb in oa)Object.prototype.hasOwnProperty.call(oa,kb)&&0>Aa.indexOf(kb)&&(Pa[kb]=oa[kb]);if(null!=oa&&"function"==typeof Object.getOwnPropertySymbols){var La=0;for(kb=Object.getOwnPropertySymbols(oa);La<kb.length;La++)0>Aa.indexOf(kb[La])&&Object.prototype.propertyIsEnumerable.call(oa,kb[La])&&(Pa[kb[La]]=oa[kb[La]])}return Pa}function q(oa){var Aa=-1,Pa=null==oa?0:oa.length;for(this.clear();++Aa<Pa;){var kb=oa[Aa];this.set(kb[0],
kb[1])}}function m(oa){var Aa=-1,Pa=null==oa?0:oa.length;for(this.clear();++Aa<Pa;){var kb=oa[Aa];this.set(kb[0],kb[1])}}function c(oa){var Aa=-1,Pa=null==oa?0:oa.length;for(this.clear();++Aa<Pa;){var kb=oa[Aa];this.set(kb[0],kb[1])}}function f(oa){this.size=(this.__data__=new Pb(oa)).size}function e(oa){var Aa=-1,Pa=null==oa?0:oa.length;for(this.__data__=new bc;++Aa<Pa;)this.add(oa[Aa])}var g=y(1),k=y(7),l=y(530),r=function(){return r=Object.assign||function(oa){for(var Aa,Pa=1,kb=arguments.length;Pa<
kb;Pa++)for(var La in Aa=arguments[Pa])Object.prototype.hasOwnProperty.call(Aa,La)&&(oa[La]=Aa[La]);return oa},r.apply(this,arguments)},v=g.createContext(null),w="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof D?D:"undefined"!=typeof self?self:{},z=function(oa,Aa){return oa===Aa||oa!=oa&&Aa!=Aa},A=function(oa,Aa){for(var Pa=oa.length;Pa--;)if(z(oa[Pa][0],Aa))return Pa;return-1},H=Array.prototype.splice;q.prototype.clear=function(){this.__data__=[];this.size=
0};q.prototype.delete=function(oa){var Aa=this.__data__;oa=A(Aa,oa);return!(0>oa)&&(oa==Aa.length-1?Aa.pop():H.call(Aa,oa,1),--this.size,!0)};q.prototype.get=function(oa){var Aa=this.__data__;oa=A(Aa,oa);return 0>oa?void 0:Aa[oa][1]};q.prototype.has=function(oa){return-1<A(this.__data__,oa)};q.prototype.set=function(oa,Aa){var Pa=this.__data__,kb=A(Pa,oa);return 0>kb?(++this.size,Pa.push([oa,Aa])):Pa[kb][1]=Aa,this};var F="object"==typeof w&&w&&w.Object===Object&&w,L="object"==typeof self&&self&&
self.Object===Object&&self,N=F||L||Function("return this")(),R=N.Symbol,J=Object.prototype,Y=J.hasOwnProperty,fa=J.toString,Z=R?R.toStringTag:void 0,da=Object.prototype.toString,la=R?R.toStringTag:void 0,W=function(oa){if(null==oa)oa=void 0===oa?"[object Undefined]":"[object Null]";else if(la&&la in Object(oa)){var Aa=Y.call(oa,Z),Pa=oa[Z];try{oa[Z]=void 0;var kb=!0}catch(xb){}var La=fa.call(oa);oa=(kb&&(Aa?oa[Z]=Pa:delete oa[Z]),La)}else oa=da.call(oa);return oa},ra=function(oa){var Aa=typeof oa;
return null!=oa&&("object"==Aa||"function"==Aa)},za,O=function(oa){if(!ra(oa))return!1;oa=W(oa);return"[object Function]"==oa||"[object GeneratorFunction]"==oa||"[object AsyncFunction]"==oa||"[object Proxy]"==oa},pa=N["__core-js_shared__"],Ta=(za=/[^.]+$/.exec(pa&&pa.keys&&pa.keys.IE_PROTO||""))?"Symbol(src)_1."+za:"",na=Function.prototype.toString,Ra=function(oa){if(null!=oa){try{return na.call(oa)}catch(Aa){}return oa+""}return""},Wa=/^\[object .+?Constructor\]$/,Xa=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,
"\\$\x26").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ob=function(oa,Aa){oa=null==oa?void 0:oa[Aa];return!ra(oa)||Ta&&Ta in oa||!(O(oa)?Xa:Wa).test(Ra(oa))?void 0:oa},Db=Ob(N,"Map"),Gb=Ob(Object,"create"),ec=Object.prototype.hasOwnProperty,ob=Object.prototype.hasOwnProperty;m.prototype.clear=function(){this.__data__=Gb?Gb(null):{};this.size=0};m.prototype.delete=function(oa){oa=this.has(oa)&&delete this.__data__[oa];return this.size-=oa?1:0,oa};m.prototype.get=
function(oa){var Aa=this.__data__;return Gb?(oa=Aa[oa],"__lodash_hash_undefined__"===oa?void 0:oa):ec.call(Aa,oa)?Aa[oa]:void 0};m.prototype.has=function(oa){var Aa=this.__data__;return Gb?void 0!==Aa[oa]:ob.call(Aa,oa)};m.prototype.set=function(oa,Aa){var Pa=this.__data__;return this.size+=this.has(oa)?0:1,Pa[oa]=Gb&&void 0===Aa?"__lodash_hash_undefined__":Aa,this};var Sb=function(oa,Aa){oa=oa.__data__;var Pa=typeof Aa;return("string"==Pa||"number"==Pa||"symbol"==Pa||"boolean"==Pa?"__proto__"!==
Aa:null===Aa)?oa["string"==typeof Aa?"string":"hash"]:oa.map};c.prototype.clear=function(){this.size=0;this.__data__={hash:new m,map:new (Db||q),string:new m}};c.prototype.delete=function(oa){oa=Sb(this,oa).delete(oa);return this.size-=oa?1:0,oa};c.prototype.get=function(oa){return Sb(this,oa).get(oa)};c.prototype.has=function(oa){return Sb(this,oa).has(oa)};c.prototype.set=function(oa,Aa){var Pa=Sb(this,oa),kb=Pa.size;return Pa.set(oa,Aa),this.size+=Pa.size==kb?0:1,this};var Pb=q;f.prototype.clear=
function(){this.__data__=new q;this.size=0};f.prototype.delete=function(oa){var Aa=this.__data__;oa=Aa.delete(oa);return this.size=Aa.size,oa};f.prototype.get=function(oa){return this.__data__.get(oa)};f.prototype.has=function(oa){return this.__data__.has(oa)};f.prototype.set=function(oa,Aa){var Pa=this.__data__;if(Pa instanceof q){var kb=Pa.__data__;if(!Db||199>kb.length)return kb.push([oa,Aa]),this.size=++Pa.size,this;Pa=this.__data__=new c(kb)}return Pa.set(oa,Aa),this.size=Pa.size,this};var bc=
c;e.prototype.add=e.prototype.push=function(oa){return this.__data__.set(oa,"__lodash_hash_undefined__"),this};e.prototype.has=function(oa){return this.__data__.has(oa)};var pc=function(oa,Aa){for(var Pa=-1,kb=null==oa?0:oa.length;++Pa<kb;)if(Aa(oa[Pa],Pa,oa))return!0;return!1},Eb=function(oa,Aa,Pa,kb,La,xb){var kc=1&Pa,Nb=oa.length,zb=Aa.length;if(Nb!=zb&&!(kc&&zb>Nb))return!1;zb=xb.get(oa);var ka=xb.get(Aa);if(zb&&ka)return zb==Aa&&ka==oa;zb=-1;ka=!0;var tc=2&Pa?new e:void 0;xb.set(oa,Aa);for(xb.set(Aa,
oa);++zb<Nb;){var lc=oa[zb],Fc=Aa[zb];if(kb)var uc=kc?kb(Fc,lc,zb,Aa,oa,xb):kb(lc,Fc,zb,oa,Aa,xb);if(void 0!==uc){if(uc)continue;ka=!1;break}if(tc){if(!pc(Aa,function(fd,Gd){if(!tc.has(Gd)&&(lc===fd||La(lc,fd,Pa,kb,xb)))return tc.push(Gd)})){ka=!1;break}}else if(lc!==Fc&&!La(lc,Fc,Pa,kb,xb)){ka=!1;break}}return xb.delete(oa),xb.delete(Aa),ka},hb=N.Uint8Array,Mb=function(oa){var Aa=-1,Pa=Array(oa.size);return oa.forEach(function(kb,La){Pa[++Aa]=[La,kb]}),Pa},yc=function(oa){var Aa=-1,Pa=Array(oa.size);
return oa.forEach(function(kb){Pa[++Aa]=kb}),Pa},xa=R?R.prototype:void 0,jb=xa?xa.valueOf:void 0,cb=Array.isArray,Ub=function(oa,Aa){for(var Pa=-1,kb=null==oa?0:oa.length,La=0,xb=[];++Pa<kb;){var kc=oa[Pa];Aa(kc,Pa,oa)&&(xb[La++]=kc)}return xb},fc=function(){return[]},Fa=Object.prototype.propertyIsEnumerable,vb=Object.getOwnPropertySymbols,Wb=vb?function(oa){return null==oa?[]:(oa=Object(oa),Ub(vb(oa),function(Aa){return Fa.call(oa,Aa)}))}:fc,Ic=function(oa){return null!=oa&&"object"==typeof oa},
Cc=function(oa){return Ic(oa)&&"[object Arguments]"==W(oa)},nd=Object.prototype,Kd=nd.hasOwnProperty,Uc=nd.propertyIsEnumerable,Vc=Cc(function(){return arguments}())?Cc:function(oa){return Ic(oa)&&Kd.call(oa,"callee")&&!Uc.call(oa,"callee")},Ad={exports:{}},Jd=function(){return!1};!function(oa,Aa){var Pa=(Aa=Aa&&!Aa.nodeType&&Aa)&&oa&&!oa.nodeType&&oa;Aa=Pa&&Pa.exports===Aa?N.Buffer:void 0;oa.exports=(Aa?Aa.isBuffer:void 0)||Jd}(Ad,Ad.exports);var hd=/^(?:0|[1-9]\d*)$/,zd=function(oa){return"number"==
typeof oa&&-1<oa&&0==oa%1&&9007199254740991>=oa},Yb={};Yb["[object Float32Array]"]=Yb["[object Float64Array]"]=Yb["[object Int8Array]"]=Yb["[object Int16Array]"]=Yb["[object Int32Array]"]=Yb["[object Uint8Array]"]=Yb["[object Uint8ClampedArray]"]=Yb["[object Uint16Array]"]=Yb["[object Uint32Array]"]=!0;Yb["[object Arguments]"]=Yb["[object Array]"]=Yb["[object ArrayBuffer]"]=Yb["[object Boolean]"]=Yb["[object DataView]"]=Yb["[object Date]"]=Yb["[object Error]"]=Yb["[object Function]"]=Yb["[object Map]"]=
Yb["[object Number]"]=Yb["[object Object]"]=Yb["[object RegExp]"]=Yb["[object Set]"]=Yb["[object String]"]=Yb["[object WeakMap]"]=!1;var bd={exports:{}};!function(oa,Aa){var Pa=Aa&&!Aa.nodeType&&Aa;Pa=(Aa=Pa&&oa&&!oa.nodeType&&oa)&&Aa.exports===Pa&&F.process;a:{try{var kb=Aa&&Aa.require&&Aa.require("util").types||Pa&&Pa.binding&&Pa.binding("util");break a}catch(La){}kb=void 0}oa.exports=kb}(bd,bd.exports);var md=function(oa){return Ic(oa)&&zd(oa.length)&&!!Yb[W(oa)]},td=function(oa){return function(Aa){return oa(Aa)}},
Vb=bd.exports,Xb=Vb&&Vb.isTypedArray,Ld=Xb?td(Xb):md,Md=Ad.exports,Bd=Object.prototype.hasOwnProperty,od=Object.prototype,Ja=function(oa,Aa){return function(Pa){return oa(Aa(Pa))}}(Object.keys,Object),pd=Object.prototype.hasOwnProperty,Zb=function(oa,Aa,Pa){Aa=Aa(oa);if(!cb(oa)){oa=Pa(oa);Pa=-1;for(var kb=oa.length,La=Aa.length;++Pa<kb;)Aa[La+Pa]=oa[Pa]}return Aa},Mc=function(oa){if(null!=oa&&zd(oa.length)&&!O(oa)){var Aa=cb(oa),Pa=!Aa&&Vc(oa),kb=!Aa&&!Pa&&Md(oa),La=!Aa&&!Pa&&!kb&&Ld(oa);if(Aa=Aa||
Pa||kb||La){Pa=oa.length;for(var xb=String,kc=-1,Nb=Array(Pa);++kc<Pa;)Nb[kc]=xb(kc);Pa=Nb}else Pa=[];xb=Pa.length;for(var zb in oa){if(!(kc=!Bd.call(oa,zb))&&(kc=Aa)&&!(kc="length"==zb||kb&&("offset"==zb||"parent"==zb)||La&&("buffer"==zb||"byteLength"==zb||"byteOffset"==zb))){Nb=zb;var ka=xb,tc=typeof Nb;kc=!!(ka=null==ka?9007199254740991:ka)&&("number"==tc||"symbol"!=tc&&hd.test(Nb))&&-1<Nb&&0==Nb%1&&Nb<ka}kc||Pa.push(zb)}oa=Pa}else if(zb=oa&&oa.constructor,oa===("function"==typeof zb&&zb.prototype||
od)){zb=[];for(kb in Object(oa))pd.call(oa,kb)&&"constructor"!=kb&&zb.push(kb);oa=zb}else oa=Ja(oa);return oa},cd=Object.prototype.hasOwnProperty,Ec=Ob(N,"DataView"),ab=Ob(N,"Promise"),xc=Ob(N,"Set"),Ua=Ob(N,"WeakMap"),Jb=Ra(Ec),Ac=Ra(Db),Jc=Ra(ab),Yd=Ra(xc),oc=Ra(Ua),Cd=W;(Ec&&"[object DataView]"!=Cd(new Ec(new ArrayBuffer(1)))||Db&&"[object Map]"!=Cd(new Db)||ab&&"[object Promise]"!=Cd(ab.resolve())||xc&&"[object Set]"!=Cd(new xc)||Ua&&"[object WeakMap]"!=Cd(new Ua))&&(Cd=function(oa){var Aa=W(oa);
if(oa=(oa="[object Object]"==Aa?oa.constructor:void 0)?Ra(oa):"")switch(oa){case Jb:return"[object DataView]";case Ac:return"[object Map]";case Jc:return"[object Promise]";case Yd:return"[object Set]";case oc:return"[object WeakMap]"}return Aa});var Ae=function(oa,Aa,Pa,kb,La,xb,kc){switch(Pa){case "[object DataView]":if(oa.byteLength!=Aa.byteLength||oa.byteOffset!=Aa.byteOffset)break;oa=oa.buffer;Aa=Aa.buffer;case "[object ArrayBuffer]":return!(oa.byteLength!=Aa.byteLength||!xb(new hb(oa),new hb(Aa)));
case "[object Boolean]":case "[object Date]":case "[object Number]":return z(+oa,+Aa);case "[object Error]":return oa.name==Aa.name&&oa.message==Aa.message;case "[object RegExp]":case "[object String]":return oa==Aa+"";case "[object Map]":var Nb=Mb;case "[object Set]":if(Nb||(Nb=yc),oa.size!=Aa.size&&!(1&kb))break;if(Pa=kc.get(oa))return Pa==Aa;kb|=2;kc.set(oa,Aa);Aa=Eb(Nb(oa),Nb(Aa),kb,La,xb,kc);return kc.delete(oa),Aa;case "[object Symbol]":if(jb)return jb.call(oa)==jb.call(Aa)}return!1},Qb=Cd,
Dd=Ad.exports,Zd=Object.prototype.hasOwnProperty,wd=function kc(Aa,Pa,kb,La,xb){var Nb;if(!(Nb=Aa===Pa)){if(null==Aa||null==Pa||!Ic(Aa)&&!Ic(Pa))var zb=Aa!=Aa&&Pa!=Pa;else a:{Nb=cb(Aa);var ka=cb(Pa),tc=Nb?"[object Array]":Qb(Aa),lc=ka?"[object Array]":Qb(Pa),Fc="[object Object]"==(tc="[object Arguments]"==tc?"[object Object]":tc);ka="[object Object]"==(lc="[object Arguments]"==lc?"[object Object]":lc);if((lc=tc==lc)&&Dd(Aa)){if(!Dd(Pa)){zb=!1;break a}Nb=!0;Fc=!1}if(lc&&!Fc)zb=(xb||(xb=new f),Nb||
Ld(Aa)?Eb(Aa,Pa,kb,La,kc,xb):Ae(Aa,Pa,tc,kb,La,kc,xb));else{if(!(1&kb)&&(Nb=Fc&&Zd.call(Aa,"__wrapped__"),tc=ka&&Zd.call(Pa,"__wrapped__"),Nb||tc)){Aa=Nb?Aa.value():Aa;Pa=tc?Pa.value():Pa;zb=(xb||(xb=new f),kc(Aa,Pa,kb,La,xb));break a}if(Nb=!!lc){xb||(xb=new f);b:if(Nb=1&kb,tc=Zb(Aa,Mc,Wb),ka=tc.length,ka==Zb(Pa,Mc,Wb).length||Nb){for(lc=ka;lc--;){var uc=tc[lc];if(!(Nb?uc in Pa:cd.call(Pa,uc))){Pa=!1;break b}}Fc=xb.get(Aa);uc=xb.get(Pa);if(Fc&&uc)Pa=Fc==Pa&&uc==Aa;else{Fc=!0;xb.set(Aa,Pa);xb.set(Pa,
Aa);for(var fd=Nb;++lc<ka;){var Gd=Aa[uc=tc[lc]],tf=Pa[uc];La&&(zb=Nb?La(tf,Gd,uc,Pa,Aa,xb):La(Gd,tf,uc,Aa,Pa,xb));if(void 0===zb?Gd!==tf&&!kc(Gd,tf,kb,La,xb):!zb){Fc=!1;break}fd||(fd="constructor"==uc)}Fc&&!fd&&(kb=Aa.constructor,La=Pa.constructor,!(kb!=La&&"constructor"in Aa&&"constructor"in Pa)||"function"==typeof kb&&kb instanceof kb&&"function"==typeof La&&La instanceof La||(Fc=!1));Pa=(xb.delete(Aa),xb.delete(Pa),Fc)}}else Pa=!1;Nb=Pa}zb=Nb}}Nb=zb}return Nb},$d="view cartesian cartesian4 polar spherical stereographic stereographic4 transform transform4 vertex fragment layer mask group inherit root unit rtt clock now move present reveal slide".split(" "),
mb=function(Aa){var Pa=$d.includes(Aa),kb=Aa?Aa[0].toLocaleUpperCase()+Aa.slice(1):"";return g.forwardRef(function(La,xb){var kc=g.useReducer(function(uc){return uc+1},0);kc[0];var Nb=kc[1],zb=g.useContext(v),ka=g.useRef(null),tc=g.useRef(void 0);g.useEffect(function(){return function(){ka.current&&(ka.current.remove(),ka.current=null)}},[]);g.useImperativeHandle(xb,function(){return ka.current});La.children;var lc=La.liveProps,Fc=u(La,["children","liveProps"]);if(g.useEffect(function(){zb&&(function(uc){for(;uc._up;)uc=
uc._up;return void 0===uc.three}(zb)?Nb():(ka.current&&(function(uc,fd){var Gd;return(null===(Gd=uc._up)||void 0===Gd?void 0:Gd[0])===fd[0]}(ka.current,zb)||(ka.current.remove(),ka.current=null,Nb())),ka.current?(tc.current&&lc!==tc.current&&Object.keys(tc.current).forEach(function(uc){ka.current.unbind(uc)}),lc&&lc!==tc.current&&ka.current.bind(lc),ka.current.set(Fc)):(ka.current=zb[Aa](Fc,lc),Nb()),tc.current=lc))},[zb,Fc,lc]),!Pa){if(La.children)throw Error("Component \x3c".concat(kb," /\x3e cannot have children."));
return null}return g.createElement(v.Provider,{value:ka.current},La.children)})},ie=mb("area"),ke=mb("array"),Gc=mb("axis"),je=mb("camera"),ae=mb("cartesian"),ic=mb("cartesian4"),id=mb("clamp"),le=mb("clock"),Yc=mb("compose"),Wc=mb("dom"),ub=mb("face"),me=mb("format"),dc=mb("fragment"),Da=mb("grid"),qc=mb("group"),mc=mb("grow"),Nd=mb("html"),Xc=mb("inherit"),Of=mb("interval"),lf=mb("join"),Pf=mb("label"),mf=mb("layer"),be=mb("lerp"),Ne=mb("line"),nf=mb("mask"),Xd=mb("matrix"),ze=mb("memo"),kf=mb("move"),
Be=mb("now"),Oe=mb("play"),ce=mb("point"),X=mb("polar"),E=mb("present"),x=mb("readback"),d=mb("repeat"),B=mb("resample"),P=mb("retext"),ca=mb("reveal"),Ba=mb("rtt"),ib=mb("scale"),Ib=mb("shader"),Oc=mb("slice"),Tc=mb("slide"),Lc=mb("spherical"),ud=mb("split"),vd=mb("spread"),Nf=mb("step"),Ue=mb("stereographic"),Wf=mb("stereographic4"),Hg=mb("strip"),Ig=mb("subdivide"),Jg=mb("surface"),xd=mb("swizzle"),pe=mb("text"),Xf=mb("ticks"),Kg=mb("transform"),Yf=mb("transform4"),Zf=mb("transpose"),Wh=mb("unit"),
Lg=mb("vector"),Mg=mb("vertex"),bg=mb("view"),Ng=mb("volume"),Kc=mb("voxel"),Od=g.forwardRef(function(Aa,Pa){var kb,La,xb,kc=Aa.container,Nb=Aa.children,zb=Aa.options,ka=u(Aa,["container","children","options"]),tc=(kb=null!=zb?zb:{},La={},xb=g.useRef(La),g.useMemo(function(){return wd(kb,xb.current)?xb.current:(xb.current=kb,kb)},[kb]));Aa=g.useState(null);var lc=Aa[0],Fc=Aa[1];return g.useEffect(function(){if(!kc)return function(){};var uc=l.mathBox(r(r({},tc),{element:kc}));return Fc(uc),uc.three.renderer.setClearColor(new k.Color(16777215),
1),uc.three.camera.position.set(1,1,2),function(){uc.select("*").remove();uc.three.destroy();Fc(null)}},[kc,tc]),g.useEffect(function(){lc&&lc.set(ka)},[lc,ka]),g.useImperativeHandle(Pa,function(){return lc},[lc]),g.createElement(v.Provider,{value:lc},Nb)}),Zc=g.forwardRef(function(Aa,Pa){var kb=Aa.children,La=Aa.containerId,xb=Aa.containerClass,kc=Aa.containerStyle;Aa=u(Aa,["children","containerId","containerClass","containerStyle"]);var Nb=g.useState(null),zb=Nb[0];return g.createElement("div",
{ref:Nb[1],id:La,className:xb,style:kc},zb&&g.createElement(Od,r({ref:Pa,container:zb},Aa),kb))});p.Area=ie;p.Array=ke;p.Axis=Gc;p.Camera=je;p.Cartesian=ae;p.Cartesian4=ic;p.Clamp=id;p.Clock=le;p.Compose=Yc;p.ContainedMathbox=Zc;p.Dom=Wc;p.Face=ub;p.Format=me;p.Fragment=dc;p.Grid=Da;p.Group=qc;p.Grow=mc;p.Html=Nd;p.Inherit=Xc;p.Interval=Of;p.Join=lf;p.Label=Pf;p.Layer=mf;p.Lerp=be;p.Line=Ne;p.Mask=nf;p.Mathbox=Od;p.Matrix=Xd;p.Memo=ze;p.Move=kf;p.Now=Be;p.Play=Oe;p.Point=ce;p.Polar=X;p.Present=E;
p.Readback=x;p.Repeat=d;p.Resample=B;p.Retext=P;p.Reveal=ca;p.Rtt=Ba;p.Scale=ib;p.Shader=Ib;p.Slice=Oc;p.Slide=Tc;p.Spherical=Lc;p.Split=ud;p.Spread=vd;p.Step=Nf;p.Stereographic=Ue;p.Stereographic4=Wf;p.Strip=Hg;p.Subdivide=Ig;p.Surface=Jg;p.Swizzle=xd;p.Text=pe;p.Ticks=Xf;p.Transform=Kg;p.Transform4=Yf;p.Transpose=Zf;p.Unit=Wh;p.Vector=Lg;p.Vertex=Mg;p.View=bg;p.Volume=Ng;p.Voxel=Kc};
shadow$provide[532]=function(D,y,Q,p){Object.defineProperty(p,"__esModule",{value:!0});p.MapControls=p.OrbitControls=void 0;var u=y(7);const q={type:"change"},m={type:"start"},c={type:"end"};class f extends u.EventDispatcher{constructor(g,k){function l(){return Math.pow(.95,na.zoomSpeed)}function r(Fa){Ob.theta-=Fa}function v(Fa){Ob.phi-=Fa}function w(Fa){na.object.isPerspectiveCamera?Db/=Fa:na.object.isOrthographicCamera?(na.object.zoom=Math.max(na.minZoom,Math.min(na.maxZoom,na.object.zoom*Fa)),
na.object.updateProjectionMatrix(),ec=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),na.enableZoom=!1)}function z(Fa){na.object.isPerspectiveCamera?Db*=Fa:na.object.isOrthographicCamera?(na.object.zoom=Math.max(na.minZoom,Math.min(na.maxZoom,na.object.zoom/Fa)),na.object.updateProjectionMatrix(),ec=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),na.enableZoom=!1)}function A(){1===xa.length?
ob.set(xa[0].pageX,xa[0].pageY):ob.set(.5*(xa[0].pageX+xa[1].pageX),.5*(xa[0].pageY+xa[1].pageY))}function H(){1===xa.length?bc.set(xa[0].pageX,xa[0].pageY):bc.set(.5*(xa[0].pageX+xa[1].pageX),.5*(xa[0].pageY+xa[1].pageY))}function F(){const Fa=xa[0].pageX-xa[1].pageX,vb=xa[0].pageY-xa[1].pageY;hb.set(0,Math.sqrt(Fa*Fa+vb*vb))}function L(Fa){if(1==xa.length)Sb.set(Fa.pageX,Fa.pageY);else{const vb=Ta(Fa);Sb.set(.5*(Fa.pageX+vb.x),.5*(Fa.pageY+vb.y))}Pb.subVectors(Sb,ob).multiplyScalar(na.rotateSpeed);
Fa=na.domElement;r(2*Math.PI*Pb.x/Fa.clientHeight);v(2*Math.PI*Pb.y/Fa.clientHeight);ob.copy(Sb)}function N(Fa){if(1===xa.length)pc.set(Fa.pageX,Fa.pageY);else{const vb=Ta(Fa);pc.set(.5*(Fa.pageX+vb.x),.5*(Fa.pageY+vb.y))}Eb.subVectors(pc,bc).multiplyScalar(na.panSpeed);fc(Eb.x,Eb.y);bc.copy(pc)}function R(Fa){const vb=Ta(Fa),Wb=Fa.pageX-vb.x;Fa=Fa.pageY-vb.y;Mb.set(0,Math.sqrt(Wb*Wb+Fa*Fa));yc.set(0,Math.pow(Mb.y/hb.y,na.zoomSpeed));w(yc.y);hb.copy(Mb)}function J(Fa){!1!==na.enabled&&(0===xa.length&&
(na.domElement.setPointerCapture(Fa.pointerId),na.domElement.addEventListener("pointermove",Y),na.domElement.addEventListener("pointerup",fa)),xa.push(Fa),"touch"===Fa.pointerType?ra(Fa):da(Fa))}function Y(Fa){if(!1!==na.enabled)if("touch"===Fa.pointerType)switch(pa(Fa),Wa){case Ra.TOUCH_ROTATE:if(!1===na.enableRotate)break;L(Fa);na.update();break;case Ra.TOUCH_PAN:if(!1===na.enablePan)break;N(Fa);na.update();break;case Ra.TOUCH_DOLLY_PAN:if(!1===na.enableZoom&&!1===na.enablePan)break;na.enableZoom&&
R(Fa);na.enablePan&&N(Fa);na.update();break;case Ra.TOUCH_DOLLY_ROTATE:if(!1===na.enableZoom&&!1===na.enableRotate)break;na.enableZoom&&R(Fa);na.enableRotate&&L(Fa);na.update();break;default:Wa=Ra.NONE}else a:switch(Wa){case Ra.ROTATE:if(!1===na.enableRotate)break a;Sb.set(Fa.clientX,Fa.clientY);Pb.subVectors(Sb,ob).multiplyScalar(na.rotateSpeed);Fa=na.domElement;r(2*Math.PI*Pb.x/Fa.clientHeight);v(2*Math.PI*Pb.y/Fa.clientHeight);ob.copy(Sb);na.update();break;case Ra.DOLLY:if(!1===na.enableZoom)break a;
Mb.set(Fa.clientX,Fa.clientY);yc.subVectors(Mb,hb);0<yc.y?w(l()):0>yc.y&&z(l());hb.copy(Mb);na.update();break;case Ra.PAN:!1!==na.enablePan&&(pc.set(Fa.clientX,Fa.clientY),Eb.subVectors(pc,bc).multiplyScalar(na.panSpeed),fc(Eb.x,Eb.y),bc.copy(pc),na.update())}}function fa(Fa){O(Fa);0===xa.length&&(na.domElement.releasePointerCapture(Fa.pointerId),na.domElement.removeEventListener("pointermove",Y),na.domElement.removeEventListener("pointerup",fa));na.dispatchEvent(c);Wa=Ra.NONE}function Z(Fa){O(Fa)}
function da(Fa){let vb;switch(Fa.button){case 0:vb=na.mouseButtons.LEFT;break;case 1:vb=na.mouseButtons.MIDDLE;break;case 2:vb=na.mouseButtons.RIGHT;break;default:vb=-1}switch(vb){case u.MOUSE.DOLLY:if(!1===na.enableZoom)return;hb.set(Fa.clientX,Fa.clientY);Wa=Ra.DOLLY;break;case u.MOUSE.ROTATE:if(Fa.ctrlKey||Fa.metaKey||Fa.shiftKey){if(!1===na.enablePan)return;bc.set(Fa.clientX,Fa.clientY);Wa=Ra.PAN}else{if(!1===na.enableRotate)return;ob.set(Fa.clientX,Fa.clientY);Wa=Ra.ROTATE}break;case u.MOUSE.PAN:if(Fa.ctrlKey||
Fa.metaKey||Fa.shiftKey){if(!1===na.enableRotate)return;ob.set(Fa.clientX,Fa.clientY);Wa=Ra.ROTATE}else{if(!1===na.enablePan)return;bc.set(Fa.clientX,Fa.clientY);Wa=Ra.PAN}break;default:Wa=Ra.NONE}Wa!==Ra.NONE&&na.dispatchEvent(m)}function la(Fa){!1!==na.enabled&&!1!==na.enableZoom&&Wa===Ra.NONE&&(Fa.preventDefault(),na.dispatchEvent(m),0>Fa.deltaY?z(l()):0<Fa.deltaY&&w(l()),na.update(),na.dispatchEvent(c))}function W(Fa){if(!1!==na.enabled&&!1!==na.enablePan){var vb=!1;switch(Fa.code){case na.keys.UP:Fa.ctrlKey||
Fa.metaKey||Fa.shiftKey?v(2*Math.PI*na.rotateSpeed/na.domElement.clientHeight):fc(0,na.keyPanSpeed);vb=!0;break;case na.keys.BOTTOM:Fa.ctrlKey||Fa.metaKey||Fa.shiftKey?v(-2*Math.PI*na.rotateSpeed/na.domElement.clientHeight):fc(0,-na.keyPanSpeed);vb=!0;break;case na.keys.LEFT:Fa.ctrlKey||Fa.metaKey||Fa.shiftKey?r(2*Math.PI*na.rotateSpeed/na.domElement.clientHeight):fc(na.keyPanSpeed,0);vb=!0;break;case na.keys.RIGHT:Fa.ctrlKey||Fa.metaKey||Fa.shiftKey?r(-2*Math.PI*na.rotateSpeed/na.domElement.clientHeight):
fc(-na.keyPanSpeed,0),vb=!0}vb&&(Fa.preventDefault(),na.update())}}function ra(Fa){pa(Fa);switch(xa.length){case 1:switch(na.touches.ONE){case u.TOUCH.ROTATE:if(!1===na.enableRotate)return;A();Wa=Ra.TOUCH_ROTATE;break;case u.TOUCH.PAN:if(!1===na.enablePan)return;H();Wa=Ra.TOUCH_PAN;break;default:Wa=Ra.NONE}break;case 2:switch(na.touches.TWO){case u.TOUCH.DOLLY_PAN:if(!1===na.enableZoom&&!1===na.enablePan)return;na.enableZoom&&F();na.enablePan&&H();Wa=Ra.TOUCH_DOLLY_PAN;break;case u.TOUCH.DOLLY_ROTATE:if(!1===
na.enableZoom&&!1===na.enableRotate)return;na.enableZoom&&F();na.enableRotate&&A();Wa=Ra.TOUCH_DOLLY_ROTATE;break;default:Wa=Ra.NONE}break;default:Wa=Ra.NONE}Wa!==Ra.NONE&&na.dispatchEvent(m)}function za(Fa){!1!==na.enabled&&Fa.preventDefault()}function O(Fa){delete jb[Fa.pointerId];for(let vb=0;vb<xa.length;vb++)if(xa[vb].pointerId==Fa.pointerId){xa.splice(vb,1);break}}function pa(Fa){let vb=jb[Fa.pointerId];void 0===vb&&(vb=new u.Vector2,jb[Fa.pointerId]=vb);vb.set(Fa.pageX,Fa.pageY)}function Ta(Fa){return jb[(Fa.pointerId===
xa[0].pointerId?xa[1]:xa[0]).pointerId]}super();this.object=g;this.domElement=k;this.domElement.style.touchAction="none";this.enabled=!0;this.target=new u.Vector3;this.minDistance=0;this.maxDistance=Infinity;this.minZoom=0;this.maxZoom=Infinity;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.minAzimuthAngle=-Infinity;this.maxAzimuthAngle=Infinity;this.enableDamping=!1;this.dampingFactor=.05;this.enableZoom=!0;this.zoomSpeed=1;this.enableRotate=!0;this.rotateSpeed=1;this.enablePan=!0;this.panSpeed=
1;this.screenSpacePanning=!0;this.keyPanSpeed=7;this.autoRotate=!1;this.autoRotateSpeed=2;this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"};this.mouseButtons={LEFT:u.MOUSE.ROTATE,MIDDLE:u.MOUSE.DOLLY,RIGHT:u.MOUSE.PAN};this.touches={ONE:u.TOUCH.ROTATE,TWO:u.TOUCH.DOLLY_PAN};this.target0=this.target.clone();this.position0=this.object.position.clone();this.zoom0=this.object.zoom;this._domElementKeyEvents=null;this.getPolarAngle=function(){return Xa.phi};this.getAzimuthalAngle=
function(){return Xa.theta};this.getDistance=function(){return this.object.position.distanceTo(this.target)};this.listenToKeyEvents=function(Fa){Fa.addEventListener("keydown",W);this._domElementKeyEvents=Fa};this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",W);this._domElementKeyEvents=null};this.saveState=function(){na.target0.copy(na.target);na.position0.copy(na.object.position);na.zoom0=na.object.zoom};this.reset=function(){na.target.copy(na.target0);
na.object.position.copy(na.position0);na.object.zoom=na.zoom0;na.object.updateProjectionMatrix();na.dispatchEvent(q);na.update();Wa=Ra.NONE};this.update=function(){const Fa=new u.Vector3,vb=(new u.Quaternion).setFromUnitVectors(g.up,new u.Vector3(0,1,0)),Wb=vb.clone().invert(),Ic=new u.Vector3,Cc=new u.Quaternion,nd=2*Math.PI;return function(){const Kd=na.object.position;Fa.copy(Kd).sub(na.target);Fa.applyQuaternion(vb);Xa.setFromVector3(Fa);na.autoRotate&&Wa===Ra.NONE&&r(2*Math.PI/60/60*na.autoRotateSpeed);
na.enableDamping?(Xa.theta+=Ob.theta*na.dampingFactor,Xa.phi+=Ob.phi*na.dampingFactor):(Xa.theta+=Ob.theta,Xa.phi+=Ob.phi);let Uc=na.minAzimuthAngle,Vc=na.maxAzimuthAngle;isFinite(Uc)&&isFinite(Vc)&&(Uc<-Math.PI?Uc+=nd:Uc>Math.PI&&(Uc-=nd),Vc<-Math.PI?Vc+=nd:Vc>Math.PI&&(Vc-=nd),Xa.theta=Uc<=Vc?Math.max(Uc,Math.min(Vc,Xa.theta)):Xa.theta>(Uc+Vc)/2?Math.max(Uc,Xa.theta):Math.min(Vc,Xa.theta));Xa.phi=Math.max(na.minPolarAngle,Math.min(na.maxPolarAngle,Xa.phi));Xa.makeSafe();Xa.radius*=Db;Xa.radius=
Math.max(na.minDistance,Math.min(na.maxDistance,Xa.radius));!0===na.enableDamping?na.target.addScaledVector(Gb,na.dampingFactor):na.target.add(Gb);Fa.setFromSpherical(Xa);Fa.applyQuaternion(Wb);Kd.copy(na.target).add(Fa);na.object.lookAt(na.target);!0===na.enableDamping?(Ob.theta*=1-na.dampingFactor,Ob.phi*=1-na.dampingFactor,Gb.multiplyScalar(1-na.dampingFactor)):(Ob.set(0,0,0),Gb.set(0,0,0));Db=1;return ec||1E-6<Ic.distanceToSquared(na.object.position)||1E-6<8*(1-Cc.dot(na.object.quaternion))?(na.dispatchEvent(q),
Ic.copy(na.object.position),Cc.copy(na.object.quaternion),ec=!1,!0):!1}}();this.dispose=function(){na.domElement.removeEventListener("contextmenu",za);na.domElement.removeEventListener("pointerdown",J);na.domElement.removeEventListener("pointercancel",Z);na.domElement.removeEventListener("wheel",la);na.domElement.removeEventListener("pointermove",Y);na.domElement.removeEventListener("pointerup",fa);null!==na._domElementKeyEvents&&(na._domElementKeyEvents.removeEventListener("keydown",W),na._domElementKeyEvents=
null)};const na=this,Ra={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let Wa=Ra.NONE;const Xa=new u.Spherical,Ob=new u.Spherical;let Db=1;const Gb=new u.Vector3;let ec=!1;const ob=new u.Vector2,Sb=new u.Vector2,Pb=new u.Vector2,bc=new u.Vector2,pc=new u.Vector2,Eb=new u.Vector2,hb=new u.Vector2,Mb=new u.Vector2,yc=new u.Vector2,xa=[],jb={},cb=function(){const Fa=new u.Vector3;return function(vb,Wb){Fa.setFromMatrixColumn(Wb,0);Fa.multiplyScalar(-vb);
Gb.add(Fa)}}(),Ub=function(){const Fa=new u.Vector3;return function(vb,Wb){!0===na.screenSpacePanning?Fa.setFromMatrixColumn(Wb,1):(Fa.setFromMatrixColumn(Wb,0),Fa.crossVectors(na.object.up,Fa));Fa.multiplyScalar(vb);Gb.add(Fa)}}(),fc=function(){const Fa=new u.Vector3;return function(vb,Wb){const Ic=na.domElement;if(na.object.isPerspectiveCamera){Fa.copy(na.object.position).sub(na.target);let Cc=Fa.length();Cc*=Math.tan(na.object.fov/2*Math.PI/180);cb(2*vb*Cc/Ic.clientHeight,na.object.matrix);Ub(2*
Wb*Cc/Ic.clientHeight,na.object.matrix)}else na.object.isOrthographicCamera?(cb(vb*(na.object.right-na.object.left)/na.object.zoom/Ic.clientWidth,na.object.matrix),Ub(Wb*(na.object.top-na.object.bottom)/na.object.zoom/Ic.clientHeight,na.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),na.enablePan=!1)}}();na.domElement.addEventListener("contextmenu",za);na.domElement.addEventListener("pointerdown",J);na.domElement.addEventListener("pointercancel",
Z);na.domElement.addEventListener("wheel",la,{passive:!1});this.update()}}p.OrbitControls=f;class e extends f{constructor(g,k){super(g,k);this.screenSpacePanning=!1;this.mouseButtons.LEFT=u.MOUSE.PAN;this.mouseButtons.RIGHT=u.MOUSE.ROTATE;this.touches.ONE=u.TOUCH.PAN;this.touches.TWO=u.TOUCH.DOLLY_ROTATE}}p.MapControls=e};
'use strict';var U$=function(a){return new $APP.nFa(a)},lHb=function(a,b){$APP.bJ.useEffect(function(){$APP.m(b)&&(b.j?b.j(a):b.call(null,a));if($APP.m(a))return function(){return $APP.m(b)?b.j?b.j(null):b.call(null,null):null}},[a])},pHb=function(a,b){b=$APP.hf(b);var c=$APP.F.o(b,mHb),d=$APP.F.o(b,nHb);$APP.bJ.useEffect(function(){if($APP.m(a)){var e=a.three.renderer;$APP.m(c)?e.setClearColor($APP.m(c.isColor)?c:new oHb.Color(c),$APP.m(d)?d:e.getClearAlpha()):$APP.m(d)&&e.setClearAlpha(d)}},[a,
c,d])},qHb=function(a,b,c){return function(){$APP.m($APP.m(a)?c:a)&&(a.three.controls[b]=c)}},rHb=function(a,b){$APP.bJ.useEffect(function(){if($APP.m($APP.m(a)?$APP.v(b):a)){for(var c=$APP.v(b),d=null,e=0,f=0;;)if(f<e){var g=d.Y(null,f),h=$APP.C.v(g,0,null);g=$APP.C.v(g,1,null);a.three.on($APP.Nh(h),g);f+=1}else if(c=$APP.v(c))$APP.$d(c)?(e=$APP.Hc(c),c=$APP.Ic(c),d=e,e=$APP.zd(e)):(e=$APP.x(c),d=$APP.C.v(e,0,null),e=$APP.C.v(e,1,null),a.three.on($APP.Nh(d),e),c=$APP.z(c),d=null,e=0),f=0;else break;
return function(){for(var p=$APP.v(b),n=null,t=0,w=0;;)if(w<t){var y=n.Y(null,w),B=$APP.C.v(y,0,null);y=$APP.C.v(y,1,null);a.three.off($APP.Nh(B),y);w+=1}else if(p=$APP.v(p))$APP.$d(p)?(n=$APP.Hc(p),p=$APP.Ic(p),B=n,t=$APP.zd(n),n=B):(n=$APP.x(p),B=$APP.C.v(n,0,null),y=$APP.C.v(n,1,null),a.three.off($APP.Nh(B),y),p=$APP.z(p),n=null,t=0),w=0;else return null}}},[a,b])},sHb=new $APP.u(null,"Spherical","Spherical",1316206718,null),tHb=new $APP.u("mathbox.primitives","Resample","mathbox.primitives/Resample",
-1111983593,null),uHb=new $APP.u("mathbox.primitives","Clamp","mathbox.primitives/Clamp",1137063655,null),vHb=new $APP.u("mathbox.primitives","Scale","mathbox.primitives/Scale",570368639,null),wHb=new $APP.H(null,"ref","ref",1289896967),xHb=new $APP.u("mathbox.core","threestrap-defaults","mathbox.core/threestrap-defaults",1294638534,null),yHb=new $APP.u(null,"Text","Text",-2054460644,null),zHb=new $APP.u(null,"Vector","Vector",872890327,null),AHb=new $APP.u("mathbox.primitives","Play","mathbox.primitives/Play",
180224833,null),BHb=new $APP.u("mathbox.primitives","Grid","mathbox.primitives/Grid",-988235849,null),CHb=new $APP.u(null,"Lerp","Lerp",-1702516612,null),DHb=new $APP.u("mathbox.primitives","Grow","mathbox.primitives/Grow",400222057,null),EHb=new $APP.u("mathbox.primitives","Reveal","mathbox.primitives/Reveal",132115850,null),FHb=new $APP.u(null,"Shader","Shader",1685374417,null),GHb=new $APP.u("mathbox.primitives","Fragment","mathbox.primitives/Fragment",429273026,null),HHb=new $APP.u(null,"Html",
"Html",-1695147201,null),IHb=new $APP.u(null,"Camera","Camera",-1408338669,null),JHb=new $APP.u(null,"Axis","Axis",1020368522,null),KHb=new $APP.H(null,"camera","camera",-1190348585),LHb=new $APP.u(null,"Group","Group",-1810497176,null),MHb=new $APP.u("mathbox.primitives","Interval","mathbox.primitives/Interval",1202840225,null),mHb=new $APP.H(null,"background-color","background-color",570434026),NHb=new $APP.u("mathbox.primitives","Present","mathbox.primitives/Present",15337402,null),OHb=new $APP.u("mathbox.primitives",
"Stereographic","mathbox.primitives/Stereographic",1764922406,null),PHb=new $APP.u("mathbox.primitives","Swizzle","mathbox.primitives/Swizzle",324393110,null),QHb=new $APP.u("mathbox.primitives","Matrix","mathbox.primitives/Matrix",1981821632,null),RHb=new $APP.u(null,"Dom","Dom",-1903068682,null),SHb=new $APP.u("mathbox.primitives","Spherical","mathbox.primitives/Spherical",1157296007,null),THb=new $APP.u("mathbox.primitives","Volume","mathbox.primitives/Volume",1655402604,null),UHb=new $APP.u("mathbox.primitives",
"Transpose","mathbox.primitives/Transpose",104160466,null),VHb=new $APP.u("mathbox.primitives","Line","mathbox.primitives/Line",-1270459063,null),WHb=new $APP.u("mathbox.primitives","Rtt","mathbox.primitives/Rtt",-358152424,null),XHb=new $APP.u("mathbox.primitives","Area","mathbox.primitives/Area",1617026373,null),YHb=new $APP.H(null,"controls","controls",1340701452),ZHb=new $APP.u(null,"Point","Point",-2145220521,null),$Hb=new $APP.u(null,"Mask","Mask",-375651427,null),aIb=new $APP.u(null,"Layer",
"Layer",-1498190011,null),bIb=new $APP.u(null,"Step","Step",-816692470,null),cIb=new $APP.u(null,"mathbox.primitives","mathbox.primitives",1541076194,null),dIb=new $APP.u(null,"Stereographic4","Stereographic4",-287163216,null),eIb=new $APP.u(null,"Voxel","Voxel",1540726319,null),fIb=new $APP.u(null,"Move","Move",-687448615,null),gIb=new $APP.u("mathbox.primitives","Array","mathbox.primitives/Array",-313915872,null),hIb=new $APP.u(null,"Split","Split",-1276645785,null),iIb=new $APP.u(null,"Subdivide",
"Subdivide",-462061977,null),jIb=new $APP.u(null,"Present","Present",-111102675,null),kIb=new $APP.u(null,"Compose","Compose",-248875139,null),lIb=new $APP.u(null,"Join","Join",767879419,null),mIb=new $APP.u(null,"Interval","Interval",1278783288,null),nIb=new $APP.u("mathbox.primitives","Inherit","mathbox.primitives/Inherit",-191332945,null),oIb=new $APP.u(null,"Unit","Unit",1086897223,null),pIb=new $APP.u(null,"Inherit","Inherit",-1912525274,null),qIb=new $APP.H(null,"containerClass","containerClass",
-101509595),rIb=new $APP.u("mathbox.primitives","Vector","mathbox.primitives/Vector",1032645708,null),sIb=new $APP.u(null,"Retext","Retext",571350357,null),tIb=new $APP.u(null,"View","View",-131475192,null),uIb=new $APP.u(null,"Resample","Resample",-1271815010,null),vIb=new $APP.u("mathbox.primitives","Memo","mathbox.primitives/Memo",-500462083,null),wIb=new $APP.u("mathbox.primitives","Camera","mathbox.primitives/Camera",-1433074788,null),xIb=new $APP.u("mathbox.primitives","Group","mathbox.primitives/Group",
-1836231535,null),yIb=new $APP.u("mathbox.primitives","Retext","mathbox.primitives/Retext",750297308,null),zIb=new $APP.u("mathbox.primitives","Surface","mathbox.primitives/Surface",1749844142,null),AIb=new $APP.u("mathbox.primitives","Face","mathbox.primitives/Face",956501375,null),BIb=new $APP.u(null,"Slide","Slide",1579331222,null),CIb=new $APP.u(null,"Polar","Polar",-382168682,null),DIb=new $APP.u(null,"Label","Label",-2133777657,null),EIb=new $APP.u("mathbox.primitives","Point","mathbox.primitives/Point",
-2035787060,null),FIb=new $APP.u("mathbox.primitives","Layer","mathbox.primitives/Layer",-1606831668,null),GIb=new $APP.u(null,"Clock","Clock",-1252752132,null),V$=new $APP.u(null,"props","props",2093813254,null),HIb=new $APP.u(null,"Cartesian","Cartesian",-1514043068,null),IIb=new $APP.u(null,"Now","Now",1010719241,null),JIb=new $APP.u("mathbox.primitives","Format","mathbox.primitives/Format",-1307425389,null),KIb=new $APP.H(null,"max-distance","max-distance",848042358),LIb=new $APP.u(null,"Slice",
"Slice",-1270834964,null),MIb=new $APP.u("mathbox.primitives","Subdivide","mathbox.primitives/Subdivide",-470832642,null),NIb=new $APP.u(null,"Fragment","Fragment",388889675,null),OIb=new $APP.H(null,"threestrap","threestrap",791250519),PIb=new $APP.u(null,"Ticks","Ticks",-469763046,null),QIb=new $APP.u(null,"Transform","Transform",-881921137,null),RIb=new $APP.u("mathbox.primitives","Cartesian","mathbox.primitives/Cartesian",-1354081315,null),SIb=new $APP.u("mathbox.primitives","Unit","mathbox.primitives/Unit",
2058437326,null),TIb=new $APP.u("mathbox.primitives","Stereographic4","mathbox.primitives/Stereographic4",-462845377,null),W$=new $APP.u(null,"children","children",699969545,null),UIb=new $APP.u(null,"Stereographic","Stereographic",1739074233,null),VIb=new $APP.u("mathbox.primitives","View","mathbox.primitives/View",-5042301,null),WIb=new $APP.u(null,"Reveal","Reveal",1011391251,null),XIb=new $APP.H(null,"renderer","renderer",336841071),YIb=new $APP.u(null,"Memo","Memo",-56475788,null),ZIb=new $APP.u(null,
"Strip","Strip",1159860619,null),$Ib=new $APP.u("mathbox.primitives","Transform","mathbox.primitives/Transform",-1243339258,null),aJb=new $APP.u(null,"Transform4","Transform4",-1726980308,null),bJb=new $APP.u(null,"Vertex","Vertex",-512523831,null),cJb=new $APP.H(null,"containerId","containerId",545549578),dJb=new $APP.u("mathbox.primitives","Move","mathbox.primitives/Move",-661788090,null),eJb=new $APP.u("mathbox.primitives","Compose","mathbox.primitives/Compose",-2940428,null),fJb=new $APP.u("mathbox.primitives",
"Readback","mathbox.primitives/Readback",-897225244,null),gJb=new $APP.u("mathbox.primitives","Shader","mathbox.primitives/Shader",-1697795990,null),hJb=new $APP.u(null,"MathBox","MathBox",1267820069,null),iJb=new $APP.u("mathbox.primitives","Join","mathbox.primitives/Join",660585058,null),jJb=new $APP.H(null,"klass","klass",-1386752349),kJb=new $APP.H(null,"f\x3e","f\x3e",1484564198),lJb=new $APP.u("mathbox.primitives","Slide","mathbox.primitives/Slide",1353572641,null),mJb=new $APP.u(null,"Format",
"Format",-1182429160,null),nJb=new $APP.u("mathbox.primitives","Slice","mathbox.primitives/Slice",-1294348699,null),oJb=new $APP.H(null,"on","on",173873944),pJb=new $APP.u(null,"threestrap-defaults","threestrap-defaults",1862651176,null),qJb=new $APP.u(null,"Cartesian4","Cartesian4",208408284,null),rJb=new $APP.u("mathbox.primitives","Clock","mathbox.primitives/Clock",-1930546827,null),sJb=new $APP.u("mathbox.primitives","Now","mathbox.primitives/Now",933701808,null),nHb=new $APP.H(null,"background-opacity",
"background-opacity",-1073748756),tJb=new $APP.H(null,"containerStyle","containerStyle",-1828381609),uJb=new $APP.H(null,"plugins","plugins",1900073717),vJb=new $APP.u("mathbox.primitives","Voxel","mathbox.primitives/Voxel",1345267876,null),wJb=new $APP.u(null,"Face","Face",1066942710,null),xJb=new $APP.u("mathbox.primitives","Split","mathbox.primitives/Split",-1183933028,null),yJb=new $APP.u("mathbox.primitives","Transform4","mathbox.primitives/Transform4",-1869959749,null),zJb=new $APP.u("mathbox.primitives",
"Lerp","mathbox.primitives/Lerp",-1827866933,null),AJb=new $APP.u("mathbox.primitives","Ticks","mathbox.primitives/Ticks",-361320827,null),BJb=new $APP.u("mathbox.primitives","Repeat","mathbox.primitives/Repeat",-1574268723,null),CJb=new $APP.u(null,"Matrix","Matrix",2091502681,null),DJb=new $APP.u(null,"Grow","Grow",508637906,null),EJb=new $APP.u(null,"Clamp","Clamp",976282718,null),FJb=new $APP.u(null,"Surface","Surface",1673998871,null),GJb=new $APP.u(null,"Spread","Spread",-1805618163,null),HJb=
new $APP.u("mathbox.primitives","Vertex","mathbox.primitives/Vertex",-335881150,null),IJb=new $APP.H(null,"container","container",-1736937707),JJb=new $APP.u(null,"Swizzle","Swizzle",450790761,null),KJb=new $APP.u("mathbox.core","MathBox","mathbox.core/MathBox",-1451256013,null),LJb=new $APP.u("mathbox.primitives","Polar","mathbox.primitives/Polar",-1749556723,null),MJb=new $APP.u(null,"Scale","Scale",662043888,null),NJb=new $APP.u(null,"Play","Play",3494344,null),OJb=new $APP.u("mathbox.primitives",
"Text","mathbox.primitives/Text",-1961772649,null),PJb=new $APP.u(null,"Grid","Grid",-593239492,null),QJb=new $APP.u("mathbox.primitives","Label","mathbox.primitives/Label",-1901552196,null),RJb=new $APP.u("mathbox.primitives","Dom","mathbox.primitives/Dom",-2079934705,null),SJb=new $APP.u(null,"Transpose","Transpose",213658457,null),TJb=new $APP.u("mathbox.primitives","Cartesian4","mathbox.primitives/Cartesian4",115701845,null),UJb=new $APP.u(null,"Readback","Readback",-1069768581,null),VJb=new $APP.u(null,
"Line","Line",-1076951502,null),WJb=new $APP.u(null,"Area","Area",1860906700,null),XJb=new $APP.u("mathbox.primitives","Step","mathbox.primitives/Step",-181856637,null),YJb=new $APP.u("mathbox.primitives","Mask","mathbox.primitives/Mask",-149597162,null),ZJb=new $APP.H(null,"rotate-speed","rotate-speed",-564390296),$Jb=new $APP.u(null,"mathbox.core","mathbox.core",-1346776612,null),aKb=new $APP.u(null,"Rtt","Rtt",-483528305,null),bKb=new $APP.u("mathbox.primitives","Html","mathbox.primitives/Html",
-1603447226,null),cKb=new $APP.u("mathbox.primitives","Axis","mathbox.primitives/Axis",917185793,null),dKb=new $APP.u("mathbox.primitives","Spread","mathbox.primitives/Spread",1809426052,null),eKb=new $APP.H(null,"\x3e","\x3e",-555517146),fKb=new $APP.u(null,"Volume","Volume",1797394167,null),gKb=new $APP.u(null,"Repeat","Repeat",-1413718092,null),hKb=new $APP.u("mathbox.primitives","Strip","mathbox.primitives/Strip",2075766272,null);var oHb=$APP.mI(7);var X$=$APP.mI(531);var iKb=$APP.mI(532);var jKb=new $APP.M(null,4,5,$APP.O,[XIb,YHb,oJb,wHb],null);var kKb=new $APP.l(null,3,[uJb,new $APP.M(null,3,5,$APP.O,["core","controls","cursor"],null),YHb,new $APP.l(null,1,[jJb,iKb.OrbitControls],null),KHb,$APP.I],null),Y$=function Y$(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=1<c.length?new $APP.dd(c.slice(1),0,null):null;return Y$.A(arguments[0],c)};
Y$.A=function(a,b){var c=$APP.hf(a);a=$APP.F.o(c,IJb);var d=$APP.F.o(c,OIb);c=$APP.Eh.v($APP.yk.A(c,IJb,$APP.E([OIb])),$APP.yJ,d);if(null==a)return $APP.Og.o(new $APP.M(null,3,5,$APP.O,[eKb,X$.ContainedMathbox,c],null),b);if($APP.Wd(a))return a=$APP.Eh.A(c,cJb,$APP.fo.j(a),$APP.E([tJb,$APP.yGa.j(a),qIb,$APP.lp.j(a)])),$APP.Og.o(new $APP.M(null,3,5,$APP.O,[eKb,X$.ContainedMathbox,a],null),b);if(a instanceof HTMLElement)return $APP.Og.o(new $APP.M(null,3,5,$APP.O,[eKb,X$.Mathbox,c],null),b);throw $APP.Ik.o("Unsupported container : ",
new $APP.l(null,1,[IJb,a],null));};Y$.F=1;Y$.J=function(a){var b=$APP.x(a);a=$APP.z(a);return this.A(b,a)};var Z$=function Z$(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=1<c.length?new $APP.dd(c.slice(1),0,null):null;return Z$.A(arguments[0],c)};
Z$.A=function(a,b){var c=$APP.bJ.useState(null),d=$APP.C.v(c,0,null);c=$APP.C.v(c,1,null);var e=$APP.Fh(a,jKb);a=$APP.Cf.v($APP.yk,a,jKb);e=new $APP.M(null,2,5,$APP.O,[e,a],null);a=$APP.C.v(e,0,null);e=$APP.C.v(e,1,null);c=$APP.Dl.v($APP.Eh.v(e,wHb,c),OIb,$APP.zk.o($APP.xk,kKb));lHb(d,wHb.j(a));pHb(d,XIb.j(a));e=YHb.j(a);var f=$APP.hf(e);e=$APP.F.o(f,KIb);f=$APP.F.o(f,ZJb);$APP.bJ.useEffect(qHb(d,"maxDistance",e),[d,e]);$APP.bJ.useEffect(qHb(d,"rotateSpeed",f),[d,f]);rHb(d,oJb.j(a));return $APP.Og.o(new $APP.M(null,
2,5,$APP.O,[Y$,c],null),b)};Z$.F=1;Z$.J=function(a){var b=$APP.x(a);a=$APP.z(a);return this.A(b,a)};var $$=function $$(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=1<c.length?new $APP.dd(c.slice(1),0,null):null;return $$.A(arguments[0],c)};$$.A=function(a,b){return $APP.Og.o(new $APP.M(null,3,5,$APP.O,[kJb,Z$,a],null),b)};$$.F=1;$$.J=function(a){var b=$APP.x(a);a=$APP.z(a);return this.A(b,a)};var lKb=U$(X$.Group),mKb=U$(X$.Inherit),nKb=U$(X$.Unit);var oKb=U$(X$.Camera);var pKb=U$(X$.Area),qKb=U$(X$.Array),rKb=U$(X$.Interval),sKb=U$(X$.Matrix),tKb=U$(X$.Scale),uKb=U$(X$.Volume),vKb=U$(X$.Voxel);var wKb=U$(X$.Axis),xKb=U$(X$.Face),yKb=U$(X$.Grid),zKb=U$(X$.Line),AKb=U$(X$.Point),BKb=U$(X$.Strip),CKb=U$(X$.Surface),DKb=U$(X$.Ticks),EKb=U$(X$.Vector);var FKb=U$(X$.Clamp),GKb=U$(X$.Grow),HKb=U$(X$.Join),IKb=U$(X$.Lerp),JKb=U$(X$.Memo),KKb=U$(X$.Readback),LKb=U$(X$.Repeat),MKb=U$(X$.Resample),NKb=U$(X$.Slice),OKb=U$(X$.Split),PKb=U$(X$.Spread),QKb=U$(X$.Subdivide),RKb=U$(X$.Swizzle),SKb=U$(X$.Transpose);var TKb=U$(X$.Dom),UKb=U$(X$.Html);var VKb=U$(X$.Move),WKb=U$(X$.Play),XKb=U$(X$.Present),YKb=U$(X$.Reveal),ZKb=U$(X$.Slide),$Kb=U$(X$.Step);var aLb=U$(X$.Compose),bLb=U$(X$.Rtt);var cLb=U$(X$.Shader);var dLb=U$(X$.Format),eLb=U$(X$.Label),fLb=U$(X$.Retext),gLb=U$(X$.Text);var hLb=U$(X$.Clock),iLb=U$(X$.Now);var jLb=U$(X$.Fragment),kLb=U$(X$.Layer),lLb=U$(X$.Mask),mLb=U$(X$.Transform),nLb=U$(X$.Transform4),oLb=U$(X$.Vertex);var pLb=U$(X$.Cartesian),qLb=U$(X$.Cartesian4),rLb=U$(X$.Polar),sLb=U$(X$.Spherical),tLb=U$(X$.Stereographic),uLb=U$(X$.Stereographic4),vLb=U$(X$.View);var wLb=$APP.Qr(new $APP.l(null,2,[$APP.Md(pJb,new $APP.l(null,1,[$APP.Ro,"Default `:threestrap` options for the [[MathBox]] component."],null)),new $APP.l(null,3,[$APP.X,xHb,$APP.Pr,kKb,$APP.fb,new $APP.l(null,1,[$APP.Ro,"Default `:threestrap` options for the [[MathBox]] component."],null)],null),$APP.Md(hJb,new $APP.l(null,3,[$APP.Qo,$APP.R($APP.Cj,$APP.R(new $APP.M(null,3,5,$APP.O,[V$,$APP.hj,W$],null))),$APP.Ro,'Component that configures a MathBox-backed canvas and reactively mounts all\n  children into the canvas.\n\n  Supports the following options:\n\n  - `:threestrap`: these options are passed directly to the [mathbox\n    constructor](https://github.com/unconed/mathbox#basic-usage) on instantiation;\n    these are in turn passed along to Threestrap\'s `Bootstrap` constructor.\n    See [this page](https://github.com/unconed/threestrap#plugins) for an example\n    of what to pass and why.\n\n  - `:renderer`: optional map with `:background-color` and `:background-opacity`\n    keys. Updating these will update the settings without a re-render.\n\n  - `:controls`: optional map with `:max-distance` and `:rotate-speed` keys.\n    Updating these will update the settings on the registered controls without a\n    re-render.\n\n  - `:on`: optional map of type {\x3cevent-name\x3e (fn [event three] ,,,)} On mount,\n    each event will be bound via `mathbox.three.on`, as described in [Threestrap\'s\n    docs](https://github.com/unconed/threestrap#events).\n\n  - `:ref`: a 1-arg function that receives the underlying mathbox instance\n    whenever it changes. Note that you may receive `nil` and should guard against\n    it.\n\n  As well as all options used to configure the [base/root\n  component](https://github.com/unconed/mathbox/blob/master/docs/primitives.md#base/root). (The\n  format of each following line is \x3ckeyword\x3e: \x3cdefault\x3e (\x3ctype\x3e) -\n  \x3cdescription\x3e.)\n\n  - `:camera`: `"[camera]"` (select) - Active camera\n  - `:classes`: `[]` (string array) - Custom classes, e.g. `["big"]`\n  - `:focus`: `1` (nullable number) - Camera focus distance in world units\n  - `:fov`: `null` (nullable number) - (Vertical) Field-of-view to calibrate units for (degrees), e.g. `60`\n  - `:id`: `null` (nullable string) - Unique ID, e.g. `"sampler"`\n  - `:pass`: `"view"` (vertexPass) - Vertex pass (data, view, world, eye)\n  - `:scale`: `null` (nullable number) - (Vertical) Reference scale of viewport in pixels, e.g. `720`\n  - `:speed`: `1` (number) - Global speed',
$APP.NC,new $APP.l(null,6,[$APP.Oy,!0,$APP.vq,1,$APP.DD,1,$APP.tD,new $APP.M(null,1,5,$APP.O,[$APP.R(V$,W$)],null),$APP.Qo,$APP.R(new $APP.M(null,3,5,$APP.O,[V$,$APP.hj,W$],null)),$APP.xA,$APP.R(null)],null)],null)),new $APP.l(null,3,[$APP.X,KJb,$APP.Pr,$$,$APP.fb,new $APP.l(null,2,[$APP.Qo,$APP.R(new $APP.M(null,3,5,$APP.O,[V$,$APP.hj,W$],null)),$APP.Ro,'Component that configures a MathBox-backed canvas and reactively mounts all\n  children into the canvas.\n\n  Supports the following options:\n\n  - `:threestrap`: these options are passed directly to the [mathbox\n    constructor](https://github.com/unconed/mathbox#basic-usage) on instantiation;\n    these are in turn passed along to Threestrap\'s `Bootstrap` constructor.\n    See [this page](https://github.com/unconed/threestrap#plugins) for an example\n    of what to pass and why.\n\n  - `:renderer`: optional map with `:background-color` and `:background-opacity`\n    keys. Updating these will update the settings without a re-render.\n\n  - `:controls`: optional map with `:max-distance` and `:rotate-speed` keys.\n    Updating these will update the settings on the registered controls without a\n    re-render.\n\n  - `:on`: optional map of type {\x3cevent-name\x3e (fn [event three] ,,,)} On mount,\n    each event will be bound via `mathbox.three.on`, as described in [Threestrap\'s\n    docs](https://github.com/unconed/threestrap#events).\n\n  - `:ref`: a 1-arg function that receives the underlying mathbox instance\n    whenever it changes. Note that you may receive `nil` and should guard against\n    it.\n\n  As well as all options used to configure the [base/root\n  component](https://github.com/unconed/mathbox/blob/master/docs/primitives.md#base/root). (The\n  format of each following line is \x3ckeyword\x3e: \x3cdefault\x3e (\x3ctype\x3e) -\n  \x3cdescription\x3e.)\n\n  - `:camera`: `"[camera]"` (select) - Active camera\n  - `:classes`: `[]` (string array) - Custom classes, e.g. `["big"]`\n  - `:focus`: `1` (nullable number) - Camera focus distance in world units\n  - `:fov`: `null` (nullable number) - (Vertical) Field-of-view to calibrate units for (degrees), e.g. `60`\n  - `:id`: `null` (nullable string) - Unique ID, e.g. `"sampler"`\n  - `:pass`: `"view"` (vertexPass) - Vertex pass (data, view, world, eye)\n  - `:scale`: `null` (nullable number) - (Vertical) Reference scale of viewport in pixels, e.g. `720`\n  - `:speed`: `1` (number) - Global speed'],
null)],null)],null),$APP.Fn($Jb,null)),xLb=$APP.Qr($APP.qh([JJb,GJb,aKb,$APP.dGa,wJb,WJb,QIb,sIb,ZHb,iIb,fKb,BIb,CJb,NJb,aJb,FJb,HIb,DIb,VJb,$Hb,CIb,EJb,PIb,pIb,HHb,DJb,yHb,ZIb,qJb,jIb,eIb,FHb,MJb,tIb,mJb,IHb,UIb,hIb,fIb,JHb,PJb,oIb,zHb,lIb,SJb,gKb,UJb,mIb,bJb,dIb,WIb,CHb,YIb,NIb,aIb,kIb,RHb,IIb,uIb,LIb,LHb,bIb,GIb,sHb],[new $APP.l(null,3,[$APP.X,PHb,$APP.Pr,RKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,dKb,$APP.Pr,PKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,WHb,$APP.Pr,bLb,$APP.fb,
$APP.I],null),new $APP.l(null,3,[$APP.X,gIb,$APP.Pr,qKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,AIb,$APP.Pr,xKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,XHb,$APP.Pr,pKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,$Ib,$APP.Pr,mLb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,yIb,$APP.Pr,fLb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,EIb,$APP.Pr,AKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,MIb,$APP.Pr,QKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,THb,$APP.Pr,uKb,
$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,lJb,$APP.Pr,ZKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,QHb,$APP.Pr,sKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,AHb,$APP.Pr,WKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,yJb,$APP.Pr,nLb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,zIb,$APP.Pr,CKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,RIb,$APP.Pr,pLb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,QJb,$APP.Pr,eLb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,VHb,$APP.Pr,
zKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,YJb,$APP.Pr,lLb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,LJb,$APP.Pr,rLb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,uHb,$APP.Pr,FKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,AJb,$APP.Pr,DKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,nIb,$APP.Pr,mKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,bKb,$APP.Pr,UKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,DHb,$APP.Pr,GKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,OJb,
$APP.Pr,gLb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,hKb,$APP.Pr,BKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,TJb,$APP.Pr,qLb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,NHb,$APP.Pr,XKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,vJb,$APP.Pr,vKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,gJb,$APP.Pr,cLb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,vHb,$APP.Pr,tKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,VIb,$APP.Pr,vLb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,
JIb,$APP.Pr,dLb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,wIb,$APP.Pr,oKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,OHb,$APP.Pr,tLb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,xJb,$APP.Pr,OKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,dJb,$APP.Pr,VKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,cKb,$APP.Pr,wKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,BHb,$APP.Pr,yKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,SIb,$APP.Pr,nKb,$APP.fb,$APP.I],null),new $APP.l(null,
3,[$APP.X,rIb,$APP.Pr,EKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,iJb,$APP.Pr,HKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,UHb,$APP.Pr,SKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,BJb,$APP.Pr,LKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,fJb,$APP.Pr,KKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,MHb,$APP.Pr,rKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,HJb,$APP.Pr,oLb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,TIb,$APP.Pr,uLb,$APP.fb,$APP.I],null),new $APP.l(null,
3,[$APP.X,EHb,$APP.Pr,YKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,zJb,$APP.Pr,IKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,vIb,$APP.Pr,JKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,GHb,$APP.Pr,jLb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,FIb,$APP.Pr,kLb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,eJb,$APP.Pr,aLb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,RJb,$APP.Pr,TKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,sJb,$APP.Pr,iLb,$APP.fb,$APP.I],null),new $APP.l(null,
3,[$APP.X,tHb,$APP.Pr,MKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,nJb,$APP.Pr,NKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,xIb,$APP.Pr,lKb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,XJb,$APP.Pr,$Kb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,rJb,$APP.Pr,hLb,$APP.fb,$APP.I],null),new $APP.l(null,3,[$APP.X,SHb,$APP.Pr,sLb,$APP.fb,$APP.I],null)]),$APP.Fn(cIb,null));$APP.Zr(new $APP.l(null,1,[$APP.jo,new $APP.l(null,2,[$Jb,wLb,cIb,xLb],null)],null));
}).call(this);