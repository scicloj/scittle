(function(){
shadow$provide[2]=function(z,v,J,m){console.warn('Scripts "build/three.js" and "build/three.min.js" are deprecated with r150+, and will be removed with r160. Please use ES Modules or alternatives: https://threejs.org/docs/index.html#manual/en/introduction/Installation');(function(t,p){"object"===typeof m&&"undefined"!==typeof J?p(m):"function"===typeof define&&define.amd?define(["exports"],p):(t="undefined"!==typeof globalThis?globalThis:t||self,p(t.THREE={}))})(this,function(t){function p(){const a=
4294967295*Math.random()|0,b=4294967295*Math.random()|0,d=4294967295*Math.random()|0,l=4294967295*Math.random()|0;return(uc[a&255]+uc[a>>8&255]+uc[a>>16&255]+uc[a>>24&255]+"-"+uc[b&255]+uc[b>>8&255]+"-"+uc[b>>16&15|64]+uc[b>>24&255]+"-"+uc[d&63|128]+uc[d>>8&255]+"-"+uc[d>>16&255]+uc[d>>24&255]+uc[l&255]+uc[l>>8&255]+uc[l>>16&255]+uc[l>>24&255]).toLowerCase()}function n(a,b,d){return Math.max(b,Math.min(d,a))}function c(a,b){return(a%b+b)%b}function e(a,b,d){return(1-d)*a+d*b}function f(a){return 0===
(a&a-1)&&0!==a}function h(a){return Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function k(a){return Math.pow(2,Math.floor(Math.log(a)/Math.LN2))}function g(a,b){switch(b.constructor){case Float32Array:return a;case Uint16Array:return a/65535;case Uint8Array:return a/255;case Int16Array:return Math.max(a/32767,-1);case Int8Array:return Math.max(a/127,-1);default:throw Error("Invalid component type.");}}function r(a,b){switch(b.constructor){case Float32Array:return a;case Uint16Array:return Math.round(65535*
a);case Uint8Array:return Math.round(255*a);case Int16Array:return Math.round(32767*a);case Int8Array:return Math.round(127*a);default:throw Error("Invalid component type.");}}function u(a){for(let b=a.length-1;0<=b;--b)if(65535<=a[b])return!0;return!1}function w(a){return document.createElementNS("http://www.w3.org/1999/xhtml",a)}function x(a){return.04045>a?.0773993808*a:Math.pow(.9478672986*a+.0521327014,2.4)}function B(a){return.0031308>a?12.92*a:1.055*Math.pow(a,.41666)-.055}function E(a){if("undefined"!==
typeof HTMLImageElement&&a instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&a instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&a instanceof ImageBitmap)return zh.getDataURL(a);if(a.data)return{data:Array.from(a.data),width:a.width,height:a.height,type:a.data.constructor.name};console.warn("THREE.Texture: Unable to serialize Texture.");return{}}function C(a,b,d,l,q){for(let y=0,A=a.length-3;y<=A;y+=3){$d.fromArray(a,y);const D=q.x*Math.abs($d.x)+q.y*Math.abs($d.y)+
q.z*Math.abs($d.z),F=b.dot($d),G=d.dot($d),M=l.dot($d);if(Math.max(-Math.max(F,G,M),Math.min(F,G,M))>D)return!1}return!0}function H(a,b,d){0>d&&(d+=1);1<d&&--d;return d<1/6?a+6*(b-a)*d:.5>d?b:d<2/3?a+6*(b-a)*(2/3-d):a}function I(a,b,d,l,q,y,A,D,F){a.getVertexPosition(A,hf);a.getVertexPosition(D,jf);a.getVertexPosition(F,kf);var G=hf,M=jf,N=kf,P=Ah;null===(1===b.side?l.intersectTriangle(N,M,G,!0,P):l.intersectTriangle(G,M,N,0===b.side,P))?a=null:(gg.copy(P),gg.applyMatrix4(a.matrixWorld),b=d.ray.origin.distanceTo(gg),
a=b<d.near||b>d.far?null:{distance:b,point:gg.clone(),object:a});a&&(q&&(hg.fromBufferAttribute(q,A),ig.fromBufferAttribute(q,D),jg.fromBufferAttribute(q,F),a.uv=Wc.getUV(Ah,hf,jf,kf,hg,ig,jg,new za)),y&&(hg.fromBufferAttribute(y,A),ig.fromBufferAttribute(y,D),jg.fromBufferAttribute(y,F),a.uv2=Wc.getUV(Ah,hf,jf,kf,hg,ig,jg,new za)),q={a:A,b:D,c:F,normal:new aa,materialIndex:0},Wc.getNormal(hf,jf,kf,q.normal),a.face=q);return a}function K(a){const b={};for(const d in a){b[d]={};for(const l in a[d]){const q=
a[d][l];q&&(q.isColor||q.isMatrix3||q.isMatrix4||q.isVector2||q.isVector3||q.isVector4||q.isTexture||q.isQuaternion)?b[d][l]=q.clone():Array.isArray(q)?b[d][l]=q.slice():b[d][l]=q}}return b}function O(a){const b={};for(let d=0;d<a.length;d++){const l=K(a[d]);for(const q in l)b[q]=l[q]}return b}function Q(a){return null===a.getRenderTarget()?3001===a.outputEncoding?"srgb":"srgb-linear":"srgb-linear"}function W(){function a(y,A){l(y,A);q=b.requestAnimationFrame(a)}let b=null,d=!1,l=null,q=null;return{start:function(){!0!==
d&&null!==l&&(q=b.requestAnimationFrame(a),d=!0)},stop:function(){b.cancelAnimationFrame(q);d=!1},setAnimationLoop:function(y){l=y},setContext:function(y){b=y}}}function R(a,b){const d=b.isWebGL2,l=new WeakMap;return{get:function(q){q.isInterleavedBufferAttribute&&(q=q.data);return l.get(q)},remove:function(q){q.isInterleavedBufferAttribute&&(q=q.data);const y=l.get(q);y&&(a.deleteBuffer(y.buffer),l.delete(q))},update:function(q,y){if(q.isGLBufferAttribute)y=l.get(q),(!y||y.version<q.version)&&l.set(q,
{buffer:q.buffer,type:q.type,bytesPerElement:q.elementSize,version:q.version});else{q.isInterleavedBufferAttribute&&(q=q.data);var A=l.get(q);if(void 0===A){A=l.set;var D=q,F=q.array;const M=q.usage;var G=a.createBuffer();a.bindBuffer(y,G);a.bufferData(y,F,M);q.onUploadCallback();if(F instanceof Float32Array)y=a.FLOAT;else if(F instanceof Uint16Array)if(q.isFloat16BufferAttribute)if(d)y=a.HALF_FLOAT;else throw Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else y=
a.UNSIGNED_SHORT;else if(F instanceof Int16Array)y=a.SHORT;else if(F instanceof Uint32Array)y=a.UNSIGNED_INT;else if(F instanceof Int32Array)y=a.INT;else if(F instanceof Int8Array)y=a.BYTE;else if(F instanceof Uint8Array)y=a.UNSIGNED_BYTE;else if(F instanceof Uint8ClampedArray)y=a.UNSIGNED_BYTE;else throw Error("THREE.WebGLAttributes: Unsupported buffer data format: "+F);A.call(l,D,{buffer:G,type:y,bytesPerElement:F.BYTES_PER_ELEMENT,version:q.version})}else A.version<q.version&&(D=q,F=D.array,G=
D.updateRange,a.bindBuffer(y,A.buffer),-1===G.count?a.bufferSubData(y,0,F):(d?a.bufferSubData(y,G.offset*F.BYTES_PER_ELEMENT,F,G.offset,G.count):a.bufferSubData(y,G.offset*F.BYTES_PER_ELEMENT,F.subarray(G.offset,G.offset+G.count)),G.count=-1),D.onUploadCallback(),A.version=q.version)}}}}function X(a,b,d,l,q,y,A){function D(L,U){L.getRGB(kg,Q(a));l.buffers.color.setClear(kg.r,kg.g,kg.b,U,A)}const F=new gb(0);let G=!0===y?0:1,M,N,P=null,T=0,S=null;return{getClearColor:function(){return F},setClearColor:function(L,
U=1){F.set(L);G=U;D(F,G)},getClearAlpha:function(){return G},setClearAlpha:function(L){G=L;D(F,G)},render:function(L,U){let ma=!1,ba=!0===U.isScene?U.background:null;ba&&ba.isTexture&&(ba=(0<U.backgroundBlurriness?d:b).get(ba));var na=a.xr;(na=na.getSession&&na.getSession())&&"additive"===na.environmentBlendMode&&(ba=null);null===ba?D(F,G):ba&&ba.isColor&&(D(ba,1),ma=!0);(a.autoClear||ma)&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil);if(ba&&(ba.isCubeTexture||306===ba.mapping)){void 0===
N&&(N=new xc(new ae(1,1,1),new fd({name:"BackgroundCubeMaterial",uniforms:K(Xc.backgroundCube.uniforms),vertexShader:Xc.backgroundCube.vertexShader,fragmentShader:Xc.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),N.geometry.deleteAttribute("normal"),N.geometry.deleteAttribute("uv"),N.onBeforeRender=function(sa,ja,Ga){this.matrixWorld.copyPosition(Ga.matrixWorld)},Object.defineProperty(N.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),q.update(N));
N.material.uniforms.envMap.value=ba;N.material.uniforms.flipEnvMap.value=ba.isCubeTexture&&!1===ba.isRenderTargetTexture?-1:1;N.material.uniforms.backgroundBlurriness.value=U.backgroundBlurriness;N.material.uniforms.backgroundIntensity.value=U.backgroundIntensity;N.material.toneMapped=3001===ba.encoding?!1:!0;if(P!==ba||T!==ba.version||S!==a.toneMapping)N.material.needsUpdate=!0,P=ba,T=ba.version,S=a.toneMapping;N.layers.enableAll();L.unshift(N,N.geometry,N.material,0,0,null)}else if(ba&&ba.isTexture){void 0===
M&&(M=new xc(new lf(2,2),new fd({name:"BackgroundMaterial",uniforms:K(Xc.background.uniforms),vertexShader:Xc.background.vertexShader,fragmentShader:Xc.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),M.geometry.deleteAttribute("normal"),Object.defineProperty(M.material,"map",{get:function(){return this.uniforms.t2D.value}}),q.update(M));M.material.uniforms.t2D.value=ba;M.material.uniforms.backgroundIntensity.value=U.backgroundIntensity;M.material.toneMapped=3001===ba.encoding?
!1:!0;!0===ba.matrixAutoUpdate&&ba.updateMatrix();M.material.uniforms.uvTransform.value.copy(ba.matrix);if(P!==ba||T!==ba.version||S!==a.toneMapping)M.material.needsUpdate=!0,P=ba,T=ba.version,S=a.toneMapping;M.layers.enableAll();L.unshift(M,M.geometry,M.material,0,0,null)}}}}function ca(a,b,d,l){function q(ja){return l.isWebGL2?a.bindVertexArray(ja):L.bindVertexArrayOES(ja)}function y(ja){return l.isWebGL2?a.deleteVertexArray(ja):L.deleteVertexArrayOES(ja)}function A(ja){const Ga=[],oa=[],wa=[];
for(let ya=0;ya<S;ya++)Ga[ya]=0,oa[ya]=0,wa[ya]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Ga,enabledAttributes:oa,attributeDivisors:wa,object:ja,attributes:{},index:null}}function D(){const ja=na.newAttributes;for(let Ga=0,oa=ja.length;Ga<oa;Ga++)ja[Ga]=0}function F(ja){G(ja,0)}function G(ja,Ga){const oa=na.enabledAttributes,wa=na.attributeDivisors;na.newAttributes[ja]=1;0===oa[ja]&&(a.enableVertexAttribArray(ja),oa[ja]=1);wa[ja]!==Ga&&((l.isWebGL2?a:b.get("ANGLE_instanced_arrays"))[l.isWebGL2?
"vertexAttribDivisor":"vertexAttribDivisorANGLE"](ja,Ga),wa[ja]=Ga)}function M(){const ja=na.newAttributes,Ga=na.enabledAttributes;for(let oa=0,wa=Ga.length;oa<wa;oa++)Ga[oa]!==ja[oa]&&(a.disableVertexAttribArray(oa),Ga[oa]=0)}function N(ja,Ga,oa,wa,ya,xa){!0!==l.isWebGL2||oa!==a.INT&&oa!==a.UNSIGNED_INT?a.vertexAttribPointer(ja,Ga,oa,wa,ya,xa):a.vertexAttribIPointer(ja,Ga,oa,ya,xa)}function P(){T();sa=!0;na!==ba&&(na=ba,q(na.object))}function T(){ba.geometry=null;ba.program=null;ba.wireframe=!1}
const S=a.getParameter(a.MAX_VERTEX_ATTRIBS),L=l.isWebGL2?null:b.get("OES_vertex_array_object"),U=l.isWebGL2||null!==L,ma={},ba=A(null);let na=ba,sa=!1;return{setup:function(ja,Ga,oa,wa,ya){var xa=!1;if(U){xa=!0===Ga.wireframe;var Va=ma[wa.id];void 0===Va&&(Va={},ma[wa.id]=Va);var La=Va[oa.id];void 0===La&&(La={},Va[oa.id]=La);Va=La[xa];void 0===Va&&(Va=A(l.isWebGL2?a.createVertexArray():L.createVertexArrayOES()),La[xa]=Va);xa=Va;na!==xa&&(na=xa,q(na.object));a:{xa=na.attributes;La=wa.attributes;
Va=0;var Ra=oa.getAttributes();for(var Na in Ra)if(0<=Ra[Na].location){var cb=xa[Na],ob=La[Na];void 0===ob&&("instanceMatrix"===Na&&ja.instanceMatrix&&(ob=ja.instanceMatrix),"instanceColor"===Na&&ja.instanceColor&&(ob=ja.instanceColor));if(void 0===cb||cb.attribute!==ob||ob&&cb.data!==ob.data){xa=!0;break a}Va++}xa=na.attributesNum!==Va||na.index!==ya?!0:!1}if(xa){Na={};La=wa.attributes;Va=0;Ra=oa.getAttributes();for(var ub in Ra)0<=Ra[ub].location&&(cb=La[ub],void 0===cb&&("instanceMatrix"===ub&&
ja.instanceMatrix&&(cb=ja.instanceMatrix),"instanceColor"===ub&&ja.instanceColor&&(cb=ja.instanceColor)),ob={},(ob.attribute=cb)&&cb.data&&(ob.data=cb.data),Na[ub]=ob,Va++);na.attributes=Na;na.attributesNum=Va;na.index=ya}}else if(ub=!0===Ga.wireframe,na.geometry!==wa.id||na.program!==oa.id||na.wireframe!==ub)na.geometry=wa.id,na.program=oa.id,na.wireframe=ub,xa=!0;null!==ya&&d.update(ya,a.ELEMENT_ARRAY_BUFFER);if(xa||sa){sa=!1;if(!1!==l.isWebGL2||!ja.isInstancedMesh&&!wa.isInstancedBufferGeometry||
null!==b.get("ANGLE_instanced_arrays")){D();ub=wa.attributes;oa=oa.getAttributes();Ga=Ga.defaultAttributeValues;for(const $a in oa)if(Na=oa[$a],0<=Na.location){var Bb=ub[$a];void 0===Bb&&("instanceMatrix"===$a&&ja.instanceMatrix&&(Bb=ja.instanceMatrix),"instanceColor"===$a&&ja.instanceColor&&(Bb=ja.instanceColor));if(void 0!==Bb){if(xa=Bb.normalized,La=Bb.itemSize,Ra=d.get(Bb),void 0!==Ra)if(cb=Ra.buffer,Va=Ra.type,Ra=Ra.bytesPerElement,Bb.isInterleavedBufferAttribute){var Sa=Bb.data;ob=Sa.stride;
Bb=Bb.offset;if(Sa.isInstancedInterleavedBuffer){for(let bb=0;bb<Na.locationSize;bb++)G(Na.location+bb,Sa.meshPerAttribute);!0!==ja.isInstancedMesh&&void 0===wa._maxInstanceCount&&(wa._maxInstanceCount=Sa.meshPerAttribute*Sa.count)}else for(Sa=0;Sa<Na.locationSize;Sa++)F(Na.location+Sa);a.bindBuffer(a.ARRAY_BUFFER,cb);for(cb=0;cb<Na.locationSize;cb++)N(Na.location+cb,La/Na.locationSize,Va,xa,ob*Ra,(Bb+La/Na.locationSize*cb)*Ra)}else{if(Bb.isInstancedBufferAttribute){for(ob=0;ob<Na.locationSize;ob++)G(Na.location+
ob,Bb.meshPerAttribute);!0!==ja.isInstancedMesh&&void 0===wa._maxInstanceCount&&(wa._maxInstanceCount=Bb.meshPerAttribute*Bb.count)}else for(ob=0;ob<Na.locationSize;ob++)F(Na.location+ob);a.bindBuffer(a.ARRAY_BUFFER,cb);for(cb=0;cb<Na.locationSize;cb++)N(Na.location+cb,La/Na.locationSize,Va,xa,La*Ra,La/Na.locationSize*cb*Ra)}}else if(void 0!==Ga&&(xa=Ga[$a],void 0!==xa))switch(xa.length){case 2:a.vertexAttrib2fv(Na.location,xa);break;case 3:a.vertexAttrib3fv(Na.location,xa);break;case 4:a.vertexAttrib4fv(Na.location,
xa);break;default:a.vertexAttrib1fv(Na.location,xa)}}M()}null!==ya&&a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,d.get(ya).buffer)}},reset:P,resetDefaultState:T,dispose:function(){P();for(const ja in ma){const Ga=ma[ja];for(const oa in Ga){const wa=Ga[oa];for(const ya in wa)y(wa[ya].object),delete wa[ya];delete Ga[oa]}delete ma[ja]}},releaseStatesOfGeometry:function(ja){if(void 0!==ma[ja.id]){var Ga=ma[ja.id];for(const oa in Ga){const wa=Ga[oa];for(const ya in wa)y(wa[ya].object),delete wa[ya];delete Ga[oa]}delete ma[ja.id]}},
releaseStatesOfProgram:function(ja){for(const Ga in ma){const oa=ma[Ga];if(void 0===oa[ja.id])continue;const wa=oa[ja.id];for(const ya in wa)y(wa[ya].object),delete wa[ya];delete oa[ja.id]}},initAttributes:D,enableAttribute:F,disableUnusedAttributes:M}}function ka(a,b,d,l){const q=l.isWebGL2;let y;this.setMode=function(A){y=A};this.render=function(A,D){a.drawArrays(y,A,D);d.update(D,y,1)};this.renderInstances=function(A,D,F){if(0!==F){if(q){var G=a;var M="drawArraysInstanced"}else if(G=b.get("ANGLE_instanced_arrays"),
M="drawArraysInstancedANGLE",null===G){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}G[M](y,A,D,F);d.update(D,y,F)}}}function la(a,b,d){function l(sa){if("highp"===sa){if(0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision)return"highp";sa="mediump"}return"mediump"===sa&&0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,
a.MEDIUM_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision?"mediump":"lowp"}let q;const y="undefined"!==typeof WebGL2RenderingContext&&a instanceof WebGL2RenderingContext;let A=void 0!==d.precision?d.precision:"highp";var D=l(A);D!==A&&(console.warn("THREE.WebGLRenderer:",A,"not supported, using",D,"instead."),A=D);D=y||b.has("WEBGL_draw_buffers");d=!0===d.logarithmicDepthBuffer;const F=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),G=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
M=a.getParameter(a.MAX_TEXTURE_SIZE),N=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),P=a.getParameter(a.MAX_VERTEX_ATTRIBS),T=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),S=a.getParameter(a.MAX_VARYING_VECTORS),L=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),U=0<G,ma=y||b.has("OES_texture_float"),ba=U&&ma,na=y?a.getParameter(a.MAX_SAMPLES):0;return{isWebGL2:y,drawBuffers:D,getMaxAnisotropy:function(){if(void 0!==q)return q;if(!0===b.has("EXT_texture_filter_anisotropic")){const sa=b.get("EXT_texture_filter_anisotropic");
q=a.getParameter(sa.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else q=0;return q},getMaxPrecision:l,precision:A,logarithmicDepthBuffer:d,maxTextures:F,maxVertexTextures:G,maxTextureSize:M,maxCubemapSize:N,maxAttributes:P,maxVertexUniforms:T,maxVaryings:S,maxFragmentUniforms:L,vertexTextures:U,floatFragmentTextures:ma,floatVertexTextures:ba,maxSamples:na}}function Aa(a){function b(M,N,P,T){const S=null!==M?M.length:0;let L=null;if(0!==S){L=G.value;if(!0!==T||null===L){T=P+4*S;N=N.matrixWorldInverse;F.getNormalMatrix(N);
if(null===L||L.length<T)L=new Float32Array(T);for(let U=0,ma=P;U!==S;++U,ma+=4)D.copy(M[U]).applyMatrix4(N,F),D.normal.toArray(L,ma),L[ma+3]=D.constant}G.value=L;G.needsUpdate=!0}d.numPlanes=S;d.numIntersection=0;return L}const d=this;let l=null,q=0,y=!1,A=!1;const D=new Hd,F=new hb,G={value:null,needsUpdate:!1};this.uniform=G;this.numIntersection=this.numPlanes=0;this.init=function(M,N){const P=0!==M.length||N||0!==q||y;y=N;q=M.length;return P};this.beginShadows=function(){A=!0;b(null)};this.endShadows=
function(){A=!1};this.setGlobalState=function(M,N){l=b(M,N,0)};this.setState=function(M,N,P){const T=M.clippingPlanes,S=M.clipIntersection;var L=M.clipShadows;M=a.get(M);if(!y||null===T||0===T.length||A&&!L)A?b(null):(G.value!==l&&(G.value=l,G.needsUpdate=0<q),d.numPlanes=q,d.numIntersection=0);else{L=A?0:q;const U=4*L;let ma=M.clippingState||null;G.value=ma;ma=b(T,N,U,P);for(N=0;N!==U;++N)ma[N]=l[N];M.clippingState=ma;this.numIntersection=S?this.numPlanes:0;this.numPlanes+=L}}}function ta(a){function b(q,
y){303===y?q.mapping=301:304===y&&(q.mapping=302);return q}function d(q){q=q.target;q.removeEventListener("dispose",d);const y=l.get(q);void 0!==y&&(l.delete(q),y.dispose())}let l=new WeakMap;return{get:function(q){if(q&&q.isTexture&&!1===q.isRenderTargetTexture){var y=q.mapping;if(303===y||304===y)return l.has(q)?(y=l.get(q).texture,b(y,q.mapping)):(y=q.image)&&0<y.height?(y=new Ri(y.height/2),y.fromEquirectangularTexture(a,q),l.set(q,y),q.addEventListener("dispose",d),b(y.texture,q.mapping)):null}return q},
dispose:function(){l=new WeakMap}}}function Ha(a,b,d){a=new Yc(a,b,d);a.texture.mapping=306;a.texture.name="PMREM.cubeUv";a.scissorTest=!0;return a}function Oa(a,b,d,l,q){a.viewport.set(b,d,l,q);a.scissor.set(b,d,l,q)}function da(){return new fd({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Pa(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include \x3ccommon\x3e\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection \x3d normalize( vOutputDirection );\n\t\t\t\tvec2 uv \x3d equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor \x3d vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1})}function Wa(){return new fd({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Pa(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor \x3d textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1})}function Pa(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv \x3d 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction \x3d vec3( uv, 1.0 );\n\n\t\t\tif ( face \x3d\x3d 0.0 ) {\n\n\t\t\t\tdirection \x3d direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face \x3d\x3d 1.0 ) {\n\n\t\t\t\tdirection \x3d direction.xzy;\n\t\t\t\tdirection.xz *\x3d -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face \x3d\x3d 2.0 ) {\n\n\t\t\t\tdirection.x *\x3d -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face \x3d\x3d 3.0 ) {\n\n\t\t\t\tdirection \x3d direction.zyx;\n\t\t\t\tdirection.xz *\x3d -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face \x3d\x3d 4.0 ) {\n\n\t\t\t\tdirection \x3d direction.xzy;\n\t\t\t\tdirection.xy *\x3d -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face \x3d\x3d 5.0 ) {\n\n\t\t\t\tdirection.z *\x3d -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection \x3d getDirection( uv, faceIndex );\n\t\t\tgl_Position \x3d vec4( position, 1.0 );\n\n\t\t}\n\t"}
function mb(a){function b(q){q=q.target;q.removeEventListener("dispose",b);const y=d.get(q);void 0!==y&&(d.delete(q),y.dispose())}let d=new WeakMap,l=null;return{get:function(q){if(q&&q.isTexture){var y=q.mapping,A=303===y||304===y,D=301===y||302===y;if(A||D){if(q.isRenderTargetTexture&&!0===q.needsPMREMUpdate)return q.needsPMREMUpdate=!1,y=d.get(q),null===l&&(l=new Bh(a)),y=A?l.fromEquirectangular(q,y):l.fromCubemap(q,y),d.set(q,y),y.texture;if(d.has(q))return d.get(q).texture;y=q.image;var F;if(!(F=
A&&y&&0<y.height)&&(F=D&&y)){F=0;for(D=0;6>D;D++)void 0!==y[D]&&F++;F=6===F}return F?(null===l&&(l=new Bh(a)),A=A?l.fromEquirectangular(q):l.fromCubemap(q),d.set(q,A),q.addEventListener("dispose",b),A.texture):null}}return q},dispose:function(){d=new WeakMap;null!==l&&(l.dispose(),l=null)}}}function Cb(a){function b(l){if(void 0!==d[l])return d[l];let q;switch(l){case "WEBGL_depth_texture":q=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");
break;case "EXT_texture_filter_anisotropic":q=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":q=a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case "WEBGL_compressed_texture_pvrtc":q=a.getExtension("WEBGL_compressed_texture_pvrtc")||
a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:q=a.getExtension(l)}return d[l]=q}const d={};return{has:function(l){return null!==b(l)},init:function(l){l.isWebGL2?b("EXT_color_buffer_float"):(b("WEBGL_depth_texture"),b("OES_texture_float"),b("OES_texture_half_float"),b("OES_texture_half_float_linear"),b("OES_standard_derivatives"),b("OES_element_index_uint"),b("OES_vertex_array_object"),b("ANGLE_instanced_arrays"));b("OES_texture_float_linear");b("EXT_color_buffer_half_float");
b("WEBGL_multisampled_render_to_texture")},get:function(l){const q=b(l);null===q&&console.warn("THREE.WebGLRenderer: "+l+" extension not supported.");return q}}}function yb(a,b,d,l){function q(F){F=F.target;null!==F.index&&b.remove(F.index);for(var G in F.attributes)b.remove(F.attributes[G]);F.removeEventListener("dispose",q);delete A[F.id];if(G=D.get(F))b.remove(G),D.delete(F);l.releaseStatesOfGeometry(F);!0===F.isInstancedBufferGeometry&&delete F._maxInstanceCount;d.memory.geometries--}function y(F){var G=
[],M=F.index,N=F.attributes.position;if(null!==M){N=M.array;M=M.version;for(let S=0,L=N.length;S<L;S+=3){var P=N[S+0],T=N[S+1];const U=N[S+2];G.push(P,T,T,U,U,P)}}else{P=N.array;M=N.version;for(let S=0,L=P.length/3-1;S<L;S+=3)N=S+0,P=S+1,T=S+2,G.push(N,P,P,T,T,N)}G=new (u(G)?Ch:Dh)(G,1);G.version=M;(M=D.get(F))&&b.remove(M);D.set(F,G)}const A={},D=new WeakMap;return{get:function(F,G){if(!0===A[G.id])return G;G.addEventListener("dispose",q);A[G.id]=!0;d.memory.geometries++;return G},update:function(F){var G=
F.attributes;for(const M in G)b.update(G[M],a.ARRAY_BUFFER);F=F.morphAttributes;for(const M in F){G=F[M];for(let N=0,P=G.length;N<P;N++)b.update(G[N],a.ARRAY_BUFFER)}},getWireframeAttribute:function(F){const G=D.get(F);if(G){const M=F.index;null!==M&&G.version<M.version&&y(F)}else y(F);return D.get(F)}}}function tb(a,b,d,l){const q=l.isWebGL2;let y,A,D;this.setMode=function(F){y=F};this.setIndex=function(F){A=F.type;D=F.bytesPerElement};this.render=function(F,G){a.drawElements(y,G,A,F*D);d.update(G,
y,1)};this.renderInstances=function(F,G,M){if(0!==M){if(q){var N=a;var P="drawElementsInstanced"}else if(N=b.get("ANGLE_instanced_arrays"),P="drawElementsInstancedANGLE",null===N){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}N[P](y,G,A,F*D,M);d.update(G,y,M)}}}function Rb(a){const b={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:b,programs:null,
autoReset:!0,reset:function(){b.frame++;b.calls=0;b.triangles=0;b.points=0;b.lines=0},update:function(d,l,q){b.calls++;switch(l){case a.TRIANGLES:b.triangles+=d/3*q;break;case a.LINES:b.lines+=d/2*q;break;case a.LINE_STRIP:b.lines+=q*(d-1);break;case a.LINE_LOOP:b.lines+=q*d;break;case a.POINTS:b.points+=q*d;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l)}}}}function ac(a,b){return a[0]-b[0]}function Hb(a,b){return Math.abs(b[1])-Math.abs(a[1])}function Jb(a,b,d){const l={},q=
new Float32Array(8),y=new WeakMap,A=new cc,D=[];for(let F=0;8>F;F++)D[F]=[F,0];return{update:function(F,G,M){F=F.morphTargetInfluences;if(!0===b.isWebGL2){var N=G.morphAttributes.position||G.morphAttributes.normal||G.morphAttributes.color;N=void 0!==N?N.length:0;var P=y.get(G);if(void 0===P||P.count!==N){void 0!==P&&P.texture.dispose();P=void 0!==G.morphAttributes.position;var T=void 0!==G.morphAttributes.normal,S=void 0!==G.morphAttributes.color,L=G.morphAttributes.position||[];const ma=G.morphAttributes.normal||
[],ba=G.morphAttributes.color||[];var U=0;!0===P&&(U=1);!0===T&&(U=2);!0===S&&(U=3);let na=G.attributes.position.count*U,sa=1;na>b.maxTextureSize&&(sa=Math.ceil(na/b.maxTextureSize),na=b.maxTextureSize);const ja=new Float32Array(na*sa*4*N),Ga=new lg(ja,na,sa,N);Ga.type=1015;Ga.needsUpdate=!0;U*=4;for(let wa=0;wa<N;wa++){const ya=L[wa],xa=ma[wa],Va=ba[wa],La=na*sa*4*wa;for(let Ra=0;Ra<ya.count;Ra++){const Na=Ra*U;!0===P&&(A.fromBufferAttribute(ya,Ra),ja[La+Na+0]=A.x,ja[La+Na+1]=A.y,ja[La+Na+2]=A.z,
ja[La+Na+3]=0);!0===T&&(A.fromBufferAttribute(xa,Ra),ja[La+Na+4]=A.x,ja[La+Na+5]=A.y,ja[La+Na+6]=A.z,ja[La+Na+7]=0);!0===S&&(A.fromBufferAttribute(Va,Ra),ja[La+Na+8]=A.x,ja[La+Na+9]=A.y,ja[La+Na+10]=A.z,ja[La+Na+11]=4===Va.itemSize?A.w:1)}}P={count:N,texture:Ga,size:new za(na,sa)};y.set(G,P);function oa(){Ga.dispose();y.delete(G);G.removeEventListener("dispose",oa)}G.addEventListener("dispose",oa)}N=0;for(T=0;T<F.length;T++)N+=F[T];N=G.morphTargetsRelative?1:1-N;M.getUniforms().setValue(a,"morphTargetBaseInfluence",
N);M.getUniforms().setValue(a,"morphTargetInfluences",F);M.getUniforms().setValue(a,"morphTargetsTexture",P.texture,d);M.getUniforms().setValue(a,"morphTargetsTextureSize",P.size)}else{N=void 0===F?0:F.length;P=l[G.id];if(void 0===P||P.length!==N){P=[];for(T=0;T<N;T++)P[T]=[T,0];l[G.id]=P}for(T=0;T<N;T++)S=P[T],S[0]=T,S[1]=F[T];P.sort(Hb);for(F=0;8>F;F++)F<N&&P[F][1]?(D[F][0]=P[F][0],D[F][1]=P[F][1]):(D[F][0]=Number.MAX_SAFE_INTEGER,D[F][1]=0);D.sort(ac);F=G.morphAttributes.position;N=G.morphAttributes.normal;
P=0;for(T=0;8>T;T++)L=D[T],S=L[0],L=L[1],S!==Number.MAX_SAFE_INTEGER&&L?(F&&G.getAttribute("morphTarget"+T)!==F[S]&&G.setAttribute("morphTarget"+T,F[S]),N&&G.getAttribute("morphNormal"+T)!==N[S]&&G.setAttribute("morphNormal"+T,N[S]),q[T]=L,P+=L):(F&&!0===G.hasAttribute("morphTarget"+T)&&G.deleteAttribute("morphTarget"+T),N&&!0===G.hasAttribute("morphNormal"+T)&&G.deleteAttribute("morphNormal"+T),q[T]=0);F=G.morphTargetsRelative?1:1-P;M.getUniforms().setValue(a,"morphTargetBaseInfluence",F);M.getUniforms().setValue(a,
"morphTargetInfluences",q)}}}}function Tb(a,b,d,l){function q(A){A=A.target;A.removeEventListener("dispose",q);d.remove(A.instanceMatrix);null!==A.instanceColor&&d.remove(A.instanceColor)}let y=new WeakMap;return{update:function(A){const D=l.render.frame,F=b.get(A,A.geometry);y.get(F)!==D&&(b.update(F),y.set(F,D));A.isInstancedMesh&&(!1===A.hasEventListener("dispose",q)&&A.addEventListener("dispose",q),d.update(A.instanceMatrix,a.ARRAY_BUFFER),null!==A.instanceColor&&d.update(A.instanceColor,a.ARRAY_BUFFER));
return F},dispose:function(){y=new WeakMap}}}function dc(a,b,d){const l=a[0];if(0>=l||0<l)return a;const q=b*d;let y=Si[q];void 0===y&&(y=new Float32Array(q),Si[q]=y);if(0!==b){l.toArray(y,0);for(let A=1,D=0;A!==b;++A)D+=d,a[A].toArray(y,D)}return y}function zb(a,b){if(a.length!==b.length)return!1;for(let d=0,l=a.length;d<l;d++)if(a[d]!==b[d])return!1;return!0}function ib(a,b){for(let d=0,l=b.length;d<l;d++)a[d]=b[d]}function Db(a,b){let d=Ti[b];void 0===d&&(d=new Int32Array(b),Ti[b]=d);for(let l=
0;l!==b;++l)d[l]=a.allocateTextureUnit();return d}function ec(a,b){const d=this.cache;d[0]!==b&&(a.uniform1f(this.addr,b),d[0]=b)}function pa(a,b){const d=this.cache;if(void 0!==b.x){if(d[0]!==b.x||d[1]!==b.y)a.uniform2f(this.addr,b.x,b.y),d[0]=b.x,d[1]=b.y}else zb(d,b)||(a.uniform2fv(this.addr,b),ib(d,b))}function Xa(a,b){const d=this.cache;if(void 0!==b.x){if(d[0]!==b.x||d[1]!==b.y||d[2]!==b.z)a.uniform3f(this.addr,b.x,b.y,b.z),d[0]=b.x,d[1]=b.y,d[2]=b.z}else if(void 0!==b.r){if(d[0]!==b.r||d[1]!==
b.g||d[2]!==b.b)a.uniform3f(this.addr,b.r,b.g,b.b),d[0]=b.r,d[1]=b.g,d[2]=b.b}else zb(d,b)||(a.uniform3fv(this.addr,b),ib(d,b))}function sb(a,b){const d=this.cache;if(void 0!==b.x){if(d[0]!==b.x||d[1]!==b.y||d[2]!==b.z||d[3]!==b.w)a.uniform4f(this.addr,b.x,b.y,b.z,b.w),d[0]=b.x,d[1]=b.y,d[2]=b.z,d[3]=b.w}else zb(d,b)||(a.uniform4fv(this.addr,b),ib(d,b))}function Eb(a,b){const d=this.cache,l=b.elements;void 0===l?zb(d,b)||(a.uniformMatrix2fv(this.addr,!1,b),ib(d,b)):zb(d,l)||(Ui.set(l),a.uniformMatrix2fv(this.addr,
!1,Ui),ib(d,l))}function Sb(a,b){const d=this.cache,l=b.elements;void 0===l?zb(d,b)||(a.uniformMatrix3fv(this.addr,!1,b),ib(d,b)):zb(d,l)||(Vi.set(l),a.uniformMatrix3fv(this.addr,!1,Vi),ib(d,l))}function va(a,b){const d=this.cache,l=b.elements;void 0===l?zb(d,b)||(a.uniformMatrix4fv(this.addr,!1,b),ib(d,b)):zb(d,l)||(Wi.set(l),a.uniformMatrix4fv(this.addr,!1,Wi),ib(d,l))}function jb(a,b){const d=this.cache;d[0]!==b&&(a.uniform1i(this.addr,b),d[0]=b)}function Wb(a,b){const d=this.cache;if(void 0!==
b.x){if(d[0]!==b.x||d[1]!==b.y)a.uniform2i(this.addr,b.x,b.y),d[0]=b.x,d[1]=b.y}else zb(d,b)||(a.uniform2iv(this.addr,b),ib(d,b))}function oc(a,b){const d=this.cache;if(void 0!==b.x){if(d[0]!==b.x||d[1]!==b.y||d[2]!==b.z)a.uniform3i(this.addr,b.x,b.y,b.z),d[0]=b.x,d[1]=b.y,d[2]=b.z}else zb(d,b)||(a.uniform3iv(this.addr,b),ib(d,b))}function Hc(a,b){const d=this.cache;if(void 0!==b.x){if(d[0]!==b.x||d[1]!==b.y||d[2]!==b.z||d[3]!==b.w)a.uniform4i(this.addr,b.x,b.y,b.z,b.w),d[0]=b.x,d[1]=b.y,d[2]=b.z,
d[3]=b.w}else zb(d,b)||(a.uniform4iv(this.addr,b),ib(d,b))}function Nc(a,b){const d=this.cache;d[0]!==b&&(a.uniform1ui(this.addr,b),d[0]=b)}function gd(a,b){const d=this.cache;if(void 0!==b.x){if(d[0]!==b.x||d[1]!==b.y)a.uniform2ui(this.addr,b.x,b.y),d[0]=b.x,d[1]=b.y}else zb(d,b)||(a.uniform2uiv(this.addr,b),ib(d,b))}function yc(a,b){const d=this.cache;if(void 0!==b.x){if(d[0]!==b.x||d[1]!==b.y||d[2]!==b.z)a.uniform3ui(this.addr,b.x,b.y,b.z),d[0]=b.x,d[1]=b.y,d[2]=b.z}else zb(d,b)||(a.uniform3uiv(this.addr,
b),ib(d,b))}function zc(a,b){const d=this.cache;if(void 0!==b.x){if(d[0]!==b.x||d[1]!==b.y||d[2]!==b.z||d[3]!==b.w)a.uniform4ui(this.addr,b.x,b.y,b.z,b.w),d[0]=b.x,d[1]=b.y,d[2]=b.z,d[3]=b.w}else zb(d,b)||(a.uniform4uiv(this.addr,b),ib(d,b))}function hd(a,b,d){const l=this.cache,q=d.allocateTextureUnit();l[0]!==q&&(a.uniform1i(this.addr,q),l[0]=q);d.setTexture2D(b||Xi,q)}function Id(a,b,d){const l=this.cache,q=d.allocateTextureUnit();l[0]!==q&&(a.uniform1i(this.addr,q),l[0]=q);d.setTexture3D(b||Yi,
q)}function Jd(a,b,d){const l=this.cache,q=d.allocateTextureUnit();l[0]!==q&&(a.uniform1i(this.addr,q),l[0]=q);d.setTextureCube(b||Zi,q)}function pd(a,b,d){const l=this.cache,q=d.allocateTextureUnit();l[0]!==q&&(a.uniform1i(this.addr,q),l[0]=q);d.setTexture2DArray(b||$i,q)}function Xb(a){switch(a){case 5126:return ec;case 35664:return pa;case 35665:return Xa;case 35666:return sb;case 35674:return Eb;case 35675:return Sb;case 35676:return va;case 5124:case 35670:return jb;case 35667:case 35671:return Wb;
case 35668:case 35672:return oc;case 35669:case 35673:return Hc;case 5125:return Nc;case 36294:return gd;case 36295:return yc;case 36296:return zc;case 35678:case 36198:case 36298:case 36306:case 35682:return hd;case 35679:case 36299:case 36307:return Id;case 35680:case 36300:case 36308:case 36293:return Jd;case 36289:case 36303:case 36311:case 36292:return pd}}function id(a,b){a.uniform1fv(this.addr,b)}function Kd(a,b){b=dc(b,this.size,2);a.uniform2fv(this.addr,b)}function Ld(a,b){b=dc(b,this.size,
3);a.uniform3fv(this.addr,b)}function qd(a,b){b=dc(b,this.size,4);a.uniform4fv(this.addr,b)}function rd(a,b){b=dc(b,this.size,4);a.uniformMatrix2fv(this.addr,!1,b)}function sd(a,b){b=dc(b,this.size,9);a.uniformMatrix3fv(this.addr,!1,b)}function Md(a,b){b=dc(b,this.size,16);a.uniformMatrix4fv(this.addr,!1,b)}function jd(a,b){a.uniform1iv(this.addr,b)}function Nd(a,b){a.uniform2iv(this.addr,b)}function Ca(a,b){a.uniform3iv(this.addr,b)}function td(a,b){a.uniform4iv(this.addr,b)}function Mb(a,b){a.uniform1uiv(this.addr,
b)}function Zc(a,b){a.uniform2uiv(this.addr,b)}function Oc(a,b){a.uniform3uiv(this.addr,b)}function $c(a,b){a.uniform4uiv(this.addr,b)}function Qa(a,b,d){const l=this.cache,q=b.length,y=Db(d,q);zb(l,y)||(a.uniform1iv(this.addr,y),ib(l,y));for(a=0;a!==q;++a)d.setTexture2D(b[a]||Xi,y[a])}function jc(a,b,d){const l=this.cache,q=b.length,y=Db(d,q);zb(l,y)||(a.uniform1iv(this.addr,y),ib(l,y));for(a=0;a!==q;++a)d.setTexture3D(b[a]||Yi,y[a])}function Ta(a,b,d){const l=this.cache,q=b.length,y=Db(d,q);zb(l,
y)||(a.uniform1iv(this.addr,y),ib(l,y));for(a=0;a!==q;++a)d.setTextureCube(b[a]||Zi,y[a])}function wb(a,b,d){const l=this.cache,q=b.length,y=Db(d,q);zb(l,y)||(a.uniform1iv(this.addr,y),ib(l,y));for(a=0;a!==q;++a)d.setTexture2DArray(b[a]||$i,y[a])}function kc(a){switch(a){case 5126:return id;case 35664:return Kd;case 35665:return Ld;case 35666:return qd;case 35674:return rd;case 35675:return sd;case 35676:return Md;case 5124:case 35670:return jd;case 35667:case 35671:return Nd;case 35668:case 35672:return Ca;
case 35669:case 35673:return td;case 5125:return Mb;case 36294:return Zc;case 36295:return Oc;case 36296:return $c;case 35678:case 36198:case 36298:case 36306:case 35682:return Qa;case 35679:case 36299:case 36307:return jc;case 35680:case 36300:case 36308:case 36293:return Ta;case 36289:case 36303:case 36311:case 36292:return wb}}function pc(a,b,d){b=a.createShader(b);a.shaderSource(b,d);a.compileShader(b);return b}function Be(a,b,d){var l=a.getShaderParameter(b,a.COMPILE_STATUS),q=a.getShaderInfoLog(b).trim();
if(l&&""===q)return"";if(l=/ERROR: 0:(\d+)/.exec(q)){l=parseInt(l[1]);d=d.toUpperCase()+"\n\n"+q+"\n\n";b=a.getShaderSource(b);a=l;b=b.split("\n");q=[];var y=Math.max(a-6,0);for(l=Math.min(a+6,b.length);y<l;y++){const A=y+1;q.push(`${A===a?"\x3e":" "} ${A}: ${b[y]}`)}a=q.join("\n");return d+a}return q}function mf(a,b){a:switch(b){case 3E3:b=["Linear","( value )"];break a;case 3001:b=["sRGB","( value )"];break a;default:console.warn("THREE.WebGLProgram: Unsupported encoding:",b),b=["Linear","( value )"]}return"vec4 "+
a+"( vec4 value ) { return LinearTo"+b[0]+b[1]+"; }"}function ad(a,b){switch(b){case 1:b="Linear";break;case 2:b="Reinhard";break;case 3:b="OptimizedCineon";break;case 4:b="ACESFilmic";break;case 5:b="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",b),b="Linear"}return"vec3 "+a+"( vec3 color ) { return "+b+"ToneMapping( color ); }"}function nf(a){const b=[];for(const d in a){const l=a[d];!1!==l&&b.push("#define "+d+" "+l)}return b.join("\n")}function kd(a){return""!==
a}function be(a,b){const d=b.numSpotLightShadows+b.numSpotLightMaps-b.numSpotLightShadowsWithMaps;return a.replace(/NUM_DIR_LIGHTS/g,b.numDirLights).replace(/NUM_SPOT_LIGHTS/g,b.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,b.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,d).replace(/NUM_RECT_AREA_LIGHTS/g,b.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,b.numPointLights).replace(/NUM_HEMI_LIGHTS/g,b.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,b.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,
b.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,b.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,b.numPointLightShadows)}function ce(a,b){return a.replace(/NUM_CLIPPING_PLANES/g,b.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,b.numClippingPlanes-b.numClipIntersection)}function de(a,b){a=Ib[b];if(void 0===a)throw Error("Can not resolve #include \x3c"+b+"\x3e");return a.replace(Eh,de)}function Ce(a,b,d,l){a="";for(b=parseInt(b);b<parseInt(d);b++)a+=l.replace(/\[\s*i\s*\]/g,
"[ "+b+" ]").replace(/UNROLLED_LOOP_INDEX/g,b);return a}function fb(a){let b="precision "+a.precision+" float;\nprecision "+a.precision+" int;";"highp"===a.precision?b+="\n#define HIGH_PRECISION":"mediump"===a.precision?b+="\n#define MEDIUM_PRECISION":"lowp"===a.precision&&(b+="\n#define LOW_PRECISION");return b}function of(a){let b="SHADOWMAP_TYPE_BASIC";1===a.shadowMapType?b="SHADOWMAP_TYPE_PCF":2===a.shadowMapType?b="SHADOWMAP_TYPE_PCF_SOFT":3===a.shadowMapType&&(b="SHADOWMAP_TYPE_VSM");return b}
function pf(a){let b="ENVMAP_TYPE_CUBE";if(a.envMap)switch(a.envMapMode){case 301:case 302:b="ENVMAP_TYPE_CUBE";break;case 306:b="ENVMAP_TYPE_CUBE_UV"}return b}function qf(a){let b="ENVMAP_MODE_REFLECTION";if(a.envMap)switch(a.envMapMode){case 302:b="ENVMAP_MODE_REFRACTION"}return b}function rf(a){let b="ENVMAP_BLENDING_NONE";if(a.envMap)switch(a.combine){case 0:b="ENVMAP_BLENDING_MULTIPLY";break;case 1:b="ENVMAP_BLENDING_MIX";break;case 2:b="ENVMAP_BLENDING_ADD"}return b}function sf(a){a=a.envMapCubeUVHeight;
if(null===a)return null;const b=Math.log2(a)-2;return{texelWidth:1/(3*Math.max(Math.pow(2,b),112)),texelHeight:1/a,maxMip:b}}function tf(a,b,d,l){const q=a.getContext();var y=d.defines,A=d.vertexShader,D=d.fragmentShader,F=of(d),G=pf(d),M=qf(d),N=rf(d),P=sf(d),T=d.isWebGL2?"":[d.extensionDerivatives||d.envMapCubeUVHeight||d.bumpMap||d.tangentSpaceNormalMap||d.clearcoatNormalMap||d.flatShading||"physical"===d.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(d.extensionFragDepth||d.logarithmicDepthBuffer)&&
d.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",d.extensionDrawBuffers&&d.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(d.extensionShaderTextureLOD||d.envMap||d.transmission)&&d.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(kd).join("\n");const S=nf(y),L=q.createProgram();var U=d.glslVersion?"#version "+d.glslVersion+"\n":"";d.isRawShaderMaterial?(y=[S].filter(kd).join("\n"),0<y.length&&(y+="\n"),
F=[T,S].filter(kd).join("\n"),0<F.length&&(F+="\n")):(y=[fb(d),"#define SHADER_NAME "+d.shaderName,S,d.instancing?"#define USE_INSTANCING":"",d.instancingColor?"#define USE_INSTANCING_COLOR":"",d.supportsVertexTextures?"#define VERTEX_TEXTURES":"",d.useFog&&d.fog?"#define USE_FOG":"",d.useFog&&d.fogExp2?"#define FOG_EXP2":"",d.map?"#define USE_MAP":"",d.envMap?"#define USE_ENVMAP":"",d.envMap?"#define "+M:"",d.lightMap?"#define USE_LIGHTMAP":"",d.aoMap?"#define USE_AOMAP":"",d.emissiveMap?"#define USE_EMISSIVEMAP":
"",d.bumpMap?"#define USE_BUMPMAP":"",d.normalMap?"#define USE_NORMALMAP":"",d.normalMap&&d.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",d.normalMap&&d.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",d.clearcoatMap?"#define USE_CLEARCOATMAP":"",d.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",d.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",d.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",d.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":
"",d.displacementMap&&d.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",d.specularMap?"#define USE_SPECULARMAP":"",d.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",d.specularColorMap?"#define USE_SPECULARCOLORMAP":"",d.roughnessMap?"#define USE_ROUGHNESSMAP":"",d.metalnessMap?"#define USE_METALNESSMAP":"",d.alphaMap?"#define USE_ALPHAMAP":"",d.transmission?"#define USE_TRANSMISSION":"",d.transmissionMap?"#define USE_TRANSMISSIONMAP":"",d.thicknessMap?"#define USE_THICKNESSMAP":
"",d.sheenColorMap?"#define USE_SHEENCOLORMAP":"",d.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",d.vertexTangents?"#define USE_TANGENT":"",d.vertexColors?"#define USE_COLOR":"",d.vertexAlphas?"#define USE_COLOR_ALPHA":"",d.vertexUvs?"#define USE_UV":"",d.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",d.flatShading?"#define FLAT_SHADED":"",d.skinning?"#define USE_SKINNING":"",d.morphTargets?"#define USE_MORPHTARGETS":"",d.morphNormals&&!1===d.flatShading?"#define USE_MORPHNORMALS":"",d.morphColors&&
d.isWebGL2?"#define USE_MORPHCOLORS":"",0<d.morphTargetsCount&&d.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",0<d.morphTargetsCount&&d.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+d.morphTextureStride:"",0<d.morphTargetsCount&&d.isWebGL2?"#define MORPHTARGETS_COUNT "+d.morphTargetsCount:"",d.doubleSided?"#define DOUBLE_SIDED":"",d.flipSided?"#define FLIP_SIDED":"",d.shadowMapEnabled?"#define USE_SHADOWMAP":"",d.shadowMapEnabled?"#define "+F:"",d.sizeAttenuation?"#define USE_SIZEATTENUATION":"",d.logarithmicDepthBuffer?
"#define USE_LOGDEPTHBUF":"",d.logarithmicDepthBuffer&&d.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;",
"attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) \x26\x26 ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;",
"\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(kd).join("\n"),F=[T,fb(d),"#define SHADER_NAME "+d.shaderName,S,d.useFog&&d.fog?"#define USE_FOG":"",d.useFog&&d.fogExp2?"#define FOG_EXP2":"",d.map?"#define USE_MAP":
"",d.matcap?"#define USE_MATCAP":"",d.envMap?"#define USE_ENVMAP":"",d.envMap?"#define "+G:"",d.envMap?"#define "+M:"",d.envMap?"#define "+N:"",P?"#define CUBEUV_TEXEL_WIDTH "+P.texelWidth:"",P?"#define CUBEUV_TEXEL_HEIGHT "+P.texelHeight:"",P?"#define CUBEUV_MAX_MIP "+P.maxMip+".0":"",d.lightMap?"#define USE_LIGHTMAP":"",d.aoMap?"#define USE_AOMAP":"",d.emissiveMap?"#define USE_EMISSIVEMAP":"",d.bumpMap?"#define USE_BUMPMAP":"",d.normalMap?"#define USE_NORMALMAP":"",d.normalMap&&d.objectSpaceNormalMap?
"#define OBJECTSPACE_NORMALMAP":"",d.normalMap&&d.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",d.clearcoat?"#define USE_CLEARCOAT":"",d.clearcoatMap?"#define USE_CLEARCOATMAP":"",d.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",d.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",d.iridescence?"#define USE_IRIDESCENCE":"",d.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",d.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",d.specularMap?"#define USE_SPECULARMAP":
"",d.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",d.specularColorMap?"#define USE_SPECULARCOLORMAP":"",d.roughnessMap?"#define USE_ROUGHNESSMAP":"",d.metalnessMap?"#define USE_METALNESSMAP":"",d.alphaMap?"#define USE_ALPHAMAP":"",d.alphaTest?"#define USE_ALPHATEST":"",d.sheen?"#define USE_SHEEN":"",d.sheenColorMap?"#define USE_SHEENCOLORMAP":"",d.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",d.transmission?"#define USE_TRANSMISSION":"",d.transmissionMap?"#define USE_TRANSMISSIONMAP":
"",d.thicknessMap?"#define USE_THICKNESSMAP":"",d.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",d.vertexTangents?"#define USE_TANGENT":"",d.vertexColors||d.instancingColor?"#define USE_COLOR":"",d.vertexAlphas?"#define USE_COLOR_ALPHA":"",d.vertexUvs?"#define USE_UV":"",d.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",d.gradientMap?"#define USE_GRADIENTMAP":"",d.flatShading?"#define FLAT_SHADED":"",d.doubleSided?"#define DOUBLE_SIDED":"",d.flipSided?"#define FLIP_SIDED":"",d.shadowMapEnabled?"#define USE_SHADOWMAP":
"",d.shadowMapEnabled?"#define "+F:"",d.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",d.useLegacyLights?"#define LEGACY_LIGHTS":"",d.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",d.logarithmicDepthBuffer&&d.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==d.toneMapping?"#define TONE_MAPPING":"",0!==d.toneMapping?Ib.tonemapping_pars_fragment:"",0!==d.toneMapping?ad("toneMapping",d.toneMapping):
"",d.dithering?"#define DITHERING":"",d.opaque?"#define OPAQUE":"",Ib.encodings_pars_fragment,mf("linearToOutputTexel",d.outputEncoding),d.useDepthPacking?"#define DEPTH_PACKING "+d.depthPacking:"","\n"].filter(kd).join("\n"));A=A.replace(Eh,de);A=be(A,d);A=ce(A,d);D=D.replace(Eh,de);D=be(D,d);D=ce(D,d);A=A.replace(aj,Ce);D=D.replace(aj,Ce);d.isWebGL2&&!0!==d.isRawShaderMaterial&&(U="#version 300 es\n",y="precision mediump sampler2DArray;\n#define attribute in\n#define varying out\n#define texture2D texture\n"+
y,F=["#define varying in","300 es"===d.glslVersion?"":"layout(location \x3d 0) out highp vec4 pc_fragColor;","300 es"===d.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad"].join("\n")+
"\n"+F);D=U+F+D;A=pc(q,q.VERTEX_SHADER,U+y+A);D=pc(q,q.FRAGMENT_SHADER,D);q.attachShader(L,A);q.attachShader(L,D);void 0!==d.index0AttributeName?q.bindAttribLocation(L,0,d.index0AttributeName):!0===d.morphTargets&&q.bindAttribLocation(L,0,"position");q.linkProgram(L);if(a.debug.checkShaderErrors){a=q.getProgramInfoLog(L).trim();U=q.getShaderInfoLog(A).trim();G=q.getShaderInfoLog(D).trim();N=M=!0;if(!1===q.getProgramParameter(L,q.LINK_STATUS))M=!1,P=Be(q,A,"vertex"),T=Be(q,D,"fragment"),console.error("THREE.WebGLProgram: Shader Error "+
q.getError()+" - VALIDATE_STATUS "+q.getProgramParameter(L,q.VALIDATE_STATUS)+"\n\nProgram Info Log: "+a+"\n"+P+"\n"+T);else if(""!==a)console.warn("THREE.WebGLProgram: Program Info Log:",a);else if(""===U||""===G)N=!1;N&&(this.diagnostics={runnable:M,programLog:a,vertexShader:{log:U,prefix:y},fragmentShader:{log:G,prefix:F}})}q.deleteShader(A);q.deleteShader(D);let ma;this.getUniforms=function(){void 0===ma&&(ma=new mg(q,L));return ma};let ba;this.getAttributes=function(){if(void 0===ba){const na=
{},sa=q.getProgramParameter(L,q.ACTIVE_ATTRIBUTES);for(let ja=0;ja<sa;ja++){const Ga=q.getActiveAttrib(L,ja),oa=Ga.name;let wa=1;Ga.type===q.FLOAT_MAT2&&(wa=2);Ga.type===q.FLOAT_MAT3&&(wa=3);Ga.type===q.FLOAT_MAT4&&(wa=4);na[oa]={type:Ga.type,location:q.getAttribLocation(L,oa),locationSize:wa}}ba=na}return ba};this.destroy=function(){l.releaseStatesOfProgram(this);q.deleteProgram(L);this.program=void 0};this.name=d.shaderName;this.id=Uk++;this.cacheKey=b;this.usedTimes=1;this.program=L;this.vertexShader=
A;this.fragmentShader=D;return this}function uf(a,b,d,l,q,y,A){const D=new ng,F=new Vk,G=[],M=q.isWebGL2,N=q.logarithmicDepthBuffer,P=q.vertexTextures;let T=q.precision;const S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",
PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(L,U,ma,ba,na){const sa=ba.fog,ja=na.geometry;ba=L.isMeshStandardMaterial?ba.environment:null;const Ga=(ba=(L.isMeshStandardMaterial?d:b).get(L.envMap||ba))&&306===ba.mapping?ba.image.height:null,oa=S[L.type];null!==L.precision&&(T=q.getMaxPrecision(L.precision),T!==L.precision&&console.warn("THREE.WebGLProgram.getParameters:",L.precision,"not supported, using",T,"instead."));var wa=ja.morphAttributes.position||
ja.morphAttributes.normal||ja.morphAttributes.color;wa=void 0!==wa?wa.length:0;let ya=0;void 0!==ja.morphAttributes.position&&(ya=1);void 0!==ja.morphAttributes.normal&&(ya=2);void 0!==ja.morphAttributes.color&&(ya=3);let xa;let Va,La;if(oa){var Ra=Xc[oa];xa=Ra.vertexShader;Ra=Ra.fragmentShader}else xa=L.vertexShader,Ra=L.fragmentShader,F.update(L),Va=F.getVertexShaderID(L),La=F.getFragmentShaderID(L);const Na=a.getRenderTarget(),cb=0<L.clearcoat,ob=0<L.iridescence;return{isWebGL2:M,shaderID:oa,shaderName:L.type,
vertexShader:xa,fragmentShader:Ra,defines:L.defines,customVertexShaderID:Va,customFragmentShaderID:La,isRawShaderMaterial:!0===L.isRawShaderMaterial,glslVersion:L.glslVersion,precision:T,instancing:!0===na.isInstancedMesh,instancingColor:!0===na.isInstancedMesh&&null!==na.instanceColor,supportsVertexTextures:P,outputEncoding:null===Na?a.outputEncoding:!0===Na.isXRRenderTarget?Na.texture.encoding:3E3,map:!!L.map,matcap:!!L.matcap,envMap:!!ba,envMapMode:ba&&ba.mapping,envMapCubeUVHeight:Ga,lightMap:!!L.lightMap,
aoMap:!!L.aoMap,emissiveMap:!!L.emissiveMap,bumpMap:!!L.bumpMap,normalMap:!!L.normalMap,objectSpaceNormalMap:1===L.normalMapType,tangentSpaceNormalMap:0===L.normalMapType,decodeVideoTexture:!!L.map&&!0===L.map.isVideoTexture&&3001===L.map.encoding,clearcoat:cb,clearcoatMap:cb&&!!L.clearcoatMap,clearcoatRoughnessMap:cb&&!!L.clearcoatRoughnessMap,clearcoatNormalMap:cb&&!!L.clearcoatNormalMap,iridescence:ob,iridescenceMap:ob&&!!L.iridescenceMap,iridescenceThicknessMap:ob&&!!L.iridescenceThicknessMap,
displacementMap:!!L.displacementMap,roughnessMap:!!L.roughnessMap,metalnessMap:!!L.metalnessMap,specularMap:!!L.specularMap,specularIntensityMap:!!L.specularIntensityMap,specularColorMap:!!L.specularColorMap,opaque:!1===L.transparent&&1===L.blending,alphaMap:!!L.alphaMap,alphaTest:0<L.alphaTest,gradientMap:!!L.gradientMap,sheen:0<L.sheen,sheenColorMap:!!L.sheenColorMap,sheenRoughnessMap:!!L.sheenRoughnessMap,transmission:0<L.transmission,transmissionMap:!!L.transmissionMap,thicknessMap:!!L.thicknessMap,
combine:L.combine,vertexTangents:!!L.normalMap&&!!ja.attributes.tangent,vertexColors:L.vertexColors,vertexAlphas:!0===L.vertexColors&&!!ja.attributes.color&&4===ja.attributes.color.itemSize,vertexUvs:!!L.map||!!L.bumpMap||!!L.normalMap||!!L.specularMap||!!L.alphaMap||!!L.emissiveMap||!!L.roughnessMap||!!L.metalnessMap||!!L.clearcoatMap||!!L.clearcoatRoughnessMap||!!L.clearcoatNormalMap||!!L.iridescenceMap||!!L.iridescenceThicknessMap||!!L.displacementMap||!!L.transmissionMap||!!L.thicknessMap||!!L.specularIntensityMap||
!!L.specularColorMap||!!L.sheenColorMap||!!L.sheenRoughnessMap,uvsVertexOnly:!(L.map||L.bumpMap||L.normalMap||L.specularMap||L.alphaMap||L.emissiveMap||L.roughnessMap||L.metalnessMap||L.clearcoatNormalMap||L.iridescenceMap||L.iridescenceThicknessMap||0<L.transmission||L.transmissionMap||L.thicknessMap||L.specularIntensityMap||L.specularColorMap||0<L.sheen||L.sheenColorMap||L.sheenRoughnessMap)&&!!L.displacementMap,fog:!!sa,useFog:!0===L.fog,fogExp2:sa&&sa.isFogExp2,flatShading:!!L.flatShading,sizeAttenuation:L.sizeAttenuation,
logarithmicDepthBuffer:N,skinning:!0===na.isSkinnedMesh,morphTargets:void 0!==ja.morphAttributes.position,morphNormals:void 0!==ja.morphAttributes.normal,morphColors:void 0!==ja.morphAttributes.color,morphTargetsCount:wa,morphTextureStride:ya,numDirLights:U.directional.length,numPointLights:U.point.length,numSpotLights:U.spot.length,numSpotLightMaps:U.spotLightMap.length,numRectAreaLights:U.rectArea.length,numHemiLights:U.hemi.length,numDirLightShadows:U.directionalShadowMap.length,numPointLightShadows:U.pointShadowMap.length,
numSpotLightShadows:U.spotShadowMap.length,numSpotLightShadowsWithMaps:U.numSpotLightShadowsWithMaps,numClippingPlanes:A.numPlanes,numClipIntersection:A.numIntersection,dithering:L.dithering,shadowMapEnabled:a.shadowMap.enabled&&0<ma.length,shadowMapType:a.shadowMap.type,toneMapping:L.toneMapped?a.toneMapping:0,useLegacyLights:a.useLegacyLights,premultipliedAlpha:L.premultipliedAlpha,doubleSided:2===L.side,flipSided:1===L.side,useDepthPacking:!!L.depthPacking,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,
extensionDerivatives:L.extensions&&L.extensions.derivatives,extensionFragDepth:L.extensions&&L.extensions.fragDepth,extensionDrawBuffers:L.extensions&&L.extensions.drawBuffers,extensionShaderTextureLOD:L.extensions&&L.extensions.shaderTextureLOD,rendererExtensionFragDepth:M||l.has("EXT_frag_depth"),rendererExtensionDrawBuffers:M||l.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:M||l.has("EXT_shader_texture_lod"),customProgramCacheKey:L.customProgramCacheKey()}},getProgramCacheKey:function(L){const U=
[];L.shaderID?U.push(L.shaderID):(U.push(L.customVertexShaderID),U.push(L.customFragmentShaderID));if(void 0!==L.defines)for(const ma in L.defines)U.push(ma),U.push(L.defines[ma]);!1===L.isRawShaderMaterial&&(U.push(L.precision),U.push(L.outputEncoding),U.push(L.envMapMode),U.push(L.envMapCubeUVHeight),U.push(L.combine),U.push(L.vertexUvs),U.push(L.fogExp2),U.push(L.sizeAttenuation),U.push(L.morphTargetsCount),U.push(L.morphAttributeCount),U.push(L.numDirLights),U.push(L.numPointLights),U.push(L.numSpotLights),
U.push(L.numSpotLightMaps),U.push(L.numHemiLights),U.push(L.numRectAreaLights),U.push(L.numDirLightShadows),U.push(L.numPointLightShadows),U.push(L.numSpotLightShadows),U.push(L.numSpotLightShadowsWithMaps),U.push(L.shadowMapType),U.push(L.toneMapping),U.push(L.numClippingPlanes),U.push(L.numClipIntersection),U.push(L.depthPacking),D.disableAll(),L.isWebGL2&&D.enable(0),L.supportsVertexTextures&&D.enable(1),L.instancing&&D.enable(2),L.instancingColor&&D.enable(3),L.map&&D.enable(4),L.matcap&&D.enable(5),
L.envMap&&D.enable(6),L.lightMap&&D.enable(7),L.aoMap&&D.enable(8),L.emissiveMap&&D.enable(9),L.bumpMap&&D.enable(10),L.normalMap&&D.enable(11),L.objectSpaceNormalMap&&D.enable(12),L.tangentSpaceNormalMap&&D.enable(13),L.clearcoat&&D.enable(14),L.clearcoatMap&&D.enable(15),L.clearcoatRoughnessMap&&D.enable(16),L.clearcoatNormalMap&&D.enable(17),L.iridescence&&D.enable(18),L.iridescenceMap&&D.enable(19),L.iridescenceThicknessMap&&D.enable(20),L.displacementMap&&D.enable(21),L.specularMap&&D.enable(22),
L.roughnessMap&&D.enable(23),L.metalnessMap&&D.enable(24),L.gradientMap&&D.enable(25),L.alphaMap&&D.enable(26),L.alphaTest&&D.enable(27),L.vertexColors&&D.enable(28),L.vertexAlphas&&D.enable(29),L.vertexUvs&&D.enable(30),L.vertexTangents&&D.enable(31),L.uvsVertexOnly&&D.enable(32),U.push(D.mask),D.disableAll(),L.fog&&D.enable(0),L.useFog&&D.enable(1),L.flatShading&&D.enable(2),L.logarithmicDepthBuffer&&D.enable(3),L.skinning&&D.enable(4),L.morphTargets&&D.enable(5),L.morphNormals&&D.enable(6),L.morphColors&&
D.enable(7),L.premultipliedAlpha&&D.enable(8),L.shadowMapEnabled&&D.enable(9),L.useLegacyLights&&D.enable(10),L.doubleSided&&D.enable(11),L.flipSided&&D.enable(12),L.useDepthPacking&&D.enable(13),L.dithering&&D.enable(14),L.specularIntensityMap&&D.enable(15),L.specularColorMap&&D.enable(16),L.transmission&&D.enable(17),L.transmissionMap&&D.enable(18),L.thicknessMap&&D.enable(19),L.sheen&&D.enable(20),L.sheenColorMap&&D.enable(21),L.sheenRoughnessMap&&D.enable(22),L.decodeVideoTexture&&D.enable(23),
L.opaque&&D.enable(24),U.push(D.mask),U.push(a.outputEncoding));U.push(L.customProgramCacheKey);return U.join()},getUniforms:function(L){const U=S[L.type];return U?bj.clone(Xc[U].uniforms):L.uniforms},acquireProgram:function(L,U){let ma;for(let ba=0,na=G.length;ba<na;ba++){const sa=G[ba];if(sa.cacheKey===U){ma=sa;++ma.usedTimes;break}}void 0===ma&&(ma=new tf(a,U,L,y),G.push(ma));return ma},releaseProgram:function(L){if(0===--L.usedTimes){const U=G.indexOf(L);G[U]=G[G.length-1];G.pop();L.destroy()}},
releaseShaderCache:function(L){F.remove(L)},programs:G,dispose:function(){F.dispose()}}}function vf(){let a=new WeakMap;return{get:function(b){let d=a.get(b);void 0===d&&(d={},a.set(b,d));return d},remove:function(b){a.delete(b)},update:function(b,d,l){a.get(b)[d]=l},dispose:function(){a=new WeakMap}}}function wf(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==
b.z?a.z-b.z:a.id-b.id}function De(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function Ee(){function a(A,D,F,G,M,N){let P=b[d];void 0===P?(P={id:A.id,object:A,geometry:D,material:F,groupOrder:G,renderOrder:A.renderOrder,z:M,group:N},b[d]=P):(P.id=A.id,P.object=A,P.geometry=D,P.material=F,P.groupOrder=G,P.renderOrder=A.renderOrder,P.z=M,P.group=N);d++;return P}const b=[];let d=0;const l=[],q=
[],y=[];return{opaque:l,transmissive:q,transparent:y,init:function(){d=0;l.length=0;q.length=0;y.length=0},push:function(A,D,F,G,M,N){A=a(A,D,F,G,M,N);0<F.transmission?q.push(A):!0===F.transparent?y.push(A):l.push(A)},unshift:function(A,D,F,G,M,N){A=a(A,D,F,G,M,N);0<F.transmission?q.unshift(A):!0===F.transparent?y.unshift(A):l.unshift(A)},finish:function(){for(let A=d,D=b.length;A<D;A++){const F=b[A];if(null===F.id)break;F.id=null;F.object=null;F.geometry=null;F.material=null;F.group=null}},sort:function(A,
D){1<l.length&&l.sort(A||wf);1<q.length&&q.sort(D||De);1<y.length&&y.sort(D||De)}}}function xf(){let a=new WeakMap;return{get:function(b,d){const l=a.get(b);void 0===l?(d=new Ee,a.set(b,[d])):d>=l.length?(d=new Ee,l.push(d)):d=l[d];return d},dispose:function(){a=new WeakMap}}}function yf(){const a={};return{get:function(b){if(void 0!==a[b.id])return a[b.id];let d;switch(b.type){case "DirectionalLight":d={direction:new aa,color:new gb};break;case "SpotLight":d={position:new aa,direction:new aa,color:new gb,
distance:0,coneCos:0,penumbraCos:0,decay:0};break;case "PointLight":d={position:new aa,color:new gb,distance:0,decay:0};break;case "HemisphereLight":d={direction:new aa,skyColor:new gb,groundColor:new gb};break;case "RectAreaLight":d={color:new gb,position:new aa,halfWidth:new aa,halfHeight:new aa}}return a[b.id]=d}}}function zf(){const a={};return{get:function(b){if(void 0!==a[b.id])return a[b.id];let d;switch(b.type){case "DirectionalLight":d={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new za};
break;case "SpotLight":d={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new za};break;case "PointLight":d={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new za,shadowCameraNear:1,shadowCameraFar:1E3}}return a[b.id]=d}}}function Af(a,b){return(b.castShadow?2:0)-(a.castShadow?2:0)+(b.map?1:0)-(a.map?1:0)}function Bf(a,b){const d=new yf,l=zf(),q={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,
numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let F=0;9>F;F++)q.probe.push(new aa);const y=new aa,A=new Fb,D=new Fb;return{setup:function(F,G){let M=0,N=0,P=0;for(var T=0;9>
T;T++)q.probe[T].set(0,0,0);let S=T=0,L=0,U=0,ma=0,ba=0,na=0,sa=0,ja=0,Ga=0;F.sort(Af);G=!0===G?Math.PI:1;for(let La=0,Ra=F.length;La<Ra;La++){var oa=F[La],wa=oa.color,ya=oa.intensity,xa=oa.distance,Va=oa.shadow&&oa.shadow.map?oa.shadow.map.texture:null;if(oa.isAmbientLight)M+=wa.r*ya*G,N+=wa.g*ya*G,P+=wa.b*ya*G;else if(oa.isLightProbe)for(Va=0;9>Va;Va++)q.probe[Va].addScaledVector(oa.sh.coefficients[Va],ya);else if(oa.isDirectionalLight)ya=d.get(oa),ya.color.copy(oa.color).multiplyScalar(oa.intensity*
G),oa.castShadow&&(wa=oa.shadow,xa=l.get(oa),xa.shadowBias=wa.bias,xa.shadowNormalBias=wa.normalBias,xa.shadowRadius=wa.radius,xa.shadowMapSize=wa.mapSize,q.directionalShadow[T]=xa,q.directionalShadowMap[T]=Va,q.directionalShadowMatrix[T]=oa.shadow.matrix,ba++),q.directional[T]=ya,T++;else if(oa.isSpotLight){const Na=d.get(oa);Na.position.setFromMatrixPosition(oa.matrixWorld);Na.color.copy(wa).multiplyScalar(ya*G);Na.distance=xa;Na.coneCos=Math.cos(oa.angle);Na.penumbraCos=Math.cos(oa.angle*(1-oa.penumbra));
Na.decay=oa.decay;q.spot[L]=Na;ya=oa.shadow;oa.map&&(q.spotLightMap[ja]=oa.map,ja++,ya.updateMatrices(oa),oa.castShadow&&Ga++);q.spotLightMatrix[L]=ya.matrix;oa.castShadow&&(oa=l.get(oa),oa.shadowBias=ya.bias,oa.shadowNormalBias=ya.normalBias,oa.shadowRadius=ya.radius,oa.shadowMapSize=ya.mapSize,q.spotShadow[L]=oa,q.spotShadowMap[L]=Va,sa++);L++}else oa.isRectAreaLight?(Va=d.get(oa),Va.color.copy(wa).multiplyScalar(ya),Va.halfWidth.set(.5*oa.width,0,0),Va.halfHeight.set(0,.5*oa.height,0),q.rectArea[U]=
Va,U++):oa.isPointLight?(ya=d.get(oa),ya.color.copy(oa.color).multiplyScalar(oa.intensity*G),ya.distance=oa.distance,ya.decay=oa.decay,oa.castShadow&&(wa=oa.shadow,xa=l.get(oa),xa.shadowBias=wa.bias,xa.shadowNormalBias=wa.normalBias,xa.shadowRadius=wa.radius,xa.shadowMapSize=wa.mapSize,xa.shadowCameraNear=wa.camera.near,xa.shadowCameraFar=wa.camera.far,q.pointShadow[S]=xa,q.pointShadowMap[S]=Va,q.pointShadowMatrix[S]=oa.shadow.matrix,na++),q.point[S]=ya,S++):oa.isHemisphereLight&&(Va=d.get(oa),Va.skyColor.copy(oa.color).multiplyScalar(ya*
G),Va.groundColor.copy(oa.groundColor).multiplyScalar(ya*G),q.hemi[ma]=Va,ma++)}0<U&&(b.isWebGL2?(q.rectAreaLTC1=ab.LTC_FLOAT_1,q.rectAreaLTC2=ab.LTC_FLOAT_2):!0===a.has("OES_texture_float_linear")?(q.rectAreaLTC1=ab.LTC_FLOAT_1,q.rectAreaLTC2=ab.LTC_FLOAT_2):!0===a.has("OES_texture_half_float_linear")?(q.rectAreaLTC1=ab.LTC_HALF_1,q.rectAreaLTC2=ab.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions."));q.ambient[0]=M;q.ambient[1]=N;q.ambient[2]=
P;F=q.hash;if(F.directionalLength!==T||F.pointLength!==S||F.spotLength!==L||F.rectAreaLength!==U||F.hemiLength!==ma||F.numDirectionalShadows!==ba||F.numPointShadows!==na||F.numSpotShadows!==sa||F.numSpotMaps!==ja)q.directional.length=T,q.spot.length=L,q.rectArea.length=U,q.point.length=S,q.hemi.length=ma,q.directionalShadow.length=ba,q.directionalShadowMap.length=ba,q.pointShadow.length=na,q.pointShadowMap.length=na,q.spotShadow.length=sa,q.spotShadowMap.length=sa,q.directionalShadowMatrix.length=
ba,q.pointShadowMatrix.length=na,q.spotLightMatrix.length=sa+ja-Ga,q.spotLightMap.length=ja,q.numSpotLightShadowsWithMaps=Ga,F.directionalLength=T,F.pointLength=S,F.spotLength=L,F.rectAreaLength=U,F.hemiLength=ma,F.numDirectionalShadows=ba,F.numPointShadows=na,F.numSpotShadows=sa,F.numSpotMaps=ja,q.version=Wk++},setupView:function(F,G){let M=0,N=0,P=0,T=0,S=0;G=G.matrixWorldInverse;for(let U=0,ma=F.length;U<ma;U++){const ba=F[U];if(ba.isDirectionalLight){var L=q.directional[M];L.direction.setFromMatrixPosition(ba.matrixWorld);
y.setFromMatrixPosition(ba.target.matrixWorld);L.direction.sub(y);L.direction.transformDirection(G);M++}else ba.isSpotLight?(L=q.spot[P],L.position.setFromMatrixPosition(ba.matrixWorld),L.position.applyMatrix4(G),L.direction.setFromMatrixPosition(ba.matrixWorld),y.setFromMatrixPosition(ba.target.matrixWorld),L.direction.sub(y),L.direction.transformDirection(G),P++):ba.isRectAreaLight?(L=q.rectArea[T],L.position.setFromMatrixPosition(ba.matrixWorld),L.position.applyMatrix4(G),D.identity(),A.copy(ba.matrixWorld),
A.premultiply(G),D.extractRotation(A),L.halfWidth.set(.5*ba.width,0,0),L.halfHeight.set(0,.5*ba.height,0),L.halfWidth.applyMatrix4(D),L.halfHeight.applyMatrix4(D),T++):ba.isPointLight?(L=q.point[N],L.position.setFromMatrixPosition(ba.matrixWorld),L.position.applyMatrix4(G),N++):ba.isHemisphereLight&&(L=q.hemi[S],L.direction.setFromMatrixPosition(ba.matrixWorld),L.direction.transformDirection(G),S++)}},state:q}}function Od(a,b){const d=new Bf(a,b),l=[],q=[];return{init:function(){l.length=0;q.length=
0},state:{lightsArray:l,shadowsArray:q,lights:d},setupLights:function(y){d.setup(l,y)},setupLightsView:function(y){d.setupView(l,y)},pushLight:function(y){l.push(y)},pushShadow:function(y){q.push(y)}}}function Ac(a,b){let d=new WeakMap;return{get:function(l,q=0){const y=d.get(l);void 0===y?(q=new Od(a,b),d.set(l,[q])):q>=y.length?(q=new Od(a,b),y.push(q)):q=y[q];return q},dispose:function(){d=new WeakMap}}}function Fh(a,b,d){function l(ba,na,sa,ja,Ga,oa){ba=!0===sa.isPointLight?ba.customDistanceMaterial:
ba.customDepthMaterial;if(void 0===ba&&(ba=!0===sa.isPointLight?M:G,a.localClippingEnabled&&!0===na.clipShadows&&Array.isArray(na.clippingPlanes)&&0!==na.clippingPlanes.length||na.displacementMap&&0!==na.displacementScale||na.alphaMap&&0<na.alphaTest||na.map&&0<na.alphaTest)){var wa=ba.uuid;const ya=na.uuid;let xa=N[wa];void 0===xa&&(xa={},N[wa]=xa);wa=xa[ya];void 0===wa&&(wa=ba.clone(),xa[ya]=wa);ba=wa}ba.visible=na.visible;ba.wireframe=na.wireframe;ba.side=3===oa?null!==na.shadowSide?na.shadowSide:
na.side:null!==na.shadowSide?na.shadowSide:T[na.side];ba.alphaMap=na.alphaMap;ba.alphaTest=na.alphaTest;ba.map=na.map;ba.clipShadows=na.clipShadows;ba.clippingPlanes=na.clippingPlanes;ba.clipIntersection=na.clipIntersection;ba.displacementMap=na.displacementMap;ba.displacementScale=na.displacementScale;ba.displacementBias=na.displacementBias;ba.wireframeLinewidth=na.wireframeLinewidth;ba.linewidth=na.linewidth;!0===sa.isPointLight&&!0===ba.isMeshDistanceMaterial&&(ba.referencePosition.setFromMatrixPosition(sa.matrixWorld),
ba.nearDistance=ja,ba.farDistance=Ga);return ba}function q(ba,na,sa,ja,Ga){if(!1!==ba.visible){if(ba.layers.test(na.layers)&&(ba.isMesh||ba.isLine||ba.isPoints)&&(ba.castShadow||ba.receiveShadow&&3===Ga)&&(!ba.frustumCulled||y.intersectsObject(ba))){ba.modelViewMatrix.multiplyMatrices(sa.matrixWorldInverse,ba.matrixWorld);const ya=b.update(ba);var oa=ba.material;if(Array.isArray(oa)){const xa=ya.groups;for(let Va=0,La=xa.length;Va<La;Va++){const Ra=xa[Va];var wa=oa[Ra.materialIndex];wa&&wa.visible&&
(wa=l(ba,wa,ja,sa.near,sa.far,Ga),a.renderBufferDirect(sa,null,ya,wa,ba,Ra))}}else oa.visible&&(oa=l(ba,oa,ja,sa.near,sa.far,Ga),a.renderBufferDirect(sa,null,ya,oa,ba,null))}ba=ba.children;for(let ya=0,xa=ba.length;ya<xa;ya++)q(ba[ya],na,sa,ja,Ga)}}let y=new og;const A=new za,D=new za,F=new cc,G=new Gh({depthPacking:3201}),M=new Hh,N={},P=d.maxTextureSize,T={[0]:1,[1]:0,[2]:2},S=new fd({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new za},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position \x3d vec4( position, 1.0 );\n}",
fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include \x3cpacking\x3e\nvoid main() {\n\tconst float samples \x3d float( VSM_SAMPLES );\n\tfloat mean \x3d 0.0;\n\tfloat squared_mean \x3d 0.0;\n\tfloat uvStride \x3d samples \x3c\x3d 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart \x3d samples \x3c\x3d 1.0 ? 0.0 : - 1.0;\n\tfor ( float i \x3d 0.0; i \x3c samples; i ++ ) {\n\t\tfloat uvOffset \x3d uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution \x3d unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean +\x3d distribution.x;\n\t\t\tsquared_mean +\x3d distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth \x3d unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean +\x3d depth;\n\t\t\tsquared_mean +\x3d depth * depth;\n\t\t#endif\n\t}\n\tmean \x3d mean / samples;\n\tsquared_mean \x3d squared_mean / samples;\n\tfloat std_dev \x3d sqrt( squared_mean - mean * mean );\n\tgl_FragColor \x3d pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),
L=S.clone();L.defines.HORIZONTAL_PASS=1;d=new Kb;d.setAttribute("position",new fc(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const U=new xc(d,S),ma=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=1;this.render=function(ba,na,sa){if(!1!==ma.enabled&&(!1!==ma.autoUpdate||!1!==ma.needsUpdate)&&0!==ba.length){var ja=a.getRenderTarget(),Ga=a.getActiveCubeFace(),oa=a.getActiveMipmapLevel(),wa=a.state;wa.setBlending(0);wa.buffers.color.setClear(1,1,1,1);wa.buffers.depth.setTest(!0);
wa.setScissorTest(!1);for(let La=0,Ra=ba.length;La<Ra;La++){var ya=ba[La];const Na=ya.shadow;if(void 0===Na)console.warn("THREE.WebGLShadowMap:",ya,"has no shadow.");else if(!1!==Na.autoUpdate||!1!==Na.needsUpdate){A.copy(Na.mapSize);var xa=Na.getFrameExtents();A.multiply(xa);D.copy(Na.mapSize);if(A.x>P||A.y>P)A.x>P&&(D.x=Math.floor(P/xa.x),A.x=D.x*xa.x,Na.mapSize.x=D.x),A.y>P&&(D.y=Math.floor(P/xa.y),A.y=D.y*xa.y,Na.mapSize.y=D.y);null===Na.map&&(Na.map=new Yc(A.x,A.y,3!==this.type?{minFilter:1003,
magFilter:1003}:{}),Na.map.texture.name=ya.name+".shadowMap",Na.camera.updateProjectionMatrix());a.setRenderTarget(Na.map);a.clear();xa=Na.getViewportCount();for(var Va=0;Va<xa;Va++){const cb=Na.getViewport(Va);F.set(D.x*cb.x,D.y*cb.y,D.x*cb.z,D.y*cb.w);wa.viewport(F);Na.updateMatrices(ya,Va);y=Na.getFrustum();q(na,sa,Na.camera,ya,this.type)}!0!==Na.isPointLightShadow&&3===this.type&&(ya=Na,xa=sa,Va=b.update(U),S.defines.VSM_SAMPLES!==ya.blurSamples&&(S.defines.VSM_SAMPLES=ya.blurSamples,L.defines.VSM_SAMPLES=
ya.blurSamples,S.needsUpdate=!0,L.needsUpdate=!0),null===ya.mapPass&&(ya.mapPass=new Yc(A.x,A.y)),S.uniforms.shadow_pass.value=ya.map.texture,S.uniforms.resolution.value=ya.mapSize,S.uniforms.radius.value=ya.radius,a.setRenderTarget(ya.mapPass),a.clear(),a.renderBufferDirect(xa,null,Va,S,U,null),L.uniforms.shadow_pass.value=ya.mapPass.texture,L.uniforms.resolution.value=ya.mapSize,L.uniforms.radius.value=ya.radius,a.setRenderTarget(ya.map),a.clear(),a.renderBufferDirect(xa,null,Va,L,U,null));Na.needsUpdate=
!1}}ma.needsUpdate=!1;a.setRenderTarget(ja,Ga,oa)}}}function Ih(a,b,d){function l(ha,Ba,Ia){const Ja=new Uint8Array(4),Ua=a.createTexture();a.bindTexture(ha,Ua);a.texParameteri(ha,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(ha,a.TEXTURE_MAG_FILTER,a.NEAREST);for(ha=0;ha<Ia;ha++)a.texImage2D(Ba+ha,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,Ja);return Ua}function q(ha){!0!==U[ha]&&(a.enable(ha),U[ha]=!0)}function y(ha){!1!==U[ha]&&(a.disable(ha),U[ha]=!1)}function A(ha,Ba,Ia,Ja,Ua,eb,kb,Nb){if(0===ha)!0===
ja&&(y(a.BLEND),ja=!1);else if(!1===ja&&(q(a.BLEND),ja=!0),5!==ha){if(ha!==Ga||Nb!==Ra){if(100!==oa||100!==xa)a.blendEquation(a.FUNC_ADD),xa=oa=100;if(Nb)switch(ha){case 1:a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);break;case 2:a.blendFunc(a.ONE,a.ONE);break;case 3:a.blendFuncSeparate(a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ZERO,a.ONE);break;case 4:a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",
ha)}else switch(ha){case 1:a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);break;case 2:a.blendFunc(a.SRC_ALPHA,a.ONE);break;case 3:a.blendFuncSeparate(a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ZERO,a.ONE);break;case 4:a.blendFunc(a.ZERO,a.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ha)}La=Va=ya=wa=null;Ga=ha;Ra=Nb}}else{Ua=Ua||Ba;eb=eb||Ia;kb=kb||Ja;if(Ba!==oa||Ua!==xa)a.blendEquationSeparate(ra[Ba],ra[Ua]),oa=Ba,xa=Ua;if(Ia!==wa||Ja!==ya||
eb!==Va||kb!==La)a.blendFuncSeparate(Za[Ia],Za[Ja],Za[eb],Za[kb]),wa=Ia,ya=Ja,Va=eb,La=kb;Ga=ha;Ra=!1}}function D(ha){Na!==ha&&(ha?a.frontFace(a.CW):a.frontFace(a.CCW),Na=ha)}function F(ha){0!==ha?(q(a.CULL_FACE),ha!==cb&&(1===ha?a.cullFace(a.BACK):2===ha?a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):y(a.CULL_FACE);cb=ha}function G(ha,Ba,Ia){if(ha){if(q(a.POLYGON_OFFSET_FILL),ub!==Ba||Bb!==Ia)a.polygonOffset(Ba,Ia),ub=Ba,Bb=Ia}else y(a.POLYGON_OFFSET_FILL)}const M=d.isWebGL2,N=new function(){let ha=
!1;const Ba=new cc;let Ia=null;const Ja=new cc(0,0,0,0);return{setMask:function(Ua){Ia===Ua||ha||(a.colorMask(Ua,Ua,Ua,Ua),Ia=Ua)},setLocked:function(Ua){ha=Ua},setClear:function(Ua,eb,kb,Nb,ua){!0===ua&&(Ua*=Nb,eb*=Nb,kb*=Nb);Ba.set(Ua,eb,kb,Nb);!1===Ja.equals(Ba)&&(a.clearColor(Ua,eb,kb,Nb),Ja.copy(Ba))},reset:function(){ha=!1;Ia=null;Ja.set(-1,0,0,0)}}},P=new function(){let ha=!1,Ba=null,Ia=null,Ja=null;return{setTest:function(Ua){Ua?q(a.DEPTH_TEST):y(a.DEPTH_TEST)},setMask:function(Ua){Ba===Ua||
ha||(a.depthMask(Ua),Ba=Ua)},setFunc:function(Ua){if(Ia!==Ua){switch(Ua){case 0:a.depthFunc(a.NEVER);break;case 1:a.depthFunc(a.ALWAYS);break;case 2:a.depthFunc(a.LESS);break;case 3:a.depthFunc(a.LEQUAL);break;case 4:a.depthFunc(a.EQUAL);break;case 5:a.depthFunc(a.GEQUAL);break;case 6:a.depthFunc(a.GREATER);break;case 7:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}Ia=Ua}},setLocked:function(Ua){ha=Ua},setClear:function(Ua){Ja!==Ua&&(a.clearDepth(Ua),Ja=Ua)},reset:function(){ha=!1;Ja=
Ia=Ba=null}}},T=new function(){let ha=!1,Ba=null,Ia=null,Ja=null,Ua=null,eb=null,kb=null,Nb=null,ua=null;return{setTest:function(Ab){ha||(Ab?q(a.STENCIL_TEST):y(a.STENCIL_TEST))},setMask:function(Ab){Ba===Ab||ha||(a.stencilMask(Ab),Ba=Ab)},setFunc:function(Ab,Ub,Lb){if(Ia!==Ab||Ja!==Ub||Ua!==Lb)a.stencilFunc(Ab,Ub,Lb),Ia=Ab,Ja=Ub,Ua=Lb},setOp:function(Ab,Ub,Lb){if(eb!==Ab||kb!==Ub||Nb!==Lb)a.stencilOp(Ab,Ub,Lb),eb=Ab,kb=Ub,Nb=Lb},setLocked:function(Ab){ha=Ab},setClear:function(Ab){ua!==Ab&&(a.clearStencil(Ab),
ua=Ab)},reset:function(){ha=!1;ua=Nb=kb=eb=Ua=Ja=Ia=Ba=null}}},S=new WeakMap,L=new WeakMap;let U={},ma={},ba=new WeakMap,na=[],sa=null,ja=!1,Ga=null,oa=null,wa=null,ya=null,xa=null,Va=null,La=null,Ra=!1,Na=null,cb=null,ob=null,ub=null,Bb=null;const Sa=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let $a=!1;var bb=0;bb=a.getParameter(a.VERSION);-1!==bb.indexOf("WebGL")?(bb=parseFloat(/^WebGL (\d)/.exec(bb)[1]),$a=1<=bb):-1!==bb.indexOf("OpenGL ES")&&(bb=parseFloat(/^OpenGL ES (\d)/.exec(bb)[1]),
$a=2<=bb);let rb=null,nb={};bb=a.getParameter(a.SCISSOR_BOX);const Y=a.getParameter(a.VIEWPORT),V=(new cc).fromArray(bb),fa=(new cc).fromArray(Y),ia={};ia[a.TEXTURE_2D]=l(a.TEXTURE_2D,a.TEXTURE_2D,1);ia[a.TEXTURE_CUBE_MAP]=l(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6);N.setClear(0,0,0,1);P.setClear(1);T.setClear(0);q(a.DEPTH_TEST);P.setFunc(3);D(!1);F(1);q(a.CULL_FACE);A(0);const ra={[100]:a.FUNC_ADD,[101]:a.FUNC_SUBTRACT,[102]:a.FUNC_REVERSE_SUBTRACT};M?(ra[103]=a.MIN,ra[104]=a.MAX):(bb=
b.get("EXT_blend_minmax"),null!==bb&&(ra[103]=bb.MIN_EXT,ra[104]=bb.MAX_EXT));const Za={[200]:a.ZERO,[201]:a.ONE,[202]:a.SRC_COLOR,[204]:a.SRC_ALPHA,[210]:a.SRC_ALPHA_SATURATE,[208]:a.DST_COLOR,[206]:a.DST_ALPHA,[203]:a.ONE_MINUS_SRC_COLOR,[205]:a.ONE_MINUS_SRC_ALPHA,[209]:a.ONE_MINUS_DST_COLOR,[207]:a.ONE_MINUS_DST_ALPHA};return{buffers:{color:N,depth:P,stencil:T},enable:q,disable:y,bindFramebuffer:function(ha,Ba){return ma[ha]!==Ba?(a.bindFramebuffer(ha,Ba),ma[ha]=Ba,M&&(ha===a.DRAW_FRAMEBUFFER&&
(ma[a.FRAMEBUFFER]=Ba),ha===a.FRAMEBUFFER&&(ma[a.DRAW_FRAMEBUFFER]=Ba)),!0):!1},drawBuffers:function(ha,Ba){let Ia=na,Ja=!1;if(ha)if(Ia=ba.get(Ba),void 0===Ia&&(Ia=[],ba.set(Ba,Ia)),ha.isWebGLMultipleRenderTargets){if(ha=ha.texture,Ia.length!==ha.length||Ia[0]!==a.COLOR_ATTACHMENT0){for(let Ua=0,eb=ha.length;Ua<eb;Ua++)Ia[Ua]=a.COLOR_ATTACHMENT0+Ua;Ia.length=ha.length;Ja=!0}}else Ia[0]!==a.COLOR_ATTACHMENT0&&(Ia[0]=a.COLOR_ATTACHMENT0,Ja=!0);else Ia[0]!==a.BACK&&(Ia[0]=a.BACK,Ja=!0);Ja&&(d.isWebGL2?
a.drawBuffers(Ia):b.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ia))},useProgram:function(ha){return sa!==ha?(a.useProgram(ha),sa=ha,!0):!1},setBlending:A,setMaterial:function(ha,Ba){2===ha.side?y(a.CULL_FACE):q(a.CULL_FACE);let Ia=1===ha.side;Ba&&(Ia=!Ia);D(Ia);1===ha.blending&&!1===ha.transparent?A(0):A(ha.blending,ha.blendEquation,ha.blendSrc,ha.blendDst,ha.blendEquationAlpha,ha.blendSrcAlpha,ha.blendDstAlpha,ha.premultipliedAlpha);P.setFunc(ha.depthFunc);P.setTest(ha.depthTest);P.setMask(ha.depthWrite);
N.setMask(ha.colorWrite);Ba=ha.stencilWrite;T.setTest(Ba);Ba&&(T.setMask(ha.stencilWriteMask),T.setFunc(ha.stencilFunc,ha.stencilRef,ha.stencilFuncMask),T.setOp(ha.stencilFail,ha.stencilZFail,ha.stencilZPass));G(ha.polygonOffset,ha.polygonOffsetFactor,ha.polygonOffsetUnits);!0===ha.alphaToCoverage?q(a.SAMPLE_ALPHA_TO_COVERAGE):y(a.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:D,setCullFace:F,setLineWidth:function(ha){ha!==ob&&($a&&a.lineWidth(ha),ob=ha)},setPolygonOffset:G,setScissorTest:function(ha){ha?
q(a.SCISSOR_TEST):y(a.SCISSOR_TEST)},activeTexture:function(ha){void 0===ha&&(ha=a.TEXTURE0+Sa-1);rb!==ha&&(a.activeTexture(ha),rb=ha)},bindTexture:function(ha,Ba,Ia){void 0===Ia&&(Ia=null===rb?a.TEXTURE0+Sa-1:rb);let Ja=nb[Ia];void 0===Ja&&(Ja={type:void 0,texture:void 0},nb[Ia]=Ja);if(Ja.type!==ha||Ja.texture!==Ba)rb!==Ia&&(a.activeTexture(Ia),rb=Ia),a.bindTexture(ha,Ba||ia[ha]),Ja.type=ha,Ja.texture=Ba},unbindTexture:function(){const ha=nb[rb];void 0!==ha&&void 0!==ha.type&&(a.bindTexture(ha.type,
null),ha.type=void 0,ha.texture=void 0)},compressedTexImage2D:function(){try{a.compressedTexImage2D.apply(a,arguments)}catch(ha){console.error("THREE.WebGLState:",ha)}},compressedTexImage3D:function(){try{a.compressedTexImage3D.apply(a,arguments)}catch(ha){console.error("THREE.WebGLState:",ha)}},texImage2D:function(){try{a.texImage2D.apply(a,arguments)}catch(ha){console.error("THREE.WebGLState:",ha)}},texImage3D:function(){try{a.texImage3D.apply(a,arguments)}catch(ha){console.error("THREE.WebGLState:",
ha)}},updateUBOMapping:function(ha,Ba){let Ia=L.get(Ba);void 0===Ia&&(Ia=new WeakMap,L.set(Ba,Ia));let Ja=Ia.get(ha);void 0===Ja&&(Ja=a.getUniformBlockIndex(Ba,ha.name),Ia.set(ha,Ja))},uniformBlockBinding:function(ha,Ba){const Ia=L.get(Ba).get(ha);S.get(Ba)!==Ia&&(a.uniformBlockBinding(Ba,Ia,ha.__bindingPointIndex),S.set(Ba,Ia))},texStorage2D:function(){try{a.texStorage2D.apply(a,arguments)}catch(ha){console.error("THREE.WebGLState:",ha)}},texStorage3D:function(){try{a.texStorage3D.apply(a,arguments)}catch(ha){console.error("THREE.WebGLState:",
ha)}},texSubImage2D:function(){try{a.texSubImage2D.apply(a,arguments)}catch(ha){console.error("THREE.WebGLState:",ha)}},texSubImage3D:function(){try{a.texSubImage3D.apply(a,arguments)}catch(ha){console.error("THREE.WebGLState:",ha)}},compressedTexSubImage2D:function(){try{a.compressedTexSubImage2D.apply(a,arguments)}catch(ha){console.error("THREE.WebGLState:",ha)}},compressedTexSubImage3D:function(){try{a.compressedTexSubImage3D.apply(a,arguments)}catch(ha){console.error("THREE.WebGLState:",ha)}},
scissor:function(ha){!1===V.equals(ha)&&(a.scissor(ha.x,ha.y,ha.z,ha.w),V.copy(ha))},viewport:function(ha){!1===fa.equals(ha)&&(a.viewport(ha.x,ha.y,ha.z,ha.w),fa.copy(ha))},reset:function(){a.disable(a.BLEND);a.disable(a.CULL_FACE);a.disable(a.DEPTH_TEST);a.disable(a.POLYGON_OFFSET_FILL);a.disable(a.SCISSOR_TEST);a.disable(a.STENCIL_TEST);a.disable(a.SAMPLE_ALPHA_TO_COVERAGE);a.blendEquation(a.FUNC_ADD);a.blendFunc(a.ONE,a.ZERO);a.blendFuncSeparate(a.ONE,a.ZERO,a.ONE,a.ZERO);a.colorMask(!0,!0,!0,
!0);a.clearColor(0,0,0,0);a.depthMask(!0);a.depthFunc(a.LESS);a.clearDepth(1);a.stencilMask(4294967295);a.stencilFunc(a.ALWAYS,0,4294967295);a.stencilOp(a.KEEP,a.KEEP,a.KEEP);a.clearStencil(0);a.cullFace(a.BACK);a.frontFace(a.CCW);a.polygonOffset(0,0);a.activeTexture(a.TEXTURE0);a.bindFramebuffer(a.FRAMEBUFFER,null);!0===M&&(a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null),a.bindFramebuffer(a.READ_FRAMEBUFFER,null));a.useProgram(null);a.lineWidth(1);a.scissor(0,0,a.canvas.width,a.canvas.height);a.viewport(0,
0,a.canvas.width,a.canvas.height);U={};rb=null;nb={};ma={};ba=new WeakMap;na=[];sa=null;ja=!1;La=Va=xa=ya=wa=oa=Ga=null;Ra=!1;Bb=ub=ob=cb=Na=null;V.set(0,0,a.canvas.width,a.canvas.height);fa.set(0,0,a.canvas.width,a.canvas.height);N.reset();P.reset();T.reset()}}}function Jh(a,b,d,l,q,y,A){function D(Y,V,fa,ia){var ra=1;if(Y.width>ia||Y.height>ia)ra=ia/Math.max(Y.width,Y.height);if(1>ra||!0===V){if("undefined"!==typeof HTMLImageElement&&Y instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&
Y instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&Y instanceof ImageBitmap)return ia=V?k:Math.floor,V=ia(ra*Y.width),ra=ia(ra*Y.height),void 0===Bb&&(Bb=$a?new OffscreenCanvas(V,ra):w("canvas")),fa=fa?$a?new OffscreenCanvas(V,ra):w("canvas"):Bb,fa.width=V,fa.height=ra,fa.getContext("2d").drawImage(Y,0,0,V,ra),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Y.width+"x"+Y.height+") to ("+V+"x"+ra+")."),fa;"data"in Y&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+
Y.width+"x"+Y.height+").")}return Y}function F(Y){return f(Y.width)&&f(Y.height)}function G(Y,V){return Y.generateMipmaps&&V&&1003!==Y.minFilter&&1006!==Y.minFilter}function M(Y,V,fa,ia,ra=!1){if(!1===xa)return V;if(null!==Y){if(void 0!==a[Y])return a[Y];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Y+"'")}Y=V;V===a.RED&&(fa===a.FLOAT&&(Y=a.R32F),fa===a.HALF_FLOAT&&(Y=a.R16F),fa===a.UNSIGNED_BYTE&&(Y=a.R8));V===a.RG&&(fa===a.FLOAT&&(Y=a.RG32F),fa===a.HALF_FLOAT&&
(Y=a.RG16F),fa===a.UNSIGNED_BYTE&&(Y=a.RG8));V===a.RGBA&&(fa===a.FLOAT&&(Y=a.RGBA32F),fa===a.HALF_FLOAT&&(Y=a.RGBA16F),fa===a.UNSIGNED_BYTE&&(Y=3001===ia&&!1===ra?a.SRGB8_ALPHA8:a.RGBA8),fa===a.UNSIGNED_SHORT_4_4_4_4&&(Y=a.RGBA4),fa===a.UNSIGNED_SHORT_5_5_5_1&&(Y=a.RGB5_A1));Y!==a.R16F&&Y!==a.R32F&&Y!==a.RG16F&&Y!==a.RG32F&&Y!==a.RGBA16F&&Y!==a.RGBA32F||b.get("EXT_color_buffer_float");return Y}function N(Y,V,fa){return!0===G(Y,fa)||Y.isFramebufferTexture&&1003!==Y.minFilter&&1006!==Y.minFilter?Math.log2(Math.max(V.width,
V.height))+1:void 0!==Y.mipmaps&&0<Y.mipmaps.length?Y.mipmaps.length:Y.isCompressedTexture&&Array.isArray(Y.image)?V.mipmaps.length:1}function P(Y){return 1003===Y||1004===Y||1005===Y?a.NEAREST:a.LINEAR}function T(Y){Y=Y.target;Y.removeEventListener("dispose",T);var V=l.get(Y);if(void 0!==V.__webglInit){var fa=Y.source,ia=Sa.get(fa);ia&&(V=ia[V.__cacheKey],V.usedTimes--,0===V.usedTimes&&L(Y),0===Object.keys(ia).length&&Sa.delete(fa));l.remove(Y)}Y.isVideoTexture&&ub.delete(Y)}function S(Y){Y=Y.target;
Y.removeEventListener("dispose",S);const V=Y.texture;var fa=l.get(Y),ia=l.get(V);void 0!==ia.__webglTexture&&(a.deleteTexture(ia.__webglTexture),A.memory.textures--);Y.depthTexture&&Y.depthTexture.dispose();if(Y.isWebGLCubeRenderTarget)for(ia=0;6>ia;ia++)a.deleteFramebuffer(fa.__webglFramebuffer[ia]),fa.__webglDepthbuffer&&a.deleteRenderbuffer(fa.__webglDepthbuffer[ia]);else{a.deleteFramebuffer(fa.__webglFramebuffer);fa.__webglDepthbuffer&&a.deleteRenderbuffer(fa.__webglDepthbuffer);fa.__webglMultisampledFramebuffer&&
a.deleteFramebuffer(fa.__webglMultisampledFramebuffer);if(fa.__webglColorRenderbuffer)for(ia=0;ia<fa.__webglColorRenderbuffer.length;ia++)fa.__webglColorRenderbuffer[ia]&&a.deleteRenderbuffer(fa.__webglColorRenderbuffer[ia]);fa.__webglDepthRenderbuffer&&a.deleteRenderbuffer(fa.__webglDepthRenderbuffer)}if(Y.isWebGLMultipleRenderTargets)for(let ra=0,Za=V.length;ra<Za;ra++)fa=l.get(V[ra]),fa.__webglTexture&&(a.deleteTexture(fa.__webglTexture),A.memory.textures--),l.remove(V[ra]);l.remove(V);l.remove(Y)}
function L(Y){const V=l.get(Y);a.deleteTexture(V.__webglTexture);delete Sa.get(Y.source)[V.__cacheKey];A.memory.textures--}function U(Y,V){const fa=l.get(Y);if(Y.isVideoTexture){var ia=A.render.frame;ub.get(Y)!==ia&&(ub.set(Y,ia),Y.update())}if(!1===Y.isRenderTargetTexture&&0<Y.version&&fa.__version!==Y.version)if(ia=Y.image,null===ia)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(!1===ia.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");
else{na(fa,Y,V);return}d.bindTexture(a.TEXTURE_2D,fa.__webglTexture,a.TEXTURE0+V)}function ma(Y,V,fa){fa?(a.texParameteri(Y,a.TEXTURE_WRAP_S,rb[V.wrapS]),a.texParameteri(Y,a.TEXTURE_WRAP_T,rb[V.wrapT]),Y!==a.TEXTURE_3D&&Y!==a.TEXTURE_2D_ARRAY||a.texParameteri(Y,a.TEXTURE_WRAP_R,rb[V.wrapR]),a.texParameteri(Y,a.TEXTURE_MAG_FILTER,nb[V.magFilter]),a.texParameteri(Y,a.TEXTURE_MIN_FILTER,nb[V.minFilter])):(a.texParameteri(Y,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(Y,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),
Y!==a.TEXTURE_3D&&Y!==a.TEXTURE_2D_ARRAY||a.texParameteri(Y,a.TEXTURE_WRAP_R,a.CLAMP_TO_EDGE),1001===V.wrapS&&1001===V.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),a.texParameteri(Y,a.TEXTURE_MAG_FILTER,P(V.magFilter)),a.texParameteri(Y,a.TEXTURE_MIN_FILTER,P(V.minFilter)),1003!==V.minFilter&&1006!==V.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));
!0===b.has("EXT_texture_filter_anisotropic")&&(fa=b.get("EXT_texture_filter_anisotropic"),1003===V.magFilter||1005!==V.minFilter&&1008!==V.minFilter||1015===V.type&&!1===b.has("OES_texture_float_linear")||!1===xa&&1016===V.type&&!1===b.has("OES_texture_half_float_linear")||!(1<V.anisotropy||l.get(V).__currentAnisotropy)||(a.texParameterf(Y,fa.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(V.anisotropy,q.getMaxAnisotropy())),l.get(V).__currentAnisotropy=V.anisotropy))}function ba(Y,V){let fa=!1;void 0===Y.__webglInit&&
(Y.__webglInit=!0,V.addEventListener("dispose",T));var ia=V.source;let ra=Sa.get(ia);void 0===ra&&(ra={},Sa.set(ia,ra));ia=[];ia.push(V.wrapS);ia.push(V.wrapT);ia.push(V.wrapR||0);ia.push(V.magFilter);ia.push(V.minFilter);ia.push(V.anisotropy);ia.push(V.internalFormat);ia.push(V.format);ia.push(V.type);ia.push(V.generateMipmaps);ia.push(V.premultiplyAlpha);ia.push(V.flipY);ia.push(V.unpackAlignment);ia.push(V.encoding);ia=ia.join();if(ia!==Y.__cacheKey){void 0===ra[ia]&&(ra[ia]={texture:a.createTexture(),
usedTimes:0},A.memory.textures++,fa=!0);ra[ia].usedTimes++;const Za=ra[Y.__cacheKey];void 0!==Za&&(ra[Y.__cacheKey].usedTimes--,0===Za.usedTimes&&L(V));Y.__cacheKey=ia;Y.__webglTexture=ra[ia].texture}return fa}function na(Y,V,fa){let ia=a.TEXTURE_2D;if(V.isDataArrayTexture||V.isCompressedArrayTexture)ia=a.TEXTURE_2D_ARRAY;V.isData3DTexture&&(ia=a.TEXTURE_3D);var ra=ba(Y,V);const Za=V.source;d.bindTexture(ia,Y.__webglTexture,a.TEXTURE0+fa);const ha=l.get(Za);if(Za.version!==ha.__version||!0===ra){d.activeTexture(a.TEXTURE0+
fa);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,V.flipY);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha);a.pixelStorei(a.UNPACK_ALIGNMENT,V.unpackAlignment);a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,a.NONE);fa=xa?!1:1001!==V.wrapS||1001!==V.wrapT||1003!==V.minFilter&&1006!==V.minFilter;fa=fa&&!1===F(V.image);var Ba=D(V.image,fa,!1,Ra);Ba=ya(V,Ba);fa=F(Ba)||xa;const Ua=y.convert(V.format,V.encoding);let eb=y.convert(V.type),kb=M(V.internalFormat,Ua,eb,V.encoding,V.isVideoTexture);
ma(ia,V,fa);var Ia=V.mipmaps,Ja=xa&&!0!==V.isVideoTexture;const Nb=void 0===ha.__version||!0===ra;ra=N(V,Ba,fa);if(V.isDepthTexture)kb=a.DEPTH_COMPONENT,xa?kb=1015===V.type?a.DEPTH_COMPONENT32F:1014===V.type?a.DEPTH_COMPONENT24:1020===V.type?a.DEPTH24_STENCIL8:a.DEPTH_COMPONENT16:1015===V.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===V.format&&kb===a.DEPTH_COMPONENT&&1012!==V.type&&1014!==V.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),
V.type=1014,eb=y.convert(V.type)),1027===V.format&&kb===a.DEPTH_COMPONENT&&(kb=a.DEPTH_STENCIL,1020!==V.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),V.type=1020,eb=y.convert(V.type))),Nb&&(Ja?d.texStorage2D(a.TEXTURE_2D,1,kb,Ba.width,Ba.height):d.texImage2D(a.TEXTURE_2D,0,kb,Ba.width,Ba.height,0,Ua,eb,null));else if(V.isDataTexture)if(0<Ia.length&&fa){Ja&&Nb&&d.texStorage2D(a.TEXTURE_2D,ra,kb,Ia[0].width,Ia[0].height);for(let ua=0,Ab=Ia.length;ua<
Ab;ua++)ra=Ia[ua],Ja?d.texSubImage2D(a.TEXTURE_2D,ua,0,0,ra.width,ra.height,Ua,eb,ra.data):d.texImage2D(a.TEXTURE_2D,ua,kb,ra.width,ra.height,0,Ua,eb,ra.data);V.generateMipmaps=!1}else Ja?(Nb&&d.texStorage2D(a.TEXTURE_2D,ra,kb,Ba.width,Ba.height),d.texSubImage2D(a.TEXTURE_2D,0,0,0,Ba.width,Ba.height,Ua,eb,Ba.data)):d.texImage2D(a.TEXTURE_2D,0,kb,Ba.width,Ba.height,0,Ua,eb,Ba.data);else if(V.isCompressedTexture)if(V.isCompressedArrayTexture){Ja&&Nb&&d.texStorage3D(a.TEXTURE_2D_ARRAY,ra,kb,Ia[0].width,
Ia[0].height,Ba.depth);for(let ua=0,Ab=Ia.length;ua<Ab;ua++)ra=Ia[ua],1023!==V.format?null!==Ua?Ja?d.compressedTexSubImage3D(a.TEXTURE_2D_ARRAY,ua,0,0,0,ra.width,ra.height,Ba.depth,Ua,ra.data,0,0):d.compressedTexImage3D(a.TEXTURE_2D_ARRAY,ua,kb,ra.width,ra.height,Ba.depth,0,ra.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ja?d.texSubImage3D(a.TEXTURE_2D_ARRAY,ua,0,0,0,ra.width,ra.height,Ba.depth,Ua,eb,ra.data):d.texImage3D(a.TEXTURE_2D_ARRAY,
ua,kb,ra.width,ra.height,Ba.depth,0,Ua,eb,ra.data)}else{Ja&&Nb&&d.texStorage2D(a.TEXTURE_2D,ra,kb,Ia[0].width,Ia[0].height);for(let ua=0,Ab=Ia.length;ua<Ab;ua++)ra=Ia[ua],1023!==V.format?null!==Ua?Ja?d.compressedTexSubImage2D(a.TEXTURE_2D,ua,0,0,ra.width,ra.height,Ua,ra.data):d.compressedTexImage2D(a.TEXTURE_2D,ua,kb,ra.width,ra.height,0,ra.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ja?d.texSubImage2D(a.TEXTURE_2D,ua,0,0,ra.width,
ra.height,Ua,eb,ra.data):d.texImage2D(a.TEXTURE_2D,ua,kb,ra.width,ra.height,0,Ua,eb,ra.data)}else if(V.isDataArrayTexture)Ja?(Nb&&d.texStorage3D(a.TEXTURE_2D_ARRAY,ra,kb,Ba.width,Ba.height,Ba.depth),d.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,0,Ba.width,Ba.height,Ba.depth,Ua,eb,Ba.data)):d.texImage3D(a.TEXTURE_2D_ARRAY,0,kb,Ba.width,Ba.height,Ba.depth,0,Ua,eb,Ba.data);else if(V.isData3DTexture)Ja?(Nb&&d.texStorage3D(a.TEXTURE_3D,ra,kb,Ba.width,Ba.height,Ba.depth),d.texSubImage3D(a.TEXTURE_3D,0,0,0,0,
Ba.width,Ba.height,Ba.depth,Ua,eb,Ba.data)):d.texImage3D(a.TEXTURE_3D,0,kb,Ba.width,Ba.height,Ba.depth,0,Ua,eb,Ba.data);else if(V.isFramebufferTexture){if(Nb)if(Ja)d.texStorage2D(a.TEXTURE_2D,ra,kb,Ba.width,Ba.height);else for(Ia=Ba.width,Ba=Ba.height,Ja=0;Ja<ra;Ja++)d.texImage2D(a.TEXTURE_2D,Ja,kb,Ia,Ba,0,Ua,eb,null),Ia>>=1,Ba>>=1}else if(0<Ia.length&&fa){Ja&&Nb&&d.texStorage2D(a.TEXTURE_2D,ra,kb,Ia[0].width,Ia[0].height);for(let ua=0,Ab=Ia.length;ua<Ab;ua++)ra=Ia[ua],Ja?d.texSubImage2D(a.TEXTURE_2D,
ua,0,0,Ua,eb,ra):d.texImage2D(a.TEXTURE_2D,ua,kb,Ua,eb,ra);V.generateMipmaps=!1}else Ja?(Nb&&d.texStorage2D(a.TEXTURE_2D,ra,kb,Ba.width,Ba.height),d.texSubImage2D(a.TEXTURE_2D,0,0,0,Ua,eb,Ba)):d.texImage2D(a.TEXTURE_2D,0,kb,Ua,eb,Ba);G(V,fa)&&a.generateMipmap(ia);ha.__version=Za.version;if(V.onUpdate)V.onUpdate(V)}Y.__version=V.version}function sa(Y,V,fa,ia,ra){const Za=y.convert(fa.format,fa.encoding),ha=y.convert(fa.type),Ba=M(fa.internalFormat,Za,ha,fa.encoding);l.get(V).__hasExternalTextures||
(ra===a.TEXTURE_3D||ra===a.TEXTURE_2D_ARRAY?d.texImage3D(ra,0,Ba,V.width,V.height,V.depth,0,Za,ha,null):d.texImage2D(ra,0,Ba,V.width,V.height,0,Za,ha,null));d.bindFramebuffer(a.FRAMEBUFFER,Y);wa(V)?cb.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,ia,ra,l.get(fa).__webglTexture,0,oa(V)):(ra===a.TEXTURE_2D||ra>=a.TEXTURE_CUBE_MAP_POSITIVE_X&&ra<=a.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&a.framebufferTexture2D(a.FRAMEBUFFER,ia,ra,l.get(fa).__webglTexture,0);d.bindFramebuffer(a.FRAMEBUFFER,null)}function ja(Y,
V,fa){a.bindRenderbuffer(a.RENDERBUFFER,Y);if(V.depthBuffer&&!V.stencilBuffer){var ia=a.DEPTH_COMPONENT16;fa||wa(V)?((fa=V.depthTexture)&&fa.isDepthTexture&&(1015===fa.type?ia=a.DEPTH_COMPONENT32F:1014===fa.type&&(ia=a.DEPTH_COMPONENT24)),fa=oa(V),wa(V)?cb.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,fa,ia,V.width,V.height):a.renderbufferStorageMultisample(a.RENDERBUFFER,fa,ia,V.width,V.height)):a.renderbufferStorage(a.RENDERBUFFER,ia,V.width,V.height);a.framebufferRenderbuffer(a.FRAMEBUFFER,
a.DEPTH_ATTACHMENT,a.RENDERBUFFER,Y)}else if(V.depthBuffer&&V.stencilBuffer)ia=oa(V),fa&&!1===wa(V)?a.renderbufferStorageMultisample(a.RENDERBUFFER,ia,a.DEPTH24_STENCIL8,V.width,V.height):wa(V)?cb.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,ia,a.DEPTH24_STENCIL8,V.width,V.height):a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,V.width,V.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,Y);else for(Y=!0===V.isWebGLMultipleRenderTargets?V.texture:[V.texture],
ia=0;ia<Y.length;ia++){var ra=Y[ia],Za=y.convert(ra.format,ra.encoding);const ha=y.convert(ra.type);ra=M(ra.internalFormat,Za,ha,ra.encoding);Za=oa(V);fa&&!1===wa(V)?a.renderbufferStorageMultisample(a.RENDERBUFFER,Za,ra,V.width,V.height):wa(V)?cb.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,Za,ra,V.width,V.height):a.renderbufferStorage(a.RENDERBUFFER,ra,V.width,V.height)}a.bindRenderbuffer(a.RENDERBUFFER,null)}function Ga(Y){var V=l.get(Y),fa=!0===Y.isWebGLCubeRenderTarget;if(Y.depthTexture&&
!V.__autoAllocateDepthBuffer){if(fa)throw Error("target.depthTexture not supported in Cube render targets");if(Y&&Y.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");d.bindFramebuffer(a.FRAMEBUFFER,V.__webglFramebuffer);if(!Y.depthTexture||!Y.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");l.get(Y.depthTexture).__webglTexture&&Y.depthTexture.image.width===Y.width&&Y.depthTexture.image.height===
Y.height||(Y.depthTexture.image.width=Y.width,Y.depthTexture.image.height=Y.height,Y.depthTexture.needsUpdate=!0);U(Y.depthTexture,0);V=l.get(Y.depthTexture).__webglTexture;fa=oa(Y);if(1026===Y.depthTexture.format)wa(Y)?cb.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,V,0,fa):a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,V,0);else if(1027===Y.depthTexture.format)wa(Y)?cb.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,
a.TEXTURE_2D,V,0,fa):a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,V,0);else throw Error("Unknown depthTexture format");}else if(fa)for(V.__webglDepthbuffer=[],fa=0;6>fa;fa++)d.bindFramebuffer(a.FRAMEBUFFER,V.__webglFramebuffer[fa]),V.__webglDepthbuffer[fa]=a.createRenderbuffer(),ja(V.__webglDepthbuffer[fa],Y,!1);else d.bindFramebuffer(a.FRAMEBUFFER,V.__webglFramebuffer),V.__webglDepthbuffer=a.createRenderbuffer(),ja(V.__webglDepthbuffer,Y,!1);d.bindFramebuffer(a.FRAMEBUFFER,
null)}function oa(Y){return Math.min(Na,Y.samples)}function wa(Y){const V=l.get(Y);return xa&&0<Y.samples&&!0===b.has("WEBGL_multisampled_render_to_texture")&&!1!==V.__useRenderToTexture}function ya(Y,V){const fa=Y.encoding,ia=Y.format,ra=Y.type;if(!0===Y.isCompressedTexture||!0===Y.isVideoTexture||1035===Y.format)return V;3E3!==fa&&(3001===fa?!1===xa?!0===b.has("EXT_sRGB")&&1023===ia?(Y.format=1035,Y.minFilter=1006,Y.generateMipmaps=!1):V=zh.sRGBToLinear(V):1023===ia&&1009===ra||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):
console.error("THREE.WebGLTextures: Unsupported texture encoding:",fa));return V}const xa=q.isWebGL2,Va=q.maxTextures,La=q.maxCubemapSize,Ra=q.maxTextureSize,Na=q.maxSamples,cb=b.has("WEBGL_multisampled_render_to_texture")?b.get("WEBGL_multisampled_render_to_texture"):null,ob="undefined"===typeof navigator?!1:/OculusBrowser/g.test(navigator.userAgent),ub=new WeakMap;let Bb;const Sa=new WeakMap;let $a=!1;try{$a="undefined"!==typeof OffscreenCanvas&&null!==(new OffscreenCanvas(1,1)).getContext("2d")}catch(Y){}let bb=
0;const rb={[1E3]:a.REPEAT,[1001]:a.CLAMP_TO_EDGE,[1002]:a.MIRRORED_REPEAT},nb={[1003]:a.NEAREST,[1004]:a.NEAREST_MIPMAP_NEAREST,[1005]:a.NEAREST_MIPMAP_LINEAR,[1006]:a.LINEAR,[1007]:a.LINEAR_MIPMAP_NEAREST,[1008]:a.LINEAR_MIPMAP_LINEAR};this.allocateTextureUnit=function(){const Y=bb;Y>=Va&&console.warn("THREE.WebGLTextures: Trying to use "+Y+" texture units while this GPU supports only "+Va);bb+=1;return Y};this.resetTextureUnits=function(){bb=0};this.setTexture2D=U;this.setTexture2DArray=function(Y,
V){const fa=l.get(Y);0<Y.version&&fa.__version!==Y.version?na(fa,Y,V):d.bindTexture(a.TEXTURE_2D_ARRAY,fa.__webglTexture,a.TEXTURE0+V)};this.setTexture3D=function(Y,V){const fa=l.get(Y);0<Y.version&&fa.__version!==Y.version?na(fa,Y,V):d.bindTexture(a.TEXTURE_3D,fa.__webglTexture,a.TEXTURE0+V)};this.setTextureCube=function(Y,V){const fa=l.get(Y);if(0<Y.version&&fa.__version!==Y.version){if(6===Y.image.length){var ia=ba(fa,Y),ra=Y.source;d.bindTexture(a.TEXTURE_CUBE_MAP,fa.__webglTexture,a.TEXTURE0+
V);var Za=l.get(ra);if(ra.version!==Za.__version||!0===ia){d.activeTexture(a.TEXTURE0+V);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,Y.flipY);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha);a.pixelStorei(a.UNPACK_ALIGNMENT,Y.unpackAlignment);a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,a.NONE);var ha=Y.isCompressedTexture||Y.image[0].isCompressedTexture,Ba=Y.image[0]&&Y.image[0].isDataTexture;V=[];for(var Ia=0;6>Ia;Ia++)V[Ia]=ha||Ba?Ba?Y.image[Ia].image:Y.image[Ia]:D(Y.image[Ia],
!1,!0,La),V[Ia]=ya(Y,V[Ia]);var Ja=V[0];Ia=F(Ja)||xa;const eb=y.convert(Y.format,Y.encoding),kb=y.convert(Y.type),Nb=M(Y.internalFormat,eb,kb,Y.encoding),ua=xa&&!0!==Y.isVideoTexture;ia=void 0===Za.__version||!0===ia;var Ua=N(Y,Ja,Ia);ma(a.TEXTURE_CUBE_MAP,Y,Ia);if(ha)for(ua&&ia&&d.texStorage2D(a.TEXTURE_CUBE_MAP,Ua,Nb,Ja.width,Ja.height),Ba=0;6>Ba;Ba++)for(ha=V[Ba].mipmaps,ia=0;ia<ha.length;ia++)Ja=ha[ia],1023!==Y.format?null!==eb?ua?d.compressedTexSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ba,ia,
0,0,Ja.width,Ja.height,eb,Ja.data):d.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ba,ia,Nb,Ja.width,Ja.height,0,Ja.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ua?d.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ba,ia,0,0,Ja.width,Ja.height,eb,kb,Ja.data):d.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ba,ia,Nb,Ja.width,Ja.height,0,eb,kb,Ja.data);else for(ha=Y.mipmaps,ua&&ia&&(0<ha.length&&Ua++,d.texStorage2D(a.TEXTURE_CUBE_MAP,
Ua,Nb,V[0].width,V[0].height)),ia=0;6>ia;ia++)if(Ba)for(ua?d.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ia,0,0,0,V[ia].width,V[ia].height,eb,kb,V[ia].data):d.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ia,0,Nb,V[ia].width,V[ia].height,0,eb,kb,V[ia].data),Ja=0;Ja<ha.length;Ja++)Ua=ha[Ja].image[ia].image,ua?d.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ia,Ja+1,0,0,Ua.width,Ua.height,eb,kb,Ua.data):d.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ia,Ja+1,Nb,Ua.width,Ua.height,0,eb,kb,Ua.data);else for(ua?d.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+
ia,0,0,0,eb,kb,V[ia]):d.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ia,0,Nb,eb,kb,V[ia]),Ja=0;Ja<ha.length;Ja++)Ua=ha[Ja],ua?d.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ia,Ja+1,0,0,eb,kb,Ua.image[ia]):d.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ia,Ja+1,Nb,eb,kb,Ua.image[ia]);G(Y,Ia)&&a.generateMipmap(a.TEXTURE_CUBE_MAP);Za.__version=ra.version;if(Y.onUpdate)Y.onUpdate(Y)}fa.__version=Y.version}}else d.bindTexture(a.TEXTURE_CUBE_MAP,fa.__webglTexture,a.TEXTURE0+V)};this.rebindTextures=function(Y,V,fa){const ia=
l.get(Y);void 0!==V&&sa(ia.__webglFramebuffer,Y,Y.texture,a.COLOR_ATTACHMENT0,a.TEXTURE_2D);void 0!==fa&&Ga(Y)};this.setupRenderTarget=function(Y){var V=Y.texture;const fa=l.get(Y);var ia=l.get(V);Y.addEventListener("dispose",S);!0!==Y.isWebGLMultipleRenderTargets&&(void 0===ia.__webglTexture&&(ia.__webglTexture=a.createTexture()),ia.__version=V.version,A.memory.textures++);var ra=!0===Y.isWebGLCubeRenderTarget;const Za=!0===Y.isWebGLMultipleRenderTargets,ha=F(Y)||xa;if(ra){fa.__webglFramebuffer=
[];for(var Ba=0;6>Ba;Ba++)fa.__webglFramebuffer[Ba]=a.createFramebuffer()}else{fa.__webglFramebuffer=a.createFramebuffer();if(Za)if(q.drawBuffers){Ba=Y.texture;for(let eb=0,kb=Ba.length;eb<kb;eb++){var Ia=l.get(Ba[eb]);void 0===Ia.__webglTexture&&(Ia.__webglTexture=a.createTexture(),A.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(xa&&0<Y.samples&&!1===wa(Y)){Ba=Za?V:[V];fa.__webglMultisampledFramebuffer=
a.createFramebuffer();fa.__webglColorRenderbuffer=[];d.bindFramebuffer(a.FRAMEBUFFER,fa.__webglMultisampledFramebuffer);for(Ia=0;Ia<Ba.length;Ia++){var Ja=Ba[Ia];fa.__webglColorRenderbuffer[Ia]=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,fa.__webglColorRenderbuffer[Ia]);var Ua=y.convert(Ja.format,Ja.encoding);const eb=y.convert(Ja.type);Ja=M(Ja.internalFormat,Ua,eb,Ja.encoding,!0===Y.isXRRenderTarget);Ua=oa(Y);a.renderbufferStorageMultisample(a.RENDERBUFFER,Ua,Ja,Y.width,Y.height);a.framebufferRenderbuffer(a.FRAMEBUFFER,
a.COLOR_ATTACHMENT0+Ia,a.RENDERBUFFER,fa.__webglColorRenderbuffer[Ia])}a.bindRenderbuffer(a.RENDERBUFFER,null);Y.depthBuffer&&(fa.__webglDepthRenderbuffer=a.createRenderbuffer(),ja(fa.__webglDepthRenderbuffer,Y,!0));d.bindFramebuffer(a.FRAMEBUFFER,null)}}if(ra){d.bindTexture(a.TEXTURE_CUBE_MAP,ia.__webglTexture);ma(a.TEXTURE_CUBE_MAP,V,ha);for(ia=0;6>ia;ia++)sa(fa.__webglFramebuffer[ia],Y,V,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+ia);G(V,ha)&&a.generateMipmap(a.TEXTURE_CUBE_MAP)}else if(Za){V=
Y.texture;for(let eb=0,kb=V.length;eb<kb;eb++)ia=V[eb],ra=l.get(ia),d.bindTexture(a.TEXTURE_2D,ra.__webglTexture),ma(a.TEXTURE_2D,ia,ha),sa(fa.__webglFramebuffer,Y,ia,a.COLOR_ATTACHMENT0+eb,a.TEXTURE_2D),G(ia,ha)&&a.generateMipmap(a.TEXTURE_2D)}else{ra=a.TEXTURE_2D;if(Y.isWebGL3DRenderTarget||Y.isWebGLArrayRenderTarget)xa?ra=Y.isWebGL3DRenderTarget?a.TEXTURE_3D:a.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.");d.bindTexture(ra,
ia.__webglTexture);ma(ra,V,ha);sa(fa.__webglFramebuffer,Y,V,a.COLOR_ATTACHMENT0,ra);G(V,ha)&&a.generateMipmap(ra)}d.unbindTexture();Y.depthBuffer&&Ga(Y)};this.updateRenderTargetMipmap=function(Y){const V=F(Y)||xa,fa=!0===Y.isWebGLMultipleRenderTargets?Y.texture:[Y.texture];for(let ra=0,Za=fa.length;ra<Za;ra++){var ia=fa[ra];if(G(ia,V)){const ha=Y.isWebGLCubeRenderTarget?a.TEXTURE_CUBE_MAP:a.TEXTURE_2D;ia=l.get(ia).__webglTexture;d.bindTexture(ha,ia);a.generateMipmap(ha);d.unbindTexture()}}};this.updateMultisampleRenderTarget=
function(Y){if(xa&&0<Y.samples&&!1===wa(Y)){const ra=Y.isWebGLMultipleRenderTargets?Y.texture:[Y.texture];var V=Y.width;const Za=Y.height;let ha=a.COLOR_BUFFER_BIT;const Ba=[],Ia=Y.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,Ja=l.get(Y),Ua=!0===Y.isWebGLMultipleRenderTargets;if(Ua)for(var fa=0;fa<ra.length;fa++)d.bindFramebuffer(a.FRAMEBUFFER,Ja.__webglMultisampledFramebuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+fa,a.RENDERBUFFER,null),d.bindFramebuffer(a.FRAMEBUFFER,
Ja.__webglFramebuffer),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0+fa,a.TEXTURE_2D,null,0);d.bindFramebuffer(a.READ_FRAMEBUFFER,Ja.__webglMultisampledFramebuffer);d.bindFramebuffer(a.DRAW_FRAMEBUFFER,Ja.__webglFramebuffer);for(fa=0;fa<ra.length;fa++){Ba.push(a.COLOR_ATTACHMENT0+fa);Y.depthBuffer&&Ba.push(Ia);var ia=void 0!==Ja.__ignoreDepthValues?Ja.__ignoreDepthValues:!1;!1===ia&&(Y.depthBuffer&&(ha|=a.DEPTH_BUFFER_BIT),Y.stencilBuffer&&(ha|=a.STENCIL_BUFFER_BIT));Ua&&a.framebufferRenderbuffer(a.READ_FRAMEBUFFER,
a.COLOR_ATTACHMENT0,a.RENDERBUFFER,Ja.__webglColorRenderbuffer[fa]);!0===ia&&(a.invalidateFramebuffer(a.READ_FRAMEBUFFER,[Ia]),a.invalidateFramebuffer(a.DRAW_FRAMEBUFFER,[Ia]));Ua&&(ia=l.get(ra[fa]).__webglTexture,a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,ia,0));a.blitFramebuffer(0,0,V,Za,0,0,V,Za,ha,a.NEAREST);ob&&a.invalidateFramebuffer(a.READ_FRAMEBUFFER,Ba)}d.bindFramebuffer(a.READ_FRAMEBUFFER,null);d.bindFramebuffer(a.DRAW_FRAMEBUFFER,null);if(Ua)for(Y=0;Y<ra.length;Y++)d.bindFramebuffer(a.FRAMEBUFFER,
Ja.__webglMultisampledFramebuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+Y,a.RENDERBUFFER,Ja.__webglColorRenderbuffer[Y]),V=l.get(ra[Y]).__webglTexture,d.bindFramebuffer(a.FRAMEBUFFER,Ja.__webglFramebuffer),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0+Y,a.TEXTURE_2D,V,0);d.bindFramebuffer(a.DRAW_FRAMEBUFFER,Ja.__webglMultisampledFramebuffer)}};this.setupDepthRenderbuffer=Ga;this.setupFrameBufferTexture=sa;this.useMultisampledRTT=wa}function pg(a,b,d){const l=
d.isWebGL2;return{convert:function(q,y=null){let A;if(1009===q)return a.UNSIGNED_BYTE;if(1017===q)return a.UNSIGNED_SHORT_4_4_4_4;if(1018===q)return a.UNSIGNED_SHORT_5_5_5_1;if(1010===q)return a.BYTE;if(1011===q)return a.SHORT;if(1012===q)return a.UNSIGNED_SHORT;if(1013===q)return a.INT;if(1014===q)return a.UNSIGNED_INT;if(1015===q)return a.FLOAT;if(1016===q){if(l)return a.HALF_FLOAT;A=b.get("OES_texture_half_float");return null!==A?A.HALF_FLOAT_OES:null}if(1021===q)return a.ALPHA;if(1023===q)return a.RGBA;
if(1024===q)return a.LUMINANCE;if(1025===q)return a.LUMINANCE_ALPHA;if(1026===q)return a.DEPTH_COMPONENT;if(1027===q)return a.DEPTH_STENCIL;if(1035===q)return A=b.get("EXT_sRGB"),null!==A?A.SRGB_ALPHA_EXT:null;if(1028===q)return a.RED;if(1029===q)return a.RED_INTEGER;if(1030===q)return a.RG;if(1031===q)return a.RG_INTEGER;if(1033===q)return a.RGBA_INTEGER;if(33776===q||33777===q||33778===q||33779===q)if(3001===y)if(A=b.get("WEBGL_compressed_texture_s3tc_srgb"),null!==A){if(33776===q)return A.COMPRESSED_SRGB_S3TC_DXT1_EXT;
if(33777===q)return A.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===q)return A.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===q)return A.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(A=b.get("WEBGL_compressed_texture_s3tc"),null!==A){if(33776===q)return A.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===q)return A.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===q)return A.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===q)return A.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(35840===q||35841===q||35842===
q||35843===q)if(A=b.get("WEBGL_compressed_texture_pvrtc"),null!==A){if(35840===q)return A.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===q)return A.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===q)return A.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===q)return A.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(36196===q)return A=b.get("WEBGL_compressed_texture_etc1"),null!==A?A.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===q||37496===q)if(A=b.get("WEBGL_compressed_texture_etc"),null!==A){if(37492===q)return 3001===
y?A.COMPRESSED_SRGB8_ETC2:A.COMPRESSED_RGB8_ETC2;if(37496===q)return 3001===y?A.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:A.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(37808===q||37809===q||37810===q||37811===q||37812===q||37813===q||37814===q||37815===q||37816===q||37817===q||37818===q||37819===q||37820===q||37821===q)if(A=b.get("WEBGL_compressed_texture_astc"),null!==A){if(37808===q)return 3001===y?A.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:A.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===q)return 3001===y?A.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:
A.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===q)return 3001===y?A.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:A.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===q)return 3001===y?A.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:A.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===q)return 3001===y?A.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:A.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===q)return 3001===y?A.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:A.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===q)return 3001===y?A.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:A.COMPRESSED_RGBA_ASTC_8x6_KHR;
if(37815===q)return 3001===y?A.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:A.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===q)return 3001===y?A.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:A.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===q)return 3001===y?A.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:A.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===q)return 3001===y?A.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:A.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===q)return 3001===y?A.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:A.COMPRESSED_RGBA_ASTC_10x10_KHR;
if(37820===q)return 3001===y?A.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:A.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===q)return 3001===y?A.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:A.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(36492===q)if(A=b.get("EXT_texture_compression_bptc"),null!==A){if(36492===q)return 3001===y?A.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:A.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(36283===q||36284===q||36285===q||36286===q)if(A=b.get("EXT_texture_compression_rgtc"),null!==
A){if(36492===q)return A.COMPRESSED_RED_RGTC1_EXT;if(36284===q)return A.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===q)return A.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===q)return A.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;if(1020===q){if(l)return a.UNSIGNED_INT_24_8;A=b.get("WEBGL_depth_texture");return null!==A?A.UNSIGNED_INT_24_8_WEBGL:null}return void 0!==a[q]?a[q]:null}}}function Kh(a,b){function d(l,q){l.opacity.value=q.opacity;q.color&&l.diffuse.value.copy(q.color);q.emissive&&l.emissive.value.copy(q.emissive).multiplyScalar(q.emissiveIntensity);
q.map&&(l.map.value=q.map);q.alphaMap&&(l.alphaMap.value=q.alphaMap);q.bumpMap&&(l.bumpMap.value=q.bumpMap,l.bumpScale.value=q.bumpScale,1===q.side&&(l.bumpScale.value*=-1));q.displacementMap&&(l.displacementMap.value=q.displacementMap,l.displacementScale.value=q.displacementScale,l.displacementBias.value=q.displacementBias);q.emissiveMap&&(l.emissiveMap.value=q.emissiveMap);q.normalMap&&(l.normalMap.value=q.normalMap,l.normalScale.value.copy(q.normalScale),1===q.side&&l.normalScale.value.negate());
q.specularMap&&(l.specularMap.value=q.specularMap);0<q.alphaTest&&(l.alphaTest.value=q.alphaTest);const y=b.get(q).envMap;y&&(l.envMap.value=y,l.flipEnvMap.value=y.isCubeTexture&&!1===y.isRenderTargetTexture?-1:1,l.reflectivity.value=q.reflectivity,l.ior.value=q.ior,l.refractionRatio.value=q.refractionRatio);q.lightMap&&(l.lightMap.value=q.lightMap,l.lightMapIntensity.value=q.lightMapIntensity*(!0===a.useLegacyLights?Math.PI:1));q.aoMap&&(l.aoMap.value=q.aoMap,l.aoMapIntensity.value=q.aoMapIntensity);
let A;q.map?A=q.map:q.specularMap?A=q.specularMap:q.displacementMap?A=q.displacementMap:q.normalMap?A=q.normalMap:q.bumpMap?A=q.bumpMap:q.roughnessMap?A=q.roughnessMap:q.metalnessMap?A=q.metalnessMap:q.alphaMap?A=q.alphaMap:q.emissiveMap?A=q.emissiveMap:q.clearcoatMap?A=q.clearcoatMap:q.clearcoatNormalMap?A=q.clearcoatNormalMap:q.clearcoatRoughnessMap?A=q.clearcoatRoughnessMap:q.iridescenceMap?A=q.iridescenceMap:q.iridescenceThicknessMap?A=q.iridescenceThicknessMap:q.specularIntensityMap?A=q.specularIntensityMap:
q.specularColorMap?A=q.specularColorMap:q.transmissionMap?A=q.transmissionMap:q.thicknessMap?A=q.thicknessMap:q.sheenColorMap?A=q.sheenColorMap:q.sheenRoughnessMap&&(A=q.sheenRoughnessMap);void 0!==A&&(A.isWebGLRenderTarget&&(A=A.texture),!0===A.matrixAutoUpdate&&A.updateMatrix(),l.uvTransform.value.copy(A.matrix));let D;q.aoMap?D=q.aoMap:q.lightMap&&(D=q.lightMap);void 0!==D&&(D.isWebGLRenderTarget&&(D=D.texture),!0===D.matrixAutoUpdate&&D.updateMatrix(),l.uv2Transform.value.copy(D.matrix))}return{refreshFogUniforms:function(l,
q){q.color.getRGB(l.fogColor.value,Q(a));q.isFog?(l.fogNear.value=q.near,l.fogFar.value=q.far):q.isFogExp2&&(l.fogDensity.value=q.density)},refreshMaterialUniforms:function(l,q,y,A,D){if(q.isMeshBasicMaterial)d(l,q);else if(q.isMeshLambertMaterial)d(l,q);else if(q.isMeshToonMaterial)d(l,q),q.gradientMap&&(l.gradientMap.value=q.gradientMap);else if(q.isMeshPhongMaterial)d(l,q),l.specular.value.copy(q.specular),l.shininess.value=Math.max(q.shininess,1E-4);else if(q.isMeshStandardMaterial)d(l,q),l.roughness.value=
q.roughness,l.metalness.value=q.metalness,q.roughnessMap&&(l.roughnessMap.value=q.roughnessMap),q.metalnessMap&&(l.metalnessMap.value=q.metalnessMap),b.get(q).envMap&&(l.envMapIntensity.value=q.envMapIntensity),q.isMeshPhysicalMaterial&&(l.ior.value=q.ior,0<q.sheen&&(l.sheenColor.value.copy(q.sheenColor).multiplyScalar(q.sheen),l.sheenRoughness.value=q.sheenRoughness,q.sheenColorMap&&(l.sheenColorMap.value=q.sheenColorMap),q.sheenRoughnessMap&&(l.sheenRoughnessMap.value=q.sheenRoughnessMap)),0<q.clearcoat&&
(l.clearcoat.value=q.clearcoat,l.clearcoatRoughness.value=q.clearcoatRoughness,q.clearcoatMap&&(l.clearcoatMap.value=q.clearcoatMap),q.clearcoatRoughnessMap&&(l.clearcoatRoughnessMap.value=q.clearcoatRoughnessMap),q.clearcoatNormalMap&&(l.clearcoatNormalScale.value.copy(q.clearcoatNormalScale),l.clearcoatNormalMap.value=q.clearcoatNormalMap,1===q.side&&l.clearcoatNormalScale.value.negate())),0<q.iridescence&&(l.iridescence.value=q.iridescence,l.iridescenceIOR.value=q.iridescenceIOR,l.iridescenceThicknessMinimum.value=
q.iridescenceThicknessRange[0],l.iridescenceThicknessMaximum.value=q.iridescenceThicknessRange[1],q.iridescenceMap&&(l.iridescenceMap.value=q.iridescenceMap),q.iridescenceThicknessMap&&(l.iridescenceThicknessMap.value=q.iridescenceThicknessMap)),0<q.transmission&&(l.transmission.value=q.transmission,l.transmissionSamplerMap.value=D.texture,l.transmissionSamplerSize.value.set(D.width,D.height),q.transmissionMap&&(l.transmissionMap.value=q.transmissionMap),l.thickness.value=q.thickness,q.thicknessMap&&
(l.thicknessMap.value=q.thicknessMap),l.attenuationDistance.value=q.attenuationDistance,l.attenuationColor.value.copy(q.attenuationColor)),l.specularIntensity.value=q.specularIntensity,l.specularColor.value.copy(q.specularColor),q.specularIntensityMap&&(l.specularIntensityMap.value=q.specularIntensityMap),q.specularColorMap&&(l.specularColorMap.value=q.specularColorMap));else if(q.isMeshMatcapMaterial)d(l,q),q.matcap&&(l.matcap.value=q.matcap);else if(q.isMeshDepthMaterial)d(l,q);else if(q.isMeshDistanceMaterial)d(l,
q),l.referencePosition.value.copy(q.referencePosition),l.nearDistance.value=q.nearDistance,l.farDistance.value=q.farDistance;else if(q.isMeshNormalMaterial)d(l,q);else if(q.isLineBasicMaterial)l.diffuse.value.copy(q.color),l.opacity.value=q.opacity,q.isLineDashedMaterial&&(l.dashSize.value=q.dashSize,l.totalSize.value=q.dashSize+q.gapSize,l.scale.value=q.scale);else if(q.isPointsMaterial){l.diffuse.value.copy(q.color);l.opacity.value=q.opacity;l.size.value=q.size*y;l.scale.value=.5*A;q.map&&(l.map.value=
q.map);q.alphaMap&&(l.alphaMap.value=q.alphaMap);0<q.alphaTest&&(l.alphaTest.value=q.alphaTest);let F;q.map?F=q.map:q.alphaMap&&(F=q.alphaMap);void 0!==F&&(!0===F.matrixAutoUpdate&&F.updateMatrix(),l.uvTransform.value.copy(F.matrix))}else if(q.isSpriteMaterial){l.diffuse.value.copy(q.color);l.opacity.value=q.opacity;l.rotation.value=q.rotation;q.map&&(l.map.value=q.map);q.alphaMap&&(l.alphaMap.value=q.alphaMap);0<q.alphaTest&&(l.alphaTest.value=q.alphaTest);let F;q.map?F=q.map:q.alphaMap&&(F=q.alphaMap);
void 0!==F&&(!0===F.matrixAutoUpdate&&F.updateMatrix(),l.uvTransform.value.copy(F.matrix))}else q.isShadowMaterial?(l.color.value.copy(q.color),l.opacity.value=q.opacity):q.isShaderMaterial&&(q.uniformsNeedUpdate=!1)}}}function Lh(a,b,d,l){function q(N){const P=N.uniforms;let T=0;for(let ba=0,na=P.length;ba<na;ba++){const sa=P[ba];var S=0,L=0;var U=Array.isArray(sa.value)?sa.value:[sa.value];for(let ja=0,Ga=U.length;ja<Ga;ja++){var ma=y(U[ja]);S+=ma.boundary;L+=ma.storage}sa.__data=new Float32Array(L/
Float32Array.BYTES_PER_ELEMENT);sa.__offset=T;0<ba&&(U=T%16,ma=16-U,0!==U&&0>ma-S&&(T+=16-U,sa.__offset=T));T+=L}U=T%16;0<U&&(T+=16-U);N.__size=T;N.__cache={};return this}function y(N){const P={boundary:0,storage:0};"number"===typeof N?(P.boundary=4,P.storage=4):N.isVector2?(P.boundary=8,P.storage=8):N.isVector3||N.isColor?(P.boundary=16,P.storage=12):N.isVector4?(P.boundary=16,P.storage=16):N.isMatrix3?(P.boundary=48,P.storage=48):N.isMatrix4?(P.boundary=64,P.storage=64):N.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):
console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",N);return P}function A(N){N=N.target;N.removeEventListener("dispose",A);const P=G.indexOf(N.__bindingPointIndex);G.splice(P,1);a.deleteBuffer(D[N.id]);delete D[N.id];delete F[N.id]}let D={},F={},G=[];const M=d.isWebGL2?a.getParameter(a.MAX_UNIFORM_BUFFER_BINDINGS):0;return{bind:function(N,P){l.uniformBlockBinding(N,P.program)},update:function(N,P){var T=D[N.id];if(void 0===T){q(N);a:{for(T=0;T<M;T++)if(-1===G.indexOf(T)){G.push(T);
break a}console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached.");T=0}N.__bindingPointIndex=T;var S=a.createBuffer(),L=N.__size,U=N.usage;a.bindBuffer(a.UNIFORM_BUFFER,S);a.bufferData(a.UNIFORM_BUFFER,L,U);a.bindBuffer(a.UNIFORM_BUFFER,null);a.bindBufferBase(a.UNIFORM_BUFFER,T,S);T=S;D[N.id]=T;N.addEventListener("dispose",A)}l.updateUBOMapping(N,P.program);P=b.render.frame;if(F[N.id]!==P){T=N.uniforms;S=N.__cache;a.bindBuffer(a.UNIFORM_BUFFER,D[N.id]);
for(let ja=0,Ga=T.length;ja<Ga;ja++){L=T[ja];a:{U=ja;var ma=S,ba=L.value;if(void 0===ma[U]){if("number"===typeof ba)ma[U]=ba;else{ba=Array.isArray(ba)?ba:[ba];var na=[];for(var sa=0;sa<ba.length;sa++)na.push(ba[sa].clone());ma[U]=na}U=!0}else{if("number"===typeof ba){if(ma[U]!==ba){ma[U]=ba;U=!0;break a}}else for(U=Array.isArray(ma[U])?ma[U]:[ma[U]],ma=Array.isArray(ba)?ba:[ba],ba=0;ba<U.length;ba++)if(na=U[ba],!1===na.equals(ma[ba])){na.copy(ma[ba]);U=!0;break a}U=!1}}if(!0===U){U=L.__offset;ma=
Array.isArray(L.value)?L.value:[L.value];ba=0;for(na=0;na<ma.length;na++){sa=ma[na];const oa=y(sa);"number"===typeof sa?(L.__data[0]=sa,a.bufferSubData(a.UNIFORM_BUFFER,U+ba,L.__data)):sa.isMatrix3?(L.__data[0]=sa.elements[0],L.__data[1]=sa.elements[1],L.__data[2]=sa.elements[2],L.__data[3]=sa.elements[0],L.__data[4]=sa.elements[3],L.__data[5]=sa.elements[4],L.__data[6]=sa.elements[5],L.__data[7]=sa.elements[0],L.__data[8]=sa.elements[6],L.__data[9]=sa.elements[7],L.__data[10]=sa.elements[8],L.__data[11]=
sa.elements[0]):(sa.toArray(L.__data,ba),ba+=oa.storage/Float32Array.BYTES_PER_ELEMENT)}a.bufferSubData(a.UNIFORM_BUFFER,U,L.__data)}}a.bindBuffer(a.UNIFORM_BUFFER,null);F[N.id]=P}},dispose:function(){for(const N in D)a.deleteBuffer(D[N]);G=[];D={};F={}}}}function Mh(){const a=w("canvas");a.style.display="block";return a}function Cf(a={}){function b(Z,Ea){for(let Ka=0;Ka<Z.length;Ka++){const Da=L.getContext(Z[Ka],Ea);if(null!==Da)return Da}return null}function d(){Ab=new Cb(ua);Ub=new la(ua,Ab,a);
Ab.init(Ub);ld=new pg(ua,Ab,Ub);Lb=new Ih(ua,Ab,Ub);Pc=new Rb(ua);lc=new vf;qc=new Jh(ua,Ab,Lb,lc,Ub,ld,Pc);Fe=new ta(Ra);Ge=new mb(Ra);Df=new R(ua,Ub);ee=new ca(ua,Ab,Df,Ub);Nh=new yb(ua,Df,Pc,ee);He=new Tb(ua,Nh,Df,Pc);cj=new Jb(ua,Ub,qc);md=new Aa(lc);ud=new uf(Ra,Fe,Ge,Ab,Ub,ee,md);Oh=new Kh(Ra,lc);qg=new xf;rg=new Ac(Ab,Ub);Pd=new X(Ra,Fe,Ge,Lb,He,wa,sa);bd=new Fh(Ra,He,Ub);sg=new Lh(ua,Pc,Ub,Lb);dj=new ka(ua,Ab,Pc,Ub);ej=new tb(ua,Ab,Pc,Ub);Pc.programs=ud.programs;Ra.capabilities=Ub;Ra.extensions=
Ab;Ra.properties=lc;Ra.renderLists=qg;Ra.shadowMap=bd;Ra.state=Lb;Ra.info=Pc}function l(Z){Z.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");Na=!0}function q(){console.log("THREE.WebGLRenderer: Context Restored.");Na=!1;const Z=Pc.autoReset,Ea=bd.enabled,Ka=bd.autoUpdate,Da=bd.needsUpdate,Ma=bd.type;d();Pc.autoReset=Z;bd.enabled=Ea;bd.autoUpdate=Ka;bd.needsUpdate=Da;bd.type=Ma}function y(Z){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Z.statusMessage)}
function A(Z){Z=Z.target;Z.removeEventListener("dispose",A);D(Z);lc.remove(Z)}function D(Z){const Ea=lc.get(Z).programs;void 0!==Ea&&(Ea.forEach(function(Ka){ud.releaseProgram(Ka)}),Z.isShaderMaterial&&ud.releaseShaderCache(Z))}function F(){fe.stop()}function G(){fe.start()}function M(Z,Ea,Ka,Da){if(!1!==Z.visible){if(Z.layers.test(Ea.layers))if(Z.isGroup)Ka=Z.renderOrder;else if(Z.isLOD)!0===Z.autoUpdate&&Z.update(Ea);else if(Z.isLight)xa.pushLight(Z),Z.castShadow&&xa.pushShadow(Z);else if(Z.isSprite){if(!Z.frustumCulled||
Ba.intersectsSprite(Z)){Da&&kb.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(eb);var Ma=He.update(Z),qb=Z.material;qb.visible&&ya.push(Z,Ma,qb,Ka,kb.z,null)}}else if(Z.isMesh||Z.isLine||Z.isPoints)if(Z.isSkinnedMesh&&Z.skeleton.frame!==Pc.render.frame&&(Z.skeleton.update(),Z.skeleton.frame=Pc.render.frame),!Z.frustumCulled||Ba.intersectsObject(Z))if(Da&&kb.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(eb),Ma=He.update(Z),qb=Z.material,Array.isArray(qb)){const vb=Ma.groups;for(let db=0,Vb=
vb.length;db<Vb;db++){const gc=vb[db],Qb=qb[gc.materialIndex];Qb&&Qb.visible&&ya.push(Z,Ma,Qb,Ka,kb.z,gc)}}else qb.visible&&ya.push(Z,Ma,qb,Ka,kb.z,null);Z=Z.children;for(let vb=0,db=Z.length;vb<db;vb++)M(Z[vb],Ea,Ka,Da)}}function N(Z,Ea,Ka,Da){const Ma=Z.opaque,qb=Z.transmissive;Z=Z.transparent;xa.setupLightsView(Ka);!0===Ia&&md.setGlobalState(Ra.clippingPlanes,Ka);if(0<qb.length){var vb=Ub.isWebGL2;null===Ua&&(Ua=new Yc(1024,1024,{generateMipmaps:!0,type:Ab.has("EXT_color_buffer_half_float")?1016:
1009,minFilter:1008,samples:vb&&!0===na?4:0}));vb=Ra.getRenderTarget();Ra.setRenderTarget(Ua);Ra.clear();const db=Ra.toneMapping;Ra.toneMapping=0;P(Ma,Ea,Ka);Ra.toneMapping=db;qc.updateMultisampleRenderTarget(Ua);qc.updateRenderTargetMipmap(Ua);Ra.setRenderTarget(vb)}Da&&Lb.viewport($a.copy(Da));0<Ma.length&&P(Ma,Ea,Ka);0<qb.length&&P(qb,Ea,Ka);0<Z.length&&P(Z,Ea,Ka);Lb.buffers.depth.setTest(!0);Lb.buffers.depth.setMask(!0);Lb.buffers.color.setMask(!0);Lb.setPolygonOffset(!1)}function P(Z,Ea,Ka){const Da=
!0===Ea.isScene?Ea.overrideMaterial:null;for(let Qb=0,Bc=Z.length;Qb<Bc;Qb++){var Ma=Z[Qb],qb=Ma.object,vb=Ma.geometry,db=null===Da?Ma.material:Da,Vb=Ma.group;if(qb.layers.test(Ka.layers)){Ma=Ea;var gc=Ka;qb.onBeforeRender(Ra,Ma,gc,vb,db,Vb);qb.modelViewMatrix.multiplyMatrices(gc.matrixWorldInverse,qb.matrixWorld);qb.normalMatrix.getNormalMatrix(qb.modelViewMatrix);db.onBeforeRender(Ra,Ma,gc,vb,qb,Vb);!0===db.transparent&&2===db.side&&!1===db.forceSinglePass?(db.side=1,db.needsUpdate=!0,Ra.renderBufferDirect(gc,
Ma,vb,db,qb,Vb),db.side=0,db.needsUpdate=!0,Ra.renderBufferDirect(gc,Ma,vb,db,qb,Vb),db.side=2):Ra.renderBufferDirect(gc,Ma,vb,db,qb,Vb);qb.onAfterRender(Ra,Ma,gc,vb,db,Vb)}}}function T(Z,Ea,Ka){!0!==Ea.isScene&&(Ea=Nb);const Da=lc.get(Z),Ma=xa.state.lights,qb=Ma.state.version,vb=ud.getParameters(Z,Ma.state,xa.state.shadowsArray,Ea,Ka),db=ud.getProgramCacheKey(vb);let Vb=Da.programs;Da.environment=Z.isMeshStandardMaterial?Ea.environment:null;Da.fog=Ea.fog;Da.envMap=(Z.isMeshStandardMaterial?Ge:Fe).get(Z.envMap||
Da.environment);void 0===Vb&&(Z.addEventListener("dispose",A),Vb=new Map,Da.programs=Vb);Ea=Vb.get(db);if(void 0!==Ea){if(Da.currentProgram===Ea&&Da.lightsStateVersion===qb)return S(Z,vb),Ea}else vb.uniforms=ud.getUniforms(Z),Z.onBuild(Ka,vb,Ra),Z.onBeforeCompile(vb,Ra),Ea=ud.acquireProgram(vb,db),Vb.set(db,Ea),Da.uniforms=vb.uniforms;Ka=Da.uniforms;if(!Z.isShaderMaterial&&!Z.isRawShaderMaterial||!0===Z.clipping)Ka.clippingPlanes=md.uniform;S(Z,vb);Da.needsLights=Z.isMeshLambertMaterial||Z.isMeshToonMaterial||
Z.isMeshPhongMaterial||Z.isMeshStandardMaterial||Z.isShadowMaterial||Z.isShaderMaterial&&!0===Z.lights;Da.lightsStateVersion=qb;Da.needsLights&&(Ka.ambientLightColor.value=Ma.state.ambient,Ka.lightProbe.value=Ma.state.probe,Ka.directionalLights.value=Ma.state.directional,Ka.directionalLightShadows.value=Ma.state.directionalShadow,Ka.spotLights.value=Ma.state.spot,Ka.spotLightShadows.value=Ma.state.spotShadow,Ka.rectAreaLights.value=Ma.state.rectArea,Ka.ltc_1.value=Ma.state.rectAreaLTC1,Ka.ltc_2.value=
Ma.state.rectAreaLTC2,Ka.pointLights.value=Ma.state.point,Ka.pointLightShadows.value=Ma.state.pointShadow,Ka.hemisphereLights.value=Ma.state.hemi,Ka.directionalShadowMap.value=Ma.state.directionalShadowMap,Ka.directionalShadowMatrix.value=Ma.state.directionalShadowMatrix,Ka.spotShadowMap.value=Ma.state.spotShadowMap,Ka.spotLightMatrix.value=Ma.state.spotLightMatrix,Ka.spotLightMap.value=Ma.state.spotLightMap,Ka.pointShadowMap.value=Ma.state.pointShadowMap,Ka.pointShadowMatrix.value=Ma.state.pointShadowMatrix);
Z=Ea.getUniforms();Z=mg.seqWithValue(Z.seq,Ka);Da.currentProgram=Ea;Da.uniformsList=Z;return Ea}function S(Z,Ea){Z=lc.get(Z);Z.outputEncoding=Ea.outputEncoding;Z.instancing=Ea.instancing;Z.skinning=Ea.skinning;Z.morphTargets=Ea.morphTargets;Z.morphNormals=Ea.morphNormals;Z.morphColors=Ea.morphColors;Z.morphTargetsCount=Ea.morphTargetsCount;Z.numClippingPlanes=Ea.numClippingPlanes;Z.numIntersection=Ea.numClipIntersection;Z.vertexAlphas=Ea.vertexAlphas;Z.vertexTangents=Ea.vertexTangents;Z.toneMapping=
Ea.toneMapping}this.isWebGLRenderer=!0;const L=void 0!==a.canvas?a.canvas:Mh();var U=void 0!==a.context?a.context:null,ma=void 0!==a.depth?a.depth:!0;const ba=void 0!==a.stencil?a.stencil:!0,na=void 0!==a.antialias?a.antialias:!1,sa=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,ja=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,Ga=void 0!==a.powerPreference?a.powerPreference:"default",oa=void 0!==a.failIfMajorPerformanceCaveat?a.failIfMajorPerformanceCaveat:!1;let wa;wa=null!==
U?U.getContextAttributes().alpha:void 0!==a.alpha?a.alpha:!1;let ya=null,xa=null;const Va=[],La=[];this.domElement=L;this.debug={checkShaderErrors:!0};this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.clippingPlanes=[];this.localClippingEnabled=!1;this.outputEncoding=3E3;this.useLegacyLights=!0;this.toneMapping=0;this.toneMappingExposure=1;const Ra=this;let Na=!1,cb=0,ob=0,ub=null,Bb=-1,Sa=null;const $a=new cc,bb=new cc;let rb=null,nb=L.width,Y=
L.height,V=1,fa=null,ia=null;const ra=new cc(0,0,nb,Y),Za=new cc(0,0,nb,Y);let ha=!1;const Ba=new og;let Ia=!1,Ja=!1,Ua=null;const eb=new Fb,kb=new aa,Nb={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ua=U;try{U={alpha:!0,depth:ma,stencil:ba,antialias:na,premultipliedAlpha:sa,preserveDrawingBuffer:ja,powerPreference:Ga,failIfMajorPerformanceCaveat:oa};"setAttribute"in L&&L.setAttribute("data-engine","three.js r150");L.addEventListener("webglcontextlost",l,!1);L.addEventListener("webglcontextrestored",
q,!1);L.addEventListener("webglcontextcreationerror",y,!1);if(null===ua&&(ma=["webgl2","webgl","experimental-webgl"],!0===Ra.isWebGL1Renderer&&ma.shift(),ua=b(ma,U),null===ua)){if(b(ma))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.");}void 0===ua.getShaderPrecisionFormat&&(ua.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Z){throw console.error("THREE.WebGLRenderer: "+Z.message),Z;}let Ab,
Ub,Lb,Pc,lc,qc,Fe,Ge,Df,Nh,He,ud,Oh,qg,rg,md,bd,Pd,cj,dj,ej,ld,ee,sg;d();const Qc=new Xk(Ra,ua);this.xr=Qc;this.getContext=function(){return ua};this.getContextAttributes=function(){return ua.getContextAttributes()};this.forceContextLoss=function(){const Z=Ab.get("WEBGL_lose_context");Z&&Z.loseContext()};this.forceContextRestore=function(){const Z=Ab.get("WEBGL_lose_context");Z&&Z.restoreContext()};this.getPixelRatio=function(){return V};this.setPixelRatio=function(Z){void 0!==Z&&(V=Z,this.setSize(nb,
Y,!1))};this.getSize=function(Z){return Z.set(nb,Y)};this.setSize=function(Z,Ea,Ka=!0){Qc.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(nb=Z,Y=Ea,L.width=Math.floor(Z*V),L.height=Math.floor(Ea*V),!0===Ka&&(L.style.width=Z+"px",L.style.height=Ea+"px"),this.setViewport(0,0,Z,Ea))};this.getDrawingBufferSize=function(Z){return Z.set(nb*V,Y*V).floor()};this.setDrawingBufferSize=function(Z,Ea,Ka){nb=Z;Y=Ea;V=Ka;L.width=Math.floor(Z*Ka);L.height=Math.floor(Ea*
Ka);this.setViewport(0,0,Z,Ea)};this.getCurrentViewport=function(Z){return Z.copy($a)};this.getViewport=function(Z){return Z.copy(ra)};this.setViewport=function(Z,Ea,Ka,Da){Z.isVector4?ra.set(Z.x,Z.y,Z.z,Z.w):ra.set(Z,Ea,Ka,Da);Lb.viewport($a.copy(ra).multiplyScalar(V).floor())};this.getScissor=function(Z){return Z.copy(Za)};this.setScissor=function(Z,Ea,Ka,Da){Z.isVector4?Za.set(Z.x,Z.y,Z.z,Z.w):Za.set(Z,Ea,Ka,Da);Lb.scissor(bb.copy(Za).multiplyScalar(V).floor())};this.getScissorTest=function(){return ha};
this.setScissorTest=function(Z){Lb.setScissorTest(ha=Z)};this.setOpaqueSort=function(Z){fa=Z};this.setTransparentSort=function(Z){ia=Z};this.getClearColor=function(Z){return Z.copy(Pd.getClearColor())};this.setClearColor=function(){Pd.setClearColor.apply(Pd,arguments)};this.getClearAlpha=function(){return Pd.getClearAlpha()};this.setClearAlpha=function(){Pd.setClearAlpha.apply(Pd,arguments)};this.clear=function(Z=!0,Ea=!0,Ka=!0){let Da=0;Z&&(Da|=ua.COLOR_BUFFER_BIT);Ea&&(Da|=ua.DEPTH_BUFFER_BIT);
Ka&&(Da|=ua.STENCIL_BUFFER_BIT);ua.clear(Da)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,!0,!1)};this.clearStencil=function(){this.clear(!1,!1,!0)};this.dispose=function(){L.removeEventListener("webglcontextlost",l,!1);L.removeEventListener("webglcontextrestored",q,!1);L.removeEventListener("webglcontextcreationerror",y,!1);qg.dispose();rg.dispose();lc.dispose();Fe.dispose();Ge.dispose();He.dispose();ee.dispose();sg.dispose();ud.dispose();Qc.dispose();
Qc.removeEventListener("sessionstart",F);Qc.removeEventListener("sessionend",G);Ua&&(Ua.dispose(),Ua=null);fe.stop()};this.renderBufferDirect=function(Z,Ea,Ka,Da,Ma,qb){null===Ea&&(Ea=Nb);var vb=Ma.isMesh&&0>Ma.matrixWorld.determinant(),db=Ea;!0!==db.isScene&&(db=Nb);qc.resetTextureUnits();Ea=db.fog;var Vb=Da.isMeshStandardMaterial?db.environment:null,gc=null===ub?Ra.outputEncoding:!0===ub.isXRRenderTarget?ub.texture.encoding:3E3;Vb=(Da.isMeshStandardMaterial?Ge:Fe).get(Da.envMap||Vb);var Qb=!0===
Da.vertexColors&&!!Ka.attributes.color&&4===Ka.attributes.color.itemSize,Bc=!!Da.normalMap&&!!Ka.attributes.tangent,ge=!!Ka.morphAttributes.position,vd=!!Ka.morphAttributes.normal;const Ph=!!Ka.morphAttributes.color,Qh=Da.toneMapped?Ra.toneMapping:0;var Gb=Ka.morphAttributes.position||Ka.morphAttributes.normal||Ka.morphAttributes.color;const Yk=void 0!==Gb?Gb.length:0;Gb=lc.get(Da);const Zk=xa.state.lights;!0!==Ia||!0!==Ja&&Z===Sa||md.setState(Da,Z,Z===Sa&&Da.id===Bb);let vc=!1;Da.version===Gb.__version?
Gb.needsLights&&Gb.lightsStateVersion!==Zk.state.version?vc=!0:Gb.outputEncoding!==gc?vc=!0:Ma.isInstancedMesh&&!1===Gb.instancing?vc=!0:Ma.isInstancedMesh||!0!==Gb.instancing?Ma.isSkinnedMesh&&!1===Gb.skinning?vc=!0:Ma.isSkinnedMesh||!0!==Gb.skinning?Gb.envMap!==Vb?vc=!0:!0===Da.fog&&Gb.fog!==Ea?vc=!0:void 0===Gb.numClippingPlanes||Gb.numClippingPlanes===md.numPlanes&&Gb.numIntersection===md.numIntersection?Gb.vertexAlphas!==Qb?vc=!0:Gb.vertexTangents!==Bc?vc=!0:Gb.morphTargets!==ge?vc=!0:Gb.morphNormals!==
vd?vc=!0:Gb.morphColors!==Ph?vc=!0:Gb.toneMapping!==Qh?vc=!0:!0===Ub.isWebGL2&&Gb.morphTargetsCount!==Yk&&(vc=!0):vc=!0:vc=!0:vc=!0:(vc=!0,Gb.__version=Da.version);gc=Gb.currentProgram;!0===vc&&(gc=T(Da,db,Ma));ge=Bc=vd=!1;db=gc.getUniforms();Qb=Gb.uniforms;Lb.useProgram(gc.program)&&(ge=Bc=vd=!0);Da.id!==Bb&&(Bb=Da.id,Bc=!0);if(vd||Sa!==Z){db.setValue(ua,"projectionMatrix",Z.projectionMatrix);Ub.logarithmicDepthBuffer&&db.setValue(ua,"logDepthBufFC",2/(Math.log(Z.far+1)/Math.LN2));Sa!==Z&&(Sa=Z,
ge=Bc=!0);if(Da.isShaderMaterial||Da.isMeshPhongMaterial||Da.isMeshToonMaterial||Da.isMeshStandardMaterial||Da.envMap)vd=db.map.cameraPosition,void 0!==vd&&vd.setValue(ua,kb.setFromMatrixPosition(Z.matrixWorld));(Da.isMeshPhongMaterial||Da.isMeshToonMaterial||Da.isMeshLambertMaterial||Da.isMeshBasicMaterial||Da.isMeshStandardMaterial||Da.isShaderMaterial)&&db.setValue(ua,"isOrthographic",!0===Z.isOrthographicCamera);(Da.isMeshPhongMaterial||Da.isMeshToonMaterial||Da.isMeshLambertMaterial||Da.isMeshBasicMaterial||
Da.isMeshStandardMaterial||Da.isShaderMaterial||Da.isShadowMaterial||Ma.isSkinnedMesh)&&db.setValue(ua,"viewMatrix",Z.matrixWorldInverse)}Ma.isSkinnedMesh&&(db.setOptional(ua,Ma,"bindMatrix"),db.setOptional(ua,Ma,"bindMatrixInverse"),Z=Ma.skeleton)&&(Ub.floatVertexTextures?(null===Z.boneTexture&&Z.computeBoneTexture(),db.setValue(ua,"boneTexture",Z.boneTexture,qc),db.setValue(ua,"boneTextureSize",Z.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."));
Z=Ka.morphAttributes;(void 0!==Z.position||void 0!==Z.normal||void 0!==Z.color&&!0===Ub.isWebGL2)&&cj.update(Ma,Ka,gc);if(Bc||Gb.receiveShadow!==Ma.receiveShadow)Gb.receiveShadow=Ma.receiveShadow,db.setValue(ua,"receiveShadow",Ma.receiveShadow);Da.isMeshGouraudMaterial&&null!==Da.envMap&&(Qb.envMap.value=Vb,Qb.flipEnvMap.value=Vb.isCubeTexture&&!1===Vb.isRenderTargetTexture?-1:1);Bc&&(db.setValue(ua,"toneMappingExposure",Ra.toneMappingExposure),Gb.needsLights&&(Z=ge,Qb.ambientLightColor.needsUpdate=
Z,Qb.lightProbe.needsUpdate=Z,Qb.directionalLights.needsUpdate=Z,Qb.directionalLightShadows.needsUpdate=Z,Qb.pointLights.needsUpdate=Z,Qb.pointLightShadows.needsUpdate=Z,Qb.spotLights.needsUpdate=Z,Qb.spotLightShadows.needsUpdate=Z,Qb.rectAreaLights.needsUpdate=Z,Qb.hemisphereLights.needsUpdate=Z),Ea&&!0===Da.fog&&Oh.refreshFogUniforms(Qb,Ea),Oh.refreshMaterialUniforms(Qb,Da,V,Y,Ua),mg.upload(ua,Gb.uniformsList,Qb,qc));Da.isShaderMaterial&&!0===Da.uniformsNeedUpdate&&(mg.upload(ua,Gb.uniformsList,
Qb,qc),Da.uniformsNeedUpdate=!1);Da.isSpriteMaterial&&db.setValue(ua,"center",Ma.center);db.setValue(ua,"modelViewMatrix",Ma.modelViewMatrix);db.setValue(ua,"normalMatrix",Ma.normalMatrix);db.setValue(ua,"modelMatrix",Ma.matrixWorld);if(Da.isShaderMaterial||Da.isRawShaderMaterial){Ea=Da.uniformsGroups;for(let Rh=0,$k=Ea.length;Rh<$k;Rh++)Ub.isWebGL2?(Z=Ea[Rh],sg.update(Z,gc),sg.bind(Z,gc)):console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}Ea=gc;Lb.setMaterial(Da,
vb);Z=Ka.index;Vb=1;!0===Da.wireframe&&(Z=Nh.getWireframeAttribute(Ka),Vb=2);db=Ka.drawRange;Gb=Ka.attributes.position;vb=db.start*Vb;db=(db.start+db.count)*Vb;null!==qb&&(vb=Math.max(vb,qb.start*Vb),db=Math.min(db,(qb.start+qb.count)*Vb));null!==Z?(vb=Math.max(vb,0),db=Math.min(db,Z.count)):void 0!==Gb&&null!==Gb&&(vb=Math.max(vb,0),db=Math.min(db,Gb.count));qb=db-vb;0>qb||Infinity===qb||(ee.setup(Ma,Da,Ea,Ka,Z),Ea=dj,null!==Z&&(Z=Df.get(Z),Ea=ej,Ea.setIndex(Z)),Ma.isMesh?!0===Da.wireframe?(Lb.setLineWidth(Da.wireframeLinewidth*
(null===ub?V:1)),Ea.setMode(ua.LINES)):Ea.setMode(ua.TRIANGLES):Ma.isLine?(Da=Da.linewidth,void 0===Da&&(Da=1),Lb.setLineWidth(Da*(null===ub?V:1)),Ma.isLineSegments?Ea.setMode(ua.LINES):Ma.isLineLoop?Ea.setMode(ua.LINE_LOOP):Ea.setMode(ua.LINE_STRIP)):Ma.isPoints?Ea.setMode(ua.POINTS):Ma.isSprite&&Ea.setMode(ua.TRIANGLES),Ma.isInstancedMesh?Ea.renderInstances(vb,qb,Ma.count):Ka.isInstancedBufferGeometry?Ea.renderInstances(vb,qb,Math.min(Ka.instanceCount,void 0!==Ka._maxInstanceCount?Ka._maxInstanceCount:
Infinity)):Ea.render(vb,qb))};this.compile=function(Z,Ea){function Ka(Da,Ma,qb){!0===Da.transparent&&2===Da.side&&!1===Da.forceSinglePass?(Da.side=1,Da.needsUpdate=!0,T(Da,Ma,qb),Da.side=0,Da.needsUpdate=!0,T(Da,Ma,qb),Da.side=2):T(Da,Ma,qb)}xa=rg.get(Z);xa.init();La.push(xa);Z.traverseVisible(function(Da){Da.isLight&&Da.layers.test(Ea.layers)&&(xa.pushLight(Da),Da.castShadow&&xa.pushShadow(Da))});xa.setupLights(Ra.useLegacyLights);Z.traverse(function(Da){const Ma=Da.material;if(Ma)if(Array.isArray(Ma))for(let qb=
0;qb<Ma.length;qb++)Ka(Ma[qb],Z,Da);else Ka(Ma,Z,Da)});La.pop();xa=null};let Sh=null;const fe=new W;fe.setAnimationLoop(function(Z){Sh&&Sh(Z)});"undefined"!==typeof self&&fe.setContext(self);this.setAnimationLoop=function(Z){Sh=Z;Qc.setAnimationLoop(Z);null===Z?fe.stop():fe.start()};Qc.addEventListener("sessionstart",F);Qc.addEventListener("sessionend",G);this.render=function(Z,Ea){if(void 0!==Ea&&!0!==Ea.isCamera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");
else if(!0!==Na){!0===Z.matrixWorldAutoUpdate&&Z.updateMatrixWorld();null===Ea.parent&&!0===Ea.matrixWorldAutoUpdate&&Ea.updateMatrixWorld();!0===Qc.enabled&&!0===Qc.isPresenting&&(!0===Qc.cameraAutoUpdate&&Qc.updateCamera(Ea),Ea=Qc.getCamera());if(!0===Z.isScene)Z.onBeforeRender(Ra,Z,Ea,ub);xa=rg.get(Z,La.length);xa.init();La.push(xa);eb.multiplyMatrices(Ea.projectionMatrix,Ea.matrixWorldInverse);Ba.setFromProjectionMatrix(eb);Ja=this.localClippingEnabled;Ia=md.init(this.clippingPlanes,Ja);ya=qg.get(Z,
Va.length);ya.init();Va.push(ya);M(Z,Ea,0,Ra.sortObjects);ya.finish();!0===Ra.sortObjects&&ya.sort(fa,ia);!0===Ia&&md.beginShadows();bd.render(xa.state.shadowsArray,Z,Ea);!0===Ia&&md.endShadows();!0===this.info.autoReset&&this.info.reset();Pd.render(ya,Z);xa.setupLights(Ra.useLegacyLights);if(Ea.isArrayCamera){const Ka=Ea.cameras;for(let Da=0,Ma=Ka.length;Da<Ma;Da++){const qb=Ka[Da];N(ya,Z,qb,qb.viewport)}}else N(ya,Z,Ea);null!==ub&&(qc.updateMultisampleRenderTarget(ub),qc.updateRenderTargetMipmap(ub));
if(!0===Z.isScene)Z.onAfterRender(Ra,Z,Ea);ee.resetDefaultState();Bb=-1;Sa=null;La.pop();xa=0<La.length?La[La.length-1]:null;Va.pop();ya=0<Va.length?Va[Va.length-1]:null}};this.getActiveCubeFace=function(){return cb};this.getActiveMipmapLevel=function(){return ob};this.getRenderTarget=function(){return ub};this.setRenderTargetTextures=function(Z,Ea,Ka){lc.get(Z.texture).__webglTexture=Ea;lc.get(Z.depthTexture).__webglTexture=Ka;Z=lc.get(Z);Z.__hasExternalTextures=!0;Z.__hasExternalTextures&&(Z.__autoAllocateDepthBuffer=
void 0===Ka,Z.__autoAllocateDepthBuffer||!0!==Ab.has("WEBGL_multisampled_render_to_texture")||(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Z.__useRenderToTexture=!1))};this.setRenderTargetFramebuffer=function(Z,Ea){Z=lc.get(Z);Z.__webglFramebuffer=Ea;Z.__useDefaultFramebuffer=void 0===Ea};this.setRenderTarget=function(Z,Ea=0,Ka=0){ub=Z;cb=Ea;ob=Ka;let Da=!0;var Ma=null;let qb=!1,vb=!1;if(Z){Ma=lc.get(Z);void 0!==Ma.__useDefaultFramebuffer?
(Lb.bindFramebuffer(ua.FRAMEBUFFER,null),Da=!1):void 0===Ma.__webglFramebuffer?qc.setupRenderTarget(Z):Ma.__hasExternalTextures&&qc.rebindTextures(Z,lc.get(Z.texture).__webglTexture,lc.get(Z.depthTexture).__webglTexture);Ma=Z.texture;if(Ma.isData3DTexture||Ma.isDataArrayTexture||Ma.isCompressedArrayTexture)vb=!0;Ma=lc.get(Z).__webglFramebuffer;Z.isWebGLCubeRenderTarget?(Ma=Ma[Ea],qb=!0):Ma=Ub.isWebGL2&&0<Z.samples&&!1===qc.useMultisampledRTT(Z)?lc.get(Z).__webglMultisampledFramebuffer:Ma;$a.copy(Z.viewport);
bb.copy(Z.scissor);rb=Z.scissorTest}else $a.copy(ra).multiplyScalar(V).floor(),bb.copy(Za).multiplyScalar(V).floor(),rb=ha;Lb.bindFramebuffer(ua.FRAMEBUFFER,Ma)&&Ub.drawBuffers&&Da&&Lb.drawBuffers(Z,Ma);Lb.viewport($a);Lb.scissor(bb);Lb.setScissorTest(rb);qb?(Z=lc.get(Z.texture),ua.framebufferTexture2D(ua.FRAMEBUFFER,ua.COLOR_ATTACHMENT0,ua.TEXTURE_CUBE_MAP_POSITIVE_X+Ea,Z.__webglTexture,Ka)):vb&&(Z=lc.get(Z.texture),ua.framebufferTextureLayer(ua.FRAMEBUFFER,ua.COLOR_ATTACHMENT0,Z.__webglTexture,
Ka||0,Ea||0));Bb=-1};this.readRenderTargetPixels=function(Z,Ea,Ka,Da,Ma,qb,vb){if(Z&&Z.isWebGLRenderTarget){var db=lc.get(Z).__webglFramebuffer;Z.isWebGLCubeRenderTarget&&void 0!==vb&&(db=db[vb]);if(db){Lb.bindFramebuffer(ua.FRAMEBUFFER,db);try{const gc=Z.texture,Qb=gc.format,Bc=gc.type;if(1023!==Qb&&ld.convert(Qb)!==ua.getParameter(ua.IMPLEMENTATION_COLOR_READ_FORMAT))console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");else{var Vb=
1016===Bc&&(Ab.has("EXT_color_buffer_half_float")||Ub.isWebGL2&&Ab.has("EXT_color_buffer_float"));1009===Bc||ld.convert(Bc)===ua.getParameter(ua.IMPLEMENTATION_COLOR_READ_TYPE)||1015===Bc&&(Ub.isWebGL2||Ab.has("OES_texture_float")||Ab.has("WEBGL_color_buffer_float"))||Vb?0<=Ea&&Ea<=Z.width-Da&&0<=Ka&&Ka<=Z.height-Ma&&ua.readPixels(Ea,Ka,Da,Ma,ld.convert(Qb),ld.convert(Bc),qb):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}}finally{Z=
null!==ub?lc.get(ub).__webglFramebuffer:null,Lb.bindFramebuffer(ua.FRAMEBUFFER,Z)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")};this.copyFramebufferToTexture=function(Z,Ea,Ka=0){var Da=Math.pow(2,-Ka);const Ma=Math.floor(Ea.image.width*Da);Da=Math.floor(Ea.image.height*Da);qc.setTexture2D(Ea,0);ua.copyTexSubImage2D(ua.TEXTURE_2D,Ka,0,0,Z.x,Z.y,Ma,Da);Lb.unbindTexture()};this.copyTextureToTexture=function(Z,Ea,Ka,Da=0){const Ma=Ea.image.width,
qb=Ea.image.height,vb=ld.convert(Ka.format),db=ld.convert(Ka.type);qc.setTexture2D(Ka,0);ua.pixelStorei(ua.UNPACK_FLIP_Y_WEBGL,Ka.flipY);ua.pixelStorei(ua.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ka.premultiplyAlpha);ua.pixelStorei(ua.UNPACK_ALIGNMENT,Ka.unpackAlignment);Ea.isDataTexture?ua.texSubImage2D(ua.TEXTURE_2D,Da,Z.x,Z.y,Ma,qb,vb,db,Ea.image.data):Ea.isCompressedTexture?ua.compressedTexSubImage2D(ua.TEXTURE_2D,Da,Z.x,Z.y,Ea.mipmaps[0].width,Ea.mipmaps[0].height,vb,Ea.mipmaps[0].data):ua.texSubImage2D(ua.TEXTURE_2D,
Da,Z.x,Z.y,vb,db,Ea.image);0===Da&&Ka.generateMipmaps&&ua.generateMipmap(ua.TEXTURE_2D);Lb.unbindTexture()};this.copyTextureToTexture3D=function(Z,Ea,Ka,Da,Ma=0){if(Ra.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var qb=Z.max.x-Z.min.x+1,vb=Z.max.y-Z.min.y+1,db=Z.max.z-Z.min.z+1,Vb=ld.convert(Da.format),gc=ld.convert(Da.type);if(Da.isData3DTexture){qc.setTexture3D(Da,0);var Qb=ua.TEXTURE_3D}else if(Da.isDataArrayTexture)qc.setTexture2DArray(Da,
0),Qb=ua.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ua.pixelStorei(ua.UNPACK_FLIP_Y_WEBGL,Da.flipY);ua.pixelStorei(ua.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Da.premultiplyAlpha);ua.pixelStorei(ua.UNPACK_ALIGNMENT,Da.unpackAlignment);var Bc=ua.getParameter(ua.UNPACK_ROW_LENGTH),ge=ua.getParameter(ua.UNPACK_IMAGE_HEIGHT),vd=ua.getParameter(ua.UNPACK_SKIP_PIXELS),Ph=ua.getParameter(ua.UNPACK_SKIP_ROWS),
Qh=ua.getParameter(ua.UNPACK_SKIP_IMAGES),Gb=Ka.isCompressedTexture?Ka.mipmaps[0]:Ka.image;ua.pixelStorei(ua.UNPACK_ROW_LENGTH,Gb.width);ua.pixelStorei(ua.UNPACK_IMAGE_HEIGHT,Gb.height);ua.pixelStorei(ua.UNPACK_SKIP_PIXELS,Z.min.x);ua.pixelStorei(ua.UNPACK_SKIP_ROWS,Z.min.y);ua.pixelStorei(ua.UNPACK_SKIP_IMAGES,Z.min.z);Ka.isDataTexture||Ka.isData3DTexture?ua.texSubImage3D(Qb,Ma,Ea.x,Ea.y,Ea.z,qb,vb,db,Vb,gc,Gb.data):Ka.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),
ua.compressedTexSubImage3D(Qb,Ma,Ea.x,Ea.y,Ea.z,qb,vb,db,Vb,Gb.data)):ua.texSubImage3D(Qb,Ma,Ea.x,Ea.y,Ea.z,qb,vb,db,Vb,gc,Gb);ua.pixelStorei(ua.UNPACK_ROW_LENGTH,Bc);ua.pixelStorei(ua.UNPACK_IMAGE_HEIGHT,ge);ua.pixelStorei(ua.UNPACK_SKIP_PIXELS,vd);ua.pixelStorei(ua.UNPACK_SKIP_ROWS,Ph);ua.pixelStorei(ua.UNPACK_SKIP_IMAGES,Qh);0===Ma&&Da.generateMipmaps&&ua.generateMipmap(Qb);Lb.unbindTexture()}};this.initTexture=function(Z){Z.isCubeTexture?qc.setTextureCube(Z,0):Z.isData3DTexture?qc.setTexture3D(Z,
0):Z.isDataArrayTexture||Z.isCompressedArrayTexture?qc.setTexture2DArray(Z,0):qc.setTexture2D(Z,0);Lb.unbindTexture()};this.resetState=function(){ob=cb=0;ub=null;Lb.reset();ee.reset()};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Ie(a,b,d,l,q,y){Je.subVectors(a,d).addScalar(.5).multiply(l);void 0!==q?(Ef.x=y*Je.x-q*Je.y,Ef.y=q*Je.x+y*Je.y):Ef.copy(Je);a.copy(b);a.x+=Ef.x;a.y+=Ef.y;a.applyMatrix4(fj)}function tg(a,b,d,
l,q,y,A){const D=Th.distanceSqToPoint(a);D<d&&(d=new aa,Th.closestPointToPoint(a,d),d.applyMatrix4(l),a=q.ray.origin.distanceTo(d),a<q.near||a>q.far||y.push({distance:a,distanceToRay:Math.sqrt(D),point:d,index:b,face:null,object:A}))}function Ff(){let a=0,b=0,d=0,l=0;return{initCatmullRom:function(q,y,A,D,F){q=F*(A-q);D=F*(D-y);a=y;b=q;d=-3*y+3*A-2*q-D;l=2*y-2*A+q+D},initNonuniformCatmullRom:function(q,y,A,D,F,G,M){q=((y-q)/F-(A-q)/(F+G)+(A-y)/G)*G;D=((A-y)/G-(D-y)/(G+M)+(D-A)/M)*G;a=y;b=q;d=-3*y+
3*A-2*q-D;l=2*y-2*A+q+D},calc:function(q){const y=q*q;return a+b*q+d*y+l*y*q}}}function ug(a,b,d,l,q){b=.5*(l-b);q=.5*(q-d);const y=a*a;return(2*d-2*l+b+q)*a*y+(-3*d+3*l-2*b-q)*y+b*a+d}function he(a,b,d,l){const q=1-a;return q*q*b+2*(1-a)*a*d+a*a*l}function ie(a,b,d,l,q){const y=1-a,A=1-a;return y*y*y*b+3*A*A*a*d+3*(1-a)*a*a*l+a*a*a*q}function vg(a,b,d,l,q){let y,A=0;for(let D=b,F=d-l;D<d;D+=l)A+=(a[F]-a[D])*(a[D+1]+a[F+1]),F=D;if(q===0<A)for(q=b;q<d;q+=l)y=wg(q,a[q],a[q+1],y);else for(q=d-l;q>=b;q-=
l)y=wg(q,a[q],a[q+1],y);y&&Ke(y,y.next)&&(je(y),y=y.next);return y}function wd(a,b){if(!a)return a;b||(b=a);let d;do if(d=!1,a.steiner||!Ke(a,a.next)&&0!==hc(a.prev,a,a.next))a=a.next;else{je(a);a=b=a.prev;if(a===a.next)break;d=!0}while(d||a!==b);return b}function ke(a,b,d,l,q,y,A){if(a){if(!A&&y){var D=a,F=D;do 0===F.z&&(F.z=Gf(F.x,F.y,l,q,y)),F.prevZ=F.prev,F=F.nextZ=F.next;while(F!==D);F.prevZ.nextZ=null;F.prevZ=null;D=F;var G,M,N,P,T=1;do{F=D;var S=D=null;for(M=0;F;){M++;var L=F;for(G=N=0;G<T&&
(N++,L=L.nextZ,L);G++);for(P=T;0<N||0<P&&L;)0!==N&&(0===P||!L||F.z<=L.z)?(G=F,F=F.nextZ,N--):(G=L,L=L.nextZ,P--),S?S.nextZ=G:D=G,G.prevZ=S,S=G;F=L}S.nextZ=null;T*=2}while(1<M)}for(D=a;a.prev!==a.next;){F=a.prev;L=a.next;if(y)S=Uh(a,l,q,y);else a:{S=a.prev;var U=a;P=a.next;if(0<=hc(S,U,P)){S=!1;break a}M=S.x;N=U.x;T=P.x;G=S.y;U=U.y;const ma=P.y,ba=M<N?M<T?M:T:N<T?N:T,na=G<U?G<ma?G:ma:U<ma?U:ma,sa=M>N?M>T?M:T:N>T?N:T,ja=G>U?G>ma?G:ma:U>ma?U:ma;for(P=P.next;P!==S;){if(P.x>=ba&&P.x<=sa&&P.y>=na&&P.y<=
ja&&Qd(M,G,N,U,T,ma,P.x,P.y)&&0<=hc(P.prev,P,P.next)){S=!1;break a}P=P.next}S=!0}if(S)b.push(F.i/d|0),b.push(a.i/d|0),b.push(L.i/d|0),je(a),D=a=L.next;else if(a=L,a===D){if(!A)ke(wd(a),b,d,l,q,y,1);else if(1===A){a=wd(a);A=b;D=d;F=a;do L=F.prev,S=F.next.next,!Ke(L,S)&&xg(L,F,F.next,S)&&le(L,S)&&le(S,L)&&(A.push(L.i/D|0),A.push(F.i/D|0),A.push(S.i/D|0),je(F),je(F.next),F=a=S),F=F.next;while(F!==a);a=wd(F);ke(a,b,d,l,q,y,2)}else if(2===A)a:{A=a;do{for(D=A.next.next;D!==A.prev;){if(F=A.i!==D.i){F=A;
L=D;if(S=F.next.i!==L.i&&F.prev.i!==L.i){b:{S=F;do{if(S.i!==F.i&&S.next.i!==F.i&&S.i!==L.i&&S.next.i!==L.i&&xg(S,S.next,F,L)){S=!0;break b}S=S.next}while(S!==F);S=!1}S=!S}if(S){if(S=le(F,L)&&le(L,F)){S=F;M=!1;N=(F.x+L.x)/2;T=(F.y+L.y)/2;do S.y>T!==S.next.y>T&&S.next.y!==S.y&&N<(S.next.x-S.x)*(T-S.y)/(S.next.y-S.y)+S.x&&(M=!M),S=S.next;while(S!==F);S=M}S=S&&(hc(F.prev,F,L.prev)||hc(F,L.prev,L))||Ke(F,L)&&0<hc(F.prev,F,F.next)&&0<hc(L.prev,L,L.next)}F=S}if(F){a=yg(A,D);A=wd(A,A.next);a=wd(a,a.next);
ke(A,b,d,l,q,y,0);ke(a,b,d,l,q,y,0);break a}D=D.next}A=A.next}while(A!==a)}break}}}}function Uh(a,b,d,l){const q=a.prev,y=a.next;if(0<=hc(q,a,y))return!1;const A=q.x,D=a.x,F=y.x,G=q.y,M=a.y,N=y.y,P=A<D?A<F?A:F:D<F?D:F,T=G<M?G<N?G:N:M<N?M:N,S=A>D?A>F?A:F:D>F?D:F,L=G>M?G>N?G:N:M>N?M:N,U=Gf(P,T,b,d,l);b=Gf(S,L,b,d,l);d=a.prevZ;for(a=a.nextZ;d&&d.z>=U&&a&&a.z<=b;){if(d.x>=P&&d.x<=S&&d.y>=T&&d.y<=L&&d!==q&&d!==y&&Qd(A,G,D,M,F,N,d.x,d.y)&&0<=hc(d.prev,d,d.next))return!1;d=d.prevZ;if(a.x>=P&&a.x<=S&&a.y>=
T&&a.y<=L&&a!==q&&a!==y&&Qd(A,G,D,M,F,N,a.x,a.y)&&0<=hc(a.prev,a,a.next))return!1;a=a.nextZ}for(;d&&d.z>=U;){if(d.x>=P&&d.x<=S&&d.y>=T&&d.y<=L&&d!==q&&d!==y&&Qd(A,G,D,M,F,N,d.x,d.y)&&0<=hc(d.prev,d,d.next))return!1;d=d.prevZ}for(;a&&a.z<=b;){if(a.x>=P&&a.x<=S&&a.y>=T&&a.y<=L&&a!==q&&a!==y&&Qd(A,G,D,M,F,N,a.x,a.y)&&0<=hc(a.prev,a,a.next))return!1;a=a.nextZ}return!0}function Vh(a,b){return a.x-b.x}function Gf(a,b,d,l,q){a=(a-d)*q|0;b=(b-l)*q|0;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;
b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function Qd(a,b,d,l,q,y,A,D){return(q-A)*(b-D)>=(a-A)*(y-D)&&(a-A)*(l-D)>=(d-A)*(b-D)&&(d-A)*(y-D)>=(q-A)*(l-D)}function hc(a,b,d){return(b.y-a.y)*(d.x-b.x)-(b.x-a.x)*(d.y-b.y)}function Ke(a,b){return a.x===b.x&&a.y===b.y}function xg(a,b,d,l){const q=Le(hc(a,b,d)),y=Le(hc(a,b,l)),A=Le(hc(d,l,a)),D=Le(hc(d,l,b));return q!==y&&A!==D||0===q&&Me(a,d,b)||0===y&&Me(a,l,b)||0===A&&Me(d,a,l)||
0===D&&Me(d,b,l)?!0:!1}function Me(a,b,d){return b.x<=Math.max(a.x,d.x)&&b.x>=Math.min(a.x,d.x)&&b.y<=Math.max(a.y,d.y)&&b.y>=Math.min(a.y,d.y)}function Le(a){return 0<a?1:0>a?-1:0}function le(a,b){return 0>hc(a.prev,a,a.next)?0<=hc(a,b,a.next)&&0<=hc(a,a.prev,b):0>hc(a,b,a.prev)||0>hc(a,a.next,b)}function yg(a,b){const d=new Hf(a.i,a.x,a.y),l=new Hf(b.i,b.x,b.y),q=a.next,y=b.prev;a.next=b;b.prev=a;d.next=q;q.prev=d;l.next=d;d.prev=l;y.next=l;l.prev=y;return l}function wg(a,b,d,l){a=new Hf(a,b,d);
l?(a.next=l.next,a.prev=l,l.next.prev=a,l.next=a):(a.prev=a,a.next=a);return a}function je(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Hf(a,b,d){this.i=a;this.x=b;this.y=d;this.next=this.prev=null;this.z=0;this.nextZ=this.prevZ=null;this.steiner=!1}function zg(a){const b=a.length;2<b&&a[b-1].equals(a[0])&&a.pop()}function Ag(a,b){for(let d=0;d<b.length;d++)a.push(b[d].x),a.push(b[d].y)}function Bg(a,b,d){const l=`${a.x},${a.y},${a.z}-${b.x},${b.y},${b.z}`;
a=`${b.x},${b.y},${b.z}-${a.x},${a.y},${a.z}`;if(!0===d.has(l)||!0===d.has(a))return!1;d.add(l);d.add(a);return!0}function Lc(a,b,d){return If(a)?new a.constructor(a.subarray(b,void 0!==d?d:a.length)):a.slice(b,d)}function xd(a,b,d){return!a||!d&&a.constructor===b?a:"number"===typeof b.BYTES_PER_ELEMENT?new b(a):Array.prototype.slice.call(a)}function If(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}function Cg(a){const b=a.length,d=Array(b);for(let l=0;l!==b;++l)d[l]=l;d.sort(function(l,
q){return a[l]-a[q]});return d}function Jf(a,b,d){const l=a.length,q=new a.constructor(l);for(let y=0,A=0;A!==l;++y){const D=d[y]*b;for(let F=0;F!==b;++F)q[A++]=a[D+F]}return q}function Kf(a,b,d,l){let q=1,y=a[0];for(;void 0!==y&&void 0===y[l];)y=a[q++];if(void 0!==y){var A=y[l];if(void 0!==A)if(Array.isArray(A)){do A=y[l],void 0!==A&&(b.push(y.time),d.push.apply(d,A)),y=a[q++];while(void 0!==y)}else if(void 0!==A.toArray){do A=y[l],void 0!==A&&(b.push(y.time),A.toArray(d,d.length)),y=a[q++];while(void 0!==
y)}else{do A=y[l],void 0!==A&&(b.push(y.time),d.push(A)),y=a[q++];while(void 0!==y)}}}function Wh(a){switch(a.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return Lf;case "vector":case "vector2":case "vector3":case "vector4":return Mf;case "color":return Xh;case "quaternion":return Ne;case "bool":case "boolean":return me;case "string":return ne}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+a);}function Dg(){return("undefined"===typeof performance?
Date:performance).now()}function Eg(a,b){return a.distance-b.distance}function Nf(a,b,d,l){a.layers.test(b.layers)&&a.raycast(b,d);if(!0===l){a=a.children;for(let q=0,y=a.length;q<y;q++)Nf(a[q],b,d,!0)}}function Fg(a){const b=[];!0===a.isBone&&b.push(a);for(let d=0;d<a.children.length;d++)b.push.apply(b,Fg(a.children[d]));return b}function mc(a,b,d,l,q,y,A){Gg.set(q,y,A).unproject(l);a=b[a];if(void 0!==a){d=d.getAttribute("position");for(let D=0,F=a.length;D<F;D++)d.setXYZ(a[D],Gg.x,Gg.y,Gg.z)}}class Uc{addEventListener(a,
b){void 0===this._listeners&&(this._listeners={});const d=this._listeners;void 0===d[a]&&(d[a]=[]);-1===d[a].indexOf(b)&&d[a].push(b)}hasEventListener(a,b){if(void 0===this._listeners)return!1;const d=this._listeners;return void 0!==d[a]&&-1!==d[a].indexOf(b)}removeEventListener(a,b){void 0!==this._listeners&&(a=this._listeners[a],void 0!==a&&(b=a.indexOf(b),-1!==b&&a.splice(b,1)))}dispatchEvent(a){if(void 0!==this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;b=b.slice(0);
for(let d=0,l=b.length;d<l;d++)b[d].call(this,a);a.target=null}}}}const uc="00 01 02 03 04 05 06 07 08 09 0a 0b 0c 0d 0e 0f 10 11 12 13 14 15 16 17 18 19 1a 1b 1c 1d 1e 1f 20 21 22 23 24 25 26 27 28 29 2a 2b 2c 2d 2e 2f 30 31 32 33 34 35 36 37 38 39 3a 3b 3c 3d 3e 3f 40 41 42 43 44 45 46 47 48 49 4a 4b 4c 4d 4e 4f 50 51 52 53 54 55 56 57 58 59 5a 5b 5c 5d 5e 5f 60 61 62 63 64 65 66 67 68 69 6a 6b 6c 6d 6e 6f 70 71 72 73 74 75 76 77 78 79 7a 7b 7c 7d 7e 7f 80 81 82 83 84 85 86 87 88 89 8a 8b 8c 8d 8e 8f 90 91 92 93 94 95 96 97 98 99 9a 9b 9c 9d 9e 9f a0 a1 a2 a3 a4 a5 a6 a7 a8 a9 aa ab ac ad ae af b0 b1 b2 b3 b4 b5 b6 b7 b8 b9 ba bb bc bd be bf c0 c1 c2 c3 c4 c5 c6 c7 c8 c9 ca cb cc cd ce cf d0 d1 d2 d3 d4 d5 d6 d7 d8 d9 da db dc dd de df e0 e1 e2 e3 e4 e5 e6 e7 e8 e9 ea eb ec ed ee ef f0 f1 f2 f3 f4 f5 f6 f7 f8 f9 fa fb fc fd fe ff".split(" ");
let ea=1234567;const qa=Math.PI/180,Fa=180/Math.PI,Ya={DEG2RAD:qa,RAD2DEG:Fa,generateUUID:p,clamp:n,euclideanModulo:c,mapLinear:function(a,b,d,l,q){return l+(a-b)*(q-l)/(d-b)},inverseLerp:function(a,b,d){return a!==b?(d-a)/(b-a):0},lerp:e,damp:function(a,b,d,l){return e(a,b,1-Math.exp(-d*l))},pingpong:function(a,b=1){return b-Math.abs(c(a,2*b)-b)},smoothstep:function(a,b,d){if(a<=b)return 0;if(a>=d)return 1;a=(a-b)/(d-b);return a*a*(3-2*a)},smootherstep:function(a,b,d){if(a<=b)return 0;if(a>=d)return 1;
a=(a-b)/(d-b);return a*a*a*(a*(6*a-15)+10)},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},seededRandom:function(a){void 0!==a&&(ea=a);a=ea+=1831565813;a=Math.imul(a^a>>>15,a|1);a^=a+Math.imul(a^a>>>7,a|61);return((a^a>>>14)>>>0)/4294967296},degToRad:function(a){return a*qa},radToDeg:function(a){return a*Fa},isPowerOfTwo:f,ceilPowerOfTwo:h,floorPowerOfTwo:k,setQuaternionFromProperEuler:function(a,
b,d,l,q){var y=Math.cos;const A=Math.sin,D=y(d/2);d=A(d/2);const F=y((b+l)/2),G=A((b+l)/2),M=y((b-l)/2),N=A((b-l)/2);y=y((l-b)/2);b=A((l-b)/2);switch(q){case "XYX":a.set(D*G,d*M,d*N,D*F);break;case "YZY":a.set(d*N,D*G,d*M,D*F);break;case "ZXZ":a.set(d*M,d*N,D*G,D*F);break;case "XZX":a.set(D*G,d*b,d*y,D*F);break;case "YXY":a.set(d*y,D*G,d*b,D*F);break;case "ZYZ":a.set(d*b,d*y,D*G,D*F);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+q)}},
normalize:r,denormalize:g};class za{constructor(a=0,b=0){za.prototype.isVector2=!0;this.x=a;this.y=b}get width(){return this.x}set width(a){this.x=a}get height(){return this.y}set height(a){this.y=a}set(a,b){this.x=a;this.y=b;return this}setScalar(a){this.y=this.x=a;return this}setX(a){this.x=a;return this}setY(a){this.y=a;return this}setComponent(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}return this}getComponent(a){switch(a){case 0:return this.x;
case 1:return this.y;default:throw Error("index is out of range: "+a);}}clone(){return new this.constructor(this.x,this.y)}copy(a){this.x=a.x;this.y=a.y;return this}add(a){this.x+=a.x;this.y+=a.y;return this}addScalar(a){this.x+=a;this.y+=a;return this}addVectors(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this}addScaledVector(a,b){this.x+=a.x*b;this.y+=a.y*b;return this}sub(a){this.x-=a.x;this.y-=a.y;return this}subScalar(a){this.x-=a;this.y-=a;return this}subVectors(a,b){this.x=a.x-b.x;this.y=a.y-
b.y;return this}multiply(a){this.x*=a.x;this.y*=a.y;return this}multiplyScalar(a){this.x*=a;this.y*=a;return this}divide(a){this.x/=a.x;this.y/=a.y;return this}divideScalar(a){return this.multiplyScalar(1/a)}applyMatrix3(a){const b=this.x,d=this.y;a=a.elements;this.x=a[0]*b+a[3]*d+a[6];this.y=a[1]*b+a[4]*d+a[7];return this}min(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this}max(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this}clamp(a,b){this.x=Math.max(a.x,
Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this}clampScalar(a,b){this.x=Math.max(a,Math.min(b,this.x));this.y=Math.max(a,Math.min(b,this.y));return this}clampLength(a,b){const d=this.length();return this.divideScalar(d||1).multiplyScalar(Math.max(a,Math.min(b,d)))}floor(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this}ceil(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this}round(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this}roundToZero(){this.x=
0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this}negate(){this.x=-this.x;this.y=-this.y;return this}dot(a){return this.x*a.x+this.y*a.y}cross(a){return this.x*a.y-this.y*a.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToSquared(a){const b=
this.x-a.x;a=this.y-a.y;return b*b+a*a}manhattanDistanceTo(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this}lerpVectors(a,b,d){this.x=a.x+(b.x-a.x)*d;this.y=a.y+(b.y-a.y)*d;return this}equals(a){return a.x===this.x&&a.y===this.y}fromArray(a,b=0){this.x=a[b];this.y=a[b+1];return this}toArray(a=[],b=0){a[b]=this.x;a[b+1]=this.y;return a}fromBufferAttribute(a,b){this.x=a.getX(b);
this.y=a.getY(b);return this}rotateAround(a,b){const d=Math.cos(b);b=Math.sin(b);const l=this.x-a.x,q=this.y-a.y;this.x=l*d-q*b+a.x;this.y=l*b+q*d+a.y;return this}random(){this.x=Math.random();this.y=Math.random();return this}*[Symbol.iterator](){yield this.x;yield this.y}}class hb{constructor(){hb.prototype.isMatrix3=!0;this.elements=[1,0,0,0,1,0,0,0,1]}set(a,b,d,l,q,y,A,D,F){const G=this.elements;G[0]=a;G[1]=l;G[2]=A;G[3]=b;G[4]=q;G[5]=D;G[6]=d;G[7]=y;G[8]=F;return this}identity(){this.set(1,0,
0,0,1,0,0,0,1);return this}copy(a){const b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return this}extractBasis(a,b,d){a.setFromMatrix3Column(this,0);b.setFromMatrix3Column(this,1);d.setFromMatrix3Column(this,2);return this}setFromMatrix4(a){a=a.elements;this.set(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10]);return this}multiply(a){return this.multiplyMatrices(this,a)}premultiply(a){return this.multiplyMatrices(a,this)}multiplyMatrices(a,
b){var d=a.elements,l=b.elements;b=this.elements;a=d[0];const q=d[3],y=d[6],A=d[1],D=d[4],F=d[7],G=d[2],M=d[5];d=d[8];const N=l[0],P=l[3],T=l[6],S=l[1],L=l[4],U=l[7],ma=l[2],ba=l[5];l=l[8];b[0]=a*N+q*S+y*ma;b[3]=a*P+q*L+y*ba;b[6]=a*T+q*U+y*l;b[1]=A*N+D*S+F*ma;b[4]=A*P+D*L+F*ba;b[7]=A*T+D*U+F*l;b[2]=G*N+M*S+d*ma;b[5]=G*P+M*L+d*ba;b[8]=G*T+M*U+d*l;return this}multiplyScalar(a){const b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this}determinant(){var a=
this.elements;const b=a[0],d=a[1],l=a[2],q=a[3],y=a[4],A=a[5],D=a[6],F=a[7];a=a[8];return b*y*a-b*A*F-d*q*a+d*A*D+l*q*F-l*y*D}invert(){const a=this.elements,b=a[0],d=a[1],l=a[2],q=a[3],y=a[4],A=a[5],D=a[6],F=a[7],G=a[8],M=G*y-A*F,N=A*D-G*q,P=F*q-y*D;var T=b*M+d*N+l*P;if(0===T)return this.set(0,0,0,0,0,0,0,0,0);T=1/T;a[0]=M*T;a[1]=(l*F-G*d)*T;a[2]=(A*d-l*y)*T;a[3]=N*T;a[4]=(G*b-l*D)*T;a[5]=(l*q-A*b)*T;a[6]=P*T;a[7]=(d*D-F*b)*T;a[8]=(y*b-d*q)*T;return this}transpose(){let a;const b=this.elements;a=
b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return this}getNormalMatrix(a){return this.setFromMatrix4(a).invert().transpose()}transposeIntoArray(a){const b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this}setUvTransform(a,b,d,l,q,y,A){const D=Math.cos(q);q=Math.sin(q);this.set(d*D,d*q,-d*(D*y+q*A)+y+a,-l*q,l*D,-l*(-q*y+D*A)+A+b,0,0,1);return this}scale(a,b){this.premultiply(Ob.makeScale(a,b));return this}rotate(a){this.premultiply(Ob.makeRotation(-a));
return this}translate(a,b){this.premultiply(Ob.makeTranslation(a,b));return this}makeTranslation(a,b){this.set(1,0,a,0,1,b,0,0,1);return this}makeRotation(a){const b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,a,b,0,0,0,1);return this}makeScale(a,b){this.set(a,0,0,0,b,0,0,0,1);return this}equals(a){const b=this.elements;a=a.elements;for(let d=0;9>d;d++)if(b[d]!==a[d])return!1;return!0}fromArray(a,b=0){for(let d=0;9>d;d++)this.elements[d]=a[d+b];return this}toArray(a=[],b=0){const d=this.elements;a[b]=
d[0];a[b+1]=d[1];a[b+2]=d[2];a[b+3]=d[3];a[b+4]=d[4];a[b+5]=d[5];a[b+6]=d[6];a[b+7]=d[7];a[b+8]=d[8];return a}clone(){return(new this.constructor).fromArray(this.elements)}}const Ob=new hb,xb={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};class lb{constructor(a=0,b=0,d=0,l=1){this.isQuaternion=!0;this._x=a;this._y=b;this._z=d;this._w=l}static slerpFlat(a,b,d,l,q,y,A){let D=d[l+0],F=d[l+1],G=d[l+2];d=d[l+3];l=q[y+0];const M=q[y+1],N=
q[y+2];q=q[y+3];if(0===A)a[b+0]=D,a[b+1]=F,a[b+2]=G,a[b+3]=d;else if(1===A)a[b+0]=l,a[b+1]=M,a[b+2]=N,a[b+3]=q;else{if(d!==q||D!==l||F!==M||G!==N){y=1-A;var P=D*l+F*M+G*N+d*q,T=0<=P?1:-1,S=1-P*P;S>Number.EPSILON&&(S=Math.sqrt(S),P=Math.atan2(S,P*T),y=Math.sin(y*P)/S,A=Math.sin(A*P)/S);T*=A;D=D*y+l*T;F=F*y+M*T;G=G*y+N*T;d=d*y+q*T;y===1-A&&(A=1/Math.sqrt(D*D+F*F+G*G+d*d),D*=A,F*=A,G*=A,d*=A)}a[b]=D;a[b+1]=F;a[b+2]=G;a[b+3]=d}}static multiplyQuaternionsFlat(a,b,d,l,q,y){const A=d[l],D=d[l+1],F=d[l+2];
d=d[l+3];l=q[y];const G=q[y+1],M=q[y+2];q=q[y+3];a[b]=A*q+d*l+D*M-F*G;a[b+1]=D*q+d*G+F*l-A*M;a[b+2]=F*q+d*M+A*G-D*l;a[b+3]=d*q-A*l-D*G-F*M;return a}get x(){return this._x}set x(a){this._x=a;this._onChangeCallback()}get y(){return this._y}set y(a){this._y=a;this._onChangeCallback()}get z(){return this._z}set z(a){this._z=a;this._onChangeCallback()}get w(){return this._w}set w(a){this._w=a;this._onChangeCallback()}set(a,b,d,l){this._x=a;this._y=b;this._z=d;this._w=l;this._onChangeCallback();return this}clone(){return new this.constructor(this._x,
this._y,this._z,this._w)}copy(a){this._x=a.x;this._y=a.y;this._z=a.z;this._w=a.w;this._onChangeCallback();return this}setFromEuler(a,b){var d=a._x,l=a._y,q=a._z;a=a._order;var y=Math.cos;const A=Math.sin,D=y(d/2),F=y(l/2);y=y(q/2);d=A(d/2);l=A(l/2);q=A(q/2);switch(a){case "XYZ":this._x=d*F*y+D*l*q;this._y=D*l*y-d*F*q;this._z=D*F*q+d*l*y;this._w=D*F*y-d*l*q;break;case "YXZ":this._x=d*F*y+D*l*q;this._y=D*l*y-d*F*q;this._z=D*F*q-d*l*y;this._w=D*F*y+d*l*q;break;case "ZXY":this._x=d*F*y-D*l*q;this._y=
D*l*y+d*F*q;this._z=D*F*q+d*l*y;this._w=D*F*y-d*l*q;break;case "ZYX":this._x=d*F*y-D*l*q;this._y=D*l*y+d*F*q;this._z=D*F*q-d*l*y;this._w=D*F*y+d*l*q;break;case "YZX":this._x=d*F*y+D*l*q;this._y=D*l*y+d*F*q;this._z=D*F*q-d*l*y;this._w=D*F*y-d*l*q;break;case "XZY":this._x=d*F*y-D*l*q;this._y=D*l*y-d*F*q;this._z=D*F*q+d*l*y;this._w=D*F*y+d*l*q;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}!1!==b&&this._onChangeCallback();return this}setFromAxisAngle(a,
b){b/=2;const d=Math.sin(b);this._x=a.x*d;this._y=a.y*d;this._z=a.z*d;this._w=Math.cos(b);this._onChangeCallback();return this}setFromRotationMatrix(a){var b=a.elements,d=b[0];a=b[4];const l=b[8],q=b[1],y=b[5],A=b[9],D=b[2],F=b[6];b=b[10];const G=d+y+b;0<G?(d=.5/Math.sqrt(G+1),this._w=.25/d,this._x=(F-A)*d,this._y=(l-D)*d,this._z=(q-a)*d):d>y&&d>b?(d=2*Math.sqrt(1+d-y-b),this._w=(F-A)/d,this._x=.25*d,this._y=(a+q)/d,this._z=(l+D)/d):y>b?(d=2*Math.sqrt(1+y-d-b),this._w=(l-D)/d,this._x=(a+q)/d,this._y=
.25*d,this._z=(A+F)/d):(d=2*Math.sqrt(1+b-d-y),this._w=(q-a)/d,this._x=(l+D)/d,this._y=(A+F)/d,this._z=.25*d);this._onChangeCallback();return this}setFromUnitVectors(a,b){let d=a.dot(b)+1;d<Number.EPSILON?(d=0,Math.abs(a.x)>Math.abs(a.z)?(this._x=-a.y,this._y=a.x,this._z=0):(this._x=0,this._y=-a.z,this._z=a.y)):(this._x=a.y*b.z-a.z*b.y,this._y=a.z*b.x-a.x*b.z,this._z=a.x*b.y-a.y*b.x);this._w=d;return this.normalize()}angleTo(a){return 2*Math.acos(Math.abs(n(this.dot(a),-1,1)))}rotateTowards(a,b){const d=
this.angleTo(a);if(0===d)return this;this.slerp(a,Math.min(1,b/d));return this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){this._x*=-1;this._y*=-1;this._z*=-1;this._onChangeCallback();return this}dot(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let a=this.length();
0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this._onChangeCallback();return this}multiply(a){return this.multiplyQuaternions(this,a)}premultiply(a){return this.multiplyQuaternions(a,this)}multiplyQuaternions(a,b){const d=a._x,l=a._y,q=a._z;a=a._w;const y=b._x,A=b._y,D=b._z;b=b._w;this._x=d*b+a*y+l*D-q*A;this._y=l*b+a*A+q*y-d*D;this._z=q*b+a*D+d*A-l*y;this._w=a*b-d*y-l*A-q*D;this._onChangeCallback();return this}slerp(a,b){if(0===b)return this;if(1===
b)return this.copy(a);const d=this._x,l=this._y,q=this._z,y=this._w;var A=y*a._w+d*a._x+l*a._y+q*a._z;0>A?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,A=-A):this.copy(a);if(1<=A)return this._w=y,this._x=d,this._y=l,this._z=q,this;a=1-A*A;if(a<=Number.EPSILON)return A=1-b,this._w=A*y+b*this._w,this._x=A*d+b*this._x,this._y=A*l+b*this._y,this._z=A*q+b*this._z,this.normalize(),this._onChangeCallback(),this;a=Math.sqrt(a);const D=Math.atan2(a,A);A=Math.sin((1-b)*D)/a;b=Math.sin(b*D)/a;this._w=
y*A+this._w*b;this._x=d*A+this._x*b;this._y=l*A+this._y*b;this._z=q*A+this._z*b;this._onChangeCallback();return this}slerpQuaternions(a,b,d){return this.copy(a).slerp(b,d)}random(){var a=Math.random();const b=Math.sqrt(1-a);a=Math.sqrt(a);const d=2*Math.PI*Math.random(),l=2*Math.PI*Math.random();return this.set(b*Math.cos(d),a*Math.sin(l),a*Math.cos(l),b*Math.sin(d))}equals(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w}fromArray(a,b=0){this._x=a[b];this._y=a[b+1];this._z=
a[b+2];this._w=a[b+3];this._onChangeCallback();return this}toArray(a=[],b=0){a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a}fromBufferAttribute(a,b){this._x=a.getX(b);this._y=a.getY(b);this._z=a.getZ(b);this._w=a.getW(b);return this}_onChange(a){this._onChangeCallback=a;return this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x;yield this._y;yield this._z;yield this._w}}class aa{constructor(a=0,b=0,d=0){aa.prototype.isVector3=!0;this.x=a;this.y=b;this.z=d}set(a,b,d){void 0===
d&&(d=this.z);this.x=a;this.y=b;this.z=d;return this}setScalar(a){this.z=this.y=this.x=a;return this}setX(a){this.x=a;return this}setY(a){this.y=a;return this}setZ(a){this.z=a;return this}setComponent(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+a);}}clone(){return new this.constructor(this.x,
this.y,this.z)}copy(a){this.x=a.x;this.y=a.y;this.z=a.z;return this}add(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this}addScalar(a){this.x+=a;this.y+=a;this.z+=a;return this}addVectors(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this}addScaledVector(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this}sub(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this}subScalar(a){this.x-=a;this.y-=a;this.z-=a;return this}subVectors(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this}multiply(a){this.x*=
a.x;this.y*=a.y;this.z*=a.z;return this}multiplyScalar(a){this.x*=a;this.y*=a;this.z*=a;return this}multiplyVectors(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this}applyEuler(a){return this.applyQuaternion(Pb.setFromEuler(a))}applyAxisAngle(a,b){return this.applyQuaternion(Pb.setFromAxisAngle(a,b))}applyMatrix3(a){const b=this.x,d=this.y,l=this.z;a=a.elements;this.x=a[0]*b+a[3]*d+a[6]*l;this.y=a[1]*b+a[4]*d+a[7]*l;this.z=a[2]*b+a[5]*d+a[8]*l;return this}applyNormalMatrix(a){return this.applyMatrix3(a).normalize()}applyMatrix4(a){const b=
this.x,d=this.y,l=this.z;a=a.elements;const q=1/(a[3]*b+a[7]*d+a[11]*l+a[15]);this.x=(a[0]*b+a[4]*d+a[8]*l+a[12])*q;this.y=(a[1]*b+a[5]*d+a[9]*l+a[13])*q;this.z=(a[2]*b+a[6]*d+a[10]*l+a[14])*q;return this}applyQuaternion(a){var b=this.x;const d=this.y,l=this.z,q=a.x,y=a.y,A=a.z;a=a.w;const D=a*b+y*l-A*d,F=a*d+A*b-q*l,G=a*l+q*d-y*b;b=-q*b-y*d-A*l;this.x=D*a+b*-q+F*-A-G*-y;this.y=F*a+b*-y+G*-q-D*-A;this.z=G*a+b*-A+D*-y-F*-q;return this}project(a){return this.applyMatrix4(a.matrixWorldInverse).applyMatrix4(a.projectionMatrix)}unproject(a){return this.applyMatrix4(a.projectionMatrixInverse).applyMatrix4(a.matrixWorld)}transformDirection(a){const b=
this.x,d=this.y,l=this.z;a=a.elements;this.x=a[0]*b+a[4]*d+a[8]*l;this.y=a[1]*b+a[5]*d+a[9]*l;this.z=a[2]*b+a[6]*d+a[10]*l;return this.normalize()}divide(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this}divideScalar(a){return this.multiplyScalar(1/a)}min(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this}max(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this}clamp(a,b){this.x=Math.max(a.x,Math.min(b.x,
this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this}clampScalar(a,b){this.x=Math.max(a,Math.min(b,this.x));this.y=Math.max(a,Math.min(b,this.y));this.z=Math.max(a,Math.min(b,this.z));return this}clampLength(a,b){const d=this.length();return this.divideScalar(d||1).multiplyScalar(Math.max(a,Math.min(b,d)))}floor(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this}ceil(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);
this.z=Math.ceil(this.z);return this}round(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this}roundToZero(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this}negate(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this}dot(a){return this.x*a.x+this.y*a.y+this.z*a.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*
this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this}lerpVectors(a,b,d){this.x=a.x+(b.x-a.x)*d;this.y=a.y+(b.y-a.y)*d;this.z=a.z+(b.z-a.z)*d;return this}cross(a){return this.crossVectors(this,a)}crossVectors(a,b){const d=a.x,l=a.y;a=a.z;const q=
b.x,y=b.y;b=b.z;this.x=l*b-a*y;this.y=a*q-d*b;this.z=d*y-l*q;return this}projectOnVector(a){var b=a.lengthSq();if(0===b)return this.set(0,0,0);b=a.dot(this)/b;return this.copy(a).multiplyScalar(b)}projectOnPlane(a){Yb.copy(this).projectOnVector(a);return this.sub(Yb)}reflect(a){return this.sub(Yb.copy(a).multiplyScalar(2*this.dot(a)))}angleTo(a){const b=Math.sqrt(this.lengthSq()*a.lengthSq());if(0===b)return Math.PI/2;a=this.dot(a)/b;return Math.acos(n(a,-1,1))}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToSquared(a){const b=
this.x-a.x,d=this.y-a.y;a=this.z-a.z;return b*b+d*d+a*a}manhattanDistanceTo(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)}setFromSpherical(a){return this.setFromSphericalCoords(a.radius,a.phi,a.theta)}setFromSphericalCoords(a,b,d){const l=Math.sin(b)*a;this.x=l*Math.sin(d);this.y=Math.cos(b)*a;this.z=l*Math.cos(d);return this}setFromCylindrical(a){return this.setFromCylindricalCoords(a.radius,a.theta,a.y)}setFromCylindricalCoords(a,b,d){this.x=a*Math.sin(b);this.y=d;this.z=
a*Math.cos(b);return this}setFromMatrixPosition(a){a=a.elements;this.x=a[12];this.y=a[13];this.z=a[14];return this}setFromMatrixScale(a){const b=this.setFromMatrixColumn(a,0).length(),d=this.setFromMatrixColumn(a,1).length();a=this.setFromMatrixColumn(a,2).length();this.x=b;this.y=d;this.z=a;return this}setFromMatrixColumn(a,b){return this.fromArray(a.elements,4*b)}setFromMatrix3Column(a,b){return this.fromArray(a.elements,3*b)}setFromEuler(a){this.x=a._x;this.y=a._y;this.z=a._z;return this}equals(a){return a.x===
this.x&&a.y===this.y&&a.z===this.z}fromArray(a,b=0){this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this}toArray(a=[],b=0){a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a}fromBufferAttribute(a,b){this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);return this}random(){this.x=Math.random();this.y=Math.random();this.z=Math.random();return this}randomDirection(){const a=2*(Math.random()-.5),b=Math.random()*Math.PI*2,d=Math.sqrt(1-a**2);this.x=d*Math.cos(b);this.y=d*Math.sin(b);this.z=a;return this}*[Symbol.iterator](){yield this.x;
yield this.y;yield this.z}}const Yb=new aa,Pb=new lb,ic=(new hb).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1E-7,1E-7,.9105199]),Zb=(new hb).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1E-7,0,1.0982735]),Cc=new aa,Rc={["srgb-linear"]:a=>a,srgb:a=>a.convertSRGBToLinear(),["display-p3"]:function(a){a.convertSRGBToLinear();Cc.set(a.r,a.g,a.b).applyMatrix3(Zb);return a.setRGB(Cc.x,Cc.y,Cc.z)}},Oe={["srgb-linear"]:a=>a,srgb:a=>a.convertLinearToSRGB(),["display-p3"]:function(a){Cc.set(a.r,
a.g,a.b).applyMatrix3(ic);return a.setRGB(Cc.x,Cc.y,Cc.z).convertLinearToSRGB()}},Ec={enabled:!1,get legacyMode(){console.warn("THREE.ColorManagement: .legacyMode\x3dfalse renamed to .enabled\x3dtrue in r150.");return!this.enabled},set legacyMode(a){console.warn("THREE.ColorManagement: .legacyMode\x3dfalse renamed to .enabled\x3dtrue in r150.");this.enabled=!a},get workingColorSpace(){return"srgb-linear"},set workingColorSpace(a){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},
convert:function(a,b,d){if(!1===this.enabled||b===d||!b||!d)return a;const l=Rc[b],q=Oe[d];if(void 0===l||void 0===q)throw Error(`Unsupported color space conversion, "${b}" to "${d}".`);return q(l(a))},fromWorkingColorSpace:function(a,b){return this.convert(a,this.workingColorSpace,b)},toWorkingColorSpace:function(a,b){return this.convert(a,b,this.workingColorSpace)}};let Pe;class zh{static getDataURL(a){if(/^data:/i.test(a.src)||"undefined"==typeof HTMLCanvasElement)return a.src;if(a instanceof HTMLCanvasElement)var b=
a;else void 0===Pe&&(Pe=w("canvas")),Pe.width=a.width,Pe.height=a.height,b=Pe.getContext("2d"),a instanceof ImageData?b.putImageData(a,0,0):b.drawImage(a,0,0,a.width,a.height),b=Pe;return 2048<b.width||2048<b.height?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",a),b.toDataURL("image/jpeg",.6)):b.toDataURL("image/png")}static sRGBToLinear(a){if("undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&
a instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&a instanceof ImageBitmap){var b=w("canvas");b.width=a.width;b.height=a.height;var d=b.getContext("2d");d.drawImage(a,0,0,a.width,a.height);a=d.getImageData(0,0,a.width,a.height);const l=a.data;for(let q=0;q<l.length;q++)l[q]=255*x(l[q]/255);d.putImageData(a,0,0);return b}if(a.data){b=a.data.slice(0);for(d=0;d<b.length;d++)b[d]=b instanceof Uint8Array||b instanceof Uint8ClampedArray?Math.floor(255*x(b[d]/255)):x(b[d]);return{data:b,
width:a.width,height:a.height}}console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied.");return a}}class oe{constructor(a=null){this.isSource=!0;this.uuid=p();this.data=a;this.version=0}set needsUpdate(a){!0===a&&this.version++}toJSON(a){const b=void 0===a||"string"===typeof a;if(!b&&void 0!==a.images[this.uuid])return a.images[this.uuid];const d={uuid:this.uuid,url:""},l=this.data;if(null!==l){let q;if(Array.isArray(l)){q=[];for(let y=0,A=l.length;y<
A;y++)l[y].isDataTexture?q.push(E(l[y].image)):q.push(E(l[y]))}else q=E(l);d.url=q}b||(a.images[this.uuid]=d);return d}}let al=0;class rc extends Uc{constructor(a=rc.DEFAULT_IMAGE,b=rc.DEFAULT_MAPPING,d=1001,l=1001,q=1006,y=1008,A=1023,D=1009,F=rc.DEFAULT_ANISOTROPY,G=3E3){super();this.isTexture=!0;Object.defineProperty(this,"id",{value:al++});this.uuid=p();this.name="";this.source=new oe(a);this.mipmaps=[];this.mapping=b;this.wrapS=d;this.wrapT=l;this.magFilter=q;this.minFilter=y;this.anisotropy=
F;this.format=A;this.internalFormat=null;this.type=D;this.offset=new za(0,0);this.repeat=new za(1,1);this.center=new za(0,0);this.rotation=0;this.matrixAutoUpdate=!0;this.matrix=new hb;this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=G;this.userData={};this.version=0;this.onUpdate=null;this.needsPMREMUpdate=this.isRenderTargetTexture=!1}get image(){return this.source.data}set image(a=null){this.source.data=a}updateMatrix(){this.matrix.setUvTransform(this.offset.x,
this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(a){this.name=a.name;this.source=a.source;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=a.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;this.internalFormat=a.internalFormat;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.center.copy(a.center);
this.rotation=a.rotation;this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrix.copy(a.matrix);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;this.encoding=a.encoding;this.userData=JSON.parse(JSON.stringify(a.userData));this.needsUpdate=!0;return this}toJSON(a){const b=void 0===a||"string"===typeof a;if(!b&&void 0!==a.textures[this.uuid])return a.textures[this.uuid];const d={metadata:{version:4.5,type:"Texture",
generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(a).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,
unpackAlignment:this.unpackAlignment};0<Object.keys(this.userData).length&&(d.userData=this.userData);b||(a.textures[this.uuid]=d);return d}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(a){if(300!==this.mapping)return a;a.applyMatrix3(this.matrix);if(0>a.x||1<a.x)switch(this.wrapS){case 1E3:a.x-=Math.floor(a.x);break;case 1001:a.x=0>a.x?0:1;break;case 1002:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(0>a.y||1<a.y)switch(this.wrapT){case 1E3:a.y-=Math.floor(a.y);
break;case 1001:a.y=0>a.y?0:1;break;case 1002:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}this.flipY&&(a.y=1-a.y);return a}set needsUpdate(a){!0===a&&(this.version++,this.source.needsUpdate=!0)}}rc.DEFAULT_IMAGE=null;rc.DEFAULT_MAPPING=300;rc.DEFAULT_ANISOTROPY=1;class cc{constructor(a=0,b=0,d=0,l=1){cc.prototype.isVector4=!0;this.x=a;this.y=b;this.z=d;this.w=l}get width(){return this.z}set width(a){this.z=a}get height(){return this.w}set height(a){this.w=a}set(a,b,
d,l){this.x=a;this.y=b;this.z=d;this.w=l;return this}setScalar(a){this.w=this.z=this.y=this.x=a;return this}setX(a){this.x=a;return this}setY(a){this.y=a;return this}setZ(a){this.z=a;return this}setW(a){this.w=a;return this}setComponent(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+a);}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;
default:throw Error("index is out of range: "+a);}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this}add(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this}addScalar(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this}addVectors(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this}addScaledVector(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this}sub(a){this.x-=
a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this}subScalar(a){this.x-=a;this.y-=a;this.z-=a;this.w-=a;return this}subVectors(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this}multiply(a){this.x*=a.x;this.y*=a.y;this.z*=a.z;this.w*=a.w;return this}multiplyScalar(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this}applyMatrix4(a){const b=this.x,d=this.y,l=this.z,q=this.w;a=a.elements;this.x=a[0]*b+a[4]*d+a[8]*l+a[12]*q;this.y=a[1]*b+a[5]*d+a[9]*l+a[13]*q;this.z=a[2]*
b+a[6]*d+a[10]*l+a[14]*q;this.w=a[3]*b+a[7]*d+a[11]*l+a[15]*q;return this}divideScalar(a){return this.multiplyScalar(1/a)}setAxisAngleFromQuaternion(a){this.w=2*Math.acos(a.w);const b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this}setAxisAngleFromRotationMatrix(a){a=a.elements;var b=a[0];var d=a[4];var l=a[8];const q=a[1];var y=a[5],A=a[9];var D=a[2];var F=a[6];var G=a[10];if(.01>Math.abs(d-q)&&.01>Math.abs(l-D)&&.01>Math.abs(A-F)){if(.1>
Math.abs(d+q)&&.1>Math.abs(l+D)&&.1>Math.abs(A+F)&&.1>Math.abs(b+y+G-3))return this.set(1,0,0,0),this;a=Math.PI;b=(b+1)/2;y=(y+1)/2;G=(G+1)/2;d=(d+q)/4;l=(l+D)/4;A=(A+F)/4;b>y&&b>G?.01>b?(F=0,d=D=.707106781):(F=Math.sqrt(b),D=d/F,d=l/F):y>G?.01>y?(F=.707106781,D=0,d=.707106781):(D=Math.sqrt(y),F=d/D,d=A/D):.01>G?(D=F=.707106781,d=0):(d=Math.sqrt(G),F=l/d,D=A/d);this.set(F,D,d,a);return this}a=Math.sqrt((F-A)*(F-A)+(l-D)*(l-D)+(q-d)*(q-d));.001>Math.abs(a)&&(a=1);this.x=(F-A)/a;this.y=(l-D)/a;this.z=
(q-d)/a;this.w=Math.acos((b+y+G-1)/2);return this}min(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);this.w=Math.min(this.w,a.w);return this}max(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);this.w=Math.max(this.w,a.w);return this}clamp(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));this.w=Math.max(a.w,Math.min(b.w,this.w));return this}clampScalar(a,
b){this.x=Math.max(a,Math.min(b,this.x));this.y=Math.max(a,Math.min(b,this.y));this.z=Math.max(a,Math.min(b,this.z));this.w=Math.max(a,Math.min(b,this.w));return this}clampLength(a,b){const d=this.length();return this.divideScalar(d||1).multiplyScalar(Math.max(a,Math.min(b,d)))}floor(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this}ceil(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);
return this}round(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this}roundToZero(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this}negate(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this}dot(a){return this.x*a.x+this.y*a.y+this.z*a.z+
this.w*a.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this}lerpVectors(a,b,
d){this.x=a.x+(b.x-a.x)*d;this.y=a.y+(b.y-a.y)*d;this.z=a.z+(b.z-a.z)*d;this.w=a.w+(b.w-a.w)*d;return this}equals(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w}fromArray(a,b=0){this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this}toArray(a=[],b=0){a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a}fromBufferAttribute(a,b){this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);this.w=a.getW(b);return this}random(){this.x=Math.random();this.y=Math.random();this.z=
Math.random();this.w=Math.random();return this}*[Symbol.iterator](){yield this.x;yield this.y;yield this.z;yield this.w}}class Yc extends Uc{constructor(a=1,b=1,d={}){super();this.isWebGLRenderTarget=!0;this.width=a;this.height=b;this.depth=1;this.scissor=new cc(0,0,a,b);this.scissorTest=!1;this.viewport=new cc(0,0,a,b);this.texture=new rc({width:a,height:b,depth:1},d.mapping,d.wrapS,d.wrapT,d.magFilter,d.minFilter,d.format,d.type,d.anisotropy,d.encoding);this.texture.isRenderTargetTexture=!0;this.texture.flipY=
!1;this.texture.generateMipmaps=void 0!==d.generateMipmaps?d.generateMipmaps:!1;this.texture.internalFormat=void 0!==d.internalFormat?d.internalFormat:null;this.texture.minFilter=void 0!==d.minFilter?d.minFilter:1006;this.depthBuffer=void 0!==d.depthBuffer?d.depthBuffer:!0;this.stencilBuffer=void 0!==d.stencilBuffer?d.stencilBuffer:!1;this.depthTexture=void 0!==d.depthTexture?d.depthTexture:null;this.samples=void 0!==d.samples?d.samples:0}setSize(a,b,d=1){if(this.width!==a||this.height!==b||this.depth!==
d)this.width=a,this.height=b,this.depth=d,this.texture.image.width=a,this.texture.image.height=b,this.texture.image.depth=d,this.dispose();this.viewport.set(0,0,a,b);this.scissor.set(0,0,a,b)}clone(){return(new this.constructor).copy(this)}copy(a){this.width=a.width;this.height=a.height;this.depth=a.depth;this.viewport.copy(a.viewport);this.texture=a.texture.clone();this.texture.isRenderTargetTexture=!0;const b=Object.assign({},a.texture.image);this.texture.source=new oe(b);this.depthBuffer=a.depthBuffer;
this.stencilBuffer=a.stencilBuffer;null!==a.depthTexture&&(this.depthTexture=a.depthTexture.clone());this.samples=a.samples;return this}dispose(){this.dispatchEvent({type:"dispose"})}}class lg extends rc{constructor(a=null,b=1,d=1,l=1){super(null);this.isDataArrayTexture=!0;this.image={data:a,width:b,height:d,depth:l};this.minFilter=this.magFilter=1003;this.wrapR=1001;this.flipY=this.generateMipmaps=!1;this.unpackAlignment=1}}class bl extends Yc{constructor(a=1,b=1,d=1){super(a,b);this.isWebGLArrayRenderTarget=
!0;this.depth=d;this.texture=new lg(null,a,b,d);this.texture.isRenderTargetTexture=!0}}class Yh extends rc{constructor(a=null,b=1,d=1,l=1){super(null);this.isData3DTexture=!0;this.image={data:a,width:b,height:d,depth:l};this.minFilter=this.magFilter=1003;this.wrapR=1001;this.flipY=this.generateMipmaps=!1;this.unpackAlignment=1}}class cl extends Yc{constructor(a=1,b=1,d=1){super(a,b);this.isWebGL3DRenderTarget=!0;this.depth=d;this.texture=new Yh(null,a,b,d);this.texture.isRenderTargetTexture=!0}}class dl extends Yc{constructor(a=
1,b=1,d=1,l={}){super(a,b,l);this.isWebGLMultipleRenderTargets=!0;a=this.texture;this.texture=[];for(b=0;b<d;b++)this.texture[b]=a.clone(),this.texture[b].isRenderTargetTexture=!0}setSize(a,b,d=1){if(this.width!==a||this.height!==b||this.depth!==d){this.width=a;this.height=b;this.depth=d;for(let l=0,q=this.texture.length;l<q;l++)this.texture[l].image.width=a,this.texture[l].image.height=b,this.texture[l].image.depth=d;this.dispose()}this.viewport.set(0,0,a,b);this.scissor.set(0,0,a,b);return this}copy(a){this.dispose();
this.width=a.width;this.height=a.height;this.depth=a.depth;this.viewport.set(0,0,this.width,this.height);this.scissor.set(0,0,this.width,this.height);this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;null!==a.depthTexture&&(this.depthTexture=a.depthTexture.clone());this.texture.length=0;for(let b=0,d=a.texture.length;b<d;b++)this.texture[b]=a.texture[b].clone(),this.texture[b].isRenderTargetTexture=!0;return this}}class pe{constructor(a=new aa(Infinity,Infinity,Infinity),b=new aa(-Infinity,
-Infinity,-Infinity)){this.isBox3=!0;this.min=a;this.max=b}set(a,b){this.min.copy(a);this.max.copy(b);return this}setFromArray(a){let b=Infinity,d=Infinity,l=Infinity,q=-Infinity,y=-Infinity,A=-Infinity;for(let D=0,F=a.length;D<F;D+=3){const G=a[D],M=a[D+1],N=a[D+2];G<b&&(b=G);M<d&&(d=M);N<l&&(l=N);G>q&&(q=G);M>y&&(y=M);N>A&&(A=N)}this.min.set(b,d,l);this.max.set(q,y,A);return this}setFromBufferAttribute(a){let b=Infinity,d=Infinity,l=Infinity,q=-Infinity,y=-Infinity,A=-Infinity;for(let D=0,F=a.count;D<
F;D++){const G=a.getX(D),M=a.getY(D),N=a.getZ(D);G<b&&(b=G);M<d&&(d=M);N<l&&(l=N);G>q&&(q=G);M>y&&(y=M);N>A&&(A=N)}this.min.set(b,d,l);this.max.set(q,y,A);return this}setFromPoints(a){this.makeEmpty();for(let b=0,d=a.length;b<d;b++)this.expandByPoint(a[b]);return this}setFromCenterAndSize(a,b){b=qe.copy(b).multiplyScalar(.5);this.min.copy(a).sub(b);this.max.copy(a).add(b);return this}setFromObject(a,b=!1){this.makeEmpty();return this.expandByObject(a,b)}clone(){return(new this.constructor).copy(this)}copy(a){this.min.copy(a.min);
this.max.copy(a.max);return this}makeEmpty(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(a){return this.isEmpty()?a.set(0,0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(a){return this.isEmpty()?a.set(0,0,0):a.subVectors(this.max,this.min)}expandByPoint(a){this.min.min(a);this.max.max(a);return this}expandByVector(a){this.min.sub(a);this.max.add(a);
return this}expandByScalar(a){this.min.addScalar(-a);this.max.addScalar(a);return this}expandByObject(a,b=!1){a.updateWorldMatrix(!1,!1);var d=a.geometry;if(void 0!==d)if(b&&void 0!=d.attributes&&void 0!==d.attributes.position){d=d.attributes.position;for(let l=0,q=d.count;l<q;l++)qe.fromBufferAttribute(d,l).applyMatrix4(a.matrixWorld),this.expandByPoint(qe)}else null===d.boundingBox&&d.computeBoundingBox(),Zh.copy(d.boundingBox),Zh.applyMatrix4(a.matrixWorld),this.union(Zh);a=a.children;for(let l=
0,q=a.length;l<q;l++)this.expandByObject(a[l],b);return this}containsPoint(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0}containsBox(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z}getParameter(a,b){return b.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(a){return a.max.x<
this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0}intersectsSphere(a){this.clampPoint(a.center,qe);return qe.distanceToSquared(a.center)<=a.radius*a.radius}intersectsPlane(a){let b,d;0<a.normal.x?(b=a.normal.x*this.min.x,d=a.normal.x*this.max.x):(b=a.normal.x*this.max.x,d=a.normal.x*this.min.x);0<a.normal.y?(b+=a.normal.y*this.min.y,d+=a.normal.y*this.max.y):(b+=a.normal.y*this.max.y,d+=a.normal.y*this.min.y);0<a.normal.z?(b+=a.normal.z*
this.min.z,d+=a.normal.z*this.max.z):(b+=a.normal.z*this.max.z,d+=a.normal.z*this.min.z);return b<=-a.constant&&d>=-a.constant}intersectsTriangle(a){if(this.isEmpty())return!1;this.getCenter(Of);Hg.subVectors(this.max,Of);Qe.subVectors(a.a,Of);Re.subVectors(a.b,Of);Se.subVectors(a.c,Of);Rd.subVectors(Re,Qe);Sd.subVectors(Se,Re);re.subVectors(Qe,Se);a=[0,-Rd.z,Rd.y,0,-Sd.z,Sd.y,0,-re.z,re.y,Rd.z,0,-Rd.x,Sd.z,0,-Sd.x,re.z,0,-re.x,-Rd.y,Rd.x,0,-Sd.y,Sd.x,0,-re.y,re.x,0];if(!C(a,Qe,Re,Se,Hg))return!1;
a=[1,0,0,0,1,0,0,0,1];if(!C(a,Qe,Re,Se,Hg))return!1;Ig.crossVectors(Rd,Sd);a=[Ig.x,Ig.y,Ig.z];return C(a,Qe,Re,Se,Hg)}clampPoint(a,b){return b.copy(a).clamp(this.min,this.max)}distanceToPoint(a){return this.clampPoint(a,qe).distanceTo(a)}getBoundingSphere(a){this.isEmpty()?a.makeEmpty():(this.getCenter(a.center),a.radius=.5*this.getSize(qe).length());return a}intersect(a){this.min.max(a.min);this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this}union(a){this.min.min(a.min);this.max.max(a.max);
return this}applyMatrix4(a){if(this.isEmpty())return this;yd[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(a);yd[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(a);yd[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(a);yd[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(a);yd[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(a);yd[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(a);yd[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(a);yd[7].set(this.max.x,this.max.y,
this.max.z).applyMatrix4(a);this.setFromPoints(yd);return this}translate(a){this.min.add(a);this.max.add(a);return this}equals(a){return a.min.equals(this.min)&&a.max.equals(this.max)}}const yd=[new aa,new aa,new aa,new aa,new aa,new aa,new aa,new aa],qe=new aa,Zh=new pe,Qe=new aa,Re=new aa,Se=new aa,Rd=new aa,Sd=new aa,re=new aa,Of=new aa,Hg=new aa,Ig=new aa,$d=new aa,el=new pe,Pf=new aa,$h=new aa;class se{constructor(a=new aa,b=-1){this.center=a;this.radius=b}set(a,b){this.center.copy(a);this.radius=
b;return this}setFromPoints(a,b){const d=this.center;void 0!==b?d.copy(b):el.setFromPoints(a).getCenter(d);b=0;for(let l=0,q=a.length;l<q;l++)b=Math.max(b,d.distanceToSquared(a[l]));this.radius=Math.sqrt(b);return this}copy(a){this.center.copy(a.center);this.radius=a.radius;return this}isEmpty(){return 0>this.radius}makeEmpty(){this.center.set(0,0,0);this.radius=-1;return this}containsPoint(a){return a.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(a){return a.distanceTo(this.center)-
this.radius}intersectsSphere(a){const b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b}intersectsBox(a){return a.intersectsSphere(this)}intersectsPlane(a){return Math.abs(a.distanceToPoint(this.center))<=this.radius}clampPoint(a,b){const d=this.center.distanceToSquared(a);b.copy(a);d>this.radius*this.radius&&(b.sub(this.center).normalize(),b.multiplyScalar(this.radius).add(this.center));return b}getBoundingBox(a){if(this.isEmpty())return a.makeEmpty(),a;a.set(this.center,
this.center);a.expandByScalar(this.radius);return a}applyMatrix4(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this}translate(a){this.center.add(a);return this}expandByPoint(a){if(this.isEmpty())return this.center.copy(a),this.radius=0,this;Pf.subVectors(a,this.center);a=Pf.lengthSq();if(a>this.radius*this.radius){a=Math.sqrt(a);const b=.5*(a-this.radius);this.center.addScaledVector(Pf,b/a);this.radius+=b}return this}union(a){if(a.isEmpty())return this;if(this.isEmpty())return this.copy(a),
this;!0===this.center.equals(a.center)?this.radius=Math.max(this.radius,a.radius):($h.subVectors(a.center,this.center).setLength(a.radius),this.expandByPoint(Pf.copy(a.center).add($h)),this.expandByPoint(Pf.copy(a.center).sub($h)));return this}equals(a){return a.center.equals(this.center)&&a.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const zd=new aa,ai=new aa,Jg=new aa,Td=new aa,bi=new aa,Kg=new aa,ci=new aa;class Qf{constructor(a=new aa,b=new aa(0,0,-1)){this.origin=a;
this.direction=b}set(a,b){this.origin.copy(a);this.direction.copy(b);return this}copy(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this}at(a,b){return b.copy(this.origin).addScaledVector(this.direction,a)}lookAt(a){this.direction.copy(a).sub(this.origin).normalize();return this}recast(a){this.origin.copy(this.at(a,zd));return this}closestPointToPoint(a,b){b.subVectors(a,this.origin);a=b.dot(this.direction);return 0>a?b.copy(this.origin):b.copy(this.origin).addScaledVector(this.direction,
a)}distanceToPoint(a){return Math.sqrt(this.distanceSqToPoint(a))}distanceSqToPoint(a){const b=zd.subVectors(a,this.origin).dot(this.direction);if(0>b)return this.origin.distanceToSquared(a);zd.copy(this.origin).addScaledVector(this.direction,b);return zd.distanceToSquared(a)}distanceSqToSegment(a,b,d,l){ai.copy(a).add(b).multiplyScalar(.5);Jg.copy(b).sub(a).normalize();Td.copy(this.origin).sub(ai);var q=.5*a.distanceTo(b),y=-this.direction.dot(Jg);const A=Td.dot(this.direction),D=-Td.dot(Jg),F=Td.lengthSq(),
G=Math.abs(1-y*y);let M;0<G?(a=y*D-A,b=y*A-D,M=q*G,0<=a?b>=-M?b<=M?(q=1/G,a*=q,b*=q,y=a*(a+y*b+2*A)+b*(y*a+b+2*D)+F):(b=q,a=Math.max(0,-(y*b+A)),y=-a*a+b*(b+2*D)+F):(b=-q,a=Math.max(0,-(y*b+A)),y=-a*a+b*(b+2*D)+F):b<=-M?(a=Math.max(0,-(-y*q+A)),b=0<a?-q:Math.min(Math.max(-q,-D),q),y=-a*a+b*(b+2*D)+F):b<=M?(a=0,b=Math.min(Math.max(-q,-D),q),y=b*(b+2*D)+F):(a=Math.max(0,-(y*q+A)),b=0<a?q:Math.min(Math.max(-q,-D),q),y=-a*a+b*(b+2*D)+F)):(b=0<y?-q:q,a=Math.max(0,-(y*b+A)),y=-a*a+b*(b+2*D)+F);d&&d.copy(this.origin).addScaledVector(this.direction,
a);l&&l.copy(ai).addScaledVector(Jg,b);return y}intersectSphere(a,b){zd.subVectors(a.center,this.origin);var d=zd.dot(this.direction),l=zd.dot(zd)-d*d;a=a.radius*a.radius;if(l>a)return null;a=Math.sqrt(a-l);l=d-a;d+=a;return 0>d?null:0>l?this.at(d,b):this.at(l,b)}intersectsSphere(a){return this.distanceSqToPoint(a.center)<=a.radius*a.radius}distanceToPlane(a){const b=a.normal.dot(this.direction);if(0===b)return 0===a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;
return 0<=a?a:null}intersectPlane(a,b){a=this.distanceToPlane(a);return null===a?null:this.at(a,b)}intersectsPlane(a){const b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1}intersectBox(a,b){let d;var l=1/this.direction.x;var q=1/this.direction.y;const y=1/this.direction.z,A=this.origin;0<=l?(d=(a.min.x-A.x)*l,l*=a.max.x-A.x):(d=(a.max.x-A.x)*l,l*=a.min.x-A.x);if(0<=q){var D=(a.min.y-A.y)*q;q*=a.max.y-A.y}else D=(a.max.y-A.y)*q,q*=a.min.y-A.y;if(d>q||D>l)return null;
if(D>d||isNaN(d))d=D;if(q<l||isNaN(l))l=q;0<=y?(D=(a.min.z-A.z)*y,a=(a.max.z-A.z)*y):(D=(a.max.z-A.z)*y,a=(a.min.z-A.z)*y);if(d>a||D>l)return null;if(D>d||d!==d)d=D;if(a<l||l!==l)l=a;return 0>l?null:this.at(0<=d?d:l,b)}intersectsBox(a){return null!==this.intersectBox(a,zd)}intersectTriangle(a,b,d,l,q){bi.subVectors(b,a);Kg.subVectors(d,a);ci.crossVectors(bi,Kg);b=this.direction.dot(ci);if(0<b){if(l)return null;l=1}else if(0>b)l=-1,b=-b;else return null;Td.subVectors(this.origin,a);a=l*this.direction.dot(Kg.crossVectors(Td,
Kg));if(0>a)return null;d=l*this.direction.dot(bi.cross(Td));if(0>d||a+d>b)return null;a=-l*Td.dot(ci);return 0>a?null:this.at(a/b,q)}applyMatrix4(a){this.origin.applyMatrix4(a);this.direction.transformDirection(a);return this}equals(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Fb{constructor(){Fb.prototype.isMatrix4=!0;this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(a,b,d,l,q,y,A,D,F,G,M,N,P,T,S,L){const U=this.elements;
U[0]=a;U[4]=b;U[8]=d;U[12]=l;U[1]=q;U[5]=y;U[9]=A;U[13]=D;U[2]=F;U[6]=G;U[10]=M;U[14]=N;U[3]=P;U[7]=T;U[11]=S;U[15]=L;return this}identity(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this}clone(){return(new Fb).fromArray(this.elements)}copy(a){const b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return this}copyPosition(a){const b=this.elements;
a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this}setFromMatrix3(a){a=a.elements;this.set(a[0],a[3],a[6],0,a[1],a[4],a[7],0,a[2],a[5],a[8],0,0,0,0,1);return this}extractBasis(a,b,d){a.setFromMatrixColumn(this,0);b.setFromMatrixColumn(this,1);d.setFromMatrixColumn(this,2);return this}makeBasis(a,b,d){this.set(a.x,b.x,d.x,0,a.y,b.y,d.y,0,a.z,b.z,d.z,0,0,0,0,1);return this}extractRotation(a){const b=this.elements,d=a.elements,l=1/Te.setFromMatrixColumn(a,0).length(),q=1/Te.setFromMatrixColumn(a,
1).length();a=1/Te.setFromMatrixColumn(a,2).length();b[0]=d[0]*l;b[1]=d[1]*l;b[2]=d[2]*l;b[3]=0;b[4]=d[4]*q;b[5]=d[5]*q;b[6]=d[6]*q;b[7]=0;b[8]=d[8]*a;b[9]=d[9]*a;b[10]=d[10]*a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this}makeRotationFromEuler(a){const b=this.elements;var d=a.x,l=a.y,q=a.z;const y=Math.cos(d);d=Math.sin(d);const A=Math.cos(l);l=Math.sin(l);const D=Math.cos(q);q=Math.sin(q);if("XYZ"===a.order){a=y*D;var F=y*q,G=d*D,M=d*q;b[0]=A*D;b[4]=-A*q;b[8]=l;b[1]=F+G*l;b[5]=a-M*l;b[9]=
-d*A;b[2]=M-a*l;b[6]=G+F*l;b[10]=y*A}else"YXZ"===a.order?(a=A*D,F=A*q,G=l*D,M=l*q,b[0]=a+M*d,b[4]=G*d-F,b[8]=y*l,b[1]=y*q,b[5]=y*D,b[9]=-d,b[2]=F*d-G,b[6]=M+a*d,b[10]=y*A):"ZXY"===a.order?(a=A*D,F=A*q,G=l*D,M=l*q,b[0]=a-M*d,b[4]=-y*q,b[8]=G+F*d,b[1]=F+G*d,b[5]=y*D,b[9]=M-a*d,b[2]=-y*l,b[6]=d,b[10]=y*A):"ZYX"===a.order?(a=y*D,F=y*q,G=d*D,M=d*q,b[0]=A*D,b[4]=G*l-F,b[8]=a*l+M,b[1]=A*q,b[5]=M*l+a,b[9]=F*l-G,b[2]=-l,b[6]=d*A,b[10]=y*A):"YZX"===a.order?(a=y*A,F=y*l,G=d*A,M=d*l,b[0]=A*D,b[4]=M-a*q,b[8]=
G*q+F,b[1]=q,b[5]=y*D,b[9]=-d*D,b[2]=-l*D,b[6]=F*q+G,b[10]=a-M*q):"XZY"===a.order&&(a=y*A,F=y*l,G=d*A,M=d*l,b[0]=A*D,b[4]=-q,b[8]=l*D,b[1]=a*q+M,b[5]=y*D,b[9]=F*q-G,b[2]=G*q-F,b[6]=d*D,b[10]=M*q+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this}makeRotationFromQuaternion(a){return this.compose(fl,a,gl)}lookAt(a,b,d){const l=this.elements;Ic.subVectors(a,b);0===Ic.lengthSq()&&(Ic.z=1);Ic.normalize();Ud.crossVectors(d,Ic);0===Ud.lengthSq()&&(1===Math.abs(d.z)?Ic.x+=1E-4:Ic.z+=1E-4,
Ic.normalize(),Ud.crossVectors(d,Ic));Ud.normalize();Lg.crossVectors(Ic,Ud);l[0]=Ud.x;l[4]=Lg.x;l[8]=Ic.x;l[1]=Ud.y;l[5]=Lg.y;l[9]=Ic.y;l[2]=Ud.z;l[6]=Lg.z;l[10]=Ic.z;return this}multiply(a){return this.multiplyMatrices(this,a)}premultiply(a){return this.multiplyMatrices(a,this)}multiplyMatrices(a,b){var d=a.elements,l=b.elements;b=this.elements;a=d[0];const q=d[4],y=d[8],A=d[12],D=d[1],F=d[5],G=d[9],M=d[13],N=d[2],P=d[6],T=d[10],S=d[14],L=d[3],U=d[7],ma=d[11];d=d[15];const ba=l[0],na=l[4],sa=l[8],
ja=l[12],Ga=l[1],oa=l[5],wa=l[9],ya=l[13],xa=l[2],Va=l[6],La=l[10],Ra=l[14],Na=l[3],cb=l[7],ob=l[11];l=l[15];b[0]=a*ba+q*Ga+y*xa+A*Na;b[4]=a*na+q*oa+y*Va+A*cb;b[8]=a*sa+q*wa+y*La+A*ob;b[12]=a*ja+q*ya+y*Ra+A*l;b[1]=D*ba+F*Ga+G*xa+M*Na;b[5]=D*na+F*oa+G*Va+M*cb;b[9]=D*sa+F*wa+G*La+M*ob;b[13]=D*ja+F*ya+G*Ra+M*l;b[2]=N*ba+P*Ga+T*xa+S*Na;b[6]=N*na+P*oa+T*Va+S*cb;b[10]=N*sa+P*wa+T*La+S*ob;b[14]=N*ja+P*ya+T*Ra+S*l;b[3]=L*ba+U*Ga+ma*xa+d*Na;b[7]=L*na+U*oa+ma*Va+d*cb;b[11]=L*sa+U*wa+ma*La+d*ob;b[15]=L*ja+U*
ya+ma*Ra+d*l;return this}multiplyScalar(a){const b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this}determinant(){const a=this.elements,b=a[0],d=a[4],l=a[8],q=a[12],y=a[1],A=a[5],D=a[9],F=a[13],G=a[2],M=a[6],N=a[10],P=a[14];return a[3]*(+q*D*M-l*F*M-q*A*N+d*F*N+l*A*P-d*D*P)+a[7]*(+b*D*P-b*F*N+q*y*N-l*y*P+l*F*G-q*D*G)+a[11]*(+b*F*M-b*A*P-q*y*M+d*y*P+q*A*G-d*F*G)+a[15]*(-l*A*G-b*D*M+b*A*N+
l*y*M-d*y*N+d*D*G)}transpose(){const a=this.elements;let b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this}setPosition(a,b,d){const l=this.elements;a.isVector3?(l[12]=a.x,l[13]=a.y,l[14]=a.z):(l[12]=a,l[13]=b,l[14]=d);return this}invert(){const a=this.elements,b=a[0],d=a[1],l=a[2],q=a[3],y=a[4],A=a[5],D=a[6],F=a[7],G=a[8],M=a[9],N=a[10],P=a[11],T=a[12],S=a[13],L=a[14],U=a[15],ma=M*L*
F-S*N*F+S*D*P-A*L*P-M*D*U+A*N*U,ba=T*N*F-G*L*F-T*D*P+y*L*P+G*D*U-y*N*U,na=G*S*F-T*M*F+T*A*P-y*S*P-G*A*U+y*M*U,sa=T*M*D-G*S*D-T*A*N+y*S*N+G*A*L-y*M*L;var ja=b*ma+d*ba+l*na+q*sa;if(0===ja)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);ja=1/ja;a[0]=ma*ja;a[1]=(S*N*q-M*L*q-S*l*P+d*L*P+M*l*U-d*N*U)*ja;a[2]=(A*L*q-S*D*q+S*l*F-d*L*F-A*l*U+d*D*U)*ja;a[3]=(M*D*q-A*N*q-M*l*F+d*N*F+A*l*P-d*D*P)*ja;a[4]=ba*ja;a[5]=(G*L*q-T*N*q+T*l*P-b*L*P-G*l*U+b*N*U)*ja;a[6]=(T*D*q-y*L*q-T*l*F+b*L*F+y*l*U-b*D*U)*ja;a[7]=(y*
N*q-G*D*q+G*l*F-b*N*F-y*l*P+b*D*P)*ja;a[8]=na*ja;a[9]=(T*M*q-G*S*q-T*d*P+b*S*P+G*d*U-b*M*U)*ja;a[10]=(y*S*q-T*A*q+T*d*F-b*S*F-y*d*U+b*A*U)*ja;a[11]=(G*A*q-y*M*q-G*d*F+b*M*F+y*d*P-b*A*P)*ja;a[12]=sa*ja;a[13]=(G*S*l-T*M*l+T*d*N-b*S*N-G*d*L+b*M*L)*ja;a[14]=(T*A*l-y*S*l-T*d*D+b*S*D+y*d*L-b*A*L)*ja;a[15]=(y*M*l-G*A*l+G*d*D-b*M*D-y*d*N+b*A*N)*ja;return this}scale(a){const b=this.elements,d=a.x,l=a.y;a=a.z;b[0]*=d;b[4]*=l;b[8]*=a;b[1]*=d;b[5]*=l;b[9]*=a;b[2]*=d;b[6]*=l;b[10]*=a;b[3]*=d;b[7]*=l;b[11]*=a;
return this}getMaxScaleOnAxis(){const a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))}makeTranslation(a,b,d){this.set(1,0,0,a,0,1,0,b,0,0,1,d,0,0,0,1);return this}makeRotationX(a){const b=Math.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this}makeRotationY(a){const b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this}makeRotationZ(a){const b=Math.cos(a);a=
Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this}makeRotationAxis(a,b){const d=Math.cos(b);b=Math.sin(b);const l=1-d,q=a.x,y=a.y;a=a.z;const A=l*q,D=l*y;this.set(A*q+d,A*y-b*a,A*a+b*y,0,A*y+b*a,D*y+d,D*a-b*q,0,A*a-b*y,D*a+b*q,l*a*a+d,0,0,0,0,1);return this}makeScale(a,b,d){this.set(a,0,0,0,0,b,0,0,0,0,d,0,0,0,0,1);return this}makeShear(a,b,d,l,q,y){this.set(1,d,q,0,a,1,y,0,b,l,1,0,0,0,0,1);return this}compose(a,b,d){const l=this.elements;var q=b._x,y=b._y,A=b._z,D=b._w,F=q+q,G=y+
y,M=A+A;b=q*F;const N=q*G;q*=M;const P=y*G;y*=M;A*=M;F*=D;G*=D;D*=M;M=d.x;const T=d.y;d=d.z;l[0]=(1-(P+A))*M;l[1]=(N+D)*M;l[2]=(q-G)*M;l[3]=0;l[4]=(N-D)*T;l[5]=(1-(b+A))*T;l[6]=(y+F)*T;l[7]=0;l[8]=(q+G)*d;l[9]=(y-F)*d;l[10]=(1-(b+P))*d;l[11]=0;l[12]=a.x;l[13]=a.y;l[14]=a.z;l[15]=1;return this}decompose(a,b,d){var l=this.elements;let q=Te.set(l[0],l[1],l[2]).length();const y=Te.set(l[4],l[5],l[6]).length(),A=Te.set(l[8],l[9],l[10]).length();0>this.determinant()&&(q=-q);a.x=l[12];a.y=l[13];a.z=l[14];
sc.copy(this);a=1/q;l=1/y;const D=1/A;sc.elements[0]*=a;sc.elements[1]*=a;sc.elements[2]*=a;sc.elements[4]*=l;sc.elements[5]*=l;sc.elements[6]*=l;sc.elements[8]*=D;sc.elements[9]*=D;sc.elements[10]*=D;b.setFromRotationMatrix(sc);d.x=q;d.y=y;d.z=A;return this}makePerspective(a,b,d,l,q,y){const A=this.elements;A[0]=2*q/(b-a);A[4]=0;A[8]=(b+a)/(b-a);A[12]=0;A[1]=0;A[5]=2*q/(d-l);A[9]=(d+l)/(d-l);A[13]=0;A[2]=0;A[6]=0;A[10]=-(y+q)/(y-q);A[14]=-2*y*q/(y-q);A[3]=0;A[7]=0;A[11]=-1;A[15]=0;return this}makeOrthographic(a,
b,d,l,q,y){const A=this.elements,D=1/(b-a),F=1/(d-l),G=1/(y-q);A[0]=2*D;A[4]=0;A[8]=0;A[12]=-((b+a)*D);A[1]=0;A[5]=2*F;A[9]=0;A[13]=-((d+l)*F);A[2]=0;A[6]=0;A[10]=-2*G;A[14]=-((y+q)*G);A[3]=0;A[7]=0;A[11]=0;A[15]=1;return this}equals(a){const b=this.elements;a=a.elements;for(let d=0;16>d;d++)if(b[d]!==a[d])return!1;return!0}fromArray(a,b=0){for(let d=0;16>d;d++)this.elements[d]=a[d+b];return this}toArray(a=[],b=0){const d=this.elements;a[b]=d[0];a[b+1]=d[1];a[b+2]=d[2];a[b+3]=d[3];a[b+4]=d[4];a[b+
5]=d[5];a[b+6]=d[6];a[b+7]=d[7];a[b+8]=d[8];a[b+9]=d[9];a[b+10]=d[10];a[b+11]=d[11];a[b+12]=d[12];a[b+13]=d[13];a[b+14]=d[14];a[b+15]=d[15];return a}}const Te=new aa,sc=new Fb,fl=new aa(0,0,0),gl=new aa(1,1,1),Ud=new aa,Lg=new aa,Ic=new aa,gj=new Fb,hj=new lb;class Mg{constructor(a=0,b=0,d=0,l=Mg.DEFAULT_ORDER){this.isEuler=!0;this._x=a;this._y=b;this._z=d;this._order=l}get x(){return this._x}set x(a){this._x=a;this._onChangeCallback()}get y(){return this._y}set y(a){this._y=a;this._onChangeCallback()}get z(){return this._z}set z(a){this._z=
a;this._onChangeCallback()}get order(){return this._order}set order(a){this._order=a;this._onChangeCallback()}set(a,b,d,l=this._order){this._x=a;this._y=b;this._z=d;this._order=l;this._onChangeCallback();return this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this._onChangeCallback();return this}setFromRotationMatrix(a,b=this._order,d=!0){var l=a.elements;a=l[0];const q=l[4],y=l[8],A=l[1],D=l[5],F=l[9],
G=l[2],M=l[6];l=l[10];switch(b){case "XYZ":this._y=Math.asin(n(y,-1,1));.9999999>Math.abs(y)?(this._x=Math.atan2(-F,l),this._z=Math.atan2(-q,a)):(this._x=Math.atan2(M,D),this._z=0);break;case "YXZ":this._x=Math.asin(-n(F,-1,1));.9999999>Math.abs(F)?(this._y=Math.atan2(y,l),this._z=Math.atan2(A,D)):(this._y=Math.atan2(-G,a),this._z=0);break;case "ZXY":this._x=Math.asin(n(M,-1,1));.9999999>Math.abs(M)?(this._y=Math.atan2(-G,l),this._z=Math.atan2(-q,D)):(this._y=0,this._z=Math.atan2(A,a));break;case "ZYX":this._y=
Math.asin(-n(G,-1,1));.9999999>Math.abs(G)?(this._x=Math.atan2(M,l),this._z=Math.atan2(A,a)):(this._x=0,this._z=Math.atan2(-q,D));break;case "YZX":this._z=Math.asin(n(A,-1,1));.9999999>Math.abs(A)?(this._x=Math.atan2(-F,D),this._y=Math.atan2(-G,a)):(this._x=0,this._y=Math.atan2(y,l));break;case "XZY":this._z=Math.asin(-n(q,-1,1));.9999999>Math.abs(q)?(this._x=Math.atan2(M,D),this._y=Math.atan2(y,a)):(this._x=Math.atan2(-F,l),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+
b)}this._order=b;!0===d&&this._onChangeCallback();return this}setFromQuaternion(a,b,d){gj.makeRotationFromQuaternion(a);return this.setFromRotationMatrix(gj,b,d)}setFromVector3(a,b=this._order){return this.set(a.x,a.y,a.z,b)}reorder(a){hj.setFromEuler(this);return this.setFromQuaternion(hj,a)}equals(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order}fromArray(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this._onChangeCallback();return this}toArray(a=
[],b=0){a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._order;return a}_onChange(a){this._onChangeCallback=a;return this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x;yield this._y;yield this._z;yield this._order}}Mg.DEFAULT_ORDER="XYZ";class ng{constructor(){this.mask=1}set(a){this.mask=(1<<a|0)>>>0}enable(a){this.mask=this.mask|1<<a|0}enableAll(){this.mask=-1}toggle(a){this.mask^=1<<a|0}disable(a){this.mask&=~(1<<a|0)}disableAll(){this.mask=0}test(a){return 0!==(this.mask&a.mask)}isEnabled(a){return 0!==
(this.mask&(1<<a|0))}}let hl=0;const ij=new aa,Ue=new lb,Ad=new Fb,Ng=new aa,Rf=new aa,il=new aa,jl=new lb,jj=new aa(1,0,0),kj=new aa(0,1,0),lj=new aa(0,0,1),kl={type:"added"},mj={type:"removed"};class bc extends Uc{constructor(){super();this.isObject3D=!0;Object.defineProperty(this,"id",{value:hl++});this.uuid=p();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=bc.DEFAULT_UP.clone();const a=new aa,b=new Mg,d=new lb,l=new aa(1,1,1);b._onChange(function(){d.setFromEuler(b,
!1)});d._onChange(function(){b.setFromQuaternion(d,void 0,!1)});Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:a},rotation:{configurable:!0,enumerable:!0,value:b},quaternion:{configurable:!0,enumerable:!0,value:d},scale:{configurable:!0,enumerable:!0,value:l},modelViewMatrix:{value:new Fb},normalMatrix:{value:new hb}});this.matrix=new Fb;this.matrixWorld=new Fb;this.matrixAutoUpdate=bc.DEFAULT_MATRIX_AUTO_UPDATE;this.matrixWorldNeedsUpdate=!1;this.matrixWorldAutoUpdate=
bc.DEFAULT_MATRIX_WORLD_AUTO_UPDATE;this.layers=new ng;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.animations=[];this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(a){this.matrixAutoUpdate&&this.updateMatrix();this.matrix.premultiply(a);this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(a){this.quaternion.premultiply(a);return this}setRotationFromAxisAngle(a,b){this.quaternion.setFromAxisAngle(a,b)}setRotationFromEuler(a){this.quaternion.setFromEuler(a,
!0)}setRotationFromMatrix(a){this.quaternion.setFromRotationMatrix(a)}setRotationFromQuaternion(a){this.quaternion.copy(a)}rotateOnAxis(a,b){Ue.setFromAxisAngle(a,b);this.quaternion.multiply(Ue);return this}rotateOnWorldAxis(a,b){Ue.setFromAxisAngle(a,b);this.quaternion.premultiply(Ue);return this}rotateX(a){return this.rotateOnAxis(jj,a)}rotateY(a){return this.rotateOnAxis(kj,a)}rotateZ(a){return this.rotateOnAxis(lj,a)}translateOnAxis(a,b){ij.copy(a).applyQuaternion(this.quaternion);this.position.add(ij.multiplyScalar(b));
return this}translateX(a){return this.translateOnAxis(jj,a)}translateY(a){return this.translateOnAxis(kj,a)}translateZ(a){return this.translateOnAxis(lj,a)}localToWorld(a){this.updateWorldMatrix(!0,!1);return a.applyMatrix4(this.matrixWorld)}worldToLocal(a){this.updateWorldMatrix(!0,!1);return a.applyMatrix4(Ad.copy(this.matrixWorld).invert())}lookAt(a,b,d){a.isVector3?Ng.copy(a):Ng.set(a,b,d);a=this.parent;this.updateWorldMatrix(!0,!1);Rf.setFromMatrixPosition(this.matrixWorld);this.isCamera||this.isLight?
Ad.lookAt(Rf,Ng,this.up):Ad.lookAt(Ng,Rf,this.up);this.quaternion.setFromRotationMatrix(Ad);a&&(Ad.extractRotation(a.matrixWorld),Ue.setFromRotationMatrix(Ad),this.quaternion.premultiply(Ue.invert()))}add(a){if(1<arguments.length){for(let b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this;a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,this.children.push(a),a.dispatchEvent(kl)):
console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a);return this}remove(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);return this}b=this.children.indexOf(a);-1!==b&&(a.parent=null,this.children.splice(b,1),a.dispatchEvent(mj));return this}removeFromParent(){const a=this.parent;null!==a&&a.remove(this);return this}clear(){for(let a=0;a<this.children.length;a++){const b=this.children[a];b.parent=null;b.dispatchEvent(mj)}this.children.length=
0;return this}attach(a){this.updateWorldMatrix(!0,!1);Ad.copy(this.matrixWorld).invert();null!==a.parent&&(a.parent.updateWorldMatrix(!0,!1),Ad.multiply(a.parent.matrixWorld));a.applyMatrix4(Ad);this.add(a);a.updateWorldMatrix(!1,!0);return this}getObjectById(a){return this.getObjectByProperty("id",a)}getObjectByName(a){return this.getObjectByProperty("name",a)}getObjectByProperty(a,b){if(this[a]===b)return this;for(let d=0,l=this.children.length;d<l;d++){const q=this.children[d].getObjectByProperty(a,
b);if(void 0!==q)return q}}getObjectsByProperty(a,b){let d=[];this[a]===b&&d.push(this);for(let l=0,q=this.children.length;l<q;l++){const y=this.children[l].getObjectsByProperty(a,b);0<y.length&&(d=d.concat(y))}return d}getWorldPosition(a){this.updateWorldMatrix(!0,!1);return a.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(a){this.updateWorldMatrix(!0,!1);this.matrixWorld.decompose(Rf,a,il);return a}getWorldScale(a){this.updateWorldMatrix(!0,!1);this.matrixWorld.decompose(Rf,jl,a);return a}getWorldDirection(a){this.updateWorldMatrix(!0,
!1);const b=this.matrixWorld.elements;return a.set(b[8],b[9],b[10]).normalize()}raycast(){}traverse(a){a(this);const b=this.children;for(let d=0,l=b.length;d<l;d++)b[d].traverse(a)}traverseVisible(a){if(!1!==this.visible){a(this);var b=this.children;for(let d=0,l=b.length;d<l;d++)b[d].traverseVisible(a)}}traverseAncestors(a){const b=this.parent;null!==b&&(a(b),b.traverseAncestors(a))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(a){this.matrixAutoUpdate&&
this.updateMatrix();if(this.matrixWorldNeedsUpdate||a)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;const b=this.children;for(let d=0,l=b.length;d<l;d++){const q=b[d];!0!==q.matrixWorldAutoUpdate&&!0!==a||q.updateMatrixWorld(a)}}updateWorldMatrix(a,b){const d=this.parent;!0===a&&null!==d&&!0===d.matrixWorldAutoUpdate&&d.updateWorldMatrix(!0,!1);this.matrixAutoUpdate&&this.updateMatrix();
null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix);if(!0===b){a=this.children;for(let l=0,q=a.length;l<q;l++)b=a[l],!0===b.matrixWorldAutoUpdate&&b.updateWorldMatrix(!1,!0)}}toJSON(a){function b(D,F){void 0===D[F.uuid]&&(D[F.uuid]=F.toJSON(a));return F.uuid}function d(D){const F=[];for(const G in D){const M=D[G];delete M.metadata;F.push(M)}return F}var l=void 0===a||"string"===typeof a;const q={};l&&(a={geometries:{},materials:{},
textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},q.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const y={};y.uuid=this.uuid;y.type=this.type;""!==this.name&&(y.name=this.name);!0===this.castShadow&&(y.castShadow=!0);!0===this.receiveShadow&&(y.receiveShadow=!0);!1===this.visible&&(y.visible=!1);!1===this.frustumCulled&&(y.frustumCulled=!1);0!==this.renderOrder&&(y.renderOrder=this.renderOrder);0<Object.keys(this.userData).length&&(y.userData=this.userData);
y.layers=this.layers.mask;y.matrix=this.matrix.toArray();!1===this.matrixAutoUpdate&&(y.matrixAutoUpdate=!1);this.isInstancedMesh&&(y.type="InstancedMesh",y.count=this.count,y.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(y.instanceColor=this.instanceColor.toJSON()));if(this.isScene)this.background&&(this.background.isColor?y.background=this.background.toJSON():this.background.isTexture&&(y.background=this.background.toJSON(a).uuid)),this.environment&&this.environment.isTexture&&
!0!==this.environment.isRenderTargetTexture&&(y.environment=this.environment.toJSON(a).uuid);else if(this.isMesh||this.isLine||this.isPoints){y.geometry=b(a.geometries,this.geometry);var A=this.geometry.parameters;if(void 0!==A&&void 0!==A.shapes)if(A=A.shapes,Array.isArray(A))for(let D=0,F=A.length;D<F;D++)b(a.shapes,A[D]);else b(a.shapes,A)}this.isSkinnedMesh&&(y.bindMode=this.bindMode,y.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(b(a.skeletons,this.skeleton),y.skeleton=this.skeleton.uuid));
if(void 0!==this.material)if(Array.isArray(this.material)){A=[];for(let D=0,F=this.material.length;D<F;D++)A.push(b(a.materials,this.material[D]));y.material=A}else y.material=b(a.materials,this.material);if(0<this.children.length)for(y.children=[],A=0;A<this.children.length;A++)y.children.push(this.children[A].toJSON(a).object);if(0<this.animations.length)for(y.animations=[],A=0;A<this.animations.length;A++)y.animations.push(b(a.animations,this.animations[A]));if(l){l=d(a.geometries);A=d(a.materials);
const D=d(a.textures),F=d(a.images),G=d(a.shapes),M=d(a.skeletons),N=d(a.animations),P=d(a.nodes);0<l.length&&(q.geometries=l);0<A.length&&(q.materials=A);0<D.length&&(q.textures=D);0<F.length&&(q.images=F);0<G.length&&(q.shapes=G);0<M.length&&(q.skeletons=M);0<N.length&&(q.animations=N);0<P.length&&(q.nodes=P)}q.object=y;return q}clone(a){return(new this.constructor).copy(this,a)}copy(a,b=!0){this.name=a.name;this.up.copy(a.up);this.position.copy(a.position);this.rotation.order=a.rotation.order;
this.quaternion.copy(a.quaternion);this.scale.copy(a.scale);this.matrix.copy(a.matrix);this.matrixWorld.copy(a.matrixWorld);this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate;this.matrixWorldAutoUpdate=a.matrixWorldAutoUpdate;this.layers.mask=a.layers.mask;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;this.userData=JSON.parse(JSON.stringify(a.userData));
if(!0===b)for(b=0;b<a.children.length;b++)this.add(a.children[b].clone());return this}}bc.DEFAULT_UP=new aa(0,1,0);bc.DEFAULT_MATRIX_AUTO_UPDATE=!0;bc.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const cd=new aa,Bd=new aa,di=new aa,Cd=new aa,Ve=new aa,We=new aa,nj=new aa,ei=new aa,fi=new aa,gi=new aa;class Wc{constructor(a=new aa,b=new aa,d=new aa){this.a=a;this.b=b;this.c=d}static getNormal(a,b,d,l){l.subVectors(d,b);cd.subVectors(a,b);l.cross(cd);a=l.lengthSq();return 0<a?l.multiplyScalar(1/Math.sqrt(a)):
l.set(0,0,0)}static getBarycoord(a,b,d,l,q){cd.subVectors(l,b);Bd.subVectors(d,b);di.subVectors(a,b);a=cd.dot(cd);b=cd.dot(Bd);d=cd.dot(di);var y=Bd.dot(Bd);l=Bd.dot(di);var A=a*y-b*b;if(0===A)return q.set(-2,-1,-1);A=1/A;y=(y*d-b*l)*A;a=(a*l-b*d)*A;return q.set(1-y-a,a,y)}static containsPoint(a,b,d,l){this.getBarycoord(a,b,d,l,Cd);return 0<=Cd.x&&0<=Cd.y&&1>=Cd.x+Cd.y}static getUV(a,b,d,l,q,y,A,D){this.getBarycoord(a,b,d,l,Cd);D.set(0,0);D.addScaledVector(q,Cd.x);D.addScaledVector(y,Cd.y);D.addScaledVector(A,
Cd.z);return D}static isFrontFacing(a,b,d,l){cd.subVectors(d,b);Bd.subVectors(a,b);return 0>cd.cross(Bd).dot(l)?!0:!1}set(a,b,d){this.a.copy(a);this.b.copy(b);this.c.copy(d);return this}setFromPointsAndIndices(a,b,d,l){this.a.copy(a[b]);this.b.copy(a[d]);this.c.copy(a[l]);return this}setFromAttributeAndIndices(a,b,d,l){this.a.fromBufferAttribute(a,b);this.b.fromBufferAttribute(a,d);this.c.fromBufferAttribute(a,l);return this}clone(){return(new this.constructor).copy(this)}copy(a){this.a.copy(a.a);
this.b.copy(a.b);this.c.copy(a.c);return this}getArea(){cd.subVectors(this.c,this.b);Bd.subVectors(this.a,this.b);return.5*cd.cross(Bd).length()}getMidpoint(a){return a.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(a){return Wc.getNormal(this.a,this.b,this.c,a)}getPlane(a){return a.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(a,b){return Wc.getBarycoord(a,this.a,this.b,this.c,b)}getUV(a,b,d,l,q){return Wc.getUV(a,this.a,this.b,this.c,b,d,l,q)}containsPoint(a){return Wc.containsPoint(a,
this.a,this.b,this.c)}isFrontFacing(a){return Wc.isFrontFacing(this.a,this.b,this.c,a)}intersectsBox(a){return a.intersectsTriangle(this)}closestPointToPoint(a,b){const d=this.a;var l=this.b,q=this.c;Ve.subVectors(l,d);We.subVectors(q,d);ei.subVectors(a,d);var y=Ve.dot(ei),A=We.dot(ei);if(0>=y&&0>=A)return b.copy(d);fi.subVectors(a,l);const D=Ve.dot(fi),F=We.dot(fi);if(0<=D&&F<=D)return b.copy(l);var G=y*F-D*A;if(0>=G&&0<=y&&0>=D)return l=y/(y-D),b.copy(d).addScaledVector(Ve,l);gi.subVectors(a,q);
a=Ve.dot(gi);const M=We.dot(gi);if(0<=M&&a<=M)return b.copy(q);y=a*A-y*M;if(0>=y&&0<=A&&0>=M)return G=A/(A-M),b.copy(d).addScaledVector(We,G);A=D*M-a*F;if(0>=A&&0<=F-D&&0<=a-M)return nj.subVectors(q,l),G=(F-D)/(F-D+(a-M)),b.copy(l).addScaledVector(nj,G);q=1/(A+y+G);l=y*q;G*=q;return b.copy(d).addScaledVector(Ve,l).addScaledVector(We,G)}equals(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}}let ll=0;class Fc extends Uc{constructor(){super();this.isMaterial=!0;Object.defineProperty(this,
"id",{value:ll++});this.uuid=p();this.name="";this.type="Material";this.blending=1;this.side=0;this.vertexColors=!1;this.opacity=1;this.transparent=!1;this.blendSrc=204;this.blendDst=205;this.blendEquation=100;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=3;this.depthWrite=this.depthTest=!0;this.stencilWriteMask=255;this.stencilFunc=519;this.stencilRef=0;this.stencilFuncMask=255;this.stencilZPass=this.stencilZFail=this.stencilFail=7680;this.stencilWrite=!1;this.clippingPlanes=
null;this.clipShadows=this.clipIntersection=!1;this.shadowSide=null;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.forceSinglePass=this.premultipliedAlpha=this.alphaToCoverage=this.dithering=!1;this.toneMapped=this.visible=!0;this.userData={};this._alphaTest=this.version=0}get alphaTest(){return this._alphaTest}set alphaTest(a){0<this._alphaTest!==0<a&&this.version++;this._alphaTest=a}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(a){if(void 0!==
a)for(const b in a){const d=a[b];if(void 0===d){console.warn("THREE.Material: '"+b+"' parameter is undefined.");continue}const l=this[b];void 0===l?console.warn("THREE."+this.type+": '"+b+"' is not a property of this material."):l&&l.isColor?l.set(d):l&&l.isVector3&&d&&d.isVector3?l.copy(d):this[b]=d}}toJSON(a){function b(q){const y=[];for(const A in q){const D=q[A];delete D.metadata;y.push(D)}return y}var d=void 0===a||"string"===typeof a;d&&(a={textures:{},images:{}});const l={metadata:{version:4.5,
type:"Material",generator:"Material.toJSON"}};l.uuid=this.uuid;l.type=this.type;""!==this.name&&(l.name=this.name);this.color&&this.color.isColor&&(l.color=this.color.getHex());void 0!==this.roughness&&(l.roughness=this.roughness);void 0!==this.metalness&&(l.metalness=this.metalness);void 0!==this.sheen&&(l.sheen=this.sheen);this.sheenColor&&this.sheenColor.isColor&&(l.sheenColor=this.sheenColor.getHex());void 0!==this.sheenRoughness&&(l.sheenRoughness=this.sheenRoughness);this.emissive&&this.emissive.isColor&&
(l.emissive=this.emissive.getHex());this.emissiveIntensity&&1!==this.emissiveIntensity&&(l.emissiveIntensity=this.emissiveIntensity);this.specular&&this.specular.isColor&&(l.specular=this.specular.getHex());void 0!==this.specularIntensity&&(l.specularIntensity=this.specularIntensity);this.specularColor&&this.specularColor.isColor&&(l.specularColor=this.specularColor.getHex());void 0!==this.shininess&&(l.shininess=this.shininess);void 0!==this.clearcoat&&(l.clearcoat=this.clearcoat);void 0!==this.clearcoatRoughness&&
(l.clearcoatRoughness=this.clearcoatRoughness);this.clearcoatMap&&this.clearcoatMap.isTexture&&(l.clearcoatMap=this.clearcoatMap.toJSON(a).uuid);this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(l.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(a).uuid);this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(l.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(a).uuid,l.clearcoatNormalScale=this.clearcoatNormalScale.toArray());void 0!==this.iridescence&&(l.iridescence=
this.iridescence);void 0!==this.iridescenceIOR&&(l.iridescenceIOR=this.iridescenceIOR);void 0!==this.iridescenceThicknessRange&&(l.iridescenceThicknessRange=this.iridescenceThicknessRange);this.iridescenceMap&&this.iridescenceMap.isTexture&&(l.iridescenceMap=this.iridescenceMap.toJSON(a).uuid);this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(l.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(a).uuid);this.map&&this.map.isTexture&&(l.map=this.map.toJSON(a).uuid);this.matcap&&
this.matcap.isTexture&&(l.matcap=this.matcap.toJSON(a).uuid);this.alphaMap&&this.alphaMap.isTexture&&(l.alphaMap=this.alphaMap.toJSON(a).uuid);this.lightMap&&this.lightMap.isTexture&&(l.lightMap=this.lightMap.toJSON(a).uuid,l.lightMapIntensity=this.lightMapIntensity);this.aoMap&&this.aoMap.isTexture&&(l.aoMap=this.aoMap.toJSON(a).uuid,l.aoMapIntensity=this.aoMapIntensity);this.bumpMap&&this.bumpMap.isTexture&&(l.bumpMap=this.bumpMap.toJSON(a).uuid,l.bumpScale=this.bumpScale);this.normalMap&&this.normalMap.isTexture&&
(l.normalMap=this.normalMap.toJSON(a).uuid,l.normalMapType=this.normalMapType,l.normalScale=this.normalScale.toArray());this.displacementMap&&this.displacementMap.isTexture&&(l.displacementMap=this.displacementMap.toJSON(a).uuid,l.displacementScale=this.displacementScale,l.displacementBias=this.displacementBias);this.roughnessMap&&this.roughnessMap.isTexture&&(l.roughnessMap=this.roughnessMap.toJSON(a).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&(l.metalnessMap=this.metalnessMap.toJSON(a).uuid);
this.emissiveMap&&this.emissiveMap.isTexture&&(l.emissiveMap=this.emissiveMap.toJSON(a).uuid);this.specularMap&&this.specularMap.isTexture&&(l.specularMap=this.specularMap.toJSON(a).uuid);this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(l.specularIntensityMap=this.specularIntensityMap.toJSON(a).uuid);this.specularColorMap&&this.specularColorMap.isTexture&&(l.specularColorMap=this.specularColorMap.toJSON(a).uuid);this.envMap&&this.envMap.isTexture&&(l.envMap=this.envMap.toJSON(a).uuid,
void 0!==this.combine&&(l.combine=this.combine));void 0!==this.envMapIntensity&&(l.envMapIntensity=this.envMapIntensity);void 0!==this.reflectivity&&(l.reflectivity=this.reflectivity);void 0!==this.refractionRatio&&(l.refractionRatio=this.refractionRatio);this.gradientMap&&this.gradientMap.isTexture&&(l.gradientMap=this.gradientMap.toJSON(a).uuid);void 0!==this.transmission&&(l.transmission=this.transmission);this.transmissionMap&&this.transmissionMap.isTexture&&(l.transmissionMap=this.transmissionMap.toJSON(a).uuid);
void 0!==this.thickness&&(l.thickness=this.thickness);this.thicknessMap&&this.thicknessMap.isTexture&&(l.thicknessMap=this.thicknessMap.toJSON(a).uuid);void 0!==this.attenuationDistance&&Infinity!==this.attenuationDistance&&(l.attenuationDistance=this.attenuationDistance);void 0!==this.attenuationColor&&(l.attenuationColor=this.attenuationColor.getHex());void 0!==this.size&&(l.size=this.size);null!==this.shadowSide&&(l.shadowSide=this.shadowSide);void 0!==this.sizeAttenuation&&(l.sizeAttenuation=
this.sizeAttenuation);1!==this.blending&&(l.blending=this.blending);0!==this.side&&(l.side=this.side);this.vertexColors&&(l.vertexColors=!0);1>this.opacity&&(l.opacity=this.opacity);!0===this.transparent&&(l.transparent=this.transparent);l.depthFunc=this.depthFunc;l.depthTest=this.depthTest;l.depthWrite=this.depthWrite;l.colorWrite=this.colorWrite;l.stencilWrite=this.stencilWrite;l.stencilWriteMask=this.stencilWriteMask;l.stencilFunc=this.stencilFunc;l.stencilRef=this.stencilRef;l.stencilFuncMask=
this.stencilFuncMask;l.stencilFail=this.stencilFail;l.stencilZFail=this.stencilZFail;l.stencilZPass=this.stencilZPass;void 0!==this.rotation&&0!==this.rotation&&(l.rotation=this.rotation);!0===this.polygonOffset&&(l.polygonOffset=!0);0!==this.polygonOffsetFactor&&(l.polygonOffsetFactor=this.polygonOffsetFactor);0!==this.polygonOffsetUnits&&(l.polygonOffsetUnits=this.polygonOffsetUnits);void 0!==this.linewidth&&1!==this.linewidth&&(l.linewidth=this.linewidth);void 0!==this.dashSize&&(l.dashSize=this.dashSize);
void 0!==this.gapSize&&(l.gapSize=this.gapSize);void 0!==this.scale&&(l.scale=this.scale);!0===this.dithering&&(l.dithering=!0);0<this.alphaTest&&(l.alphaTest=this.alphaTest);!0===this.alphaToCoverage&&(l.alphaToCoverage=this.alphaToCoverage);!0===this.premultipliedAlpha&&(l.premultipliedAlpha=this.premultipliedAlpha);!0===this.forceSinglePass&&(l.forceSinglePass=this.forceSinglePass);!0===this.wireframe&&(l.wireframe=this.wireframe);1<this.wireframeLinewidth&&(l.wireframeLinewidth=this.wireframeLinewidth);
"round"!==this.wireframeLinecap&&(l.wireframeLinecap=this.wireframeLinecap);"round"!==this.wireframeLinejoin&&(l.wireframeLinejoin=this.wireframeLinejoin);!0===this.flatShading&&(l.flatShading=this.flatShading);!1===this.visible&&(l.visible=!1);!1===this.toneMapped&&(l.toneMapped=!1);!1===this.fog&&(l.fog=!1);0<Object.keys(this.userData).length&&(l.userData=this.userData);d&&(d=b(a.textures),a=b(a.images),0<d.length&&(l.textures=d),0<a.length&&(l.images=a));return l}clone(){return(new this.constructor).copy(this)}copy(a){this.name=
a.name;this.blending=a.blending;this.side=a.side;this.vertexColors=a.vertexColors;this.opacity=a.opacity;this.transparent=a.transparent;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=a.blendDstAlpha;this.blendEquationAlpha=a.blendEquationAlpha;this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;this.stencilWriteMask=a.stencilWriteMask;this.stencilFunc=a.stencilFunc;this.stencilRef=
a.stencilRef;this.stencilFuncMask=a.stencilFuncMask;this.stencilFail=a.stencilFail;this.stencilZFail=a.stencilZFail;this.stencilZPass=a.stencilZPass;this.stencilWrite=a.stencilWrite;const b=a.clippingPlanes;let d=null;if(null!==b){const l=b.length;d=Array(l);for(let q=0;q!==l;++q)d[q]=b[q].clone()}this.clippingPlanes=d;this.clipIntersection=a.clipIntersection;this.clipShadows=a.clipShadows;this.shadowSide=a.shadowSide;this.colorWrite=a.colorWrite;this.precision=a.precision;this.polygonOffset=a.polygonOffset;
this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.dithering=a.dithering;this.alphaTest=a.alphaTest;this.alphaToCoverage=a.alphaToCoverage;this.premultipliedAlpha=a.premultipliedAlpha;this.forceSinglePass=a.forceSinglePass;this.visible=a.visible;this.toneMapped=a.toneMapped;this.userData=JSON.parse(JSON.stringify(a.userData));return this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(a){!0===a&&this.version++}}const oj={aliceblue:15792383,
antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,
darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,
indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,
magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,
palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,
turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Mc={h:0,s:0,l:0},Og={h:0,s:0,l:0};class gb{constructor(a,b,d){this.isColor=!0;this.b=this.g=this.r=1;return void 0===b&&void 0===d?this.set(a):this.setRGB(a,b,d)}set(a){a&&a.isColor?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this}setScalar(a){this.b=this.g=this.r=a;return this}setHex(a,b="srgb"){a=Math.floor(a);this.r=(a>>16&255)/
255;this.g=(a>>8&255)/255;this.b=(a&255)/255;Ec.toWorkingColorSpace(this,b);return this}setRGB(a,b,d,l=Ec.workingColorSpace){this.r=a;this.g=b;this.b=d;Ec.toWorkingColorSpace(this,l);return this}setHSL(a,b,d,l=Ec.workingColorSpace){a=c(a,1);b=n(b,0,1);d=n(d,0,1);0===b?this.r=this.g=this.b=d:(b=.5>=d?d*(1+b):d+b-d*b,d=2*d-b,this.r=H(d,b,a+1/3),this.g=H(d,b,a),this.b=H(d,b,a-1/3));Ec.toWorkingColorSpace(this,l);return this}setStyle(a,b="srgb"){function d(y){void 0!==y&&1>parseFloat(y)&&console.warn("THREE.Color: Alpha component of "+
a+" will be ignored.")}var l;if(l=/^(\w+)\(([^\)]*)\)/.exec(a)){var q=l[2];switch(l[1]){case "rgb":case "rgba":if(l=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(q)){this.r=Math.min(255,parseInt(l[1],10))/255;this.g=Math.min(255,parseInt(l[2],10))/255;this.b=Math.min(255,parseInt(l[3],10))/255;Ec.toWorkingColorSpace(this,b);d(l[4]);break}if(l=/^\s*(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(q))this.r=Math.min(100,parseInt(l[1],10))/100,this.g=Math.min(100,
parseInt(l[2],10))/100,this.b=Math.min(100,parseInt(l[3],10))/100,Ec.toWorkingColorSpace(this,b),d(l[4]);break;case "hsl":case "hsla":if(l=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(q)){q=parseFloat(l[1])/360;const y=parseFloat(l[2])/100,A=parseFloat(l[3])/100;d(l[4]);return this.setHSL(q,y,A,b)}break;default:console.warn("THREE.Color: Unknown color model "+a)}}else if(l=/^#([A-Fa-f\d]+)$/.exec(a))l=l[1],q=l.length,3===q?(this.r=parseInt(l.charAt(0)+l.charAt(0),
16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,Ec.toWorkingColorSpace(this,b)):6===q?(this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,Ec.toWorkingColorSpace(this,b)):console.warn("THREE.Color: Invalid hex color "+a);else if(a&&0<a.length)return this.setColorName(a,b);return this}setColorName(a,b="srgb"){const d=oj[a.toLowerCase()];void 0!==d?this.setHex(d,
b):console.warn("THREE.Color: Unknown color "+a);return this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(a){this.r=a.r;this.g=a.g;this.b=a.b;return this}copySRGBToLinear(a){this.r=x(a.r);this.g=x(a.g);this.b=x(a.b);return this}copyLinearToSRGB(a){this.r=B(a.r);this.g=B(a.g);this.b=B(a.b);return this}convertSRGBToLinear(){this.copySRGBToLinear(this);return this}convertLinearToSRGB(){this.copyLinearToSRGB(this);return this}getHex(a="srgb"){Ec.fromWorkingColorSpace(Gc.copy(this),a);
return n(255*Gc.r,0,255)<<16^n(255*Gc.g,0,255)<<8^n(255*Gc.b,0,255)<<0}getHexString(a="srgb"){return("000000"+this.getHex(a).toString(16)).slice(-6)}getHSL(a,b=Ec.workingColorSpace){Ec.fromWorkingColorSpace(Gc.copy(this),b);b=Gc.r;const d=Gc.g,l=Gc.b,q=Math.max(b,d,l);var y=Math.min(b,d,l);let A;const D=(y+q)/2;if(y===q)y=A=0;else{const F=q-y;y=.5>=D?F/(q+y):F/(2-q-y);switch(q){case b:A=(d-l)/F+(d<l?6:0);break;case d:A=(l-b)/F+2;break;case l:A=(b-d)/F+4}A/=6}a.h=A;a.s=y;a.l=D;return a}getRGB(a,b=
Ec.workingColorSpace){Ec.fromWorkingColorSpace(Gc.copy(this),b);a.r=Gc.r;a.g=Gc.g;a.b=Gc.b;return a}getStyle(a="srgb"){Ec.fromWorkingColorSpace(Gc.copy(this),a);const b=Gc.r,d=Gc.g,l=Gc.b;return"srgb"!==a?`color(${a} ${b.toFixed(3)} ${d.toFixed(3)} ${l.toFixed(3)})`:`rgb(${255*b|0},${255*d|0},${255*l|0})`}offsetHSL(a,b,d){this.getHSL(Mc);Mc.h+=a;Mc.s+=b;Mc.l+=d;this.setHSL(Mc.h,Mc.s,Mc.l);return this}add(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this}addColors(a,b){this.r=a.r+b.r;this.g=a.g+b.g;
this.b=a.b+b.b;return this}addScalar(a){this.r+=a;this.g+=a;this.b+=a;return this}sub(a){this.r=Math.max(0,this.r-a.r);this.g=Math.max(0,this.g-a.g);this.b=Math.max(0,this.b-a.b);return this}multiply(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this}multiplyScalar(a){this.r*=a;this.g*=a;this.b*=a;return this}lerp(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this}lerpColors(a,b,d){this.r=a.r+(b.r-a.r)*d;this.g=a.g+(b.g-a.g)*d;this.b=a.b+(b.b-a.b)*d;return this}lerpHSL(a,
b){this.getHSL(Mc);a.getHSL(Og);a=e(Mc.h,Og.h,b);const d=e(Mc.s,Og.s,b);b=e(Mc.l,Og.l,b);this.setHSL(a,d,b);return this}equals(a){return a.r===this.r&&a.g===this.g&&a.b===this.b}fromArray(a,b=0){this.r=a[b];this.g=a[b+1];this.b=a[b+2];return this}toArray(a=[],b=0){a[b]=this.r;a[b+1]=this.g;a[b+2]=this.b;return a}fromBufferAttribute(a,b){this.r=a.getX(b);this.g=a.getY(b);this.b=a.getZ(b);return this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r;yield this.g;yield this.b}}const Gc=
new gb;gb.NAMES=oj;class Vd extends Fc{constructor(a){super();this.isMeshBasicMaterial=!0;this.type="MeshBasicMaterial";this.color=new gb(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.fog=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);
this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.fog=a.fog;return this}}const tc=
new aa,Pg=new za;class fc{constructor(a,b,d=!1){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0;this.name="";this.array=a;this.itemSize=b;this.count=void 0!==a?a.length/b:0;this.normalized=d;this.usage=35044;this.updateRange={offset:0,count:-1};this.version=0}onUploadCallback(){}set needsUpdate(a){!0===a&&this.version++}setUsage(a){this.usage=a;return this}copy(a){this.name=a.name;this.array=new a.array.constructor(a.array);
this.itemSize=a.itemSize;this.count=a.count;this.normalized=a.normalized;this.usage=a.usage;return this}copyAt(a,b,d){a*=this.itemSize;d*=b.itemSize;for(let l=0,q=this.itemSize;l<q;l++)this.array[a+l]=b.array[d+l];return this}copyArray(a){this.array.set(a);return this}applyMatrix3(a){if(2===this.itemSize)for(let b=0,d=this.count;b<d;b++)Pg.fromBufferAttribute(this,b),Pg.applyMatrix3(a),this.setXY(b,Pg.x,Pg.y);else if(3===this.itemSize)for(let b=0,d=this.count;b<d;b++)tc.fromBufferAttribute(this,b),
tc.applyMatrix3(a),this.setXYZ(b,tc.x,tc.y,tc.z);return this}applyMatrix4(a){for(let b=0,d=this.count;b<d;b++)tc.fromBufferAttribute(this,b),tc.applyMatrix4(a),this.setXYZ(b,tc.x,tc.y,tc.z);return this}applyNormalMatrix(a){for(let b=0,d=this.count;b<d;b++)tc.fromBufferAttribute(this,b),tc.applyNormalMatrix(a),this.setXYZ(b,tc.x,tc.y,tc.z);return this}transformDirection(a){for(let b=0,d=this.count;b<d;b++)tc.fromBufferAttribute(this,b),tc.transformDirection(a),this.setXYZ(b,tc.x,tc.y,tc.z);return this}set(a,
b=0){this.array.set(a,b);return this}getX(a){a=this.array[a*this.itemSize];this.normalized&&(a=g(a,this.array));return a}setX(a,b){this.normalized&&(b=r(b,this.array));this.array[a*this.itemSize]=b;return this}getY(a){a=this.array[a*this.itemSize+1];this.normalized&&(a=g(a,this.array));return a}setY(a,b){this.normalized&&(b=r(b,this.array));this.array[a*this.itemSize+1]=b;return this}getZ(a){a=this.array[a*this.itemSize+2];this.normalized&&(a=g(a,this.array));return a}setZ(a,b){this.normalized&&(b=
r(b,this.array));this.array[a*this.itemSize+2]=b;return this}getW(a){a=this.array[a*this.itemSize+3];this.normalized&&(a=g(a,this.array));return a}setW(a,b){this.normalized&&(b=r(b,this.array));this.array[a*this.itemSize+3]=b;return this}setXY(a,b,d){a*=this.itemSize;this.normalized&&(b=r(b,this.array),d=r(d,this.array));this.array[a+0]=b;this.array[a+1]=d;return this}setXYZ(a,b,d,l){a*=this.itemSize;this.normalized&&(b=r(b,this.array),d=r(d,this.array),l=r(l,this.array));this.array[a+0]=b;this.array[a+
1]=d;this.array[a+2]=l;return this}setXYZW(a,b,d,l,q){a*=this.itemSize;this.normalized&&(b=r(b,this.array),d=r(d,this.array),l=r(l,this.array),q=r(q,this.array));this.array[a+0]=b;this.array[a+1]=d;this.array[a+2]=l;this.array[a+3]=q;return this}onUpload(a){this.onUploadCallback=a;return this}clone(){return(new this.constructor(this.array,this.itemSize)).copy(this)}toJSON(){const a={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};""!==
this.name&&(a.name=this.name);35044!==this.usage&&(a.usage=this.usage);if(0!==this.updateRange.offset||-1!==this.updateRange.count)a.updateRange=this.updateRange;return a}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}
class ml extends fc{constructor(a,b,d){super(new Int8Array(a),b,d)}}class nl extends fc{constructor(a,b,d){super(new Uint8Array(a),b,d)}}class ol extends fc{constructor(a,b,d){super(new Uint8ClampedArray(a),b,d)}}class pl extends fc{constructor(a,b,d){super(new Int16Array(a),b,d)}}class Dh extends fc{constructor(a,b,d){super(new Uint16Array(a),b,d)}}class ql extends fc{constructor(a,b,d){super(new Int32Array(a),b,d)}}class Ch extends fc{constructor(a,b,d){super(new Uint32Array(a),b,d)}}class rl extends fc{constructor(a,
b,d){super(new Uint16Array(a),b,d);this.isFloat16BufferAttribute=!0}}class pb extends fc{constructor(a,b,d){super(new Float32Array(a),b,d)}}class sl extends fc{constructor(a,b,d){super(new Float64Array(a),b,d)}}let tl=0;const Vc=new Fb,hi=new bc,Xe=new aa,Sc=new pe,Sf=new pe,wc=new aa;class Kb extends Uc{constructor(){super();this.isBufferGeometry=!0;Object.defineProperty(this,"id",{value:tl++});this.uuid=p();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes=
{};this.morphTargetsRelative=!1;this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity};this.userData={}}getIndex(){return this.index}setIndex(a){Array.isArray(a)?this.index=new (u(a)?Ch:Dh)(a,1):this.index=a;return this}getAttribute(a){return this.attributes[a]}setAttribute(a,b){this.attributes[a]=b;return this}deleteAttribute(a){delete this.attributes[a];return this}hasAttribute(a){return void 0!==this.attributes[a]}addGroup(a,b,d=0){this.groups.push({start:a,
count:b,materialIndex:d})}clearGroups(){this.groups=[]}setDrawRange(a,b){this.drawRange.start=a;this.drawRange.count=b}applyMatrix4(a){var b=this.attributes.position;void 0!==b&&(b.applyMatrix4(a),b.needsUpdate=!0);b=this.attributes.normal;if(void 0!==b){const d=(new hb).getNormalMatrix(a);b.applyNormalMatrix(d);b.needsUpdate=!0}b=this.attributes.tangent;void 0!==b&&(b.transformDirection(a),b.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();
return this}applyQuaternion(a){Vc.makeRotationFromQuaternion(a);this.applyMatrix4(Vc);return this}rotateX(a){Vc.makeRotationX(a);this.applyMatrix4(Vc);return this}rotateY(a){Vc.makeRotationY(a);this.applyMatrix4(Vc);return this}rotateZ(a){Vc.makeRotationZ(a);this.applyMatrix4(Vc);return this}translate(a,b,d){Vc.makeTranslation(a,b,d);this.applyMatrix4(Vc);return this}scale(a,b,d){Vc.makeScale(a,b,d);this.applyMatrix4(Vc);return this}lookAt(a){hi.lookAt(a);hi.updateMatrix();this.applyMatrix4(hi.matrix);
return this}center(){this.computeBoundingBox();this.boundingBox.getCenter(Xe).negate();this.translate(Xe.x,Xe.y,Xe.z);return this}setFromPoints(a){const b=[];for(let d=0,l=a.length;d<l;d++){const q=a[d];b.push(q.x,q.y,q.z||0)}this.setAttribute("position",new pb(b,3));return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new pe);const a=this.attributes.position,b=this.morphAttributes.position;if(a&&a.isGLBufferAttribute)console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',
this),this.boundingBox.set(new aa(-Infinity,-Infinity,-Infinity),new aa(Infinity,Infinity,Infinity));else{if(void 0!==a){if(this.boundingBox.setFromBufferAttribute(a),b)for(let d=0,l=b.length;d<l;d++)Sc.setFromBufferAttribute(b[d]),this.morphTargetsRelative?(wc.addVectors(this.boundingBox.min,Sc.min),this.boundingBox.expandByPoint(wc),wc.addVectors(this.boundingBox.max,Sc.max),this.boundingBox.expandByPoint(wc)):(this.boundingBox.expandByPoint(Sc.min),this.boundingBox.expandByPoint(Sc.max))}else this.boundingBox.makeEmpty();
(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new se);const a=this.attributes.position,b=this.morphAttributes.position;if(a&&a.isGLBufferAttribute)console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',
this),this.boundingSphere.set(new aa,Infinity);else if(a){const d=this.boundingSphere.center;Sc.setFromBufferAttribute(a);if(b)for(let q=0,y=b.length;q<y;q++)Sf.setFromBufferAttribute(b[q]),this.morphTargetsRelative?(wc.addVectors(Sc.min,Sf.min),Sc.expandByPoint(wc),wc.addVectors(Sc.max,Sf.max),Sc.expandByPoint(wc)):(Sc.expandByPoint(Sf.min),Sc.expandByPoint(Sf.max));Sc.getCenter(d);let l=0;for(let q=0,y=a.count;q<y;q++)wc.fromBufferAttribute(a,q),l=Math.max(l,d.distanceToSquared(wc));if(b)for(let q=
0,y=b.length;q<y;q++){const A=b[q],D=this.morphTargetsRelative;for(let F=0,G=A.count;F<G;F++)wc.fromBufferAttribute(A,F),D&&(Xe.fromBufferAttribute(a,F),wc.add(Xe)),l=Math.max(l,d.distanceToSquared(wc))}this.boundingSphere.radius=Math.sqrt(l);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){function a(wa,ya,xa){N.fromArray(q,3*wa);P.fromArray(q,3*
ya);T.fromArray(q,3*xa);S.fromArray(A,2*wa);L.fromArray(A,2*ya);U.fromArray(A,2*xa);P.sub(N);T.sub(N);L.sub(S);U.sub(S);const Va=1/(L.x*U.y-U.x*L.y);isFinite(Va)&&(ma.copy(P).multiplyScalar(U.y).addScaledVector(T,-L.y).multiplyScalar(Va),ba.copy(T).multiplyScalar(L.x).addScaledVector(P,-U.x).multiplyScalar(Va),F[wa].add(ma),F[ya].add(ma),F[xa].add(ma),G[wa].add(ba),G[ya].add(ba),G[xa].add(ba))}function b(wa){Ga.fromArray(y,3*wa);oa.copy(Ga);var ya=F[wa];sa.copy(ya);sa.sub(Ga.multiplyScalar(Ga.dot(ya))).normalize();
ja.crossVectors(oa,ya);ya=ja.dot(G[wa]);D[4*wa]=sa.x;D[4*wa+1]=sa.y;D[4*wa+2]=sa.z;D[4*wa+3]=0>ya?-1:1}var d=this.index,l=this.attributes;if(null===d||void 0===l.position||void 0===l.normal||void 0===l.uv)console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");else{d=d.array;var q=l.position.array,y=l.normal.array,A=l.uv.array;l=q.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new fc(new Float32Array(4*
l),4));var D=this.getAttribute("tangent").array,F=[],G=[];for(var M=0;M<l;M++)F[M]=new aa,G[M]=new aa;var N=new aa,P=new aa,T=new aa,S=new za,L=new za,U=new za,ma=new aa,ba=new aa;l=this.groups;0===l.length&&(l=[{start:0,count:d.length}]);for(let wa=0,ya=l.length;wa<ya;++wa){var na=l[wa];M=na.start;na=na.count;for(let xa=M,Va=M+na;xa<Va;xa+=3)a(d[xa+0],d[xa+1],d[xa+2])}var sa=new aa,ja=new aa,Ga=new aa,oa=new aa;for(let wa=0,ya=l.length;wa<ya;++wa){na=l[wa];M=na.start;na=na.count;for(let xa=M,Va=
M+na;xa<Va;xa+=3)b(d[xa+0]),b(d[xa+1]),b(d[xa+2])}}}computeVertexNormals(){const a=this.index,b=this.getAttribute("position");if(void 0!==b){let d=this.getAttribute("normal");if(void 0===d)d=new fc(new Float32Array(3*b.count),3),this.setAttribute("normal",d);else for(let N=0,P=d.count;N<P;N++)d.setXYZ(N,0,0,0);const l=new aa,q=new aa,y=new aa,A=new aa,D=new aa,F=new aa,G=new aa,M=new aa;if(a)for(let N=0,P=a.count;N<P;N+=3){const T=a.getX(N+0),S=a.getX(N+1),L=a.getX(N+2);l.fromBufferAttribute(b,T);
q.fromBufferAttribute(b,S);y.fromBufferAttribute(b,L);G.subVectors(y,q);M.subVectors(l,q);G.cross(M);A.fromBufferAttribute(d,T);D.fromBufferAttribute(d,S);F.fromBufferAttribute(d,L);A.add(G);D.add(G);F.add(G);d.setXYZ(T,A.x,A.y,A.z);d.setXYZ(S,D.x,D.y,D.z);d.setXYZ(L,F.x,F.y,F.z)}else for(let N=0,P=b.count;N<P;N+=3)l.fromBufferAttribute(b,N+0),q.fromBufferAttribute(b,N+1),y.fromBufferAttribute(b,N+2),G.subVectors(y,q),M.subVectors(l,q),G.cross(M),d.setXYZ(N+0,G.x,G.y,G.z),d.setXYZ(N+1,G.x,G.y,G.z),
d.setXYZ(N+2,G.x,G.y,G.z);this.normalizeNormals();d.needsUpdate=!0}}merge(){console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead.");return this}normalizeNormals(){const a=this.attributes.normal;for(let b=0,d=a.count;b<d;b++)wc.fromBufferAttribute(a,b),wc.normalize(),a.setXYZ(b,wc.x,wc.y,wc.z)}toNonIndexed(){function a(D,F){const G=D.array,M=D.itemSize,N=D.normalized,P=new G.constructor(F.length*M);let T,S=0;for(let L=0,U=F.length;L<
U;L++){T=D.isInterleavedBufferAttribute?F[L]*D.data.stride+D.offset:F[L]*M;for(let ma=0;ma<M;ma++)P[S++]=G[T++]}return new fc(P,M,N)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const b=new Kb;var d=this.index.array,l=this.attributes;for(var q in l){var y=a(l[q],d);b.setAttribute(q,y)}l=this.morphAttributes;for(var A in l){q=[];y=l[A];for(let D=0,F=y.length;D<F;D++){const G=a(y[D],d);q.push(G)}b.morphAttributes[A]=q}b.morphTargetsRelative=
this.morphTargetsRelative;d=this.groups;for(let D=0,F=d.length;D<F;D++)A=d[D],b.addGroup(A.start,A.count,A.materialIndex);return b}toJSON(){const a={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};a.uuid=this.uuid;a.type=this.type;""!==this.name&&(a.name=this.name);0<Object.keys(this.userData).length&&(a.userData=this.userData);if(void 0!==this.parameters){var b=this.parameters;for(var d in b)void 0!==b[d]&&(a[d]=b[d]);return a}a.data={attributes:{}};d=this.index;null!==
d&&(a.data.index={type:d.array.constructor.name,array:Array.prototype.slice.call(d.array)});d=this.attributes;for(var l in d)a.data.attributes[l]=d[l].toJSON(a.data);l={};d=!1;for(b in this.morphAttributes){const q=this.morphAttributes[b],y=[];for(let A=0,D=q.length;A<D;A++)y.push(q[A].toJSON(a.data));0<y.length&&(l[b]=y,d=!0)}d&&(a.data.morphAttributes=l,a.data.morphTargetsRelative=this.morphTargetsRelative);b=this.groups;0<b.length&&(a.data.groups=JSON.parse(JSON.stringify(b)));b=this.boundingSphere;
null!==b&&(a.data.boundingSphere={center:b.center.toArray(),radius:b.radius});return a}clone(){return(new this.constructor).copy(this)}copy(a){this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;var b={};this.name=a.name;var d=a.index;null!==d&&this.setIndex(d.clone(b));d=a.attributes;for(var l in d)this.setAttribute(l,d[l].clone(b));l=a.morphAttributes;for(var q in l){d=[];const y=l[q];for(let A=0,D=y.length;A<D;A++)d.push(y[A].clone(b));
this.morphAttributes[q]=d}this.morphTargetsRelative=a.morphTargetsRelative;b=a.groups;for(let y=0,A=b.length;y<A;y++)q=b[y],this.addGroup(q.start,q.count,q.materialIndex);b=a.boundingBox;null!==b&&(this.boundingBox=b.clone());b=a.boundingSphere;null!==b&&(this.boundingSphere=b.clone());this.drawRange.start=a.drawRange.start;this.drawRange.count=a.drawRange.count;this.userData=a.userData;return this}dispose(){this.dispatchEvent({type:"dispose"})}}const pj=new Fb,nd=new Qf,Qg=new se,qj=new aa,hf=new aa,
jf=new aa,kf=new aa,ii=new aa,Rg=new aa,hg=new za,ig=new za,jg=new za,Ah=new aa,gg=new aa;class xc extends bc{constructor(a=new Kb,b=new Vd){super();this.isMesh=!0;this.type="Mesh";this.geometry=a;this.material=b;this.updateMorphTargets()}copy(a,b){super.copy(a,b);void 0!==a.morphTargetInfluences&&(this.morphTargetInfluences=a.morphTargetInfluences.slice());void 0!==a.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},a.morphTargetDictionary));this.material=a.material;this.geometry=
a.geometry;return this}updateMorphTargets(){var a=this.geometry.morphAttributes,b=Object.keys(a);if(0<b.length&&(a=a[b[0]],void 0!==a)){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(let d=0,l=a.length;d<l;d++)b=a[d].name||String(d),this.morphTargetInfluences.push(0),this.morphTargetDictionary[b]=d}}getVertexPosition(a,b){var d=this.geometry;const l=d.morphAttributes.position,q=d.morphTargetsRelative;b.fromBufferAttribute(d.attributes.position,a);d=this.morphTargetInfluences;if(l&&
d){Rg.set(0,0,0);for(let y=0,A=l.length;y<A;y++){const D=d[y];0!==D&&(ii.fromBufferAttribute(l[y],a),q?Rg.addScaledVector(ii,D):Rg.addScaledVector(ii.sub(b),D))}b.add(Rg)}this.isSkinnedMesh&&this.boneTransform(a,b);return b}raycast(a,b){var d=this.geometry;const l=this.material;var q=this.matrixWorld;if(void 0!==l&&(null===d.boundingSphere&&d.computeBoundingSphere(),Qg.copy(d.boundingSphere),Qg.applyMatrix4(q),nd.copy(a.ray).recast(a.near),!1!==Qg.containsPoint(nd.origin)||!(null===nd.intersectSphere(Qg,
qj)||nd.origin.distanceToSquared(qj)>(a.far-a.near)**2))&&(pj.copy(q).invert(),nd.copy(a.ray).applyMatrix4(pj),null===d.boundingBox||!1!==nd.intersectsBox(d.boundingBox))){var y=d.index,A=d.attributes.position;q=d.attributes.uv;var D=d.attributes.uv2,F=d.groups;d=d.drawRange;if(null!==y)if(Array.isArray(l))for(let P=0,T=F.length;P<T;P++){A=F[P];var G=l[A.materialIndex];var M=Math.max(A.start,d.start);var N=Math.min(y.count,Math.min(A.start+A.count,d.start+d.count));for(let S=M,L=N;S<L;S+=3){M=y.getX(S);
N=y.getX(S+1);const U=y.getX(S+2);if(M=I(this,G,a,nd,q,D,M,N,U))M.faceIndex=Math.floor(S/3),M.face.materialIndex=A.materialIndex,b.push(M)}}else{F=Math.max(0,d.start);d=Math.min(y.count,d.start+d.count);for(let P=F,T=d;P<T;P+=3)if(d=y.getX(P),F=y.getX(P+1),A=y.getX(P+2),M=I(this,l,a,nd,q,D,d,F,A))M.faceIndex=Math.floor(P/3),b.push(M)}else if(void 0!==A)if(Array.isArray(l))for(let P=0,T=F.length;P<T;P++){y=F[P];G=l[y.materialIndex];M=Math.max(y.start,d.start);N=Math.min(A.count,Math.min(y.start+y.count,
d.start+d.count));for(let S=M,L=N;S<L;S+=3)if(M=I(this,G,a,nd,q,D,S,S+1,S+2))M.faceIndex=Math.floor(S/3),M.face.materialIndex=y.materialIndex,b.push(M)}else{y=Math.max(0,d.start);d=Math.min(A.count,d.start+d.count);for(let P=y,T=d;P<T;P+=3)if(M=I(this,l,a,nd,q,D,P,P+1,P+2))M.faceIndex=Math.floor(P/3),b.push(M)}}}}class ae extends Kb{constructor(a=1,b=1,d=1,l=1,q=1,y=1){function A(S,L,U,ma,ba,na,sa,ja,Ga,oa,wa){const ya=na/Ga,xa=sa/oa,Va=na/2,La=sa/2,Ra=ja/2;sa=Ga+1;const Na=oa+1;let cb=na=0;const ob=
new aa;for(let ub=0;ub<Na;ub++){const Bb=ub*xa-La;for(let Sa=0;Sa<sa;Sa++)ob[S]=(Sa*ya-Va)*ma,ob[L]=Bb*ba,ob[U]=Ra,G.push(ob.x,ob.y,ob.z),ob[S]=0,ob[L]=0,ob[U]=0<ja?1:-1,M.push(ob.x,ob.y,ob.z),N.push(Sa/Ga),N.push(1-ub/oa),na+=1}for(S=0;S<oa;S++)for(L=0;L<Ga;L++)U=P+L+sa*(S+1),ma=P+(L+1)+sa*(S+1),ba=P+(L+1)+sa*S,F.push(P+L+sa*S,U,ba),F.push(U,ma,ba),cb+=6;D.addGroup(T,cb,wa);T+=cb;P+=na}super();this.type="BoxGeometry";this.parameters={width:a,height:b,depth:d,widthSegments:l,heightSegments:q,depthSegments:y};
const D=this;l=Math.floor(l);q=Math.floor(q);y=Math.floor(y);const F=[],G=[],M=[],N=[];let P=0,T=0;A("z","y","x",-1,-1,d,b,a,y,q,0);A("z","y","x",1,-1,d,b,-a,y,q,1);A("x","z","y",1,1,a,d,b,l,y,2);A("x","z","y",1,-1,a,d,-b,l,y,3);A("x","y","z",1,-1,a,b,d,l,q,4);A("x","y","z",-1,-1,a,b,-d,l,q,5);this.setIndex(F);this.setAttribute("position",new pb(G,3));this.setAttribute("normal",new pb(M,3));this.setAttribute("uv",new pb(N,2))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new ae(a.width,
a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments)}}const bj={clone:K,merge:O};class fd extends Fc{constructor(a){super();this.isShaderMaterial=!0;this.type="ShaderMaterial";this.defines={};this.uniforms={};this.uniformsGroups=[];this.vertexShader="void main() {\n\tgl_Position \x3d projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor \x3d vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=
1;this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;this.uniformsNeedUpdate=!1;this.glslVersion=null;void 0!==a&&this.setValues(a)}copy(a){super.copy(a);this.fragmentShader=a.fragmentShader;this.vertexShader=a.vertexShader;this.uniforms=K(a.uniforms);var b=a.uniformsGroups;const d=[];for(let l=0;l<b.length;l++)d.push(b[l].clone());this.uniformsGroups=
d;this.defines=Object.assign({},a.defines);this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.fog=a.fog;this.lights=a.lights;this.clipping=a.clipping;this.extensions=Object.assign({},a.extensions);this.glslVersion=a.glslVersion;return this}toJSON(a){const b=super.toJSON(a);b.glslVersion=this.glslVersion;b.uniforms={};for(const d in this.uniforms){const l=this.uniforms[d].value;b.uniforms[d]=l&&l.isTexture?{type:"t",value:l.toJSON(a).uuid}:l&&l.isColor?{type:"c",value:l.getHex()}:
l&&l.isVector2?{type:"v2",value:l.toArray()}:l&&l.isVector3?{type:"v3",value:l.toArray()}:l&&l.isVector4?{type:"v4",value:l.toArray()}:l&&l.isMatrix3?{type:"m3",value:l.toArray()}:l&&l.isMatrix4?{type:"m4",value:l.toArray()}:{value:l}}0<Object.keys(this.defines).length&&(b.defines=this.defines);b.vertexShader=this.vertexShader;b.fragmentShader=this.fragmentShader;a={};for(const d in this.extensions)!0===this.extensions[d]&&(a[d]=!0);0<Object.keys(a).length&&(b.extensions=a);return b}}class Sg extends bc{constructor(){super();
this.isCamera=!0;this.type="Camera";this.matrixWorldInverse=new Fb;this.projectionMatrix=new Fb;this.projectionMatrixInverse=new Fb}copy(a,b){super.copy(a,b);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);this.projectionMatrixInverse.copy(a.projectionMatrixInverse);return this}getWorldDirection(a){this.updateWorldMatrix(!0,!1);const b=this.matrixWorld.elements;return a.set(-b[8],-b[9],-b[10]).normalize()}updateMatrixWorld(a){super.updateMatrixWorld(a);
this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(a,b){super.updateWorldMatrix(a,b);this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Dc extends Sg{constructor(a=50,b=1,d=.1,l=2E3){super();this.isPerspectiveCamera=!0;this.type="PerspectiveCamera";this.fov=a;this.zoom=1;this.near=d;this.far=l;this.focus=10;this.aspect=b;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}copy(a,b){super.copy(a,
b);this.fov=a.fov;this.zoom=a.zoom;this.near=a.near;this.far=a.far;this.focus=a.focus;this.aspect=a.aspect;this.view=null===a.view?null:Object.assign({},a.view);this.filmGauge=a.filmGauge;this.filmOffset=a.filmOffset;return this}setFocalLength(a){a=.5*this.getFilmHeight()/a;this.fov=2*Fa*Math.atan(a);this.updateProjectionMatrix()}getFocalLength(){const a=Math.tan(.5*qa*this.fov);return.5*this.getFilmHeight()/a}getEffectiveFOV(){return 2*Fa*Math.atan(Math.tan(.5*qa*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*
Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(a,b,d,l,q,y){this.aspect=a/b;null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=d;this.view.offsetY=l;this.view.width=q;this.view.height=y;this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()}updateProjectionMatrix(){const a=
this.near;let b=a*Math.tan(.5*qa*this.fov)/this.zoom,d=2*b,l=this.aspect*d,q=-.5*l;var y=this.view;if(null!==this.view&&this.view.enabled){const A=y.fullWidth,D=y.fullHeight;q+=y.offsetX*l/A;b-=y.offsetY*d/D;l*=y.width/A;d*=y.height/D}y=this.filmOffset;0!==y&&(q+=a*y/this.getFilmWidth());this.projectionMatrix.makePerspective(q,q+l,b,b-d,a,this.far);this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(a){a=super.toJSON(a);a.object.fov=this.fov;a.object.zoom=this.zoom;a.object.near=
this.near;a.object.far=this.far;a.object.focus=this.focus;a.object.aspect=this.aspect;null!==this.view&&(a.object.view=Object.assign({},this.view));a.object.filmGauge=this.filmGauge;a.object.filmOffset=this.filmOffset;return a}}class rj extends bc{constructor(a,b,d){super();this.type="CubeCamera";this.renderTarget=d;d=new Dc(-90,1,a,b);d.layers=this.layers;d.up.set(0,1,0);d.lookAt(1,0,0);this.add(d);d=new Dc(-90,1,a,b);d.layers=this.layers;d.up.set(0,1,0);d.lookAt(-1,0,0);this.add(d);d=new Dc(-90,
1,a,b);d.layers=this.layers;d.up.set(0,0,-1);d.lookAt(0,1,0);this.add(d);d=new Dc(-90,1,a,b);d.layers=this.layers;d.up.set(0,0,1);d.lookAt(0,-1,0);this.add(d);d=new Dc(-90,1,a,b);d.layers=this.layers;d.up.set(0,1,0);d.lookAt(0,0,1);this.add(d);a=new Dc(-90,1,a,b);a.layers=this.layers;a.up.set(0,1,0);a.lookAt(0,0,-1);this.add(a)}update(a,b){null===this.parent&&this.updateMatrixWorld();const d=this.renderTarget,[l,q,y,A,D,F]=this.children,G=a.getRenderTarget(),M=a.toneMapping,N=a.xr.enabled;a.toneMapping=
0;a.xr.enabled=!1;const P=d.texture.generateMipmaps;d.texture.generateMipmaps=!1;a.setRenderTarget(d,0);a.render(b,l);a.setRenderTarget(d,1);a.render(b,q);a.setRenderTarget(d,2);a.render(b,y);a.setRenderTarget(d,3);a.render(b,A);a.setRenderTarget(d,4);a.render(b,D);d.texture.generateMipmaps=P;a.setRenderTarget(d,5);a.render(b,F);a.setRenderTarget(G);a.toneMapping=M;a.xr.enabled=N;d.texture.needsPMREMUpdate=!0}}class Tf extends rc{constructor(a,b,d,l,q,y,A,D,F,G){a=void 0!==a?a:[];super(a,void 0!==
b?b:301,d,l,q,y,A,D,F,G);this.isCubeTexture=!0;this.flipY=!1}get images(){return this.image}set images(a){this.image=a}}class Ri extends Yc{constructor(a=1,b={}){super(a,a,b);this.isWebGLCubeRenderTarget=!0;a={width:a,height:a,depth:1};this.texture=new Tf([a,a,a,a,a,a],b.mapping,b.wrapS,b.wrapT,b.magFilter,b.minFilter,b.format,b.type,b.anisotropy,b.encoding);this.texture.isRenderTargetTexture=!0;this.texture.generateMipmaps=void 0!==b.generateMipmaps?b.generateMipmaps:!1;this.texture.minFilter=void 0!==
b.minFilter?b.minFilter:1006}fromEquirectangularTexture(a,b){this.texture.type=b.type;this.texture.encoding=b.encoding;this.texture.generateMipmaps=b.generateMipmaps;this.texture.minFilter=b.minFilter;this.texture.magFilter=b.magFilter;var d=new ae(5,5,5),l=new fd({name:"CubemapFromEquirect",uniforms:K({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection \x3d transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include \x3cbegin_vertex\x3e\n\t\t\t\t\t#include \x3cproject_vertex\x3e\n\n\t\t\t\t}\n\t\t\t",
fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include \x3ccommon\x3e\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction \x3d normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV \x3d equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor \x3d texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",side:1,blending:0});l.uniforms.tEquirect.value=b;d=new xc(d,l);l=b.minFilter;1008===b.minFilter&&(b.minFilter=1006);(new rj(1,10,this)).update(a,
d);b.minFilter=l;d.geometry.dispose();d.material.dispose();return this}clear(a,b,d,l){const q=a.getRenderTarget();for(let y=0;6>y;y++)a.setRenderTarget(this,y),a.clear(b,d,l);a.setRenderTarget(q)}}const ji=new aa,ul=new aa,vl=new hb;class Hd{constructor(a=new aa(1,0,0),b=0){this.isPlane=!0;this.normal=a;this.constant=b}set(a,b){this.normal.copy(a);this.constant=b;return this}setComponents(a,b,d,l){this.normal.set(a,b,d);this.constant=l;return this}setFromNormalAndCoplanarPoint(a,b){this.normal.copy(a);
this.constant=-b.dot(this.normal);return this}setFromCoplanarPoints(a,b,d){b=ji.subVectors(d,b).cross(ul.subVectors(a,b)).normalize();this.setFromNormalAndCoplanarPoint(b,a);return this}copy(a){this.normal.copy(a.normal);this.constant=a.constant;return this}normalize(){const a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this}negate(){this.constant*=-1;this.normal.negate();return this}distanceToPoint(a){return this.normal.dot(a)+this.constant}distanceToSphere(a){return this.distanceToPoint(a.center)-
a.radius}projectPoint(a,b){return b.copy(a).addScaledVector(this.normal,-this.distanceToPoint(a))}intersectLine(a,b){const d=a.delta(ji);var l=this.normal.dot(d);if(0===l)return 0===this.distanceToPoint(a.start)?b.copy(a.start):null;l=-(a.start.dot(this.normal)+this.constant)/l;return 0>l||1<l?null:b.copy(a.start).addScaledVector(d,l)}intersectsLine(a){const b=this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b}intersectsBox(a){return a.intersectsPlane(this)}intersectsSphere(a){return a.intersectsPlane(this)}coplanarPoint(a){return a.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(a,
b){b=b||vl.getNormalMatrix(a);a=this.coplanarPoint(ji).applyMatrix4(a);b=this.normal.applyMatrix3(b).normalize();this.constant=-a.dot(b);return this}translate(a){this.constant-=a.dot(this.normal);return this}equals(a){return a.normal.equals(this.normal)&&a.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Ye=new se,Tg=new aa;class og{constructor(a=new Hd,b=new Hd,d=new Hd,l=new Hd,q=new Hd,y=new Hd){this.planes=[a,b,d,l,q,y]}set(a,b,d,l,q,y){const A=this.planes;A[0].copy(a);
A[1].copy(b);A[2].copy(d);A[3].copy(l);A[4].copy(q);A[5].copy(y);return this}copy(a){const b=this.planes;for(let d=0;6>d;d++)b[d].copy(a.planes[d]);return this}setFromProjectionMatrix(a){const b=this.planes;var d=a.elements;a=d[0];const l=d[1],q=d[2],y=d[3],A=d[4],D=d[5],F=d[6],G=d[7],M=d[8],N=d[9],P=d[10],T=d[11],S=d[12],L=d[13],U=d[14];d=d[15];b[0].setComponents(y-a,G-A,T-M,d-S).normalize();b[1].setComponents(y+a,G+A,T+M,d+S).normalize();b[2].setComponents(y+l,G+D,T+N,d+L).normalize();b[3].setComponents(y-
l,G-D,T-N,d-L).normalize();b[4].setComponents(y-q,G-F,T-P,d-U).normalize();b[5].setComponents(y+q,G+F,T+P,d+U).normalize();return this}intersectsObject(a){const b=a.geometry;null===b.boundingSphere&&b.computeBoundingSphere();Ye.copy(b.boundingSphere).applyMatrix4(a.matrixWorld);return this.intersectsSphere(Ye)}intersectsSprite(a){Ye.center.set(0,0,0);Ye.radius=.7071067811865476;Ye.applyMatrix4(a.matrixWorld);return this.intersectsSphere(Ye)}intersectsSphere(a){const b=this.planes,d=a.center;a=-a.radius;
for(let l=0;6>l;l++)if(b[l].distanceToPoint(d)<a)return!1;return!0}intersectsBox(a){const b=this.planes;for(let d=0;6>d;d++){const l=b[d];Tg.x=0<l.normal.x?a.max.x:a.min.x;Tg.y=0<l.normal.y?a.max.y:a.min.y;Tg.z=0<l.normal.z?a.max.z:a.min.z;if(0>l.distanceToPoint(Tg))return!1}return!0}containsPoint(a){const b=this.planes;for(let d=0;6>d;d++)if(0>b[d].distanceToPoint(a))return!1;return!0}clone(){return(new this.constructor).copy(this)}}class lf extends Kb{constructor(a=1,b=1,d=1,l=1){super();this.type=
"PlaneGeometry";this.parameters={width:a,height:b,widthSegments:d,heightSegments:l};var q=a/2,y=b/2;d=Math.floor(d);l=Math.floor(l);const A=d+1;var D=l+1,F=a/d,G=b/l;b=[];a=[];const M=[],N=[];for(let P=0;P<D;P++){const T=P*G-y;for(let S=0;S<A;S++)a.push(S*F-q,-T,0),M.push(0,0,1),N.push(S/d),N.push(1-P/l)}for(q=0;q<l;q++)for(y=0;y<d;y++)D=y+A*(q+1),F=y+1+A*(q+1),G=y+1+A*q,b.push(y+A*q,D,G),b.push(D,F,G);this.setIndex(b);this.setAttribute("position",new pb(a,3));this.setAttribute("normal",new pb(M,
3));this.setAttribute("uv",new pb(N,2))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new lf(a.width,a.height,a.widthSegments,a.heightSegments)}}const Ib={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *\x3d texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a \x3c alphaTest ) discard;\n#endif",
alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion \x3d ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *\x3d ambientOcclusion;\n\t#if defined( USE_ENVMAP ) \x26\x26 defined( STANDARD )\n\t\tfloat dotNV \x3d saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *\x3d computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",
aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed \x3d vec3( position );",beginnormal_vertex:"vec3 objectNormal \x3d vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent \x3d vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel \x3d exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel \x3d exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x \x3d clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 \x3d x * x;\n    float x5 \x3d clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 \x3d pow2( alpha );\n\tfloat gv \x3d dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl \x3d dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 \x3d pow2( alpha );\n\tfloat denom \x3d pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha \x3d pow2( roughness );\n\tvec3 halfDir \x3d normalize( lightDir + viewDir );\n\tfloat dotNL \x3d saturate( dot( normal, lightDir ) );\n\tfloat dotNV \x3d saturate( dot( normal, viewDir ) );\n\tfloat dotNH \x3d saturate( dot( normal, halfDir ) );\n\tfloat dotVH \x3d saturate( dot( viewDir, halfDir ) );\n\tvec3 F \x3d F_Schlick( f0, f90, dotVH );\n\tfloat V \x3d V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D \x3d D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha \x3d pow2( roughness );\n\t\tvec3 halfDir \x3d normalize( lightDir + viewDir );\n\t\tfloat dotNL \x3d saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV \x3d saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH \x3d saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH \x3d saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F \x3d mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V \x3d V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D \x3d D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE \x3d 64.0;\n\tconst float LUT_SCALE \x3d ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS \x3d 0.5 / LUT_SIZE;\n\tfloat dotNV \x3d saturate( dot( N, V ) );\n\tvec2 uv \x3d vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv \x3d uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l \x3d length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x \x3d dot( v1, v2 );\n\tfloat y \x3d abs( x );\n\tfloat a \x3d 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b \x3d 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v \x3d a / b;\n\tfloat theta_sintheta \x3d ( x \x3e 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 \x3d rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 \x3d rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal \x3d cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) \x3c 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 \x3d normalize( V - N * dot( V, N ) );\n\tT2 \x3d - cross( N, T1 );\n\tmat3 mat \x3d mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] \x3d mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] \x3d mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] \x3d mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] \x3d mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] \x3d normalize( coords[ 0 ] );\n\tcoords[ 1 ] \x3d normalize( coords[ 1 ] );\n\tcoords[ 2 ] \x3d normalize( coords[ 2 ] );\n\tcoords[ 3 ] \x3d normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor \x3d vec3( 0.0 );\n\tvectorFormFactor +\x3d LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor +\x3d LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor +\x3d LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor +\x3d LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result \x3d LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir \x3d normalize( lightDir + viewDir );\n\tfloat dotNH \x3d saturate( dot( normal, halfDir ) );\n\tfloat dotVH \x3d saturate( dot( viewDir, halfDir ) );\n\tvec3 F \x3d F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G \x3d G_BlinnPhong_Implicit( );\n\tfloat D \x3d D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha \x3d pow2( roughness );\n\tfloat invAlpha \x3d 1.0 / alpha;\n\tfloat cos2h \x3d dotNH * dotNH;\n\tfloat sin2h \x3d max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir \x3d normalize( lightDir + viewDir );\n\tfloat dotNL \x3d saturate( dot( normal, lightDir ) );\n\tfloat dotNV \x3d saturate( dot( normal, viewDir ) );\n\tfloat dotNH \x3d saturate( dot( normal, halfDir ) );\n\tfloat D \x3d D_Charlie( sheenRoughness, dotNH );\n\tfloat V \x3d V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",
iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 \x3d mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 \x3d sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase \x3d 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val \x3d vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos \x3d vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var \x3d vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz \x3d val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x +\x3d 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /\x3d 1.0685e-7;\n\t\tvec3 rgb \x3d XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR \x3d mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq \x3d pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq \x3d 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq \x3c 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 \x3d sqrt( cosTheta2Sq );\n\t\tfloat R0 \x3d IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 \x3d F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 \x3d R12;\n\t\tfloat T121 \x3d 1.0 - R12;\n\t\tfloat phi12 \x3d 0.0;\n\t\tif ( iridescenceIOR \x3c outsideIOR ) phi12 \x3d PI;\n\t\tfloat phi21 \x3d PI - phi12;\n\t\tvec3 baseIOR \x3d Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 \x3d IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 \x3d F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 \x3d vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] \x3c iridescenceIOR ) phi23[ 0 ] \x3d PI;\n\t\tif ( baseIOR[ 1 ] \x3c iridescenceIOR ) phi23[ 1 ] \x3d PI;\n\t\tif ( baseIOR[ 2 ] \x3c iridescenceIOR ) phi23[ 2 ] \x3d PI;\n\t\tfloat OPD \x3d 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi \x3d vec3( phi21 ) + phi23;\n\t\tvec3 R123 \x3d clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 \x3d sqrt( R123 );\n\t\tvec3 Rs \x3d pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 \x3d R12 + Rs;\n\t\tI \x3d C0;\n\t\tvec3 Cm \x3d Rs - T121;\n\t\tfor ( int m \x3d 1; m \x3c\x3d 2; ++ m ) {\n\t\t\tCm *\x3d r123;\n\t\t\tvec3 Sm \x3d 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI +\x3d Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",
bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx \x3d dFdx( vUv );\n\t\tvec2 dSTdy \x3d dFdy( vUv );\n\t\tfloat Hll \x3d bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx \x3d bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy \x3d bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX \x3d dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY \x3d dFdy( surf_pos.xyz );\n\t\tvec3 vN \x3d surf_norm;\n\t\tvec3 R1 \x3d cross( vSigmaY, vN );\n\t\tvec3 R2 \x3d cross( vN, vSigmaX );\n\t\tfloat fDet \x3d dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad \x3d sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",
clipping_planes_fragment:"#if NUM_CLIPPING_PLANES \x3e 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane \x3d clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) \x3e plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES \x3c NUM_CLIPPING_PLANES\n\t\tbool clipped \x3d true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i \x3d UNION_CLIPPING_PLANES; i \x3c NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane \x3d clippingPlanes[ i ];\n\t\t\tclipped \x3d ( dot( vClipPosition, plane.xyz ) \x3e plane.w ) \x26\x26 clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",
clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES \x3e 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES \x3e 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES \x3e 0\n\tvClipPosition \x3d - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *\x3d vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *\x3d vColor;\n#endif",
color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor \x3d vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor \x3d vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *\x3d color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *\x3d instanceColor.xyz;\n#endif",
common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 \x3d x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a \x3d 12.9898, b \x3d 78.233, c \x3d 43758.5453;\n\thighp float dt \x3d dot( uv.xy, vec2( a,b ) ), sn \x3d mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent \x3d max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] \x3d vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] \x3d vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] \x3d vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights \x3d vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] \x3d\x3d - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u \x3d atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v \x3d asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",
cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection \x3d abs( direction );\n\t\tfloat face \x3d - 1.0;\n\t\tif ( absDirection.x \x3e absDirection.z ) {\n\t\t\tif ( absDirection.x \x3e absDirection.y )\n\t\t\t\tface \x3d direction.x \x3e 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface \x3d direction.y \x3e 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z \x3e absDirection.y )\n\t\t\t\tface \x3d direction.z \x3e 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface \x3d direction.y \x3e 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face \x3d\x3d 0.0 ) {\n\t\t\tuv \x3d vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face \x3d\x3d 1.0 ) {\n\t\t\tuv \x3d vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face \x3d\x3d 2.0 ) {\n\t\t\tuv \x3d vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face \x3d\x3d 3.0 ) {\n\t\t\tuv \x3d vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face \x3d\x3d 4.0 ) {\n\t\t\tuv \x3d vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv \x3d vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face \x3d getFace( direction );\n\t\tfloat filterInt \x3d max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt \x3d max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize \x3d exp2( mipInt );\n\t\thighp vec2 uv \x3d getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face \x3e 2.0 ) {\n\t\t\tuv.y +\x3d faceSize;\n\t\t\tface -\x3d 3.0;\n\t\t}\n\t\tuv.x +\x3d face * faceSize;\n\t\tuv.x +\x3d filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y +\x3d 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *\x3d CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *\x3d CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip \x3d 0.0;\n\t\tif ( roughness \x3e\x3d cubeUV_r1 ) {\n\t\t\tmip \x3d ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness \x3e\x3d cubeUV_r4 ) {\n\t\t\tmip \x3d ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness \x3e\x3d cubeUV_r5 ) {\n\t\t\tmip \x3d ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness \x3e\x3d cubeUV_r6 ) {\n\t\t\tmip \x3d ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip \x3d - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip \x3d clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF \x3d fract( mip );\n\t\tfloat mipInt \x3d floor( mip );\n\t\tvec3 color0 \x3d bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF \x3d\x3d 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 \x3d bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",
defaultnormal_vertex:"vec3 transformedNormal \x3d objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m \x3d mat3( instanceMatrix );\n\ttransformedNormal /\x3d vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal \x3d m * transformedNormal;\n#endif\ntransformedNormal \x3d normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal \x3d - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent \x3d ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent \x3d - transformedTangent;\n\t#endif\n#endif",
displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed +\x3d normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor \x3d texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *\x3d emissiveColor.rgb;\n#endif",
emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor \x3d linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag \x3d normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag \x3d normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal \x3d inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec \x3d reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec \x3d refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec \x3d vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor \x3d textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor \x3d vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight \x3d mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight \x3d mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight +\x3d envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",
envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",
envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal \x3d inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor \x3d textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec \x3d reflect( - viewDir, normal );\n\t\t\treflectVec \x3d normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec \x3d inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor \x3d textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",
envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition \x3d worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex \x3d normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex \x3d normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal \x3d inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect \x3d reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect \x3d refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",
fog_vertex:"#ifdef USE_FOG\n\tvFogDepth \x3d - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor \x3d 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor \x3d smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb \x3d mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",
gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL \x3d dot( normal, lightDirection );\n\tvec2 coord \x3d vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw \x3d fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel \x3d texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance \x3d lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse +\x3d lightMapIrradiance;\n#endif",
lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor \x3d diffuseColor.rgb;\nmaterial.specularStrength \x3d specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL \x3d saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance \x3d dotNL * directLight.color;\n\treflectedLight.directDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",
lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x \x3d normal.x, y \x3d normal.y, z \x3d normal.z;\n\tvec3 result \x3d shCoefficients[ 0 ] * 0.886227;\n\tresult +\x3d shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult +\x3d shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult +\x3d shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult +\x3d shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult +\x3d shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult +\x3d shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult +\x3d shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult +\x3d shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal \x3d inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance \x3d shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance \x3d ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance \x3e 0.0 \x26\x26 decayExponent \x3e 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff \x3d 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance \x3e 0.0 ) {\n\t\t\tdistanceFalloff *\x3d pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS \x3e 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color \x3d directionalLight.color;\n\t\tlight.direction \x3d directionalLight.direction;\n\t\tlight.visible \x3d true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS \x3e 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector \x3d pointLight.position - geometry.position;\n\t\tlight.direction \x3d normalize( lVector );\n\t\tfloat lightDistance \x3d length( lVector );\n\t\tlight.color \x3d pointLight.color;\n\t\tlight.color *\x3d getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible \x3d ( light.color !\x3d vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS \x3e 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector \x3d spotLight.position - geometry.position;\n\t\tlight.direction \x3d normalize( lVector );\n\t\tfloat angleCos \x3d dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation \x3d getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation \x3e 0.0 ) {\n\t\t\tfloat lightDistance \x3d length( lVector );\n\t\t\tlight.color \x3d spotLight.color * spotAttenuation;\n\t\t\tlight.color *\x3d getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible \x3d ( light.color !\x3d vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color \x3d vec3( 0.0 );\n\t\t\tlight.visible \x3d false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS \x3e 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS \x3e 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL \x3d dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight \x3d 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance \x3d mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",
lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor \x3d diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance \x3d getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",
lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor \x3d diffuseColor.rgb;\nmaterial.specularColor \x3d specular;\nmaterial.specularShininess \x3d shininess;\nmaterial.specularStrength \x3d specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL \x3d saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance \x3d dotNL * directLight.color;\n\treflectedLight.directDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular +\x3d irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",
lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor \x3d diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy \x3d max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness \x3d max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness \x3d max( roughnessFactor, 0.0525 );material.roughness +\x3d geometryRoughness;\nmaterial.roughness \x3d min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior \x3d ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor \x3d specularIntensity;\n\t\tvec3 specularColorFactor \x3d specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *\x3d texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *\x3d texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 \x3d mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor \x3d 1.0;\n\t\tvec3 specularColorFactor \x3d vec3( 1.0 );\n\t\tmaterial.specularF90 \x3d 1.0;\n\t#endif\n\tmaterial.specularColor \x3d mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor \x3d mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 \x3d 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat \x3d clearcoat;\n\tmaterial.clearcoatRoughness \x3d clearcoatRoughness;\n\tmaterial.clearcoatF0 \x3d vec3( 0.04 );\n\tmaterial.clearcoatF90 \x3d 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *\x3d texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *\x3d texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat \x3d saturate( material.clearcoat );\tmaterial.clearcoatRoughness \x3d max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness +\x3d geometryRoughness;\n\tmaterial.clearcoatRoughness \x3d min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence \x3d iridescence;\n\tmaterial.iridescenceIOR \x3d iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *\x3d texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness \x3d (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness \x3d iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor \x3d sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *\x3d texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness \x3d clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *\x3d texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",
lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular \x3d vec3( 0.0 );\nvec3 sheenSpecular \x3d vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV \x3d saturate( dot( normal, viewDir ) );\n\tfloat r2 \x3d roughness * roughness;\n\tfloat a \x3d roughness \x3c 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b \x3d roughness \x3c 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG \x3d exp( a * dotNV + b ) + ( roughness \x3c 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV \x3d saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 \x3d vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 \x3d vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r \x3d roughness * c0 + c1;\n\tfloat a004 \x3d min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab \x3d vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab \x3d DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab \x3d DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr \x3d mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr \x3d specularColor;\n\t#endif\n\tvec3 FssEss \x3d Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess \x3d fab.x + fab.y;\n\tfloat Ems \x3d 1.0 - Ess;\n\tvec3 Favg \x3d Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms \x3d FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter +\x3d FssEss;\n\tmultiScatter +\x3d Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS \x3e 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal \x3d geometry.normal;\n\t\tvec3 viewDir \x3d geometry.viewDir;\n\t\tvec3 position \x3d geometry.position;\n\t\tvec3 lightPos \x3d rectAreaLight.position;\n\t\tvec3 halfWidth \x3d rectAreaLight.halfWidth;\n\t\tvec3 halfHeight \x3d rectAreaLight.halfHeight;\n\t\tvec3 lightColor \x3d rectAreaLight.color;\n\t\tfloat roughness \x3d material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] \x3d lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] \x3d lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] \x3d lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] \x3d lightPos + halfWidth + halfHeight;\n\t\tvec2 uv \x3d LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 \x3d texture2D( ltc_1, uv );\n\t\tvec4 t2 \x3d texture2D( ltc_2, uv );\n\t\tmat3 mInv \x3d mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel \x3d ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular +\x3d lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse +\x3d lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL \x3d saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance \x3d dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc \x3d saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance \x3d dotNLcc * directLight.color;\n\t\tclearcoatSpecular +\x3d ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular +\x3d irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular +\x3d irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular +\x3d irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular +\x3d clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular +\x3d irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering \x3d vec3( 0.0 );\n\tvec3 multiScattering \x3d vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance \x3d irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering \x3d singleScattering + multiScattering;\n\tvec3 diffuse \x3d material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular +\x3d radiance * singleScattering;\n\treflectedLight.indirectSpecular +\x3d multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse +\x3d diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",
lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position \x3d - vViewPosition;\ngeometry.normal \x3d normal;\ngeometry.viewDir \x3d ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal \x3d clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi \x3d saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness \x3d\x3d 0.0 ) {\n\t\tmaterial.iridescence \x3d 0.0;\n\t} else {\n\t\tmaterial.iridescence \x3d saturate( material.iridescence );\n\t}\n\tif ( material.iridescence \x3e 0.0 ) {\n\t\tmaterial.iridescenceFresnel \x3d evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 \x3d Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) \x26\x26 NUM_POINT_LIGHT_SHADOWS \x3e 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight \x3d pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) \x26\x26 ( UNROLLED_LOOP_INDEX \x3c NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow \x3d pointLightShadows[ i ];\n\t\tdirectLight.color *\x3d ( directLight.visible \x26\x26 receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) \x26\x26 NUM_SPOT_LIGHT_SHADOWS \x3e 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight \x3d spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX \x3c NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX \x3c NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX \x3c NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord \x3d vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap \x3d all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor \x3d texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color \x3d inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) \x26\x26 ( UNROLLED_LOOP_INDEX \x3c NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow \x3d spotLightShadows[ i ];\n\t\tdirectLight.color *\x3d ( directLight.visible \x26\x26 receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) \x26\x26 NUM_DIR_LIGHT_SHADOWS \x3e 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight \x3d directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) \x26\x26 ( UNROLLED_LOOP_INDEX \x3c NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow \x3d directionalLightShadows[ i ];\n\t\tdirectLight.color *\x3d ( directLight.visible \x26\x26 receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight \x3d rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance \x3d vec3( 0.0 );\n\tvec3 irradiance \x3d getAmbientLightIrradiance( ambientLightColor );\n\tirradiance +\x3d getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS \x3e 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i \x3d 0; i \x3c NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance +\x3d getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance \x3d vec3( 0.0 );\n\tvec3 clearcoatRadiance \x3d vec3( 0.0 );\n#endif",
lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel \x3d texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance \x3d lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance +\x3d lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) \x26\x26 defined( STANDARD ) \x26\x26 defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance +\x3d getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) \x26\x26 defined( RE_IndirectSpecular )\n\tradiance +\x3d getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance +\x3d getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",
lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) \x26\x26 defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT \x3d vIsPerspective \x3d\x3d 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",
logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) \x26\x26 defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth \x3d 1.0 + gl_Position.w;\n\t\tvIsPerspective \x3d float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z \x3d log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *\x3d gl_Position.w;\n\t\t}\n\t#endif\n#endif",
map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor \x3d texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor \x3d vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *\x3d sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",
map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv \x3d ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *\x3d texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *\x3d texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",
metalnessmap_fragment:"float metalnessFactor \x3d metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness \x3d texture2D( metalnessMap, vUv );\n\tmetalnessFactor *\x3d texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) \x26\x26 defined( MORPHTARGETS_TEXTURE )\n\tvColor *\x3d morphTargetBaseInfluence;\n\tfor ( int i \x3d 0; i \x3c MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] !\x3d 0.0 ) vColor +\x3d getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] !\x3d 0.0 ) vColor +\x3d getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",
morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *\x3d morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i \x3d 0; i \x3c MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] !\x3d 0.0 ) objectNormal +\x3d getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal +\x3d morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal +\x3d morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal +\x3d morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal +\x3d morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",
morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex \x3d vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y \x3d texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x \x3d texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV \x3d ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",
morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *\x3d morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i \x3d 0; i \x3c MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] !\x3d 0.0 ) transformed +\x3d getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed +\x3d morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed +\x3d morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed +\x3d morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed +\x3d morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed +\x3d morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed +\x3d morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed +\x3d morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed +\x3d morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",
normal_fragment_begin:"float faceDirection \x3d gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx \x3d dFdx( vViewPosition );\n\tvec3 fdy \x3d dFdy( vViewPosition );\n\tvec3 normal \x3d normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal \x3d normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal \x3d normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent \x3d normalize( vTangent );\n\t\tvec3 bitangent \x3d normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent \x3d tangent * faceDirection;\n\t\t\tbitangent \x3d bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN \x3d mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal \x3d normal;",
normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal \x3d texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal \x3d - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal \x3d normal * faceDirection;\n\t#endif\n\tnormal \x3d normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN \x3d texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *\x3d normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal \x3d normalize( vTBN * mapN );\n\t#else\n\t\tnormal \x3d perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal \x3d perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",
normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal \x3d normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent \x3d normalize( transformedTangent );\n\t\tvBitangent \x3d normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",
normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) \x26\x26 ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 \x3d dFdx( eye_pos.xyz );\n\t\tvec3 q1 \x3d dFdy( eye_pos.xyz );\n\t\tvec2 st0 \x3d dFdx( vUv.st );\n\t\tvec2 st1 \x3d dFdy( vUv.st );\n\t\tvec3 N \x3d surf_norm;\n\t\tvec3 q1perp \x3d cross( q1, N );\n\t\tvec3 q0perp \x3d cross( N, q0 );\n\t\tvec3 T \x3d q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B \x3d q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det \x3d max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale \x3d ( det \x3d\x3d 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",
clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal \x3d geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN \x3d texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *\x3d clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal \x3d normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal \x3d perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",
clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a \x3d 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *\x3d material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );",
packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale \x3d 256. / 255.;const float UnpackDownscale \x3d 255. / 256.;\nconst vec3 PackFactors \x3d vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors \x3d UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 \x3d 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r \x3d vec4( fract( v * PackFactors ), v );\n\tr.yzw -\x3d r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r \x3d vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",
premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *\x3d gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition \x3d vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition \x3d instanceMatrix * mvPosition;\n#endif\nmvPosition \x3d modelViewMatrix * mvPosition;\ngl_Position \x3d projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb \x3d dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position \x3d rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB \x3d vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB \x3d mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",
roughnessmap_fragment:"float roughnessFactor \x3d roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness \x3d texture2D( roughnessMap, vUv );\n\troughnessFactor *\x3d texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS \x3e 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS \x3e 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS \x3e 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS \x3e 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS \x3e 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion \x3d 1.0;\n\t\tvec2 distribution \x3d texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow \x3d step( compare , distribution.x );\n\t\tif (hard_shadow !\x3d 1.0 ) {\n\t\t\tfloat distance \x3d compare - distribution.x ;\n\t\t\tfloat variance \x3d max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability \x3d variance / (variance + distance * distance );\t\t\tsoftness_probability \x3d clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion \x3d clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow \x3d 1.0;\n\t\tshadowCoord.xyz /\x3d shadowCoord.w;\n\t\tshadowCoord.z +\x3d shadowBias;\n\t\tbool inFrustum \x3d shadowCoord.x \x3e\x3d 0.0 \x26\x26 shadowCoord.x \x3c\x3d 1.0 \x26\x26 shadowCoord.y \x3e\x3d 0.0 \x26\x26 shadowCoord.y \x3c\x3d 1.0;\n\t\tbool frustumTest \x3d inFrustum \x26\x26 shadowCoord.z \x3c\x3d 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize \x3d vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 \x3d - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 \x3d - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 \x3d + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 \x3d + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 \x3d dx0 / 2.0;\n\t\t\tfloat dy2 \x3d dy0 / 2.0;\n\t\t\tfloat dx3 \x3d dx1 / 2.0;\n\t\t\tfloat dy3 \x3d dy1 / 2.0;\n\t\t\tshadow \x3d (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize \x3d vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx \x3d texelSize.x;\n\t\t\tfloat dy \x3d texelSize.y;\n\t\t\tvec2 uv \x3d shadowCoord.xy;\n\t\t\tvec2 f \x3d fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -\x3d f * texelSize;\n\t\t\tshadow \x3d (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow \x3d VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow \x3d texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV \x3d abs( v );\n\t\tfloat scaleToCube \x3d 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *\x3d scaleToCube;\n\t\tv *\x3d scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar \x3d v.xy;\n\t\tfloat almostATexel \x3d 1.5 * texelSizeY;\n\t\tfloat almostOne \x3d 1.0 - almostATexel;\n\t\tif ( absV.z \x3e\x3d almostOne ) {\n\t\t\tif ( v.z \x3e 0.0 )\n\t\t\t\tplanar.x \x3d 4.0 - v.x;\n\t\t} else if ( absV.x \x3e\x3d almostOne ) {\n\t\t\tfloat signX \x3d sign( v.x );\n\t\t\tplanar.x \x3d v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y \x3e\x3d almostOne ) {\n\t\t\tfloat signY \x3d sign( v.y );\n\t\t\tplanar.x \x3d v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y \x3d v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize \x3d vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition \x3d shadowCoord.xyz;\n\t\tfloat dp \x3d ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp +\x3d shadowBias;\n\t\tvec3 bd3D \x3d normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset \x3d vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",
shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS \x3e 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS \x3e 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS \x3e 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS \x3e 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",
shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) \x26\x26 ( NUM_DIR_LIGHT_SHADOWS \x3e 0 || NUM_POINT_LIGHT_SHADOWS \x3e 0 ) ) || ( NUM_SPOT_LIGHT_COORDS \x3e 0 )\n\tvec3 shadowWorldNormal \x3d inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS \x3e 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition \x3d worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] \x3d directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS \x3e 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition \x3d worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] \x3d pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS \x3e 0\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition \x3d worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) \x26\x26 UNROLLED_LOOP_INDEX \x3c NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz +\x3d shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] \x3d spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",
shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow \x3d 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS \x3e 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight \x3d directionalLightShadows[ i ];\n\t\tshadow *\x3d receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS \x3e 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight \x3d spotLightShadows[ i ];\n\t\tshadow *\x3d receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS \x3e 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight \x3d pointLightShadows[ i ];\n\t\tshadow *\x3d receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",
skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX \x3d getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY \x3d getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ \x3d getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW \x3d getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j \x3d i * 4.0;\n\t\tfloat x \x3d mod( j, float( boneTextureSize ) );\n\t\tfloat y \x3d floor( j / float( boneTextureSize ) );\n\t\tfloat dx \x3d 1.0 / float( boneTextureSize );\n\t\tfloat dy \x3d 1.0 / float( boneTextureSize );\n\t\ty \x3d dy * ( y + 0.5 );\n\t\tvec4 v1 \x3d texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 \x3d texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 \x3d texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 \x3d texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone \x3d mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",
skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex \x3d bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned \x3d vec4( 0.0 );\n\tskinned +\x3d boneMatX * skinVertex * skinWeight.x;\n\tskinned +\x3d boneMatY * skinVertex * skinWeight.y;\n\tskinned +\x3d boneMatZ * skinVertex * skinWeight.z;\n\tskinned +\x3d boneMatW * skinVertex * skinWeight.w;\n\ttransformed \x3d ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix \x3d mat4( 0.0 );\n\tskinMatrix +\x3d skinWeight.x * boneMatX;\n\tskinMatrix +\x3d skinWeight.y * boneMatY;\n\tskinMatrix +\x3d skinWeight.z * boneMatZ;\n\tskinMatrix +\x3d skinWeight.w * boneMatW;\n\tskinMatrix \x3d bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal \x3d vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent \x3d vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",
specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular \x3d texture2D( specularMap, vUv );\n\tspecularStrength \x3d texelSpecular.r;\n#else\n\tspecularStrength \x3d 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb \x3d toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *\x3d toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *\x3d toneMappingExposure;\n\tcolor \x3d max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a \x3d v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b \x3d v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat \x3d mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat \x3d mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *\x3d toneMappingExposure / 0.6;\n\tcolor \x3d ACESInputMat * color;\n\tcolor \x3d RRTAndODTFit( color );\n\tcolor \x3d ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",
transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission \x3d transmission;\n\tmaterial.transmissionAlpha \x3d 1.0;\n\tmaterial.thickness \x3d thickness;\n\tmaterial.attenuationDistance \x3d attenuationDistance;\n\tmaterial.attenuationColor \x3d attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *\x3d texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *\x3d texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos \x3d vWorldPosition;\n\tvec3 v \x3d normalize( cameraPosition - pos );\n\tvec3 n \x3d inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission \x3d getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha \x3d mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse \x3d mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",
transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {\n\t\tuv \x3d uv * texelSize.zw + 0.5;\n\t\tvec2 iuv \x3d floor( uv );\n\t\tvec2 fuv \x3d fract( uv );\n\t\tfloat g0x \x3d g0( fuv.x );\n\t\tfloat g1x \x3d g1( fuv.x );\n\t\tfloat h0x \x3d h0( fuv.x );\n\t\tfloat h1x \x3d h1( fuv.x );\n\t\tfloat h0y \x3d h0( fuv.y );\n\t\tfloat h1y \x3d h1( fuv.y );\n\t\tvec2 p0 \x3d ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 \x3d ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 \x3d ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 \x3d ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\t\n\t\tvec2 lodFudge \x3d pow( 1.95, lod ) / fullSize;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize \x3d vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize \x3d vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv \x3d 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv \x3d 1.0 / cLodSize;\n\t\tvec2 fullSize \x3d vec2( textureSize( sampler, 0 ) );\n\t\tvec4 fSample \x3d bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );\n\t\tvec4 cSample \x3d bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector \x3d refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x \x3d length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y \x3d length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z \x3d length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod \x3d log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient \x3d -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance \x3d exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay \x3d getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit \x3d position + transmissionRay;\n\t\tvec4 ndcPos \x3d projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords \x3d ndcPos.xy / ndcPos.w;\n\t\trefractionCoords +\x3d 1.0;\n\t\trefractionCoords /\x3d 2.0;\n\t\tvec4 transmittedLight \x3d getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor \x3d applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F \x3d EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",
uv_pars_fragment:"#if ( defined( USE_UV ) \x26\x26 ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv \x3d ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",
uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 \x3d ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS \x3e 0\n\tvec4 worldPosition \x3d vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition \x3d instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition \x3d modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv \x3d ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position \x3d vec4( position.xy, 1.0, 1.0 );\n}",
background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor \x3d texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor \x3d vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *\x3d backgroundIntensity;\n\tgl_FragColor \x3d texColor;\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n}",
backgroundCube_vert:"varying vec3 vWorldDirection;\n#include \x3ccommon\x3e\nvoid main() {\n\tvWorldDirection \x3d transformDirection( position, modelMatrix );\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\tgl_Position.z \x3d gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include \x3ccube_uv_reflection_fragment\x3e\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor \x3d textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor \x3d textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor \x3d vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *\x3d backgroundIntensity;\n\tgl_FragColor \x3d texColor;\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n}",
cube_vert:"varying vec3 vWorldDirection;\n#include \x3ccommon\x3e\nvoid main() {\n\tvWorldDirection \x3d transformDirection( position, modelMatrix );\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\tgl_Position.z \x3d gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor \x3d textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor \x3d texColor;\n\tgl_FragColor.a *\x3d opacity;\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n}",
depth_vert:"#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include \x3cbeginnormal_vertex\x3e\n\t\t#include \x3cmorphnormal_vertex\x3e\n\t\t#include \x3cskinnormal_vertex\x3e\n\t#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvHighPrecisionZW \x3d gl_Position.zw;\n}",
depth_frag:"#if DEPTH_PACKING \x3d\x3d 3200\n\tuniform float opacity;\n#endif\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( 1.0 );\n\t#if DEPTH_PACKING \x3d\x3d 3200\n\t\tdiffuseColor.a \x3d opacity;\n\t#endif\n\t#include \x3cmap_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3clogdepthbuf_fragment\x3e\n\tfloat fragCoordZ \x3d 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING \x3d\x3d 3200\n\t\tgl_FragColor \x3d vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING \x3d\x3d 3201\n\t\tgl_FragColor \x3d packDepthToRGBA( fragCoordZ );\n\t#endif\n}",
distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include \x3cbeginnormal_vertex\x3e\n\t\t#include \x3cmorphnormal_vertex\x3e\n\t\t#include \x3cskinnormal_vertex\x3e\n\t#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvWorldPosition \x3d worldPosition.xyz;\n}",
distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main () {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( 1.0 );\n\t#include \x3cmap_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\tfloat dist \x3d length( vWorldPosition - referencePosition );\n\tdist \x3d ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist \x3d saturate( dist );\n\tgl_FragColor \x3d packDepthToRGBA( dist );\n}",
equirect_vert:"varying vec3 vWorldDirection;\n#include \x3ccommon\x3e\nvoid main() {\n\tvWorldDirection \x3d transformDirection( position, modelMatrix );\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include \x3ccommon\x3e\nvoid main() {\n\tvec3 direction \x3d normalize( vWorldDirection );\n\tvec2 sampleUV \x3d equirectUv( direction );\n\tgl_FragColor \x3d texture2D( tEquirect, sampleUV );\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n}",
linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\tvLineDistance \x3d scale * lineDistance;\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cmorphcolor_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tif ( mod( vLineDistance, totalSize ) \x3e dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight \x3d vec3( 0.0 );\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\toutgoingLight \x3d diffuseColor.rgb;\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n}",
meshbasic_vert:"#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cenvmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cmorphcolor_vertex\x3e\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include \x3cbeginnormal_vertex\x3e\n\t\t#include \x3cmorphnormal_vertex\x3e\n\t\t#include \x3cskinbase_vertex\x3e\n\t\t#include \x3cskinnormal_vertex\x3e\n\t\t#include \x3cdefaultnormal_vertex\x3e\n\t#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cenvmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include \x3ccommon\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cenvmap_common_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel \x3d texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse +\x3d lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse +\x3d vec3( 1.0 );\n\t#endif\n\t#include \x3caomap_fragment\x3e\n\treflectedLight.indirectDiffuse *\x3d diffuseColor.rgb;\n\tvec3 outgoingLight \x3d reflectedLight.indirectDiffuse;\n\t#include \x3cenvmap_fragment\x3e\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cenvmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cnormal_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cmorphcolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cenvmap_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cenvmap_common_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3cnormal_pars_fragment\x3e\n#include \x3clights_lambert_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\t#include \x3clights_lambert_fragment\x3e\n\t#include \x3clights_fragment_begin\x3e\n\t#include \x3clights_fragment_maps\x3e\n\t#include \x3clights_fragment_end\x3e\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include \x3cenvmap_fragment\x3e\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cnormal_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cmorphcolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n}",
meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include \x3ccommon\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cnormal_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\tvec3 viewDir \x3d normalize( vViewPosition );\n\tvec3 x \x3d normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y \x3d cross( viewDir, x );\n\tvec2 uv \x3d vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor \x3d texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor \x3d vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight \x3d diffuseColor.rgb * matcapColor.rgb;\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cnormal_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition \x3d - mvPosition.xyz;\n#endif\n}",
meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include \x3cpacking\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cnormal_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\tgl_FragColor \x3d vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a \x3d 1.0;\n\t#endif\n}",
meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cenvmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cnormal_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cmorphcolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cenvmap_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cenvmap_common_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3cnormal_pars_fragment\x3e\n#include \x3clights_phong_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\t#include \x3clights_phong_fragment\x3e\n\t#include \x3clights_fragment_begin\x3e\n\t#include \x3clights_fragment_maps\x3e\n\t#include \x3clights_fragment_end\x3e\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include \x3cenvmap_fragment\x3e\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cnormal_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cmorphcolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n#ifdef USE_TRANSMISSION\n\tvWorldPosition \x3d worldPosition.xyz;\n#endif\n}",
meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3ciridescence_fragment\x3e\n#include \x3ccube_uv_reflection_fragment\x3e\n#include \x3cenvmap_common_pars_fragment\x3e\n#include \x3cenvmap_physical_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3cnormal_pars_fragment\x3e\n#include \x3clights_physical_pars_fragment\x3e\n#include \x3ctransmission_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3cclearcoat_pars_fragment\x3e\n#include \x3ciridescence_pars_fragment\x3e\n#include \x3croughnessmap_pars_fragment\x3e\n#include \x3cmetalnessmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3croughnessmap_fragment\x3e\n\t#include \x3cmetalnessmap_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\t#include \x3cclearcoat_normal_fragment_begin\x3e\n\t#include \x3cclearcoat_normal_fragment_maps\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\t#include \x3clights_physical_fragment\x3e\n\t#include \x3clights_fragment_begin\x3e\n\t#include \x3clights_fragment_maps\x3e\n\t#include \x3clights_fragment_end\x3e\n\t#include \x3caomap_fragment\x3e\n\tvec3 totalDiffuse \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular \x3d reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include \x3ctransmission_fragment\x3e\n\tvec3 outgoingLight \x3d totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp \x3d 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight \x3d outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc \x3d saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc \x3d F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight \x3d outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cnormal_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cmorphcolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cgradientmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3cnormal_pars_fragment\x3e\n#include \x3clights_toon_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\t#include \x3clights_toon_fragment\x3e\n\t#include \x3clights_fragment_begin\x3e\n\t#include \x3clights_fragment_maps\x3e\n\t#include \x3clights_fragment_end\x3e\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
points_vert:"uniform float size;\nuniform float scale;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cmorphcolor_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\tgl_PointSize \x3d size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective \x3d isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *\x3d ( scale / - mvPosition.z );\n\t#endif\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cmap_particle_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec3 outgoingLight \x3d vec3( 0.0 );\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_particle_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\toutgoingLight \x3d diffuseColor.rgb;\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n}",
shadow_vert:"#include \x3ccommon\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\nvoid main() {\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cshadowmask_pars_fragment\x3e\nvoid main() {\n\t#include \x3clogdepthbuf_fragment\x3e\n\tgl_FragColor \x3d vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}",
sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\tvec4 mvPosition \x3d modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x \x3d length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y \x3d length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective \x3d isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *\x3d - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition \x3d ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x \x3d cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y \x3d sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy +\x3d rotatedPosition;\n\tgl_Position \x3d projectionMatrix * mvPosition;\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec3 outgoingLight \x3d vec3( 0.0 );\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\toutgoingLight \x3d diffuseColor.rgb;\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}"},
ab={common:{diffuse:{value:new gb(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new hb},uv2Transform:{value:new hb},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},
bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new za(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5E-4},fogNear:{value:1},fogFar:{value:2E3},fogColor:{value:new gb(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],
properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},
pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new gb(16777215)},
opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new hb}},sprite:{diffuse:{value:new gb(16777215)},opacity:{value:1},center:{value:new za(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new hb}}},Xc={basic:{uniforms:O([ab.common,ab.specularmap,ab.envmap,ab.aomap,ab.lightmap,ab.fog]),vertexShader:Ib.meshbasic_vert,fragmentShader:Ib.meshbasic_frag},lambert:{uniforms:O([ab.common,
ab.specularmap,ab.envmap,ab.aomap,ab.lightmap,ab.emissivemap,ab.bumpmap,ab.normalmap,ab.displacementmap,ab.fog,ab.lights,{emissive:{value:new gb(0)}}]),vertexShader:Ib.meshlambert_vert,fragmentShader:Ib.meshlambert_frag},phong:{uniforms:O([ab.common,ab.specularmap,ab.envmap,ab.aomap,ab.lightmap,ab.emissivemap,ab.bumpmap,ab.normalmap,ab.displacementmap,ab.fog,ab.lights,{emissive:{value:new gb(0)},specular:{value:new gb(1118481)},shininess:{value:30}}]),vertexShader:Ib.meshphong_vert,fragmentShader:Ib.meshphong_frag},
standard:{uniforms:O([ab.common,ab.envmap,ab.aomap,ab.lightmap,ab.emissivemap,ab.bumpmap,ab.normalmap,ab.displacementmap,ab.roughnessmap,ab.metalnessmap,ab.fog,ab.lights,{emissive:{value:new gb(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ib.meshphysical_vert,fragmentShader:Ib.meshphysical_frag},toon:{uniforms:O([ab.common,ab.aomap,ab.lightmap,ab.emissivemap,ab.bumpmap,ab.normalmap,ab.displacementmap,ab.gradientmap,ab.fog,ab.lights,{emissive:{value:new gb(0)}}]),
vertexShader:Ib.meshtoon_vert,fragmentShader:Ib.meshtoon_frag},matcap:{uniforms:O([ab.common,ab.bumpmap,ab.normalmap,ab.displacementmap,ab.fog,{matcap:{value:null}}]),vertexShader:Ib.meshmatcap_vert,fragmentShader:Ib.meshmatcap_frag},points:{uniforms:O([ab.points,ab.fog]),vertexShader:Ib.points_vert,fragmentShader:Ib.points_frag},dashed:{uniforms:O([ab.common,ab.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ib.linedashed_vert,fragmentShader:Ib.linedashed_frag},depth:{uniforms:O([ab.common,
ab.displacementmap]),vertexShader:Ib.depth_vert,fragmentShader:Ib.depth_frag},normal:{uniforms:O([ab.common,ab.bumpmap,ab.normalmap,ab.displacementmap,{opacity:{value:1}}]),vertexShader:Ib.meshnormal_vert,fragmentShader:Ib.meshnormal_frag},sprite:{uniforms:O([ab.sprite,ab.fog]),vertexShader:Ib.sprite_vert,fragmentShader:Ib.sprite_frag},background:{uniforms:{uvTransform:{value:new hb},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ib.background_vert,fragmentShader:Ib.background_frag},
backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Ib.backgroundCube_vert,fragmentShader:Ib.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ib.cube_vert,fragmentShader:Ib.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ib.equirect_vert,fragmentShader:Ib.equirect_frag},distanceRGBA:{uniforms:O([ab.common,ab.displacementmap,{referencePosition:{value:new aa},
nearDistance:{value:1},farDistance:{value:1E3}}]),vertexShader:Ib.distanceRGBA_vert,fragmentShader:Ib.distanceRGBA_frag},shadow:{uniforms:O([ab.lights,ab.fog,{color:{value:new gb(0)},opacity:{value:1}}]),vertexShader:Ib.shadow_vert,fragmentShader:Ib.shadow_frag}};Xc.physical={uniforms:O([Xc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new za(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},
iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new gb(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new za},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},
attenuationColor:{value:new gb(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new gb(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Ib.meshphysical_vert,fragmentShader:Ib.meshphysical_frag};const kg={r:0,b:0,g:0};class Ug extends Sg{constructor(a=-1,b=1,d=1,l=-1,q=.1,y=2E3){super();this.isOrthographicCamera=!0;this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=a;this.right=b;this.top=d;this.bottom=l;this.near=q;this.far=y;this.updateProjectionMatrix()}copy(a,
b){super.copy(a,b);this.left=a.left;this.right=a.right;this.top=a.top;this.bottom=a.bottom;this.near=a.near;this.far=a.far;this.zoom=a.zoom;this.view=null===a.view?null:Object.assign({},a.view);return this}setViewOffset(a,b,d,l,q,y){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=d;this.view.offsetY=l;this.view.width=q;this.view.height=y;this.updateProjectionMatrix()}clearViewOffset(){null!==
this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()}updateProjectionMatrix(){var a=(this.right-this.left)/(2*this.zoom),b=(this.top-this.bottom)/(2*this.zoom),d=(this.right+this.left)/2,l=(this.top+this.bottom)/2;let q=d-a;d+=a;a=l+b;b=l-b;null!==this.view&&this.view.enabled&&(l=(this.right-this.left)/this.view.fullWidth/this.zoom,b=(this.top-this.bottom)/this.view.fullHeight/this.zoom,q+=l*this.view.offsetX,d=q+l*this.view.width,a-=b*this.view.offsetY,b=a-b*this.view.height);this.projectionMatrix.makeOrthographic(q,
d,a,b,this.near,this.far);this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(a){a=super.toJSON(a);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=this.right;a.object.top=this.top;a.object.bottom=this.bottom;a.object.near=this.near;a.object.far=this.far;null!==this.view&&(a.object.view=Object.assign({},this.view));return a}}const sj=[.125,.215,.35,.446,.526,.582],ki=new Ug,tj=new gb;let li=null;const te=(1+Math.sqrt(5))/2,Ze=1/te,uj=[new aa(1,1,1),new aa(-1,1,1),
new aa(1,1,-1),new aa(-1,1,-1),new aa(0,te,Ze),new aa(0,te,-Ze),new aa(Ze,0,te),new aa(-Ze,0,te),new aa(te,Ze,0),new aa(-te,Ze,0)];class Bh{constructor(a){this._renderer=a;this._pingPongRenderTarget=null;this._cubeSize=this._lodMax=0;this._lodPlanes=[];this._sizeLods=[];this._sigmas=[];this._equirectMaterial=this._cubemapMaterial=this._blurMaterial=null;this._compileMaterial(this._blurMaterial)}fromScene(a,b=0,d=.1,l=100){li=this._renderer.getRenderTarget();this._setSize(256);const q=this._allocateTargets();
q.depthBuffer=!0;this._sceneToCubeUV(a,d,l,q);0<b&&this._blur(q,0,0,b);this._applyPMREM(q);this._cleanup(q);return q}fromEquirectangular(a,b=null){return this._fromTexture(a,b)}fromCubemap(a,b=null){return this._fromTexture(a,b)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Wa(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=da(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose();
null!==this._cubemapMaterial&&this._cubemapMaterial.dispose();null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(a){this._lodMax=Math.floor(Math.log2(a));this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose();null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let a=0;a<this._lodPlanes.length;a++)this._lodPlanes[a].dispose()}_cleanup(a){this._renderer.setRenderTarget(li);a.scissorTest=!1;Oa(a,0,0,a.width,
a.height)}_fromTexture(a,b){301===a.mapping||302===a.mapping?this._setSize(0===a.image.length?16:a.image[0].width||a.image[0].image.width):this._setSize(a.image.width/4);li=this._renderer.getRenderTarget();b=b||this._allocateTargets();this._textureToCubeUV(a,b);this._applyPMREM(b);this._cleanup(b);return b}_allocateTargets(){const a=3*Math.max(this._cubeSize,112),b=4*this._cubeSize;var d={magFilter:1006,minFilter:1006,generateMipmaps:!1,type:1016,format:1023,encoding:3E3,depthBuffer:!1};const l=Ha(a,
b,d);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==a||this._pingPongRenderTarget.height!==b){null!==this._pingPongRenderTarget&&this._dispose();this._pingPongRenderTarget=Ha(a,b,d);var {_lodMax:q}=this;d=q;var y=[];const G=[],M=[];let N=d;const P=d-4+1+sj.length;for(let T=0;T<P;T++){var A=Math.pow(2,N);G.push(A);var D=1/A;T>d-4?D=sj[T-d+4-1]:0===T&&(D=0);M.push(D);D=1/(A-2);A=-D;D=1+D;var F=[A,A,D,A,D,D,A,A,D,D,A,D];A=new Float32Array(108);D=new Float32Array(72);const S=
new Float32Array(36);for(let L=0;6>L;L++){const U=L%3*2/3-1,ma=2<L?0:-1;A.set([U,ma,0,U+2/3,ma,0,U+2/3,ma+1,0,U,ma,0,U+2/3,ma+1,0,U,ma+1,0],18*L);D.set(F,12*L);S.set([L,L,L,L,L,L],6*L)}F=new Kb;F.setAttribute("position",new fc(A,3));F.setAttribute("uv",new fc(D,2));F.setAttribute("faceIndex",new fc(S,1));y.push(F);4<N&&N--}({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}={lodPlanes:y,sizeLods:G,sigmas:M});d=q;q=new Float32Array(20);y=new aa(0,1,0);this._blurMaterial=new fd({name:"SphericalGaussianBlur",
defines:{n:20,CUBEUV_TEXEL_WIDTH:1/a,CUBEUV_TEXEL_HEIGHT:1/b,CUBEUV_MAX_MIP:`${d}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:q},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:y}},vertexShader:Pa(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include \x3ccube_uv_reflection_fragment\x3e\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta \x3d cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection \x3d vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis \x3d latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis \x3d vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis \x3d normalize( axis );\n\n\t\t\t\tgl_FragColor \x3d vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb +\x3d weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i \x3d 1; i \x3c n; i++ ) {\n\n\t\t\t\t\tif ( i \x3e\x3d samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta \x3d dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb +\x3d weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb +\x3d weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1})}return l}_compileMaterial(a){a=new xc(this._lodPlanes[0],a);this._renderer.compile(a,ki)}_sceneToCubeUV(a,b,d,l){b=new Dc(90,1,b,d);d=[1,-1,1,1,1,1];const q=[1,1,1,-1,-1,-1],y=this._renderer,A=y.autoClear,D=y.toneMapping;y.getClearColor(tj);y.toneMapping=0;y.autoClear=!1;var F=new Vd({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1});const G=new xc(new ae,F);let M=!1;const N=a.background;N?N.isColor&&(F.color.copy(N),a.background=null,M=!0):(F.color.copy(tj),
M=!0);for(F=0;6>F;F++){const P=F%3;0===P?(b.up.set(0,d[F],0),b.lookAt(q[F],0,0)):1===P?(b.up.set(0,0,d[F]),b.lookAt(0,q[F],0)):(b.up.set(0,d[F],0),b.lookAt(0,0,q[F]));const T=this._cubeSize;Oa(l,P*T,2<F?T:0,T,T);y.setRenderTarget(l);M&&y.render(G,b);y.render(a,b)}G.geometry.dispose();G.material.dispose();y.toneMapping=D;y.autoClear=A;a.background=N}_textureToCubeUV(a,b){const d=this._renderer;var l=301===a.mapping||302===a.mapping;l?(null===this._cubemapMaterial&&(this._cubemapMaterial=Wa()),this._cubemapMaterial.uniforms.flipEnvMap.value=
!1===a.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=da());const q=l?this._cubemapMaterial:this._equirectMaterial;l=new xc(this._lodPlanes[0],q);q.uniforms.envMap.value=a;a=this._cubeSize;Oa(b,0,0,3*a,2*a);d.setRenderTarget(b);d.render(l,ki)}_applyPMREM(a){const b=this._renderer,d=b.autoClear;b.autoClear=!1;for(let l=1;l<this._lodPlanes.length;l++)this._blur(a,l-1,l,Math.sqrt(this._sigmas[l]*this._sigmas[l]-this._sigmas[l-1]*this._sigmas[l-1]),uj[(l-1)%uj.length]);
b.autoClear=d}_blur(a,b,d,l,q){const y=this._pingPongRenderTarget;this._halfBlur(a,y,b,d,l,"latitudinal",q);this._halfBlur(y,a,d,d,l,"longitudinal",q)}_halfBlur(a,b,d,l,q,y,A){const D=this._renderer;var F=this._blurMaterial;"latitudinal"!==y&&"longitudinal"!==y&&console.error("blur direction must be either latitudinal or longitudinal!");const G=new xc(this._lodPlanes[l],F);F=F.uniforms;var M=this._sizeLods[d]-1;M=isFinite(q)?Math.PI/(2*M):2*Math.PI/39;var N=q/M;const P=isFinite(q)?1+Math.floor(3*
N):20;20<P&&console.warn(`sigmaRadians, ${q}, is too large and will clip, as it requested ${P} samples when the maximum is set to ${20}`);q=[];let T=0;for(let L=0;20>L;++L){var S=L/N;S=Math.exp(-S*S/2);q.push(S);0===L?T+=S:L<P&&(T+=2*S)}for(N=0;N<q.length;N++)q[N]/=T;F.envMap.value=a.texture;F.samples.value=P;F.weights.value=q;F.latitudinal.value="latitudinal"===y;A&&(F.poleAxis.value=A);({_lodMax:a}=this);F.dTheta.value=M;F.mipInt.value=a-d;d=this._sizeLods[l];Oa(b,3*d*(l>a-4?l-a+4:0),4*(this._cubeSize-
d),3*d,2*d);D.setRenderTarget(b);D.render(G,ki)}}const Xi=new rc,$i=new lg,Yi=new Yh,Zi=new Tf,Si=[],Ti=[],Wi=new Float32Array(16),Vi=new Float32Array(9),Ui=new Float32Array(4);class wl{constructor(a,b,d){this.id=a;this.addr=d;this.cache=[];this.setValue=Xb(b.type)}}class xl{constructor(a,b,d){this.id=a;this.addr=d;this.cache=[];this.size=b.size;this.setValue=kc(b.type)}}class yl{constructor(a){this.id=a;this.seq=[];this.map={}}setValue(a,b,d){const l=this.seq;for(let q=0,y=l.length;q!==y;++q){const A=
l[q];A.setValue(a,b[A.id],d)}}}const mi=/(\w+)(\])?(\[|\.)?/g;class mg{constructor(a,b){this.seq=[];this.map={};const d=a.getProgramParameter(b,a.ACTIVE_UNIFORMS);for(let G=0;G<d;++G){var l=a.getActiveUniform(b,G),q=a.getUniformLocation(b,l.name),y=this,A=l.name;const M=A.length;for(mi.lastIndex=0;;){const N=mi.exec(A),P=mi.lastIndex;var D=N[1],F=N[3];"]"===N[2]&&(D|=0);if(void 0===F||"["===F&&P+2===M){A=y;l=void 0===F?new wl(D,l,q):new xl(D,l,q);A.seq.push(l);A.map[l.id]=l;break}else F=y.map[D],
void 0===F&&(F=new yl(D),D=y,y=F,D.seq.push(y),D.map[y.id]=y),y=F}}}setValue(a,b,d,l){b=this.map[b];void 0!==b&&b.setValue(a,d,l)}setOptional(a,b,d){b=b[d];void 0!==b&&this.setValue(a,d,b)}static upload(a,b,d,l){for(let q=0,y=b.length;q!==y;++q){const A=b[q],D=d[A.id];!1!==D.needsUpdate&&A.setValue(a,D.value,l)}}static seqWithValue(a,b){const d=[];for(let l=0,q=a.length;l!==q;++l){const y=a[l];y.id in b&&d.push(y)}return d}}let Uk=0;const Eh=/^[ \t]*#include +<([\w\d./]+)>/gm,aj=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;
let zl=0;class Vk{constructor(){this.shaderCache=new Map;this.materialCache=new Map}update(a){var b=a.fragmentShader;const d=this._getShaderStage(a.vertexShader);b=this._getShaderStage(b);a=this._getShaderCacheForMaterial(a);!1===a.has(d)&&(a.add(d),d.usedTimes++);!1===a.has(b)&&(a.add(b),b.usedTimes++);return this}remove(a){const b=this.materialCache.get(a);for(const d of b)d.usedTimes--,0===d.usedTimes&&this.shaderCache.delete(d.code);this.materialCache.delete(a);return this}getVertexShaderID(a){return this._getShaderStage(a.vertexShader).id}getFragmentShaderID(a){return this._getShaderStage(a.fragmentShader).id}dispose(){this.shaderCache.clear();
this.materialCache.clear()}_getShaderCacheForMaterial(a){const b=this.materialCache;let d=b.get(a);void 0===d&&(d=new Set,b.set(a,d));return d}_getShaderStage(a){const b=this.shaderCache;let d=b.get(a);void 0===d&&(d=new Al(a),b.set(a,d));return d}}class Al{constructor(a){this.id=zl++;this.code=a;this.usedTimes=0}}let Wk=0;class Gh extends Fc{constructor(a){super();this.isMeshDepthMaterial=!0;this.type="MeshDepthMaterial";this.depthPacking=3200;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=
1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.setValues(a)}copy(a){super.copy(a);this.depthPacking=a.depthPacking;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this}}class Hh extends Fc{constructor(a){super();this.isMeshDistanceMaterial=!0;this.type="MeshDistanceMaterial";this.referencePosition=
new aa;this.nearDistance=1;this.farDistance=1E3;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.setValues(a)}copy(a){super.copy(a);this.referencePosition.copy(a.referencePosition);this.nearDistance=a.nearDistance;this.farDistance=a.farDistance;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;return this}}class vj extends Dc{constructor(a=
[]){super();this.isArrayCamera=!0;this.cameras=a}}class $e extends bc{constructor(){super();this.isGroup=!0;this.type="Group"}}const Bl={type:"move"};class ni{constructor(){this._hand=this._grip=this._targetRay=null}getHandSpace(){null===this._hand&&(this._hand=new $e,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1});return this._hand}getTargetRaySpace(){null===this._targetRay&&(this._targetRay=new $e,this._targetRay.matrixAutoUpdate=!1,
this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new aa,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new aa);return this._targetRay}getGripSpace(){null===this._grip&&(this._grip=new $e,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new aa,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new aa);return this._grip}dispatchEvent(a){null!==this._targetRay&&
this._targetRay.dispatchEvent(a);null!==this._grip&&this._grip.dispatchEvent(a);null!==this._hand&&this._hand.dispatchEvent(a);return this}connect(a){if(a&&a.hand){const b=this._hand;if(b)for(const d of a.hand.values())this._getHandJoint(b,d)}this.dispatchEvent({type:"connected",data:a});return this}disconnect(a){this.dispatchEvent({type:"disconnected",data:a});null!==this._targetRay&&(this._targetRay.visible=!1);null!==this._grip&&(this._grip.visible=!1);null!==this._hand&&(this._hand.visible=!1);
return this}update(a,b,d){let l=null,q=null,y=null;const A=this._targetRay,D=this._grip,F=this._hand;if(a&&"visible-blurred"!==b.session.visibilityState){if(F&&a.hand){y=!0;for(var G of a.hand.values()){const M=b.getJointPose(G,d),N=this._getHandJoint(F,G);null!==M&&(N.matrix.fromArray(M.transform.matrix),N.matrix.decompose(N.position,N.rotation,N.scale),N.jointRadius=M.radius);N.visible=null!==M}G=F.joints["index-finger-tip"].position.distanceTo(F.joints["thumb-tip"].position);F.inputState.pinching&&
.025<G?(F.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:a.handedness,target:this})):!F.inputState.pinching&&.015>=G&&(F.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:a.handedness,target:this}))}else null!==D&&a.gripSpace&&(q=b.getPose(a.gripSpace,d),null!==q&&(D.matrix.fromArray(q.transform.matrix),D.matrix.decompose(D.position,D.rotation,D.scale),q.linearVelocity?(D.hasLinearVelocity=!0,D.linearVelocity.copy(q.linearVelocity)):D.hasLinearVelocity=
!1,q.angularVelocity?(D.hasAngularVelocity=!0,D.angularVelocity.copy(q.angularVelocity)):D.hasAngularVelocity=!1));null!==A&&(l=b.getPose(a.targetRaySpace,d),null===l&&null!==q&&(l=q),null!==l&&(A.matrix.fromArray(l.transform.matrix),A.matrix.decompose(A.position,A.rotation,A.scale),l.linearVelocity?(A.hasLinearVelocity=!0,A.linearVelocity.copy(l.linearVelocity)):A.hasLinearVelocity=!1,l.angularVelocity?(A.hasAngularVelocity=!0,A.angularVelocity.copy(l.angularVelocity)):A.hasAngularVelocity=!1,this.dispatchEvent(Bl)))}null!==
A&&(A.visible=null!==l);null!==D&&(D.visible=null!==q);null!==F&&(F.visible=null!==y);return this}_getHandJoint(a,b){if(void 0===a.joints[b.jointName]){const d=new $e;d.matrixAutoUpdate=!1;d.visible=!1;a.joints[b.jointName]=d;a.add(d)}return a.joints[b.jointName]}}class wj extends rc{constructor(a,b,d,l,q,y,A,D,F,G){G=void 0!==G?G:1026;if(1026!==G&&1027!==G)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===d&&1026===G&&(d=1014);void 0===d&&1027===
G&&(d=1020);super(null,l,q,y,A,D,G,d,F);this.isDepthTexture=!0;this.image={width:a,height:b};this.magFilter=void 0!==A?A:1003;this.minFilter=void 0!==D?D:1003;this.generateMipmaps=this.flipY=!1}}class Xk extends Uc{constructor(a,b){function d(Sa){var $a=Ga.indexOf(Sa.inputSource);-1!==$a&&($a=ja[$a],void 0!==$a&&$a.dispatchEvent({type:Sa.type,data:Sa.inputSource}))}function l(){D.removeEventListener("select",d);D.removeEventListener("selectstart",d);D.removeEventListener("selectend",d);D.removeEventListener("squeeze",
d);D.removeEventListener("squeezestart",d);D.removeEventListener("squeezeend",d);D.removeEventListener("end",l);D.removeEventListener("inputsourceschange",q);for(let Sa=0;Sa<ja.length;Sa++){const $a=Ga[Sa];null!==$a&&(Ga[Sa]=null,ja[Sa].disconnect($a))}Na=Ra=null;a.setRenderTarget(na);sa=D=S=L=U=null;Bb.stop();A.isPresenting=!1;A.dispatchEvent({type:"sessionend"})}function q(Sa){for(var $a=0;$a<Sa.removed.length;$a++){var bb=Sa.removed[$a],rb=Ga.indexOf(bb);0<=rb&&(Ga[rb]=null,ja[rb].disconnect(bb))}for($a=
0;$a<Sa.added.length;$a++){bb=Sa.added[$a];rb=Ga.indexOf(bb);if(-1===rb){for(let nb=0;nb<ja.length;nb++)if(nb>=Ga.length){Ga.push(bb);rb=nb;break}else if(null===Ga[nb]){Ga[nb]=bb;rb=nb;break}if(-1===rb)break}(rb=ja[rb])&&rb.connect(bb)}}function y(Sa,$a){null===$a?Sa.matrixWorld.copy(Sa.matrix):Sa.matrixWorld.multiplyMatrices($a.matrixWorld,Sa.matrix);Sa.matrixWorldInverse.copy(Sa.matrixWorld).invert()}super();const A=this;let D=null,F=1,G=null,M="local-floor",N=1,P=null,T=null,S=null,L=null,U=null,
ma=null;const ba=b.getContextAttributes();let na=null,sa=null;const ja=[],Ga=[],oa=new Set,wa=new Map,ya=new Dc;ya.layers.enable(1);ya.viewport=new cc;const xa=new Dc;xa.layers.enable(2);xa.viewport=new cc;const Va=[ya,xa],La=new vj;La.layers.enable(1);La.layers.enable(2);let Ra=null,Na=null;this.cameraAutoUpdate=!0;this.isPresenting=this.enabled=!1;this.getController=function(Sa){let $a=ja[Sa];void 0===$a&&($a=new ni,ja[Sa]=$a);return $a.getTargetRaySpace()};this.getControllerGrip=function(Sa){let $a=
ja[Sa];void 0===$a&&($a=new ni,ja[Sa]=$a);return $a.getGripSpace()};this.getHand=function(Sa){let $a=ja[Sa];void 0===$a&&($a=new ni,ja[Sa]=$a);return $a.getHandSpace()};this.setFramebufferScaleFactor=function(Sa){F=Sa;!0===A.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")};this.setReferenceSpaceType=function(Sa){M=Sa;!0===A.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")};this.getReferenceSpace=
function(){return P||G};this.setReferenceSpace=function(Sa){P=Sa};this.getBaseLayer=function(){return null!==L?L:U};this.getBinding=function(){return S};this.getFrame=function(){return ma};this.getSession=function(){return D};this.setSession=async function(Sa){D=Sa;if(null!==D){na=a.getRenderTarget();D.addEventListener("select",d);D.addEventListener("selectstart",d);D.addEventListener("selectend",d);D.addEventListener("squeeze",d);D.addEventListener("squeezestart",d);D.addEventListener("squeezeend",
d);D.addEventListener("end",l);D.addEventListener("inputsourceschange",q);!0!==ba.xrCompatible&&await b.makeXRCompatible();if(void 0===D.renderState.layers||!1===a.capabilities.isWebGL2)U=new XRWebGLLayer(D,b,{antialias:void 0===D.renderState.layers?ba.antialias:!0,alpha:ba.alpha,depth:ba.depth,stencil:ba.stencil,framebufferScaleFactor:F}),D.updateRenderState({baseLayer:U}),sa=new Yc(U.framebufferWidth,U.framebufferHeight,{format:1023,type:1009,encoding:a.outputEncoding,stencilBuffer:ba.stencil});
else{let bb=Sa=null;var $a=null;ba.depth&&($a=ba.stencil?b.DEPTH24_STENCIL8:b.DEPTH_COMPONENT24,Sa=ba.stencil?1027:1026,bb=ba.stencil?1020:1014);$a={colorFormat:b.RGBA8,depthFormat:$a,scaleFactor:F};S=new XRWebGLBinding(D,b);L=S.createProjectionLayer($a);D.updateRenderState({layers:[L]});sa=new Yc(L.textureWidth,L.textureHeight,{format:1023,type:1009,depthTexture:new wj(L.textureWidth,L.textureHeight,bb,void 0,void 0,void 0,void 0,void 0,void 0,Sa),stencilBuffer:ba.stencil,encoding:a.outputEncoding,
samples:ba.antialias?4:0});a.properties.get(sa).__ignoreDepthValues=L.ignoreDepthValues}sa.isXRRenderTarget=!0;this.setFoveation(N);P=null;G=await D.requestReferenceSpace(M);Bb.setContext(D);Bb.start();A.isPresenting=!0;A.dispatchEvent({type:"sessionstart"})}};const cb=new aa,ob=new aa;this.updateCamera=function(Sa){if(null!==D){La.near=xa.near=ya.near=Sa.near;La.far=xa.far=ya.far=Sa.far;if(Ra!==La.near||Na!==La.far)D.updateRenderState({depthNear:La.near,depthFar:La.far}),Ra=La.near,Na=La.far;var $a=
Sa.parent,bb=La.cameras;y(La,$a);for(var rb=0;rb<bb.length;rb++)y(bb[rb],$a);La.matrixWorld.decompose(La.position,La.quaternion,La.scale);Sa.matrix.copy(La.matrix);Sa.matrix.decompose(Sa.position,Sa.quaternion,Sa.scale);Sa=Sa.children;for(let ra=0,Za=Sa.length;ra<Za;ra++)Sa[ra].updateMatrixWorld(!0);if(2===bb.length){cb.setFromMatrixPosition(ya.matrixWorld);ob.setFromMatrixPosition(xa.matrixWorld);bb=cb.distanceTo(ob);var nb=ya.projectionMatrix.elements,Y=xa.projectionMatrix.elements,V=nb[14]/(nb[10]-
1);Sa=nb[14]/(nb[10]+1);$a=(nb[9]+1)/nb[5];rb=(nb[9]-1)/nb[5];var fa=(nb[8]-1)/nb[0],ia=(Y[8]+1)/Y[0];Y=V*fa;nb=V*ia;ia=bb/(-fa+ia);fa=ia*-fa;ya.matrixWorld.decompose(La.position,La.quaternion,La.scale);La.translateX(fa);La.translateZ(ia);La.matrixWorld.compose(La.position,La.quaternion,La.scale);La.matrixWorldInverse.copy(La.matrixWorld).invert();V+=ia;ia=Sa+ia;La.projectionMatrix.makePerspective(Y-fa,nb+(bb-fa),$a*Sa/ia*V,rb*Sa/ia*V,V,ia)}else La.projectionMatrix.copy(ya.projectionMatrix)}};this.getCamera=
function(){return La};this.getFoveation=function(){if(null!==L||null!==U)return N};this.setFoveation=function(Sa){N=Sa;null!==L&&(L.fixedFoveation=Sa);null!==U&&void 0!==U.fixedFoveation&&(U.fixedFoveation=Sa)};this.getPlanes=function(){return oa};let ub=null;const Bb=new W;Bb.setAnimationLoop(function(Sa,$a){T=$a.getViewerPose(P||G);ma=$a;if(null!==T){var bb=T.views;null!==U&&(a.setRenderTargetFramebuffer(sa,U.framebuffer),a.setRenderTarget(sa));var rb=!1;bb.length!==La.cameras.length&&(La.cameras.length=
0,rb=!0);for(var nb=0;nb<bb.length;nb++){const fa=bb[nb];let ia;if(null!==U)ia=U.getViewport(fa);else{var Y=S.getViewSubImage(L,fa);ia=Y.viewport;0===nb&&(a.setRenderTargetTextures(sa,Y.colorTexture,L.ignoreDepthValues?void 0:Y.depthStencilTexture),a.setRenderTarget(sa))}Y=Va[nb];void 0===Y&&(Y=new Dc,Y.layers.enable(nb),Y.viewport=new cc,Va[nb]=Y);Y.matrix.fromArray(fa.transform.matrix);Y.projectionMatrix.fromArray(fa.projectionMatrix);Y.viewport.set(ia.x,ia.y,ia.width,ia.height);0===nb&&La.matrix.copy(Y.matrix);
!0===rb&&La.cameras.push(Y)}}for(bb=0;bb<ja.length;bb++)rb=Ga[bb],nb=ja[bb],null!==rb&&void 0!==nb&&nb.update(rb,$a,P||G);ub&&ub(Sa,$a);if($a.detectedPlanes){A.dispatchEvent({type:"planesdetected",data:$a.detectedPlanes});Sa=null;for(var V of oa)$a.detectedPlanes.has(V)||(null===Sa&&(Sa=[]),Sa.push(V));if(null!==Sa)for(const fa of Sa)oa.delete(fa),wa.delete(fa),A.dispatchEvent({type:"planeremoved",data:fa});for(const fa of $a.detectedPlanes)oa.has(fa)?(V=wa.get(fa),fa.lastChangedTime>V&&(wa.set(fa,
fa.lastChangedTime),A.dispatchEvent({type:"planechanged",data:fa}))):(oa.add(fa),wa.set(fa,$a.lastChangedTime),A.dispatchEvent({type:"planeadded",data:fa}))}ma=null});this.setAnimationLoop=function(Sa){ub=Sa};this.dispose=function(){}}}Object.defineProperties(Cf.prototype,{physicallyCorrectLights:{get:function(){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead.");return!this.useLegacyLights},set:function(a){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead.");
this.useLegacyLights=!a}}});class xj extends Cf{}xj.prototype.isWebGL1Renderer=!0;class oi{constructor(a,b=2.5E-4){this.isFogExp2=!0;this.name="";this.color=new gb(a);this.density=b}clone(){return new oi(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class pi{constructor(a,b=1,d=1E3){this.isFog=!0;this.name="";this.color=new gb(a);this.near=b;this.far=d}clone(){return new pi(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),
near:this.near,far:this.far}}}class yj extends bc{constructor(){super();this.isScene=!0;this.type="Scene";this.fog=this.environment=this.background=null;this.backgroundBlurriness=0;this.backgroundIntensity=1;this.overrideMaterial=null;"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(a,b){super.copy(a,b);null!==a.background&&(this.background=a.background.clone());null!==a.environment&&(this.environment=a.environment.clone());null!==
a.fog&&(this.fog=a.fog.clone());this.backgroundBlurriness=a.backgroundBlurriness;this.backgroundIntensity=a.backgroundIntensity;null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.matrixAutoUpdate=a.matrixAutoUpdate;return this}toJSON(a){a=super.toJSON(a);null!==this.fog&&(a.object.fog=this.fog.toJSON());0<this.backgroundBlurriness&&(a.object.backgroundBlurriness=this.backgroundBlurriness);1!==this.backgroundIntensity&&(a.object.backgroundIntensity=this.backgroundIntensity);
return a}get autoUpdate(){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144.");return this.matrixWorldAutoUpdate}set autoUpdate(a){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144.");this.matrixWorldAutoUpdate=a}}class Vg{constructor(a,b){this.isInterleavedBuffer=!0;this.array=a;this.stride=b;this.count=void 0!==a?a.length/b:0;this.usage=35044;this.updateRange={offset:0,count:-1};this.version=0;this.uuid=p()}onUploadCallback(){}set needsUpdate(a){!0===
a&&this.version++}setUsage(a){this.usage=a;return this}copy(a){this.array=new a.array.constructor(a.array);this.count=a.count;this.stride=a.stride;this.usage=a.usage;return this}copyAt(a,b,d){a*=this.stride;d*=b.stride;for(let l=0,q=this.stride;l<q;l++)this.array[a+l]=b.array[d+l];return this}set(a,b=0){this.array.set(a,b);return this}clone(a){void 0===a.arrayBuffers&&(a.arrayBuffers={});void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=p());void 0===a.arrayBuffers[this.array.buffer._uuid]&&
(a.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);a=new this.array.constructor(a.arrayBuffers[this.array.buffer._uuid]);a=new this.constructor(a,this.stride);a.setUsage(this.usage);return a}onUpload(a){this.onUploadCallback=a;return this}toJSON(a){void 0===a.arrayBuffers&&(a.arrayBuffers={});void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=p());void 0===a.arrayBuffers[this.array.buffer._uuid]&&(a.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer)));
return{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Jc=new aa;class af{constructor(a,b,d,l=!1){this.isInterleavedBufferAttribute=!0;this.name="";this.data=a;this.itemSize=b;this.offset=d;this.normalized=l}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(a){this.data.needsUpdate=a}applyMatrix4(a){for(let b=0,d=this.data.count;b<d;b++)Jc.fromBufferAttribute(this,b),Jc.applyMatrix4(a),this.setXYZ(b,Jc.x,
Jc.y,Jc.z);return this}applyNormalMatrix(a){for(let b=0,d=this.count;b<d;b++)Jc.fromBufferAttribute(this,b),Jc.applyNormalMatrix(a),this.setXYZ(b,Jc.x,Jc.y,Jc.z);return this}transformDirection(a){for(let b=0,d=this.count;b<d;b++)Jc.fromBufferAttribute(this,b),Jc.transformDirection(a),this.setXYZ(b,Jc.x,Jc.y,Jc.z);return this}setX(a,b){this.normalized&&(b=r(b,this.array));this.data.array[a*this.data.stride+this.offset]=b;return this}setY(a,b){this.normalized&&(b=r(b,this.array));this.data.array[a*
this.data.stride+this.offset+1]=b;return this}setZ(a,b){this.normalized&&(b=r(b,this.array));this.data.array[a*this.data.stride+this.offset+2]=b;return this}setW(a,b){this.normalized&&(b=r(b,this.array));this.data.array[a*this.data.stride+this.offset+3]=b;return this}getX(a){a=this.data.array[a*this.data.stride+this.offset];this.normalized&&(a=g(a,this.array));return a}getY(a){a=this.data.array[a*this.data.stride+this.offset+1];this.normalized&&(a=g(a,this.array));return a}getZ(a){a=this.data.array[a*
this.data.stride+this.offset+2];this.normalized&&(a=g(a,this.array));return a}getW(a){a=this.data.array[a*this.data.stride+this.offset+3];this.normalized&&(a=g(a,this.array));return a}setXY(a,b,d){a=a*this.data.stride+this.offset;this.normalized&&(b=r(b,this.array),d=r(d,this.array));this.data.array[a+0]=b;this.data.array[a+1]=d;return this}setXYZ(a,b,d,l){a=a*this.data.stride+this.offset;this.normalized&&(b=r(b,this.array),d=r(d,this.array),l=r(l,this.array));this.data.array[a+0]=b;this.data.array[a+
1]=d;this.data.array[a+2]=l;return this}setXYZW(a,b,d,l,q){a=a*this.data.stride+this.offset;this.normalized&&(b=r(b,this.array),d=r(d,this.array),l=r(l,this.array),q=r(q,this.array));this.data.array[a+0]=b;this.data.array[a+1]=d;this.data.array[a+2]=l;this.data.array[a+3]=q;return this}clone(a){if(void 0===a){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");a=[];for(let b=0;b<this.count;b++){const d=b*this.data.stride+
this.offset;for(let l=0;l<this.itemSize;l++)a.push(this.data.array[d+l])}return new fc(new this.array.constructor(a),this.itemSize,this.normalized)}void 0===a.interleavedBuffers&&(a.interleavedBuffers={});void 0===a.interleavedBuffers[this.data.uuid]&&(a.interleavedBuffers[this.data.uuid]=this.data.clone(a));return new af(a.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(a){if(void 0===a){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");
a=[];for(let b=0;b<this.count;b++){const d=b*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)a.push(this.data.array[d+l])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:a,normalized:this.normalized}}void 0===a.interleavedBuffers&&(a.interleavedBuffers={});void 0===a.interleavedBuffers[this.data.uuid]&&(a.interleavedBuffers[this.data.uuid]=this.data.toJSON(a));return{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}
class qi extends Fc{constructor(a){super();this.isSpriteMaterial=!0;this.type="SpriteMaterial";this.color=new gb(16777215);this.alphaMap=this.map=null;this.rotation=0;this.fog=this.transparent=this.sizeAttenuation=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.map=a.map;this.alphaMap=a.alphaMap;this.rotation=a.rotation;this.sizeAttenuation=a.sizeAttenuation;this.fog=a.fog;return this}}let bf;const Uf=new aa,cf=new aa,df=new aa,Je=new za,Ef=new za,fj=new Fb,Wg=new aa,Vf=new aa,
Xg=new aa,zj=new za,ri=new za,Aj=new za;class Bj extends bc{constructor(a){super();this.isSprite=!0;this.type="Sprite";if(void 0===bf){bf=new Kb;var b=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);b=new Vg(b,5);bf.setIndex([0,1,2,0,2,3]);bf.setAttribute("position",new af(b,3,0,!1));bf.setAttribute("uv",new af(b,2,3,!1))}this.geometry=bf;this.material=void 0!==a?a:new qi;this.center=new za(.5,.5)}raycast(a,b){null===a.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.');
cf.setFromMatrixScale(this.matrixWorld);fj.copy(a.camera.matrixWorld);this.modelViewMatrix.multiplyMatrices(a.camera.matrixWorldInverse,this.matrixWorld);df.setFromMatrixPosition(this.modelViewMatrix);a.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&cf.multiplyScalar(-df.z);var d=this.material.rotation;let l;if(0!==d){l=Math.cos(d);var q=Math.sin(d)}d=this.center;Ie(Wg.set(-.5,-.5,0),df,d,cf,q,l);Ie(Vf.set(.5,-.5,0),df,d,cf,q,l);Ie(Xg.set(.5,.5,0),df,d,cf,q,l);zj.set(0,0);ri.set(1,
0);Aj.set(1,1);let y=a.ray.intersectTriangle(Wg,Vf,Xg,!1,Uf);if(null===y&&(Ie(Vf.set(-.5,.5,0),df,d,cf,q,l),ri.set(0,1),y=a.ray.intersectTriangle(Wg,Xg,Vf,!1,Uf),null===y))return;q=a.ray.origin.distanceTo(Uf);q<a.near||q>a.far||b.push({distance:q,point:Uf.clone(),uv:Wc.getUV(Uf,Wg,Vf,Xg,zj,ri,Aj,new za),face:null,object:this})}copy(a,b){super.copy(a,b);void 0!==a.center&&this.center.copy(a.center);this.material=a.material;return this}}const Yg=new aa,Cj=new aa;class Dj extends bc{constructor(){super();
this._currentLevel=0;this.type="LOD";Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}});this.autoUpdate=!0}copy(a){super.copy(a,!1);const b=a.levels;for(let d=0,l=b.length;d<l;d++){const q=b[d];this.addLevel(q.object.clone(),q.distance,q.hysteresis)}this.autoUpdate=a.autoUpdate;return this}addLevel(a,b=0,d=0){b=Math.abs(b);const l=this.levels;let q;for(q=0;q<l.length&&!(b<l[q].distance);q++);l.splice(q,0,{distance:b,hysteresis:d,object:a});this.add(a);return this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(a){const b=
this.levels;if(0<b.length){let d,l;d=1;for(l=b.length;d<l;d++){let q=b[d].distance;b[d].object.visible&&(q-=q*b[d].hysteresis);if(a<q)break}return b[d-1].object}return null}raycast(a,b){if(0<this.levels.length){Yg.setFromMatrixPosition(this.matrixWorld);const d=a.ray.origin.distanceTo(Yg);this.getObjectForDistance(d).raycast(a,b)}}update(a){const b=this.levels;if(1<b.length){Yg.setFromMatrixPosition(a.matrixWorld);Cj.setFromMatrixPosition(this.matrixWorld);a=Yg.distanceTo(Cj)/a.zoom;b[0].object.visible=
!0;let d,l;d=1;for(l=b.length;d<l;d++){let q=b[d].distance;b[d].object.visible&&(q-=q*b[d].hysteresis);if(a>=q)b[d-1].object.visible=!1,b[d].object.visible=!0;else break}for(this._currentLevel=d-1;d<l;d++)b[d].object.visible=!1}}toJSON(a){a=super.toJSON(a);!1===this.autoUpdate&&(a.object.autoUpdate=!1);a.object.levels=[];const b=this.levels;for(let d=0,l=b.length;d<l;d++){const q=b[d];a.object.levels.push({object:q.object.uuid,distance:q.distance,hysteresis:q.hysteresis})}return a}}const Ej=new aa,
Fj=new cc,Gj=new cc,Cl=new aa,Hj=new Fb;class Ij extends xc{constructor(a,b){super(a,b);this.isSkinnedMesh=!0;this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new Fb;this.bindMatrixInverse=new Fb}copy(a,b){super.copy(a,b);this.bindMode=a.bindMode;this.bindMatrix.copy(a.bindMatrix);this.bindMatrixInverse.copy(a.bindMatrixInverse);this.skeleton=a.skeleton;return this}bind(a,b){this.skeleton=a;void 0===b&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),b=this.matrixWorld);
this.bindMatrix.copy(b);this.bindMatrixInverse.copy(b).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const a=new cc,b=this.geometry.attributes.skinWeight;for(let d=0,l=b.count;d<l;d++){a.fromBufferAttribute(b,d);const q=1/a.manhattanLength();Infinity!==q?a.multiplyScalar(q):a.set(1,0,0,0);b.setXYZW(d,a.x,a.y,a.z,a.w)}}updateMatrixWorld(a){super.updateMatrixWorld(a);"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():
console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(a,b){const d=this.skeleton;var l=this.geometry;Fj.fromBufferAttribute(l.attributes.skinIndex,a);Gj.fromBufferAttribute(l.attributes.skinWeight,a);Ej.copy(b).applyMatrix4(this.bindMatrix);b.set(0,0,0);for(a=0;4>a;a++)if(l=Gj.getComponent(a),0!==l){const q=Fj.getComponent(a);Hj.multiplyMatrices(d.bones[q].matrixWorld,d.boneInverses[q]);b.addScaledVector(Cl.copy(Ej).applyMatrix4(Hj),l)}return b.applyMatrix4(this.bindMatrixInverse)}}
class si extends bc{constructor(){super();this.isBone=!0;this.type="Bone"}}class ef extends rc{constructor(a=null,b=1,d=1,l,q,y,A,D,F=1003,G=1003,M,N){super(null,y,A,D,F,G,l,q,M,N);this.isDataTexture=!0;this.image={data:a,width:b,height:d};this.flipY=this.generateMipmaps=!1;this.unpackAlignment=1}}const Jj=new Fb,Dl=new Fb;class ti{constructor(a=[],b=[]){this.uuid=p();this.bones=a.slice(0);this.boneInverses=b;this.boneTexture=this.boneMatrices=null;this.boneTextureSize=0;this.frame=-1;this.init()}init(){const a=
this.bones,b=this.boneInverses;this.boneMatrices=new Float32Array(16*a.length);if(0===b.length)this.calculateInverses();else if(a.length!==b.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones.");this.boneInverses=[];for(let d=0,l=this.bones.length;d<l;d++)this.boneInverses.push(new Fb)}}calculateInverses(){this.boneInverses.length=0;for(let a=0,b=this.bones.length;a<b;a++){const d=new Fb;this.bones[a]&&d.copy(this.bones[a].matrixWorld).invert();this.boneInverses.push(d)}}pose(){for(let b=
0,d=this.bones.length;b<d;b++){var a=this.bones[b];a&&a.matrixWorld.copy(this.boneInverses[b]).invert()}for(let b=0,d=this.bones.length;b<d;b++)if(a=this.bones[b])a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)}update(){const a=this.bones,b=this.boneInverses,d=this.boneMatrices,l=this.boneTexture;for(let q=0,y=a.length;q<y;q++)Jj.multiplyMatrices(a[q]?a[q].matrixWorld:
Dl,b[q]),Jj.toArray(d,16*q);null!==l&&(l.needsUpdate=!0)}clone(){return new ti(this.bones,this.boneInverses)}computeBoneTexture(){let a=Math.sqrt(4*this.bones.length);a=h(a);a=Math.max(a,4);const b=new Float32Array(a*a*4);b.set(this.boneMatrices);const d=new ef(b,a,a,1023,1015);d.needsUpdate=!0;this.boneMatrices=b;this.boneTexture=d;this.boneTextureSize=a;return this}getBoneByName(a){for(let b=0,d=this.bones.length;b<d;b++){const l=this.bones[b];if(l.name===a)return l}}dispose(){null!==this.boneTexture&&
(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(a,b){this.uuid=a.uuid;for(let d=0,l=a.bones.length;d<l;d++){const q=a.bones[d];let y=b[q];void 0===y&&(console.warn("THREE.Skeleton: No bone found with UUID:",q),y=new si);this.bones.push(y);this.boneInverses.push((new Fb).fromArray(a.boneInverses[d]))}this.init();return this}toJSON(){const a={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};a.uuid=this.uuid;const b=this.bones,d=this.boneInverses;
for(let l=0,q=b.length;l<q;l++)a.bones.push(b[l].uuid),a.boneInverses.push(d[l].toArray());return a}}class ff extends fc{constructor(a,b,d,l=1){super(a,b,d);this.isInstancedBufferAttribute=!0;this.meshPerAttribute=l}copy(a){super.copy(a);this.meshPerAttribute=a.meshPerAttribute;return this}toJSON(){const a=super.toJSON();a.meshPerAttribute=this.meshPerAttribute;a.isInstancedBufferAttribute=!0;return a}}const Kj=new Fb,Lj=new Fb,Zg=[],El=new Fb,Wf=new xc;class Mj extends xc{constructor(a,b,d){super(a,
b);this.isInstancedMesh=!0;this.instanceMatrix=new ff(new Float32Array(16*d),16);this.instanceColor=null;this.count=d;this.frustumCulled=!1;for(a=0;a<d;a++)this.setMatrixAt(a,El)}copy(a,b){super.copy(a,b);this.instanceMatrix.copy(a.instanceMatrix);null!==a.instanceColor&&(this.instanceColor=a.instanceColor.clone());this.count=a.count;return this}getColorAt(a,b){b.fromArray(this.instanceColor.array,3*a)}getMatrixAt(a,b){b.fromArray(this.instanceMatrix.array,16*a)}raycast(a,b){const d=this.matrixWorld,
l=this.count;Wf.geometry=this.geometry;Wf.material=this.material;if(void 0!==Wf.material)for(let q=0;q<l;q++){this.getMatrixAt(q,Kj);Lj.multiplyMatrices(d,Kj);Wf.matrixWorld=Lj;Wf.raycast(a,Zg);for(let y=0,A=Zg.length;y<A;y++){const D=Zg[y];D.instanceId=q;D.object=this;b.push(D)}Zg.length=0}}setColorAt(a,b){null===this.instanceColor&&(this.instanceColor=new ff(new Float32Array(3*this.instanceMatrix.count),3));b.toArray(this.instanceColor.array,3*a)}setMatrixAt(a,b){b.toArray(this.instanceMatrix.array,
16*a)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Kc extends Fc{constructor(a){super();this.isLineBasicMaterial=!0;this.type="LineBasicMaterial";this.color=new gb(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.fog=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;this.fog=a.fog;return this}}const Nj=new aa,Oj=new aa,Pj=new Fb,ui=new Qf,Xf=new se;class Wd extends bc{constructor(a=
new Kb,b=new Kc){super();this.isLine=!0;this.type="Line";this.geometry=a;this.material=b;this.updateMorphTargets()}copy(a,b){super.copy(a,b);this.material=a.material;this.geometry=a.geometry;return this}computeLineDistances(){const a=this.geometry;if(null===a.index){const b=a.attributes.position,d=[0];for(let l=1,q=b.count;l<q;l++)Nj.fromBufferAttribute(b,l-1),Oj.fromBufferAttribute(b,l),d[l]=d[l-1],d[l]+=Nj.distanceTo(Oj);a.setAttribute("lineDistance",new pb(d,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
return this}raycast(a,b){var d=this.geometry,l=this.matrixWorld,q=a.params.Line.threshold,y=d.drawRange;null===d.boundingSphere&&d.computeBoundingSphere();Xf.copy(d.boundingSphere);Xf.applyMatrix4(l);Xf.radius+=q;if(!1!==a.ray.intersectsSphere(Xf)){Pj.copy(l).invert();ui.copy(a.ray).applyMatrix4(Pj);l=q/((this.scale.x+this.scale.y+this.scale.z)/3);l*=l;q=new aa;var A=new aa,D=new aa,F=new aa,G=this.isLineSegments?2:1,M=d.index;d=d.attributes.position;if(null!==M){var N=Math.max(0,y.start);y=Math.min(M.count,
y.start+y.count);for(let P=N,T=y-1;P<T;P+=G)y=M.getX(P),N=M.getX(P+1),q.fromBufferAttribute(d,y),A.fromBufferAttribute(d,N),ui.distanceSqToSegment(q,A,F,D)>l||(F.applyMatrix4(this.matrixWorld),y=a.ray.origin.distanceTo(F),y<a.near||y>a.far||b.push({distance:y,point:D.clone().applyMatrix4(this.matrixWorld),index:P,face:null,faceIndex:null,object:this}))}else{M=Math.max(0,y.start);y=Math.min(d.count,y.start+y.count);for(let P=M,T=y-1;P<T;P+=G)q.fromBufferAttribute(d,P),A.fromBufferAttribute(d,P+1),
ui.distanceSqToSegment(q,A,F,D)>l||(F.applyMatrix4(this.matrixWorld),y=a.ray.origin.distanceTo(F),y<a.near||y>a.far||b.push({distance:y,point:D.clone().applyMatrix4(this.matrixWorld),index:P,face:null,faceIndex:null,object:this}))}}}updateMorphTargets(){var a=this.geometry.morphAttributes,b=Object.keys(a);if(0<b.length&&(a=a[b[0]],void 0!==a)){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(let d=0,l=a.length;d<l;d++)b=a[d].name||String(d),this.morphTargetInfluences.push(0),this.morphTargetDictionary[b]=
d}}}const Qj=new aa,Rj=new aa;class od extends Wd{constructor(a,b){super(a,b);this.isLineSegments=!0;this.type="LineSegments"}computeLineDistances(){const a=this.geometry;if(null===a.index){const b=a.attributes.position,d=[];for(let l=0,q=b.count;l<q;l+=2)Qj.fromBufferAttribute(b,l),Rj.fromBufferAttribute(b,l+1),d[l]=0===l?0:d[l-1],d[l+1]=d[l]+Qj.distanceTo(Rj);a.setAttribute("lineDistance",new pb(d,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
return this}}class Sj extends Wd{constructor(a,b){super(a,b);this.isLineLoop=!0;this.type="LineLoop"}}class vi extends Fc{constructor(a){super();this.isPointsMaterial=!0;this.type="PointsMaterial";this.color=new gb(16777215);this.alphaMap=this.map=null;this.size=1;this.fog=this.sizeAttenuation=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.map=a.map;this.alphaMap=a.alphaMap;this.size=a.size;this.sizeAttenuation=a.sizeAttenuation;this.fog=a.fog;return this}}const Tj=new Fb,
Th=new Qf,Yf=new se,$g=new aa;class Uj extends bc{constructor(a=new Kb,b=new vi){super();this.isPoints=!0;this.type="Points";this.geometry=a;this.material=b;this.updateMorphTargets()}copy(a,b){super.copy(a,b);this.material=a.material;this.geometry=a.geometry;return this}raycast(a,b){var d=this.geometry;const l=this.matrixWorld;var q=a.params.Points.threshold,y=d.drawRange;null===d.boundingSphere&&d.computeBoundingSphere();Yf.copy(d.boundingSphere);Yf.applyMatrix4(l);Yf.radius+=q;if(!1!==a.ray.intersectsSphere(Yf)){Tj.copy(l).invert();
Th.copy(a.ray).applyMatrix4(Tj);q/=(this.scale.x+this.scale.y+this.scale.z)/3;q*=q;var A=d.index;d=d.attributes.position;if(null!==A){const D=Math.max(0,y.start);y=Math.min(A.count,y.start+y.count);for(let F=D,G=y;F<G;F++)y=A.getX(F),$g.fromBufferAttribute(d,y),tg($g,y,q,l,a,b,this)}else{A=Math.max(0,y.start);y=Math.min(d.count,y.start+y.count);for(let D=A,F=y;D<F;D++)$g.fromBufferAttribute(d,D),tg($g,D,q,l,a,b,this)}}}updateMorphTargets(){var a=this.geometry.morphAttributes,b=Object.keys(a);if(0<
b.length&&(a=a[b[0]],void 0!==a)){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(let d=0,l=a.length;d<l;d++)b=a[d].name||String(d),this.morphTargetInfluences.push(0),this.morphTargetDictionary[b]=d}}}class Fl extends rc{constructor(a,b,d,l,q,y,A,D,F){function G(){M.needsUpdate=!0;a.requestVideoFrameCallback(G)}super(a,b,d,l,q,y,A,D,F);this.isVideoTexture=!0;this.minFilter=void 0!==y?y:1006;this.magFilter=void 0!==q?q:1006;this.generateMipmaps=!1;const M=this;"requestVideoFrameCallback"in
a&&a.requestVideoFrameCallback(G)}clone(){return(new this.constructor(this.image)).copy(this)}update(){const a=this.image;!1==="requestVideoFrameCallback"in a&&a.readyState>=a.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Gl extends rc{constructor(a,b,d){super({width:a,height:b});this.isFramebufferTexture=!0;this.format=d;this.minFilter=this.magFilter=1003;this.generateMipmaps=!1;this.needsUpdate=!0}}class wi extends rc{constructor(a,b,d,l,q,y,A,D,F,G,M,N){super(null,y,A,D,F,G,l,q,M,N);this.isCompressedTexture=
!0;this.image={width:b,height:d};this.mipmaps=a;this.generateMipmaps=this.flipY=!1}}class Hl extends wi{constructor(a,b,d,l,q,y){super(a,b,d,q,y);this.isCompressedArrayTexture=!0;this.image.depth=l;this.wrapR=1001}}class Il extends rc{constructor(a,b,d,l,q,y,A,D,F){super(a,b,d,l,q,y,A,D,F);this.needsUpdate=this.isCanvasTexture=!0}}class dd{constructor(){this.type="Curve";this.arcLengthDivisions=200}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.");return null}getPointAt(a,b){a=
this.getUtoTmapping(a);return this.getPoint(a,b)}getPoints(a=5){const b=[];for(let d=0;d<=a;d++)b.push(this.getPoint(d/a));return b}getSpacedPoints(a=5){const b=[];for(let d=0;d<=a;d++)b.push(this.getPointAt(d/a));return b}getLength(){const a=this.getLengths();return a[a.length-1]}getLengths(a=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const b=[];let d,l=this.getPoint(0),q=0;b.push(0);for(let y=
1;y<=a;y++)d=this.getPoint(y/a),q+=d.distanceTo(l),b.push(q),l=d;return this.cacheArcLengths=b}updateArcLengths(){this.needsUpdate=!0;this.getLengths()}getUtoTmapping(a,b){const d=this.getLengths(),l=d.length;b=b?b:a*d[l-1];var q=0;let y=l-1,A;for(;q<=y;)if(a=Math.floor(q+(y-q)/2),A=d[a]-b,0>A)q=a+1;else if(0<A)y=a-1;else{y=a;break}a=y;if(d[a]===b)return a/(l-1);q=d[a];return(a+(b-q)/(d[a+1]-q))/(l-1)}getTangent(a,b){var d=a-1E-4;a+=1E-4;0>d&&(d=0);1<a&&(a=1);d=this.getPoint(d);a=this.getPoint(a);
b=b||(d.isVector2?new za:new aa);b.copy(a).sub(d).normalize();return b}getTangentAt(a,b){a=this.getUtoTmapping(a);return this.getTangent(a,b)}computeFrenetFrames(a,b){var d=new aa;const l=[],q=[],y=[];var A=new aa;const D=new Fb;for(var F=0;F<=a;F++)l[F]=this.getTangentAt(F/a,new aa);q[0]=new aa;y[0]=new aa;F=Number.MAX_VALUE;const G=Math.abs(l[0].x),M=Math.abs(l[0].y),N=Math.abs(l[0].z);G<=F&&(F=G,d.set(1,0,0));M<=F&&(F=M,d.set(0,1,0));N<=F&&d.set(0,0,1);A.crossVectors(l[0],d).normalize();q[0].crossVectors(l[0],
A);y[0].crossVectors(l[0],q[0]);for(d=1;d<=a;d++)q[d]=q[d-1].clone(),y[d]=y[d-1].clone(),A.crossVectors(l[d-1],l[d]),A.length()>Number.EPSILON&&(A.normalize(),F=Math.acos(n(l[d-1].dot(l[d]),-1,1)),q[d].applyMatrix4(D.makeRotationAxis(A,F))),y[d].crossVectors(l[d],q[d]);if(!0===b)for(b=Math.acos(n(q[0].dot(q[a]),-1,1)),b/=a,0<l[0].dot(A.crossVectors(q[0],q[a]))&&(b=-b),A=1;A<=a;A++)q[A].applyMatrix4(D.makeRotationAxis(l[A],b*A)),y[A].crossVectors(l[A],q[A]);return{tangents:l,normals:q,binormals:y}}clone(){return(new this.constructor).copy(this)}copy(a){this.arcLengthDivisions=
a.arcLengthDivisions;return this}toJSON(){const a={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};a.arcLengthDivisions=this.arcLengthDivisions;a.type=this.type;return a}fromJSON(a){this.arcLengthDivisions=a.arcLengthDivisions;return this}}class ah extends dd{constructor(a=0,b=0,d=1,l=1,q=0,y=2*Math.PI,A=!1,D=0){super();this.isEllipseCurve=!0;this.type="EllipseCurve";this.aX=a;this.aY=b;this.xRadius=d;this.yRadius=l;this.aStartAngle=q;this.aEndAngle=y;this.aClockwise=A;this.aRotation=
D}getPoint(a,b){b=b||new za;for(var d=2*Math.PI,l=this.aEndAngle-this.aStartAngle,q=Math.abs(l)<Number.EPSILON;0>l;)l+=d;for(;l>d;)l-=d;l<Number.EPSILON&&(l=q?0:d);!0!==this.aClockwise||q||(l=l===d?-d:l-d);d=this.aStartAngle+a*l;a=this.aX+this.xRadius*Math.cos(d);var y=this.aY+this.yRadius*Math.sin(d);0!==this.aRotation&&(d=Math.cos(this.aRotation),l=Math.sin(this.aRotation),q=a-this.aX,y-=this.aY,a=q*d-y*l+this.aX,y=q*l+y*d+this.aY);return b.set(a,y)}copy(a){super.copy(a);this.aX=a.aX;this.aY=a.aY;
this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return this}toJSON(){const a=super.toJSON();a.aX=this.aX;a.aY=this.aY;a.xRadius=this.xRadius;a.yRadius=this.yRadius;a.aStartAngle=this.aStartAngle;a.aEndAngle=this.aEndAngle;a.aClockwise=this.aClockwise;a.aRotation=this.aRotation;return a}fromJSON(a){super.fromJSON(a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;
this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return this}}class Vj extends ah{constructor(a,b,d,l,q,y){super(a,b,d,d,l,q,y);this.isArcCurve=!0;this.type="ArcCurve"}}const bh=new aa,xi=new Ff,yi=new Ff,zi=new Ff;class Wj extends dd{constructor(a=[],b=!1,d="centripetal",l=.5){super();this.isCatmullRomCurve3=!0;this.type="CatmullRomCurve3";this.points=a;this.closed=b;this.curveType=d;this.tension=l}getPoint(a,b=new aa){var d=this.points,
l=d.length;a*=l-(this.closed?0:1);var q=Math.floor(a);a-=q;this.closed?q+=0<q?0:(Math.floor(Math.abs(q)/l)+1)*l:0===a&&q===l-1&&(q=l-2,a=1);let y;this.closed||0<q?y=d[(q-1)%l]:(bh.subVectors(d[0],d[1]).add(d[0]),y=bh);const A=d[q%l],D=d[(q+1)%l];this.closed||q+2<l?d=d[(q+2)%l]:(bh.subVectors(d[l-1],d[l-2]).add(d[l-1]),d=bh);if("centripetal"===this.curveType||"chordal"===this.curveType){var F="chordal"===this.curveType?.5:.25;l=Math.pow(y.distanceToSquared(A),F);q=Math.pow(A.distanceToSquared(D),F);
F=Math.pow(D.distanceToSquared(d),F);1E-4>q&&(q=1);1E-4>l&&(l=q);1E-4>F&&(F=q);xi.initNonuniformCatmullRom(y.x,A.x,D.x,d.x,l,q,F);yi.initNonuniformCatmullRom(y.y,A.y,D.y,d.y,l,q,F);zi.initNonuniformCatmullRom(y.z,A.z,D.z,d.z,l,q,F)}else"catmullrom"===this.curveType&&(xi.initCatmullRom(y.x,A.x,D.x,d.x,this.tension),yi.initCatmullRom(y.y,A.y,D.y,d.y,this.tension),zi.initCatmullRom(y.z,A.z,D.z,d.z,this.tension));b.set(xi.calc(a),yi.calc(a),zi.calc(a));return b}copy(a){super.copy(a);this.points=[];for(let b=
0,d=a.points.length;b<d;b++)this.points.push(a.points[b].clone());this.closed=a.closed;this.curveType=a.curveType;this.tension=a.tension;return this}toJSON(){const a=super.toJSON();a.points=[];for(let b=0,d=this.points.length;b<d;b++)a.points.push(this.points[b].toArray());a.closed=this.closed;a.curveType=this.curveType;a.tension=this.tension;return a}fromJSON(a){super.fromJSON(a);this.points=[];for(let b=0,d=a.points.length;b<d;b++){const l=a.points[b];this.points.push((new aa).fromArray(l))}this.closed=
a.closed;this.curveType=a.curveType;this.tension=a.tension;return this}}class Ai extends dd{constructor(a=new za,b=new za,d=new za,l=new za){super();this.isCubicBezierCurve=!0;this.type="CubicBezierCurve";this.v0=a;this.v1=b;this.v2=d;this.v3=l}getPoint(a,b=new za){const d=this.v0,l=this.v1,q=this.v2,y=this.v3;b.set(ie(a,d.x,l.x,q.x,y.x),ie(a,d.y,l.y,q.y,y.y));return b}copy(a){super.copy(a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return this}toJSON(){const a=super.toJSON();
a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();a.v3=this.v3.toArray();return a}fromJSON(a){super.fromJSON(a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return this}}class Xj extends dd{constructor(a=new aa,b=new aa,d=new aa,l=new aa){super();this.isCubicBezierCurve3=!0;this.type="CubicBezierCurve3";this.v0=a;this.v1=b;this.v2=d;this.v3=l}getPoint(a,b=new aa){const d=this.v0,l=this.v1,q=this.v2,y=this.v3;b.set(ie(a,d.x,l.x,
q.x,y.x),ie(a,d.y,l.y,q.y,y.y),ie(a,d.z,l.z,q.z,y.z));return b}copy(a){super.copy(a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return this}toJSON(){const a=super.toJSON();a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();a.v3=this.v3.toArray();return a}fromJSON(a){super.fromJSON(a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return this}}class ch extends dd{constructor(a=new za,b=new za){super();
this.isLineCurve=!0;this.type="LineCurve";this.v1=a;this.v2=b}getPoint(a,b=new za){1===a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return b}getPointAt(a,b){return this.getPoint(a,b)}getTangent(a,b=new za){return b.subVectors(this.v2,this.v1).normalize()}getTangentAt(a,b){return this.getTangent(a,b)}copy(a){super.copy(a);this.v1.copy(a.v1);this.v2.copy(a.v2);return this}toJSON(){const a=super.toJSON();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a}fromJSON(a){super.fromJSON(a);
this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this}}class Yj extends dd{constructor(a=new aa,b=new aa){super();this.isLineCurve3=!0;this.type="LineCurve3";this.v1=a;this.v2=b}getPoint(a,b=new aa){1===a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return b}getPointAt(a,b){return this.getPoint(a,b)}getTangent(a,b=new aa){return b.subVectors(this.v2,this.v1).normalize()}getTangentAt(a,b){return this.getTangent(a,b)}copy(a){super.copy(a);this.v1.copy(a.v1);
this.v2.copy(a.v2);return this}toJSON(){const a=super.toJSON();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a}fromJSON(a){super.fromJSON(a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this}}class Bi extends dd{constructor(a=new za,b=new za,d=new za){super();this.isQuadraticBezierCurve=!0;this.type="QuadraticBezierCurve";this.v0=a;this.v1=b;this.v2=d}getPoint(a,b=new za){const d=this.v0,l=this.v1,q=this.v2;b.set(he(a,d.x,l.x,q.x),he(a,d.y,l.y,q.y));return b}copy(a){super.copy(a);
this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return this}toJSON(){const a=super.toJSON();a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a}fromJSON(a){super.fromJSON(a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this}}class Ci extends dd{constructor(a=new aa,b=new aa,d=new aa){super();this.isQuadraticBezierCurve3=!0;this.type="QuadraticBezierCurve3";this.v0=a;this.v1=b;this.v2=d}getPoint(a,b=new aa){const d=this.v0,l=this.v1,
q=this.v2;b.set(he(a,d.x,l.x,q.x),he(a,d.y,l.y,q.y),he(a,d.z,l.z,q.z));return b}copy(a){super.copy(a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return this}toJSON(){const a=super.toJSON();a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a}fromJSON(a){super.fromJSON(a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this}}class Di extends dd{constructor(a=[]){super();this.isSplineCurve=!0;this.type="SplineCurve";this.points=a}getPoint(a,
b=new za){var d=this.points,l=(d.length-1)*a;a=Math.floor(l);l-=a;const q=d[0===a?a:a-1],y=d[a],A=d[a>d.length-2?d.length-1:a+1];d=d[a>d.length-3?d.length-1:a+2];b.set(ug(l,q.x,y.x,A.x,d.x),ug(l,q.y,y.y,A.y,d.y));return b}copy(a){super.copy(a);this.points=[];for(let b=0,d=a.points.length;b<d;b++)this.points.push(a.points[b].clone());return this}toJSON(){const a=super.toJSON();a.points=[];for(let b=0,d=this.points.length;b<d;b++)a.points.push(this.points[b].toArray());return a}fromJSON(a){super.fromJSON(a);
this.points=[];for(let b=0,d=a.points.length;b<d;b++){const l=a.points[b];this.points.push((new za).fromArray(l))}return this}}var Ei=Object.freeze({__proto__:null,ArcCurve:Vj,CatmullRomCurve3:Wj,CubicBezierCurve:Ai,CubicBezierCurve3:Xj,EllipseCurve:ah,LineCurve:ch,LineCurve3:Yj,QuadraticBezierCurve:Bi,QuadraticBezierCurve3:Ci,SplineCurve:Di});class Zj extends dd{constructor(){super();this.type="CurvePath";this.curves=[];this.autoClose=!1}add(a){this.curves.push(a)}closePath(){const a=this.curves[0].getPoint(0),
b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new ch(b,a))}getPoint(a,b){var d=a*this.getLength(),l=this.getCurveLengths();for(a=0;a<l.length;){if(l[a]>=d)return d=l[a]-d,a=this.curves[a],l=a.getLength(),a.getPointAt(0===l?0:1-d/l,b);a++}return null}getLength(){const a=this.getCurveLengths();return a[a.length-1]}updateArcLengths(){this.needsUpdate=!0;this.cacheLengths=null;this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;
const a=[];let b=0;for(let d=0,l=this.curves.length;d<l;d++)b+=this.curves[d].getLength(),a.push(b);return this.cacheLengths=a}getSpacedPoints(a=40){const b=[];for(let d=0;d<=a;d++)b.push(this.getPoint(d/a));this.autoClose&&b.push(b[0]);return b}getPoints(a=12){const b=[];let d;for(let q=0,y=this.curves;q<y.length;q++){var l=y[q];l=l.getPoints(l.isEllipseCurve?2*a:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?a*l.points.length:a);for(let A=0;A<l.length;A++){const D=l[A];d&&d.equals(D)||(b.push(D),
d=D)}}this.autoClose&&1<b.length&&!b[b.length-1].equals(b[0])&&b.push(b[0]);return b}copy(a){super.copy(a);this.curves=[];for(let b=0,d=a.curves.length;b<d;b++)this.curves.push(a.curves[b].clone());this.autoClose=a.autoClose;return this}toJSON(){const a=super.toJSON();a.autoClose=this.autoClose;a.curves=[];for(let b=0,d=this.curves.length;b<d;b++)a.curves.push(this.curves[b].toJSON());return a}fromJSON(a){super.fromJSON(a);this.autoClose=a.autoClose;this.curves=[];for(let b=0,d=a.curves.length;b<
d;b++){const l=a.curves[b];this.curves.push((new Ei[l.type]).fromJSON(l))}return this}}class Zf extends Zj{constructor(a){super();this.type="Path";this.currentPoint=new za;a&&this.setFromPoints(a)}setFromPoints(a){this.moveTo(a[0].x,a[0].y);for(let b=1,d=a.length;b<d;b++)this.lineTo(a[b].x,a[b].y);return this}moveTo(a,b){this.currentPoint.set(a,b);return this}lineTo(a,b){const d=new ch(this.currentPoint.clone(),new za(a,b));this.curves.push(d);this.currentPoint.set(a,b);return this}quadraticCurveTo(a,
b,d,l){a=new Bi(this.currentPoint.clone(),new za(a,b),new za(d,l));this.curves.push(a);this.currentPoint.set(d,l);return this}bezierCurveTo(a,b,d,l,q,y){a=new Ai(this.currentPoint.clone(),new za(a,b),new za(d,l),new za(q,y));this.curves.push(a);this.currentPoint.set(q,y);return this}splineThru(a){var b=[this.currentPoint.clone()].concat(a);b=new Di(b);this.curves.push(b);this.currentPoint.copy(a[a.length-1]);return this}arc(a,b,d,l,q,y){this.absarc(a+this.currentPoint.x,b+this.currentPoint.y,d,l,
q,y);return this}absarc(a,b,d,l,q,y){this.absellipse(a,b,d,d,l,q,y);return this}ellipse(a,b,d,l,q,y,A,D){this.absellipse(a+this.currentPoint.x,b+this.currentPoint.y,d,l,q,y,A,D);return this}absellipse(a,b,d,l,q,y,A,D){a=new ah(a,b,d,l,q,y,A,D);0<this.curves.length&&(b=a.getPoint(0),b.equals(this.currentPoint)||this.lineTo(b.x,b.y));this.curves.push(a);a=a.getPoint(1);this.currentPoint.copy(a);return this}copy(a){super.copy(a);this.currentPoint.copy(a.currentPoint);return this}toJSON(){const a=super.toJSON();
a.currentPoint=this.currentPoint.toArray();return a}fromJSON(a){super.fromJSON(a);this.currentPoint.fromArray(a.currentPoint);return this}}class $f extends Kb{constructor(a=[new za(0,-.5),new za(.5,0),new za(0,.5)],b=12,d=0,l=2*Math.PI){super();this.type="LatheGeometry";this.parameters={points:a,segments:b,phiStart:d,phiLength:l};b=Math.floor(b);l=n(l,0,2*Math.PI);const q=[],y=[],A=[];var D=[];const F=[];var G=1/b,M=new aa,N=new za,P=new aa,T=new aa,S=new aa;let L;for(let ma=0;ma<=a.length-1;ma++)switch(ma){case 0:var U=
a[ma+1].x-a[ma].x;L=a[ma+1].y-a[ma].y;P.x=1*L;P.y=-U;P.z=0*L;S.copy(P);P.normalize();D.push(P.x,P.y,P.z);break;case a.length-1:D.push(S.x,S.y,S.z);break;default:U=a[ma+1].x-a[ma].x,L=a[ma+1].y-a[ma].y,P.x=1*L,P.y=-U,P.z=0*L,T.copy(P),P.x+=S.x,P.y+=S.y,P.z+=S.z,P.normalize(),D.push(P.x,P.y,P.z),S.copy(T)}for(P=0;P<=b;P++)for(S=d+P*G*l,T=Math.sin(S),S=Math.cos(S),U=0;U<=a.length-1;U++)M.x=a[U].x*T,M.y=a[U].y,M.z=a[U].x*S,y.push(M.x,M.y,M.z),N.x=P/b,N.y=U/(a.length-1),A.push(N.x,N.y),F.push(D[3*U]*T,
D[3*U+1],D[3*U]*S);for(d=0;d<b;d++)for(l=0;l<a.length-1;l++)D=l+d*a.length,G=D+a.length,M=D+a.length+1,N=D+1,q.push(D,G,N),q.push(M,N,G);this.setIndex(q);this.setAttribute("position",new pb(y,3));this.setAttribute("uv",new pb(A,2));this.setAttribute("normal",new pb(F,3))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new $f(a.points,a.segments,a.phiStart,a.phiLength)}}class dh extends $f{constructor(a=1,b=1,d=4,l=8){const q=new Zf;q.absarc(0,
-b/2,a,1.5*Math.PI,0);q.absarc(0,b/2,a,0,.5*Math.PI);super(q.getPoints(d),l);this.type="CapsuleGeometry";this.parameters={radius:a,height:b,capSegments:d,radialSegments:l}}static fromJSON(a){return new dh(a.radius,a.length,a.capSegments,a.radialSegments)}}class eh extends Kb{constructor(a=1,b=32,d=0,l=2*Math.PI){super();this.type="CircleGeometry";this.parameters={radius:a,segments:b,thetaStart:d,thetaLength:l};b=Math.max(3,b);const q=[],y=[],A=[],D=[],F=new aa,G=new za;y.push(0,0,0);A.push(0,0,1);
D.push(.5,.5);for(let M=0,N=3;M<=b;M++,N+=3){const P=d+M/b*l;F.x=a*Math.cos(P);F.y=a*Math.sin(P);y.push(F.x,F.y,F.z);A.push(0,0,1);G.x=(y[N]/a+1)/2;G.y=(y[N+1]/a+1)/2;D.push(G.x,G.y)}for(a=1;a<=b;a++)q.push(a,a+1,0);this.setIndex(q);this.setAttribute("position",new pb(y,3));this.setAttribute("normal",new pb(A,3));this.setAttribute("uv",new pb(D,2))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new eh(a.radius,a.segments,a.thetaStart,a.thetaLength)}}
class gf extends Kb{constructor(a=1,b=1,d=1,l=32,q=1,y=!1,A=0,D=2*Math.PI){function F(ba){const na=S;var sa=new za,ja=new aa;let Ga=0;var oa=!0===ba?a:b;const wa=!0===ba?1:-1;for(var ya=1;ya<=l;ya++)N.push(0,U*wa,0),P.push(0,wa,0),T.push(.5,.5),S++;ya=S;for(let Va=0;Va<=l;Va++){var xa=Va/l*D+A;const La=Math.cos(xa);xa=Math.sin(xa);ja.x=oa*xa;ja.y=U*wa;ja.z=oa*La;N.push(ja.x,ja.y,ja.z);P.push(0,wa,0);sa.x=.5*La+.5;sa.y=.5*xa*wa+.5;T.push(sa.x,sa.y);S++}for(sa=0;sa<l;sa++)ja=na+sa,oa=ya+sa,!0===ba?
M.push(oa,oa+1,ja):M.push(oa+1,oa,ja),Ga+=3;G.addGroup(ma,Ga,!0===ba?1:2);ma+=Ga}super();this.type="CylinderGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:d,radialSegments:l,heightSegments:q,openEnded:y,thetaStart:A,thetaLength:D};const G=this;l=Math.floor(l);q=Math.floor(q);const M=[],N=[],P=[],T=[];let S=0;const L=[],U=d/2;let ma=0;(function(){var ba=new aa,na=new aa;let sa=0;var ja=(b-a)/d;for(var Ga=0;Ga<=q;Ga++){var oa=[];const ya=Ga/q,xa=ya*(b-a)+a;for(let Va=0;Va<=l;Va++){const La=
Va/l;var wa=La*D+A;const Ra=Math.sin(wa);wa=Math.cos(wa);na.x=xa*Ra;na.y=-ya*d+U;na.z=xa*wa;N.push(na.x,na.y,na.z);ba.set(Ra,ja,wa).normalize();P.push(ba.x,ba.y,ba.z);T.push(La,1-ya);oa.push(S++)}L.push(oa)}for(ba=0;ba<l;ba++)for(na=0;na<q;na++)ja=L[na+1][ba],Ga=L[na+1][ba+1],oa=L[na][ba+1],M.push(L[na][ba],ja,oa),M.push(ja,Ga,oa),sa+=6;G.addGroup(ma,sa,0);ma+=sa})();!1===y&&(0<a&&F(!0),0<b&&F(!1));this.setIndex(M);this.setAttribute("position",new pb(N,3));this.setAttribute("normal",new pb(P,3));
this.setAttribute("uv",new pb(T,2))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new gf(a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength)}}class fh extends gf{constructor(a=1,b=1,d=32,l=1,q=!1,y=0,A=2*Math.PI){super(0,a,b,d,l,q,y,A);this.type="ConeGeometry";this.parameters={radius:a,height:b,radialSegments:d,heightSegments:l,openEnded:q,thetaStart:y,thetaLength:A}}static fromJSON(a){return new fh(a.radius,
a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength)}}class Xd extends Kb{constructor(a=[],b=[],d=1,l=0){function q(G){D.push(G.x,G.y,G.z)}function y(G,M){G*=3;M.x=a[G+0];M.y=a[G+1];M.z=a[G+2]}function A(G,M,N,P){0>P&&1===G.x&&(F[M]=G.x-1);0===N.x&&0===N.z&&(F[M]=P/2/Math.PI+.5)}super();this.type="PolyhedronGeometry";this.parameters={vertices:a,indices:b,radius:d,detail:l};const D=[],F=[];(function(G){const M=new aa,N=new aa,P=new aa;for(let U=0;U<b.length;U+=3){y(b[U+
0],M);y(b[U+1],N);y(b[U+2],P);var T=M,S=N,L=P;const ma=G+1,ba=[];for(let na=0;na<=ma;na++){ba[na]=[];const sa=T.clone().lerp(L,na/ma),ja=S.clone().lerp(L,na/ma),Ga=ma-na;for(let oa=0;oa<=Ga;oa++)ba[na][oa]=0===oa&&na===ma?sa:sa.clone().lerp(ja,oa/Ga)}for(T=0;T<ma;T++)for(S=0;S<2*(ma-T)-1;S++)L=Math.floor(S/2),0===S%2?(q(ba[T][L+1]),q(ba[T+1][L]),q(ba[T][L])):(q(ba[T][L+1]),q(ba[T+1][L+1]),q(ba[T+1][L]))}})(l);(function(G){const M=new aa;for(let N=0;N<D.length;N+=3)M.x=D[N+0],M.y=D[N+1],M.z=D[N+2],
M.normalize().multiplyScalar(G),D[N+0]=M.x,D[N+1]=M.y,D[N+2]=M.z})(d);(function(){var G=new aa;for(var M=0;M<D.length;M+=3)G.x=D[M+0],G.y=D[M+1],G.z=D[M+2],F.push(Math.atan2(G.z,-G.x)/2/Math.PI+.5,1-(Math.atan2(-G.y,Math.sqrt(G.x*G.x+G.z*G.z))/Math.PI+.5));G=new aa;M=new aa;var N=new aa,P=new aa,T=new za;const S=new za,L=new za;for(let U=0,ma=0;U<D.length;U+=9,ma+=6){G.set(D[U+0],D[U+1],D[U+2]);M.set(D[U+3],D[U+4],D[U+5]);N.set(D[U+6],D[U+7],D[U+8]);T.set(F[ma+0],F[ma+1]);S.set(F[ma+2],F[ma+3]);L.set(F[ma+
4],F[ma+5]);P.copy(G).add(M).add(N).divideScalar(3);const ba=Math.atan2(P.z,-P.x);A(T,ma+0,G,ba);A(S,ma+2,M,ba);A(L,ma+4,N,ba)}for(G=0;G<F.length;G+=6)M=F[G+0],N=F[G+2],P=F[G+4],T=Math.min(M,N,P),.9<Math.max(M,N,P)&&.1>T&&(.2>M&&(F[G+0]+=1),.2>N&&(F[G+2]+=1),.2>P&&(F[G+4]+=1))})();this.setAttribute("position",new pb(D,3));this.setAttribute("normal",new pb(D.slice(),3));this.setAttribute("uv",new pb(F,2));0===l?this.computeVertexNormals():this.normalizeNormals()}copy(a){super.copy(a);this.parameters=
Object.assign({},a.parameters);return this}static fromJSON(a){return new Xd(a.vertices,a.indices,a.radius,a.details)}}class gh extends Xd{constructor(a=1,b=0){const d=(1+Math.sqrt(5))/2,l=1/d;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-l,-d,0,-l,d,0,l,-d,0,l,d,-l,-d,0,-l,d,0,l,-d,0,l,d,0,-d,0,-l,d,0,-l,-d,0,l,d,0,l],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,
1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,b);this.type="DodecahedronGeometry";this.parameters={radius:a,detail:b}}static fromJSON(a){return new gh(a.radius,a.detail)}}const hh=new aa,ih=new aa,Fi=new aa,jh=new Wc;class ak extends Kb{constructor(a=null,b=1){super();this.type="EdgesGeometry";this.parameters={geometry:a,thresholdAngle:b};if(null!==a){const l=Math.pow(10,4);b=Math.cos(qa*b);const q=a.getIndex();a=a.getAttribute("position");
const y=q?q.count:a.count,A=[0,0,0],D=["a","b","c"],F=Array(3),G={},M=[];for(let N=0;N<y;N+=3){q?(A[0]=q.getX(N),A[1]=q.getX(N+1),A[2]=q.getX(N+2)):(A[0]=N,A[1]=N+1,A[2]=N+2);const {a:P,b:T,c:S}=jh;P.fromBufferAttribute(a,A[0]);T.fromBufferAttribute(a,A[1]);S.fromBufferAttribute(a,A[2]);jh.getNormal(Fi);F[0]=`${Math.round(P.x*l)},${Math.round(P.y*l)},${Math.round(P.z*l)}`;F[1]=`${Math.round(T.x*l)},${Math.round(T.y*l)},${Math.round(T.z*l)}`;F[2]=`${Math.round(S.x*l)},${Math.round(S.y*l)},${Math.round(S.z*
l)}`;if(F[0]!==F[1]&&F[1]!==F[2]&&F[2]!==F[0])for(let L=0;3>L;L++){const U=(L+1)%3;var d=F[L];const ma=F[U],ba=jh[D[L]],na=jh[D[U]],sa=`${d}_${ma}`;d=`${ma}_${d}`;d in G&&G[d]?(Fi.dot(G[d].normal)<=b&&(M.push(ba.x,ba.y,ba.z),M.push(na.x,na.y,na.z)),G[d]=null):sa in G||(G[sa]={index0:A[L],index1:A[U],normal:Fi.clone()})}}for(const N in G)if(G[N]){const {index0:P,index1:T}=G[N];hh.fromBufferAttribute(a,P);ih.fromBufferAttribute(a,T);M.push(hh.x,hh.y,hh.z);M.push(ih.x,ih.y,ih.z)}this.setAttribute("position",
new pb(M,3))}}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}}class ue extends Zf{constructor(a){super(a);this.uuid=p();this.type="Shape";this.holes=[]}getPointsHoles(a){const b=[];for(let d=0,l=this.holes.length;d<l;d++)b[d]=this.holes[d].getPoints(a);return b}extractPoints(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}}copy(a){super.copy(a);this.holes=[];for(let b=0,d=a.holes.length;b<d;b++)this.holes.push(a.holes[b].clone());return this}toJSON(){const a=
super.toJSON();a.uuid=this.uuid;a.holes=[];for(let b=0,d=this.holes.length;b<d;b++)a.holes.push(this.holes[b].toJSON());return a}fromJSON(a){super.fromJSON(a);this.uuid=a.uuid;this.holes=[];for(let b=0,d=a.holes.length;b<d;b++){const l=a.holes[b];this.holes.push((new Zf).fromJSON(l))}return this}}const Jl={triangulate:function(a,b,d=2){var l=b&&b.length;const q=l?b[0]*d:a.length;var y=vg(a,0,q,d,!0);const A=[];if(!y||y.next===y.prev)return A;let D,F;var G;if(l){var M=y;y=[];var N;l=0;for(N=b.length;l<
N;l++){var P=b[l]*d;var T=l<N-1?b[l+1]*d:a.length;var S=vg(a,P,T,d,!1);S===S.next&&(S.steiner=!0);P=y;T=P.push;var L=S,U=S;do{if(L.x<U.x||L.x===U.x&&L.y<U.y)U=L;L=L.next}while(L!==S);T.call(P,U)}y.sort(Vh);for(l=0;l<y.length;l++){N=void 0;b=y[l];b:{P=M;T=-Infinity;S=b.x;L=b.y;do{if(L<=P.y&&L>=P.next.y&&P.next.y!==P.y&&(U=P.x+(L-P.y)*(P.next.x-P.x)/(P.next.y-P.y),U<=S&&U>T&&(T=U,N=P.x<P.next.x?P:P.next,U===S)))break b;P=P.next}while(P!==M);if(N){var ma=N,ba=N.x,na=N.y,sa=Infinity;P=N;do{if(S>=P.x&&
P.x>=ba&&S!==P.x&&Qd(L<na?S:T,L,ba,na,L<na?T:S,L,P.x,P.y)){U=Math.abs(L-P.y)/(S-P.x);var ja;if((ja=le(P,b))&&!(ja=U<sa)&&(ja=U===sa)&&!(ja=P.x>N.x)&&(ja=P.x===N.x)){ja=N;var Ga=P;ja=0>hc(ja.prev,ja,Ga.prev)&&0>hc(Ga.next,ja,ja.next)}ja&&(N=P,sa=U)}P=P.next}while(P!==ma)}else N=null}N&&(b=yg(N,b),wd(b,b.next),M=wd(N,N.next))}y=M}if(a.length>80*d){D=G=a[0];F=l=a[1];for(N=d;N<q;N+=d)b=a[N],M=a[N+1],b<D&&(D=b),M<F&&(F=M),b>G&&(G=b),M>l&&(l=M);G=Math.max(G-D,l-F);G=0!==G?32767/G:0}ke(y,A,d,D,F,G,0);return A}};
class Dd{static area(a){const b=a.length;let d=0;for(let l=b-1,q=0;q<b;l=q++)d+=a[l].x*a[q].y-a[q].x*a[l].y;return.5*d}static isClockWise(a){return 0>Dd.area(a)}static triangulateShape(a,b){var d=[];const l=[],q=[];zg(a);Ag(d,a);a=a.length;b.forEach(zg);for(let y=0;y<b.length;y++)l.push(a),a+=b[y].length,Ag(d,b[y]);b=Jl.triangulate(d,l);for(d=0;d<b.length;d+=3)q.push(b.slice(d,d+3));return q}}class kh extends Kb{constructor(a=new ue([new za(.5,.5),new za(-.5,.5),new za(-.5,-.5),new za(.5,-.5)]),b=
{}){function d(A){function D(V,fa,ia){fa||console.error("THREE.ExtrudeGeometry: vec does not exist");return V.clone().addScaledVector(fa,ia)}function F(V,fa,ia){var ra=V.x-fa.x;var Za=V.y-fa.y;var ha=ia.x-V.x;var Ba=ia.y-V.y,Ia=ra*ra+Za*Za;if(Math.abs(ra*Ba-Za*ha)>Number.EPSILON){const Ja=Math.sqrt(Ia),Ua=Math.sqrt(ha*ha+Ba*Ba);Ia=fa.x-Za/Ja;fa=fa.y+ra/Ja;Ba=((ia.x-Ba/Ua-Ia)*Ba-(ia.y+ha/Ua-fa)*ha)/(ra*Ba-Za*ha);ha=Ia+ra*Ba-V.x;ra=fa+Za*Ba-V.y;Za=ha*ha+ra*ra;if(2>=Za)return new za(ha,ra);Za=Math.sqrt(Za/
2)}else V=!1,ra>Number.EPSILON?ha>Number.EPSILON&&(V=!0):ra<-Number.EPSILON?ha<-Number.EPSILON&&(V=!0):Math.sign(Za)===Math.sign(Ba)&&(V=!0),V?(ha=-Za,Za=Math.sqrt(Ia)):(ha=ra,ra=Za,Za=Math.sqrt(Ia/2));return new za(ha/Za,ra/Za)}function G(V,fa){let ia=V.length;for(;0<=--ia;){const Ba=ia;let Ia=ia-1;0>Ia&&(Ia=V.length-1);for(let Ja=0,Ua=U+2*Ga;Ja<Ua;Ja++){const eb=Bb*Ja;var ra=Bb*(Ja+1),Za=fa+Ia+eb,ha=fa+Ia+ra;ra=fa+Ba+ra;P(fa+Ba+eb);P(Za);P(ra);P(Za);P(ha);P(ra);Za=q.length/3;Za=wa.generateSideWallUV(l,
q,Za-6,Za-3,Za-2,Za-1);T(Za[0]);T(Za[1]);T(Za[3]);T(Za[1]);T(Za[2]);T(Za[3])}}}function M(V,fa,ia){S.push(V);S.push(fa);S.push(ia)}function N(V,fa,ia){P(V);P(fa);P(ia);V=q.length/3;V=wa.generateTopUV(l,q,V-3,V-2,V-1);T(V[0]);T(V[1]);T(V[2])}function P(V){q.push(S[3*V]);q.push(S[3*V+1]);q.push(S[3*V+2])}function T(V){y.push(V.x);y.push(V.y)}const S=[];var L=void 0!==b.curveSegments?b.curveSegments:12;const U=void 0!==b.steps?b.steps:1,ma=void 0!==b.depth?b.depth:1;let ba=void 0!==b.bevelEnabled?b.bevelEnabled:
!0,na=void 0!==b.bevelThickness?b.bevelThickness:.2,sa=void 0!==b.bevelSize?b.bevelSize:na-.1,ja=void 0!==b.bevelOffset?b.bevelOffset:0,Ga=void 0!==b.bevelSegments?b.bevelSegments:3;var oa=b.extrudePath;const wa=void 0!==b.UVGenerator?b.UVGenerator:Kl;let ya,xa=!1;if(oa){ya=oa.getSpacedPoints(U);xa=!0;ba=!1;var Va=oa.computeFrenetFrames(U,!1);var La=new aa;var Ra=new aa;var Na=new aa}ba||(ja=sa=na=Ga=0);A=A.extractPoints(L);oa=A.shape;const cb=A.holes;if(!Dd.isClockWise(oa)){oa=oa.reverse();for(let V=
0,fa=cb.length;V<fa;V++)A=cb[V],Dd.isClockWise(A)&&(cb[V]=A.reverse())}const ob=Dd.triangulateShape(oa,cb),ub=oa;for(let V=0,fa=cb.length;V<fa;V++)oa=oa.concat(cb[V]);const Bb=oa.length,Sa=ob.length;A=[];for(let V=0,fa=ub.length,ia=fa-1,ra=V+1;V<fa;V++,ia++,ra++)ia===fa&&(ia=0),ra===fa&&(ra=0),A[V]=F(ub[V],ub[ia],ub[ra]);L=[];let $a=A.concat();for(let V=0,fa=cb.length;V<fa;V++){var bb=cb[V];var rb=[];for(let ia=0,ra=bb.length,Za=ra-1,ha=ia+1;ia<ra;ia++,Za++,ha++)Za===ra&&(Za=0),ha===ra&&(ha=0),rb[ia]=
F(bb[ia],bb[Za],bb[ha]);L.push(rb);$a=$a.concat(rb)}for(bb=0;bb<Ga;bb++){rb=bb/Ga;var nb=na*Math.cos(rb*Math.PI/2),Y=sa*Math.sin(rb*Math.PI/2)+ja;for(let V=0,fa=ub.length;V<fa;V++)rb=D(ub[V],A[V],Y),M(rb.x,rb.y,-nb);for(let V=0,fa=cb.length;V<fa;V++){const ia=cb[V];rb=L[V];for(let ra=0,Za=ia.length;ra<Za;ra++){const ha=D(ia[ra],rb[ra],Y);M(ha.x,ha.y,-nb)}}}rb=sa+ja;for(bb=0;bb<Bb;bb++)nb=ba?D(oa[bb],$a[bb],rb):oa[bb],xa?(Ra.copy(Va.normals[0]).multiplyScalar(nb.x),La.copy(Va.binormals[0]).multiplyScalar(nb.y),
Na.copy(ya[0]).add(Ra).add(La),M(Na.x,Na.y,Na.z)):M(nb.x,nb.y,0);for(bb=1;bb<=U;bb++)for(nb=0;nb<Bb;nb++)Y=ba?D(oa[nb],$a[nb],rb):oa[nb],xa?(Ra.copy(Va.normals[bb]).multiplyScalar(Y.x),La.copy(Va.binormals[bb]).multiplyScalar(Y.y),Na.copy(ya[bb]).add(Ra).add(La),M(Na.x,Na.y,Na.z)):M(Y.x,Y.y,ma/U*bb);for(Va=Ga-1;0<=Va;Va--){Ra=Va/Ga;La=na*Math.cos(Ra*Math.PI/2);Ra=sa*Math.sin(Ra*Math.PI/2)+ja;for(let V=0,fa=ub.length;V<fa;V++)Na=D(ub[V],A[V],Ra),M(Na.x,Na.y,ma+La);for(let V=0,fa=cb.length;V<fa;V++){Na=
cb[V];rb=L[V];for(let ia=0,ra=Na.length;ia<ra;ia++)oa=D(Na[ia],rb[ia],Ra),xa?M(oa.x,oa.y+ya[U-1].y,ya[U-1].x+La):M(oa.x,oa.y,ma+La)}}(function(){const V=q.length/3;if(ba){var fa=0*Bb;for(var ia=0;ia<Sa;ia++){var ra=ob[ia];N(ra[2]+fa,ra[1]+fa,ra[0]+fa)}fa=Bb*(U+2*Ga);for(ia=0;ia<Sa;ia++)ra=ob[ia],N(ra[0]+fa,ra[1]+fa,ra[2]+fa)}else{for(fa=0;fa<Sa;fa++)ia=ob[fa],N(ia[2],ia[1],ia[0]);for(fa=0;fa<Sa;fa++)ia=ob[fa],N(ia[0]+Bb*U,ia[1]+Bb*U,ia[2]+Bb*U)}l.addGroup(V,q.length/3-V,0)})();(function(){const V=
q.length/3;let fa=0;G(ub,fa);fa+=ub.length;for(let ia=0,ra=cb.length;ia<ra;ia++){const Za=cb[ia];G(Za,fa);fa+=Za.length}l.addGroup(V,q.length/3-V,1)})()}super();this.type="ExtrudeGeometry";this.parameters={shapes:a,options:b};a=Array.isArray(a)?a:[a];const l=this,q=[],y=[];for(let A=0,D=a.length;A<D;A++)d(a[A]);this.setAttribute("position",new pb(q,3));this.setAttribute("uv",new pb(y,2));this.computeVertexNormals()}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}toJSON(){const a=
super.toJSON();var b=this.parameters.shapes,d=this.parameters.options;a.shapes=[];if(Array.isArray(b))for(let l=0,q=b.length;l<q;l++)a.shapes.push(b[l].uuid);else a.shapes.push(b.uuid);a.options=Object.assign({},d);void 0!==d.extrudePath&&(a.options.extrudePath=d.extrudePath.toJSON());return a}static fromJSON(a,b){const d=[];for(let l=0,q=a.shapes.length;l<q;l++)d.push(b[a.shapes[l]]);b=a.options.extrudePath;void 0!==b&&(a.options.extrudePath=(new Ei[b.type]).fromJSON(b));return new kh(d,a.options)}}
const Kl={generateTopUV:function(a,b,d,l,q){a=b[3*l];l=b[3*l+1];const y=b[3*q];q=b[3*q+1];return[new za(b[3*d],b[3*d+1]),new za(a,l),new za(y,q)]},generateSideWallUV:function(a,b,d,l,q,y){a=b[3*d];const A=b[3*d+1];d=b[3*d+2];const D=b[3*l],F=b[3*l+1];l=b[3*l+2];const G=b[3*q],M=b[3*q+1];q=b[3*q+2];const N=b[3*y],P=b[3*y+1];b=b[3*y+2];return Math.abs(A-F)<Math.abs(a-D)?[new za(a,1-d),new za(D,1-l),new za(G,1-q),new za(N,1-b)]:[new za(A,1-d),new za(F,1-l),new za(M,1-q),new za(P,1-b)]}};class lh extends Xd{constructor(a=
1,b=0){const d=(1+Math.sqrt(5))/2;super([-1,d,0,1,d,0,-1,-d,0,1,-d,0,0,-1,d,0,1,d,0,-1,-d,0,1,-d,d,0,-1,d,0,1,-d,0,-1,-d,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b);this.type="IcosahedronGeometry";this.parameters={radius:a,detail:b}}static fromJSON(a){return new lh(a.radius,a.detail)}}class ag extends Xd{constructor(a=1,b=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,
5,1,5,3,1,3,4,1,4,2],a,b);this.type="OctahedronGeometry";this.parameters={radius:a,detail:b}}static fromJSON(a){return new ag(a.radius,a.detail)}}class mh extends Kb{constructor(a=.5,b=1,d=32,l=1,q=0,y=2*Math.PI){super();this.type="RingGeometry";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:d,phiSegments:l,thetaStart:q,thetaLength:y};d=Math.max(3,d);l=Math.max(1,l);const A=[],D=[],F=[],G=[];var M=a;a=(b-a)/l;var N=new aa,P=new za;for(let T=0;T<=l;T++){for(let S=0;S<=d;S++){const L=q+
S/d*y;N.x=M*Math.cos(L);N.y=M*Math.sin(L);D.push(N.x,N.y,N.z);F.push(0,0,1);P.x=(N.x/b+1)/2;P.y=(N.y/b+1)/2;G.push(P.x,P.y)}M+=a}for(b=0;b<l;b++)for(q=b*(d+1),y=0;y<d;y++)M=y+q,a=M+d+1,N=M+d+2,P=M+1,A.push(M,a,P),A.push(a,N,P);this.setIndex(A);this.setAttribute("position",new pb(D,3));this.setAttribute("normal",new pb(F,3));this.setAttribute("uv",new pb(G,2))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new mh(a.innerRadius,a.outerRadius,
a.thetaSegments,a.phiSegments,a.thetaStart,a.thetaLength)}}class nh extends Kb{constructor(a=new ue([new za(0,.5),new za(-.5,-.5),new za(.5,-.5)]),b=12){function d(G){const M=q.length/3;var N=G.extractPoints(b);G=N.shape;var P=N.holes;!1===Dd.isClockWise(G)&&(G=G.reverse());for(let T=0,S=P.length;T<S;T++)N=P[T],!0===Dd.isClockWise(N)&&(P[T]=N.reverse());N=Dd.triangulateShape(G,P);for(let T=0,S=P.length;T<S;T++)G=G.concat(P[T]);for(let T=0,S=G.length;T<S;T++)P=G[T],q.push(P.x,P.y,0),y.push(0,0,1),
A.push(P.x,P.y);for(let T=0,S=N.length;T<S;T++)G=N[T],l.push(G[0]+M,G[1]+M,G[2]+M),F+=3}super();this.type="ShapeGeometry";this.parameters={shapes:a,curveSegments:b};const l=[],q=[],y=[],A=[];let D=0,F=0;if(!1===Array.isArray(a))d(a);else for(let G=0;G<a.length;G++)d(a[G]),this.addGroup(D,F,G),D+=F,F=0;this.setIndex(l);this.setAttribute("position",new pb(q,3));this.setAttribute("normal",new pb(y,3));this.setAttribute("uv",new pb(A,2))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);
return this}toJSON(){const a=super.toJSON();var b=this.parameters.shapes;a.shapes=[];if(Array.isArray(b))for(let d=0,l=b.length;d<l;d++)a.shapes.push(b[d].uuid);else a.shapes.push(b.uuid);return a}static fromJSON(a,b){const d=[];for(let l=0,q=a.shapes.length;l<q;l++)d.push(b[a.shapes[l]]);return new nh(d,a.curveSegments)}}class bg extends Kb{constructor(a=1,b=32,d=16,l=0,q=2*Math.PI,y=0,A=Math.PI){super();this.type="SphereGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:d,phiStart:l,
phiLength:q,thetaStart:y,thetaLength:A};b=Math.max(3,Math.floor(b));d=Math.max(2,Math.floor(d));const D=Math.min(y+A,Math.PI);var F=0;const G=[];var M=new aa;const N=new aa,P=[],T=[],S=[],L=[];for(let U=0;U<=d;U++){const ma=[],ba=U/d;let na=0;0==U&&0==y?na=.5/b:U==d&&D==Math.PI&&(na=-.5/b);for(let sa=0;sa<=b;sa++){const ja=sa/b;M.x=-a*Math.cos(l+ja*q)*Math.sin(y+ba*A);M.y=a*Math.cos(y+ba*A);M.z=a*Math.sin(l+ja*q)*Math.sin(y+ba*A);T.push(M.x,M.y,M.z);N.copy(M).normalize();S.push(N.x,N.y,N.z);L.push(ja+
na,1-ba);ma.push(F++)}G.push(ma)}for(a=0;a<d;a++)for(l=0;l<b;l++)q=G[a][l+1],A=G[a][l],F=G[a+1][l],M=G[a+1][l+1],(0!==a||0<y)&&P.push(q,A,M),(a!==d-1||D<Math.PI)&&P.push(A,F,M);this.setIndex(P);this.setAttribute("position",new pb(T,3));this.setAttribute("normal",new pb(S,3));this.setAttribute("uv",new pb(L,2))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new bg(a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,
a.thetaLength)}}class oh extends Xd{constructor(a=1,b=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type="TetrahedronGeometry";this.parameters={radius:a,detail:b}}static fromJSON(a){return new oh(a.radius,a.detail)}}class ph extends Kb{constructor(a=1,b=.4,d=12,l=48,q=2*Math.PI){super();this.type="TorusGeometry";this.parameters={radius:a,tube:b,radialSegments:d,tubularSegments:l,arc:q};d=Math.floor(d);l=Math.floor(l);const y=[],A=[],D=[],F=[];var G=new aa,M=new aa;const N=
new aa;for(let P=0;P<=d;P++)for(let T=0;T<=l;T++){const S=T/l*q,L=P/d*Math.PI*2;M.x=(a+b*Math.cos(L))*Math.cos(S);M.y=(a+b*Math.cos(L))*Math.sin(S);M.z=b*Math.sin(L);A.push(M.x,M.y,M.z);G.x=a*Math.cos(S);G.y=a*Math.sin(S);N.subVectors(M,G).normalize();D.push(N.x,N.y,N.z);F.push(T/l);F.push(P/d)}for(a=1;a<=d;a++)for(b=1;b<=l;b++)q=(l+1)*(a-1)+b-1,G=(l+1)*(a-1)+b,M=(l+1)*a+b,y.push((l+1)*a+b-1,q,M),y.push(q,G,M);this.setIndex(y);this.setAttribute("position",new pb(A,3));this.setAttribute("normal",new pb(D,
3));this.setAttribute("uv",new pb(F,2))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new ph(a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc)}}class qh extends Kb{constructor(a=1,b=.4,d=64,l=8,q=2,y=3){function A(sa,ja,Ga,oa,wa){const ya=Math.sin(sa);ja=Ga/ja*sa;Ga=Math.cos(ja);wa.x=oa*(2+Ga)*.5*Math.cos(sa);wa.y=oa*(2+Ga)*ya*.5;wa.z=oa*Math.sin(ja)*.5}super();this.type="TorusKnotGeometry";this.parameters={radius:a,tube:b,tubularSegments:d,
radialSegments:l,p:q,q:y};d=Math.floor(d);l=Math.floor(l);const D=[],F=[],G=[],M=[];var N=new aa;const P=new aa,T=new aa,S=new aa,L=new aa,U=new aa,ma=new aa;for(let sa=0;sa<=d;++sa){var ba=sa/d*q*Math.PI*2;A(ba,q,y,a,T);A(ba+.01,q,y,a,S);U.subVectors(S,T);ma.addVectors(S,T);L.crossVectors(U,ma);ma.crossVectors(L,U);L.normalize();ma.normalize();for(ba=0;ba<=l;++ba){var na=ba/l*Math.PI*2;const ja=-b*Math.cos(na);na=b*Math.sin(na);N.x=T.x+(ja*ma.x+na*L.x);N.y=T.y+(ja*ma.y+na*L.y);N.z=T.z+(ja*ma.z+na*
L.z);F.push(N.x,N.y,N.z);P.subVectors(N,T).normalize();G.push(P.x,P.y,P.z);M.push(sa/d);M.push(ba/l)}}for(a=1;a<=d;a++)for(b=1;b<=l;b++)q=(l+1)*a+(b-1),y=(l+1)*a+b,N=(l+1)*(a-1)+b,D.push((l+1)*(a-1)+(b-1),q,N),D.push(q,y,N);this.setIndex(D);this.setAttribute("position",new pb(F,3));this.setAttribute("normal",new pb(G,3));this.setAttribute("uv",new pb(M,2))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new qh(a.radius,a.tube,a.tubularSegments,
a.radialSegments,a.p,a.q)}}class rh extends Kb{constructor(a=new Ci(new aa(-1,-1,0),new aa(-1,1,0),new aa(1,1,0)),b=64,d=1,l=8,q=!1){function y(L){M=a.getPointAt(L/b,M);const U=A.normals[L];L=A.binormals[L];for(let ba=0;ba<=l;ba++){var ma=ba/l*Math.PI*2;const na=Math.sin(ma);ma=-Math.cos(ma);F.x=ma*U.x+na*L.x;F.y=ma*U.y+na*L.y;F.z=ma*U.z+na*L.z;F.normalize();P.push(F.x,F.y,F.z);D.x=M.x+d*F.x;D.y=M.y+d*F.y;D.z=M.z+d*F.z;N.push(D.x,D.y,D.z)}}super();this.type="TubeGeometry";this.parameters={path:a,
tubularSegments:b,radius:d,radialSegments:l,closed:q};const A=a.computeFrenetFrames(b,q);this.tangents=A.tangents;this.normals=A.normals;this.binormals=A.binormals;const D=new aa,F=new aa,G=new za;let M=new aa;const N=[],P=[],T=[],S=[];(function(){for(var L=0;L<b;L++)y(L);y(!1===q?b:0);for(L=0;L<=b;L++)for(var U=0;U<=l;U++)G.x=L/b,G.y=U/l,T.push(G.x,G.y);for(L=1;L<=b;L++)for(U=1;U<=l;U++){const ma=(l+1)*L+(U-1),ba=(l+1)*L+U,na=(l+1)*(L-1)+U;S.push((l+1)*(L-1)+(U-1),ma,na);S.push(ma,ba,na)}})();this.setIndex(S);
this.setAttribute("position",new pb(N,3));this.setAttribute("normal",new pb(P,3));this.setAttribute("uv",new pb(T,2))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}toJSON(){const a=super.toJSON();a.path=this.parameters.path.toJSON();return a}static fromJSON(a){return new rh((new Ei[a.path.type]).fromJSON(a.path),a.tubularSegments,a.radius,a.radialSegments,a.closed)}}class bk extends Kb{constructor(a=null){super();this.type="WireframeGeometry";this.parameters={geometry:a};
if(null!==a){const y=[],A=new Set,D=new aa,F=new aa;if(null!==a.index){var b=a.attributes.position,d=a.index;a=a.groups;0===a.length&&(a=[{start:0,count:d.count,materialIndex:0}]);for(let G=0,M=a.length;G<M;++G){var l=a[G],q=l.start;l=l.count;for(let N=q,P=q+l;N<P;N+=3)for(q=0;3>q;q++){l=d.getX(N+q);const T=d.getX(N+(q+1)%3);D.fromBufferAttribute(b,l);F.fromBufferAttribute(b,T);!0===Bg(D,F,A)&&(y.push(D.x,D.y,D.z),y.push(F.x,F.y,F.z))}}}else{b=a.attributes.position;for(let G=0,M=b.count/3;G<M;G++)for(d=
0;3>d;d++)a=3*G+(d+1)%3,D.fromBufferAttribute(b,3*G+d),F.fromBufferAttribute(b,a),!0===Bg(D,F,A)&&(y.push(D.x,D.y,D.z),y.push(F.x,F.y,F.z))}this.setAttribute("position",new pb(y,3))}}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}}var ck=Object.freeze({__proto__:null,BoxGeometry:ae,CapsuleGeometry:dh,CircleGeometry:eh,ConeGeometry:fh,CylinderGeometry:gf,DodecahedronGeometry:gh,EdgesGeometry:ak,ExtrudeGeometry:kh,IcosahedronGeometry:lh,LatheGeometry:$f,OctahedronGeometry:ag,
PlaneGeometry:lf,PolyhedronGeometry:Xd,RingGeometry:mh,ShapeGeometry:nh,SphereGeometry:bg,TetrahedronGeometry:oh,TorusGeometry:ph,TorusKnotGeometry:qh,TubeGeometry:rh,WireframeGeometry:bk});class dk extends Fc{constructor(a){super();this.isShadowMaterial=!0;this.type="ShadowMaterial";this.color=new gb(0);this.fog=this.transparent=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.fog=a.fog;return this}}class ek extends fd{constructor(a){super(a);this.isRawShaderMaterial=!0;this.type=
"RawShaderMaterial"}}class Gi extends Fc{constructor(a){super();this.isMeshStandardMaterial=!0;this.defines={STANDARD:""};this.type="MeshStandardMaterial";this.color=new gb(16777215);this.roughness=1;this.metalness=0;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new gb(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new za(1,1);this.displacementMap=null;
this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.flatShading=!1;this.fog=!0;this.setValues(a)}copy(a){super.copy(a);this.defines={STANDARD:""};this.color.copy(a.color);this.roughness=a.roughness;this.metalness=a.metalness;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=
a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.roughnessMap=a.roughnessMap;this.metalnessMap=a.metalnessMap;this.alphaMap=
a.alphaMap;this.envMap=a.envMap;this.envMapIntensity=a.envMapIntensity;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.flatShading=a.flatShading;this.fog=a.fog;return this}}class fk extends Gi{constructor(a){super();this.isMeshPhysicalMaterial=!0;this.defines={STANDARD:"",PHYSICAL:""};this.type="MeshPhysicalMaterial";this.clearcoatMap=null;this.clearcoatRoughness=0;this.clearcoatRoughnessMap=
null;this.clearcoatNormalScale=new za(1,1);this.clearcoatNormalMap=null;this.ior=1.5;Object.defineProperty(this,"reflectivity",{get:function(){return n(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(b){this.ior=(1+.4*b)/(1-.4*b)}});this.iridescenceMap=null;this.iridescenceIOR=1.3;this.iridescenceThicknessRange=[100,400];this.iridescenceThicknessMap=null;this.sheenColor=new gb(0);this.sheenColorMap=null;this.sheenRoughness=1;this.transmissionMap=this.sheenRoughnessMap=null;this.thickness=0;this.thicknessMap=
null;this.attenuationDistance=Infinity;this.attenuationColor=new gb(1,1,1);this.specularIntensity=1;this.specularIntensityMap=null;this.specularColor=new gb(1,1,1);this.specularColorMap=null;this._transmission=this._iridescence=this._clearcoat=this._sheen=0;this.setValues(a)}get sheen(){return this._sheen}set sheen(a){0<this._sheen!==0<a&&this.version++;this._sheen=a}get clearcoat(){return this._clearcoat}set clearcoat(a){0<this._clearcoat!==0<a&&this.version++;this._clearcoat=a}get iridescence(){return this._iridescence}set iridescence(a){0<
this._iridescence!==0<a&&this.version++;this._iridescence=a}get transmission(){return this._transmission}set transmission(a){0<this._transmission!==0<a&&this.version++;this._transmission=a}copy(a){super.copy(a);this.defines={STANDARD:"",PHYSICAL:""};this.clearcoat=a.clearcoat;this.clearcoatMap=a.clearcoatMap;this.clearcoatRoughness=a.clearcoatRoughness;this.clearcoatRoughnessMap=a.clearcoatRoughnessMap;this.clearcoatNormalMap=a.clearcoatNormalMap;this.clearcoatNormalScale.copy(a.clearcoatNormalScale);
this.ior=a.ior;this.iridescence=a.iridescence;this.iridescenceMap=a.iridescenceMap;this.iridescenceIOR=a.iridescenceIOR;this.iridescenceThicknessRange=[...a.iridescenceThicknessRange];this.iridescenceThicknessMap=a.iridescenceThicknessMap;this.sheen=a.sheen;this.sheenColor.copy(a.sheenColor);this.sheenColorMap=a.sheenColorMap;this.sheenRoughness=a.sheenRoughness;this.sheenRoughnessMap=a.sheenRoughnessMap;this.transmission=a.transmission;this.transmissionMap=a.transmissionMap;this.thickness=a.thickness;
this.thicknessMap=a.thicknessMap;this.attenuationDistance=a.attenuationDistance;this.attenuationColor.copy(a.attenuationColor);this.specularIntensity=a.specularIntensity;this.specularIntensityMap=a.specularIntensityMap;this.specularColor.copy(a.specularColor);this.specularColorMap=a.specularColorMap;return this}}class gk extends Fc{constructor(a){super();this.isMeshPhongMaterial=!0;this.type="MeshPhongMaterial";this.color=new gb(16777215);this.specular=new gb(1118481);this.shininess=30;this.lightMap=
this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new gb(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new za(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=
"round";this.flatShading=!1;this.fog=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.specular.copy(a.specular);this.shininess=a.shininess;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=
a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;
this.flatShading=a.flatShading;this.fog=a.fog;return this}}class hk extends Fc{constructor(a){super();this.isMeshToonMaterial=!0;this.defines={TOON:""};this.type="MeshToonMaterial";this.color=new gb(16777215);this.lightMap=this.gradientMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new gb(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new za(1,1);this.displacementMap=
null;this.displacementScale=1;this.displacementBias=0;this.alphaMap=null;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.fog=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.map=a.map;this.gradientMap=a.gradientMap;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=
a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.alphaMap=a.alphaMap;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.fog=a.fog;return this}}
class ik extends Fc{constructor(a){super();this.isMeshNormalMaterial=!0;this.type="MeshNormalMaterial";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new za(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.flatShading=!1;this.setValues(a)}copy(a){super.copy(a);this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);
this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.flatShading=a.flatShading;return this}}class jk extends Fc{constructor(a){super();this.isMeshLambertMaterial=!0;this.type="MeshLambertMaterial";this.color=new gb(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new gb(0);this.emissiveIntensity=
1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new za(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.flatShading=!1;this.fog=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);
this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;
this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.flatShading=a.flatShading;this.fog=a.fog;return this}}class kk extends Fc{constructor(a){super();this.isMeshMatcapMaterial=!0;this.defines={MATCAP:""};this.type="MeshMatcapMaterial";
this.color=new gb(16777215);this.bumpMap=this.map=this.matcap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new za(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.alphaMap=null;this.flatShading=!1;this.fog=!0;this.setValues(a)}copy(a){super.copy(a);this.defines={MATCAP:""};this.color.copy(a.color);this.matcap=a.matcap;this.map=a.map;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=
a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.alphaMap=a.alphaMap;this.flatShading=a.flatShading;this.fog=a.fog;return this}}class lk extends Kc{constructor(a){super();this.isLineDashedMaterial=!0;this.type="LineDashedMaterial";this.scale=1;this.dashSize=3;this.gapSize=1;this.setValues(a)}copy(a){super.copy(a);this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=
a.gapSize;return this}}const Ll={arraySlice:Lc,convertArray:xd,isTypedArray:If,getKeyframeOrder:Cg,sortedArray:Jf,flattenJSON:Kf,subclip:function(a,b,d,l,q=30){a=a.clone();a.name=b;b=[];for(let A=0;A<a.tracks.length;++A){const D=a.tracks[A],F=D.getValueSize(),G=[],M=[];for(let N=0;N<D.times.length;++N){var y=D.times[N]*q;if(!(y<d||y>=l))for(G.push(D.times[N]),y=0;y<F;++y)M.push(D.values[N*F+y])}0!==G.length&&(D.times=xd(G,D.times.constructor),D.values=xd(M,D.values.constructor),b.push(D))}a.tracks=
b;d=Infinity;for(l=0;l<a.tracks.length;++l)d>a.tracks[l].times[0]&&(d=a.tracks[l].times[0]);for(l=0;l<a.tracks.length;++l)a.tracks[l].shift(-1*d);a.resetDuration();return a},makeClipAdditive:function(a,b=0,d=a,l=30){0>=l&&(l=30);const q=d.tracks.length;b/=l;for(l=0;l<q;++l){const G=d.tracks[l],M=G.ValueTypeName;if("bool"===M||"string"===M)continue;const N=a.tracks.find(function(S){return S.name===G.name&&S.ValueTypeName===M});if(void 0===N)continue;var y=0,A=G.getValueSize();G.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&
(y=A/3);let P=0;const T=N.getValueSize();N.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(P=T/3);var D=G.times.length-1;if(b<=G.times[0])y=Lc(G.values,y,A-y);else if(b>=G.times[D])D=D*A+y,y=Lc(G.values,D,D+A-y);else{D=G.createInterpolant();var F=y;y=A-y;D.evaluate(b);y=Lc(D.resultBuffer,F,y)}"quaternion"===M&&(new lb).fromArray(y).normalize().conjugate().toArray(y);A=N.times.length;for(D=0;D<A;++D)if(F=D*T+P,"quaternion"===M)lb.multiplyQuaternionsFlat(N.values,F,y,0,N.values,F);else{const S=
T-2*P;for(let L=0;L<S;++L)N.values[F+L]-=y[L]}}a.blendMode=2501;return a}};class cg{constructor(a,b,d,l){this.parameterPositions=a;this._cachedIndex=0;this.resultBuffer=void 0!==l?l:new b.constructor(d);this.sampleValues=b;this.valueSize=d;this.settings=null;this.DefaultSettings_={}}evaluate(a){const b=this.parameterPositions;let d=this._cachedIndex;var l=b[d],q=b[d-1];a:{b:{c:{d:if(!(a<l)){for(var y=d+2;;){if(void 0===l){if(a<q)break d;this._cachedIndex=d=b.length;return this.copySampleValue_(d-
1)}if(d===y)break;q=l;l=b[++d];if(a<l)break b}q=b.length;break c}if(a>=q)break a;else{l=b[1];a<l&&(d=2,q=l);for(y=d-2;;){if(void 0===q)return this._cachedIndex=0,this.copySampleValue_(0);if(d===y)break;l=q;q=b[--d-1];if(a>=q)break b}q=d;d=0}}for(;d<q;)l=d+q>>>1,a<b[l]?q=l:d=l+1;l=b[d];q=b[d-1];if(void 0===q)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===l)return this._cachedIndex=d=b.length,this.copySampleValue_(d-1)}this._cachedIndex=d;this.intervalChanged_(d,q,l)}return this.interpolate_(d,
q,a,l)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(a){const b=this.resultBuffer,d=this.sampleValues,l=this.valueSize;a*=l;for(let q=0;q!==l;++q)b[q]=d[a+q];return b}interpolate_(){throw Error("call to abstract method");}intervalChanged_(){}}class mk extends cg{constructor(a,b,d,l){super(a,b,d,l);this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0;this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(a,b,d){var l=this.parameterPositions;
let q=a-2,y=a+1,A=l[q],D=l[y];if(void 0===A)switch(this.getSettings_().endingStart){case 2401:q=a;A=2*b-d;break;case 2402:q=l.length-2;A=b+l[q]-l[q+1];break;default:q=a,A=d}if(void 0===D)switch(this.getSettings_().endingEnd){case 2401:y=a;D=2*d-b;break;case 2402:y=1;D=d+l[1]-l[0];break;default:y=a-1,D=b}a=.5*(d-b);l=this.valueSize;this._weightPrev=a/(b-A);this._weightNext=a/(D-d);this._offsetPrev=q*l;this._offsetNext=y*l}interpolate_(a,b,d,l){const q=this.resultBuffer,y=this.sampleValues,A=this.valueSize;
a*=A;const D=a-A,F=this._offsetPrev,G=this._offsetNext;var M=this._weightPrev,N=this._weightNext,P=(d-b)/(l-b);d=P*P;l=d*P;b=-M*l+2*M*d-M*P;M=(1+M)*l+(-1.5-2*M)*d+(-.5+M)*P+1;P=(-1-N)*l+(1.5+N)*d+.5*P;N=N*l-N*d;for(d=0;d!==A;++d)q[d]=b*y[F+d]+M*y[D+d]+P*y[a+d]+N*y[G+d];return q}}class Hi extends cg{constructor(a,b,d,l){super(a,b,d,l)}interpolate_(a,b,d,l){const q=this.resultBuffer,y=this.sampleValues,A=this.valueSize;a*=A;const D=a-A;b=(d-b)/(l-b);d=1-b;for(l=0;l!==A;++l)q[l]=y[D+l]*d+y[a+l]*b;return q}}
class nk extends cg{constructor(a,b,d,l){super(a,b,d,l)}interpolate_(a){return this.copySampleValue_(a-1)}}class ed{constructor(a,b,d,l){if(void 0===a)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===b||0===b.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+a);this.name=a;this.times=xd(b,this.TimeBufferType);this.values=xd(d,this.ValueBufferType);this.setInterpolation(l||this.DefaultInterpolation)}static toJSON(a){var b=a.constructor;if(b.toJSON!==this.toJSON)b=
b.toJSON(a);else{b={name:a.name,times:xd(a.times,Array),values:xd(a.values,Array)};const d=a.getInterpolation();d!==a.DefaultInterpolation&&(b.interpolation=d)}b.type=a.ValueTypeName;return b}InterpolantFactoryMethodDiscrete(a){return new nk(this.times,this.values,this.getValueSize(),a)}InterpolantFactoryMethodLinear(a){return new Hi(this.times,this.values,this.getValueSize(),a)}InterpolantFactoryMethodSmooth(a){return new mk(this.times,this.values,this.getValueSize(),a)}setInterpolation(a){switch(a){case 2300:var b=
this.InterpolantFactoryMethodDiscrete;break;case 2301:b=this.InterpolantFactoryMethodLinear;break;case 2302:b=this.InterpolantFactoryMethodSmooth}if(void 0===b){b="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant)if(a!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(b);console.warn("THREE.KeyframeTrack:",b);return this}this.createInterpolant=b;return this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;
case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(a){if(0!==a){const b=this.times;for(let d=0,l=b.length;d!==l;++d)b[d]+=a}return this}scale(a){if(1!==a){const b=this.times;for(let d=0,l=b.length;d!==l;++d)b[d]*=a}return this}trim(a,b){const d=this.times,l=d.length;let q=0,y=l-1;for(;q!==l&&d[q]<a;)++q;for(;-1!==y&&d[y]>b;)--y;++y;if(0!==q||y!==l)q>=y&&(y=Math.max(y,1),q=y-1),
a=this.getValueSize(),this.times=Lc(d,q,y),this.values=Lc(this.values,q*a,y*a);return this}validate(){let a=!0;var b=this.getValueSize();0!==b-Math.floor(b)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),a=!1);var d=this.times;b=this.values;const l=d.length;0===l&&(console.error("THREE.KeyframeTrack: Track is empty.",this),a=!1);let q=null;for(let y=0;y!==l;y++){const A=d[y];if("number"===typeof A&&isNaN(A)){console.error("THREE.KeyframeTrack: Time is not a valid number.",
this,y,A);a=!1;break}if(null!==q&&q>A){console.error("THREE.KeyframeTrack: Out of order keys.",this,y,A,q);a=!1;break}q=A}if(void 0!==b&&If(b))for(let y=0,A=b.length;y!==A;++y)if(d=b[y],isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,y,d);a=!1;break}return a}optimize(){const a=Lc(this.times),b=Lc(this.values),d=this.getValueSize(),l=2302===this.getInterpolation(),q=a.length-1;let y=1;for(let G=1;G<q;++G){var A=!1,D=a[G];if(D!==a[G+1]&&(1!==G||D!==a[0]))if(l)A=!0;else{D=
G*d;var F=D-d;const M=D+d;for(let N=0;N!==d;++N){const P=b[D+N];if(P!==b[F+N]||P!==b[M+N]){A=!0;break}}}if(A){if(G!==y)for(a[y]=a[G],A=G*d,D=y*d,F=0;F!==d;++F)b[D+F]=b[A+F];++y}}if(0<q){a[y]=a[q];for(let G=q*d,M=y*d,N=0;N!==d;++N)b[M+N]=b[G+N];++y}y!==a.length?(this.times=Lc(a,0,y),this.values=Lc(b,0,y*d)):(this.times=a,this.values=b);return this}clone(){var a=Lc(this.times,0);const b=Lc(this.values,0);a=new this.constructor(this.name,a,b);a.createInterpolant=this.createInterpolant;return a}}ed.prototype.TimeBufferType=
Float32Array;ed.prototype.ValueBufferType=Float32Array;ed.prototype.DefaultInterpolation=2301;class me extends ed{}me.prototype.ValueTypeName="bool";me.prototype.ValueBufferType=Array;me.prototype.DefaultInterpolation=2300;me.prototype.InterpolantFactoryMethodLinear=void 0;me.prototype.InterpolantFactoryMethodSmooth=void 0;class Xh extends ed{}Xh.prototype.ValueTypeName="color";class Lf extends ed{}Lf.prototype.ValueTypeName="number";class ok extends cg{constructor(a,b,d,l){super(a,b,d,l)}interpolate_(a,
b,d,l){const q=this.resultBuffer,y=this.sampleValues,A=this.valueSize;b=(d-b)/(l-b);a*=A;for(d=a+A;a!==d;a+=4)lb.slerpFlat(q,0,y,a-A,y,a,b);return q}}class Ne extends ed{InterpolantFactoryMethodLinear(a){return new ok(this.times,this.values,this.getValueSize(),a)}}Ne.prototype.ValueTypeName="quaternion";Ne.prototype.DefaultInterpolation=2301;Ne.prototype.InterpolantFactoryMethodSmooth=void 0;class ne extends ed{}ne.prototype.ValueTypeName="string";ne.prototype.ValueBufferType=Array;ne.prototype.DefaultInterpolation=
2300;ne.prototype.InterpolantFactoryMethodLinear=void 0;ne.prototype.InterpolantFactoryMethodSmooth=void 0;class Mf extends ed{}Mf.prototype.ValueTypeName="vector";class dg{constructor(a,b=-1,d,l=2500){this.name=a;this.tracks=d;this.duration=b;this.blendMode=l;this.uuid=p();0>this.duration&&this.resetDuration()}static parse(a){var b=[];const d=a.tracks,l=1/(a.fps||1);for(let D=0,F=d.length;D!==F;++D){var q=b,y=q.push;{var A=d[D];if(void 0===A.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");
const G=Wh(A.type);if(void 0===A.times){const M=[],N=[];Kf(A.keys,M,N,"value");A.times=M;A.values=N}A=void 0!==G.parse?G.parse(A):new G(A.name,A.times,A.values,A.interpolation)}y.call(q,A.scale(l))}b=new this(a.name,a.duration,b,a.blendMode);b.uuid=a.uuid;return b}static toJSON(a){const b=[],d=a.tracks;a={name:a.name,duration:a.duration,tracks:b,uuid:a.uuid,blendMode:a.blendMode};for(let l=0,q=d.length;l!==q;++l)b.push(ed.toJSON(d[l]));return a}static CreateFromMorphTargetSequence(a,b,d,l){const q=
b.length,y=[];for(let A=0;A<q;A++){let D=[],F=[];D.push((A+q-1)%q,A,(A+1)%q);F.push(0,1,0);const G=Cg(D);D=Jf(D,1,G);F=Jf(F,1,G);l||0!==D[0]||(D.push(q),F.push(F[0]));y.push((new Lf(".morphTargetInfluences["+b[A].name+"]",D,F)).scale(1/d))}return new this(a,-1,y)}static findByName(a,b){let d=a;Array.isArray(a)||(d=a.geometry&&a.geometry.animations||a.animations);for(a=0;a<d.length;a++)if(d[a].name===b)return d[a];return null}static CreateClipsFromMorphTargetSequences(a,b,d){const l={},q=/^([\w-]*?)([\d]+)$/;
for(let A=0,D=a.length;A<D;A++){const F=a[A];var y=F.name.match(q);if(y&&1<y.length){y=y[1];let G=l[y];G||(l[y]=G=[]);G.push(F)}}a=[];for(const A in l)a.push(this.CreateFromMorphTargetSequence(A,l[A],b,d));return a}static parseAnimation(a,b){if(!a)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const d=function(M,N,P,T,S){if(0!==P.length){const L=[],U=[];Kf(P,L,U,T);0!==L.length&&S.push(new M(N,L,U))}},l=[],q=a.name||"default",y=a.fps||30,A=a.blendMode;var D=a.length||
-1;a=a.hierarchy||[];for(let M=0;M<a.length;M++){const N=a[M].keys;if(N&&0!==N.length)if(N[0].morphTargets){D={};var F=void 0;for(F=0;F<N.length;F++)if(N[F].morphTargets)for(var G=0;G<N[F].morphTargets.length;G++)D[N[F].morphTargets[G]]=-1;for(const P in D){G=[];const T=[];for(let S=0;S!==N[F].morphTargets.length;++S){const L=N[F];G.push(L.time);T.push(L.morphTarget===P?1:0)}l.push(new Lf(".morphTargetInfluence["+P+"]",G,T))}D=D.length*y}else F=".bones["+b[M].name+"]",d(Mf,F+".position",N,"pos",l),
d(Ne,F+".quaternion",N,"rot",l),d(Mf,F+".scale",N,"scl",l)}return 0===l.length?null:new this(q,D,l,A)}resetDuration(){var a=this.tracks;let b=0;for(let d=0,l=a.length;d!==l;++d)a=this.tracks[d],b=Math.max(b,a.times[a.times.length-1]);this.duration=b;return this}trim(){for(let a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this}validate(){let a=!0;for(let b=0;b<this.tracks.length;b++)a=a&&this.tracks[b].validate();return a}optimize(){for(let a=0;a<this.tracks.length;a++)this.tracks[a].optimize();
return this}clone(){const a=[];for(let b=0;b<this.tracks.length;b++)a.push(this.tracks[b].clone());return new this.constructor(this.name,this.duration,a,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}const ve={enabled:!1,files:{},add:function(a,b){!1!==this.enabled&&(this.files[a]=b)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};class Ii{constructor(a,b,d){const l=this;let q=!1,y=0,A=0,D=void 0;
const F=[];this.onStart=void 0;this.onLoad=a;this.onProgress=b;this.onError=d;this.itemStart=function(G){A++;if(!1===q&&void 0!==l.onStart)l.onStart(G,y,A);q=!0};this.itemEnd=function(G){y++;if(void 0!==l.onProgress)l.onProgress(G,y,A);if(y===A&&(q=!1,void 0!==l.onLoad))l.onLoad()};this.itemError=function(G){if(void 0!==l.onError)l.onError(G)};this.resolveURL=function(G){return D?D(G):G};this.setURLModifier=function(G){D=G;return this};this.addHandler=function(G,M){F.push(G,M);return this};this.removeHandler=
function(G){G=F.indexOf(G);-1!==G&&F.splice(G,2);return this};this.getHandler=function(G){for(let M=0,N=F.length;M<N;M+=2){const P=F[M],T=F[M+1];P.global&&(P.lastIndex=0);if(P.test(G))return T}return null}}}const pk=new Ii;class Tc{constructor(a){this.manager=void 0!==a?a:pk;this.crossOrigin="anonymous";this.withCredentials=!1;this.resourcePath=this.path="";this.requestHeader={}}load(){}loadAsync(a,b){const d=this;return new Promise(function(l,q){d.load(a,l,b,q)})}parse(){}setCrossOrigin(a){this.crossOrigin=
a;return this}setWithCredentials(a){this.withCredentials=a;return this}setPath(a){this.path=a;return this}setResourcePath(a){this.resourcePath=a;return this}setRequestHeader(a){this.requestHeader=a;return this}}const Ed={};class Ml extends Error{constructor(a,b){super(a);this.response=b}}class Fd extends Tc{constructor(a){super(a)}load(a,b,d,l){void 0===a&&(a="");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);const q=ve.get(a);if(void 0!==q)return this.manager.itemStart(a),setTimeout(()=>
{b&&b(q);this.manager.itemEnd(a)},0),q;if(void 0!==Ed[a])Ed[a].push({onLoad:b,onProgress:d,onError:l});else{Ed[a]=[];Ed[a].push({onLoad:b,onProgress:d,onError:l});d=new Request(a,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});var y=this.mimeType,A=this.responseType;fetch(d).then(D=>{if(200===D.status||0===D.status){0===D.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");if("undefined"===typeof ReadableStream||void 0===D.body||void 0===
D.body.getReader)return D;const F=Ed[a],G=D.body.getReader(),M=(D=D.headers.get("Content-Length")||D.headers.get("X-File-Size"))?parseInt(D):0,N=0!==M;let P=0;D=new ReadableStream({start(T){function S(){G.read().then(({done:L,value:U})=>{if(L)T.close();else{P+=U.byteLength;L=new ProgressEvent("progress",{lengthComputable:N,loaded:P,total:M});for(let ma=0,ba=F.length;ma<ba;ma++){const na=F[ma];if(na.onProgress)na.onProgress(L)}T.enqueue(U);S()}})}S()}});return new Response(D)}throw new Ml(`fetch for "${D.url}" responded with ${D.status}: ${D.statusText}`,
D);}).then(D=>{switch(A){case "arraybuffer":return D.arrayBuffer();case "blob":return D.blob();case "document":return D.text().then(M=>(new DOMParser).parseFromString(M,y));case "json":return D.json();default:if(void 0===y)return D.text();var F=/charset="?([^;"\s]*)"?/i.exec(y);F=F&&F[1]?F[1].toLowerCase():void 0;const G=new TextDecoder(F);return D.arrayBuffer().then(M=>G.decode(M))}}).then(D=>{ve.add(a,D);const F=Ed[a];delete Ed[a];for(let G=0,M=F.length;G<M;G++){const N=F[G];if(N.onLoad)N.onLoad(D)}}).catch(D=>
{const F=Ed[a];if(void 0===F)throw this.manager.itemError(a),D;delete Ed[a];for(let G=0,M=F.length;G<M;G++){const N=F[G];if(N.onError)N.onError(D)}this.manager.itemError(a)}).finally(()=>{this.manager.itemEnd(a)});this.manager.itemStart(a)}}setResponseType(a){this.responseType=a;return this}setMimeType(a){this.mimeType=a;return this}}class Nl extends Tc{constructor(a){super(a)}load(a,b,d,l){const q=this,y=new Fd(this.manager);y.setPath(this.path);y.setRequestHeader(this.requestHeader);y.setWithCredentials(this.withCredentials);
y.load(a,function(A){try{b(q.parse(JSON.parse(A)))}catch(D){l?l(D):console.error(D),q.manager.itemError(a)}},d,l)}parse(a){const b=[];for(let d=0;d<a.length;d++){const l=dg.parse(a[d]);b.push(l)}return b}}class Ol extends Tc{constructor(a){super(a)}load(a,b,d,l){function q(M){F.load(a[M],function(N){N=y.parse(N,!0);A[M]={width:N.width,height:N.height,format:N.format,mipmaps:N.mipmaps};G+=1;6===G&&(1===N.mipmapCount&&(D.minFilter=1006),D.image=A,D.format=N.format,D.needsUpdate=!0,b&&b(D))},d,l)}const y=
this,A=[],D=new wi,F=new Fd(this.manager);F.setPath(this.path);F.setResponseType("arraybuffer");F.setRequestHeader(this.requestHeader);F.setWithCredentials(y.withCredentials);let G=0;if(Array.isArray(a))for(let M=0,N=a.length;M<N;++M)q(M);else F.load(a,function(M){M=y.parse(M,!0);if(M.isCubemap){const N=M.mipmaps.length/M.mipmapCount;for(let P=0;P<N;P++){A[P]={mipmaps:[]};for(let T=0;T<M.mipmapCount;T++)A[P].mipmaps.push(M.mipmaps[P*M.mipmapCount+T]),A[P].format=M.format,A[P].width=M.width,A[P].height=
M.height}D.image=A}else D.image.width=M.width,D.image.height=M.height,D.mipmaps=M.mipmaps;1===M.mipmapCount&&(D.minFilter=1006);D.format=M.format;D.needsUpdate=!0;b&&b(D)},d,l);return D}}class eg extends Tc{constructor(a){super(a)}load(a,b,d,l){function q(){A();ve.add(a,this);b&&b(this);D.manager.itemEnd(a)}function y(M){A();l&&l(M);D.manager.itemError(a);D.manager.itemEnd(a)}function A(){G.removeEventListener("load",q,!1);G.removeEventListener("error",y,!1)}void 0!==this.path&&(a=this.path+a);a=
this.manager.resolveURL(a);const D=this,F=ve.get(a);if(void 0!==F)return D.manager.itemStart(a),setTimeout(function(){b&&b(F);D.manager.itemEnd(a)},0),F;const G=w("img");G.addEventListener("load",q,!1);G.addEventListener("error",y,!1);"data:"!==a.slice(0,5)&&void 0!==this.crossOrigin&&(G.crossOrigin=this.crossOrigin);D.manager.itemStart(a);G.src=a;return G}}class Pl extends Tc{constructor(a){super(a)}load(a,b,d,l){function q(F){A.load(a[F],function(G){y.images[F]=G;D++;6===D&&(y.needsUpdate=!0,b&&
b(y))},void 0,l)}const y=new Tf,A=new eg(this.manager);A.setCrossOrigin(this.crossOrigin);A.setPath(this.path);let D=0;for(d=0;d<a.length;++d)q(d);return y}}class Ql extends Tc{constructor(a){super(a)}load(a,b,d,l){const q=this,y=new ef,A=new Fd(this.manager);A.setResponseType("arraybuffer");A.setRequestHeader(this.requestHeader);A.setPath(this.path);A.setWithCredentials(q.withCredentials);A.load(a,function(D){if(D=q.parse(D))void 0!==D.image?y.image=D.image:void 0!==D.data&&(y.image.width=D.width,
y.image.height=D.height,y.image.data=D.data),y.wrapS=void 0!==D.wrapS?D.wrapS:1001,y.wrapT=void 0!==D.wrapT?D.wrapT:1001,y.magFilter=void 0!==D.magFilter?D.magFilter:1006,y.minFilter=void 0!==D.minFilter?D.minFilter:1006,y.anisotropy=void 0!==D.anisotropy?D.anisotropy:1,void 0!==D.encoding&&(y.encoding=D.encoding),void 0!==D.flipY&&(y.flipY=D.flipY),void 0!==D.format&&(y.format=D.format),void 0!==D.type&&(y.type=D.type),void 0!==D.mipmaps&&(y.mipmaps=D.mipmaps,y.minFilter=1008),1===D.mipmapCount&&
(y.minFilter=1006),void 0!==D.generateMipmaps&&(y.generateMipmaps=D.generateMipmaps),y.needsUpdate=!0,b&&b(y,D)},d,l);return y}}class Rl extends Tc{constructor(a){super(a)}load(a,b,d,l){const q=new rc,y=new eg(this.manager);y.setCrossOrigin(this.crossOrigin);y.setPath(this.path);y.load(a,function(A){q.image=A;q.needsUpdate=!0;void 0!==b&&b(q)},d,l);return q}}class Yd extends bc{constructor(a,b=1){super();this.isLight=!0;this.type="Light";this.color=new gb(a);this.intensity=b}dispose(){}copy(a,b){super.copy(a,
b);this.color.copy(a.color);this.intensity=a.intensity;return this}toJSON(a){a=super.toJSON(a);a.object.color=this.color.getHex();a.object.intensity=this.intensity;void 0!==this.groundColor&&(a.object.groundColor=this.groundColor.getHex());void 0!==this.distance&&(a.object.distance=this.distance);void 0!==this.angle&&(a.object.angle=this.angle);void 0!==this.decay&&(a.object.decay=this.decay);void 0!==this.penumbra&&(a.object.penumbra=this.penumbra);void 0!==this.shadow&&(a.object.shadow=this.shadow.toJSON());
return a}}class qk extends Yd{constructor(a,b,d){super(a,d);this.isHemisphereLight=!0;this.type="HemisphereLight";this.position.copy(bc.DEFAULT_UP);this.updateMatrix();this.groundColor=new gb(b)}copy(a,b){super.copy(a,b);this.groundColor.copy(a.groundColor);return this}}const Ji=new Fb,rk=new aa,sk=new aa;class Ki{constructor(a){this.camera=a;this.normalBias=this.bias=0;this.radius=1;this.blurSamples=8;this.mapSize=new za(512,512);this.mapPass=this.map=null;this.matrix=new Fb;this.autoUpdate=!0;this.needsUpdate=
!1;this._frustum=new og;this._frameExtents=new za(1,1);this._viewportCount=1;this._viewports=[new cc(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(a){const b=this.camera,d=this.matrix;rk.setFromMatrixPosition(a.matrixWorld);b.position.copy(rk);sk.setFromMatrixPosition(a.target.matrixWorld);b.lookAt(sk);b.updateMatrixWorld();Ji.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);this._frustum.setFromProjectionMatrix(Ji);d.set(.5,0,0,
.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);d.multiply(Ji)}getViewport(a){return this._viewports[a]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose();this.mapPass&&this.mapPass.dispose()}copy(a){this.camera=a.camera.clone();this.bias=a.bias;this.radius=a.radius;this.mapSize.copy(a.mapSize);return this}clone(){return(new this.constructor).copy(this)}toJSON(){const a={};0!==this.bias&&(a.bias=this.bias);0!==this.normalBias&&(a.normalBias=this.normalBias);1!==this.radius&&(a.radius=
this.radius);if(512!==this.mapSize.x||512!==this.mapSize.y)a.mapSize=this.mapSize.toArray();a.camera=this.camera.toJSON(!1).object;delete a.camera.matrix;return a}}class Sl extends Ki{constructor(){super(new Dc(50,1,.5,500));this.isSpotLightShadow=!0;this.focus=1}updateMatrices(a){const b=this.camera,d=2*Fa*a.angle*this.focus,l=this.mapSize.width/this.mapSize.height,q=a.distance||b.far;if(d!==b.fov||l!==b.aspect||q!==b.far)b.fov=d,b.aspect=l,b.far=q,b.updateProjectionMatrix();super.updateMatrices(a)}copy(a){super.copy(a);
this.focus=a.focus;return this}}class tk extends Yd{constructor(a,b,d=0,l=Math.PI/3,q=0,y=2){super(a,b);this.isSpotLight=!0;this.type="SpotLight";this.position.copy(bc.DEFAULT_UP);this.updateMatrix();this.target=new bc;this.distance=d;this.angle=l;this.penumbra=q;this.decay=y;this.map=null;this.shadow=new Sl}get power(){return this.intensity*Math.PI}set power(a){this.intensity=a/Math.PI}dispose(){this.shadow.dispose()}copy(a,b){super.copy(a,b);this.distance=a.distance;this.angle=a.angle;this.penumbra=
a.penumbra;this.decay=a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return this}}const uk=new Fb,fg=new aa,Li=new aa;class Tl extends Ki{constructor(){super(new Dc(90,1,.5,500));this.isPointLightShadow=!0;this._frameExtents=new za(4,2);this._viewportCount=6;this._viewports=[new cc(2,1,1,1),new cc(0,1,1,1),new cc(3,1,1,1),new cc(1,1,1,1),new cc(3,0,1,1),new cc(1,0,1,1)];this._cubeDirections=[new aa(1,0,0),new aa(-1,0,0),new aa(0,0,1),new aa(0,0,-1),new aa(0,1,0),new aa(0,-1,0)];
this._cubeUps=[new aa(0,1,0),new aa(0,1,0),new aa(0,1,0),new aa(0,1,0),new aa(0,0,1),new aa(0,0,-1)]}updateMatrices(a,b=0){const d=this.camera,l=this.matrix,q=a.distance||d.far;q!==d.far&&(d.far=q,d.updateProjectionMatrix());fg.setFromMatrixPosition(a.matrixWorld);d.position.copy(fg);Li.copy(d.position);Li.add(this._cubeDirections[b]);d.up.copy(this._cubeUps[b]);d.lookAt(Li);d.updateMatrixWorld();l.makeTranslation(-fg.x,-fg.y,-fg.z);uk.multiplyMatrices(d.projectionMatrix,d.matrixWorldInverse);this._frustum.setFromProjectionMatrix(uk)}}
class vk extends Yd{constructor(a,b,d=0,l=2){super(a,b);this.isPointLight=!0;this.type="PointLight";this.distance=d;this.decay=l;this.shadow=new Tl}get power(){return 4*this.intensity*Math.PI}set power(a){this.intensity=a/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(a,b){super.copy(a,b);this.distance=a.distance;this.decay=a.decay;this.shadow=a.shadow.clone();return this}}class Ul extends Ki{constructor(){super(new Ug(-5,5,5,-5,.5,500));this.isDirectionalLightShadow=!0}}class wk extends Yd{constructor(a,
b){super(a,b);this.isDirectionalLight=!0;this.type="DirectionalLight";this.position.copy(bc.DEFAULT_UP);this.updateMatrix();this.target=new bc;this.shadow=new Ul}dispose(){this.shadow.dispose()}copy(a){super.copy(a);this.target=a.target.clone();this.shadow=a.shadow.clone();return this}}class xk extends Yd{constructor(a,b){super(a,b);this.isAmbientLight=!0;this.type="AmbientLight"}}class yk extends Yd{constructor(a,b,d=10,l=10){super(a,b);this.isRectAreaLight=!0;this.type="RectAreaLight";this.width=
d;this.height=l}get power(){return this.intensity*this.width*this.height*Math.PI}set power(a){this.intensity=a/(this.width*this.height*Math.PI)}copy(a){super.copy(a);this.width=a.width;this.height=a.height;return this}toJSON(a){a=super.toJSON(a);a.object.width=this.width;a.object.height=this.height;return a}}class zk{constructor(){this.isSphericalHarmonics3=!0;this.coefficients=[];for(let a=0;9>a;a++)this.coefficients.push(new aa)}set(a){for(let b=0;9>b;b++)this.coefficients[b].copy(a[b]);return this}zero(){for(let a=
0;9>a;a++)this.coefficients[a].set(0,0,0);return this}getAt(a,b){const d=a.x,l=a.y;a=a.z;const q=this.coefficients;b.copy(q[0]).multiplyScalar(.282095);b.addScaledVector(q[1],.488603*l);b.addScaledVector(q[2],.488603*a);b.addScaledVector(q[3],.488603*d);b.addScaledVector(q[4],1.092548*d*l);b.addScaledVector(q[5],1.092548*l*a);b.addScaledVector(q[6],.315392*(3*a*a-1));b.addScaledVector(q[7],1.092548*d*a);b.addScaledVector(q[8],.546274*(d*d-l*l));return b}getIrradianceAt(a,b){const d=a.x,l=a.y;a=a.z;
const q=this.coefficients;b.copy(q[0]).multiplyScalar(.886227);b.addScaledVector(q[1],1.023328*l);b.addScaledVector(q[2],1.023328*a);b.addScaledVector(q[3],1.023328*d);b.addScaledVector(q[4],.858086*d*l);b.addScaledVector(q[5],.858086*l*a);b.addScaledVector(q[6],.743125*a*a-.247708);b.addScaledVector(q[7],.858086*d*a);b.addScaledVector(q[8],.429043*(d*d-l*l));return b}add(a){for(let b=0;9>b;b++)this.coefficients[b].add(a.coefficients[b]);return this}addScaledSH(a,b){for(let d=0;9>d;d++)this.coefficients[d].addScaledVector(a.coefficients[d],
b);return this}scale(a){for(let b=0;9>b;b++)this.coefficients[b].multiplyScalar(a);return this}lerp(a,b){for(let d=0;9>d;d++)this.coefficients[d].lerp(a.coefficients[d],b);return this}equals(a){for(let b=0;9>b;b++)if(!this.coefficients[b].equals(a.coefficients[b]))return!1;return!0}copy(a){return this.set(a.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(a,b=0){const d=this.coefficients;for(let l=0;9>l;l++)d[l].fromArray(a,b+3*l);return this}toArray(a=[],b=0){const d=this.coefficients;
for(let l=0;9>l;l++)d[l].toArray(a,b+3*l);return a}static getBasisAt(a,b){const d=a.x,l=a.y;a=a.z;b[0]=.282095;b[1]=.488603*l;b[2]=.488603*a;b[3]=.488603*d;b[4]=1.092548*d*l;b[5]=1.092548*l*a;b[6]=.315392*(3*a*a-1);b[7]=1.092548*d*a;b[8]=.546274*(d*d-l*l)}}class sh extends Yd{constructor(a=new zk,b=1){super(void 0,b);this.isLightProbe=!0;this.sh=a}copy(a){super.copy(a);this.sh.copy(a.sh);return this}fromJSON(a){this.intensity=a.intensity;this.sh.fromArray(a.sh);return this}toJSON(a){a=super.toJSON(a);
a.object.sh=this.sh.toArray();return a}}class Mi extends Tc{constructor(a){super(a);this.textures={}}load(a,b,d,l){const q=this,y=new Fd(q.manager);y.setPath(q.path);y.setRequestHeader(q.requestHeader);y.setWithCredentials(q.withCredentials);y.load(a,function(A){try{b(q.parse(JSON.parse(A)))}catch(D){l?l(D):console.error(D),q.manager.itemError(a)}},d,l)}parse(a){function b(y){void 0===d[y]&&console.warn("THREE.MaterialLoader: Undefined texture",y);return d[y]}const d=this.textures,l=Mi.createMaterialFromType(a.type);
void 0!==a.uuid&&(l.uuid=a.uuid);void 0!==a.name&&(l.name=a.name);void 0!==a.color&&void 0!==l.color&&l.color.setHex(a.color);void 0!==a.roughness&&(l.roughness=a.roughness);void 0!==a.metalness&&(l.metalness=a.metalness);void 0!==a.sheen&&(l.sheen=a.sheen);void 0!==a.sheenColor&&(l.sheenColor=(new gb).setHex(a.sheenColor));void 0!==a.sheenRoughness&&(l.sheenRoughness=a.sheenRoughness);void 0!==a.emissive&&void 0!==l.emissive&&l.emissive.setHex(a.emissive);void 0!==a.specular&&void 0!==l.specular&&
l.specular.setHex(a.specular);void 0!==a.specularIntensity&&(l.specularIntensity=a.specularIntensity);void 0!==a.specularColor&&void 0!==l.specularColor&&l.specularColor.setHex(a.specularColor);void 0!==a.shininess&&(l.shininess=a.shininess);void 0!==a.clearcoat&&(l.clearcoat=a.clearcoat);void 0!==a.clearcoatRoughness&&(l.clearcoatRoughness=a.clearcoatRoughness);void 0!==a.iridescence&&(l.iridescence=a.iridescence);void 0!==a.iridescenceIOR&&(l.iridescenceIOR=a.iridescenceIOR);void 0!==a.iridescenceThicknessRange&&
(l.iridescenceThicknessRange=a.iridescenceThicknessRange);void 0!==a.transmission&&(l.transmission=a.transmission);void 0!==a.thickness&&(l.thickness=a.thickness);void 0!==a.attenuationDistance&&(l.attenuationDistance=a.attenuationDistance);void 0!==a.attenuationColor&&void 0!==l.attenuationColor&&l.attenuationColor.setHex(a.attenuationColor);void 0!==a.fog&&(l.fog=a.fog);void 0!==a.flatShading&&(l.flatShading=a.flatShading);void 0!==a.blending&&(l.blending=a.blending);void 0!==a.combine&&(l.combine=
a.combine);void 0!==a.side&&(l.side=a.side);void 0!==a.shadowSide&&(l.shadowSide=a.shadowSide);void 0!==a.opacity&&(l.opacity=a.opacity);void 0!==a.transparent&&(l.transparent=a.transparent);void 0!==a.alphaTest&&(l.alphaTest=a.alphaTest);void 0!==a.depthTest&&(l.depthTest=a.depthTest);void 0!==a.depthWrite&&(l.depthWrite=a.depthWrite);void 0!==a.colorWrite&&(l.colorWrite=a.colorWrite);void 0!==a.stencilWrite&&(l.stencilWrite=a.stencilWrite);void 0!==a.stencilWriteMask&&(l.stencilWriteMask=a.stencilWriteMask);
void 0!==a.stencilFunc&&(l.stencilFunc=a.stencilFunc);void 0!==a.stencilRef&&(l.stencilRef=a.stencilRef);void 0!==a.stencilFuncMask&&(l.stencilFuncMask=a.stencilFuncMask);void 0!==a.stencilFail&&(l.stencilFail=a.stencilFail);void 0!==a.stencilZFail&&(l.stencilZFail=a.stencilZFail);void 0!==a.stencilZPass&&(l.stencilZPass=a.stencilZPass);void 0!==a.wireframe&&(l.wireframe=a.wireframe);void 0!==a.wireframeLinewidth&&(l.wireframeLinewidth=a.wireframeLinewidth);void 0!==a.wireframeLinecap&&(l.wireframeLinecap=
a.wireframeLinecap);void 0!==a.wireframeLinejoin&&(l.wireframeLinejoin=a.wireframeLinejoin);void 0!==a.rotation&&(l.rotation=a.rotation);1!==a.linewidth&&(l.linewidth=a.linewidth);void 0!==a.dashSize&&(l.dashSize=a.dashSize);void 0!==a.gapSize&&(l.gapSize=a.gapSize);void 0!==a.scale&&(l.scale=a.scale);void 0!==a.polygonOffset&&(l.polygonOffset=a.polygonOffset);void 0!==a.polygonOffsetFactor&&(l.polygonOffsetFactor=a.polygonOffsetFactor);void 0!==a.polygonOffsetUnits&&(l.polygonOffsetUnits=a.polygonOffsetUnits);
void 0!==a.dithering&&(l.dithering=a.dithering);void 0!==a.alphaToCoverage&&(l.alphaToCoverage=a.alphaToCoverage);void 0!==a.premultipliedAlpha&&(l.premultipliedAlpha=a.premultipliedAlpha);void 0!==a.forceSinglePass&&(l.forceSinglePass=a.forceSinglePass);void 0!==a.visible&&(l.visible=a.visible);void 0!==a.toneMapped&&(l.toneMapped=a.toneMapped);void 0!==a.userData&&(l.userData=a.userData);void 0!==a.vertexColors&&(l.vertexColors="number"===typeof a.vertexColors?0<a.vertexColors?!0:!1:a.vertexColors);
if(void 0!==a.uniforms)for(var q in a.uniforms){const y=a.uniforms[q];l.uniforms[q]={};switch(y.type){case "t":l.uniforms[q].value=b(y.value);break;case "c":l.uniforms[q].value=(new gb).setHex(y.value);break;case "v2":l.uniforms[q].value=(new za).fromArray(y.value);break;case "v3":l.uniforms[q].value=(new aa).fromArray(y.value);break;case "v4":l.uniforms[q].value=(new cc).fromArray(y.value);break;case "m3":l.uniforms[q].value=(new hb).fromArray(y.value);break;case "m4":l.uniforms[q].value=(new Fb).fromArray(y.value);
break;default:l.uniforms[q].value=y.value}}void 0!==a.defines&&(l.defines=a.defines);void 0!==a.vertexShader&&(l.vertexShader=a.vertexShader);void 0!==a.fragmentShader&&(l.fragmentShader=a.fragmentShader);void 0!==a.glslVersion&&(l.glslVersion=a.glslVersion);if(void 0!==a.extensions)for(const y in a.extensions)l.extensions[y]=a.extensions[y];void 0!==a.size&&(l.size=a.size);void 0!==a.sizeAttenuation&&(l.sizeAttenuation=a.sizeAttenuation);void 0!==a.map&&(l.map=b(a.map));void 0!==a.matcap&&(l.matcap=
b(a.matcap));void 0!==a.alphaMap&&(l.alphaMap=b(a.alphaMap));void 0!==a.bumpMap&&(l.bumpMap=b(a.bumpMap));void 0!==a.bumpScale&&(l.bumpScale=a.bumpScale);void 0!==a.normalMap&&(l.normalMap=b(a.normalMap));void 0!==a.normalMapType&&(l.normalMapType=a.normalMapType);void 0!==a.normalScale&&(q=a.normalScale,!1===Array.isArray(q)&&(q=[q,q]),l.normalScale=(new za).fromArray(q));void 0!==a.displacementMap&&(l.displacementMap=b(a.displacementMap));void 0!==a.displacementScale&&(l.displacementScale=a.displacementScale);
void 0!==a.displacementBias&&(l.displacementBias=a.displacementBias);void 0!==a.roughnessMap&&(l.roughnessMap=b(a.roughnessMap));void 0!==a.metalnessMap&&(l.metalnessMap=b(a.metalnessMap));void 0!==a.emissiveMap&&(l.emissiveMap=b(a.emissiveMap));void 0!==a.emissiveIntensity&&(l.emissiveIntensity=a.emissiveIntensity);void 0!==a.specularMap&&(l.specularMap=b(a.specularMap));void 0!==a.specularIntensityMap&&(l.specularIntensityMap=b(a.specularIntensityMap));void 0!==a.specularColorMap&&(l.specularColorMap=
b(a.specularColorMap));void 0!==a.envMap&&(l.envMap=b(a.envMap));void 0!==a.envMapIntensity&&(l.envMapIntensity=a.envMapIntensity);void 0!==a.reflectivity&&(l.reflectivity=a.reflectivity);void 0!==a.refractionRatio&&(l.refractionRatio=a.refractionRatio);void 0!==a.lightMap&&(l.lightMap=b(a.lightMap));void 0!==a.lightMapIntensity&&(l.lightMapIntensity=a.lightMapIntensity);void 0!==a.aoMap&&(l.aoMap=b(a.aoMap));void 0!==a.aoMapIntensity&&(l.aoMapIntensity=a.aoMapIntensity);void 0!==a.gradientMap&&(l.gradientMap=
b(a.gradientMap));void 0!==a.clearcoatMap&&(l.clearcoatMap=b(a.clearcoatMap));void 0!==a.clearcoatRoughnessMap&&(l.clearcoatRoughnessMap=b(a.clearcoatRoughnessMap));void 0!==a.clearcoatNormalMap&&(l.clearcoatNormalMap=b(a.clearcoatNormalMap));void 0!==a.clearcoatNormalScale&&(l.clearcoatNormalScale=(new za).fromArray(a.clearcoatNormalScale));void 0!==a.iridescenceMap&&(l.iridescenceMap=b(a.iridescenceMap));void 0!==a.iridescenceThicknessMap&&(l.iridescenceThicknessMap=b(a.iridescenceThicknessMap));
void 0!==a.transmissionMap&&(l.transmissionMap=b(a.transmissionMap));void 0!==a.thicknessMap&&(l.thicknessMap=b(a.thicknessMap));void 0!==a.sheenColorMap&&(l.sheenColorMap=b(a.sheenColorMap));void 0!==a.sheenRoughnessMap&&(l.sheenRoughnessMap=b(a.sheenRoughnessMap));return l}setTextures(a){this.textures=a;return this}static createMaterialFromType(a){return new {ShadowMaterial:dk,SpriteMaterial:qi,RawShaderMaterial:ek,ShaderMaterial:fd,PointsMaterial:vi,MeshPhysicalMaterial:fk,MeshStandardMaterial:Gi,
MeshPhongMaterial:gk,MeshToonMaterial:hk,MeshNormalMaterial:ik,MeshLambertMaterial:jk,MeshDepthMaterial:Gh,MeshDistanceMaterial:Hh,MeshBasicMaterial:Vd,MeshMatcapMaterial:kk,LineDashedMaterial:lk,LineBasicMaterial:Kc,Material:Fc}[a]}}class Ni{static decodeText(a){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(a);let b="";for(let d=0,l=a.length;d<l;d++)b+=String.fromCharCode(a[d]);try{return decodeURIComponent(escape(b))}catch(d){return b}}static extractUrlBase(a){const b=a.lastIndexOf("/");
return-1===b?"./":a.slice(0,b+1)}static resolveURL(a,b){if("string"!==typeof a||""===a)return"";/^https?:\/\//i.test(b)&&/^\//.test(a)&&(b=b.replace(/(^https?:\/\/[^\/]+).*/i,"$1"));return/^(https?:)?\/\//i.test(a)||/^data:.*,.*$/i.test(a)||/^blob:.*$/i.test(a)?a:b+a}}class Ak extends Kb{constructor(){super();this.isInstancedBufferGeometry=!0;this.type="InstancedBufferGeometry";this.instanceCount=Infinity}copy(a){super.copy(a);this.instanceCount=a.instanceCount;return this}toJSON(){const a=super.toJSON();
a.instanceCount=this.instanceCount;a.isInstancedBufferGeometry=!0;return a}}class Bk extends Tc{constructor(a){super(a)}load(a,b,d,l){const q=this,y=new Fd(q.manager);y.setPath(q.path);y.setRequestHeader(q.requestHeader);y.setWithCredentials(q.withCredentials);y.load(a,function(A){try{b(q.parse(JSON.parse(A)))}catch(D){l?l(D):console.error(D),q.manager.itemError(a)}},d,l)}parse(a){function b(N,P){if(void 0!==d[P])return d[P];const T=N.interleavedBuffers[P];var S=T.buffer;void 0!==l[S]?S=l[S]:(N=(new Uint32Array(N.arrayBuffers[S])).buffer,
S=l[S]=N);S=new xb[T.type](S);S=new Vg(S,T.stride);S.uuid=T.uuid;return d[P]=S}const d={},l={},q=a.isInstancedBufferGeometry?new Ak:new Kb;var y=a.data.index;void 0!==y&&(y=new xb[y.type](y.array),q.setIndex(new fc(y,1)));y=a.data.attributes;for(var A in y){var D=y[A],F=void 0;D.isInterleavedBufferAttribute?(F=b(a.data,D.data),F=new af(F,D.itemSize,D.offset,D.normalized)):(F=new xb[D.type](D.array),F=new (D.isInstancedBufferAttribute?ff:fc)(F,D.itemSize,D.normalized));void 0!==D.name&&(F.name=D.name);
void 0!==D.usage&&F.setUsage(D.usage);void 0!==D.updateRange&&(F.updateRange.offset=D.updateRange.offset,F.updateRange.count=D.updateRange.count);q.setAttribute(A,F)}if(A=a.data.morphAttributes)for(var G in A){y=A[G];D=[];for(let N=0,P=y.length;N<P;N++){F=y[N];var M=void 0;F.isInterleavedBufferAttribute?(M=b(a.data,F.data),M=new af(M,F.itemSize,F.offset,F.normalized)):(M=new xb[F.type](F.array),M=new fc(M,F.itemSize,F.normalized));void 0!==F.name&&(M.name=F.name);D.push(M)}q.morphAttributes[G]=D}a.data.morphTargetsRelative&&
(q.morphTargetsRelative=!0);G=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==G)for(let N=0,P=G.length;N!==P;++N)A=G[N],q.addGroup(A.start,A.count,A.materialIndex);G=a.data.boundingSphere;void 0!==G&&(A=new aa,void 0!==G.center&&A.fromArray(G.center),q.boundingSphere=new se(A,G.radius));a.name&&(q.name=a.name);a.userData&&(q.userData=a.userData);return q}}class Vl extends Tc{constructor(a){super(a)}load(a,b,d,l){const q=this;var y=""===this.path?Ni.extractUrlBase(a):this.path;this.resourcePath=
this.resourcePath||y;y=new Fd(this.manager);y.setPath(this.path);y.setRequestHeader(this.requestHeader);y.setWithCredentials(this.withCredentials);y.load(a,function(A){let D=null;try{D=JSON.parse(A)}catch(F){void 0!==l&&l(F);console.error("THREE:ObjectLoader: Can't parse "+a+".",F.message);return}A=D.metadata;void 0===A||void 0===A.type||"geometry"===A.type.toLowerCase()?(void 0!==l&&l(Error("THREE.ObjectLoader: Can't load "+a)),console.error("THREE.ObjectLoader: Can't load "+a)):q.parse(D,b)},d,
l)}async loadAsync(a,b){var d=""===this.path?Ni.extractUrlBase(a):this.path;this.resourcePath=this.resourcePath||d;d=new Fd(this.manager);d.setPath(this.path);d.setRequestHeader(this.requestHeader);d.setWithCredentials(this.withCredentials);b=await d.loadAsync(a,b);b=JSON.parse(b);d=b.metadata;if(void 0===d||void 0===d.type||"geometry"===d.type.toLowerCase())throw Error("THREE.ObjectLoader: Can't load "+a);return await this.parseAsync(b)}parse(a,b){const d=this.parseAnimations(a.animations);var l=
this.parseShapes(a.shapes);const q=this.parseGeometries(a.geometries,l);l=this.parseImages(a.images,function(){void 0!==b&&b(D)});const y=this.parseTextures(a.textures,l),A=this.parseMaterials(a.materials,y),D=this.parseObject(a.object,q,A,y,d);a=this.parseSkeletons(a.skeletons,D);this.bindSkeletons(D,a);if(void 0!==b){a=!1;for(const F in l)if(l[F].data instanceof HTMLImageElement){a=!0;break}!1===a&&b(D)}return D}async parseAsync(a){var b=this.parseAnimations(a.animations),d=this.parseShapes(a.shapes);
d=this.parseGeometries(a.geometries,d);var l=await this.parseImagesAsync(a.images);l=this.parseTextures(a.textures,l);const q=this.parseMaterials(a.materials,l);b=this.parseObject(a.object,d,q,l,b);a=this.parseSkeletons(a.skeletons,b);this.bindSkeletons(b,a);return b}parseShapes(a){const b={};if(void 0!==a)for(let d=0,l=a.length;d<l;d++){const q=(new ue).fromJSON(a[d]);b[q.uuid]=q}return b}parseSkeletons(a,b){const d={},l={};b.traverse(function(q){q.isBone&&(l[q.uuid]=q)});if(void 0!==a)for(let q=
0,y=a.length;q<y;q++)b=(new ti).fromJSON(a[q],l),d[b.uuid]=b;return d}parseGeometries(a,b){const d={};if(void 0!==a){const l=new Bk;for(let q=0,y=a.length;q<y;q++){let A;const D=a[q];switch(D.type){case "BufferGeometry":case "InstancedBufferGeometry":A=l.parse(D);break;default:D.type in ck?A=ck[D.type].fromJSON(D,b):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${D.type}"`)}A.uuid=D.uuid;void 0!==D.name&&(A.name=D.name);void 0!==D.userData&&(A.userData=D.userData);d[D.uuid]=A}}return d}parseMaterials(a,
b){const d={},l={};if(void 0!==a){const q=new Mi;q.setTextures(b);for(let y=0,A=a.length;y<A;y++)b=a[y],void 0===d[b.uuid]&&(d[b.uuid]=q.parse(b)),l[b.uuid]=d[b.uuid]}return l}parseAnimations(a){const b={};if(void 0!==a)for(let d=0;d<a.length;d++){const l=dg.parse(a[d]);b[l.uuid]=l}return b}parseImages(a,b){function d(F){q.manager.itemStart(F);return A.load(F,function(){q.manager.itemEnd(F)},void 0,function(){q.manager.itemError(F);q.manager.itemEnd(F)})}function l(F){return"string"===typeof F?(F=
/^(\/\/)|([a-z]+:(\/\/)?)/i.test(F)?F:q.resourcePath+F,d(F)):F.data?{data:new xb[F.type](F.data),width:F.width,height:F.height}:null}const q=this,y={};let A;if(void 0!==a&&0<a.length){b=new Ii(b);A=new eg(b);A.setCrossOrigin(this.crossOrigin);for(let F=0,G=a.length;F<G;F++){b=a[F];var D=b.url;if(Array.isArray(D)){const M=[];for(let N=0,P=D.length;N<P;N++){const T=l(D[N]);null!==T&&(T instanceof HTMLImageElement?M.push(T):M.push(new ef(T.data,T.width,T.height)))}y[b.uuid]=new oe(M)}else D=l(b.url),
y[b.uuid]=new oe(D)}}return y}async parseImagesAsync(a){async function b(A){return"string"===typeof A?(A=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(A)?A:d.resourcePath+A,await q.loadAsync(A)):A.data?{data:new xb[A.type](A.data),width:A.width,height:A.height}:null}const d=this,l={};let q;if(void 0!==a&&0<a.length){q=new eg(this.manager);q.setCrossOrigin(this.crossOrigin);for(let A=0,D=a.length;A<D;A++){const F=a[A];var y=F.url;if(Array.isArray(y)){const G=[];for(let M=0,N=y.length;M<N;M++){const P=await b(y[M]);
null!==P&&(P instanceof HTMLImageElement?G.push(P):G.push(new ef(P.data,P.width,P.height)))}l[F.uuid]=new oe(G)}else y=await b(F.url),l[F.uuid]=new oe(y)}}return l}parseTextures(a,b){function d(q,y){if("number"===typeof q)return q;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",q);return y[q]}const l={};if(void 0!==a)for(let q=0,y=a.length;q<y;q++){const A=a[q];void 0===A.image&&console.warn('THREE.ObjectLoader: No "image" specified for',A.uuid);void 0===b[A.image]&&
console.warn("THREE.ObjectLoader: Undefined image",A.image);const D=b[A.image],F=D.data;let G;Array.isArray(F)?(G=new Tf,6===F.length&&(G.needsUpdate=!0)):(G=F&&F.data?new ef:new rc,F&&(G.needsUpdate=!0));G.source=D;G.uuid=A.uuid;void 0!==A.name&&(G.name=A.name);void 0!==A.mapping&&(G.mapping=d(A.mapping,Wl));void 0!==A.offset&&G.offset.fromArray(A.offset);void 0!==A.repeat&&G.repeat.fromArray(A.repeat);void 0!==A.center&&G.center.fromArray(A.center);void 0!==A.rotation&&(G.rotation=A.rotation);void 0!==
A.wrap&&(G.wrapS=d(A.wrap[0],Ck),G.wrapT=d(A.wrap[1],Ck));void 0!==A.format&&(G.format=A.format);void 0!==A.internalFormat&&(G.internalFormat=A.internalFormat);void 0!==A.type&&(G.type=A.type);void 0!==A.encoding&&(G.encoding=A.encoding);void 0!==A.minFilter&&(G.minFilter=d(A.minFilter,Dk));void 0!==A.magFilter&&(G.magFilter=d(A.magFilter,Dk));void 0!==A.anisotropy&&(G.anisotropy=A.anisotropy);void 0!==A.flipY&&(G.flipY=A.flipY);void 0!==A.generateMipmaps&&(G.generateMipmaps=A.generateMipmaps);void 0!==
A.premultiplyAlpha&&(G.premultiplyAlpha=A.premultiplyAlpha);void 0!==A.unpackAlignment&&(G.unpackAlignment=A.unpackAlignment);void 0!==A.userData&&(G.userData=A.userData);l[A.uuid]=G}return l}parseObject(a,b,d,l,q){function y(P){void 0===b[P]&&console.warn("THREE.ObjectLoader: Undefined geometry",P);return b[P]}function A(P){if(void 0!==P){if(Array.isArray(P)){const T=[];for(let S=0,L=P.length;S<L;S++){const U=P[S];void 0===d[U]&&console.warn("THREE.ObjectLoader: Undefined material",U);T.push(d[U])}return T}void 0===
d[P]&&console.warn("THREE.ObjectLoader: Undefined material",P);return d[P]}}function D(P){void 0===l[P]&&console.warn("THREE.ObjectLoader: Undefined texture",P);return l[P]}let F;switch(a.type){case "Scene":var G=new yj;void 0!==a.background&&(Number.isInteger(a.background)?G.background=new gb(a.background):G.background=D(a.background));void 0!==a.environment&&(G.environment=D(a.environment));void 0!==a.fog&&("Fog"===a.fog.type?G.fog=new pi(a.fog.color,a.fog.near,a.fog.far):"FogExp2"===a.fog.type&&
(G.fog=new oi(a.fog.color,a.fog.density)));void 0!==a.backgroundBlurriness&&(G.backgroundBlurriness=a.backgroundBlurriness);void 0!==a.backgroundIntensity&&(G.backgroundIntensity=a.backgroundIntensity);break;case "PerspectiveCamera":G=new Dc(a.fov,a.aspect,a.near,a.far);void 0!==a.focus&&(G.focus=a.focus);void 0!==a.zoom&&(G.zoom=a.zoom);void 0!==a.filmGauge&&(G.filmGauge=a.filmGauge);void 0!==a.filmOffset&&(G.filmOffset=a.filmOffset);void 0!==a.view&&(G.view=Object.assign({},a.view));break;case "OrthographicCamera":G=
new Ug(a.left,a.right,a.top,a.bottom,a.near,a.far);void 0!==a.zoom&&(G.zoom=a.zoom);void 0!==a.view&&(G.view=Object.assign({},a.view));break;case "AmbientLight":G=new xk(a.color,a.intensity);break;case "DirectionalLight":G=new wk(a.color,a.intensity);break;case "PointLight":G=new vk(a.color,a.intensity,a.distance,a.decay);break;case "RectAreaLight":G=new yk(a.color,a.intensity,a.width,a.height);break;case "SpotLight":G=new tk(a.color,a.intensity,a.distance,a.angle,a.penumbra,a.decay);break;case "HemisphereLight":G=
new qk(a.color,a.groundColor,a.intensity);break;case "LightProbe":G=(new sh).fromJSON(a);break;case "SkinnedMesh":G=y(a.geometry);F=A(a.material);G=new Ij(G,F);void 0!==a.bindMode&&(G.bindMode=a.bindMode);void 0!==a.bindMatrix&&G.bindMatrix.fromArray(a.bindMatrix);void 0!==a.skeleton&&(G.skeleton=a.skeleton);break;case "Mesh":G=y(a.geometry);F=A(a.material);G=new xc(G,F);break;case "InstancedMesh":G=y(a.geometry);F=A(a.material);var M=a.instanceMatrix,N=a.instanceColor;G=new Mj(G,F,a.count);G.instanceMatrix=
new ff(new Float32Array(M.array),16);void 0!==N&&(G.instanceColor=new ff(new Float32Array(N.array),N.itemSize));break;case "LOD":G=new Dj;break;case "Line":G=new Wd(y(a.geometry),A(a.material));break;case "LineLoop":G=new Sj(y(a.geometry),A(a.material));break;case "LineSegments":G=new od(y(a.geometry),A(a.material));break;case "PointCloud":case "Points":G=new Uj(y(a.geometry),A(a.material));break;case "Sprite":G=new Bj(A(a.material));break;case "Group":G=new $e;break;case "Bone":G=new si;break;default:G=
new bc}G.uuid=a.uuid;void 0!==a.name&&(G.name=a.name);void 0!==a.matrix?(G.matrix.fromArray(a.matrix),void 0!==a.matrixAutoUpdate&&(G.matrixAutoUpdate=a.matrixAutoUpdate),G.matrixAutoUpdate&&G.matrix.decompose(G.position,G.quaternion,G.scale)):(void 0!==a.position&&G.position.fromArray(a.position),void 0!==a.rotation&&G.rotation.fromArray(a.rotation),void 0!==a.quaternion&&G.quaternion.fromArray(a.quaternion),void 0!==a.scale&&G.scale.fromArray(a.scale));void 0!==a.castShadow&&(G.castShadow=a.castShadow);
void 0!==a.receiveShadow&&(G.receiveShadow=a.receiveShadow);a.shadow&&(void 0!==a.shadow.bias&&(G.shadow.bias=a.shadow.bias),void 0!==a.shadow.normalBias&&(G.shadow.normalBias=a.shadow.normalBias),void 0!==a.shadow.radius&&(G.shadow.radius=a.shadow.radius),void 0!==a.shadow.mapSize&&G.shadow.mapSize.fromArray(a.shadow.mapSize),void 0!==a.shadow.camera&&(G.shadow.camera=this.parseObject(a.shadow.camera)));void 0!==a.visible&&(G.visible=a.visible);void 0!==a.frustumCulled&&(G.frustumCulled=a.frustumCulled);
void 0!==a.renderOrder&&(G.renderOrder=a.renderOrder);void 0!==a.userData&&(G.userData=a.userData);void 0!==a.layers&&(G.layers.mask=a.layers);if(void 0!==a.children)for(M=a.children,N=0;N<M.length;N++)G.add(this.parseObject(M[N],b,d,l,q));if(void 0!==a.animations)for(M=a.animations,N=0;N<M.length;N++)G.animations.push(q[M[N]]);if("LOD"===a.type)for(void 0!==a.autoUpdate&&(G.autoUpdate=a.autoUpdate),a=a.levels,q=0;q<a.length;q++)M=a[q],N=G.getObjectByProperty("uuid",M.object),void 0!==N&&G.addLevel(N,
M.distance,M.hysteresis);return G}bindSkeletons(a,b){0!==Object.keys(b).length&&a.traverse(function(d){if(!0===d.isSkinnedMesh&&void 0!==d.skeleton){const l=b[d.skeleton];void 0===l?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",d.skeleton):d.bind(l,d.bindMatrix)}})}}const Wl={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,CubeUVReflectionMapping:306},Ck={RepeatWrapping:1E3,ClampToEdgeWrapping:1001,
MirroredRepeatWrapping:1002},Dk={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};class Xl extends Tc{constructor(a){super(a);this.isImageBitmapLoader=!0;"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported.");this.options={premultiplyAlpha:"none"}}setOptions(a){this.options=
a;return this}load(a,b,d,l){void 0===a&&(a="");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);const q=this,y=ve.get(a);if(void 0!==y)return q.manager.itemStart(a),setTimeout(function(){b&&b(y);q.manager.itemEnd(a)},0),y;d={};d.credentials="anonymous"===this.crossOrigin?"same-origin":"include";d.headers=this.requestHeader;fetch(a,d).then(function(A){return A.blob()}).then(function(A){return createImageBitmap(A,Object.assign(q.options,{colorSpaceConversion:"none"}))}).then(function(A){ve.add(a,
A);b&&b(A);q.manager.itemEnd(a)}).catch(function(A){l&&l(A);q.manager.itemError(a);q.manager.itemEnd(a)});q.manager.itemStart(a)}}let th;class Oi{static getContext(){void 0===th&&(th=new (window.AudioContext||window.webkitAudioContext));return th}static setContext(a){th=a}}class Yl extends Tc{constructor(a){super(a)}load(a,b,d,l){const q=this,y=new Fd(this.manager);y.setResponseType("arraybuffer");y.setPath(this.path);y.setRequestHeader(this.requestHeader);y.setWithCredentials(this.withCredentials);
y.load(a,function(A){try{const D=A.slice(0);Oi.getContext().decodeAudioData(D,function(F){b(F)})}catch(D){l?l(D):console.error(D),q.manager.itemError(a)}},d,l)}}class Zl extends sh{constructor(a,b,d=1){super(void 0,d);this.isHemisphereLightProbe=!0;a=(new gb).set(a);d=(new gb).set(b);b=new aa(a.r,a.g,a.b);a=new aa(d.r,d.g,d.b);d=Math.sqrt(Math.PI);const l=d*Math.sqrt(.75);this.sh.coefficients[0].copy(b).add(a).multiplyScalar(d);this.sh.coefficients[1].copy(b).sub(a).multiplyScalar(l)}}class $l extends sh{constructor(a,
b=1){super(void 0,b);this.isAmbientLightProbe=!0;a=(new gb).set(a);this.sh.coefficients[0].set(a.r,a.g,a.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const Ek=new Fb,Fk=new Fb,we=new Fb;class am{constructor(){this.type="StereoCamera";this.aspect=1;this.eyeSep=.064;this.cameraL=new Dc;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new Dc;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1;this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,
eyeSep:null}}update(a){const b=this._cache;if(b.focus!==a.focus||b.fov!==a.fov||b.aspect!==a.aspect*this.aspect||b.near!==a.near||b.far!==a.far||b.zoom!==a.zoom||b.eyeSep!==this.eyeSep){b.focus=a.focus;b.fov=a.fov;b.aspect=a.aspect*this.aspect;b.near=a.near;b.far=a.far;b.zoom=a.zoom;b.eyeSep=this.eyeSep;we.copy(a.projectionMatrix);var d=b.eyeSep/2;const l=d*b.near/b.focus,q=b.near*Math.tan(qa*b.fov*.5)/b.zoom;let y;Fk.elements[12]=-d;Ek.elements[12]=d;d=-q*b.aspect+l;y=q*b.aspect+l;we.elements[0]=
2*b.near/(y-d);we.elements[8]=(y+d)/(y-d);this.cameraL.projectionMatrix.copy(we);d=-q*b.aspect-l;y=q*b.aspect-l;we.elements[0]=2*b.near/(y-d);we.elements[8]=(y+d)/(y-d);this.cameraR.projectionMatrix.copy(we)}this.cameraL.matrixWorld.copy(a.matrixWorld).multiply(Fk);this.cameraR.matrixWorld.copy(a.matrixWorld).multiply(Ek)}}class Gk{constructor(a=!0){this.autoStart=a;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1}start(){this.oldTime=this.startTime=Dg();this.elapsedTime=0;this.running=
!0}stop(){this.getElapsedTime();this.autoStart=this.running=!1}getElapsedTime(){this.getDelta();return this.elapsedTime}getDelta(){let a=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const b=Dg();a=(b-this.oldTime)/1E3;this.oldTime=b;this.elapsedTime+=a}return a}}const xe=new aa,Hk=new lb,bm=new aa,ye=new aa;class cm extends bc{constructor(){super();this.type="AudioListener";this.context=Oi.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);
this.filter=null;this.timeDelta=0;this._clock=new Gk}getInput(){return this.gain}removeFilter(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null);return this}getFilter(){return this.filter}setFilter(a){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination);this.filter=a;this.gain.connect(this.filter);
this.filter.connect(this.context.destination);return this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(a){this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01);return this}updateMatrixWorld(a){super.updateMatrixWorld(a);a=this.context.listener;const b=this.up;this.timeDelta=this._clock.getDelta();this.matrixWorld.decompose(xe,Hk,bm);ye.set(0,0,-1).applyQuaternion(Hk);if(a.positionX){const d=this.context.currentTime+this.timeDelta;a.positionX.linearRampToValueAtTime(xe.x,
d);a.positionY.linearRampToValueAtTime(xe.y,d);a.positionZ.linearRampToValueAtTime(xe.z,d);a.forwardX.linearRampToValueAtTime(ye.x,d);a.forwardY.linearRampToValueAtTime(ye.y,d);a.forwardZ.linearRampToValueAtTime(ye.z,d);a.upX.linearRampToValueAtTime(b.x,d);a.upY.linearRampToValueAtTime(b.y,d);a.upZ.linearRampToValueAtTime(b.z,d)}else a.setPosition(xe.x,xe.y,xe.z),a.setOrientation(ye.x,ye.y,ye.z,b.x,b.y,b.z)}}class Ik extends bc{constructor(a){super();this.type="Audio";this.listener=a;this.context=
a.context;this.gain=this.context.createGain();this.gain.connect(a.getInput());this.autoplay=!1;this.buffer=null;this.detune=0;this.loop=!1;this.offset=this.loopEnd=this.loopStart=0;this.duration=void 0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.source=null;this.sourceType="empty";this._progress=this._startedAt=0;this._connected=!1;this.filters=[]}getOutput(){return this.gain}setNodeSource(a){this.hasPlaybackControl=!1;this.sourceType="audioNode";this.source=a;this.connect();
return this}setMediaElementSource(a){this.hasPlaybackControl=!1;this.sourceType="mediaNode";this.source=this.context.createMediaElementSource(a);this.connect();return this}setMediaStreamSource(a){this.hasPlaybackControl=!1;this.sourceType="mediaStreamNode";this.source=this.context.createMediaStreamSource(a);this.connect();return this}setBuffer(a){this.buffer=a;this.sourceType="buffer";this.autoplay&&this.play();return this}play(a=0){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");
else if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this._startedAt=this.context.currentTime+a,a=this.context.createBufferSource(),a.buffer=this.buffer,a.loop=this.loop,a.loopStart=this.loopStart,a.loopEnd=this.loopEnd,a.onended=this.onEnded.bind(this),a.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=a,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1===
this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress%=this.duration||this.buffer.duration),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this._progress=0,null!==this.source&&(this.source.stop(),
this.source.onended=null),this.isPlaying=!1,this}connect(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(let a=1,b=this.filters.length;a<b;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());this._connected=!0;return this}disconnect(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(let a=1,b=this.filters.length;a<b;a++)this.filters[a-1].disconnect(this.filters[a]);
this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());this._connected=!1;return this}getFilters(){return this.filters}setFilters(a){a||(a=[]);!0===this._connected?(this.disconnect(),this.filters=a.slice(),this.connect()):this.filters=a.slice();return this}setDetune(a){this.detune=a;if(void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(a){return this.setFilters(a?
[a]:[])}setPlaybackRate(a){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.playbackRate=a,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(a){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return this.loop=a,!0===this.isPlaying&&(this.source.loop=this.loop),this}setLoopStart(a){this.loopStart=a;return this}setLoopEnd(a){this.loopEnd=a;return this}getVolume(){return this.gain.gain.value}setVolume(a){this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01);return this}}const ze=new aa,Jk=new lb,dm=new aa,Ae=new aa;class em extends Ik{constructor(a){super(a);this.panner=this.context.createPanner();this.panner.panningModel="HRTF";this.panner.connect(this.gain)}disconnect(){super.disconnect();
this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(a){this.panner.refDistance=a;return this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(a){this.panner.rolloffFactor=a;return this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(a){this.panner.distanceModel=a;return this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(a){this.panner.maxDistance=a;return this}setDirectionalCone(a,
b,d){this.panner.coneInnerAngle=a;this.panner.coneOuterAngle=b;this.panner.coneOuterGain=d;return this}updateMatrixWorld(a){super.updateMatrixWorld(a);if(!0!==this.hasPlaybackControl||!1!==this.isPlaying)if(this.matrixWorld.decompose(ze,Jk,dm),Ae.set(0,0,1).applyQuaternion(Jk),a=this.panner,a.positionX){const b=this.context.currentTime+this.listener.timeDelta;a.positionX.linearRampToValueAtTime(ze.x,b);a.positionY.linearRampToValueAtTime(ze.y,b);a.positionZ.linearRampToValueAtTime(ze.z,b);a.orientationX.linearRampToValueAtTime(Ae.x,
b);a.orientationY.linearRampToValueAtTime(Ae.y,b);a.orientationZ.linearRampToValueAtTime(Ae.z,b)}else a.setPosition(ze.x,ze.y,ze.z),a.setOrientation(Ae.x,Ae.y,Ae.z)}}class fm{constructor(a,b=2048){this.analyser=a.context.createAnalyser();this.analyser.fftSize=b;this.data=new Uint8Array(this.analyser.frequencyBinCount);a.getOutput().connect(this.analyser)}getFrequencyData(){this.analyser.getByteFrequencyData(this.data);return this.data}getAverageFrequency(){let a=0;const b=this.getFrequencyData();
for(let d=0;d<b.length;d++)a+=b[d];return a/b.length}}class Kk{constructor(a,b,d){this.binding=a;this.valueSize=d;let l;switch(b){case "quaternion":a=this._slerp;b=this._slerpAdditive;l=this._setAdditiveIdentityQuaternion;this.buffer=new Float64Array(6*d);this._workIndex=5;break;case "string":case "bool":b=a=this._select;l=this._setAdditiveIdentityOther;this.buffer=Array(5*d);break;default:a=this._lerp,b=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*d)}this._mixBufferRegion=
a;this._mixBufferRegionAdditive=b;this._setIdentity=l;this._origIndex=3;this._addIndex=4;this.referenceCount=this.useCount=this.cumulativeWeightAdditive=this.cumulativeWeight=0}accumulate(a,b){const d=this.buffer,l=this.valueSize;a=a*l+l;var q=this.cumulativeWeight;if(0===q){for(q=0;q!==l;++q)d[a+q]=d[q];q=b}else q+=b,this._mixBufferRegion(d,a,0,b/q,l);this.cumulativeWeight=q}accumulateAdditive(a){const b=this.buffer,d=this.valueSize,l=d*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity();
this._mixBufferRegionAdditive(b,l,0,a,d);this.cumulativeWeightAdditive+=a}apply(a){const b=this.valueSize,d=this.buffer;a=a*b+b;const l=this.cumulativeWeight,q=this.cumulativeWeightAdditive,y=this.binding;this.cumulativeWeightAdditive=this.cumulativeWeight=0;1>l&&this._mixBufferRegion(d,a,b*this._origIndex,1-l,b);0<q&&this._mixBufferRegionAdditive(d,a,this._addIndex*b,1,b);for(let A=b,D=b+b;A!==D;++A)if(d[A]!==d[A+b]){y.setValue(d,a);break}}saveOriginalState(){const a=this.buffer,b=this.valueSize,
d=b*this._origIndex;this.binding.getValue(a,d);for(let l=b,q=d;l!==q;++l)a[l]=a[d+l%b];this._setIdentity();this.cumulativeWeightAdditive=this.cumulativeWeight=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){var a=this._addIndex*this.valueSize;const b=a+this.valueSize;for(;a<b;a++)this.buffer[a]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric();this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const a=
this._origIndex*this.valueSize,b=this._addIndex*this.valueSize;for(let d=0;d<this.valueSize;d++)this.buffer[b+d]=this.buffer[a+d]}_select(a,b,d,l,q){if(.5<=l)for(l=0;l!==q;++l)a[b+l]=a[d+l]}_slerp(a,b,d,l){lb.slerpFlat(a,b,a,b,a,d,l)}_slerpAdditive(a,b,d,l,q){q*=this._workIndex;lb.multiplyQuaternionsFlat(a,q,a,b,a,d);lb.slerpFlat(a,b,a,b,a,q,l)}_lerp(a,b,d,l,q){const y=1-l;for(let A=0;A!==q;++A){const D=b+A;a[D]=a[D]*y+a[d+A]*l}}_lerpAdditive(a,b,d,l,q){for(let y=0;y!==q;++y){const A=b+y;a[A]+=a[d+
y]*l}}}const gm=RegExp("[\\[\\]\\.:\\/]","g"),hm=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),im=/(WCOD+)?/.source.replace("WCOD","[^\\[\\]:\\/]"),jm=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),km=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),lm=new RegExp("^"+hm+im+jm+km+"$"),mm=["material","materials","bones","map"];class nm{constructor(a,b,d){d=d||$b.parseTrackName(b);this._targetGroup=a;this._bindings=a.subscribe_(b,d)}getValue(a,b){this.bind();
const d=this._bindings[this._targetGroup.nCachedObjects_];void 0!==d&&d.getValue(a,b)}setValue(a,b){const d=this._bindings;for(let l=this._targetGroup.nCachedObjects_,q=d.length;l!==q;++l)d[l].setValue(a,b)}bind(){const a=this._bindings;for(let b=this._targetGroup.nCachedObjects_,d=a.length;b!==d;++b)a[b].bind()}unbind(){const a=this._bindings;for(let b=this._targetGroup.nCachedObjects_,d=a.length;b!==d;++b)a[b].unbind()}}class $b{constructor(a,b,d){this.path=b;this.parsedPath=d||$b.parseTrackName(b);
this.node=$b.findNode(a,this.parsedPath.nodeName);this.rootNode=a;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}static create(a,b,d){return a&&a.isAnimationObjectGroup?new $b.Composite(a,b,d):new $b(a,b,d)}static sanitizeNodeName(a){return a.replace(/\s/g,"_").replace(gm,"")}static parseTrackName(a){var b=lm.exec(a);if(null===b)throw Error("PropertyBinding: Cannot parse trackName: "+a);b={nodeName:b[2],objectName:b[3],objectIndex:b[4],propertyName:b[5],propertyIndex:b[6]};
const d=b.nodeName&&b.nodeName.lastIndexOf(".");if(void 0!==d&&-1!==d){const l=b.nodeName.substring(d+1);-1!==mm.indexOf(l)&&(b.nodeName=b.nodeName.substring(0,d),b.objectName=l)}if(null===b.propertyName||0===b.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+a);return b}static findNode(a,b){if(void 0===b||""===b||"."===b||-1===b||b===a.name||b===a.uuid)return a;if(a.skeleton){const d=a.skeleton.getBoneByName(b);if(void 0!==d)return d}if(a.children){const d=
function(l){for(let y=0;y<l.length;y++){var q=l[y];if(q.name===b||q.uuid===b||(q=d(q.children)))return q}return null};if(a=d(a.children))return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(a,b){a[b]=this.targetObject[this.propertyName]}_getValue_array(a,b){const d=this.resolvedProperty;for(let l=0,q=d.length;l!==q;++l)a[b++]=d[l]}_getValue_arrayElement(a,b){a[b]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(a,b){this.resolvedProperty.toArray(a,b)}_setValue_direct(a,
b){this.targetObject[this.propertyName]=a[b]}_setValue_direct_setNeedsUpdate(a,b){this.targetObject[this.propertyName]=a[b];this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(a,b){this.targetObject[this.propertyName]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(a,b){const d=this.resolvedProperty;for(let l=0,q=d.length;l!==q;++l)d[l]=a[b++]}_setValue_array_setNeedsUpdate(a,b){const d=this.resolvedProperty;for(let l=0,q=d.length;l!==q;++l)d[l]=a[b++];this.targetObject.needsUpdate=
!0}_setValue_array_setMatrixWorldNeedsUpdate(a,b){const d=this.resolvedProperty;for(let l=0,q=d.length;l!==q;++l)d[l]=a[b++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(a,b){this.resolvedProperty[this.propertyIndex]=a[b]}_setValue_arrayElement_setNeedsUpdate(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.matrixWorldNeedsUpdate=
!0}_setValue_fromArray(a,b){this.resolvedProperty.fromArray(a,b)}_setValue_fromArray_setNeedsUpdate(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(a,b){this.bind();this.getValue(a,b)}_setValue_unbound(a,b){this.bind();this.setValue(a,b)}bind(){let a=this.node;var b=this.parsedPath,d=b.objectName;const l=b.propertyName;let q=
b.propertyIndex;a||(this.node=a=$b.findNode(this.rootNode,b.nodeName));this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(a){if(d){var y=b.objectIndex;switch(d){case "materials":if(!a.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!a.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}a=
a.material.materials;break;case "bones":if(!a.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}a=a.skeleton.bones;for(d=0;d<a.length;d++)if(a[d].name===y){y=d;break}break;case "map":if("map"in a){a=a.map;break}if(!a.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!a.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",
this);return}a=a.material.map;break;default:if(void 0===a[d]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}a=a[d]}if(void 0!==y){if(void 0===a[y]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,a);return}a=a[y]}}y=a[l];if(void 0===y)console.error("THREE.PropertyBinding: Trying to update property for track: "+b.nodeName+"."+l+" but it wasn't found.",a);else{b=this.Versioning.None;this.targetObject=
a;void 0!==a.needsUpdate?b=this.Versioning.NeedsUpdate:void 0!==a.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate);d=this.BindingType.Direct;if(void 0!==q){if("morphTargetInfluences"===l){if(!a.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!a.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",
this);return}void 0!==a.morphTargetDictionary[q]&&(q=a.morphTargetDictionary[q])}d=this.BindingType.ArrayElement;this.resolvedProperty=y;this.propertyIndex=q}else void 0!==y.fromArray&&void 0!==y.toArray?(d=this.BindingType.HasFromToArray,this.resolvedProperty=y):Array.isArray(y)?(d=this.BindingType.EntireArray,this.resolvedProperty=y):this.propertyName=l;this.getValue=this.GetterByBindingType[d];this.setValue=this.SetterByBindingTypeAndVersioning[d][b]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+
this.path+" but it wasn't found.")}unbind(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}}$b.Composite=nm;$b.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};$b.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};$b.prototype.GetterByBindingType=[$b.prototype._getValue_direct,$b.prototype._getValue_array,$b.prototype._getValue_arrayElement,$b.prototype._getValue_toArray];$b.prototype.SetterByBindingTypeAndVersioning=
[[$b.prototype._setValue_direct,$b.prototype._setValue_direct_setNeedsUpdate,$b.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$b.prototype._setValue_array,$b.prototype._setValue_array_setNeedsUpdate,$b.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$b.prototype._setValue_arrayElement,$b.prototype._setValue_arrayElement_setNeedsUpdate,$b.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$b.prototype._setValue_fromArray,$b.prototype._setValue_fromArray_setNeedsUpdate,$b.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];
class om{constructor(){this.isAnimationObjectGroup=!0;this.uuid=p();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;const a={};this._indicesByUUID=a;for(let d=0,l=arguments.length;d!==l;++d)a[arguments[d].uuid]=d;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};const b=this;this.stats={objects:{get total(){return b._objects.length},get inUse(){return this.total-b.nCachedObjects_}},get bindingsPerObject(){return b._bindings.length}}}add(){const a=
this._objects,b=this._indicesByUUID,d=this._paths,l=this._parsedPaths,q=this._bindings,y=q.length;let A=void 0,D=a.length,F=this.nCachedObjects_;for(let N=0,P=arguments.length;N!==P;++N){const T=arguments[N];var G=T.uuid;let S=b[G];if(void 0===S){S=D++;b[G]=S;a.push(T);for(let L=0,U=y;L!==U;++L)q[L].push(new $b(T,d[L],l[L]))}else if(S<F){A=a[S];const L=--F;var M=a[L];b[M.uuid]=S;a[S]=M;b[G]=L;a[L]=T;for(let U=0,ma=y;U!==ma;++U)G=q[U],M=G[S],G[S]=G[L],void 0===M&&(M=new $b(T,d[U],l[U])),G[L]=M}else a[S]!==
A&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=F}remove(){const a=this._objects,b=this._indicesByUUID,d=this._bindings,l=d.length;let q=this.nCachedObjects_;for(let D=0,F=arguments.length;D!==F;++D){var y=arguments[D],A=y.uuid;const G=b[A];if(void 0!==G&&G>=q){const M=q++,N=a[M];b[N.uuid]=G;a[G]=N;b[A]=M;a[M]=y;for(let P=0,T=l;P!==T;++P)y=d[P],A=y[G],y[G]=y[M],
y[M]=A}}this.nCachedObjects_=q}uncache(){const a=this._objects,b=this._indicesByUUID,d=this._bindings,l=d.length;let q=this.nCachedObjects_,y=a.length;for(let M=0,N=arguments.length;M!==N;++M){var A=arguments[M].uuid;const P=b[A];if(void 0!==P)if(delete b[A],P<q){A=--q;var D=a[A],F=--y,G=a[F];b[D.uuid]=P;a[P]=D;b[G.uuid]=A;a[A]=G;a.pop();for(let T=0,S=l;T!==S;++T)D=d[T],G=D[F],D[P]=D[A],D[A]=G,D.pop()}else{A=--y;F=a[A];0<A&&(b[F.uuid]=P);a[P]=F;a.pop();for(let T=0,S=l;T!==S;++T)F=d[T],F[P]=F[A],F.pop()}}this.nCachedObjects_=
q}subscribe_(a,b){const d=this._bindingsIndicesByPath;let l=d[a];const q=this._bindings;if(void 0!==l)return q[l];const y=this._paths,A=this._parsedPaths,D=this._objects,F=this.nCachedObjects_,G=Array(D.length);l=q.length;d[a]=l;y.push(a);A.push(b);q.push(G);for(let M=F,N=D.length;M!==N;++M)G[M]=new $b(D[M],a,b);return G}unsubscribe_(a){const b=this._bindingsIndicesByPath,d=b[a];if(void 0!==d){const l=this._paths,q=this._parsedPaths,y=this._bindings,A=y.length-1,D=y[A];b[a[A]]=d;y[d]=D;y.pop();q[d]=
q[A];q.pop();l[d]=l[A];l.pop()}}}class pm{constructor(a,b,d=null,l=b.blendMode){this._mixer=a;this._clip=b;this._localRoot=d;this.blendMode=l;a=b.tracks;b=a.length;d=Array(b);l={endingStart:2400,endingEnd:2400};for(let q=0;q!==b;++q){const y=a[q].createInterpolant(null);d[q]=y;y.settings=l}this._interpolantSettings=l;this._interpolants=d;this._propertyBindings=Array(b);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=2201;this._loopCount=-1;
this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}play(){this._mixer._activateAction(this);return this}stop(){this._mixer._deactivateAction(this);return this.reset()}reset(){this.paused=!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()}isRunning(){return this.enabled&&
!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(a){this._startTime=a;return this}setLoop(a,b){this.loop=a;this.repetitions=b;return this}setEffectiveWeight(a){this.weight=a;this._effectiveWeight=this.enabled?a:0;return this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(a){return this._scheduleFading(a,0,1)}fadeOut(a){return this._scheduleFading(a,1,0)}crossFadeFrom(a,
b,d){a.fadeOut(b);this.fadeIn(b);if(d){d=this._clip.duration;const l=a._clip.duration,q=d/l;a.warp(1,l/d,b);this.warp(q,1,b)}return this}crossFadeTo(a,b,d){return a.crossFadeFrom(this,b,d)}stopFading(){const a=this._weightInterpolant;null!==a&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this}setEffectiveTimeScale(a){this.timeScale=a;this._effectiveTimeScale=this.paused?0:a;return this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(a){this.timeScale=
this._clip.duration/a;return this.stopWarping()}syncWith(a){this.time=a.time;this.timeScale=a.timeScale;return this.stopWarping()}halt(a){return this.warp(this._effectiveTimeScale,0,a)}warp(a,b,d){var l=this._mixer;const q=l.time,y=this.timeScale;var A=this._timeScaleInterpolant;null===A&&(this._timeScaleInterpolant=A=l._lendControlInterpolant());l=A.parameterPositions;A=A.sampleValues;l[0]=q;l[1]=q+d;A[0]=a/y;A[1]=b/y;return this}stopWarping(){const a=this._timeScaleInterpolant;null!==a&&(this._timeScaleInterpolant=
null,this._mixer._takeBackControlInterpolant(a));return this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(a,b,d,l){if(this.enabled){var q=this._startTime;null!==q&&(b=(a-q)*d,0>b||0===d?b=0:(this._startTime=null,b*=d));b*=this._updateTimeScale(a);d=this._updateTime(b);a=this._updateWeight(a);if(0<a)switch(b=this._interpolants,q=this._propertyBindings,this.blendMode){case 2501:for(let y=0,A=b.length;y!==A;++y)b[y].evaluate(d),
q[y].accumulateAdditive(a);break;default:for(let y=0,A=b.length;y!==A;++y)b[y].evaluate(d),q[y].accumulate(l,a)}}else this._updateWeight(a)}_updateWeight(a){let b=0;if(this.enabled){b=this.weight;const d=this._weightInterpolant;if(null!==d){const l=d.evaluate(a)[0];b*=l;a>d.parameterPositions[1]&&(this.stopFading(),0===l&&(this.enabled=!1))}}return this._effectiveWeight=b}_updateTimeScale(a){let b=0;if(!this.paused){b=this.timeScale;const d=this._timeScaleInterpolant;if(null!==d){const l=d.evaluate(a)[0];
b*=l;a>d.parameterPositions[1]&&(this.stopWarping(),0===b?this.paused=!0:this.timeScale=b)}}return this._effectiveTimeScale=b}_updateTime(a){const b=this._clip.duration;var d=this.loop;let l=this.time+a,q=this._loopCount;const y=2202===d;if(0===a)return-1===q?l:y&&1===(q&1)?b-l:l;if(2200===d)a:{if(-1===q&&(this._loopCount=0,this._setEndings(!0,!0,!1)),l>=b)l=b;else if(0>l)l=0;else{this.time=l;break a}this.clampWhenFinished?this.paused=!0:this.enabled=!1;this.time=l;this._mixer.dispatchEvent({type:"finished",
action:this,direction:0>a?-1:1})}else{-1===q&&(0<=a?(q=0,this._setEndings(!0,0===this.repetitions,y)):this._setEndings(0===this.repetitions,!0,y));if(l>=b||0>l){d=Math.floor(l/b);l-=b*d;q+=Math.abs(d);const A=this.repetitions-q;0>=A?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=l=0<a?b:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<a?1:-1})):(1===A?(a=0>a,this._setEndings(a,!a,y)):this._setEndings(!1,!1,y),this._loopCount=q,this.time=l,this._mixer.dispatchEvent({type:"loop",
action:this,loopDelta:d}))}else this.time=l;if(y&&1===(q&1))return b-l}return l}_setEndings(a,b,d){const l=this._interpolantSettings;d?(l.endingStart=2401,l.endingEnd=2401):(l.endingStart=a?this.zeroSlopeAtStart?2401:2400:2402,l.endingEnd=b?this.zeroSlopeAtEnd?2401:2400:2402)}_scheduleFading(a,b,d){var l=this._mixer;const q=l.time;var y=this._weightInterpolant;null===y&&(this._weightInterpolant=y=l._lendControlInterpolant());l=y.parameterPositions;y=y.sampleValues;l[0]=q;y[0]=b;l[1]=q+a;y[1]=d;return this}}
const qm=new Float32Array(1);class rm extends Uc{constructor(a){super();this._root=a;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1}_bindAction(a,b){const d=a._localRoot||this._root,l=a._clip.tracks,q=l.length,y=a._propertyBindings;a=a._interpolants;const A=d.uuid;var D=this._bindingsByRootAndName;let F=D[A];void 0===F&&(F={},D[A]=F);for(D=0;D!==q;++D){const G=l[D],M=G.name;let N=F[M];if(void 0!==N)++N.referenceCount;else{N=y[D];if(void 0!==N){null===N._cacheIndex&&(++N.referenceCount,
this._addInactiveBinding(N,A,M));continue}N=new Kk($b.create(d,M,b&&b._propertyBindings[D].binding.parsedPath),G.ValueTypeName,G.getValueSize());++N.referenceCount;this._addInactiveBinding(N,A,M)}y[D]=N;a[D].resultBuffer=N.buffer}}_activateAction(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var b=(a._localRoot||this._root).uuid,d=a._clip.uuid;const l=this._actionsByClip[d];this._bindAction(a,l&&l.knownActions[0]);this._addInactiveAction(a,d,b)}b=a._propertyBindings;for(let l=0,q=b.length;l!==
q;++l)d=b[l],0===d.useCount++&&(this._lendBinding(d),d.saveOriginalState());this._lendAction(a)}}_deactivateAction(a){if(this._isActiveAction(a)){const b=a._propertyBindings;for(let d=0,l=b.length;d!==l;++d){const q=b[d];0===--q.useCount&&(q.restoreOriginalState(),this._takeBackBinding(q))}this._takeBackAction(a)}}_initMemoryManager(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];
this._nActiveControlInterpolants=0;const a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}}_isActiveAction(a){a=a._cacheIndex;return null!==a&&a<this._nActiveActions}_addInactiveAction(a,b,d){const l=this._actions,q=this._actionsByClip;
let y=q[b];void 0===y?(y={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,q[b]=y):(b=y.knownActions,a._byClipCacheIndex=b.length,b.push(a));a._cacheIndex=l.length;l.push(a);y.actionByRoot[d]=a}_removeInactiveAction(a){var b=this._actions,d=b[b.length-1],l=a._cacheIndex;d._cacheIndex=l;b[l]=d;b.pop();a._cacheIndex=null;b=a._clip.uuid;d=this._actionsByClip;l=d[b];const q=l.knownActions,y=q[q.length-1],A=a._byClipCacheIndex;y._byClipCacheIndex=A;q[A]=y;q.pop();a._byClipCacheIndex=null;delete l.actionByRoot[(a._localRoot||
this._root).uuid];0===q.length&&delete d[b];this._removeInactiveBindingsForAction(a)}_removeInactiveBindingsForAction(a){a=a._propertyBindings;for(let b=0,d=a.length;b!==d;++b){const l=a[b];0===--l.referenceCount&&this._removeInactiveBinding(l)}}_lendAction(a){const b=this._actions,d=a._cacheIndex,l=this._nActiveActions++,q=b[l];a._cacheIndex=l;b[l]=a;q._cacheIndex=d;b[d]=q}_takeBackAction(a){const b=this._actions,d=a._cacheIndex,l=--this._nActiveActions,q=b[l];a._cacheIndex=l;b[l]=a;q._cacheIndex=
d;b[d]=q}_addInactiveBinding(a,b,d){const l=this._bindingsByRootAndName,q=this._bindings;let y=l[b];void 0===y&&(y={},l[b]=y);y[d]=a;a._cacheIndex=q.length;q.push(a)}_removeInactiveBinding(a){const b=this._bindings;var d=a.binding;const l=d.rootNode.uuid;d=d.path;const q=this._bindingsByRootAndName,y=q[l],A=b[b.length-1];a=a._cacheIndex;A._cacheIndex=a;b[a]=A;b.pop();delete y[d];0===Object.keys(y).length&&delete q[l]}_lendBinding(a){const b=this._bindings,d=a._cacheIndex,l=this._nActiveBindings++,
q=b[l];a._cacheIndex=l;b[l]=a;q._cacheIndex=d;b[d]=q}_takeBackBinding(a){const b=this._bindings,d=a._cacheIndex,l=--this._nActiveBindings,q=b[l];a._cacheIndex=l;b[l]=a;q._cacheIndex=d;b[d]=q}_lendControlInterpolant(){const a=this._controlInterpolants,b=this._nActiveControlInterpolants++;let d=a[b];void 0===d&&(d=new Hi(new Float32Array(2),new Float32Array(2),1,qm),d.__cacheIndex=b,a[b]=d);return d}_takeBackControlInterpolant(a){const b=this._controlInterpolants,d=a.__cacheIndex,l=--this._nActiveControlInterpolants,
q=b[l];a.__cacheIndex=l;b[l]=a;q.__cacheIndex=d;b[d]=q}clipAction(a,b,d){var l=b||this._root;const q=l.uuid;l="string"===typeof a?dg.findByName(l,a):a;a=null!==l?l.uuid:a;const y=this._actionsByClip[a];var A=null;void 0===d&&(d=null!==l?l.blendMode:2500);if(void 0!==y){A=y.actionByRoot[q];if(void 0!==A&&A.blendMode===d)return A;A=y.knownActions[0];null===l&&(l=A._clip)}if(null===l)return null;b=new pm(this,l,b,d);this._bindAction(b,A);this._addInactiveAction(b,a,q);return b}existingAction(a,b){var d=
b||this._root;b=d.uuid;d="string"===typeof a?dg.findByName(d,a):a;a=this._actionsByClip[d?d.uuid:a];return void 0!==a?a.actionByRoot[b]||null:null}stopAllAction(){const a=this._actions;var b=this._nActiveActions;for(--b;0<=b;--b)a[b].stop();return this}update(a){a*=this.timeScale;var b=this._actions,d=this._nActiveActions;const l=this.time+=a,q=Math.sign(a),y=this._accuIndex^=1;for(let A=0;A!==d;++A)b[A]._update(l,a,q,y);a=this._bindings;b=this._nActiveBindings;for(d=0;d!==b;++d)a[d].apply(y);return this}setTime(a){this.time=
0;for(let b=0;b<this._actions.length;b++)this._actions[b].time=0;return this.update(a)}getRoot(){return this._root}uncacheClip(a){const b=this._actions;a=a.uuid;const d=this._actionsByClip;var l=d[a];if(void 0!==l){l=l.knownActions;for(let q=0,y=l.length;q!==y;++q){const A=l[q];this._deactivateAction(A);const D=A._cacheIndex,F=b[b.length-1];A._cacheIndex=null;A._byClipCacheIndex=null;F._cacheIndex=D;b[D]=F;b.pop();this._removeInactiveBindingsForAction(A)}delete d[a]}}uncacheRoot(a){a=a.uuid;const b=
this._actionsByClip;for(var d in b){const l=b[d].actionByRoot[a];void 0!==l&&(this._deactivateAction(l),this._removeInactiveAction(l))}d=this._bindingsByRootAndName[a];if(void 0!==d)for(const l in d)a=d[l],a.restoreOriginalState(),this._removeInactiveBinding(a)}uncacheAction(a,b){a=this.existingAction(a,b);null!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}}class Lk{constructor(a){this.value=a}clone(){return new Lk(void 0===this.value.clone?this.value:this.value.clone())}}let sm=
0;class tm extends Uc{constructor(){super();this.isUniformsGroup=!0;Object.defineProperty(this,"id",{value:sm++});this.name="";this.usage=35044;this.uniforms=[]}add(a){this.uniforms.push(a);return this}remove(a){a=this.uniforms.indexOf(a);-1!==a&&this.uniforms.splice(a,1);return this}setName(a){this.name=a;return this}setUsage(a){this.usage=a;return this}dispose(){this.dispatchEvent({type:"dispose"});return this}copy(a){this.name=a.name;this.usage=a.usage;a=a.uniforms;this.uniforms.length=0;for(let b=
0,d=a.length;b<d;b++)this.uniforms.push(a[b].clone());return this}clone(){return(new this.constructor).copy(this)}}class um extends Vg{constructor(a,b,d=1){super(a,b);this.isInstancedInterleavedBuffer=!0;this.meshPerAttribute=d}copy(a){super.copy(a);this.meshPerAttribute=a.meshPerAttribute;return this}clone(a){a=super.clone(a);a.meshPerAttribute=this.meshPerAttribute;return a}toJSON(a){a=super.toJSON(a);a.isInstancedInterleavedBuffer=!0;a.meshPerAttribute=this.meshPerAttribute;return a}}class vm{constructor(a,
b,d,l,q){this.isGLBufferAttribute=!0;this.name="";this.buffer=a;this.type=b;this.itemSize=d;this.elementSize=l;this.count=q;this.version=0}set needsUpdate(a){!0===a&&this.version++}setBuffer(a){this.buffer=a;return this}setType(a,b){this.type=a;this.elementSize=b;return this}setItemSize(a){this.itemSize=a;return this}setCount(a){this.count=a;return this}}class wm{constructor(a,b,d=0,l=Infinity){this.ray=new Qf(a,b);this.near=d;this.far=l;this.camera=null;this.layers=new ng;this.params={Mesh:{},Line:{threshold:1},
LOD:{},Points:{threshold:1},Sprite:{}}}set(a,b){this.ray.set(a,b)}setFromCamera(a,b){b.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(b.matrixWorld),this.ray.direction.set(a.x,a.y,.5).unproject(b).sub(this.ray.origin).normalize(),this.camera=b):b.isOrthographicCamera?(this.ray.origin.set(a.x,a.y,(b.near+b.far)/(b.near-b.far)).unproject(b),this.ray.direction.set(0,0,-1).transformDirection(b.matrixWorld),this.camera=b):console.error("THREE.Raycaster: Unsupported camera type: "+b.type)}intersectObject(a,
b=!0,d=[]){Nf(a,this,d,b);d.sort(Eg);return d}intersectObjects(a,b=!0,d=[]){for(let l=0,q=a.length;l<q;l++)Nf(a[l],this,d,b);d.sort(Eg);return d}}class xm{constructor(a=1,b=0,d=0){this.radius=a;this.phi=b;this.theta=d;return this}set(a,b,d){this.radius=a;this.phi=b;this.theta=d;return this}copy(a){this.radius=a.radius;this.phi=a.phi;this.theta=a.theta;return this}makeSafe(){this.phi=Math.max(1E-6,Math.min(Math.PI-1E-6,this.phi));return this}setFromVector3(a){return this.setFromCartesianCoords(a.x,
a.y,a.z)}setFromCartesianCoords(a,b,d){this.radius=Math.sqrt(a*a+b*b+d*d);0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(a,d),this.phi=Math.acos(n(b/this.radius,-1,1)));return this}clone(){return(new this.constructor).copy(this)}}class ym{constructor(a=1,b=0,d=0){this.radius=a;this.theta=b;this.y=d;return this}set(a,b,d){this.radius=a;this.theta=b;this.y=d;return this}copy(a){this.radius=a.radius;this.theta=a.theta;this.y=a.y;return this}setFromVector3(a){return this.setFromCartesianCoords(a.x,
a.y,a.z)}setFromCartesianCoords(a,b,d){this.radius=Math.sqrt(a*a+d*d);this.theta=Math.atan2(a,d);this.y=b;return this}clone(){return(new this.constructor).copy(this)}}const Mk=new za;class zm{constructor(a=new za(Infinity,Infinity),b=new za(-Infinity,-Infinity)){this.isBox2=!0;this.min=a;this.max=b}set(a,b){this.min.copy(a);this.max.copy(b);return this}setFromPoints(a){this.makeEmpty();for(let b=0,d=a.length;b<d;b++)this.expandByPoint(a[b]);return this}setFromCenterAndSize(a,b){b=Mk.copy(b).multiplyScalar(.5);
this.min.copy(a).sub(b);this.max.copy(a).add(b);return this}clone(){return(new this.constructor).copy(this)}copy(a){this.min.copy(a.min);this.max.copy(a.max);return this}makeEmpty(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(a){return this.isEmpty()?a.set(0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(a){return this.isEmpty()?a.set(0,0):a.subVectors(this.max,this.min)}expandByPoint(a){this.min.min(a);
this.max.max(a);return this}expandByVector(a){this.min.sub(a);this.max.add(a);return this}expandByScalar(a){this.min.addScalar(-a);this.max.addScalar(a);return this}containsPoint(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0}containsBox(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y}getParameter(a,b){return b.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(a){return a.max.x<
this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0}clampPoint(a,b){return b.copy(a).clamp(this.min,this.max)}distanceToPoint(a){return this.clampPoint(a,Mk).distanceTo(a)}intersect(a){this.min.max(a.min);this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this}union(a){this.min.min(a.min);this.max.max(a.max);return this}translate(a){this.min.add(a);this.max.add(a);return this}equals(a){return a.min.equals(this.min)&&a.max.equals(this.max)}}const Nk=new aa,uh=new aa;
class Am{constructor(a=new aa,b=new aa){this.start=a;this.end=b}set(a,b){this.start.copy(a);this.end.copy(b);return this}copy(a){this.start.copy(a.start);this.end.copy(a.end);return this}getCenter(a){return a.addVectors(this.start,this.end).multiplyScalar(.5)}delta(a){return a.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(a,b){return this.delta(b).multiplyScalar(a).add(this.start)}closestPointToPointParameter(a,
b){Nk.subVectors(a,this.start);uh.subVectors(this.end,this.start);a=uh.dot(uh);a=uh.dot(Nk)/a;b&&(a=n(a,0,1));return a}closestPointToPoint(a,b,d){a=this.closestPointToPointParameter(a,b);return this.delta(d).multiplyScalar(a).add(this.start)}applyMatrix4(a){this.start.applyMatrix4(a);this.end.applyMatrix4(a);return this}equals(a){return a.start.equals(this.start)&&a.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const Ok=new aa;class Bm extends bc{constructor(a,b){super();this.light=
a;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=b;this.type="SpotLightHelper";a=new Kb;b=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let d=0,l=1,q=32;d<q;d++,l++){const y=d/q*Math.PI*2,A=l/q*Math.PI*2;b.push(Math.cos(y),Math.sin(y),1,Math.cos(A),Math.sin(A),1)}a.setAttribute("position",new pb(b,3));b=new Kc({fog:!1,toneMapped:!1});this.cone=new od(a,b);this.add(this.cone);this.update()}dispose(){this.cone.geometry.dispose();this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,
!1);this.light.target.updateWorldMatrix(!0,!1);const a=this.light.distance?this.light.distance:1E3,b=a*Math.tan(this.light.angle);this.cone.scale.set(b,b,a);Ok.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(Ok);void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Zd=new aa,vh=new Fb,Pi=new Fb;class Cm extends od{constructor(a){const b=Fg(a),d=new Kb;var l=[];const q=[],y=new gb(0,0,1),A=new gb(0,1,0);for(let D=0;D<
b.length;D++){const F=b[D];F.parent&&F.parent.isBone&&(l.push(0,0,0),l.push(0,0,0),q.push(y.r,y.g,y.b),q.push(A.r,A.g,A.b))}d.setAttribute("position",new pb(l,3));d.setAttribute("color",new pb(q,3));l=new Kc({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(d,l);this.isSkeletonHelper=!0;this.type="SkeletonHelper";this.root=a;this.bones=b;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1}updateMatrixWorld(a){const b=this.bones,d=this.geometry,l=d.getAttribute("position");
Pi.copy(this.root.matrixWorld).invert();for(let q=0,y=0;q<b.length;q++){const A=b[q];A.parent&&A.parent.isBone&&(vh.multiplyMatrices(Pi,A.matrixWorld),Zd.setFromMatrixPosition(vh),l.setXYZ(y,Zd.x,Zd.y,Zd.z),vh.multiplyMatrices(Pi,A.parent.matrixWorld),Zd.setFromMatrixPosition(vh),l.setXYZ(y+1,Zd.x,Zd.y,Zd.z),y+=2)}d.getAttribute("position").needsUpdate=!0;super.updateMatrixWorld(a)}dispose(){this.geometry.dispose();this.material.dispose()}}class Dm extends xc{constructor(a,b,d){b=new bg(b,4,2);const l=
new Vd({wireframe:!0,fog:!1,toneMapped:!1});super(b,l);this.light=a;this.color=d;this.type="PointLightHelper";this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1;this.update()}dispose(){this.geometry.dispose();this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1);void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Em=new aa,Pk=new gb,Qk=new gb;class Fm extends bc{constructor(a,b,d){super();this.light=a;this.matrix=a.matrixWorld;
this.matrixAutoUpdate=!1;this.color=d;this.type="HemisphereLightHelper";a=new ag(b);a.rotateY(.5*Math.PI);this.material=new Vd({wireframe:!0,fog:!1,toneMapped:!1});void 0===this.color&&(this.material.vertexColors=!0);b=a.getAttribute("position");b=new Float32Array(3*b.count);a.setAttribute("color",new fc(b,3));this.add(new xc(a,this.material));this.update()}dispose(){this.children[0].geometry.dispose();this.children[0].material.dispose()}update(){const a=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);
else{const b=a.geometry.getAttribute("color");Pk.copy(this.light.color);Qk.copy(this.light.groundColor);for(let d=0,l=b.count;d<l;d++){const q=d<l/2?Pk:Qk;b.setXYZ(d,q.r,q.g,q.b)}b.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1);a.lookAt(Em.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Gm extends od{constructor(a=10,b=10,d=4473924,l=8947848){d=new gb(d);l=new gb(l);const q=b/2,y=a/b,A=a/2;a=[];const D=[];for(let F=0,G=0,M=-A;F<=b;F++,M+=y){a.push(-A,0,M,A,0,M);a.push(M,0,-A,M,
0,A);const N=F===q?d:l;N.toArray(D,G);G+=3;N.toArray(D,G);G+=3;N.toArray(D,G);G+=3;N.toArray(D,G);G+=3}b=new Kb;b.setAttribute("position",new pb(a,3));b.setAttribute("color",new pb(D,3));d=new Kc({vertexColors:!0,toneMapped:!1});super(b,d);this.type="GridHelper"}dispose(){this.geometry.dispose();this.material.dispose()}}class Hm extends od{constructor(a=10,b=16,d=8,l=64,q=4473924,y=8947848){q=new gb(q);y=new gb(y);var A=[];const D=[];if(1<b)for(var F=0;F<b;F++){var G=F/b*2*Math.PI,M=Math.sin(G)*a;
G=Math.cos(G)*a;A.push(0,0,0);A.push(M,0,G);M=F&1?q:y;D.push(M.r,M.g,M.b);D.push(M.r,M.g,M.b)}for(b=0;b<d;b++)for(F=b&1?q:y,M=a-a/d*b,G=0;G<l;G++){var N=G/l*2*Math.PI;let P=Math.sin(N)*M;N=Math.cos(N)*M;A.push(P,0,N);D.push(F.r,F.g,F.b);N=(G+1)/l*2*Math.PI;P=Math.sin(N)*M;N=Math.cos(N)*M;A.push(P,0,N);D.push(F.r,F.g,F.b)}a=new Kb;a.setAttribute("position",new pb(A,3));a.setAttribute("color",new pb(D,3));A=new Kc({vertexColors:!0,toneMapped:!1});super(a,A);this.type="PolarGridHelper"}dispose(){this.geometry.dispose();
this.material.dispose()}}const Rk=new aa,wh=new aa,Sk=new aa;class Im extends bc{constructor(a,b,d){super();this.light=a;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=d;this.type="DirectionalLightHelper";void 0===b&&(b=1);a=new Kb;a.setAttribute("position",new pb([-b,b,0,b,b,0,b,-b,0,-b,-b,0,-b,b,0],3));b=new Kc({fog:!1,toneMapped:!1});this.lightPlane=new Wd(a,b);this.add(this.lightPlane);a=new Kb;a.setAttribute("position",new pb([0,0,0,0,0,1],3));this.targetLine=new Wd(a,b);this.add(this.targetLine);
this.update()}dispose(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1);this.light.target.updateWorldMatrix(!0,!1);Rk.setFromMatrixPosition(this.light.matrixWorld);wh.setFromMatrixPosition(this.light.target.matrixWorld);Sk.subVectors(wh,Rk);this.lightPlane.lookAt(wh);void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):
(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color));this.targetLine.lookAt(wh);this.targetLine.scale.z=Sk.length()}}const Gg=new aa,nc=new Sg;class Jm extends od{constructor(a){function b(M,N){d(M);d(N)}function d(M){y.push(0,0,0);A.push(0,0,0);void 0===D[M]&&(D[M]=[]);D[M].push(y.length/3-1)}var l=new Kb,q=new Kc({color:16777215,vertexColors:!0,toneMapped:!1});const y=[],A=[],D={};b("n1","n2");b("n2","n4");b("n4","n3");b("n3","n1");b("f1",
"f2");b("f2","f4");b("f4","f3");b("f3","f1");b("n1","f1");b("n2","f2");b("n3","f3");b("n4","f4");b("p","n1");b("p","n2");b("p","n3");b("p","n4");b("u1","u2");b("u2","u3");b("u3","u1");b("c","t");b("p","c");b("cn1","cn2");b("cn3","cn4");b("cf1","cf2");b("cf3","cf4");l.setAttribute("position",new pb(y,3));l.setAttribute("color",new pb(A,3));super(l,q);this.type="CameraHelper";this.camera=a;this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix();this.matrix=a.matrixWorld;this.matrixAutoUpdate=
!1;this.pointMap=D;this.update();a=new gb(16755200);l=new gb(16711680);q=new gb(43775);const F=new gb(16777215),G=new gb(3355443);this.setColors(a,l,q,F,G)}setColors(a,b,d,l,q){const y=this.geometry.getAttribute("color");y.setXYZ(0,a.r,a.g,a.b);y.setXYZ(1,a.r,a.g,a.b);y.setXYZ(2,a.r,a.g,a.b);y.setXYZ(3,a.r,a.g,a.b);y.setXYZ(4,a.r,a.g,a.b);y.setXYZ(5,a.r,a.g,a.b);y.setXYZ(6,a.r,a.g,a.b);y.setXYZ(7,a.r,a.g,a.b);y.setXYZ(8,a.r,a.g,a.b);y.setXYZ(9,a.r,a.g,a.b);y.setXYZ(10,a.r,a.g,a.b);y.setXYZ(11,a.r,
a.g,a.b);y.setXYZ(12,a.r,a.g,a.b);y.setXYZ(13,a.r,a.g,a.b);y.setXYZ(14,a.r,a.g,a.b);y.setXYZ(15,a.r,a.g,a.b);y.setXYZ(16,a.r,a.g,a.b);y.setXYZ(17,a.r,a.g,a.b);y.setXYZ(18,a.r,a.g,a.b);y.setXYZ(19,a.r,a.g,a.b);y.setXYZ(20,a.r,a.g,a.b);y.setXYZ(21,a.r,a.g,a.b);y.setXYZ(22,a.r,a.g,a.b);y.setXYZ(23,a.r,a.g,a.b);y.setXYZ(24,b.r,b.g,b.b);y.setXYZ(25,b.r,b.g,b.b);y.setXYZ(26,b.r,b.g,b.b);y.setXYZ(27,b.r,b.g,b.b);y.setXYZ(28,b.r,b.g,b.b);y.setXYZ(29,b.r,b.g,b.b);y.setXYZ(30,b.r,b.g,b.b);y.setXYZ(31,b.r,b.g,
b.b);y.setXYZ(32,d.r,d.g,d.b);y.setXYZ(33,d.r,d.g,d.b);y.setXYZ(34,d.r,d.g,d.b);y.setXYZ(35,d.r,d.g,d.b);y.setXYZ(36,d.r,d.g,d.b);y.setXYZ(37,d.r,d.g,d.b);y.setXYZ(38,l.r,l.g,l.b);y.setXYZ(39,l.r,l.g,l.b);y.setXYZ(40,q.r,q.g,q.b);y.setXYZ(41,q.r,q.g,q.b);y.setXYZ(42,q.r,q.g,q.b);y.setXYZ(43,q.r,q.g,q.b);y.setXYZ(44,q.r,q.g,q.b);y.setXYZ(45,q.r,q.g,q.b);y.setXYZ(46,q.r,q.g,q.b);y.setXYZ(47,q.r,q.g,q.b);y.setXYZ(48,q.r,q.g,q.b);y.setXYZ(49,q.r,q.g,q.b);y.needsUpdate=!0}update(){const a=this.geometry,
b=this.pointMap;nc.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);mc("c",b,a,nc,0,0,-1);mc("t",b,a,nc,0,0,1);mc("n1",b,a,nc,-1,-1,-1);mc("n2",b,a,nc,1,-1,-1);mc("n3",b,a,nc,-1,1,-1);mc("n4",b,a,nc,1,1,-1);mc("f1",b,a,nc,-1,-1,1);mc("f2",b,a,nc,1,-1,1);mc("f3",b,a,nc,-1,1,1);mc("f4",b,a,nc,1,1,1);mc("u1",b,a,nc,.7,1.1,-1);mc("u2",b,a,nc,-.7,1.1,-1);mc("u3",b,a,nc,0,2,-1);mc("cf1",b,a,nc,-1,0,1);mc("cf2",b,a,nc,1,0,1);mc("cf3",b,a,nc,0,-1,1);mc("cf4",b,a,nc,0,1,1);mc("cn1",b,a,nc,
-1,0,-1);mc("cn2",b,a,nc,1,0,-1);mc("cn3",b,a,nc,0,-1,-1);mc("cn4",b,a,nc,0,1,-1);a.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose();this.material.dispose()}}const xh=new pe;class Km extends od{constructor(a,b=16776960){const d=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),l=new Float32Array(24),q=new Kb;q.setIndex(new fc(d,1));q.setAttribute("position",new fc(l,3));super(q,new Kc({color:b,toneMapped:!1}));this.object=a;this.type="BoxHelper";this.matrixAutoUpdate=
!1;this.update()}update(a){void 0!==a&&console.warn("THREE.BoxHelper: .update() has no longer arguments.");void 0!==this.object&&xh.setFromObject(this.object);if(!xh.isEmpty()){a=xh.min;var b=xh.max,d=this.geometry.attributes.position,l=d.array;l[0]=b.x;l[1]=b.y;l[2]=b.z;l[3]=a.x;l[4]=b.y;l[5]=b.z;l[6]=a.x;l[7]=a.y;l[8]=b.z;l[9]=b.x;l[10]=a.y;l[11]=b.z;l[12]=b.x;l[13]=b.y;l[14]=a.z;l[15]=a.x;l[16]=b.y;l[17]=a.z;l[18]=a.x;l[19]=a.y;l[20]=a.z;l[21]=b.x;l[22]=a.y;l[23]=a.z;d.needsUpdate=!0;this.geometry.computeBoundingSphere()}}setFromObject(a){this.object=
a;this.update();return this}copy(a,b){super.copy(a,b);this.object=a.object;return this}dispose(){this.geometry.dispose();this.material.dispose()}}class Lm extends od{constructor(a,b=16776960){const d=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),l=new Kb;l.setIndex(new fc(d,1));l.setAttribute("position",new pb([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));super(l,new Kc({color:b,toneMapped:!1}));this.box=a;this.type="Box3Helper";this.geometry.computeBoundingSphere()}updateMatrixWorld(a){const b=
this.box;b.isEmpty()||(b.getCenter(this.position),b.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(a))}dispose(){this.geometry.dispose();this.material.dispose()}}class Mm extends Wd{constructor(a,b=1,d=16776960){const l=new Kb;l.setAttribute("position",new pb([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3));l.computeBoundingSphere();super(l,new Kc({color:d,toneMapped:!1}));this.type="PlaneHelper";this.plane=a;this.size=b;a=new Kb;a.setAttribute("position",new pb([1,
1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3));a.computeBoundingSphere();this.add(new xc(a,new Vd({color:d,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(a){this.position.set(0,0,0);this.scale.set(.5*this.size,.5*this.size,1);this.lookAt(this.plane.normal);this.translateZ(-this.plane.constant);super.updateMatrixWorld(a)}dispose(){this.geometry.dispose();this.material.dispose();this.children[0].geometry.dispose();this.children[0].material.dispose()}}const Tk=new aa;let yh,
Qi;class Nm extends bc{constructor(a=new aa(0,0,1),b=new aa(0,0,0),d=1,l=16776960,q=.2*d,y=.2*q){super();this.type="ArrowHelper";void 0===yh&&(yh=new Kb,yh.setAttribute("position",new pb([0,0,0,0,1,0],3)),Qi=new gf(0,.5,1,5,1),Qi.translate(0,-.5,0));this.position.copy(b);this.line=new Wd(yh,new Kc({color:l,toneMapped:!1}));this.line.matrixAutoUpdate=!1;this.add(this.line);this.cone=new xc(Qi,new Vd({color:l,toneMapped:!1}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(a);this.setLength(d,
q,y)}setDirection(a){.99999<a.y?this.quaternion.set(0,0,0,1):-.99999>a.y?this.quaternion.set(1,0,0,0):(Tk.set(a.z,0,-a.x).normalize(),this.quaternion.setFromAxisAngle(Tk,Math.acos(a.y)))}setLength(a,b=.2*a,d=.2*b){this.line.scale.set(1,Math.max(1E-4,a-b),1);this.line.updateMatrix();this.cone.scale.set(d,b,d);this.cone.position.y=a;this.cone.updateMatrix()}setColor(a){this.line.material.color.set(a);this.cone.material.color.set(a)}copy(a){super.copy(a,!1);this.line.copy(a.line);this.cone.copy(a.cone);
return this}dispose(){this.line.geometry.dispose();this.line.material.dispose();this.cone.geometry.dispose();this.cone.material.dispose()}}class Om extends od{constructor(a=1){var b=[0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a];a=new Kb;a.setAttribute("position",new pb(b,3));a.setAttribute("color",new pb([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));b=new Kc({vertexColors:!0,toneMapped:!1});super(a,b);this.type="AxesHelper"}setColors(a,b,d){const l=new gb,q=this.geometry.attributes.color.array;l.set(a);l.toArray(q,
0);l.toArray(q,3);l.set(b);l.toArray(q,6);l.toArray(q,9);l.set(d);l.toArray(q,12);l.toArray(q,15);this.geometry.attributes.color.needsUpdate=!0;return this}dispose(){this.geometry.dispose();this.material.dispose()}}class Pm{constructor(){this.type="ShapePath";this.color=new gb;this.subPaths=[];this.currentPath=null}moveTo(a,b){this.currentPath=new Zf;this.subPaths.push(this.currentPath);this.currentPath.moveTo(a,b);return this}lineTo(a,b){this.currentPath.lineTo(a,b);return this}quadraticCurveTo(a,
b,d,l){this.currentPath.quadraticCurveTo(a,b,d,l);return this}bezierCurveTo(a,b,d,l,q,y){this.currentPath.bezierCurveTo(a,b,d,l,q,y);return this}splineThru(a){this.currentPath.splineThru(a);return this}toShapes(a){function b(S){const L=[];for(let U=0,ma=S.length;U<ma;U++){const ba=S[U],na=new ue;na.curves=ba.curves;L.push(na)}return L}function d(S,L){const U=L.length;let ma=!1;for(let na=U-1,sa=0;sa<U;na=sa++){var ba=L[na];let ja=L[sa],Ga=ja.x-ba.x,oa=ja.y-ba.y;if(Math.abs(oa)>Number.EPSILON){if(0>
oa&&(ba=L[sa],Ga=-Ga,ja=L[na],oa=-oa),!(S.y<ba.y||S.y>ja.y))if(S.y===ba.y){if(S.x===ba.x)return!0}else{ba=oa*(S.x-ba.x)-Ga*(S.y-ba.y);if(0===ba)return!0;0>ba||(ma=!ma)}}else if(S.y===ba.y&&(ja.x<=S.x&&S.x<=ba.x||ba.x<=S.x&&S.x<=ja.x))return!0}return ma}var l=Dd.isClockWise,q=this.subPaths;if(0===q.length)return[];const y=[];if(1===q.length){var A=q[0];var D=new ue;D.curves=A.curves;y.push(D);return y}var F=!l(q[0].getPoints());F=a?!F:F;D=[];const G=[];let M=[];var N=0;let P;G[N]=void 0;M[N]=[];for(let S=
0,L=q.length;S<L;S++){A=q[S];P=A.getPoints();var T=l(P);(T=a?!T:T)?(!F&&G[N]&&N++,G[N]={s:new ue,p:P},G[N].s.curves=A.curves,F&&N++,M[N]=[]):M[N].push({h:A,p:P[0]})}if(!G[0])return b(q);if(1<G.length){A=!1;a=0;for(let S=0,L=G.length;S<L;S++)D[S]=[];for(let S=0,L=G.length;S<L;S++)for(l=M[S],q=0;q<l.length;q++){T=l[q];F=!0;for(N=0;N<G.length;N++)d(T.p,G[N].p)&&(S!==N&&a++,F?(F=!1,D[N].push(T)):A=!0);F&&D[S].push(T)}0<a&&!1===A&&(M=D)}for(let S=0,L=G.length;S<L;S++){D=G[S].s;y.push(D);A=M[S];for(let U=
0,ma=A.length;U<ma;U++)D.holes.push(A[U].h)}return y}}const Gd=function(){var a=new ArrayBuffer(4);const b=new Float32Array(a);a=new Uint32Array(a);const d=new Uint32Array(512),l=new Uint32Array(512);for(var q=0;256>q;++q){var y=q-127;-27>y?(d[q]=0,d[q|256]=32768,l[q]=24,l[q|256]=24):-14>y?(d[q]=1024>>-y-14,d[q|256]=1024>>-y-14|32768,l[q]=-y-1,l[q|256]=-y-1):15>=y?(d[q]=y+15<<10,d[q|256]=y+15<<10|32768,l[q]=13,l[q|256]=13):128>y?(d[q]=31744,d[q|256]=64512,l[q]=24,l[q|256]=24):(d[q]=31744,d[q|256]=
64512,l[q]=13,l[q|256]=13)}q=new Uint32Array(2048);y=new Uint32Array(64);const A=new Uint32Array(64);for(var D=1;1024>D;++D){let F=D<<13,G=0;for(;0===(F&8388608);)F<<=1,G-=8388608;F&=-8388609;G+=947912704;q[D]=F|G}for(D=1024;2048>D;++D)q[D]=939524096+(D-1024<<13);for(D=1;31>D;++D)y[D]=D<<23;y[31]=1199570944;y[32]=2147483648;for(D=33;63>D;++D)y[D]=2147483648+(D-32<<23);y[63]=3347054592;for(D=1;64>D;++D)32!==D&&(A[D]=1024);return{floatView:b,uint32View:a,baseTable:d,shiftTable:l,mantissaTable:q,exponentTable:y,
offsetTable:A}}();class Qm extends ae{constructor(a,b,d,l,q,y){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry.");super(a,b,d,l,q,y)}}class Rm extends dh{constructor(a,b,d,l){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry.");super(a,b,d,l)}}class Sm extends eh{constructor(a,b,d,l){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry.");super(a,b,d,l)}}class Tm extends fh{constructor(a,b,d,l,q,y,A){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry.");
super(a,b,d,l,q,y,A)}}class Um extends gf{constructor(a,b,d,l,q,y,A,D){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry.");super(a,b,d,l,q,y,A,D)}}class Vm extends gh{constructor(a,b){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry.");super(a,b)}}class Wm extends kh{constructor(a,b){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry.");super(a,b)}}class Xm extends lh{constructor(a,b){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry.");
super(a,b)}}class Ym extends $f{constructor(a,b,d,l){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry.");super(a,b,d,l)}}class Zm extends ag{constructor(a,b){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry.");super(a,b)}}class $m extends lf{constructor(a,b,d,l){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry.");super(a,b,d,l)}}class an extends Xd{constructor(a,b,d,l){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry.");
super(a,b,d,l)}}class bn extends mh{constructor(a,b,d,l,q,y){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry.");super(a,b,d,l,q,y)}}class cn extends nh{constructor(a,b){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry.");super(a,b)}}class dn extends bg{constructor(a,b,d,l,q,y,A){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry.");super(a,b,d,l,q,y,A)}}class en extends oh{constructor(a,b){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry.");
super(a,b)}}class fn extends ph{constructor(a,b,d,l,q){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry.");super(a,b,d,l,q)}}class gn extends qh{constructor(a,b,d,l,q,y){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry.");super(a,b,d,l,q,y)}}class hn extends rh{constructor(a,b,d,l,q){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry.");super(a,b,d,l,q)}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",
{detail:{revision:"150"}}));"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="150");t.ACESFilmicToneMapping=4;t.AddEquation=100;t.AddOperation=2;t.AdditiveAnimationBlendMode=2501;t.AdditiveBlending=2;t.AlphaFormat=1021;t.AlwaysDepth=1;t.AlwaysStencilFunc=519;t.AmbientLight=xk;t.AmbientLightProbe=$l;t.AnimationClip=dg;t.AnimationLoader=Nl;t.AnimationMixer=rm;t.AnimationObjectGroup=om;t.AnimationUtils=Ll;t.ArcCurve=
Vj;t.ArrayCamera=vj;t.ArrowHelper=Nm;t.Audio=Ik;t.AudioAnalyser=fm;t.AudioContext=Oi;t.AudioListener=cm;t.AudioLoader=Yl;t.AxesHelper=Om;t.BackSide=1;t.BasicDepthPacking=3200;t.BasicShadowMap=0;t.Bone=si;t.BooleanKeyframeTrack=me;t.Box2=zm;t.Box3=pe;t.Box3Helper=Lm;t.BoxBufferGeometry=Qm;t.BoxGeometry=ae;t.BoxHelper=Km;t.BufferAttribute=fc;t.BufferGeometry=Kb;t.BufferGeometryLoader=Bk;t.ByteType=1010;t.Cache=ve;t.Camera=Sg;t.CameraHelper=Jm;t.CanvasTexture=Il;t.CapsuleBufferGeometry=Rm;t.CapsuleGeometry=
dh;t.CatmullRomCurve3=Wj;t.CineonToneMapping=3;t.CircleBufferGeometry=Sm;t.CircleGeometry=eh;t.ClampToEdgeWrapping=1001;t.Clock=Gk;t.Color=gb;t.ColorKeyframeTrack=Xh;t.ColorManagement=Ec;t.CompressedArrayTexture=Hl;t.CompressedTexture=wi;t.CompressedTextureLoader=Ol;t.ConeBufferGeometry=Tm;t.ConeGeometry=fh;t.CubeCamera=rj;t.CubeReflectionMapping=301;t.CubeRefractionMapping=302;t.CubeTexture=Tf;t.CubeTextureLoader=Pl;t.CubeUVReflectionMapping=306;t.CubicBezierCurve=Ai;t.CubicBezierCurve3=Xj;t.CubicInterpolant=
mk;t.CullFaceBack=1;t.CullFaceFront=2;t.CullFaceFrontBack=3;t.CullFaceNone=0;t.Curve=dd;t.CurvePath=Zj;t.CustomBlending=5;t.CustomToneMapping=5;t.CylinderBufferGeometry=Um;t.CylinderGeometry=gf;t.Cylindrical=ym;t.Data3DTexture=Yh;t.DataArrayTexture=lg;t.DataTexture=ef;t.DataTextureLoader=Ql;t.DataUtils={toHalfFloat:function(a){65504<Math.abs(a)&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range.");a=n(a,-65504,65504);Gd.floatView[0]=a;a=Gd.uint32View[0];const b=a>>23&511;return Gd.baseTable[b]+
((a&8388607)>>Gd.shiftTable[b])},fromHalfFloat:function(a){const b=a>>10;Gd.uint32View[0]=Gd.mantissaTable[Gd.offsetTable[b]+(a&1023)]+Gd.exponentTable[b];return Gd.floatView[0]}};t.DecrementStencilOp=7683;t.DecrementWrapStencilOp=34056;t.DefaultLoadingManager=pk;t.DepthFormat=1026;t.DepthStencilFormat=1027;t.DepthTexture=wj;t.DirectionalLight=wk;t.DirectionalLightHelper=Im;t.DiscreteInterpolant=nk;t.DisplayP3ColorSpace="display-p3";t.DodecahedronBufferGeometry=Vm;t.DodecahedronGeometry=gh;t.DoubleSide=
2;t.DstAlphaFactor=206;t.DstColorFactor=208;t.DynamicCopyUsage=35050;t.DynamicDrawUsage=35048;t.DynamicReadUsage=35049;t.EdgesGeometry=ak;t.EllipseCurve=ah;t.EqualDepth=4;t.EqualStencilFunc=514;t.EquirectangularReflectionMapping=303;t.EquirectangularRefractionMapping=304;t.Euler=Mg;t.EventDispatcher=Uc;t.ExtrudeBufferGeometry=Wm;t.ExtrudeGeometry=kh;t.FileLoader=Fd;t.Float16BufferAttribute=rl;t.Float32BufferAttribute=pb;t.Float64BufferAttribute=sl;t.FloatType=1015;t.Fog=pi;t.FogExp2=oi;t.FramebufferTexture=
Gl;t.FrontSide=0;t.Frustum=og;t.GLBufferAttribute=vm;t.GLSL1="100";t.GLSL3="300 es";t.GreaterDepth=6;t.GreaterEqualDepth=5;t.GreaterEqualStencilFunc=518;t.GreaterStencilFunc=516;t.GridHelper=Gm;t.Group=$e;t.HalfFloatType=1016;t.HemisphereLight=qk;t.HemisphereLightHelper=Fm;t.HemisphereLightProbe=Zl;t.IcosahedronBufferGeometry=Xm;t.IcosahedronGeometry=lh;t.ImageBitmapLoader=Xl;t.ImageLoader=eg;t.ImageUtils=zh;t.IncrementStencilOp=7682;t.IncrementWrapStencilOp=34055;t.InstancedBufferAttribute=ff;t.InstancedBufferGeometry=
Ak;t.InstancedInterleavedBuffer=um;t.InstancedMesh=Mj;t.Int16BufferAttribute=pl;t.Int32BufferAttribute=ql;t.Int8BufferAttribute=ml;t.IntType=1013;t.InterleavedBuffer=Vg;t.InterleavedBufferAttribute=af;t.Interpolant=cg;t.InterpolateDiscrete=2300;t.InterpolateLinear=2301;t.InterpolateSmooth=2302;t.InvertStencilOp=5386;t.KeepStencilOp=7680;t.KeyframeTrack=ed;t.LOD=Dj;t.LatheBufferGeometry=Ym;t.LatheGeometry=$f;t.Layers=ng;t.LessDepth=2;t.LessEqualDepth=3;t.LessEqualStencilFunc=515;t.LessStencilFunc=
513;t.Light=Yd;t.LightProbe=sh;t.Line=Wd;t.Line3=Am;t.LineBasicMaterial=Kc;t.LineCurve=ch;t.LineCurve3=Yj;t.LineDashedMaterial=lk;t.LineLoop=Sj;t.LineSegments=od;t.LinearEncoding=3E3;t.LinearFilter=1006;t.LinearInterpolant=Hi;t.LinearMipMapLinearFilter=1008;t.LinearMipMapNearestFilter=1007;t.LinearMipmapLinearFilter=1008;t.LinearMipmapNearestFilter=1007;t.LinearSRGBColorSpace="srgb-linear";t.LinearToneMapping=1;t.Loader=Tc;t.LoaderUtils=Ni;t.LoadingManager=Ii;t.LoopOnce=2200;t.LoopPingPong=2202;t.LoopRepeat=
2201;t.LuminanceAlphaFormat=1025;t.LuminanceFormat=1024;t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2};t.Material=Fc;t.MaterialLoader=Mi;t.MathUtils=Ya;t.Matrix3=hb;t.Matrix4=Fb;t.MaxEquation=104;t.Mesh=xc;t.MeshBasicMaterial=Vd;t.MeshDepthMaterial=Gh;t.MeshDistanceMaterial=Hh;t.MeshLambertMaterial=jk;t.MeshMatcapMaterial=kk;t.MeshNormalMaterial=ik;t.MeshPhongMaterial=gk;t.MeshPhysicalMaterial=fk;t.MeshStandardMaterial=Gi;t.MeshToonMaterial=hk;t.MinEquation=103;t.MirroredRepeatWrapping=
1002;t.MixOperation=1;t.MultiplyBlending=4;t.MultiplyOperation=0;t.NearestFilter=1003;t.NearestMipMapLinearFilter=1005;t.NearestMipMapNearestFilter=1004;t.NearestMipmapLinearFilter=1005;t.NearestMipmapNearestFilter=1004;t.NeverDepth=0;t.NeverStencilFunc=512;t.NoBlending=0;t.NoColorSpace="";t.NoToneMapping=0;t.NormalAnimationBlendMode=2500;t.NormalBlending=1;t.NotEqualDepth=7;t.NotEqualStencilFunc=517;t.NumberKeyframeTrack=Lf;t.Object3D=bc;t.ObjectLoader=Vl;t.ObjectSpaceNormalMap=1;t.OctahedronBufferGeometry=
Zm;t.OctahedronGeometry=ag;t.OneFactor=201;t.OneMinusDstAlphaFactor=207;t.OneMinusDstColorFactor=209;t.OneMinusSrcAlphaFactor=205;t.OneMinusSrcColorFactor=203;t.OrthographicCamera=Ug;t.PCFShadowMap=1;t.PCFSoftShadowMap=2;t.PMREMGenerator=Bh;t.Path=Zf;t.PerspectiveCamera=Dc;t.Plane=Hd;t.PlaneBufferGeometry=$m;t.PlaneGeometry=lf;t.PlaneHelper=Mm;t.PointLight=vk;t.PointLightHelper=Dm;t.Points=Uj;t.PointsMaterial=vi;t.PolarGridHelper=Hm;t.PolyhedronBufferGeometry=an;t.PolyhedronGeometry=Xd;t.PositionalAudio=
em;t.PropertyBinding=$b;t.PropertyMixer=Kk;t.QuadraticBezierCurve=Bi;t.QuadraticBezierCurve3=Ci;t.Quaternion=lb;t.QuaternionKeyframeTrack=Ne;t.QuaternionLinearInterpolant=ok;t.RED_GREEN_RGTC2_Format=36285;t.RED_RGTC1_Format=36283;t.REVISION="150";t.RGBADepthPacking=3201;t.RGBAFormat=1023;t.RGBAIntegerFormat=1033;t.RGBA_ASTC_10x10_Format=37819;t.RGBA_ASTC_10x5_Format=37816;t.RGBA_ASTC_10x6_Format=37817;t.RGBA_ASTC_10x8_Format=37818;t.RGBA_ASTC_12x10_Format=37820;t.RGBA_ASTC_12x12_Format=37821;t.RGBA_ASTC_4x4_Format=
37808;t.RGBA_ASTC_5x4_Format=37809;t.RGBA_ASTC_5x5_Format=37810;t.RGBA_ASTC_6x5_Format=37811;t.RGBA_ASTC_6x6_Format=37812;t.RGBA_ASTC_8x5_Format=37813;t.RGBA_ASTC_8x6_Format=37814;t.RGBA_ASTC_8x8_Format=37815;t.RGBA_BPTC_Format=36492;t.RGBA_ETC2_EAC_Format=37496;t.RGBA_PVRTC_2BPPV1_Format=35843;t.RGBA_PVRTC_4BPPV1_Format=35842;t.RGBA_S3TC_DXT1_Format=33777;t.RGBA_S3TC_DXT3_Format=33778;t.RGBA_S3TC_DXT5_Format=33779;t.RGB_ETC1_Format=36196;t.RGB_ETC2_Format=37492;t.RGB_PVRTC_2BPPV1_Format=35841;t.RGB_PVRTC_4BPPV1_Format=
35840;t.RGB_S3TC_DXT1_Format=33776;t.RGFormat=1030;t.RGIntegerFormat=1031;t.RawShaderMaterial=ek;t.Ray=Qf;t.Raycaster=wm;t.RectAreaLight=yk;t.RedFormat=1028;t.RedIntegerFormat=1029;t.ReinhardToneMapping=2;t.RepeatWrapping=1E3;t.ReplaceStencilOp=7681;t.ReverseSubtractEquation=102;t.RingBufferGeometry=bn;t.RingGeometry=mh;t.SIGNED_RED_GREEN_RGTC2_Format=36286;t.SIGNED_RED_RGTC1_Format=36284;t.SRGBColorSpace="srgb";t.Scene=yj;t.ShaderChunk=Ib;t.ShaderLib=Xc;t.ShaderMaterial=fd;t.ShadowMaterial=dk;t.Shape=
ue;t.ShapeBufferGeometry=cn;t.ShapeGeometry=nh;t.ShapePath=Pm;t.ShapeUtils=Dd;t.ShortType=1011;t.Skeleton=ti;t.SkeletonHelper=Cm;t.SkinnedMesh=Ij;t.Source=oe;t.Sphere=se;t.SphereBufferGeometry=dn;t.SphereGeometry=bg;t.Spherical=xm;t.SphericalHarmonics3=zk;t.SplineCurve=Di;t.SpotLight=tk;t.SpotLightHelper=Bm;t.Sprite=Bj;t.SpriteMaterial=qi;t.SrcAlphaFactor=204;t.SrcAlphaSaturateFactor=210;t.SrcColorFactor=202;t.StaticCopyUsage=35046;t.StaticDrawUsage=35044;t.StaticReadUsage=35045;t.StereoCamera=am;
t.StreamCopyUsage=35042;t.StreamDrawUsage=35040;t.StreamReadUsage=35041;t.StringKeyframeTrack=ne;t.SubtractEquation=101;t.SubtractiveBlending=3;t.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3};t.TangentSpaceNormalMap=0;t.TetrahedronBufferGeometry=en;t.TetrahedronGeometry=oh;t.Texture=rc;t.TextureLoader=Rl;t.TorusBufferGeometry=fn;t.TorusGeometry=ph;t.TorusKnotBufferGeometry=gn;t.TorusKnotGeometry=qh;t.Triangle=Wc;t.TriangleFanDrawMode=2;t.TriangleStripDrawMode=1;t.TrianglesDrawMode=0;t.TubeBufferGeometry=
hn;t.TubeGeometry=rh;t.TwoPassDoubleSide=2;t.UVMapping=300;t.Uint16BufferAttribute=Dh;t.Uint32BufferAttribute=Ch;t.Uint8BufferAttribute=nl;t.Uint8ClampedBufferAttribute=ol;t.Uniform=Lk;t.UniformsGroup=tm;t.UniformsLib=ab;t.UniformsUtils=bj;t.UnsignedByteType=1009;t.UnsignedInt248Type=1020;t.UnsignedIntType=1014;t.UnsignedShort4444Type=1017;t.UnsignedShort5551Type=1018;t.UnsignedShortType=1012;t.VSMShadowMap=3;t.Vector2=za;t.Vector3=aa;t.Vector4=cc;t.VectorKeyframeTrack=Mf;t.VideoTexture=Fl;t.WebGL1Renderer=
xj;t.WebGL3DRenderTarget=cl;t.WebGLArrayRenderTarget=bl;t.WebGLCubeRenderTarget=Ri;t.WebGLMultipleRenderTargets=dl;t.WebGLRenderTarget=Yc;t.WebGLRenderer=Cf;t.WebGLUtils=pg;t.WireframeGeometry=bk;t.WrapAroundEnding=2402;t.ZeroCurvatureEnding=2400;t.ZeroFactor=200;t.ZeroSlopeEnding=2401;t.ZeroStencilOp=0;t._SRGBAFormat=1035;t.sRGBEncoding=3001})};
shadow$provide[3]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Api=void 0;class t{static apply(p){p.set=function(n){const c=this.options||{},e=Object.entries(n).reduce(function(f,[h,k]){c[h]!==k&&(f[h]=k);return f},{});this.options=Object.assign(c,e);this.trigger({type:"change",options:n,changes:e})};p.get=function(){return this.options};p.api=function(n,c){n||(n={});c&&Object.entries(n).forEach(function([e,f]){"function"===typeof f&&(n[e]=(...h)=>f(...h,c))});n.set=this.set.bind(this);
n.get=this.get.bind(this);return n}}}m.Api=t};
shadow$provide[4]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Binder=void 0;var t=v(2);class p{static bind(n,c){return function(e,f){f.__binds||(f.__binds=[]);let h=n;Array.isArray(e)&&(h=e[0],e=e[1]);var k=/^([^.:]*(?:\.[^.:]+)*)?(?::(.*))?$/.exec(e);const g=k[1].split(/\./g),r=g.pop(),u=k[2]||r;k=g.shift();let w={this:f}[k]||c[k]||n[k]||h;for(;w&&(e=g.shift());)w=w[e];if(w&&(w.on||w.addEventListener)){const x=function(B){f[u]&&f[u](B,n)};p._polyfill(w,["addEventListener",
"on"],function(B){w[B](r,x)});f.__binds.push({target:w,name:r,callback:x});return x}throw"Cannot bind '"+e+"' in "+this.__name;}}static unbind(){return function(n){n.__binds&&(n.__binds.forEach(function(c){p._polyfill(c.target,["removeEventListener","off"],function(e){c.target[e](c.name,c.callback)})}.bind(this)),n.__binds=[])}}static apply(n){n.trigger=p._trigger;n.triggerOnce=p._triggerOnce;n.hasEventListener=t.EventDispatcher.prototype.hasEventListener;n.addEventListener=t.EventDispatcher.prototype.addEventListener;
n.removeEventListener=t.EventDispatcher.prototype.removeEventListener;n.on=n.addEventListener;n.off=n.removeEventListener;n.dispatchEvent=n.trigger}static _triggerOnce(n){this.trigger(n);this._listeners&&delete this._listeners[n.type]}static _trigger(n){if(void 0!==this._listeners){var c=this._listeners[n.type];if(void 0!==c){c=c.slice();const e=c.length;n.target=this;for(let f=0;f<e;f++)c[f].call(this,n,this)}}}static _polyfill(n,c,e){c.map(function(f){return n.method});c.length&&e(c[0])}}m.Binder=
p};
shadow$provide[5]=function(z,v,J,m){function t(c){return c&&"string"===typeof c.valueOf()}Object.defineProperty(m,"__esModule",{value:!0});m.Bootstrap=void 0;z=v(3);v=v(4);const p=(c,e)=>{let f=0;for(const h of c){if(!1===e(h,f,c))break;f++}};class n{static initClass(){this.Plugins={};this.Aliases={}}static registerPlugin(c,e){const f=function(h){n.Plugin.call(this,h);this.__name=c};f.prototype=Object.assign(new n.Plugin,e);this.Plugins[c]=f}static unregisterPlugin(c){delete this.Plugins[c]}static registerAlias(c,
e){this.Aliases[c]=e}static unregisterAlias(c){delete this.Aliases[c]}constructor(c){if(c){var e=[].slice.apply(arguments);c={};if(e[0]instanceof Node){const f=e[0];e=e.slice(1);c.element=f}t(e[0])?c.plugins=e:Array.isArray(e[0])?c.plugins=e[0]:e[0]&&(c=Object.assign({},e[0],c))}this.__options=Object.assign({},{init:!0,element:document.body,plugins:["core"],aliases:{},plugindb:n.Plugins||{},aliasdb:n.Aliases||{}},c||{});this.__destroyed=this.__inited=!1;this.__installed=[];e=this.__options.element;
e===""+e&&(e=document.querySelector(e));this.plugins={};this.element=e;this.trigger=this.trigger.bind(this);this.frame=this.frame.bind(this);this.events=["pre","update","render","post"].map(function(f){return{type:f}});this.__options.init&&this.init()}init(){this.__inited||(this.__inited=!0,this.install(this.__options.plugins))}destroy(){this.__inited&&!this.__destroyed&&(this.__destroyed=!0,this.trigger({type:"destroy"}),this.uninstall())}frame(){this.events.map(this.trigger)}resolve(c){function e(g,
r,u){if(256<=u)throw"Plug-in alias recursion detected.";g=g.filter(k);g.forEach(function(w){const x=h[w];x?r=r.concat(e(x,[],u+1)):r.push(w)});return r}c=Array.isArray(c)?c:[c];const f=this.__options,h=Object.assign({},f.aliasdb,f.aliases),k=function(g){g=g.split(":");if(!g[1])return!0;h[g[0]]=[g[1]];return!1};c=c.filter(k);Object.entries(h).forEach(function([g,r]){h[g]=Array.isArray(r)?r:[r]});return e(c,[],0)}install(c){c=Array.isArray(c)?c:[c];c=this.resolve(c);p(c,e=>this.__install(e));this.__ready()}uninstall(c){c&&
(c=Array.isArray(c)?c:[c],c=this.resolve(c));(c||this.__installed).reverse().forEach(e=>this.__uninstall(e))}__install(c){var e=this.__options.plugindb[c];if(!e)throw"[three.install] Cannot install. '"+c+"' is not registered.";if(this.plugins[c])return console.warn("[three.install] "+c+" is already installed.");e=new e(this.__options[c]||{},c);this.plugins[c]=e;c=e.install(this);this.__installed.push(e);this.trigger({type:"install",plugin:e});return c}__uninstall(c){const e=t(c)?this.plugins[c]:c;
e?(c=e.__name,e.uninstall(this),this.__installed=this.__installed.filter(f=>f!==e),delete this.plugins[c],this.trigger({type:"uninstall",plugin:e})):console.warn("[three.uninstall] "+c+"' is not installed.")}__ready(){this.triggerOnce({type:"ready"})}}m.Bootstrap=n;n.initClass();n.Plugin=function(c){this.options=Object.assign({},this.defaults,c||{})};n.Plugin.prototype={listen:[],defaults:{},install:function(c){},uninstall:function(c){}};v.Binder.apply(n.prototype);v.Binder.apply(n.Plugin.prototype);
z.Api.apply(n.Plugin.prototype)};
shadow$provide[6]=function(z,v,J,m){v(5).Bootstrap.registerPlugin("splash",{defaults:{color:"mono",fancy:!0},listen:["ready","mathbox/init:init","mathbox/progress:progress","mathbox/destroy:destroy"],uninstall(){return this.destroy()},ready(t,p){if(p.MathBox&&!this.div)return this.init(t,p)},init(t,p){this.destroy();({color:t}=this.options);var n=`\
<div class="mathbox-loader mathbox-splash-${t}">
  <div class="mathbox-logo">
    <div> <div></div><div></div><div></div> </div>
    <div> <div></div><div></div><div></div> </div>
  </div>
  <div class="mathbox-progress"><div></div></div>
</div>\
`;this.div=t=document.createElement("div");t.innerHTML=n;p.element.appendChild(t);n=2*Math.random()-1;const c=2*Math.random()-1,e=2*Math.random()-1,f=1/Math.sqrt(n*n+c*c+e*e);this.loader=t.querySelector(".mathbox-loader");this.bar=t.querySelector(".mathbox-progress \x3e div");this.gyro=t.querySelectorAll(".mathbox-logo \x3e div");this.transforms=["rotateZ(22deg) rotateX(24deg) rotateY(30deg)","rotateZ(11deg) rotateX(12deg) rotateY(15deg) scale3d(.6, .6, .6)"];this.random=[n*f,c*f,e*f];this.start=
p.Time.now;return this.timer=null},progress(t,p){if(this.div){var {current:n,total:c}=t;t=n<c;clearTimeout(this.timer);t?(this.loader.classList.remove("mathbox-exit"),this.loader.style.display="block"):(this.loader.classList.add("mathbox-exit"),this.timer=setTimeout(()=>this.loader.style.display="none",150));this.bar.style.width=n<c?.1*Math.round(1E3*n/c)+"%":"100%";if(this.options.fancy){const e=this.random,f=Math.max(0,Math.min(1,p.Time.now-this.start)),h=function(k,g){null==g&&(g=0);return k.replace(/(-?[0-9.e]+)deg/g,
(r,u)=>+u+e[g++]*f*p.Time.step*60+"deg")};return(()=>{const k=[];for(let g=0;g<this.gyro.length;g++){let r;const u=this.gyro[g];this.transforms[g]=r=h(this.transforms[g]);k.push(u.style.transform=u.style.WebkitTransform=r)}return k})()}}},destroy(){null!=this.div&&this.div.remove();return this.div=null}})};
shadow$provide[7]=function(z,v,J,m){z=v(5);z.Bootstrap.registerAlias("empty","fallback bind renderer size fill loop time".split(" "));z.Bootstrap.registerAlias("core",["empty","scene","camera","render","warmup"]);z.Bootstrap.registerAlias("VR",["core","cursor","fullscreen","render:vr"])};
shadow$provide[8]=function(z,v,J,m){z=v(5);var t=v(4);z.Bootstrap.registerPlugin("bind",{install:function(p){p.bind=t.Binder.bind(p,{three:p,window});p.unbind=t.Binder.unbind(p);p.bind("install:bind",this);p.bind("uninstall:unbind",this)},uninstall:function(p){p.unbind(this);delete p.bind;delete p.unbind},bind:function(p,n){const c=p.plugin;(p=c.listen)&&p.forEach(function(e){n.bind(e,c)})},unbind:function(p,n){n.unbind(p.plugin)}})};
shadow$provide[9]=function(z,v,J,m){var t=v(2);v(5).Bootstrap.registerPlugin("camera",{defaults:{near:.01,far:1E4,type:"perspective",fov:60,aspect:null,left:-1,right:1,bottom:-1,top:1,klass:null,parameters:null},listen:["resize","this.change"],install:function(p){p.Camera=this.api();p.camera=null;this.aspect=1;this.change({},p)},uninstall:function(p){delete p.Camera;delete p.camera},change:function(p,n){const c=this.options,e=n.camera;if(!n.camera||p.changes.type||p.changes.klass)p=c.klass||{perspective:t.PerspectiveCamera,
orthographic:t.OrthographicCamera}[c.type]||t.Camera,n.camera=c.parameters?new p(c.parameters):new p;Object.entries(c).forEach(function([f]){Object.prototype.hasOwnProperty.call(n.camera,f)&&(n.camera[f]=c[f])}.bind(this));this.update(n);e===n.camera||n.trigger({type:"camera",camera:n.camera})},resize:function(p,n){this.aspect=p.viewWidth/Math.max(1,p.viewHeight);this.update(n)},update:function(p){p.camera.aspect=this.options.aspect||this.aspect;p.camera.updateProjectionMatrix()}})};
shadow$provide[10]=function(z,v,J,m){v(5).Bootstrap.registerPlugin("fallback",{defaults:{force:!1,fill:!0,begin:'\x3cdiv class\x3d"threestrap-fallback" style\x3d"display: table; width: 100%; height: 100%;box-sizing: border-box; border: 1px dashed rgba(0, 0, 0, .25);"\x3e\x3cdiv style\x3d"display: table-cell; padding: 10px; vertical-align: middle; text-align: center;"\x3e',end:"\x3c/div\x3e\x3c/div\x3e",message:'\x3cbig\x3e\x3cstrong\x3eThis example requires WebGL\x3c/strong\x3e\x3c/big\x3e\x3cbr\x3eVisit \x3ca target\x3d"_blank" href\x3d"http://get.webgl.org/"\x3eget.webgl.org\x3c/a\x3e for more info\x3c/a\x3e'},
install:function(t){try{var p=document.createElement("canvas");var n=p.getContext("webgl")||p.getContext("experimental-webgl");if(!n||this.options.force)throw"WebGL unavailable.";t.fallback=!1}catch(c){p=this.options.message;n=this.options.begin;const e=this.options.end,f=this.options.fill,h=document.createElement("div");h.innerHTML=n+p+e;for(this.children=[];0<h.childNodes.length;)this.children.push(h.firstChild),t.element.appendChild(h.firstChild);f&&t.install("fill");this.div=h;t.fallback=!0;return!1}},
uninstall:function(t){this.children&&(this.children.forEach(function(p){p.parentNode.removeChild(p)}),this.children=null);delete t.fallback}})};
shadow$provide[11]=function(z,v,J,m){v(5).Bootstrap.registerPlugin("fill",{defaults:{block:!0,body:!0,layout:!0},install:function(t){function p(c){c=c.style.height;return"auto"==c||""==c}function n(c){c.style.height="100%";c.style.margin=0;c.style.padding=0;return c}this.options.body&&t.element==document.body&&(this.applied=[t.element,document.documentElement].filter(p).map(n));this.options.block&&t.canvas&&(t.canvas.style.display="block",this.block=!0);this.options.layout&&t.element&&"static"==window.getComputedStyle(t.element).position&&
(t.element.style.position="relative",this.layout=!0)},uninstall:function(t){this.applied&&(this.applied.map(function(p){p.style.height="";p.style.margin="";p.style.padding="";return p}),delete this.applied);this.block&&t.canvas&&(t.canvas.style.display="",delete this.block);this.layout&&t.element&&(t.element.style.position="",delete this.layout)},change:function(t){this.uninstall(t);this.install(t)}})};
shadow$provide[12]=function(z,v,J,m){v(5).Bootstrap.registerPlugin("loop",{defaults:{start:!0,each:1},listen:["ready"],install:function(t){this.running=!1;this.lastRequestId=null;t.Loop=this.api({start:this.start.bind(this),stop:this.stop.bind(this),running:!1,window},t);this.events=["pre","update","render","post"].map(function(p){return{type:p}})},uninstall:function(t){this.stop(t)},ready:function(t,p){this.options.start&&this.start(p)},start:function(t){if(!this.running){t.Loop.running=this.running=
!0;var p=t.trigger.bind(t),n=function(){this.running&&(this.lastRequestId=t.Loop.window.requestAnimationFrame(n),this.events.map(p))}.bind(this);this.lastRequestId=t.Loop.window.requestAnimationFrame(n);t.trigger({type:"start"})}},stop:function(t){this.running&&(t.Loop.running=this.running=!1,t.Loop.window.cancelAnimationFrame(this.lastRequestId),this.lastRequestId=null,t.trigger({type:"stop"}))}})};
shadow$provide[13]=function(z,v,J,m){v(5).Bootstrap.registerPlugin("render",{listen:["render"],render:function(t,p){p.scene&&p.camera&&p.renderer.render(p.scene,p.camera)}})};
shadow$provide[14]=function(z,v,J,m){z=v(2);v(5).Bootstrap.registerPlugin("renderer",{defaults:{klass:z.WebGL1Renderer,parameters:{depth:!0,stencil:!0,preserveDrawingBuffer:!0,antialias:!0}},listen:["resize"],install:function(t){const p=t.renderer=new this.options.klass(this.options.parameters);t.canvas=p.domElement;t.element.appendChild(p.domElement)},uninstall:function(t){t.element.removeChild(t.renderer.domElement);delete t.renderer;delete t.canvas},resize:function(t,p){p=p.renderer;const n=p.domElement;
n&&"CANVAS"==n.tagName?p.setSize(t.renderWidth,t.renderHeight,!1):(p.setRenderSize&&p.setRenderSize(t.renderWidth,t.renderHeight),p.setSize(t.viewWidth,t.viewHeight,!1))}})};
shadow$provide[15]=function(z,v,J,m){var t=v(2);v(5).Bootstrap.registerPlugin("scene",{install:function(p){p.scene=new t.Scene},uninstall:function(p){delete p.scene}})};
shadow$provide[16]=function(z,v,J,m){v(5).Bootstrap.registerPlugin("size",{defaults:{width:null,height:null,aspect:null,scale:1,maxRenderWidth:Infinity,maxRenderHeight:Infinity,devicePixelRatio:!0},listen:["window.resize:queue","element.resize:queue","this.change:queue","ready:resize","pre:pre"],install:function(t){t.Size=this.api({renderWidth:0,renderHeight:0,viewWidth:0,viewHeight:0});this.resized=!1},uninstall:function(t){delete t.Size},queue:function(t,p){this.resized=!0},pre:function(t,p){this.resized&&
(this.resized=!1,this.resize(t,p))},resize:function(t,p){var n=this.options,c=p.element,e=p.renderer,f,h;let k,g=0,r=0;t=f=void 0===n.width||null==n.width?c.offsetWidth||c.innerWidth||0:n.width;c=h=void 0===n.height||null==n.height?c.offsetHeight||c.innerHeight||0:n.height;k=t/c;n.aspect&&(n.aspect>k?(c=Math.round(t/n.aspect),r=Math.floor((h-c)/2)):(t=Math.round(c*n.aspect),g=Math.floor((f-t)/2)),k=t/c);h=1;n.devicePixelRatio&&"undefined"!=typeof window&&(h=window.devicePixelRatio||1);f=Math.round(Math.min(t*
h*n.scale,n.maxRenderWidth));n=Math.round(Math.min(c*h*n.scale,n.maxRenderHeight));f/n>k?f=Math.round(n*k):n=Math.round(f/k);h=n/c;e=e.domElement.style;e.width=t+"px";e.height=c+"px";e.marginLeft=g+"px";e.marginTop=r+"px";Object.assign(p.Size,{renderWidth:f,renderHeight:n,viewWidth:t,viewHeight:c,aspect:k,pixelRatio:h});p.trigger({type:"resize",renderWidth:f,renderHeight:n,viewWidth:t,viewHeight:c,aspect:k,pixelRatio:h})}})};
shadow$provide[17]=function(z,v,J,m){v(5).Bootstrap.registerPlugin("time",{defaults:{speed:1,warmup:0,timeout:1},listen:["pre:tick","this.change"],now:function(){return+new Date/1E3},install:function(t){t.Time=this.api({now:this.now(),clock:0,step:1/60,frames:0,time:0,delta:1/60,average:0,fps:0});this.clock=this.time=this.last=0;this.wait=this.options.warmup;this.timeStart=this.clockStart=0},tick:function(t,p){t=this.options.speed;const n=this.options.timeout;p=p.Time;const c=p.now=this.now();var e=
this.last;let f=this.time,h=this.clock;if(e){e=p.delta=c-e;const k=p.average||e;e>n&&(e=0);t*=e;f+=e;h+=t;0<p.frames&&(p.average=k+.1*(e-k),p.fps=1/k);p.step=t;p.clock=h-this.clockStart;p.time=f-this.timeStart;p.frames++;0<this.wait--&&(this.clockStart=h,this.timeStart=f,p.clock=0,p.step=1E-100)}this.last=c;this.clock=h;this.time=f},uninstall:function(t){delete t.Time}})};
shadow$provide[18]=function(z,v,J,m){v(5).Bootstrap.registerPlugin("warmup",{defaults:{delay:2},listen:["ready","post"],ready:function(t,p){p.renderer.domElement.style.visibility="hidden";this.frame=0;this.hidden=!0},post:function(t,p){this.hidden&&this.frame>=this.options.delay&&(p.renderer.domElement.style.visibility="visible",this.hidden=!1);this.frame++}})};
shadow$provide[19]=function(z,v,J,m){v(8);v(9);v(10);v(11);v(12);v(13);v(14);v(15);v(16);v(17);v(18)};
shadow$provide[20]=function(z,v,J,m){var t=v(2);v(5).Bootstrap.registerPlugin("controls",{listen:["update","resize","camera","this.change"],defaults:{klass:null,parameters:{}},install:function(p){if(!this.options.klass)throw"Must provide class for `controls.klass`";p.controls=null;this._camera=p.camera||new t.PerspectiveCamera;this.change(null,p)},uninstall:function(p){delete p.controls},change:function(p,n){if(this.options.klass){if(!p||p.changes.klass)n.controls=new this.options.klass(this._camera,
n.renderer.domElement);Object.assign(n.controls,this.options.parameters)}else n.controls=null},update:function(p,n){p=n.Time&&n.Time.delta||1/60;const c=n.VR&&n.VR.state;n.controls.vr&&n.controls.vr(c);n.controls.update(p)},camera:function(p,n){n.controls.object=this._camera=p.camera},resize:function(p,n){n.controls.handleResize&&n.controls.handleResize()}})};
shadow$provide[21]=function(z,v,J,m){v(5).Bootstrap.registerPlugin("cursor",{listen:"update this.change install:change uninstall:change element.mousemove vr".split(" "),defaults:{cursor:null,hide:!1,timeout:3},install:function(t){this.timeout=this.options.timeout;this.element=t.element;this.change(null,t)},uninstall:function(t){delete t.controls},change:function(t,p){this.applyCursor(p)},mousemove:function(t,p){this.options.hide&&(this.applyCursor(p),this.timeout=+this.options.timeout||0)},update:function(t,
p){t=p.Time&&p.Time.delta||1/60;this.options.hide&&(this.timeout-=t,0>this.timeout&&this.applyCursor(p,"none"))},vr:function(t,p){this.hide=t.active&&!t.hmd.fake;this.applyCursor(p)},applyCursor:function(t,p){t=t.controls?"move":"";p=p||this.options.cursor||t;this.hide&&(p="none");this.cursor!=p&&(this.element.style.cursor=p)}})};
shadow$provide[22]=function(z,v,J,m){v(5).Bootstrap.registerPlugin("fullscreen",{defaults:{key:"f"},listen:["ready","update"],install:function(t){t.Fullscreen=this.api({active:!1,toggle:this.toggle.bind(this)},t)},uninstall:function(t){delete t.Fullscreen},ready:function(t,p){document.body.addEventListener("keypress",function(n){this.options.key&&n.charCode==this.options.key.charCodeAt(0)&&this.toggle(p)}.bind(this));t=function(){const n=!!document.fullscreenElement||!!document.mozFullScreenElement||
!!document.webkitFullscreenElement||!!document.msFullscreenElement;p.Fullscreen.active=this.active=n;p.trigger({type:"fullscreen",active:n})}.bind(this);document.addEventListener("fullscreenchange",t,!1);document.addEventListener("webkitfullscreenchange",t,!1);document.addEventListener("mozfullscreenchange",t,!1)},toggle:function(t){const p=t.canvas;t=t.VR&&t.VR.active?{vrDisplay:t.VR.hmd}:{};this.active?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():
document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen&&document.mozCancelFullScreen():p.requestFullScreen?p.requestFullScreen(t):p.msRequestFullScreen?p.msRequestFullscreen(t):p.webkitRequestFullscreen?p.webkitRequestFullscreen(t):p.mozRequestFullScreen&&p.mozRequestFullScreen(t)}})};
shadow$provide[23]=function(z,v,J,m){(function(t,p){"object"===typeof m&&"undefined"!==typeof J?J.exports=p():"function"===typeof define&&define.amd?define(p):t.Stats=p()})(this,function(){var t=function(){function p(w){e.appendChild(w.dom);return w}function n(w){for(var x=0;x<e.children.length;x++)e.children[x].style.display=x===w?"block":"none";c=w}var c=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000";e.addEventListener("click",
function(w){w.preventDefault();n(++c%e.children.length)},!1);var f=(performance||Date).now(),h=f,k=0,g=p(new t.Panel("FPS","#0ff","#002")),r=p(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=p(new t.Panel("MB","#f08","#201"));n(0);return{REVISION:16,dom:e,addPanel:p,showPanel:n,begin:function(){f=(performance||Date).now()},end:function(){k++;var w=(performance||Date).now();r.update(w-f,200);if(w>h+1E3&&(g.update(1E3*k/(w-h),100),h=w,k=0,u)){var x=performance.memory;
u.update(x.usedJSHeapSize/1048576,x.jsHeapSizeLimit/1048576)}return w},update:function(){f=this.end()},domElement:e,setMode:n}};t.Panel=function(p,n,c){var e=Infinity,f=0,h=Math.round,k=h(window.devicePixelRatio||1),g=80*k,r=48*k,u=3*k,w=2*k,x=3*k,B=15*k,E=74*k,C=30*k,H=document.createElement("canvas");H.width=g;H.height=r;H.style.cssText="width:80px;height:48px";var I=H.getContext("2d");I.font="bold "+9*k+"px Helvetica,Arial,sans-serif";I.textBaseline="top";I.fillStyle=c;I.fillRect(0,0,g,r);I.fillStyle=
n;I.fillText(p,u,w);I.fillRect(x,B,E,C);I.fillStyle=c;I.globalAlpha=.9;I.fillRect(x,B,E,C);return{dom:H,update:function(K,O){e=Math.min(e,K);f=Math.max(f,K);I.fillStyle=c;I.globalAlpha=1;I.fillRect(0,0,g,B);I.fillStyle=n;I.fillText(h(K)+" "+p+" ("+h(e)+"-"+h(f)+")",u,w);I.drawImage(H,x+k,B,E-k,C,x,B,E-k,C);I.fillRect(x+E-k,B,k,C);I.fillStyle=c;I.globalAlpha=.9;I.fillRect(x+E-k,B,k,h((1-K/O)*C))}}};return t})};
shadow$provide[24]=function(z,v,J,m){var t=function(p){return p&&p.__esModule?p:{default:p}}(v(23));v(5).Bootstrap.registerPlugin("stats",{listen:["pre","post"],install:function(p){const n=this.stats=new t.default,c=n.domElement.style;c.position="absolute";c.top=c.left=0;p.element.appendChild(n.domElement);p.stats=n},uninstall:function(p){this.stats.domElement.remove();delete p.stats},pre:function(p,n){this.stats.begin()},post:function(p,n){this.stats.end()}})};
shadow$provide[25]=function(z,v,J,m){v(5).Bootstrap.registerPlugin("ui",{defaults:{theme:"white",style:".threestrap-ui { position: absolute; bottom: 5px; right: 5px; float: left; }.threestrap-ui button { border: 0; background: none;  vertical-align: middle; font-weight: bold; } .threestrap-ui .glyphicon { top: 2px; font-weight: bold; } @media (max-width: 640px) { .threestrap-ui button { font-size: 120% } }.threestrap-white button { color: #fff; text-shadow: 0 1px 1px rgba(0, 0, 0, 1), 0 1px 3px rgba(0, 0, 0, 1); }.threestrap-black button { color: #000; text-shadow: 0 0px 1px rgba(255, 255, 255, 1), 0 0px 2px rgba(255, 255, 255, 1), 0 0px 2px rgba(255, 255, 255, 1) }"},
listen:["fullscreen"],markup:function(t,p,n){let c="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css";location.href.match(/^file:\/\//)&&(c="http://"+c);const e=[];t.Fullscreen&&e.push('\x3cbutton class\x3d"fullscreen" title\x3d"Full Screen"\x3e\x3cspan class\x3d"glyphicon glyphicon-fullscreen"\x3e\x3c/span\x3e\x3c/button\x3e');t.VR&&e.push('\x3cbutton class\x3d"vr" title\x3d"VR Headset"\x3eVR\x3c/button\x3e');return'\x3cstyle type\x3d"text/css"\x3e@import url("'+c+'"); '+n+
'\x3c/style\x3e\x3cdiv class\x3d"threestrap-ui threestrap-'+p+'"\x3e'+e.join("\n")+"\x3c/div\x3e"},install:function(t){var p=this.ui=document.createElement("div");p.innerHTML=this.markup(t,this.options.theme,this.options.style);document.body.appendChild(p);const n=this.ui.fullscreen=p.querySelector("button.fullscreen");n&&t.bind([n,"click:goFullscreen"],this);(p=this.ui.vr=p.querySelector("button.vr"))&&t.VR&&(t.VR.set({mode:"2d"}),t.bind([p,"click:goVR"],this))},fullscreen:function(t,p){this.ui.style.display=
t.active?"none":"block";t.active||p.VR&&p.VR.set({mode:"2d"})},goFullscreen:function(t,p){p.Fullscreen&&p.Fullscreen.toggle()},goVR:function(t,p){p.VR&&(p.VR.set({mode:"auto"}),p.Fullscreen.toggle())},uninstall:function(t){document.body.removeChild(this.ui)}})};
shadow$provide[26]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.VRRenderer=void 0;var t=v(2);class p{constructor(n,c){this.renderer=n;this.right=new t.Vector3;this.cameraLeft=new t.PerspectiveCamera;this.cameraRight=new t.PerspectiveCamera;n=c.getEyeTranslation("left");this.halfIPD=(new t.Vector3(n.x,n.y,n.z)).length();this.fovLeft=c.getRecommendedEyeFieldOfView("left");this.fovRight=c.getRecommendedEyeFieldOfView("right")}FovToNDCScaleOffset(n){const c=2/(n.leftTan+n.rightTan),
e=2/(n.upTan+n.downTan);return{scale:[c,e],offset:[(n.leftTan-n.rightTan)*c*.5,(n.upTan-n.downTan)*e*.5]}}FovPortToProjection(n,c,e,f,h){f=void 0===f?.01:f;h=void 0===h?1E4:h;e=void 0===e||e?-1:1;const k=n.elements;c=this.FovToNDCScaleOffset(c);k[0]=c.scale[0];k[1]=0;k[2]=c.offset[0]*e;k[3]=0;k[4]=0;k[5]=c.scale[1];k[6]=-c.offset[1]*e;k[7]=0;k[8]=0;k[9]=0;k[10]=h/(f-h)*-e;k[11]=h*f/(f-h);k[12]=0;k[13]=0;k[14]=e;k[15]=0;n.transpose()}FovToProjection(n,c,e,f,h){return this.FovPortToProjection(n,{upTan:Math.tan(c.upDegrees*
Math.PI/180),downTan:Math.tan(c.downDegrees*Math.PI/180),leftTan:Math.tan(c.leftDegrees*Math.PI/180),rightTan:Math.tan(c.rightDegrees*Math.PI/180)},e,f,h)}render(n,c){this.FovToProjection(this.cameraLeft.projectionMatrix,this.fovLeft,!0,c.near,c.far);this.FovToProjection(this.cameraRight.projectionMatrix,this.fovRight,!0,c.near,c.far);this.right.set(this.halfIPD,0,0);this.right.applyQuaternion(c.quaternion);this.cameraLeft.position.copy(c.position).sub(this.right);this.cameraRight.position.copy(c.position).add(this.right);
this.cameraLeft.quaternion.copy(c.quaternion);this.cameraRight.quaternion.copy(c.quaternion);var e=this.renderer.devicePixelRatio||1;c=this.renderer.domElement.width/2/e;e=this.renderer.domElement.height/e;this.renderer.enableScissorTest(!0);this.renderer.setViewport(0,0,c,e);this.renderer.setScissor(0,0,c,e);this.renderer.render(n,this.cameraLeft);this.renderer.setViewport(c,0,c,e);this.renderer.setScissor(c,0,c,e);this.renderer.render(n,this.cameraRight)}}m.VRRenderer=p};
shadow$provide[27]=function(z,v,J,m){z=v(5);var t=v(26);z.Bootstrap.registerPlugin("vr",{defaults:{mode:"auto",device:null,fov:80},listen:["window.load","pre","render","resize","this.change"],install:function(p){p.VR=this.api({active:!1,devices:[],hmd:null,sensor:null,renderer:null,state:null},p)},uninstall:function(p){delete p.VR},mocks:function(p,n,c){return[{fake:!0,force:1,deviceId:"emu",deviceName:"Emulated",getEyeTranslation:function(e){return{left:{x:-.03,y:0,z:0},right:{x:.03,y:0,z:0}}[e]},
getRecommendedEyeFieldOfView:function(e){var f=p.camera;const h=(n||f&&f.fov||c)/2;f=180*Math.atan(Math.tan(h*Math.PI/180)*(f&&f.aspect||16/9)/2)/Math.PI;return{left:{rightDegrees:f,leftDegrees:f,downDegrees:h,upDegrees:h},right:{rightDegrees:f,leftDegrees:f,downDegrees:h,upDegrees:h}}[e]}},{force:2,getState:function(){return{}}}]},load:function(p,n){p=function(c){this.callback(c,n)}.bind(this);navigator.getVRDevices?navigator.getVRDevices().then(p):navigator.mozGetVRDevices?navigator.mozGetVRDevices(p):
(console.warn("No native VR support detected."),p(this.mocks(n,this.options.fov,this.defaults.fov),n))},callback:function(p,n){let c,e;var f=window.HMDVRDevice||function(){};const h=window.PositionSensorVRDevice||function(){};p=n.VR.devices=p||n.VR.devices;var k=this.options.device;let g;for(let r=0;r<p.length;++r)if(g=p[r],(1==g.force||g instanceof f)&&(!k||k==g.deviceId)){c=g;break}if(c){for(k=0;k<p.length;++k)if(f=p[k],2==f.force||f instanceof h&&f.hardwareUnitId==c.hardwareUnitId){e=f;break}this.hookup(c,
e,n)}},hookup:function(p,n,c){t.VRRenderer||console.log("VRRenderer not found");this.renderer=new (t.VRRenderer||function(){})(c.renderer,p);this.hmd=p;this.sensor=n;c.VR.renderer=this.renderer;c.VR.hmd=p;c.VR.sensor=n;console.log("VRRenderer",p.deviceName)},change:function(p,n){p.changes.device&&this.callback(null,n);this.pre(p,n)},pre:function(p,n){p=this.active;const c=this.active=this.renderer&&"2d"!=this.options.mode;if((n.VR.active=c)&&this.sensor){const e=this.sensor.getState();n.VR.state=
e}else n.VR.state=null;p!=this.active&&n.trigger({type:"vr",active:c,hmd:this.hmd,sensor:this.sensor})},resize:function(p,n){this.active&&this.renderer.initialize()},render:function(p,n){if(n.scene&&n.camera){p=this.active?this.renderer:n.renderer;if(this.last!=p&&p==n.renderer){var c=p.getPixelRatio();const e=p.domElement.width/c;c=p.domElement.height/c;p.setScissorTest(!1);p.setViewport(0,0,e,c)}this.last=p;p.render(n.scene,n.camera)}}})};
shadow$provide[28]=function(z,v,J,m){v(20);v(21);v(22);v(24);v(25);v(27)};
shadow$provide[29]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.VRControls=void 0;var t=v(2);class p{constructor(n,c){function e(f){this.vrDisplays=f;0<f.length?this.vrDisplay=f[0]:c&&c("VR input not available.")}this.object=n;this.standingMatrix=new t.Matrix4;this.frameData=null;"VRFrameData"in window&&(this.frameData=new VRFrameData);navigator.getVRDisplays&&navigator.getVRDisplays().then(e).catch(function(){console.warn("VRControls: Unable to get VR Displays")});this.scale=
1;this.standing=!1;this.userHeight=1.6}getVRDisplay(){return this.vrDisplay}setVRDisplay(n){this.vrDisplay=n}getVRDisplays(){console.warn("VRControls: getVRDisplays() is being deprecated.");return this.vrDisplays}getStandingMatrix(){return this.standingMatrix}update(){if(this.vrDisplay){let n;this.vrDisplay.getFrameData?(this.vrDisplay.getFrameData(this.frameData),n=this.frameData.pose):this.vrDisplay.getPose&&(n=this.vrDisplay.getPose());null!==n.orientation&&this.object.quaternion.fromArray(n.orientation);
null!==n.position?this.object.position.fromArray(n.position):this.object.position.set(0,0,0);this.standing&&(this.vrDisplay.stageParameters?(this.object.updateMatrix(),this.standingMatrix.fromArray(this.vrDisplay.stageParameters.sittingToStandingTransform),this.object.applyMatrix(this.standingMatrix)):this.object.position.setY(this.object.position.y+this.userHeight));this.object.position.multiplyScalar(this.scale)}}dispose(){this.vrDisplay=null}}m.VRControls=p};
shadow$provide[30]=function(z,v,J,m){v(29)};
shadow$provide[31]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.MultiRenderer=void 0;var t=v(2);class p{constructor(n){console.log("MultiRenderer",t.REVISION);this.domElement=document.createElement("div");this.domElement.style.position="relative";this.renderers=[];this._renderSizeSet=!1;const c=n.renderers||[];n=n.parameters||[];for(let e=0;e<c.length;e++){const f=new c[e](n[e]);f.domElement.style.position="absolute";f.domElement.style.top="0px";f.domElement.style.left="0px";
this.domElement.appendChild(f.domElement);this.renderers.push(f)}}setSize(n,c){this.domElement.style.width=n+"px";this.domElement.style.height=c+"px";for(let e=0;e<this.renderers.length;e++){const f=this.renderers[e],h=f.domElement;(!this._renderSizeSet||h&&"CANVAS"!==h.tagName)&&f.setSize(n,c);h.style.width=n+"px";h.style.height=c+"px"}}setRenderSize(n,c){this._renderSizeSet=!0;for(let e=0;e<this.renderers.length;e++){const f=this.renderers[e],h=f.domElement;h&&"CANVAS"===h.tagName&&f.setSize(n,
c,!1)}}render(n,c){for(let e=0;e<this.renderers.length;e++)this.renderers[e].render(n,c)}}m.MultiRenderer=p};
shadow$provide[32]=function(z,v,J,m){v(31);v(26)};
shadow$provide[33]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});Object.defineProperty(m,"Api",{enumerable:!0,get:function(){return t.Api}});Object.defineProperty(m,"Binder",{enumerable:!0,get:function(){return p.Binder}});Object.defineProperty(m,"Bootstrap",{enumerable:!0,get:function(){return n.Bootstrap}});Object.defineProperty(m,"VRControls",{enumerable:!0,get:function(){return c.VRControls}});Object.defineProperty(m,"MultiRenderer",{enumerable:!0,get:function(){return e.MultiRenderer}});
Object.defineProperty(m,"VRRenderer",{enumerable:!0,get:function(){return f.VRRenderer}});v(7);v(4);v(5);v(19);v(28);v(30);v(32);var t=v(3),p=v(4),n=v(5),c=v(29),e=v(31),f=v(26)};
shadow$provide[34]=function(z,v,J,m){function t(e,f){return"undefined"!==typeof e&&null!==e?f(e):void 0}Object.defineProperty(m,"__esModule",{value:!0});m.Attributes=void 0;class p{constructor(e,f){this.context=f;this.traits=e.Traits;this.types=e.Types;this.pending=[];this.bound=[];this.last=null}make(e){return{enum:"function"===typeof e.enum?e.enum():void 0,type:"function"===typeof e.uniform?e.uniform():void 0,value:e.make()}}apply(e,f){return new c(e,f,this)}bind(e){return this.bound.push(e)}unbind(e){return this.bound=
Array.from(this.bound).filter(f=>f!==e)}queue(e,f,h,k){this.lastObject=f;this.lastKey=h;this.lastValue=k;return this.pending.push(e)}invoke(e){return e(this.context.time.clock,this.context.time.step)}compute(){if(this.bound.length)for(const e of Array.from(this.bound))this.invoke(e)}digest(){let e;if(!this.pending.length)return!1;[e,this.pending]=Array.from([this.pending,[]]);for(const f of Array.from(e))f();return!0}getTrait(e){return this.traits[e]}getLastTrigger(){return`${this.lastObject.toString()} - ${this.lastKey}=\`${this.lastValue}\``}}
m.Attributes=p;const n=function(e){const f={};for(const h in e)f[h]=e[h];return f};class c{constructor(e,f,h){let k;let g,r,u,w,x,{props:B}=f;const {traits:E,finals:C,freeform:H}=f,I=this;null!=e.props&&null!=e.expr&&null!=e.orig&&null!=e.computed&&null!=e.attributes&&(w=n(e.props),r=n(e.expr),u=e.orig(),g=e.computed(),null!=e.attributes&&e.attributes.dispose());const K={},O={},Q={},W=pa=>null!=(null!=I[pa]?I[pa].value:void 0)?null!=I[pa]?I[pa].value:void 0:t(I[null!=Q[pa]?Q[pa]:pa],Xa=>Xa.value),
R=function(pa,Xa,sb,Eb){let Sb;pa=null!=Q[pa]?Q[pa]:pa;if(null==(Sb=I[pa])){if(!H)throw Error(`${e.toString()} - Setting unknown property \`${pa}={${Xa}}\``);Sb=I[pa]={short:pa,type:null,last:null,value:null};Pa[pa]=Wb=>Wb}if(!sb){if(la[pa])throw Error(`${e.toString()} - Can't set bound property \`${pa}={${Xa}}\``);if(Aa[pa])throw Error(`${e.toString()} - Can't set computed property \`${pa}={${Xa}}\``);if(ta[pa])throw Error(`${e.toString()} - Can't set final property \`${pa}={${Xa}}\``);}let va=!0;
const jb=Cb(pa,Xa,Sb.last,function(){va=!1;return null});if(va){[Sb.value,Sb.last]=Array.from([jb,Sb.value]);const {short:Wb}=Sb;K[Wb]=jb;sb||(O[Wb]=Xa);Eb||mb[pa](Sb.value,Sb.last)||Jb(pa,Xa)}return va};f=function(pa,Xa,sb){pa=null!=Q[pa]?Q[pa]:pa;R(pa,Xa,!0,sb);return ta[pa]=!0};const X={},ca={},ka={},la={},Aa={},ta={},Ha=function(pa,Xa,sb){null==sb&&(sb=!1);pa=null!=Q[pa]?Q[pa]:pa;if("function"!==typeof Xa)throw Error(`${e.toString()} - Expression \`${pa}=>{${X}}\` is not a function`);if(la[pa])throw Error(`${e.toString()} - Property \`${pa}=>{${X}}\` is already bound`);
if(Aa[pa])throw Error(`${e.toString()} - Property \`${pa}\` is computed`);if(ta[pa])throw Error(`${e.toString()} - Property \`${pa}\` is final`);(sb?Aa:la)[pa]=Xa;const Eb=null!=I[pa]?I[pa].short:pa;sb||(X[Eb]=Xa);ka[pa]=Xa;Xa=Xa.bind(e);ca[pa]=function(Sb,va){let jb;if(jb=null!=e.clock?e.clock.getTime():void 0)Sb=jb.clock,va=jb.step;return e.set(pa,Xa(Sb,va),!0)};return h.bind(ca[pa])},Oa=function(pa,Xa){null==Xa&&(Xa=!1);pa=null!=Q[pa]?Q[pa]:pa;Xa=Xa?Aa:la;if(Xa[pa])return h.unbind(ca[pa]),delete ca[pa],
delete Xa[pa],null!=I[pa]&&(pa=I[pa].short),delete X[pa]},da=function(pa,Xa){let sb;pa=null!=Q[pa]?Q[pa]:pa;return null!=(sb="function"===typeof ka[pa]?ka[pa](Xa,0):void 0)?sb:I[pa].value};e.expr=X;e.props=K;e.evaluate=function(pa,Xa){if(null!=pa)return da(pa,Xa);const sb={};for(pa in B)sb[pa]=da(pa,Xa);return sb};e.get=function(pa){return null!=pa?W(pa):K};e.set=function(pa,Xa,sb,Eb){if("string"===typeof pa)R(pa,Xa,sb,Eb);else{Eb=sb;sb=Xa;const Sb=pa;for(pa in Sb)Xa=Sb[pa],R(pa,Xa,sb,Eb)}};e.bind=
function(pa,Xa,sb){if("string"===typeof pa)Ha(pa,Xa,sb);else{sb=Xa;const Eb=pa;for(pa in Eb)Xa=Eb[pa],Ha(pa,Xa,sb)}};e.unbind=function(pa,Xa){if("string"===typeof pa)Oa(pa,Xa);else{Xa=X;const sb=pa;for(pa in sb)Oa(pa,Xa)}};e.attribute=function(pa){return null!=pa?I[null!=Q[pa]?Q[pa]:pa]:I};e.orig=function(pa){return null!=pa?O[null!=Q[pa]?Q[pa]:pa]:n(O)};e.computed=function(pa){return null!=pa?Aa[null!=Q[pa]?Q[pa]:pa]:n(Aa)};const Wa={},Pa={},mb={},Cb=(pa,Xa,sb,Eb)=>Pa[pa](Xa,sb,Eb);e.validate=function(pa,
Xa){let sb;pa=null!=Q[pa]?Q[pa]:pa;const Eb=Wa[pa];null!=Eb&&(sb=Eb());return sb=Cb(pa,Xa,sb,function(){throw Error(`${e.toString()} - Invalid value \`${pa}={${Xa}}\``);})};let yb=!1,tb={},Rb={},ac={},Hb={};const Jb=function(pa,Xa){yb||(yb=!0,h.queue(dc,e,pa,Xa));Xa=pa.split(".")[0];tb[pa]=!0;return Rb[Xa]=!0},Tb={type:"change",changed:null,touched:null},dc=function(){Tb.changed=tb;Tb.touched=Rb;tb=ac;Rb=Hb;({changed:ac}=Tb);({touched:Hb}=Tb);yb=!1;for(pa in tb)tb[pa]=!1;for(pa in Rb)Rb[pa]=!1;Tb.type=
"change";e.trigger(Tb);var pa=[];for(const Xa in Tb.touched)Tb.type=`change:${Xa}`,pa.push(e.trigger(Tb));return pa},zb=function(pa){pa=pa.split(/\./g);const Xa=pa.pop();pa.pop();pa.unshift(Xa);return pa.reduce((sb,Eb)=>sb+Eb.charAt(0).toUpperCase()+Eb.substring(1))},ib=(pa,Xa)=>(()=>{const sb=[];for(let Eb in Xa){let Sb;const va=Xa[Eb];Eb=[pa,Eb].join(".");const jb=zb(Eb);I[Eb]={T:va,ns:pa,short:jb,enum:"function"===typeof va.enum?va.enum():void 0,type:"function"===typeof va.uniform?va.uniform():
void 0,last:va.make(),value:Sb=va.make()};if(Q[jb])throw Error(`${e.toString()} - Duplicate property \`${jb}\``);Q[jb]=Eb;K[jb]=Sb;Wa[Eb]=va.make;Pa[Eb]=null!=va.validate?va.validate:Wb=>Wb;sb.push(mb[Eb]=null!=va.equals?va.equals:(Wb,oc)=>Wb===oc)}return sb})(),Db=[];for(let pa of Array.from(E)){[pa,ec]=Array.from(pa.split(":"));const Xa=ec?[ec,pa].join("."):pa;x=h.getTrait(pa);Db.push(pa);null!=x&&ib(Xa,x)}if(null!=B)for(ec in B)x=B[ec],ib(ec,x);var ec=Db.filter((pa,Xa)=>Db.indexOf(pa)===Xa);e.traits=
ec;null!=w&&e.set(w,!0,!0);if(null!=C)for(k in C)f(k,C[k],!0);null!=u&&e.set(u,!1,!0);null!=g&&e.bind(g,!0);null!=r&&e.bind(r,!1);this.dispose=function(){for(k in Aa)Oa(k,!0);for(k in la)Oa(k,!1);B={};delete e.attributes;delete e.get;return delete e.set};null}}};
shadow$provide[35]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.format=m.print=m.number=m.markup=m.JSX=void 0;const t=(r,u)=>1E-4>Math.abs(r/u-Math.round(r/u)),p=function(r,u,w,x){r=Math.round(r/u);return 1===r?`${w}`:-1===r?`-${w}`:"1"===w?`${r}`:x?`${r}${w}`:`${r}*${w}`},n=function(r,u,w,x){r=Math.round(r*u);1===Math.abs(r)?r=(0>r?"-":"")+w:"1"!==w&&(r+=x?`${w}`:`*${w}`);return`${r}/${u}`},c=[{1:1},{1:1,"τ":2*Math.PI},{1:1,"π":Math.PI},{1:1,"τ":2*Math.PI,"π":Math.PI},{1:1,
e:Math.E},{1:1,"τ":2*Math.PI,e:Math.E},{1:1,"π":Math.PI,e:Math.E},{1:1,"τ":2*Math.PI,"π":Math.PI,e:Math.E}],e=[[420,[2,3,5,7]],[88200,[2,3,5,7]],[60060,[2,3,5,7,11,13]],[861764,[2,17,19,23,29]],[65536,[2]],[1E6,[2,5]]],f=function(r){let u,w,x,B,E;r&&({cache:u,compact:w,tau:E,pi:B,e:x}=r);w=+!(null!=w&&!w);const C=+!(null!=E&&!E)+2*+!(null!=B&&!B)+4*+!(null!=x&&!x),H=+!(null!=u&&!u)?{}:null;return function(I){if(null!=H){var K;if(null!=(K=H[I]))return K;if(I===Math.round(I))return H[I]=`${I}`}let O=
`${I}`,Q=O.length+O.indexOf(".")+2;K=function(W){const R=W.length;if(R<=Q)return O=`${W}`,Q=R};for(const W in c[C]){const R=c[C][W];if(t(I/R,1))K(`${p(I/R,1,W,w)}`);else for(let [X,ca]of Array.from(e)){let ka=I/R*X;if(t(ka,1)){for(const la of Array.from(ca)){let Aa,ta;for(;t(ta=ka/la,1)&&t(Aa=X/la,1);)ka=ta,X=Aa}K(`${n(I/R,X,W,w)}`);break}}}5<`${I}`.length&&K(`${I.toPrecision(5)}`);null!=H&&(H[I]=O);return O}};m.number=f;m.print=function(r,u){null==u&&(u="info");r=h(r);return console[u].apply(console,
r)};const h=function(r){let u=!1,w=0;const x=[];r=r.replace(/(\\[<={}> "'])|(=>|[<={}> "'])/g,function(B,E,C){return null!=E&&E.length?E:u&&!['"',"'"].includes(C)||w&&!['"',"'","{","}"].includes(C)?C:(()=>{switch(C){case "\x3c":return x.push("color:rgb(128,0,128)"),"%c\x3c";case "\x3e":return x.push("color:rgb(128,0,128)"),x.push("color:inherit"),"%c\x3e%c";case " ":return x.push("color:rgb(144,64,0)")," %c";case "\x3d":case "\x3d\x3e":return x.push("color:rgb(128,0,128)"),`%c${C}`;case '"':case "'":if(u=
!u)return x.push(w?"color:rgb(144,64,0)":"color:rgb(0,0,192)"),`${C}%c`;x.push(w?"color:rgb(0,70,156)":"color:rgb(128,0,128)");return`%c${C}`;case "{":return 0===w++?(x.push("color:rgb(0,70,156)"),`%c${C}`):C;case "}":return 0===--w?(x.push("color:rgb(128,0,128)"),`${C}%c`):C;default:return C}})()});return[r].concat(x)};m.markup=h;const k=function(){const r=f({compact:!1});return function(u,w,x){const B=function(E){if(E instanceof Array)return`[${E.map(B).join(", ")}]`;switch(typeof E){case "string":return E.match("\n")?
`"\n${E}"\n`:`"${E}"`;case "function":return E=`${E}`,E.match("\n")?`\n${E}\n`:`${E}`,E=E.replace(/^function (\([^)]*\))/,"$1 \x3d\x3e"),E=E.replace(/^(\([^)]*\)) =>\s*{\s*return\s*([^}]+)\s*;\s*}/,"$1 \x3d\x3e $2");case "number":return r(E);default:return null!=E&&E!==!!E?null!=E._up?B(E.map(C=>C)):E.toMarkup?E.toString():"{"+(()=>{const C=[];for(const O in E){const Q=E[O];if(Object.prototype.hasOwnProperty.call(E,O)){var H=C,I=H.push;var K=O;K=K===""+ +K||K.match(/^[A-Za-z_][A-Za-z0-9]*$/)?K:JSON.stringify(K);
I.call(H,`${K}: ${B(Q)}`)}}return C})().join(", ")+"}":`${JSON.stringify(E)}`}};return[u,x,function(E){return E.match('\n*"')?E:`{${E}}`}(B(w))].join("")}}(),g=function(r){r=r.replace(/&/g,"\x26amp;");r=r.replace(/</g,"\x26lt;");return r.replace(/"/g,"\x26quot;")};m.format=function(r){const u=[].slice.call(arguments);u.shift();let w="\x3cspan\x3e";r=g(r);for(const x of Array.from(u))r=r.replace(/%([a-z])/,function(B,E){B=u.shift();switch(E){case "c":return`</span><span style="${g(B)}">`;default:return g(B)}});
w+=r;return w+="\x3c/span\x3e"};m.JSX={prop:(r,u)=>k(r,u,"\x3d"),bind:(r,u)=>k(r,u,"\x3d\x3e")}};
shadow$provide[36]=function(z,v,J,m){function t(e){if("function"!==typeof WeakMap)return null;var f=new WeakMap,h=new WeakMap;return(t=function(k){return k?h:f})(e)}Object.defineProperty(m,"__esModule",{value:!0});m.Node=void 0;var p=function(e,f){if(!f&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};if((f=t(f))&&f.has(e))return f.get(e);var h={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor,g;for(g in e)if("default"!==g&&Object.prototype.hasOwnProperty.call(e,
g)){var r=k?Object.getOwnPropertyDescriptor(e,g):null;r&&(r.get||r.set)?Object.defineProperty(h,g,r):h[g]=e[g]}h.default=e;f&&f.set(e,h);return h}(v(35));z=v(4);let n=0;class c{constructor(e,f,h,k,g,r){this.type=e;this._id=(++n).toString();this.configure(g,r);this.parent=this.root=this.path=this.index=null;this.set(f,!0,!0);this.set(h,!1,!0);this.bind(k,!1)}configure(e,f){let {traits:h,props:k,finals:g,freeform:r}=e;null==h&&(h=null!=(null!=this._config?this._config.traits:void 0)?null!=this._config?
this._config.traits:void 0:[]);null==k&&(k=null!=(null!=this._config?this._config.props:void 0)?null!=this._config?this._config.props:void 0:{});null==g&&(g=null!=(null!=this._config?this._config.finals:void 0)?null!=this._config?this._config.finals:void 0:{});null==r&&(r=null!=(null!=this._config?this._config.freeform:void 0)?null!=this._config?this._config.freeform:void 0:!1);this._config={traits:h,props:k,finals:g,freeform:r};return this.attributes=f.apply(this,this._config)}dispose(){this.attributes.dispose();
return this.attributes=null}_added(e){this.parent=e;this.root=e.root;e={type:"add",node:this,parent:this.parent};this.root&&this.root.trigger(e);e.type="added";return this.trigger(e)}_removed(){const e={type:"remove",node:this};this.root&&this.root.trigger(e);e.type="removed";this.trigger(e);return this.root=this.parent=null}_index(e,f){null==f&&({parent:f}=this);this.index=e;this.path=e=null!=e?(null!=(null!=f?f.path:void 0)?null!=f?f.path:void 0:[]).concat([e]):null;this.order=null!=e?this._encode(e):
Infinity;if(null!=this.root)return this.trigger({type:"reindex"})}_encode(e){let f=1+1/3,h=0;for(const k of Array.from(e))[f,h]=Array.from([h+3/(k+1+3)*(f-h),h+3/(k+2+3)*(f-h)]);return f}toString(){const e=null!=this.type?this.type:"node";let f;f=e+`#${null!=this.id?this.id:this._id}`;null!=this.classes&&this.classes.length&&(f+=`.${this.classes.join(".")}`);if(null!=this.children){let h;return(h=this.children.length)?`<${f}>…(${h})…</${e}>`:`<${f}></${e}>`}return`<${f} />`}toMarkup(e=null,f){let h,
k;null==f&&(f="");if(e&&"function"!==typeof e){var g;e=null!=(g=null!=this.root?this.root.model._matcher(e):void 0)?g:()=>!0}g=null!=this.type?this.type:"node";let {expr:r}=this;const u={id:this._id};var w="function"===typeof this.orig?this.orig():void 0;for(h in w)k=w[h],u[h]=k;w=(()=>{const E=[];for(h in u)k=u[h],this.expr[h]||E.push(p.JSX.prop(h,k));return E})();r=(()=>{const E=[];for(h in r)k=r[h],E.push(p.JSX.bind(h,k));return E})();var x=[""];w.length&&(x=x.concat(w));r.length&&(x=x.concat(r));
x=x.join(" ");let B=f;w=()=>null!=this.children&&this.children.length?this.children.map(E=>E.toMarkup(e,B)).filter(E=>null!=E&&E.length).join("\n"):"";return e&&!e(this)?w():null!=this.children?(x=`<${g}${x}>`,g=`</${g}>`,B=f+"  ",w=w(),w.length&&(w="\n"+w+"\n"+f),null==w&&(w=""),f+x+w+g):`${f}<${g}${x} />`}print(e,f){return p.print(this.toMarkup(e),f)}}m.Node=c;z.Binder.apply(c.prototype)};
shadow$provide[37]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Group=void 0;z=v(36);class t extends z.Node{constructor(p,n,c,e,f,h){super(p,n,c,e,f,h);this.children=[];this.on("reindex",k=>Array.from(this.children).map(g=>g.trigger(k)))}add(p){null!=p.parent&&p.parent.remove(p);p._index(this.children.length,this);this.children.push(p);return p._added(this)}remove(p){null!=p.children&&p.children.length&&p.empty();const n=this.children.indexOf(p);if(-1!==n){this.children.splice(n,
1);p._index(null);p._removed(this);for(let c=0;c<this.children.length;c++)p=this.children[c],c>=n&&p._index(c)}}empty(){const p=this.children.slice().reverse();for(const n of Array.from(p))this.remove(n)}}m.Group=t};
shadow$provide[38]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Guard=void 0;class t{constructor(p){null==p&&(p=10);this.limit=p}iterate(p){const {step:n,last:c}=p;for({limit:p}=this;n();)if(!--p)throw console.warn("Last iteration","function"===typeof c?c():void 0),Error("Exceeded iteration limit.");return null}}m.Guard=t};
shadow$provide[39]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Doctype=m.CDATA=m.Tag=m.Style=m.Script=m.Comment=m.Directive=m.Text=m.Root=m.isTag=m.ElementType=void 0;var t;(function(p){p.Root="root";p.Text="text";p.Directive="directive";p.Comment="comment";p.Script="script";p.Style="style";p.Tag="tag";p.CDATA="cdata";p.Doctype="doctype"})(t=m.ElementType||(m.ElementType={}));m.isTag=function(p){return p.type===t.Tag||p.type===t.Script||p.type===t.Style};m.Root=t.Root;m.Text=
t.Text;m.Directive=t.Directive;m.Comment=t.Comment;m.Script=t.Script;m.Style=t.Style;m.Tag=t.Tag;m.CDATA=t.CDATA;m.Doctype=t.Doctype};
shadow$provide[40]=function(z,v,J,m){function t(K){return(0,u.isTag)(K)}function p(K){return K.type===u.ElementType.CDATA}function n(K){return K.type===u.ElementType.Text}function c(K){return K.type===u.ElementType.Comment}function e(K){return K.type===u.ElementType.Directive}function f(K){return K.type===u.ElementType.Root}function h(K,O){void 0===O&&(O=!1);if(n(K))O=new x(K.data);else if(c(K))O=new B(K.data);else if(t(K)){O=O?k(K.children):[];var Q=new I(K.name,r({},K.attribs),O);O.forEach(function(X){return X.parent=
Q});null!=K.namespace&&(Q.namespace=K.namespace);K["x-attribsNamespace"]&&(Q["x-attribsNamespace"]=r({},K["x-attribsNamespace"]));K["x-attribsPrefix"]&&(Q["x-attribsPrefix"]=r({},K["x-attribsPrefix"]));O=Q}else if(p(K)){O=O?k(K.children):[];var W=new C(u.ElementType.CDATA,O);O.forEach(function(X){return X.parent=W});O=W}else if(f(K)){O=O?k(K.children):[];var R=new H(O);O.forEach(function(X){return X.parent=R});K["x-mode"]&&(R["x-mode"]=K["x-mode"]);O=R}else if(e(K))O=new E(K.name,K.data),null!=K["x-name"]&&
(O["x-name"]=K["x-name"],O["x-publicId"]=K["x-publicId"],O["x-systemId"]=K["x-systemId"]);else throw Error("Not implemented yet: ".concat(K.type));O.startIndex=K.startIndex;O.endIndex=K.endIndex;null!=K.sourceCodeLocation&&(O.sourceCodeLocation=K.sourceCodeLocation);return O}function k(K){K=K.map(function(Q){return h(Q,!0)});for(var O=1;O<K.length;O++)K[O].prev=K[O-1],K[O-1].next=K[O];return K}var g=this&&this.__extends||function(){var K=function(O,Q){K=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(W,R){W.__proto__=R}||function(W,R){for(var X in R)Object.prototype.hasOwnProperty.call(R,X)&&(W[X]=R[X])};return K(O,Q)};return function(O,Q){function W(){this.constructor=O}if("function"!==typeof Q&&null!==Q)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");K(O,Q);O.prototype=null===Q?Object.create(Q):(W.prototype=Q.prototype,new W)}}(),r=this&&this.__assign||function(){r=Object.assign||function(K){for(var O,Q=1,W=arguments.length;Q<W;Q++){O=arguments[Q];
for(var R in O)Object.prototype.hasOwnProperty.call(O,R)&&(K[R]=O[R])}return K};return r.apply(this,arguments)};Object.defineProperty(m,"__esModule",{value:!0});m.cloneNode=m.hasChildren=m.isDocument=m.isDirective=m.isComment=m.isText=m.isCDATA=m.isTag=m.Element=m.Document=m.NodeWithChildren=m.ProcessingInstruction=m.Comment=m.Text=m.DataNode=m.Node=void 0;var u=v(39),w=new Map([[u.ElementType.Tag,1],[u.ElementType.Script,1],[u.ElementType.Style,1],[u.ElementType.Directive,1],[u.ElementType.Text,
3],[u.ElementType.CDATA,4],[u.ElementType.Comment,8],[u.ElementType.Root,9]]);z=function(){function K(O){this.type=O;this.endIndex=this.startIndex=this.next=this.prev=this.parent=null}Object.defineProperty(K.prototype,"nodeType",{get:function(){var O;return null!==(O=w.get(this.type))&&void 0!==O?O:1},enumerable:!1,configurable:!0});Object.defineProperty(K.prototype,"parentNode",{get:function(){return this.parent},set:function(O){this.parent=O},enumerable:!1,configurable:!0});Object.defineProperty(K.prototype,
"previousSibling",{get:function(){return this.prev},set:function(O){this.prev=O},enumerable:!1,configurable:!0});Object.defineProperty(K.prototype,"nextSibling",{get:function(){return this.next},set:function(O){this.next=O},enumerable:!1,configurable:!0});K.prototype.cloneNode=function(O){void 0===O&&(O=!1);return h(this,O)};return K}();m.Node=z;v=function(K){function O(Q,W){Q=K.call(this,Q)||this;Q.data=W;return Q}g(O,K);Object.defineProperty(O.prototype,"nodeValue",{get:function(){return this.data},
set:function(Q){this.data=Q},enumerable:!1,configurable:!0});return O}(z);m.DataNode=v;var x=function(K){function O(Q){return K.call(this,u.ElementType.Text,Q)||this}g(O,K);return O}(v);m.Text=x;var B=function(K){function O(Q){return K.call(this,u.ElementType.Comment,Q)||this}g(O,K);return O}(v);m.Comment=B;var E=function(K){function O(Q,W){W=K.call(this,u.ElementType.Directive,W)||this;W.name=Q;return W}g(O,K);return O}(v);m.ProcessingInstruction=E;var C=function(K){function O(Q,W){Q=K.call(this,
Q)||this;Q.children=W;return Q}g(O,K);Object.defineProperty(O.prototype,"firstChild",{get:function(){var Q;return null!==(Q=this.children[0])&&void 0!==Q?Q:null},enumerable:!1,configurable:!0});Object.defineProperty(O.prototype,"lastChild",{get:function(){return 0<this.children.length?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0});Object.defineProperty(O.prototype,"childNodes",{get:function(){return this.children},set:function(Q){this.children=Q},enumerable:!1,configurable:!0});
return O}(z);m.NodeWithChildren=C;var H=function(K){function O(Q){return K.call(this,u.ElementType.Root,Q)||this}g(O,K);return O}(C);m.Document=H;var I=function(K){function O(Q,W,R,X){void 0===R&&(R=[]);void 0===X&&(X="script"===Q?u.ElementType.Script:"style"===Q?u.ElementType.Style:u.ElementType.Tag);R=K.call(this,X,R)||this;R.name=Q;R.attribs=W;return R}g(O,K);Object.defineProperty(O.prototype,"tagName",{get:function(){return this.name},set:function(Q){this.name=Q},enumerable:!1,configurable:!0});
Object.defineProperty(O.prototype,"attributes",{get:function(){var Q=this;return Object.keys(this.attribs).map(function(W){var R,X;return{name:W,value:Q.attribs[W],namespace:null===(R=Q["x-attribsNamespace"])||void 0===R?void 0:R[W],prefix:null===(X=Q["x-attribsPrefix"])||void 0===X?void 0:X[W]}})},enumerable:!1,configurable:!0});return O}(C);m.Element=I;m.isTag=t;m.isCDATA=p;m.isText=n;m.isComment=c;m.isDirective=e;m.isDocument=f;m.hasChildren=function(K){return Object.prototype.hasOwnProperty.call(K,
"children")};m.cloneNode=h};
shadow$provide[41]=function(z,v,J,m){var t=this&&this.__createBinding||(Object.create?function(f,h,k,g){void 0===g&&(g=k);var r=Object.getOwnPropertyDescriptor(h,k);if(!r||("get"in r?!h.__esModule:r.writable||r.configurable))r={enumerable:!0,get:function(){return h[k]}};Object.defineProperty(f,g,r)}:function(f,h,k,g){void 0===g&&(g=k);f[g]=h[k]});z=this&&this.__exportStar||function(f,h){for(var k in f)"default"===k||Object.prototype.hasOwnProperty.call(h,k)||t(h,f,k)};Object.defineProperty(m,"__esModule",
{value:!0});m.DomHandler=void 0;var p=v(39),n=v(40);z(v(40),m);var c=/\s+/g,e={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1,xmlMode:!1};v=function(){function f(h,k,g){this.dom=[];this.root=new n.Document(this.dom);this.done=!1;this.tagStack=[this.root];this.parser=this.lastNode=null;"function"===typeof k&&(g=k,k=e);"object"===typeof h&&(k=h,h=void 0);this.callback=null!==h&&void 0!==h?h:null;this.options=null!==k&&void 0!==k?k:e;this.elementCB=null!==g&&void 0!==g?g:null}f.prototype.onparserinit=
function(h){this.parser=h};f.prototype.onreset=function(){this.dom=[];this.root=new n.Document(this.dom);this.done=!1;this.tagStack=[this.root];this.parser=this.lastNode=null};f.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))};f.prototype.onerror=function(h){this.handleCallback(h)};f.prototype.onclosetag=function(){this.lastNode=null;var h=this.tagStack.pop();this.options.withEndIndices&&(h.endIndex=this.parser.endIndex);this.elementCB&&this.elementCB(h)};
f.prototype.onopentag=function(h,k){h=new n.Element(h,k,void 0,this.options.xmlMode?p.ElementType.Tag:void 0);this.addNode(h);this.tagStack.push(h)};f.prototype.ontext=function(h){var k=this.options.normalizeWhitespace,g=this.lastNode;g&&g.type===p.ElementType.Text?(g.data=k?(g.data+h).replace(c," "):g.data+h,this.options.withEndIndices&&(g.endIndex=this.parser.endIndex)):(k&&(h=h.replace(c," ")),h=new n.Text(h),this.addNode(h),this.lastNode=h)};f.prototype.oncomment=function(h){this.lastNode&&this.lastNode.type===
p.ElementType.Comment?this.lastNode.data+=h:(h=new n.Comment(h),this.addNode(h),this.lastNode=h)};f.prototype.oncommentend=function(){this.lastNode=null};f.prototype.oncdatastart=function(){var h=new n.Text(""),k=new n.NodeWithChildren(p.ElementType.CDATA,[h]);this.addNode(k);h.parent=k;this.lastNode=h};f.prototype.oncdataend=function(){this.lastNode=null};f.prototype.onprocessinginstruction=function(h,k){h=new n.ProcessingInstruction(h,k);this.addNode(h)};f.prototype.handleCallback=function(h){if("function"===
typeof this.callback)this.callback(h,this.dom);else if(h)throw h;};f.prototype.addNode=function(h){var k=this.tagStack[this.tagStack.length-1],g=k.children[k.children.length-1];this.options.withStartIndices&&(h.startIndex=this.parser.startIndex);this.options.withEndIndices&&(h.endIndex=this.parser.endIndex);k.children.push(h);g&&(h.prev=g,g.next=h);h.parent=k;this.lastNode=null};return f}();m.DomHandler=v;m.default=v};
shadow$provide[42]=function(z,v,J,m){J.exports={Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"\ud835\udd04",afr:"\ud835\udd1e",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",amp:"\x26",AMP:"\x26",andand:"⩕",And:"⩓",and:"∧",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",
angmsdag:"⦮",angmsdah:"⦯",angmsd:"∡",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"\ud835\udd38",aopf:"\ud835\udd52",apacir:"⩯",ap:"≈",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"\ud835\udc9c",ascr:"\ud835\udcb6",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",
Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"\ud835\udd05",bfr:"\ud835\udd1f",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",
blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"\x3d⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"\ud835\udd39",bopf:"\ud835\udd53",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxHd:"╤",boxhD:"╥",boxHD:"╦",boxhu:"┴",boxHu:"╧",boxhU:"╨",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",
boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"\ud835\udcb7",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsolb:"⧅",bsol:"\\",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",capand:"⩄",capbrcup:"⩉",capcap:"⩋",cap:"∩",Cap:"⋒",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",
caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"\ud835\udd20",Cfr:"ℭ",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",
cir:"○",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"\ud835\udd54",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",
Cscr:"\ud835\udc9e",cscr:"\ud835\udcb8",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cup:"∪",Cup:"⋓",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",Darr:"↡",dArr:"⇓",dash:"‐",
Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",ddagger:"‡",ddarr:"⇊",DD:"ⅅ",dd:"ⅆ",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"\ud835\udd07",dfr:"\ud835\udd21",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",
divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"\ud835\udd3b",dopf:"\ud835\udd55",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",
DoubleVerticalBar:"∥",DownArrowBar:"⤓",downarrow:"↓",DownArrow:"↓",Downarrow:"⇓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVectorBar:"⥖",DownLeftVector:"↽",DownRightTeeVector:"⥟",DownRightVectorBar:"⥗",DownRightVector:"⇁",DownTeeArrow:"↧",DownTee:"⊤",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"\ud835\udc9f",dscr:"\ud835\udcb9",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",
dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",Ecirc:"Ê",ecirc:"ê",ecir:"≖",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",edot:"ė",eDot:"≑",ee:"ⅇ",efDot:"≒",Efr:"\ud835\udd08",efr:"\ud835\udd22",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp13:" ",emsp14:" ",
emsp:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"\ud835\udd3c",eopf:"\ud835\udd56",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"\x3d",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",
exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"\ud835\udd09",ffr:"\ud835\udd23",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"\ud835\udd3d",fopf:"\ud835\udd57",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",
frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"\ud835\udcbb",Fscr:"ℱ",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",ge:"≥",gE:"≧",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",gescc:"⪩",ges:"⩾",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"\ud835\udd0a",gfr:"\ud835\udd24",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gla:"⪥",gl:"≷",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",
gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"\ud835\udd3e",gopf:"\ud835\udd58",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"\ud835\udca2",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",gtcc:"⪧",gtcir:"⩺",gt:"\x3e",GT:"\x3e",Gt:"≫",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",
HARDcy:"Ъ",hardcy:"ъ",harrcir:"⥈",harr:"↔",hArr:"⇔",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"\ud835\udd25",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"\ud835\udd59",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"\ud835\udcbd",Hscr:"ℋ",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",
icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",ifr:"\ud835\udd26",Ifr:"ℑ",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",Im:"ℑ",imof:"⊷",imped:"Ƶ",Implies:"⇒",incare:"℅","in":"∈",infin:"∞",infintie:"⧝",inodot:"ı",intcal:"⊺","int":"∫",Int:"∬",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",
iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"\ud835\udd40",iopf:"\ud835\udd5a",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",iscr:"\ud835\udcbe",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"\ud835\udd0d",jfr:"\ud835\udd27",jmath:"ȷ",Jopf:"\ud835\udd41",jopf:"\ud835\udd5b",Jscr:"\ud835\udca5",jscr:"\ud835\udcbf",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",
Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"\ud835\udd0e",kfr:"\ud835\udd28",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"\ud835\udd42",kopf:"\ud835\udd5c",Kscr:"\ud835\udca6",kscr:"\ud835\udcc0",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larrb:"⇤",larrbfs:"⤟",larr:"←",Larr:"↞",lArr:"⇐",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",latail:"⤙",lAtail:"⤛",lat:"⪫",late:"⪭",
lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",LeftArrowBar:"⇤",leftarrow:"←",LeftArrow:"←",Leftarrow:"⇐",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVectorBar:"⥙",LeftDownVector:"⇃",LeftFloor:"⌊",leftharpoondown:"↽",
leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTeeArrow:"↤",LeftTee:"⊣",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangleBar:"⧏",LeftTriangle:"⊲",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVectorBar:"⥘",LeftUpVector:"↿",LeftVectorBar:"⥒",LeftVector:"↼",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",lescc:"⪨",les:"⩽",lesdot:"⩿",lesdoto:"⪁",
lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"\ud835\udd0f",lfr:"\ud835\udd29",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",llarr:"⇇",ll:"≪",Ll:"⋘",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoustache:"⎰",lmoust:"⎰",lnap:"⪉",lnapprox:"⪉",
lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftrightarrow:"⟷",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longmapsto:"⟼",longrightarrow:"⟶",LongRightArrow:"⟶",Longrightarrow:"⟹",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"\ud835\udd43",lopf:"\ud835\udd5d",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",
lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"\ud835\udcc1",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",ltcc:"⪦",ltcir:"⩹",lt:"\x3c",LT:"\x3c",Lt:"≪",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",
mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"\ud835\udd10",mfr:"\ud835\udd2a",mho:"℧",micro:"µ",midast:"*",midcir:"⫰",mid:"∣",middot:"·",minusb:"⊟",minus:"−",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"\ud835\udd44",mopf:"\ud835\udd5e",mp:"∓",mscr:"\ud835\udcc2",Mscr:"ℳ",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natural:"♮",naturals:"ℕ",
natur:"♮",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",ne:"≠",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"\ud835\udd11",nfr:"\ud835\udd2b",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",
nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nlE:"≦̸",nle:"≰",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"\ud835\udd5f",Nopf:"ℕ",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",
NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangleBar:"⧏̸",NotLeftTriangle:"⋪",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",
NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangleBar:"⧐̸",NotRightTriangle:"⋫",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",
NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",nparallel:"∦",npar:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",nprec:"⊀",npreceq:"⪯̸",npre:"⪯̸",nrarrc:"⤳̸",nrarr:"↛",nrArr:"⇏",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"\ud835\udca9",nscr:"\ud835\udcc3",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",
nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:"\x3e⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"\x3c⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",
nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",Ocirc:"Ô",ocirc:"ô",ocir:"⊚",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"\ud835\udd12",ofr:"\ud835\udd2c",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"\ud835\udd46",oopf:"\ud835\udd60",opar:"⦷",
OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",orarr:"↻",Or:"⩔",or:"∨",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"\ud835\udcaa",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",otimesas:"⨶",Otimes:"⨷",otimes:"⊗",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",para:"¶",parallel:"∥",par:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",
permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"\ud835\udd13",pfr:"\ud835\udd2d",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plus:"+",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"\ud835\udd61",Popf:"ℙ",pound:"£",prap:"⪷",Pr:"⪻",pr:"≺",prcue:"≼",precapprox:"⪷",prec:"≺",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",
PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",pre:"⪯",prE:"⪳",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportional:"∝",Proportion:"∷",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"\ud835\udcab",pscr:"\ud835\udcc5",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"\ud835\udd14",qfr:"\ud835\udd2e",qint:"⨌",qopf:"\ud835\udd62",Qopf:"ℚ",qprime:"⁗",Qscr:"\ud835\udcac",qscr:"\ud835\udcc6",quaternions:"ℍ",
quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarr:"→",Rarr:"↠",rArr:"⇒",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",
rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",Re:"ℜ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"\ud835\udd2f",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrowBar:"⇥",rightarrow:"→",RightArrow:"→",Rightarrow:"⇒",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",
RightDownTeeVector:"⥝",RightDownVectorBar:"⥕",RightDownVector:"⇂",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTeeArrow:"↦",RightTee:"⊢",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangleBar:"⧐",RightTriangle:"⊳",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVectorBar:"⥔",RightUpVector:"↾",RightVectorBar:"⥓",RightVector:"⇀",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",
rmoustache:"⎱",rmoust:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"\ud835\udd63",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"\ud835\udcc7",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",scap:"⪸",Scaron:"Š",scaron:"š",Sc:"⪼",sc:"≻",sccue:"≽",sce:"⪰",scE:"⪴",Scedil:"Ş",
scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdotb:"⊡",sdot:"⋅",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"\ud835\udd16",sfr:"\ud835\udd30",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",
sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",solbar:"⌿",solb:"⧄",sol:"/",Sopf:"\ud835\udd4a",sopf:"\ud835\udd64",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",square:"□",Square:"□",
SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squ:"□",squf:"▪",srarr:"→",Sscr:"\ud835\udcae",sscr:"\ud835\udcc8",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",
subsim:"⫇",subsub:"⫕",subsup:"⫓",succapprox:"⪸",succ:"≻",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup1:"¹",sup2:"²",sup3:"³",sup:"⊃",Sup:"⋑",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",
supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"\ud835\udd17",tfr:"\ud835\udd31",there4:"∴",therefore:"∴",Therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",ThinSpace:" ",thinsp:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",tilde:"˜",Tilde:"∼",
TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",timesbar:"⨱",timesb:"⊠",times:"×",timesd:"⨰",tint:"∭",toea:"⤨",topbot:"⌶",topcir:"⫱",top:"⊤",Topf:"\ud835\udd4b",topf:"\ud835\udd65",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"\ud835\udcaf",tscr:"\ud835\udcc9",TScy:"Ц",tscy:"ц",
TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",uarr:"↑",Uarr:"↟",uArr:"⇑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"\ud835\udd18",ufr:"\ud835\udd32",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",
UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"\ud835\udd4c",uopf:"\ud835\udd66",UpArrowBar:"⤒",uparrow:"↑",UpArrow:"↑",Uparrow:"⇑",UpArrowDownArrow:"⇅",updownarrow:"↕",UpDownArrow:"↕",Updownarrow:"⇕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTeeArrow:"↥",UpTee:"⊥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"\ud835\udcb0",
uscr:"\ud835\udcca",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",Vcy:"В",vcy:"в",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",veebar:"⊻",vee:"∨",Vee:"⋁",veeeq:"≚",
vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"\ud835\udd19",vfr:"\ud835\udd33",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"\ud835\udd4d",vopf:"\ud835\udd67",vprop:"∝",vrtri:"⊳",Vscr:"\ud835\udcb1",vscr:"\ud835\udccb",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",Wfr:"\ud835\udd1a",wfr:"\ud835\udd34",Wopf:"\ud835\udd4e",
wopf:"\ud835\udd68",wp:"℘",wr:"≀",wreath:"≀",Wscr:"\ud835\udcb2",wscr:"\ud835\udccc",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"\ud835\udd1b",xfr:"\ud835\udd35",xharr:"⟷",xhArr:"⟺",Xi:"Ξ",xi:"ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"\ud835\udd4f",xopf:"\ud835\udd69",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",Xscr:"\ud835\udcb3",xscr:"\ud835\udccd",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",
Yfr:"\ud835\udd1c",yfr:"\ud835\udd36",YIcy:"Ї",yicy:"ї",Yopf:"\ud835\udd50",yopf:"\ud835\udd6a",Yscr:"\ud835\udcb4",yscr:"\ud835\udcce",YUcy:"Ю",yucy:"ю",yuml:"ÿ",Yuml:"Ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",zfr:"\ud835\udd37",Zfr:"ℨ",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",zopf:"\ud835\udd6b",Zopf:"ℤ",Zscr:"\ud835\udcb5",zscr:"\ud835\udccf",zwj:"‍",zwnj:"‌"}};
shadow$provide[43]=function(z,v,J,m){J.exports={Aacute:"Á",aacute:"á",Acirc:"Â",acirc:"â",acute:"´",AElig:"Æ",aelig:"æ",Agrave:"À",agrave:"à",amp:"\x26",AMP:"\x26",Aring:"Å",aring:"å",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",brvbar:"¦",Ccedil:"Ç",ccedil:"ç",cedil:"¸",cent:"¢",copy:"©",COPY:"©",curren:"¤",deg:"°",divide:"÷",Eacute:"É",eacute:"é",Ecirc:"Ê",ecirc:"ê",Egrave:"È",egrave:"è",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",frac12:"½",frac14:"¼",frac34:"¾",gt:"\x3e",GT:"\x3e",Iacute:"Í",iacute:"í",Icirc:"Î",
icirc:"î",iexcl:"¡",Igrave:"Ì",igrave:"ì",iquest:"¿",Iuml:"Ï",iuml:"ï",laquo:"«",lt:"\x3c",LT:"\x3c",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",Ntilde:"Ñ",ntilde:"ñ",Oacute:"Ó",oacute:"ó",Ocirc:"Ô",ocirc:"ô",Ograve:"Ò",ograve:"ò",ordf:"ª",ordm:"º",Oslash:"Ø",oslash:"ø",Otilde:"Õ",otilde:"õ",Ouml:"Ö",ouml:"ö",para:"¶",plusmn:"±",pound:"£",quot:'"',QUOT:'"',raquo:"»",reg:"®",REG:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",THORN:"Þ",thorn:"þ",times:"×",Uacute:"Ú",uacute:"ú",Ucirc:"Û",
ucirc:"û",Ugrave:"Ù",ugrave:"ù",uml:"¨",Uuml:"Ü",uuml:"ü",Yacute:"Ý",yacute:"ý",yen:"¥",yuml:"ÿ"}};
shadow$provide[44]=function(z,v,J,m){J.exports={amp:"\x26",apos:"'",gt:"\x3e",lt:"\x3c",quot:'"'}};
shadow$provide[45]=function(z,v,J,m){J.exports={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376}};
shadow$provide[46]=function(z,v,J,m){z=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{"default":n}};Object.defineProperty(m,"__esModule",{value:!0});var t=z(v(45)),p=String.fromCodePoint||function(n){var c="";65535<n&&(n-=65536,c+=String.fromCharCode(n>>>10&1023|55296),n=56320|n&1023);return c+=String.fromCharCode(n)};m.default=function(n){if(55296<=n&&57343>=n||1114111<n)return"�";n in t.default&&(n=t.default[n]);return p(n)}};
shadow$provide[47]=function(z,v,J,m){function t(k){var g=p(k);return function(r){return String(r).replace(f,g)}}function p(k){return function(g){if("#"===g.charAt(1)){var r=g.charAt(2);return"X"===r||"x"===r?e.default(parseInt(g.substr(3),16)):e.default(parseInt(g.substr(2),10))}return k[g.slice(1,-1)]||g}}z=this&&this.__importDefault||function(k){return k&&k.__esModule?k:{"default":k}};Object.defineProperty(m,"__esModule",{value:!0});m.decodeHTML=m.decodeHTMLStrict=m.decodeXML=void 0;var n=z(v(42)),
c=z(v(43));J=z(v(44));var e=z(v(46)),f=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;m.decodeXML=t(J.default);m.decodeHTMLStrict=t(n.default);var h=function(k,g){return k<g?1:-1};m.decodeHTML=function(){function k(E){";"!==E.substr(-1)&&(E+=";");return B(E)}for(var g=Object.keys(c.default).sort(h),r=Object.keys(n.default).sort(h),u=0,w=0;u<r.length;u++)g[w]===r[u]?(r[u]+=";?",w++):r[u]+=";";var x=new RegExp("\x26(?:"+r.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),B=p(n.default);return function(E){return String(E).replace(x,
k)}}()};
shadow$provide[48]=function(z,v,J,m){function t(g){return Object.keys(g).sort().reduce(function(r,u){r[g[u]]="\x26"+u+";";return r},{})}function p(g){var r=[],u=[],w=0;for(g=Object.keys(g);w<g.length;w++){var x=g[w];1===x.length?r.push("\\"+x):u.push(x)}r.sort();for(w=0;w<r.length-1;w++){for(g=w;g<r.length-1&&r[g].charCodeAt(1)+1===r[g+1].charCodeAt(1);)g+=1;x=1+g-w;3>x||r.splice(w,x,r[w]+"-"+r[g])}u.unshift("["+r.join("")+"]");return new RegExp(u.join("|"),"g")}function n(g){return"\x26#x"+(1<g.length?
h(g):g.charCodeAt(0)).toString(16).toUpperCase()+";"}function c(g){return function(r){return r.replace(k,function(u){return g[u]||n(u)})}}z=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{"default":g}};Object.defineProperty(m,"__esModule",{value:!0});m.escapeUTF8=m.escape=m.encodeNonAsciiHTML=m.encodeHTML=m.encodeXML=void 0;J=z(v(44));J=t(J.default);var e=p(J);m.encodeXML=c(J);v=z(v(42));v=t(v.default);z=p(v);m.encodeHTML=function(g,r){return function(u){return u.replace(r,function(w){return g[w]}).replace(f,
n)}}(v,z);m.encodeNonAsciiHTML=c(v);var f=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,h=null!=String.prototype.codePointAt?function(g){return g.codePointAt(0)}:function(g){return 1024*(g.charCodeAt(0)-55296)+g.charCodeAt(1)-56320+65536},k=new RegExp(e.source+"|"+f.source,"g");m.escape=function(g){return g.replace(k,n)};m.escapeUTF8=function(g){return g.replace(e,n)}};
shadow$provide[49]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.decodeXMLStrict=m.decodeHTML5Strict=m.decodeHTML4Strict=m.decodeHTML5=m.decodeHTML4=m.decodeHTMLStrict=m.decodeHTML=m.decodeXML=m.encodeHTML5=m.encodeHTML4=m.escapeUTF8=m.escape=m.encodeNonAsciiHTML=m.encodeHTML=m.encodeXML=m.encode=m.decodeStrict=m.decode=void 0;var t=v(47),p=v(48);m.decode=function(e,f){return(!f||0>=f?t.decodeXML:t.decodeHTML)(e)};m.decodeStrict=function(e,f){return(!f||0>=f?t.decodeXML:t.decodeHTMLStrict)(e)};
m.encode=function(e,f){return(!f||0>=f?p.encodeXML:p.encodeHTML)(e)};var n=v(48);Object.defineProperty(m,"encodeXML",{enumerable:!0,get:function(){return n.encodeXML}});Object.defineProperty(m,"encodeHTML",{enumerable:!0,get:function(){return n.encodeHTML}});Object.defineProperty(m,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return n.encodeNonAsciiHTML}});Object.defineProperty(m,"escape",{enumerable:!0,get:function(){return n.escape}});Object.defineProperty(m,"escapeUTF8",{enumerable:!0,get:function(){return n.escapeUTF8}});
Object.defineProperty(m,"encodeHTML4",{enumerable:!0,get:function(){return n.encodeHTML}});Object.defineProperty(m,"encodeHTML5",{enumerable:!0,get:function(){return n.encodeHTML}});var c=v(47);Object.defineProperty(m,"decodeXML",{enumerable:!0,get:function(){return c.decodeXML}});Object.defineProperty(m,"decodeHTML",{enumerable:!0,get:function(){return c.decodeHTML}});Object.defineProperty(m,"decodeHTMLStrict",{enumerable:!0,get:function(){return c.decodeHTMLStrict}});Object.defineProperty(m,"decodeHTML4",
{enumerable:!0,get:function(){return c.decodeHTML}});Object.defineProperty(m,"decodeHTML5",{enumerable:!0,get:function(){return c.decodeHTML}});Object.defineProperty(m,"decodeHTML4Strict",{enumerable:!0,get:function(){return c.decodeHTMLStrict}});Object.defineProperty(m,"decodeHTML5Strict",{enumerable:!0,get:function(){return c.decodeHTMLStrict}});Object.defineProperty(m,"decodeXMLStrict",{enumerable:!0,get:function(){return c.decodeXML}})};
shadow$provide[50]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.attributeNames=m.elementNames=void 0;m.elementNames=new Map([["altglyph","altGlyph"],["altglyphdef","altGlyphDef"],["altglyphitem","altGlyphItem"],["animatecolor","animateColor"],["animatemotion","animateMotion"],["animatetransform","animateTransform"],["clippath","clipPath"],["feblend","feBlend"],["fecolormatrix","feColorMatrix"],["fecomponenttransfer","feComponentTransfer"],["fecomposite","feComposite"],["feconvolvematrix",
"feConvolveMatrix"],["fediffuselighting","feDiffuseLighting"],["fedisplacementmap","feDisplacementMap"],["fedistantlight","feDistantLight"],["fedropshadow","feDropShadow"],["feflood","feFlood"],["fefunca","feFuncA"],["fefuncb","feFuncB"],["fefuncg","feFuncG"],["fefuncr","feFuncR"],["fegaussianblur","feGaussianBlur"],["feimage","feImage"],["femerge","feMerge"],["femergenode","feMergeNode"],["femorphology","feMorphology"],["feoffset","feOffset"],["fepointlight","fePointLight"],["fespecularlighting",
"feSpecularLighting"],["fespotlight","feSpotLight"],["fetile","feTile"],["feturbulence","feTurbulence"],["foreignobject","foreignObject"],["glyphref","glyphRef"],["lineargradient","linearGradient"],["radialgradient","radialGradient"],["textpath","textPath"]]);m.attributeNames=new Map([["definitionurl","definitionURL"],["attributename","attributeName"],["attributetype","attributeType"],["basefrequency","baseFrequency"],["baseprofile","baseProfile"],["calcmode","calcMode"],["clippathunits","clipPathUnits"],
["diffuseconstant","diffuseConstant"],["edgemode","edgeMode"],["filterunits","filterUnits"],["glyphref","glyphRef"],["gradienttransform","gradientTransform"],["gradientunits","gradientUnits"],["kernelmatrix","kernelMatrix"],["kernelunitlength","kernelUnitLength"],["keypoints","keyPoints"],["keysplines","keySplines"],["keytimes","keyTimes"],["lengthadjust","lengthAdjust"],["limitingconeangle","limitingConeAngle"],["markerheight","markerHeight"],["markerunits","markerUnits"],["markerwidth","markerWidth"],
["maskcontentunits","maskContentUnits"],["maskunits","maskUnits"],["numoctaves","numOctaves"],["pathlength","pathLength"],["patterncontentunits","patternContentUnits"],["patterntransform","patternTransform"],["patternunits","patternUnits"],["pointsatx","pointsAtX"],["pointsaty","pointsAtY"],["pointsatz","pointsAtZ"],["preservealpha","preserveAlpha"],["preserveaspectratio","preserveAspectRatio"],["primitiveunits","primitiveUnits"],["refx","refX"],["refy","refY"],["repeatcount","repeatCount"],["repeatdur",
"repeatDur"],["requiredextensions","requiredExtensions"],["requiredfeatures","requiredFeatures"],["specularconstant","specularConstant"],["specularexponent","specularExponent"],["spreadmethod","spreadMethod"],["startoffset","startOffset"],["stddeviation","stdDeviation"],["stitchtiles","stitchTiles"],["surfacescale","surfaceScale"],["systemlanguage","systemLanguage"],["tablevalues","tableValues"],["targetx","targetX"],["targety","targetY"],["textlength","textLength"],["viewbox","viewBox"],["viewtarget",
"viewTarget"],["xchannelselector","xChannelSelector"],["ychannelselector","yChannelSelector"],["zoomandpan","zoomAndPan"]])};
shadow$provide[51]=function(z,v,J,m){function t(B,E){if(B)return Object.keys(B).map(function(C){var H,I,K=null!==(H=B[C])&&void 0!==H?H:"";"foreign"===E.xmlMode&&(C=null!==(I=g.attributeNames.get(C))&&void 0!==I?I:C);return E.emptyAttrs||E.xmlMode||""!==K?C+'\x3d"'+(!1!==E.decodeEntities?k.encodeXML(K):K.replace(/"/g,"\x26quot;"))+'"':C}).join(" ")}function p(B,E){void 0===E&&(E={});B="length"in B?B:[B];for(var C="",H=0;H<B.length;H++)C+=n(B[H],E);return C}function n(B,E){switch(B.type){case h.Root:return p(B.children,
E);case h.Directive:case h.Doctype:return"\x3c"+B.data+"\x3e";case h.Comment:return"\x3c!--"+B.data+"--\x3e";case h.CDATA:return"\x3c![CDATA["+B.children[0].data+"]]\x3e";case h.Script:case h.Style:case h.Tag:var C;"foreign"===E.xmlMode&&(B.name=null!==(C=g.elementNames.get(B.name))&&void 0!==C?C:B.name,B.parent&&w.has(B.parent.name)&&(E=c(c({},E),{xmlMode:!1})));!E.xmlMode&&x.has(B.name)&&(E=c(c({},E),{xmlMode:"foreign"}));C="\x3c"+B.name;var H=t(B.attribs,E);H&&(C+=" "+H);if(0===B.children.length&&
(E.xmlMode?!1!==E.selfClosingTags:E.selfClosingTags&&u.has(B.name)))E.xmlMode||(C+=" "),C+="/\x3e";else if(C+="\x3e",0<B.children.length&&(C+=p(B.children,E)),E.xmlMode||!u.has(B.name))C+="\x3c/"+B.name+"\x3e";return C;case h.Text:return C=B.data||"",!1===E.decodeEntities||!E.xmlMode&&B.parent&&r.has(B.parent.name)||(C=k.encodeXML(C)),C}}var c=this&&this.__assign||function(){c=Object.assign||function(B){for(var E,C=1,H=arguments.length;C<H;C++){E=arguments[C];for(var I in E)Object.prototype.hasOwnProperty.call(E,
I)&&(B[I]=E[I])}return B};return c.apply(this,arguments)},e=this&&this.__createBinding||(Object.create?function(B,E,C,H){void 0===H&&(H=C);Object.defineProperty(B,H,{enumerable:!0,get:function(){return E[C]}})}:function(B,E,C,H){void 0===H&&(H=C);B[H]=E[C]}),f=this&&this.__setModuleDefault||(Object.create?function(B,E){Object.defineProperty(B,"default",{enumerable:!0,value:E})}:function(B,E){B["default"]=E});z=this&&this.__importStar||function(B){if(B&&B.__esModule)return B;var E={};if(null!=B)for(var C in B)"default"!==
C&&Object.prototype.hasOwnProperty.call(B,C)&&e(E,B,C);f(E,B);return E};Object.defineProperty(m,"__esModule",{value:!0});var h=z(v(39)),k=v(49),g=v(50),r=new Set("style script xmp iframe noembed noframes plaintext noscript".split(" ")),u=new Set("area base basefont br col command embed frame hr img input isindex keygen link meta param source track wbr".split(" "));m.default=p;var w=new Set("mi mo mn ms mtext annotation-xml foreignObject desc title".split(" ")),x=new Set(["svg","math"])};
shadow$provide[52]=function(z,v,J,m){function t(k,g){return(0,f.default)(k,g)}function p(k){return Array.isArray(k)?k.map(p).join(""):(0,e.isTag)(k)?"br"===k.name?"\n":p(k.children):(0,e.isCDATA)(k)?p(k.children):(0,e.isText)(k)?k.data:""}function n(k){return Array.isArray(k)?k.map(n).join(""):(0,e.hasChildren)(k)&&!(0,e.isComment)(k)?n(k.children):(0,e.isText)(k)?k.data:""}function c(k){return Array.isArray(k)?k.map(c).join(""):(0,e.hasChildren)(k)&&(k.type===h.ElementType.Tag||(0,e.isCDATA)(k))?
c(k.children):(0,e.isText)(k)?k.data:""}z=this&&this.__importDefault||function(k){return k&&k.__esModule?k:{"default":k}};Object.defineProperty(m,"__esModule",{value:!0});m.innerText=m.textContent=m.getText=m.getInnerHTML=m.getOuterHTML=void 0;var e=v(41),f=z(v(51)),h=v(39);m.getOuterHTML=t;m.getInnerHTML=function(k,g){return(0,e.hasChildren)(k)?k.children.map(function(r){return t(r,g)}).join(""):""};m.getText=p;m.textContent=n;m.innerText=c};
shadow$provide[53]=function(z,v,J,m){function t(e){var f;return null!==(f=e.children)&&void 0!==f?f:c}function p(e){return e.parent||null}Object.defineProperty(m,"__esModule",{value:!0});m.prevElementSibling=m.nextElementSibling=m.getName=m.hasAttrib=m.getAttributeValue=m.getSiblings=m.getParent=m.getChildren=void 0;var n=v(41),c=[];m.getChildren=t;m.getParent=p;m.getSiblings=function(e){var f=p(e);if(null!=f)return t(f);f=[e];var h=e.prev;for(e=e.next;null!=h;)f.unshift(h),h=h.prev;for(;null!=e;)f.push(e),
e=e.next;return f};m.getAttributeValue=function(e,f){var h;return null===(h=e.attribs)||void 0===h?void 0:h[f]};m.hasAttrib=function(e,f){return null!=e.attribs&&Object.prototype.hasOwnProperty.call(e.attribs,f)&&null!=e.attribs[f]};m.getName=function(e){return e.name};m.nextElementSibling=function(e){for(e=e.next;null!==e&&!(0,n.isTag)(e);)e=e.next;return e};m.prevElementSibling=function(e){for(e=e.prev;null!==e&&!(0,n.isTag)(e);)e=e.prev;return e}};
shadow$provide[54]=function(z,v,J,m){function t(p){p.prev&&(p.prev.next=p.next);p.next&&(p.next.prev=p.prev);if(p.parent){var n=p.parent.children;n.splice(n.lastIndexOf(p),1)}}Object.defineProperty(m,"__esModule",{value:!0});m.prepend=m.prependChild=m.append=m.appendChild=m.replaceElement=m.removeElement=void 0;m.removeElement=t;m.replaceElement=function(p,n){var c=n.prev=p.prev;c&&(c.next=n);if(c=n.next=p.next)c.prev=n;if(c=n.parent=p.parent)c=c.children,c[c.lastIndexOf(p)]=n};m.appendChild=function(p,
n){t(n);n.next=null;n.parent=p;1<p.children.push(n)?(p=p.children[p.children.length-2],p.next=n,n.prev=p):n.prev=null};m.append=function(p,n){t(n);var c=p.parent,e=p.next;n.next=e;n.prev=p;p.next=n;n.parent=c;e?(e.prev=n,c&&(p=c.children,p.splice(p.lastIndexOf(e),0,n))):c&&c.children.push(n)};m.prependChild=function(p,n){t(n);n.parent=p;n.prev=null;1!==p.children.unshift(n)?(p=p.children[1],p.prev=n,n.next=p):n.next=null};m.prepend=function(p,n){t(n);var c=p.parent;if(c){var e=c.children;e.splice(e.indexOf(p),
0,n)}p.prev&&(p.prev.next=n);n.parent=c;n.prev=p.prev;n.next=p;p.prev=n}};
shadow$provide[55]=function(z,v,J,m){function t(e,f,h,k){for(var g=[],r=0;r<f.length;r++){var u=f[r];if(e(u)&&(g.push(u),0>=--k))break;if(h&&(0,c.hasChildren)(u)&&0<u.children.length&&(u=t(e,u.children,h,k),g.push.apply(g,u),k-=u.length,0>=k))break}return g}function p(e,f,h){void 0===h&&(h=!0);for(var k=null,g=0;g<f.length&&!k;g++){var r=f[g];(0,c.isTag)(r)&&(e(r)?k=r:h&&0<r.children.length&&(k=p(e,r.children)))}return k}function n(e,f){return f.some(function(h){return(0,c.isTag)(h)&&(e(h)||0<h.children.length&&
n(e,h.children))})}Object.defineProperty(m,"__esModule",{value:!0});m.findAll=m.existsOne=m.findOne=m.findOneChild=m.find=m.filter=void 0;var c=v(41);m.filter=function(e,f,h,k){void 0===h&&(h=!0);void 0===k&&(k=Infinity);Array.isArray(f)||(f=[f]);return t(e,f,h,k)};m.find=t;m.findOneChild=function(e,f){return f.find(e)};m.findOne=p;m.existsOne=n;m.findAll=function(e,f){var h,k=[];f=f.filter(c.isTag);for(var g;g=f.shift();){var r=null===(h=g.children)||void 0===h?void 0:h.filter(c.isTag);r&&0<r.length&&
f.unshift.apply(f,r);e(g)&&k.push(g)}return k}};
shadow$provide[56]=function(z,v,J,m){function t(h,k){return"function"===typeof k?function(g){return(0,c.isTag)(g)&&k(g.attribs[h])}:function(g){return(0,c.isTag)(g)&&g.attribs[h]===k}}function p(h,k){return function(g){return h(g)||k(g)}}function n(h){var k=Object.keys(h).map(function(g){var r=h[g];return Object.prototype.hasOwnProperty.call(f,g)?f[g](r):t(g,r)});return 0===k.length?null:k.reduce(p)}Object.defineProperty(m,"__esModule",{value:!0});m.getElementsByTagType=m.getElementsByTagName=m.getElementById=
m.getElements=m.testElement=void 0;var c=v(41),e=v(55),f={tag_name:function(h){return"function"===typeof h?function(k){return(0,c.isTag)(k)&&h(k.name)}:"*"===h?c.isTag:function(k){return(0,c.isTag)(k)&&k.name===h}},tag_type:function(h){return"function"===typeof h?function(k){return h(k.type)}:function(k){return k.type===h}},tag_contains:function(h){return"function"===typeof h?function(k){return(0,c.isText)(k)&&h(k.data)}:function(k){return(0,c.isText)(k)&&k.data===h}}};m.testElement=function(h,k){return(h=
n(h))?h(k):!0};m.getElements=function(h,k,g,r){void 0===r&&(r=Infinity);return(h=n(h))?(0,e.filter)(h,k,g,r):[]};m.getElementById=function(h,k,g){void 0===g&&(g=!0);Array.isArray(k)||(k=[k]);return(0,e.findOne)(t("id",h),k,g)};m.getElementsByTagName=function(h,k,g,r){void 0===g&&(g=!0);void 0===r&&(r=Infinity);return(0,e.filter)(f.tag_name(h),k,g,r)};m.getElementsByTagType=function(h,k,g,r){void 0===g&&(g=!0);void 0===r&&(r=Infinity);return(0,e.filter)(f.tag_type(h),k,g,r)}};
shadow$provide[57]=function(z,v,J,m){function t(n,c){var e=[],f=[];if(n===c)return 0;for(var h=(0,p.hasChildren)(n)?n:n.parent;h;)e.unshift(h),h=h.parent;for(h=(0,p.hasChildren)(c)?c:c.parent;h;)f.unshift(h),h=h.parent;var k=Math.min(e.length,f.length);for(h=0;h<k&&e[h]===f[h];)h++;if(0===h)return 1;k=e[h-1];var g=k.children;f=f[h];return g.indexOf(e[h])>g.indexOf(f)?k===c?20:4:k===n?10:2}Object.defineProperty(m,"__esModule",{value:!0});m.uniqueSort=m.compareDocumentPosition=m.removeSubsets=void 0;
var p=v(41);m.removeSubsets=function(n){for(var c=n.length;0<=--c;){var e=n[c];if(0<c&&0<=n.lastIndexOf(e,c-1))n.splice(c,1);else for(e=e.parent;e;e=e.parent)if(n.includes(e)){n.splice(c,1);break}}return n};m.compareDocumentPosition=t;m.uniqueSort=function(n){n=n.filter(function(c,e,f){return!f.includes(c,e+1)});n.sort(function(c,e){c=t(c,e);return c&2?-1:c&4?1:0});return n}};
shadow$provide[58]=function(z,v,J,m){function t(w){var x;w=w.children;var B={type:"atom",items:(0,g.getElementsByTagName)("entry",w).map(function(C){var H,I=C.children;C={media:n(I)};f(C,"id","id",I);f(C,"title","title",I);var K=null===(H=c("link",I))||void 0===H?void 0:H.attribs.href;K&&(C.link=K);if(H=e("summary",I)||e("content",I))C.description=H;if(H=e("updated",I))C.pubDate=new Date(H);return C})};f(B,"id","id",w);f(B,"title","title",w);var E=null===(x=c("link",w))||void 0===x?void 0:x.attribs.href;
E&&(B.link=E);f(B,"description","subtitle",w);if(x=e("updated",w))B.updated=new Date(x);f(B,"author","email",w,!0);return B}function p(w){var x,B,E=null!==(B=null===(x=c("channel",w.children))||void 0===x?void 0:x.children)&&void 0!==B?B:[];w={type:w.name.substr(0,3),id:"",items:(0,g.getElementsByTagName)("item",w.children).map(function(C){var H=C.children;C={media:n(H)};f(C,"id","guid",H);f(C,"title","title",H);f(C,"link","link",H);f(C,"description","description",H);if(H=e("pubDate",H))C.pubDate=
new Date(H);return C})};f(w,"title","title",E);f(w,"link","link",E);f(w,"description","description",E);if(x=e("lastBuildDate",E))w.updated=new Date(x);f(w,"author","managingEditor",E,!0);return w}function n(w){return(0,g.getElementsByTagName)("media:content",w).map(function(x){x=x.attribs;for(var B={medium:x.medium,isDefault:!!x.isDefault},E=0,C=r;E<C.length;E++){var H=C[E];x[H]&&(B[H]=x[H])}E=0;for(C=u;E<C.length;E++)H=C[E],x[H]&&(B[H]=parseInt(x[H],10));x.expression&&(B.expression=x.expression);
return B})}function c(w,x){return(0,g.getElementsByTagName)(w,x,!0,1)[0]}function e(w,x,B){void 0===B&&(B=!1);return(0,k.textContent)((0,g.getElementsByTagName)(w,x,B,1)).trim()}function f(w,x,B,E,C){void 0===C&&(C=!1);(B=e(B,E,C))&&(w[x]=B)}function h(w){return"rss"===w||"feed"===w||"rdf:RDF"===w}Object.defineProperty(m,"__esModule",{value:!0});m.getFeed=void 0;var k=v(52),g=v(56);m.getFeed=function(w){return(w=c(h,w))?"feed"===w.name?t(w):p(w):null};var r=["url","type","lang"],u="fileSize bitrate framerate samplingrate channels duration height width".split(" ")};
shadow$provide[59]=function(z,v,J,m){var t=this&&this.__createBinding||(Object.create?function(n,c,e,f){void 0===f&&(f=e);Object.defineProperty(n,f,{enumerable:!0,get:function(){return c[e]}})}:function(n,c,e,f){void 0===f&&(f=e);n[f]=c[e]});z=this&&this.__exportStar||function(n,c){for(var e in n)"default"===e||Object.prototype.hasOwnProperty.call(c,e)||t(c,n,e)};Object.defineProperty(m,"__esModule",{value:!0});m.hasChildren=m.isDocument=m.isComment=m.isText=m.isCDATA=m.isTag=void 0;z(v(52),m);z(v(53),
m);z(v(54),m);z(v(55),m);z(v(56),m);z(v(57),m);z(v(58),m);var p=v(41);Object.defineProperty(m,"isTag",{enumerable:!0,get:function(){return p.isTag}});Object.defineProperty(m,"isCDATA",{enumerable:!0,get:function(){return p.isCDATA}});Object.defineProperty(m,"isText",{enumerable:!0,get:function(){return p.isText}});Object.defineProperty(m,"isComment",{enumerable:!0,get:function(){return p.isComment}});Object.defineProperty(m,"isDocument",{enumerable:!0,get:function(){return p.isDocument}});Object.defineProperty(m,
"hasChildren",{enumerable:!0,get:function(){return p.hasChildren}})};
shadow$provide[60]=function(z,v,J,m){J.exports={trueFunc:function(){return!0},falseFunc:function(){return!1}}};
shadow$provide[61]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.AttributeAction=m.IgnoreCaseMode=m.SelectorType=void 0;(function(t){t.Attribute="attribute";t.Pseudo="pseudo";t.PseudoElement="pseudo-element";t.Tag="tag";t.Universal="universal";t.Adjacent="adjacent";t.Child="child";t.Descendant="descendant";t.Parent="parent";t.Sibling="sibling";t.ColumnCombinator="column-combinator"})(m.SelectorType||(m.SelectorType={}));m.IgnoreCaseMode={Unknown:null,QuirksMode:"quirks",IgnoreCase:!0,
CaseSensitive:!1};(function(t){t.Any="any";t.Element="element";t.End="end";t.Equals="equals";t.Exists="exists";t.Hyphen="hyphen";t.Not="not";t.Start="start"})(m.AttributeAction||(m.AttributeAction={}))};
shadow$provide[62]=function(z,v,J,m){function t(w){switch(w.type){case f.SelectorType.Adjacent:case f.SelectorType.Child:case f.SelectorType.Descendant:case f.SelectorType.Parent:case f.SelectorType.Sibling:case f.SelectorType.ColumnCombinator:return!0;default:return!1}}function p(w,x,B){w=parseInt(x,16)-65536;return w!==w||B?x:0>w?String.fromCharCode(w+65536):String.fromCharCode(w>>10|55296,w&1023|56320)}function n(w){return 39===w||34===w}function c(w){return 32===w||9===w||10===w||12===w||13===
w}function e(w,x,B){function E(Ha){var Oa=x.slice(B+Ha).match(h);if(!Oa)throw Error("Expected name, found ".concat(x.slice(B)));Oa=Oa[0];B+=Ha+Oa.length;return Oa.replace(k,p)}function C(Ha){for(B+=Ha;B<x.length&&c(x.charCodeAt(B));)B++}function H(){for(var Ha=B+=1,Oa=1;0<Oa&&B<x.length;B++)40!==x.charCodeAt(B)||I(B)?41!==x.charCodeAt(B)||I(B)||Oa--:Oa++;if(Oa)throw Error("Parenthesis not matched");return x.slice(Ha,B-1).replace(k,p)}function I(Ha){for(var Oa=0;92===x.charCodeAt(--Ha);)Oa++;return 1===
(Oa&1)}function K(){if(0<R.length&&t(R[R.length-1]))throw Error("Did not expect successive traversals.");}function O(Ha){0<R.length&&R[R.length-1].type===f.SelectorType.Descendant?R[R.length-1].type=Ha:(K(),R.push({type:Ha}))}function Q(Ha,Oa){R.push({type:f.SelectorType.Attribute,name:Ha,action:Oa,value:E(1),namespace:null,ignoreCase:"quirks"})}function W(){R.length&&R[R.length-1].type===f.SelectorType.Descendant&&R.pop();if(0===R.length)throw Error("Empty sub-selector");w.push(R)}var R=[];C(0);
if(x.length===B)return B;a:for(;B<x.length;){var X=x.charCodeAt(B);switch(X){case 32:case 9:case 10:case 12:case 13:if(0===R.length||R[0].type!==f.SelectorType.Descendant)K(),R.push({type:f.SelectorType.Descendant});C(1);break;case 62:O(f.SelectorType.Child);C(1);break;case 60:O(f.SelectorType.Parent);C(1);break;case 126:O(f.SelectorType.Sibling);C(1);break;case 43:O(f.SelectorType.Adjacent);C(1);break;case 46:Q("class",f.AttributeAction.Element);break;case 35:Q("id",f.AttributeAction.Equals);break;
case 91:C(1);X=void 0;var ca=null;124===x.charCodeAt(B)?X=E(1):x.startsWith("*|",B)?(ca="*",X=E(2)):(X=E(0),124===x.charCodeAt(B)&&61!==x.charCodeAt(B+1)&&(ca=X,X=E(1)));C(0);var ka=f.AttributeAction.Exists,la=g.get(x.charCodeAt(B));if(la){ka=la;if(61!==x.charCodeAt(B+1))throw Error("Expected `\x3d`");C(2)}else 61===x.charCodeAt(B)&&(ka=f.AttributeAction.Equals,C(1));var Aa="";la=null;if("exists"!==ka){if(n(x.charCodeAt(B))){Aa=x.charCodeAt(B);for(var ta=B+1;ta<x.length&&(x.charCodeAt(ta)!==Aa||I(ta));)ta+=
1;if(x.charCodeAt(ta)!==Aa)throw Error("Attribute value didn't end");Aa=x.slice(B+1,ta).replace(k,p);B=ta+1}else{for(Aa=B;B<x.length&&(!c(x.charCodeAt(B))&&93!==x.charCodeAt(B)||I(B));)B+=1;Aa=x.slice(Aa,B).replace(k,p)}C(0);ta=x.charCodeAt(B)|32;115===ta?(la=!1,C(1)):105===ta&&(la=!0,C(1))}if(93!==x.charCodeAt(B))throw Error("Attribute selector didn't terminate");B+=1;R.push({type:f.SelectorType.Attribute,name:X,action:ka,value:Aa,namespace:ca,ignoreCase:la});break;case 58:if(58===x.charCodeAt(B+
1)){R.push({type:f.SelectorType.PseudoElement,name:E(2).toLowerCase(),data:40===x.charCodeAt(B)?H():null});continue}ca=E(1).toLowerCase();X=null;if(40===x.charCodeAt(B))if(r.has(ca)){if(n(x.charCodeAt(B+1)))throw Error("Pseudo-selector ".concat(ca," cannot be quoted"));X=[];B=e(X,x,B+1);if(41!==x.charCodeAt(B))throw Error("Missing closing parenthesis in :".concat(ca," (").concat(x,")"));B+=1}else X=H(),u.has(ca)&&(ka=X.charCodeAt(0),ka===X.charCodeAt(X.length-1)&&n(ka)&&(X=X.slice(1,-1))),X=X.replace(k,
p);R.push({type:f.SelectorType.Pseudo,name:ca,data:X});break;case 44:W();R=[];C(1);break;default:if(x.startsWith("/*",B)){ca=x.indexOf("*/",B+2);if(0>ca)throw Error("Comment was not terminated");B=ca+2;0===R.length&&C(0)}else{ca=null;ka=void 0;if(42===X)B+=1,ka="*";else if(124===X){if(ka="",124===x.charCodeAt(B+1)){O(f.SelectorType.ColumnCombinator);C(2);break}}else if(h.test(x.slice(B)))ka=E(0);else break a;124===x.charCodeAt(B)&&124!==x.charCodeAt(B+1)&&(ca=ka,42===x.charCodeAt(B+1)?(ka="*",B+=
2):ka=E(1));R.push("*"===ka?{type:f.SelectorType.Universal,namespace:ca}:{type:f.SelectorType.Tag,name:ka,namespace:ca})}}}W();return B}Object.defineProperty(m,"__esModule",{value:!0});m.parse=m.isTraversal=void 0;var f=v(61),h=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,k=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,g=new Map([[126,f.AttributeAction.Element],[94,f.AttributeAction.Start],[36,f.AttributeAction.End],[42,f.AttributeAction.Any],[33,f.AttributeAction.Not],[124,f.AttributeAction.Hyphen]]),
r=new Set("has not matches is where host host-context".split(" "));m.isTraversal=t;var u=new Set(["contains","icontains"]);m.parse=function(w){var x=[],B=e(x,"".concat(w),0);if(B<w.length)throw Error("Unmatched selector: ".concat(w.slice(B)));return x}};
shadow$provide[63]=function(z,v,J,m){function t(u){return u.map(function(w){return w.map(p).join("")}).join(", ")}function p(u,w,x){switch(u.type){case h.SelectorType.Child:return 0===w?"\x3e ":" \x3e ";case h.SelectorType.Parent:return 0===w?"\x3c ":" \x3c ";case h.SelectorType.Sibling:return 0===w?"~ ":" ~ ";case h.SelectorType.Adjacent:return 0===w?"+ ":" + ";case h.SelectorType.Descendant:return" ";case h.SelectorType.ColumnCombinator:return 0===w?"|| ":" || ";case h.SelectorType.Universal:return"*"===
u.namespace&&w+1<x.length&&"name"in x[w+1]?"":"".concat(e(u.namespace),"*");case h.SelectorType.Tag:return c(u);case h.SelectorType.PseudoElement:return"::".concat(f(u.name,r)).concat(null===u.data?"":"(".concat(f(u.data,g),")"));case h.SelectorType.Pseudo:return":".concat(f(u.name,r)).concat(null===u.data?"":"(".concat("string"===typeof u.data?f(u.data,g):t(u.data),")"));case h.SelectorType.Attribute:if("id"===u.name&&u.action===h.AttributeAction.Equals&&"quirks"===u.ignoreCase&&!u.namespace)return"#".concat(f(u.value,
r));if("class"===u.name&&u.action===h.AttributeAction.Element&&"quirks"===u.ignoreCase&&!u.namespace)return".".concat(f(u.value,r));w=c(u);return u.action===h.AttributeAction.Exists?"[".concat(w,"]"):"[".concat(w).concat(n(u.action),'\x3d"').concat(f(u.value,k),'"').concat(null===u.ignoreCase?"":u.ignoreCase?" i":" s","]")}}function n(u){switch(u){case h.AttributeAction.Equals:return"";case h.AttributeAction.Element:return"~";case h.AttributeAction.Start:return"^";case h.AttributeAction.End:return"$";
case h.AttributeAction.Any:return"*";case h.AttributeAction.Not:return"!";case h.AttributeAction.Hyphen:return"|";case h.AttributeAction.Exists:throw Error("Shouldn't be here");}}function c(u){return"".concat(e(u.namespace)).concat(f(u.name,r))}function e(u){return null!==u?"".concat("*"===u?"*":f(u,r),"|"):""}function f(u,w){for(var x=0,B="",E=0;E<u.length;E++)w.has(u.charCodeAt(E))&&(B+="".concat(u.slice(x,E),"\\").concat(u.charAt(E)),x=E+1);return 0<B.length?B+u.slice(x):u}z=this&&this.__spreadArray||
function(u,w,x){if(x||2===arguments.length)for(var B=0,E=w.length,C;B<E;B++)!C&&B in w||(C||(C=Array.prototype.slice.call(w,0,B)),C[B]=w[B]);return u.concat(C||Array.prototype.slice.call(w))};Object.defineProperty(m,"__esModule",{value:!0});m.stringify=void 0;var h=v(61);v=["\\",'"'];J=z(z([],v,!0),["(",")"],!1);var k=new Set(v.map(function(u){return u.charCodeAt(0)})),g=new Set(J.map(function(u){return u.charCodeAt(0)})),r=new Set(z(z([],J,!0),"~^$*+!|:[] .".split(""),!1).map(function(u){return u.charCodeAt(0)}));
m.stringify=t};
shadow$provide[64]=function(z,v,J,m){var t=this&&this.__createBinding||(Object.create?function(c,e,f,h){void 0===h&&(h=f);var k=Object.getOwnPropertyDescriptor(e,f);if(!k||("get"in k?!e.__esModule:k.writable||k.configurable))k={enumerable:!0,get:function(){return e[f]}};Object.defineProperty(c,h,k)}:function(c,e,f,h){void 0===h&&(h=f);c[h]=e[f]});z=this&&this.__exportStar||function(c,e){for(var f in c)"default"===f||Object.prototype.hasOwnProperty.call(e,f)||t(e,c,f)};Object.defineProperty(m,"__esModule",
{value:!0});m.stringify=m.parse=m.isTraversal=void 0;z(v(61),m);var p=v(62);Object.defineProperty(m,"isTraversal",{enumerable:!0,get:function(){return p.isTraversal}});Object.defineProperty(m,"parse",{enumerable:!0,get:function(){return p.parse}});var n=v(63);Object.defineProperty(m,"stringify",{enumerable:!0,get:function(){return n.stringify}})};
shadow$provide[65]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.isTraversal=m.procedure=void 0;m.procedure={universal:50,tag:30,attribute:1,pseudo:0,"pseudo-element":0,"column-combinator":-1,descendant:-1,child:-1,parent:-1,sibling:-1,adjacent:-1,_flexibleDescendant:-1};m.isTraversal=function(t){return 0>m.procedure[t.type]}};
shadow$provide[66]=function(z,v,J,m){function t(e){var f=n.procedure[e.type];if(e.type===p.SelectorType.Attribute)f=c[e.action],f===c.equals&&"id"===e.name&&(f=9),e.ignoreCase&&(f>>=1);else if(e.type===p.SelectorType.Pseudo)if(e.data)if("has"===e.name||"contains"===e.name)f=0;else if(Array.isArray(e.data)){for(var h=f=0;h<e.data.length;h++)if(1===e.data[h].length){var k=t(e.data[h][0]);if(0===k){f=0;break}k>f&&(f=k)}1<e.data.length&&0<f&&--f}else f=1;else f=3;return f}Object.defineProperty(m,"__esModule",
{value:!0});var p=v(64),n=v(65),c={exists:10,equals:8,not:7,start:6,end:6,any:5,hyphen:4,element:4};m.default=function(e){for(var f=e.map(t),h=1;h<e.length;h++){var k=f[h];if(!(0>k))for(var g=h-1;0<=g&&k<f[g];g--){var r=e[g+1];e[g+1]=e[g];e[g]=r;f[g+1]=f[g];f[g]=k}}}};
shadow$provide[67]=function(z,v,J,m){function t(e,f){return"boolean"===typeof e.ignoreCase?e.ignoreCase:"quirks"===e.ignoreCase?!!f.quirksMode:!f.xmlMode&&c.has(e.name)}Object.defineProperty(m,"__esModule",{value:!0});m.attributeRules=void 0;var p=v(60),n=/[-[\]{}()*+?.,\\^$|#\s]/g,c=new Set("accept accept-charset align alink axis bgcolor charset checked clear codetype color compact declare defer dir direction disabled enctype face frame hreflang http-equiv lang language link media method multiple nohref noresize noshade nowrap readonly rel rev rules scope scrolling selected shape target text type valign valuetype vlink".split(" "));
m.attributeRules={equals:function(e,f,h){var k=h.adapter,g=f.name,r=f.value;return t(f,h)?(r=r.toLowerCase(),function(u){var w=k.getAttributeValue(u,g);return null!=w&&w.length===r.length&&w.toLowerCase()===r&&e(u)}):function(u){return k.getAttributeValue(u,g)===r&&e(u)}},hyphen:function(e,f,h){var k=h.adapter,g=f.name,r=f.value,u=r.length;return t(f,h)?(r=r.toLowerCase(),function(w){var x=k.getAttributeValue(w,g);return null!=x&&(x.length===u||"-"===x.charAt(u))&&x.substr(0,u).toLowerCase()===r&&
e(w)}):function(w){var x=k.getAttributeValue(w,g);return null!=x&&(x.length===u||"-"===x.charAt(u))&&x.substr(0,u)===r&&e(w)}},element:function(e,f,h){var k=h.adapter,g=f.name,r=f.value;if(/\s/.test(r))return p.falseFunc;var u=new RegExp("(?:^|\\s)".concat(r.replace(n,"\\$\x26"),"(?:$|\\s)"),t(f,h)?"i":"");return function(w){var x=k.getAttributeValue(w,g);return null!=x&&x.length>=r.length&&u.test(x)&&e(w)}},exists:function(e,f,h){var k=f.name,g=h.adapter;return function(r){return g.hasAttrib(r,k)&&
e(r)}},start:function(e,f,h){var k=h.adapter,g=f.name,r=f.value,u=r.length;return 0===u?p.falseFunc:t(f,h)?(r=r.toLowerCase(),function(w){var x=k.getAttributeValue(w,g);return null!=x&&x.length>=u&&x.substr(0,u).toLowerCase()===r&&e(w)}):function(w){var x;return!(null===(x=k.getAttributeValue(w,g))||void 0===x||!x.startsWith(r))&&e(w)}},end:function(e,f,h){var k=h.adapter,g=f.name,r=f.value,u=-r.length;return 0===u?p.falseFunc:t(f,h)?(r=r.toLowerCase(),function(w){var x;return(null===(x=k.getAttributeValue(w,
g))||void 0===x?void 0:x.substr(u).toLowerCase())===r&&e(w)}):function(w){var x;return!(null===(x=k.getAttributeValue(w,g))||void 0===x||!x.endsWith(r))&&e(w)}},any:function(e,f,h){var k=h.adapter,g=f.name,r=f.value;if(""===r)return p.falseFunc;if(t(f,h)){var u=new RegExp(r.replace(n,"\\$\x26"),"i");return function(w){var x=k.getAttributeValue(w,g);return null!=x&&x.length>=r.length&&u.test(x)&&e(w)}}return function(w){var x;return!(null===(x=k.getAttributeValue(w,g))||void 0===x||!x.includes(r))&&
e(w)}},not:function(e,f,h){var k=h.adapter,g=f.name,r=f.value;return""===r?function(u){return!!k.getAttributeValue(u,g)&&e(u)}:t(f,h)?(r=r.toLowerCase(),function(u){var w=k.getAttributeValue(u,g);return(null==w||w.length!==r.length||w.toLowerCase()!==r)&&e(u)}):function(u){return k.getAttributeValue(u,g)!==r&&e(u)}}}};
shadow$provide[68]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.parse=void 0;var t=new Set([9,10,12,13,32]);m.parse=function(p){function n(){if("-"===p.charAt(f))return f++,-1;"+"===p.charAt(f)&&f++;return 1}function c(){for(var r=f,u=0;f<p.length&&48<=p.charCodeAt(f)&&57>=p.charCodeAt(f);)u=10*u+(p.charCodeAt(f)-48),f++;return f===r?null:u}function e(){for(;f<p.length&&t.has(p.charCodeAt(f));)f++}p=p.trim().toLowerCase();if("even"===p)return[2,0];if("odd"===p)return[2,1];
var f=0,h=0,k=n(),g=c();f<p.length&&"n"===p.charAt(f)&&(f++,h=k*(null!==g&&void 0!==g?g:1),e(),f<p.length?(k=n(),e(),g=c()):k=g=0);if(null===g||f<p.length)throw Error("n-th rule couldn't be parsed ('".concat(p,"')"));return[h,k*g]}};
shadow$provide[69]=function(z,v,J,m){z=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{"default":p}};Object.defineProperty(m,"__esModule",{value:!0});m.generate=m.compile=void 0;var t=z(v(60));m.compile=function(p){var n=p[0],c=p[1]-1;if(0>c&&0>=n)return t.default.falseFunc;if(-1===n)return function(h){return h<=c};if(0===n)return function(h){return h===c};if(1===n)return 0>c?t.default.trueFunc:function(h){return h>=c};var e=Math.abs(n),f=(c%e+e)%e;return 1<n?function(h){return h>=
c&&h%e===f}:function(h){return h<=c&&h%e===f}};m.generate=function(p){var n=p[0],c=p[1]-1,e=0;if(0>n){var f=-n,h=(c%f+f)%f;return function(){var k=h+f*e++;return k>c?null:k}}if(0===n)return 0>c?function(){return null}:function(){return 0===e++?c:null};0>c&&(c+=n*Math.ceil(-c/n));return function(){return n*e++ +c}}};
shadow$provide[70]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.sequence=m.generate=m.compile=m.parse=void 0;var t=v(68);Object.defineProperty(m,"parse",{enumerable:!0,get:function(){return t.parse}});var p=v(69);Object.defineProperty(m,"compile",{enumerable:!0,get:function(){return p.compile}});Object.defineProperty(m,"generate",{enumerable:!0,get:function(){return p.generate}});m.default=function(n){return(0,p.compile)((0,t.parse)(n))};m.sequence=function(n){return(0,p.generate)((0,t.parse)(n))}};
shadow$provide[71]=function(z,v,J,m){function t(e,f){return function(h){var k=f.getParent(h);return null!=k&&f.isTag(k)&&e(h)}}function p(e){return function(f,h,k){var g=k.adapter[e];return"function"!==typeof g?c.falseFunc:function(r){return g(r)&&f(r)}}}z=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(m,"__esModule",{value:!0});m.filters=void 0;var n=z(v(70)),c=v(60);m.filters={contains:function(e,f,h){var k=h.adapter;return function(g){return e(g)&&
k.getText(g).includes(f)}},icontains:function(e,f,h){var k=h.adapter,g=f.toLowerCase();return function(r){return e(r)&&k.getText(r).toLowerCase().includes(g)}},"nth-child":function(e,f,h){var k=h.adapter,g=h.equals,r=(0,n.default)(f);return r===c.falseFunc?c.falseFunc:r===c.trueFunc?t(e,k):function(u){for(var w=k.getSiblings(u),x=0,B=0;B<w.length&&!g(u,w[B]);B++)k.isTag(w[B])&&x++;return r(x)&&e(u)}},"nth-last-child":function(e,f,h){var k=h.adapter,g=h.equals,r=(0,n.default)(f);return r===c.falseFunc?
c.falseFunc:r===c.trueFunc?t(e,k):function(u){for(var w=k.getSiblings(u),x=0,B=w.length-1;0<=B&&!g(u,w[B]);B--)k.isTag(w[B])&&x++;return r(x)&&e(u)}},"nth-of-type":function(e,f,h){var k=h.adapter,g=h.equals,r=(0,n.default)(f);return r===c.falseFunc?c.falseFunc:r===c.trueFunc?t(e,k):function(u){for(var w=k.getSiblings(u),x=0,B=0;B<w.length;B++){var E=w[B];if(g(u,E))break;k.isTag(E)&&k.getName(E)===k.getName(u)&&x++}return r(x)&&e(u)}},"nth-last-of-type":function(e,f,h){var k=h.adapter,g=h.equals,r=
(0,n.default)(f);return r===c.falseFunc?c.falseFunc:r===c.trueFunc?t(e,k):function(u){for(var w=k.getSiblings(u),x=0,B=w.length-1;0<=B;B--){var E=w[B];if(g(u,E))break;k.isTag(E)&&k.getName(E)===k.getName(u)&&x++}return r(x)&&e(u)}},root:function(e,f,h){var k=h.adapter;return function(g){var r=k.getParent(g);return(null==r||!k.isTag(r))&&e(g)}},scope:function(e,f,h,k){var g=h.equals;return k&&0!==k.length?1===k.length?function(r){return g(k[0],r)&&e(r)}:function(r){return k.includes(r)&&e(r)}:m.filters.root(e,
f,h)},hover:p("isHovered"),visited:p("isVisited"),active:p("isActive")}};
shadow$provide[72]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.verifyPseudoArgs=m.pseudos=void 0;m.pseudos={empty:function(t,p){var n=p.adapter;return!n.getChildren(t).some(function(c){return n.isTag(c)||""!==n.getText(c)})},"first-child":function(t,p){var n=p.adapter;p=p.equals;var c=n.getSiblings(t).find(function(e){return n.isTag(e)});return null!=c&&p(t,c)},"last-child":function(t,p){var n=p.adapter;p=p.equals;for(var c=n.getSiblings(t),e=c.length-1;0<=e;e--){if(p(t,c[e]))return!0;
if(n.isTag(c[e]))break}return!1},"first-of-type":function(t,p){var n=p.adapter;p=p.equals;for(var c=n.getSiblings(t),e=n.getName(t),f=0;f<c.length;f++){var h=c[f];if(p(t,h))return!0;if(n.isTag(h)&&n.getName(h)===e)break}return!1},"last-of-type":function(t,p){var n=p.adapter;p=p.equals;for(var c=n.getSiblings(t),e=n.getName(t),f=c.length-1;0<=f;f--){var h=c[f];if(p(t,h))return!0;if(n.isTag(h)&&n.getName(h)===e)break}return!1},"only-of-type":function(t,p){var n=p.adapter,c=p.equals,e=n.getName(t);return n.getSiblings(t).every(function(f){return c(t,
f)||!n.isTag(f)||n.getName(f)!==e})},"only-child":function(t,p){var n=p.adapter,c=p.equals;return n.getSiblings(t).every(function(e){return c(t,e)||!n.isTag(e)})}};m.verifyPseudoArgs=function(t,p,n){if(null===n){if(2<t.length)throw Error("pseudo-selector :".concat(p," requires an argument"));}else if(2===t.length)throw Error("pseudo-selector :".concat(p," doesn't have any arguments"));}};
shadow$provide[73]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.aliases=void 0;m.aliases={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:":is(\n        :is(button, input, select, textarea, optgroup, option)[disabled],\n        optgroup[disabled] \x3e option,\n        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)\n    )",enabled:":not(:disabled)",checked:":is(:is(input[type\x3dradio], input[type\x3dcheckbox])[checked], option:selected)",
required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(\x3e option[selected])) \x3e :first-of-type)",checkbox:"[type\x3dcheckbox]",file:"[type\x3dfile]",password:"[type\x3dpassword]",radio:"[type\x3dradio]",reset:"[type\x3dreset]",image:"[type\x3dimage]",submit:"[type\x3dsubmit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type\x3dbutton])",input:":is(input, textarea, select, button)",
text:"input:is(:not([type!\x3d'']), [type\x3dtext])"}};
shadow$provide[74]=function(z,v,J,m){function t(f,h){return f===c.falseFunc?c.falseFunc:function(k){return h.isTag(k)&&f(k)}}function p(f,h){var k=h.getSiblings(f);if(1>=k.length)return[];f=k.indexOf(f);return 0>f||f===k.length-1?[]:k.slice(f+1).filter(h.isTag)}var n=this&&this.__spreadArray||function(f,h,k){if(k||2===arguments.length)for(var g=0,r=h.length,u;g<r;g++)!u&&g in h||(u||(u=Array.prototype.slice.call(h,0,g)),u[g]=h[g]);return f.concat(u||Array.prototype.slice.call(h))};Object.defineProperty(m,
"__esModule",{value:!0});m.subselects=m.getNextSiblings=m.ensureIsTag=m.PLACEHOLDER_ELEMENT=void 0;var c=v(60),e=v(65);m.PLACEHOLDER_ELEMENT={};m.ensureIsTag=t;m.getNextSiblings=p;z=function(f,h,k,g,r){var u=r(h,{xmlMode:!!k.xmlMode,adapter:k.adapter,equals:k.equals},g);return function(w){return u(w)&&f(w)}};m.subselects={is:z,matches:z,where:z,not:function(f,h,k,g,r){var u=r(h,{xmlMode:!!k.xmlMode,adapter:k.adapter,equals:k.equals},g);return u===c.falseFunc?f:u===c.trueFunc?c.falseFunc:function(w){return!u(w)&&
f(w)}},has:function(f,h,k,g,r){var u=k.adapter;k={xmlMode:!!k.xmlMode,adapter:u,equals:k.equals};var w=h.some(function(E){return E.some(e.isTraversal)})?[m.PLACEHOLDER_ELEMENT]:void 0;h=r(h,k,w);if(h===c.falseFunc)return c.falseFunc;if(h===c.trueFunc)return function(E){return u.getChildren(E).some(u.isTag)&&f(E)};var x=t(h,u);h=h.shouldTestNextSiblings;var B=void 0===h?!1:h;return w?function(E){w[0]=E;var C=u.getChildren(E);C=B?n(n([],C,!0),p(E,u),!0):C;return f(E)&&u.existsOne(x,C)}:function(E){return f(E)&&
u.existsOne(x,u.getChildren(E))}}}};
shadow$provide[75]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.compilePseudoSelector=m.aliases=m.pseudos=m.filters=void 0;var t=v(60),p=v(64),n=v(71);Object.defineProperty(m,"filters",{enumerable:!0,get:function(){return n.filters}});var c=v(72);Object.defineProperty(m,"pseudos",{enumerable:!0,get:function(){return c.pseudos}});var e=v(73);Object.defineProperty(m,"aliases",{enumerable:!0,get:function(){return e.aliases}});var f=v(74);m.compilePseudoSelector=function(h,k,g,
r,u){var w=k.name,x=k.data;if(Array.isArray(x))return f.subselects[w](h,x,g,r,u);if(w in e.aliases){if(null!=x)throw Error("Pseudo ".concat(w," doesn't have any arguments"));k=(0,p.parse)(e.aliases[w]);return f.subselects.is(h,k,g,r,u)}if(w in n.filters)return n.filters[w](h,x,g,r);if(w in c.pseudos){var B=c.pseudos[w];(0,c.verifyPseudoArgs)(B,w,x);return B===t.falseFunc?t.falseFunc:h===t.trueFunc?function(E){return B(E,g,x)}:function(E){return B(E,g,x)&&h(E)}}throw Error("unmatched pseudo-class :".concat(w));
}};
shadow$provide[76]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.compileGeneralSelector=void 0;var t=v(67),p=v(75),n=v(64);m.compileGeneralSelector=function(c,e,f,h,k){var g=f.adapter,r=f.equals;switch(e.type){case n.SelectorType.PseudoElement:throw Error("Pseudo-elements are not supported by css-select");case n.SelectorType.ColumnCombinator:throw Error("Column combinators are not yet supported by css-select");case n.SelectorType.Attribute:if(null!=e.namespace)throw Error("Namespaced attributes are not yet supported by css-select");
if(!f.xmlMode||f.lowerCaseAttributeNames)e.name=e.name.toLowerCase();return t.attributeRules[e.action](c,e,f);case n.SelectorType.Pseudo:return(0,p.compilePseudoSelector)(c,e,f,h,k);case n.SelectorType.Tag:if(null!=e.namespace)throw Error("Namespaced tag names are not yet supported by css-select");var u=e.name;if(!f.xmlMode||f.lowerCaseTags)u=u.toLowerCase();return function(x){return g.getName(x)===u&&c(x)};case n.SelectorType.Descendant:if(!1===f.cacheResults||"undefined"===typeof WeakSet)return function(x){for(;x=
g.getParent(x);)if(g.isTag(x)&&c(x))return!0;return!1};var w=new WeakSet;return function(x){for(;x=g.getParent(x);)if(!w.has(x)){if(g.isTag(x)&&c(x))return!0;w.add(x)}return!1};case "_flexibleDescendant":return function(x){do if(g.isTag(x)&&c(x))return!0;while(x=g.getParent(x));return!1};case n.SelectorType.Parent:return function(x){return g.getChildren(x).some(function(B){return g.isTag(B)&&c(B)})};case n.SelectorType.Child:return function(x){x=g.getParent(x);return null!=x&&g.isTag(x)&&c(x)};case n.SelectorType.Sibling:return function(x){for(var B=
g.getSiblings(x),E=0;E<B.length;E++){var C=B[E];if(r(x,C))break;if(g.isTag(C)&&c(C))return!0}return!1};case n.SelectorType.Adjacent:return g.prevElementSibling?function(x){x=g.prevElementSibling(x);return null!=x&&c(x)}:function(x){for(var B=g.getSiblings(x),E,C=0;C<B.length;C++){var H=B[C];if(r(x,H))break;g.isTag(H)&&(E=H)}return!!E&&c(E)};case n.SelectorType.Universal:if(null!=e.namespace&&"*"!==e.namespace)throw Error("Namespaced universal selectors are not yet supported by css-select");return c}}};
shadow$provide[77]=function(z,v,J,m){function t(C,H,I){C="string"===typeof C?(0,h.parse)(C):C;return c(C,H,I)}function p(C){return"pseudo"===C.type&&("scope"===C.name||Array.isArray(C.data)&&C.data.some(function(H){return H.some(p)}))}function n(C,H,I){var K=H.adapter;H=!(null===I||void 0===I||!I.every(function(Q){var W=K.isTag(Q)&&K.getParent(Q);return Q===w.PLACEHOLDER_ELEMENT||W&&K.isTag(W)}));for(I=0;I<C.length;I++){var O=C[I];if(!(0<O.length&&(0,r.isTraversal)(O[0])&&"descendant"!==O[0].type))if(H&&
!O.some(p))O.unshift(x);else continue;O.unshift(E)}}function c(C,H,I){var K;C=C.filter(function(R){return 0<R.length});C.forEach(g.default);I=null!==(K=H.context)&&void 0!==K?K:I;var O=Array.isArray(I),Q=I&&(Array.isArray(I)?I:[I]);n(C,H,Q);var W=!1;C=C.map(function(R){if(2<=R.length){var X=R[0],ca=R[1];if("pseudo"===X.type&&"scope"===X.name)if(O&&"descendant"===ca.type)R[1]=B;else if("adjacent"===ca.type||"sibling"===ca.type)W=!0}return e(R,H,Q)}).reduce(f,k.falseFunc);C.shouldTestNextSiblings=W;
return C}function e(C,H,I){var K;return C.reduce(function(O,Q){return O===k.falseFunc?k.falseFunc:(0,u.compileGeneralSelector)(O,Q,H,I,c)},null!==(K=H.rootFunc)&&void 0!==K?K:k.trueFunc)}function f(C,H){return H===k.falseFunc||C===k.trueFunc?C:C===k.falseFunc||H===k.trueFunc?H:function(I){return C(I)||H(I)}}z=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{"default":C}};Object.defineProperty(m,"__esModule",{value:!0});m.compileToken=m.compileUnsafe=m.compile=void 0;var h=v(64),k=
v(60),g=z(v(66)),r=v(65),u=v(76),w=v(74);m.compile=function(C,H,I){C=t(C,H,I);return(0,w.ensureIsTag)(C,H.adapter)};m.compileUnsafe=t;var x={type:h.SelectorType.Descendant},B={type:"_flexibleDescendant"},E={type:h.SelectorType.Pseudo,name:"scope",data:null};m.compileToken=c};
shadow$provide[78]=function(z,v,J,m){function t(B){var E,C,H,I;B=null!==B&&void 0!==B?B:w;null!==(E=B.adapter)&&void 0!==E?E:B.adapter=h;null!==(C=B.equals)&&void 0!==C?C:B.equals=null!==(I=null===(H=B.adapter)||void 0===H?void 0:H.equals)&&void 0!==I?I:u;return B}function p(B){return function(E,C,H){C=t(C);return B(E,C,H)}}function n(B){return function(E,C,H){H=t(H);"function"!==typeof E&&(E=(0,g.compileUnsafe)(E,H,C));C=c(C,H.adapter,E.shouldTestNextSiblings);return B(E,C,H)}}function c(B,E,C){void 0===
C&&(C=!1);if(C){B=Array.isArray(B)?B.slice(0):[B];C=B.length;for(var H=0;H<C;H++){var I=(0,r.getNextSiblings)(B[H],E);B.push.apply(B,I)}}return Array.isArray(B)?E.removeSubsets(B):E.getChildren(B)}var e=this&&this.__createBinding||(Object.create?function(B,E,C,H){void 0===H&&(H=C);var I=Object.getOwnPropertyDescriptor(E,C);if(!I||("get"in I?!E.__esModule:I.writable||I.configurable))I={enumerable:!0,get:function(){return E[C]}};Object.defineProperty(B,H,I)}:function(B,E,C,H){void 0===H&&(H=C);B[H]=
E[C]}),f=this&&this.__setModuleDefault||(Object.create?function(B,E){Object.defineProperty(B,"default",{enumerable:!0,value:E})}:function(B,E){B["default"]=E});z=this&&this.__importStar||function(B){if(B&&B.__esModule)return B;var E={};if(null!=B)for(var C in B)"default"!==C&&Object.prototype.hasOwnProperty.call(B,C)&&e(E,B,C);f(E,B);return E};Object.defineProperty(m,"__esModule",{value:!0});m.aliases=m.pseudos=m.filters=m.is=m.selectOne=m.selectAll=m.prepareContext=m._compileToken=m._compileUnsafe=
m.compile=void 0;var h=z(v(59)),k=v(60),g=v(77),r=v(74),u=function(B,E){return B===E},w={adapter:h,equals:u};m.compile=p(g.compile);m._compileUnsafe=p(g.compileUnsafe);m._compileToken=p(g.compileToken);m.prepareContext=c;m.selectAll=n(function(B,E,C){return B!==k.falseFunc&&E&&0!==E.length?C.adapter.findAll(B,E):[]});m.selectOne=n(function(B,E,C){return B!==k.falseFunc&&E&&0!==E.length?C.adapter.findOne(B,E):null});m.is=function(B,E,C){C=t(C);return("function"===typeof E?E:(0,g.compile)(E,C))(B)};
m.default=m.selectAll;var x=v(75);Object.defineProperty(m,"filters",{enumerable:!0,get:function(){return x.filters}});Object.defineProperty(m,"pseudos",{enumerable:!0,get:function(){return x.pseudos}});Object.defineProperty(m,"aliases",{enumerable:!0,get:function(){return x.aliases}})};
shadow$provide[79]=function(z,v,J,m){function t(n){return n.children||[]}Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;const p={isTag:function(n){return!0},existsOne(n,c){return c.some(e=>n(e)||p.existsOne(n,t(e)))},getSiblings(n){const c=n.parent;return c?t(c):[n]},getChildren:t,getParent:function(n){return n.parent},getAttributeValue(n,c){return"class"===c?n.props.classes.join(" "):"id"===c?n.id:""},hasAttrib(n,c){return"id"===c?!!n.id:"class"===c?0<n.props.classes.length:n.traits.hash?
Object.prototype.hasOwnProperty.call(n.traits.hash,c):!1},removeSubsets:function(n){const c=new Set(n);c.forEach(e=>{let f=e.parent;for(;f;){if(c.has(f)){c.delete(e);break}f=f.parent}});return Array.from(c)},getName(n){var c;return null!==(c=n.type)&&void 0!==c?c:""},findOne:function f(c,e){for(const h of e){if(c(h))return h;if(e=f(c,t(h)))return e}return null},findAll:function h(e,f){const k=[];for(const g of f)e(g)&&k.push(g),k.push(...h(e,t(g)));return k},getText:function(e){return""}};m.default=
p};
shadow$provide[80]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.compile=m.selectAll=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==
k&&Object.prototype.hasOwnProperty.call(c,k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(78)),n=function(c){return c&&c.__esModule?c:{default:c}}(v(79));m.selectAll=(c,e)=>{try{p.compile(c)}catch(h){return[]}var f=Array.isArray(e);if(f&&0===e.length)return[];for(f=f?e[0]:e;null!==n.default.getParent(f);)f=n.default.getParent(f);f=p.selectAll(c,f,{adapter:n.default});if(e){c=[];e=Array.isArray(e)?
e:[e];e=new Set(e);for(const h of Array.from(f))for(f=h;null!=f;){if(e.has(f)){c.push(h);break}f=n.default.getParent(f)}return c}return f};m.compile=c=>{try{return p.compile(c,{adapter:n.default})}catch(e){return()=>!1}}};
shadow$provide[81]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Model=void 0;var t=v(80);const p=/^<([0-9]+|<*)$/;class n{constructor(c){this.root=c;this.root.model=this;this.root.root=this.root;this.ids={};this.classes={};this.traits={};this.types={};this.nodes=[];this.watchers=[];this.fire=!1;this.lastNode=null;this.event={type:"update"};this.root.on("add",R=>e(R.node));this.root.on("remove",R=>{R=R.node;I(R);O(R);W(R);B(R.id,R);C(R.classes,R);R.off("change:node",g);return k(R)});
const e=R=>{H(R);K(R);Q(R);R.on("change:node",g);g(null,R,!0);return k(R)},f=R=>{for(const X of Array.from(this.watchers))X.match=X.matcher(R);return null},h=R=>{for(const X of Array.from(this.watchers)){const ca=X.fire||(X.fire=X.match!==X.matcher(R));ca&&(this.lastNode=R);this.fire||(this.fire=ca)}return null},k=R=>{for(const X of Array.from(this.watchers)){const ca=X.fire||(X.fire=X.matcher(R));ca&&(this.lastNode=R);this.fire||(this.fire=ca)}return null};this.digest=()=>{if(!this.fire)return!1;
for(const R of Array.from(this.watchers.slice()))R.fire&&(R.fire=!1,R.handler());this.fire=!1;return!0};const g=(R,X,ca)=>{var ka=ca||R.changed["node.classes"];let la=!1;if(ca||R.changed["node.id"])R=X.get("node.id"),R!==X.id&&(ca||f(X),la=!0,null!=X.id&&B(X.id,X),x(R,X));if(ka){var Aa;ka=null!=(Aa=X.get("node.classes"))?Aa:[];Aa=ka.join(",");Aa!==(null!=X.classes?X.classes.klass:void 0)&&(ka=ka.slice(),ca||la||f(X),la=!0,null!=X.classes&&C(X.classes,X),E(ka,X),X.classes=ka,X.classes.klass=Aa)}!ca&&
la&&h(X);return null},r=function(R,X,ca){if(null!=X){for(const ka of Array.from(X))X=null!=R[ka]?R[ka]:[],X.push(ca),R[ka]=X;return null}},u=function(R,X,ca){if(null!=X){for(const ka of Array.from(X)){X=R[ka];const la=X.indexOf(ca);0<=la&&X.splice(la,1);0===X.length&&delete R[ka]}return null}},w=function(R){if(0<R.length){var X=R.hash={};return Array.from(R).map(ca=>X[ca]=!0)}},x=(R,X)=>{if(this.ids[R])throw Error(`Duplicate node id \`${R}\``);null!=R&&(this.ids[R]=[X]);return X.id=null!=R?R:X._id},
B=(R,X)=>{null!=R&&delete this.ids[R];return X.id=X._id},E=(R,X)=>{r(this.classes,R,X);if(null!=R)return w(R)},C=(R,X)=>{u(this.classes,R,X);if(null!=R)return delete R.hash},H=R=>this.nodes.push(R),I=R=>this.nodes.splice(this.nodes.indexOf(R),1),K=R=>r(this.types,[R.type],R),O=R=>u(this.types,[R.type],R),Q=R=>{r(this.traits,R.traits,R);return w(R.traits)},W=R=>{u(this.traits,R.traits,R);return delete R.traits.hash};e(this.root);this.root.trigger({type:"added"})}select(c,e){return(0,t.selectAll)(c,
e||this.getRoot())}watch(c,e){let f;e.unwatch=()=>this.unwatch(e);e.watcher=f={selector:c,handler:e,matcher:this._matcher(c),match:!1,fire:!1};this.watchers.push(f);return this.select(c)}unwatch(c){const {watcher:e}=c;if(null!=e)return this.watchers.splice(this.watchers.indexOf(e),1),delete c.unwatch,delete c.watcher}_matcher(c){if(p.test(c))throw Error("Auto-link matcher unsupported");return(0,t.compile)(c)}getRoot(){return this.root}getLastTrigger(){return this.lastNode.toString()}}m.Model=n};
shadow$provide[82]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});var t=v(34);Object.keys(t).forEach(function(f){"default"!==f&&"__esModule"!==f&&(f in m&&m[f]===t[f]||Object.defineProperty(m,f,{enumerable:!0,get:function(){return t[f]}}))});var p=v(37);Object.keys(p).forEach(function(f){"default"!==f&&"__esModule"!==f&&(f in m&&m[f]===p[f]||Object.defineProperty(m,f,{enumerable:!0,get:function(){return p[f]}}))});var n=v(38);Object.keys(n).forEach(function(f){"default"!==f&&"__esModule"!==
f&&(f in m&&m[f]===n[f]||Object.defineProperty(m,f,{enumerable:!0,get:function(){return n[f]}}))});var c=v(81);Object.keys(c).forEach(function(f){"default"!==f&&"__esModule"!==f&&(f in m&&m[f]===c[f]||Object.defineProperty(m,f,{enumerable:!0,get:function(){return c[f]}}))});var e=v(36);Object.keys(e).forEach(function(f){"default"!==f&&"__esModule"!==f&&(f in m&&m[f]===e[f]||Object.defineProperty(m,f,{enumerable:!0,get:function(){return e[f]}}))})};
shadow$provide[83]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.OverlayFactory=void 0;class t{constructor(p,n){this.classes=p;this.canvas=n;p=document.createElement("div");p.classList.add("mathbox-overlays");this.div=p}inject(){const p=this.canvas.parentNode;if(!p)throw Error("Canvas not inserted into document.");return p.insertBefore(this.div,this.canvas)}unject(){return this.div.parentNode.removeChild(this.div)}getTypes(){return Object.keys(this.classes)}make(p,n){return new this.classes[p](this.div,
n)}}m.OverlayFactory=t};
shadow$provide[84]=function(z,v,J,m){function t(x,B,E){const C=[],H=x<B;for(B=E?H?B+1:B-1:B;H?x<B:x>B;H?x++:x--)C.push(x);return C}Object.defineProperty(m,"__esModule",{value:!0});m.createClass=m.apply=m.recycle=m.element=m.hint=m.Types=void 0;const p=[];let n=0;const c={};m.Types=c;const e=()=>({id:n++,type:null,props:null,children:null,rendered:null,instance:null});m.hint=function(x){x=Math.max(0,p.length-2*x);return t(0,x,!1).map(B=>p.push(e()))};const f=function(x,B,E){const C=p.length?p.pop():
e();C.type=null!=x?x:"div";C.props=null!=B?B:null;C.children=null!=E?E:null;return C};m.element=f;const h=function(x){if(x.type){var {children:B}=x;x.type=x.props=x.children=x.instance=null;p.push(x);if(null!=B)for(const E of Array.from(B))h(E)}};m.recycle=h;const k=function(x,B,E,C,H){if(null!=x){if(null==B)return g(x,C,H);var I;if(x instanceof Node){if(I=x===B)return}else I=typeof x===typeof B&&null!==B&&null!==x&&x.type===B.type;if(I){x.instance=B.instance;const X=null!=x.type&&x.type.isComponentClass?
x.type:c[x.type],ca=null!=B?B.props:void 0,ka=x.props;I=null!=(null!=B?B.children:void 0)?null!=B?B.children:void 0:null;var K=x.children;null!=ka&&(ka.children=K);if(null!=X){var O=E._COMPONENT_DIRTY;null!=ca!==(null!=ka)&&(O=!0);I!==K&&(O=!0);if(null!=ca&&null!=ka){if(!O)for(R in ca)Object.prototype.hasOwnProperty.call(ka,R)||(O=!0);if(!O)for(R in ka){var Q=ka[R];ca[R]!==Q&&(O=!0)}}if(O){var W;I=B.instance;null==x.props&&(x.props={});for(const la in I.defaultProps)K=I.defaultProps[la],null==x.props[la]&&
(x.props[la]=K);x.props.children=x.children;"function"===typeof I.willReceiveProps&&I.willReceiveProps(x.props);if(K=E._COMPONENT_FORCE||(null!=(W="function"===typeof I.shouldUpdate?I.shouldUpdate(x.props):void 0)?W:!0)){var R=I.getNextState();"function"===typeof I.willUpdate&&I.willUpdate(x.props,R)}R=I.props;W=I.applyNextState();I.props=x.props;I.children=x.children;K&&(x=x.rendered="function"===typeof I.render?I.render(f,x.props,x.children):void 0,k(x,B.rendered,E,C,H),"function"===typeof I.didUpdate&&
I.didUpdate(R,W))}}else{if(null!=ca)for(R in ca)if(!Object.prototype.hasOwnProperty.call(ka,R))if(x=E,B=R,C=ca[R],"style"===B)for(Q in C)x.style[null!=u[Q]?u[Q]:Q]="";else null!=x[B]&&(x[B]=void 0),x instanceof Node&&x.removeAttribute(B);if(null!=ka)for(R in ka)Q=ka[R],(O=ca[R])!==Q&&"children"!==R&&w(E,R,Q,O);if(null!=K)if(["string","number"].includes(typeof K))K!==I&&(E.textContent=K);else if(null!=K.type)k(K,I,E.childNodes[0],E,0);else if({childNodes:C}=E,null!=I)for(B=0;B<K.length;B++)x=K[B],
k(x,I[B],C[B],E,B);else for(B=0;B<K.length;B++)x=K[B],k(x,null,C[B],E,B);else null!=I&&(r(null,E),E.innerHTML="")}return}r(B.instance,E);E.remove();return g(x,C,H)}if(null!=B)return r(B.instance,E),B.node.remove()};m.apply=k;const g=function(x,B,E){null==E&&(E=0);var C=null!=x.type&&x.type.isComponentClass?x.type:c[x.type];if(x instanceof Node)var H=x;else{if(null!=C){var I=null!=x.type&&x.type.isComponentClass?x.type:c[x.type];if(!I)return x=x.rendered=f("noscript"),H=g(x,B,E);x.instance=I=new I(B);
null==x.props&&(x.props={});for(H in I.defaultProps)C=I.defaultProps[H],null==x.props[H]&&(x.props[H]=C);x.props.children=x.children;I.props=x.props;I.children=x.children;I.setState("function"===typeof I.getInitialState?I.getInitialState():void 0);"function"===typeof I.willMount&&I.willMount();x=x.rendered="function"===typeof I.render?I.render(f,x.props,x.children):void 0;H=g(x,B,E);"function"===typeof I.didMount&&I.didMount(x);H._COMPONENT=I;return H}if(["string","number"].includes(typeof x))H=document.createTextNode(x);
else for(I in H=document.createElement(x.type),x.props)w(H,I,x.props[I]);({children:x}=x);if(null!=x)if(["string","number"].includes(typeof x))H.textContent=x;else if(null!=x.type)g(x,H,0);else for(I=0;I<x.length;I++)g(x[I],H,I)}B.insertBefore(H,B.childNodes[E]);return H},r=function(x,B){if(x){"function"===typeof x.willUnmount&&x.willUnmount();for(const E in x)delete x[E]}x=[];for(const E of Array.from(B.childNodes))r(E._COMPONENT,E),x.push(delete E._COMPONENT);return x};z=function(x){if("undefined"===
typeof document)return!0;if(null!=document.documentElement.style[x])return x;x=x[0].toUpperCase()+x.slice(1);const B=["webkit","moz","ms","o"];for(const E of Array.from(B))if(null!=document.documentElement.style[E+x])return E+x};const u={};for(const x of["transform"])u[x]=z(x);const w=function(x,B,E,C){if("style"===B)for(const H in E)B=E[H],(null!=C?C[H]:void 0)!==B&&(x.style[null!=u[H]?u[H]:H]=B);else if(null!=x[B])try{x[B]=E}catch(H){console.log("failed setting "+B)}else x instanceof Node&&x.setAttribute(B,
E)};m.createClass=function(x){let B;const E={willMount:"componentWillMount",didMount:"componentDidMount",willReceiveProps:"componentWillReceiveProps",shouldUpdate:"shouldComponentUpdate",willUpdate:"componentWillUpdate",didUpdate:"componentDidUpdate",willUnmount:"componentWillUnmount"};for(const H in E){const I=E[H];null==x[H]&&(x[H]=x[I])}class C{constructor(H,I,K=null,O=null){let Q,W;null==I&&(I={});this.props=I;this.state=K;this.children=O;I=function(X,ca){return"function"===typeof X?X.bind(ca):
X};for(Q in x)W=x[Q],this[Q]=I(W,this);let R=null;this.setState=function(X){null==R&&(R=X?null!=R?R:{}:null);for(Q in X)W=X[Q],R[Q]=W;H._COMPONENT_DIRTY=!0};this.forceUpdate=function(){H._COMPONENT_FORCE=H._COMPONENT_DIRTY=!0;let X=H;const ca=[];for(;X=X.parentNode;)X._COMPONENT?ca.push(X._COMPONENT_FORCE=!0):ca.push(void 0);return ca};this.getNextState=()=>R;this.applyNextState=function(){H._COMPONENT_FORCE=H._COMPONENT_DIRTY=!1;const X=this.state;[R,this.state]=Array.from([null,R]);return X}}}C.isComponentClass=
!0;C.prototype.defaultProps=null!=(B="function"===typeof x.getDefaultProps?x.getDefaultProps():void 0)?B:{};return C}};
shadow$provide[85]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Overlay=void 0;class t{constructor(p,n){this.element=p;"function"===typeof this.init&&this.init(n)}dispose(){}}m.Overlay=t};
shadow$provide[86]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.DOM=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(84));z=v(85);class n extends z.Overlay{static initClass(){this.prototype.el=p.element;this.prototype.hint=p.hint;this.prototype.apply=p.apply;this.prototype.recycle=p.recycle}init(c){return this.last=null}dispose(){this.unmount();return super.dispose()}mount(){const c=document.createElement("div");c.classList.add("mathbox-overlay");this.element.appendChild(c);
return this.overlay=c}unmount(c){this.overlay&&this.overlay.parentNode&&this.element.removeChild(this.overlay);return this.overlay=null}render(c){this.overlay||this.mount();["string","number"].includes(typeof c)&&(c=this.el("div",null,c));c instanceof Array&&(c=this.el("div",null,c));null==c&&(c=this.el("div"));var e="div"===c.type;let {last:f}=this;const {overlay:h}=this,k=e?h:h.childNodes[0];e=e?h.parentNode:h;!f&&k&&(f=this.el("div"));this.apply(c,f,k,e,0);this.last=c;null!=f&&this.recycle(f)}}
m.DOM=n;n.initClass()};
shadow$provide[87]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Classes=void 0;z={dom:v(86).DOM};m.Classes=z};
shadow$provide[88]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});var t={Factory:!0};Object.defineProperty(m,"Factory",{enumerable:!0,get:function(){return p.OverlayFactory}});var p=v(83),n=v(87);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(t,e)||e in m&&m[e]===n[e]||Object.defineProperty(m,e,{enumerable:!0,get:function(){return n[e]}}))});var c=v(85);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&
(Object.prototype.hasOwnProperty.call(t,e)||e in m&&m[e]===c[e]||Object.defineProperty(m,e,{enumerable:!0,get:function(){return c[e]}}))})};
shadow$provide[89]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.Primitive=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(82));z=v(4);class n{static initClass(){this.Node=p.Node;this.Group=p.Group;this.model=this.Node;this.finals=this.props=this.traits=this.defaults=null;this.freeform=!1}constructor(c,e,f){this.node=c;this._context=e;this._renderables=this._context.renderables;this._attributes=this._context.attributes;this._shaders=this._context.shaders;this._overlays=this._context.overlays;
this._animator=this._context.animator;this._types=this._attributes.types;this.node.controller=this;this.node.on("added",h=>this._added());this.node.on("removed",h=>this._removed());this.node.on("change",h=>{if(this._root)return this.change(h.changed,h.touched)});this.reconfigure();this._get=this.node.get.bind(this.node);this._helpers=f(this,this.node.traits);this._handlers={inherit:{},listen:[],watch:[],compute:[]};this._root=this._parent=null;this.init()}is(c){return this.traits.hash[c]}init(){}make(){}made(){}unmake(c){}unmade(){}change(c,
e,f){}refresh(){return this.change({},{},!0)}rebuild(){if(this._root)return this._removed(!0),this._added()}reconfigure(c){null!=c&&this.node.configure(c,this._attributes);this.traits=this.node.traits;return this.props=this.node.props}_added(){let c,e;this._parent=null!=this.node.parent?this.node.parent.controller:void 0;this._root=null!=this.node.root?this.node.root.controller:void 0;this.node.clock=null!=(e=this._inherit("clock"))?e:this._root;try{try{return this.make(),this.refresh(),this.made()}catch(f){throw c=
f,this.node.print("warn"),console.error(c),c;}}catch(f){try{return this._removed()}catch(h){}}}_removed(c){null==c&&(c=!1);this.unmake(c);this._unlisten();this._unattach();this._uncompute();this._parent=this._root=null;return this.unmade(c)}_listen(c,e,f,h){null==h&&(h=this);if(c instanceof Array)for(const k of Array.from(c))return this.__listen(k,e,f,h);return this.__listen(c,e,f,h)}__listen(c,e,f,h){null==h&&(h=this);"string"===typeof c&&(c=this._inherit(c));null!=c&&(f=f.bind(h),f.node=this.node,
c.on(e,f),this._handlers.listen.push([c,e,f]));return c}_unlisten(){if(this._handlers.listen.length){for(const [c,e,f]of Array.from(this._handlers.listen))c.off(e,f);return this._handlers.listen=[]}}_inherit(c){const e=this._handlers.inherit[c];return void 0!==e?e:this._handlers.inherit[c]=null!=this._parent?this._parent._find(null!=c?c:null):void 0}_find(c){return this.is(c)?this:null!=this._parent?this._parent._find(c):void 0}_uninherit(){return this._handlers.inherit={}}_attach(c,e,f,h,k,g,r){null==
h&&(h=this);null==k&&(k=this);null==g&&(g=!1);null==r&&(r=!1);const u=function(E){if(null!=E&&Array.from(E.traits).includes(e))return E},w=E=>null!=E?E.controller:void 0,x=function(E){if(null==E)return E;let C=[];for(const H of Array.from(E))H instanceof Array?C=C.concat(H):C.push(H);return C},B=E=>{let C;if("object"===typeof E){var H=E;if(null!=H&&H._up)return E=r?H._targets:[H[0]];if(H instanceof Array)return E=r?x(H.map(B)):B(H[0]);if(H instanceof p.Node)return[H]}else if("string"===typeof E&&
"\x3c"===E[0]){var I=0;if(H=E.match(/^<([0-9])+$/))I=+H[1]-1;E.match(/^<+$/)&&(I=+E.length-1);C=[];let K=k.node;for(;K;){({parent:H}=K);if(!H)break;(K=H.children[K.index-1])||C.length||(K=H);H=null;u(K)&&(H=K);null!=H&&0>=I--&&C.push(H);if(!r&&C.length)return C}if(r&&C.length)return C}else if("string"===typeof E)if(I=f.bind(h),this._handlers.watch.push(I),I=this._root.watch(E,I),r){if(C=I.filter(u),C.length)return C}else if(u(I[0])&&(H=I[0]),null!=H)return[H];if(!g)throw console.warn(this.node.toMarkup()),
Error(`${this.node.toString()} - Could not find ${e} \`${E}\``);return r?[]:null};c=x(B(c));return r?null!=c?c.map(w):null:null!=c?w(c[0]):null}_unattach(){if(this._handlers.watch.length){for(const c of Array.from(this._handlers.watch))null!=c&&c.unwatch();return this._handlers.watch=[]}}_compute(c,e){this._handlers.compute.push(c);return this.node.bind(c,e,!0)}_uncompute(){if(this._handlers.compute.length){for(const c of Array.from(this._handlers.compute))this.node.unbind(c,!0);return this._handlers.compute=
[]}}}m.Primitive=n;n.initClass();z.Binder.apply(n.prototype)};
shadow$provide[90]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Parent=void 0;var t=v(89);class p extends t.Primitive{static initClass(){this.model=t.Primitive.Group;this.traits=["node"]}}m.Parent=p;p.initClass()};
shadow$provide[91]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Group=void 0;z=v(90);class t extends z.Parent{static initClass(){this.traits=["node","object","entity","visible","active"]}make(){this._helpers.visible.make();return this._helpers.active.make()}unmake(){this._helpers.visible.unmake();return this._helpers.active.unmake()}}m.Group=t;t.initClass()};
shadow$provide[92]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Inherit=void 0;z=v(90);class t extends z.Parent{static initClass(){this.traits=["node","bind"]}make(){return this._helpers.bind.make([{to:"inherit.source",trait:"node"}])}unmake(){return this._helpers.bind.unmake()}_find(p){return this.bind.source&&Array.from(this.props.traits).includes(p)?this.bind.source._inherit(p):super._find()}}m.Inherit=t;t.initClass()};
shadow$provide[93]=function(z,v,J,m){function t(n,c){return"undefined"!==typeof n&&null!==n?c(n):void 0}Object.defineProperty(m,"__esModule",{value:!0});m.Root=void 0;z=v(90);class p extends z.Parent{static initClass(){this.traits="node root clock scene vertex unit".split(" ")}init(){this.size=null;this.cameraEvent={type:"root.camera"};this.preEvent={type:"root.pre"};this.updateEvent={type:"root.update"};this.renderEvent={type:"root.render"};this.postEvent={type:"root.post"};this.clockEvent={type:"clock.tick"};
return this.camera=null}make(){return this._helpers.unit.make()}unmake(){return this._helpers.unit.unmake()}change(n,c,e){if(n["root.camera"]||e)return this._unattach(),this._attach(this.props.camera,"camera",this.setCamera,this,this,!0),this.setCamera()}adopt(n){return Array.from(n.renders).map(c=>this._context.scene.add(c))}unadopt(n){return Array.from(n.renders).map(c=>this._context.scene.remove(c))}select(n){return this.node.model.select(n)}watch(n,c){return this.node.model.watch(n,c)}unwatch(n){return this.node.model.unwatch(n)}resize(n){this.size=
n;return this.trigger({type:"root.resize",size:n})}getSize(){return this.size}getSpeed(){return this.props.speed}getUnit(){return this._helpers.unit.get()}getUnitUniforms(){return this._helpers.unit.uniforms()}pre(){this.getCamera().updateProjectionMatrix();this.trigger(this.clockEvent);return this.trigger(this.preEvent)}update(){return this.trigger(this.updateEvent)}render(){return this.trigger(this.renderEvent)}post(){return this.trigger(this.postEvent)}setCamera(){const n=t(this.select(this.props.camera)[0],
c=>c.controller);if(this.camera!==n)return this.camera=n,this.trigger({type:"root.camera"})}getCamera(){let n;return null!=(n=null!=this.camera?this.camera.getCamera():void 0)?n:this._context.defaultCamera}getTime(){return this._context.time}vertex(n,c){return 2===c?n.pipe("view.position"):3===c?n.pipe("root.position"):n}}m.Root=p;p.initClass()};
shadow$provide[94]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Unit=void 0;z=v(90);class t extends z.Parent{static initClass(){this.traits=["node","unit"]}make(){return this._helpers.unit.make()}unmake(){return this._helpers.unit.unmake()}getUnit(){return this._helpers.unit.get()}getUnitUniforms(){return this._helpers.unit.uniforms()}}m.Unit=t;t.initClass()};
shadow$provide[95]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});var t=v(91);Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in m&&m[e]===t[e]||Object.defineProperty(m,e,{enumerable:!0,get:function(){return t[e]}}))});var p=v(92);Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in m&&m[e]===p[e]||Object.defineProperty(m,e,{enumerable:!0,get:function(){return p[e]}}))});var n=v(93);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==
e&&(e in m&&m[e]===n[e]||Object.defineProperty(m,e,{enumerable:!0,get:function(){return n[e]}}))});var c=v(94);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in m&&m[e]===c[e]||Object.defineProperty(m,e,{enumerable:!0,get:function(){return c[e]}}))})};
shadow$provide[96]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.transformComposer=m.swizzleToEulerOrder=m.paramToArrayStorage=m.paramToGL=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,
k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(2));m.paramToGL=function(c,e){return e===p.RepeatWrapping?c.REPEAT:e===p.ClampToEdgeWrapping?c.CLAMP_TO_EDGE:e===p.MirroredRepeatWrapping?c.MIRRORED_REPEAT:e===p.NearestFilter?c.NEAREST:e===p.NearestMipMapNearestFilter?c.NEAREST_MIPMAP_NEAREST:e===p.NearestMipMapLinearFilter?c.NEAREST_MIPMAP_LINEAR:
e===p.LinearFilter?c.LINEAR:e===p.LinearMipMapNearestFilter?c.LINEAR_MIPMAP_NEAREST:e===p.LinearMipMapLinearFilter?c.LINEAR_MIPMAP_LINEAR:e===p.UnsignedByteType?c.UNSIGNED_BYTE:e===p.UnsignedShort4444Type?c.UNSIGNED_SHORT_4_4_4_4:e===p.UnsignedShort5551Type?c.UNSIGNED_SHORT_5_5_5_1:e===p.ByteType?c.BYTE:e===p.ShortType?c.SHORT:e===p.UnsignedShortType?c.UNSIGNED_SHORT:e===p.IntType?c.INT:e===p.UnsignedIntType?c.UNSIGNED_INT:e===p.FloatType?c.FLOAT:e===p.AlphaFormat?c.ALPHA:e===p.RGBAFormat?c.RGBA:
e===p.LuminanceFormat?c.LUMINANCE:e===p.LuminanceAlphaFormat?c.LUMINANCE_ALPHA:e===p.AddEquation?c.FUNC_ADD:e===p.SubtractEquation?c.FUNC_SUBTRACT:e===p.ReverseSubtractEquation?c.FUNC_REVERSE_SUBTRACT:e===p.ZeroFactor?c.ZERO:e===p.OneFactor?c.ONE:e===p.SrcColorFactor?c.SRC_COLOR:e===p.OneMinusSrcColorFactor?c.ONE_MINUS_SRC_COLOR:e===p.SrcAlphaFactor?c.SRC_ALPHA:e===p.OneMinusSrcAlphaFactor?c.ONE_MINUS_SRC_ALPHA:e===p.DstAlphaFactor?c.DST_ALPHA:e===p.OneMinusDstAlphaFactor?c.ONE_MINUS_DST_ALPHA:e===
p.DstColorFactor?c.DST_COLOR:e===p.OneMinusDstColorFactor?c.ONE_MINUS_DST_COLOR:e===p.SrcAlphaSaturateFactor?c.SRC_ALPHA_SATURATE:0};m.paramToArrayStorage=function(c){switch(c){case p.UnsignedByteType:return Uint8Array;case p.ByteType:return Int8Array;case p.ShortType:return Int16Array;case p.UnsignedShortType:return Uint16Array;case p.IntType:return Int32Array;case p.UnsignedIntType:return Uint32Array;case p.FloatType:return Float32Array}};const n=c=>c.map(e=>["","X","Y","Z"][e]).join("");m.swizzleToEulerOrder=
n;m.transformComposer=function(){const c=new p.Euler,e=new p.Quaternion,f=new p.Vector3,h=new p.Vector3,k=new p.Matrix4;return function(g,r,u,w,x,B){null==B&&(B="XYZ");null!=r?(B instanceof Array&&(B=n(B)),c.setFromVector3(r,B),e.setFromEuler(c)):e.set(0,0,0,1);null!=u&&e.multiply(u);null!=g?f.copy(g):f.set(0,0,0);null!=w?h.copy(w):h.set(1,1,1);k.compose(f,e,h);null!=x&&k.multiplyMatrices(k,x);return k}}};
shadow$provide[97]=function(z,v,J,m){function t(e){if("function"!==typeof WeakMap)return null;var f=new WeakMap,h=new WeakMap;return(t=function(k){return k?h:f})(e)}Object.defineProperty(m,"__esModule",{value:!0});m.Camera=void 0;var p=function(e,f){if(!f&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};if((f=t(f))&&f.has(e))return f.get(e);var h={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor,g;for(g in e)if("default"!==g&&Object.prototype.hasOwnProperty.call(e,
g)){var r=k?Object.getOwnPropertyDescriptor(e,g):null;r&&(r.get||r.set)?Object.defineProperty(h,g,r):h[g]=e[g]}h.default=e;f&&f.set(e,h);return h}(v(96)),n=v(2);z=v(89);class c extends z.Primitive{static initClass(){this.traits=["node","camera"]}init(){}make(){const e=this._context.defaultCamera;this.camera=this.props.proxy?e:e.clone();this.euler=new n.Euler;return this.quat=new n.Quaternion}unmake(){}getCamera(){return this.camera}change(e,f,h){if(e["camera.position"]||e["camera.quaternion"]||e["camera.rotation"]||
e["camera.lookAt"]||e["camera.up"]||e["camera.fov"]||h){const {position:k,quaternion:g,rotation:r,lookAt:u,up:w,fov:x}=this.props;null!=k&&this.camera.position.copy(k);if(null!=g||null!=r||null!=u)null!=u?this.camera.lookAt(u):this.camera.quaternion.set(0,0,0,1),null!=r&&(this.euler.setFromVector3(r,p.swizzleToEulerOrder(this.props.eulerOrder)),this.quat.setFromEuler(this.euler),this.camera.quaternion.multiply(this.quat)),null!=g&&this.camera.quaternion.multiply(g);null!=x&&null!=this.camera.fov&&
(this.camera.fov=x);null!=w&&this.camera.up.copy(w);return this.camera.updateMatrix()}}}m.Camera=c;c.initClass()};
shadow$provide[98]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});var t=v(97);Object.keys(t).forEach(function(p){"default"!==p&&"__esModule"!==p&&(p in m&&m[p]===t[p]||Object.defineProperty(m,p,{enumerable:!0,get:function(){return t[p]}}))})};
shadow$provide[99]=function(z,v,J,m){function t(c,e,f){const h=[],k=c<e;for(e=f?k?e+1:e-1:e;k?c<e:c>e;k?c++:c--)h.push(c);return h}Object.defineProperty(m,"__esModule",{value:!0});m.getLerpThunk=m.getLerpEmitter=m.getStreamer=m.getThunk=m.makeEmitter=m.repeatCall=m.getDimensions=m.getSizes=void 0;const p=function(c){const e=[];for(;"string"!==typeof c&&null!=(null!=c?c.length:void 0);)e.push(c.length),c=c[0];return e};m.getSizes=p;m.getDimensions=function(c,e){let f;null==e&&(e={});const {items:h,
channels:k,width:g,height:r,depth:u}=e;e={};if(!c||!c.length)return{items:h,channels:k,width:null!=g?g:0,height:null!=r?r:0,depth:null!=u?u:0};c=p(c);var w=c.length;e.channels=1!==k&&1<c.length?c.pop():k;e.items=1!==h&&1<c.length?c.pop():h;e.width=1!==g&&1<c.length?c.pop():g;e.height=1!==r&&1<c.length?c.pop():r;e.depth=1!==u&&1<c.length?c.pop():u;1===k&&w++;1===h&&1<w&&w++;1===g&&2<w&&w++;1===r&&3<w&&w++;c=null!=(f=c.pop())?f:1;1>=w&&(c/=null!=e.channels?e.channels:1);2>=w&&(c/=null!=e.items?e.items:
1);3>=w&&(c/=null!=e.width?e.width:1);4>=w&&(c/=null!=e.height?e.height:1);c=Math.floor(c);null==e.width&&(e.width=c,c=1);null==e.height&&(e.height=c,c=1);null==e.depth&&(e.depth=c);return e};m.repeatCall=function(c,e){switch(e){case 0:return()=>!0;case 1:return()=>c();case 2:return function(){c();return c()};case 3:return function(){c();c();c();return c()};case 4:return function(){c();c();c();return c()};case 6:return function(){c();c();c();c();c();return c()};case 8:return function(){c();c();c();
c();c();return c()}}};m.makeEmitter=function(c,e,f){let h;const k=(()=>{switch(f){case 0:return()=>!0;case 1:return r=>r(c());case 2:return r=>r(c(),c());case 3:return r=>r(c(),c(),c());case 4:return r=>r(c(),c(),c(),c());case 6:return r=>r(c(),c(),c(),c(),c(),c());case 8:return r=>r(c(),c(),c(),c(),c(),c(),c(),c())}})();let g=null;for(;0<e;){const r=Math.min(e,8);h=(()=>{switch(r){case 1:return u=>k(u);case 2:return function(u){k(u);return k(u)};case 3:return function(u){k(u);k(u);return k(u)};case 4:return function(u){k(u);
k(u);k(u);return k(u)};case 5:return function(u){k(u);k(u);k(u);k(u);return k(u)};case 6:return function(u){k(u);k(u);k(u);k(u);k(u);return k(u)};case 7:return function(u){k(u);k(u);k(u);k(u);k(u);k(u);return k(u)};case 8:return function(u){k(u);k(u);k(u);k(u);k(u);k(u);k(u);return k(u)}}})();g=null!=g?((u,w)=>function(x){u(x);return w(x)})(h,g):h;e-=r}h=null!=g?g:()=>!0;h.reset=c.reset;h.rebind=c.rebind;return h};const n=function(c){let e,f,h,k,g,r=p(c);const u=r.length;let w=r.pop(),x=r.pop(),B=
r.pop();const E=r.pop();let C,H,I,K,O;switch(u){case 0:e=()=>0;e.reset=function(){};break;case 1:C=0;e=()=>c[C++];e.reset=()=>C=0;break;case 2:C=f=0;H=null!=c[f]?c[f]:[];e=function(){const Q=H[C++];C===w&&(C=0,f++,H=null!=c[f]?c[f]:[]);return Q};e.reset=function(){C=f=0;H=null!=c[f]?c[f]:[]};break;case 3:C=f=h=0;I=null!=c[h]?c[h]:[];H=null!=I[f]?I[f]:[];e=function(){const Q=H[C++];C===w&&(C=0,f++,f===x&&(f=0,h++,I=null!=c[h]?c[h]:[]),H=null!=I[f]?I[f]:[]);return Q};e.reset=function(){C=f=h=0;I=null!=
c[h]?c[h]:[];H=null!=I[f]?I[f]:[]};break;case 4:C=f=h=k=0;K=null!=c[k]?c[k]:[];I=null!=K[h]?K[h]:[];H=null!=I[f]?I[f]:[];e=function(){const Q=H[C++];C===w&&(C=0,f++,f===x&&(f=0,h++,h===B&&(h=0,k++,K=null!=c[k]?c[k]:[]),I=null!=K[h]?K[h]:[]),H=null!=I[f]?I[f]:[]);return Q};e.reset=function(){C=f=h=k=0;K=null!=c[k]?c[k]:[];I=null!=K[h]?K[h]:[];H=null!=I[f]?I[f]:[]};break;case 5:C=f=h=k=g=0,O=null!=c[g]?c[g]:[],K=null!=O[k]?O[k]:[],I=null!=K[h]?K[h]:[],H=null!=I[f]?I[f]:[],e=function(){const Q=H[C++];
C===w&&(C=0,f++,f===x&&(f=0,h++,h===B&&(h=0,k++,k===E&&(k=0,g++,O=null!=c[g]?c[g]:[]),K=null!=O[k]?O[k]:[]),I=null!=K[h]?K[h]:[]),H=null!=I[f]?I[f]:[]);return Q},e.reset=function(){C=f=h=k=g=0;O=null!=c[g]?c[g]:[];K=null!=O[k]?O[k]:[];I=null!=K[h]?K[h]:[];H=null!=I[f]?I[f]:[]}}e.rebind=function(Q){c=Q;r=p(c);r.length&&(w=r.pop());r.length&&(x=r.pop());r.length&&(B=r.pop());if(r.length)return r.pop()};return e};m.getThunk=n;m.getStreamer=function(c,e,f,h){let k,g,r=k=g=0;const u=function(){r=e*f*h;
return k=g=0},w=(()=>{switch(f){case 1:return function(E){k+=E;g+=E};case 2:return function(E){k+=2*E;g+=E};case 3:return function(E){k+=3*E;g+=E};case 4:return function(E){k+=4*E;g+=E}}})(),x=(()=>{switch(f){case 1:return function(E){E(c[k++]);++g};case 2:return function(E){E(c[k++],c[k++]);++g};case 3:return function(E){E(c[k++],c[k++],c[k++]);++g};case 4:return function(E){E(c[k++],c[k++],c[k++],c[k++]);++g}}})(),B=(()=>{switch(f){case 1:return function(E){c[k++]=E;++g};case 2:return function(E,
C){c[k++]=E;c[k++]=C;++g};case 3:return function(E,C,H){c[k++]=E;c[k++]=C;c[k++]=H;++g};case 4:return function(E,C,H,I){c[k++]=E;c[k++]=C;c[k++]=H;c[k++]=I;++g}}})();x.reset=u;B.reset=u;u();return{emit:B,consume:x,skip:w,count:()=>g,done:()=>0>=r-k,reset:u}};m.getLerpEmitter=function(c,e){let f,h,k,g;const r=new Float32Array(4096);let u=f=.5,w=h=k=g=0;const x=function(C,H,I,K){k++;r[w++]=C*u;r[w++]=H*u;r[w++]=I*u;return r[w++]=K*u},B=function(C,H,I,K){g++;r[h++]+=C*f;r[h++]+=H*f;r[h++]+=I*f;return r[h++]+=
K*f};var E=Math.max(c.length,e.length);E=3>=E?function(C,H,I){w=h=k=g=0;c(x,H,I);e(B,H,I);let K=0;return t(0,Math.min(k,g),!1).map(O=>C(r[K++],r[K++],r[K++],r[K++]))}:5>=E?function(C,H,I,K,O){w=h=k=g=0;c(x,H,I,K,O);e(B,H,I,K,O);let Q=0;return t(0,Math.min(k,g),!1).map(W=>C(r[Q++],r[Q++],r[Q++],r[Q++]))}:7>=E?function(C,H,I,K,O,Q,W){w=h=k=g=0;c(x,H,I,K,O,Q,W);e(B,H,I,K,O,Q,W);H=Math.min(k,g);I=0;O=[];W=0;for(K=0<=H;K?W<H:W>H;K?W++:W--)O.push(C(r[I++],r[I++],r[I++],r[I++]));return O}:9>=E?function(C,
H,I,K,O,Q,W,R,X){w=h=k=g=0;c(x,H,I,K,O,Q,W,R,X);e(B,H,I,K,O,Q,W,R,X);H=Math.min(k,g);X=0;K=[];R=0;for(I=0<=H;I?R<H:R>H;I?R++:R--)K.push(C(r[X++],r[X++],r[X++],r[X++]));return K}:function(C,H,I,K,O,Q,W,R,X,ca,ka){w=h=0;c(x,H,I,K,O,Q,W,R,X,ca,ka);e(B,H,I,K,O,Q,W,R,X,ca,ka);H=Math.min(k,g);X=0;K=[];R=0;for(I=0<=H;I?R<H:R>H;I?R++:R--)K.push(C(r[X++],r[X++],r[X++],r[X++]));return K};E.lerp=function(C){let H;return[u,f]=Array.from(H=[1-C,C]),H};return E};m.getLerpThunk=function(c,e){const f=p(c).reduce((w,
x)=>w*x),h=p(e).reduce((w,x)=>w*x),k=Math.min(f,h),g=n(c),r=n(e),u=new Float32Array(k);u.lerp=function(w){g.reset();r.reset();let x=0;const B=[];for(;x<k;){const E=g(),C=r();B.push(u[x++]=E+(C-E)*w)}return B};return u}};
shadow$provide[100]=function(z,v,J,m){function t(g,r,u){const w=[],x=g<r;for(r=u?x?r+1:r-1:r;x?g<r:g>r;x?g++:g--)w.push(g);return w}Object.defineProperty(m,"__esModule",{value:!0});m.constant=m.identity=m.invertSwizzleVec4=m.swizzleVec4=m.injectVec4=m.truncateVec=m.extendVec=m.binaryOperator=m.sample2DArray=m.mapByte2FloatOffset=m.toType=void 0;const p=["x","y","z","w"],n={0:-1,x:0,y:1,z:2,w:3},c=function(g){g===""+g&&(g=g.split(""));g===+g&&(g=[g]);return g},e=function(g){g===+g&&(g="vec"+g);"vec1"===
g&&(g="float");return g};m.toType=e;const f=function(g){g=""+g;if(0>g.indexOf("."))return g+".0"};m.mapByte2FloatOffset=function(g){null==g&&(g=4);g=f(g);return`\
vec4 float2ByteIndex(vec4 xyzw, out float channelIndex) {
  float relative = xyzw.w / ${g};
  float w = floor(relative);
  channelIndex = (relative - w) * ${g};
  return vec4(xyzw.xyz, w);
}\
`};m.sample2DArray=function(g){const r=function(w,x){if(w===x)w=`\
return texture2D(dataTextures[${w}], uv);\
`;else{const B=Math.ceil(w+(x-w)/2);w=`\
if (z < ${B-.5}) {
  ${r(w,B-1)}
}
else {
  ${r(B,x)}
}\
`}return w.replace(/\n/g,"\n  ")},u=r(0,g-1);return`\
uniform sampler2D dataTextures[${g}];

vec4 sample2DArray(vec2 uv, float z) {
  ${u}
}\
`};m.binaryOperator=function(g,r,u){g=e(g);return null!=u?`\
${g} binaryOperator(${g} a) {
  return a ${r} ${u};
}\
`:`\
${g} binaryOperator(${g} a, ${g} b) {
  return a ${r} b;
}\
`};const h=function(g,r,u){null==u&&(u=0);if(g>r)return k(g,r);var w=r-g;g=e(g);r=e(r);u=f(u);w=t(0,w,!0).map(function(x){return x?u:"v"}).join(",");return`\
${r} extendVec(${g} v) { return ${r}(${w}); }\
`};m.extendVec=h;const k=function(g,r){if(g<r)return h(g,r);const u="."+"xyzw".substr(0,r);g=e(g);r=e(r);return`\
${r} truncateVec(${g} v) { return v${u}; }\
`};m.truncateVec=k;m.injectVec4=function(g){var r=["0.0","0.0","0.0","0.0"];g=c(g);g=g.map(function(u){return u===""+u?n[u]:u});for(let u=0;u<g.length;u++)r[g[u]]=["a","b","c","d"][u];r=r.slice(0,4).join(", ");return`\
vec4 inject(${["float a","float b","float c","float d"].slice(0,g.length)}) {
  return vec4(${r});
}\
`};m.swizzleVec4=function(g,r=null){const u=["0.0","xyzw.x","xyzw.y","xyzw.z","xyzw.w"];null==r&&(r=g.length);g=c(g);for(g=g.map(function(w){Array.from([0,1,2,3,4]).includes(+w)&&(w=+w);w===""+w&&(w=n[w]+1);return u[w]});g.length<r;)g.push("0.0");g=g.join(", ");return`\
vec${r} swizzle(vec4 xyzw) {
  return vec${r}(${g});
}\
`.replace(/vec1/g,"float")};m.invertSwizzleVec4=function(g){const r=["0.0","0.0","0.0","0.0"];g=c(g);g=g.map(function(u){return u===+u?p[u-1]:u});for(let u=0;u<g.length;u++)r[n[g[u]]]=`xyzw.${p[u]}`;return`\
vec4 invertSwizzle(vec4 xyzw) {
  return vec4(${r.join(", ")});
}\
`};m.identity=function(g){let r=[].slice.call(arguments);return 1<r.length?(r=r.map((u,w)=>["inout",u,String.fromCharCode(97+w)].join(" ")),r=r.join(", "),`\
void identity(${r}) { }\
`):`\
${g} identity(${g} x) {
  return x;
}\
`};m.constant=(g,r)=>`\
${g} constant() {
return ${r};
}\
`};
shadow$provide[101]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.Source=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(100));z=v(89);class n extends z.Primitive{static initClass(){this.traits=["node","source","index"]}made(){return this.trigger({type:"source.rebuild"})}indexShader(c){return c.pipe(p.identity("vec4"))}sourceShader(c){return c.pipe(p.identity("vec4"))}getDimensions(){return{items:1,width:1,height:1,depth:1}}getActiveDimensions(){return this.getDimensions()}getIndexDimensions(){return this.getActiveDimensions()}getFutureDimensions(){return this.getActiveDimensions()}}
m.Source=n;n.initClass()};
shadow$provide[102]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.Data=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(99));z=v(101);class n extends z.Source{static initClass(){this.traits="node data source index entity active".split(" ")}init(){return this.dataSizes=this.dataEmitter=null}emitter(c,e){const {data:f,bind:h,expr:k}=this.props;if(null!=f){var g=this.dataSizes;var r=p.getSizes(f);g&&g.length===r.length||(g=p.getThunk(f),this.dataEmitter=this.callback(p.makeEmitter(g,
e,c)),this.dataSizes=r);c=this.dataEmitter}else null!=r?(r=this._inherit("resolve"),c=this.callback(r.callback(h))):c=null!=k?this.callback(k):this.callback(this.passthrough);return c}callback(c){return null!=c?c:function(){}}update(){}make(){this._helpers.active.make();this.first=!0;return this._listen("root","root.update",()=>{(this.isActive||this.first)&&this.update();return this.first=!1})}unmake(){this._helpers.active.unmake();return this.dataSizes=this.dataEmitter=null}}m.Data=n;n.initClass()};
shadow$provide[103]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Buffer=void 0;z=v(102);class t extends z.Data{static initClass(){this.traits="node buffer active data source index texture".split(" ")}init(){this.bufferStep=this.bufferClock=this.bufferDelta=this.bufferTime=this.bufferFrames=this.bufferSlack=0;super.init()}make(){super.make();this.clockParent=this._inherit("clock");this.latchParent=this._inherit("latch")}unmake(){return super.unmake()}rawBuffer(){return this.buffer}emitter(){const {channels:p,
items:n}=this.props;return super.emitter(p,n)}change(p,n,c){if(p["buffer.fps"]||c)return{fps:p}=this.props,this.bufferSlack=p?.5/p:0}syncBuffer(p){let n,c;if(this.buffer){var {live:e,fps:f,hurry:h,limit:k,realtime:g,observe:r}=this.props,u=this.buffer.getFilled();if(!u||e)if(!this.latchParent||this.latchParent.isDirty){var w=this.clockParent.getTime();if(null!=f){const x=this.bufferSlack,B=w.step/w.delta;n=g?w.delta:w.step;const E=1/f;c=g&&r?B*E:E;Math.abs(w.time-this.bufferTime)>w.step*k&&(this.bufferTime=
w.time,this.bufferClock=w.clock);this.bufferSlack=Math.min(k/f,x+n);this.bufferDelta=n;this.bufferStep=c;let C=Math.min(h,Math.floor(x*f));u||(C=Math.max(1,C));let H=!1;const I=()=>H=!0;return(()=>{const K=[];for(let O=0,Q=C,W=0<=Q;W?O<Q:O>Q;W?O++:O--){this.bufferTime+=n;this.bufferClock+=c;if(H)break;p(I,this.bufferFrames++,O,C);K.push(this.bufferSlack-=E)}return K})()}this.bufferTime=w.time;this.bufferDelta=w.delta;this.bufferClock=w.clock;this.bufferStep=w.step;return p(function(){},this.bufferFrames++,
0,1)}}}alignShader(p,n){const {minFilter:c,magFilter:e,aligned:f}=this.props;p=1<p.items&&1<p.width||1<p.height&&1<p.depth;if(!f&&p)return c===this.node.attributes["texture.minFilter"].enum.nearest&&e===this.node.attributes["texture.magFilter"].enum.nearest||console.warn(`${this.node.toString()} - Cannot use linear min/magFilter with 3D/4D sampling`),n.pipe("map.xyzw.align")}}m.Buffer=t;t.initClass()};
shadow$provide[104]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.Array_=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(99));z=v(103);class n extends z.Buffer{static initClass(){this.traits="node buffer active data source index array texture raw".split(" ")}init(){this.buffer=this.spec=null;this.space={width:0,history:0};this.used={width:0};this.storage="arrayBuffer";this.passthrough=(c,e)=>c(e,0,0,0);return super.init()}sourceShader(c){const e=this.getDimensions();this.alignShader(e,
c);return this.buffer.shader(c)}getDimensions(){return{items:this.items,width:this.space.width,height:this.space.history,depth:1}}getActiveDimensions(){return{items:this.items,width:this.used.width,height:this.buffer.getFilled(),depth:1}}getFutureDimensions(){return{items:this.items,width:this.used.width,height:this.space.history,depth:1}}getRawDimensions(){return{items:this.items,width:this.space.width,height:1,depth:1}}make(){super.make();const c=null!=this.minFilter?this.minFilter:this.props.minFilter,
e=null!=this.magFilter?this.magFilter:this.props.magFilter,f=null!=this.type?this.type:this.props.type;var {width:h}=this.props;const {history:k}=this.props,g=this.props.bufferWidth,{channels:r}=this.props,{items:u}=this.props;h=this.spec={channels:r,items:u,width:h};this.items=h.items;this.channels=h.channels;var {data:w}=this.props;h=p.getDimensions(w,h);({space:w}=this);w.width=Math.max(g,h.width||1);w.history=k;return this.buffer=this._renderables.make(this.storage,{width:w.width,history:w.history,
channels:r,items:u,minFilter:c,magFilter:e,type:f})}unmake(){super.unmake();if(this.buffer)return this.buffer.dispose(),this.buffer=this.spec=null}change(c,e,f){if(e.texture||c["history.history"]||c["buffer.channels"]||c["buffer.items"]||c["array.bufferWidth"])return this.rebuild();if(this.buffer){if(c["array.width"]){const {width:h,bufferWidth:k}=this.props;this.spec.width=h;if(h>k)return this.rebuild()}if(c["data.map"]||c["data.data"]||c["data.resolve"]||c["data.expr"]||f)return this.buffer.setCallback(this.emitter())}}callback(c){return 2>=
c.length?c:(e,f)=>c(e,f,this.bufferClock,this.bufferStep)}update(){if(this.buffer){var {data:c}=this.props,{width:e}=this.props,{space:f,used:h}=this,k=h.width,g=this.buffer.getFilled();this.syncBuffer(r=>{if(null!=c){const u=p.getDimensions(c,this.spec);if(u.width>f.width)return r(),this.rebuild();h.width=u.width;this.buffer.setActive(h.width);"function"===typeof this.buffer.callback.rebind&&this.buffer.callback.rebind(c);return this.buffer.update()}e=this.spec.width||1;this.buffer.setActive(e);
e=this.buffer.update();return h.width=e});if(h.width!==k||g!==this.buffer.getFilled())return this.trigger({type:"source.resize"})}}}m.Array_=n;n.initClass()};
shadow$provide[105]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Interval=void 0;z=v(104);class t extends z.Array_{static initClass(){this.traits="node buffer active data source index texture array span interval sampler raw".split(" ")}updateSpan(){var p=this.props.axis;({width:e}=this.props);const {centered:n}=this.props,c=this.props.padding;p=this._helpers.span.get("",p);e+=2*c;this.a=p.x;p=p.y-p.x;if(n){var e=1/Math.max(1,e);this.a+=p*e/2}else e=1/Math.max(1,e-1);this.b=
p*e;return this.a+=c*this.b}callback(p){this.updateSpan();if(this.last===p)return this._callback;this.last=p;return 3>=p.length?this._callback=(n,c)=>p(n,this.a+this.b*c,c):this._callback=(n,c)=>p(n,this.a+this.b*c,c,this.bufferClock,this.bufferStep)}make(){super.make();this._helpers.span.make();return this._listen(this,"span.range",this.updateSpan)}unmake(){super.unmake();return this._helpers.span.unmake()}change(p,n,c){super.change(p,n,c);n.span&&this.updateSpan()}}m.Interval=t;t.initClass()};
shadow$provide[106]=function(z,v,J,m){J.exports=function(){this.__data__=[];this.size=0}};
shadow$provide[107]=function(z,v,J,m){J.exports=function(t,p){return t===p||t!==t&&p!==p}};
shadow$provide[108]=function(z,v,J,m){var t=v(107);J.exports=function(p,n){for(var c=p.length;c--;)if(t(p[c][0],n))return c;return-1}};
shadow$provide[109]=function(z,v,J,m){var t=v(108),p=Array.prototype.splice;J.exports=function(n){var c=this.__data__;n=t(c,n);if(0>n)return!1;n==c.length-1?c.pop():p.call(c,n,1);--this.size;return!0}};
shadow$provide[110]=function(z,v,J,m){var t=v(108);J.exports=function(p){var n=this.__data__;p=t(n,p);return 0>p?void 0:n[p][1]}};
shadow$provide[111]=function(z,v,J,m){var t=v(108);J.exports=function(p){return-1<t(this.__data__,p)}};
shadow$provide[112]=function(z,v,J,m){var t=v(108);J.exports=function(p,n){var c=this.__data__,e=t(c,p);0>e?(++this.size,c.push([p,n])):c[e][1]=n;return this}};
shadow$provide[113]=function(z,v,J,m){function t(c){var e=-1,f=null==c?0:c.length;for(this.clear();++e<f;){var h=c[e];this.set(h[0],h[1])}}z=v(106);m=v(109);var p=v(110),n=v(111);v=v(112);t.prototype.clear=z;t.prototype["delete"]=m;t.prototype.get=p;t.prototype.has=n;t.prototype.set=v;J.exports=t};
shadow$provide[114]=function(z,v,J,m){var t=v(113);J.exports=function(){this.__data__=new t;this.size=0}};
shadow$provide[115]=function(z,v,J,m){J.exports=function(t){var p=this.__data__;t=p["delete"](t);this.size=p.size;return t}};
shadow$provide[116]=function(z,v,J,m){J.exports=function(t){return this.__data__.get(t)}};
shadow$provide[117]=function(z,v,J,m){J.exports=function(t){return this.__data__.has(t)}};
shadow$provide[118]=function(z,v,J,m){J.exports="object"==typeof z&&z&&z.Object===Object&&z};
shadow$provide[119]=function(z,v,J,m){z=v(118);v="object"==typeof self&&self&&self.Object===Object&&self;z=z||v||Function("return this")();J.exports=z};
shadow$provide[120]=function(z,v,J,m){z=v(119).Symbol;J.exports=z};
shadow$provide[121]=function(z,v,J,m){z=v(120);v=Object.prototype;var t=v.hasOwnProperty,p=v.toString,n=z?z.toStringTag:void 0;J.exports=function(c){var e=t.call(c,n),f=c[n];try{c[n]=void 0;var h=!0}catch(g){}var k=p.call(c);h&&(e?c[n]=f:delete c[n]);return k}};
shadow$provide[122]=function(z,v,J,m){var t=Object.prototype.toString;J.exports=function(p){return t.call(p)}};
shadow$provide[123]=function(z,v,J,m){z=v(120);var t=v(121),p=v(122),n=z?z.toStringTag:void 0;J.exports=function(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":n&&n in Object(c)?t(c):p(c)}};
shadow$provide[124]=function(z,v,J,m){J.exports=function(t){var p=typeof t;return null!=t&&("object"==p||"function"==p)}};
shadow$provide[125]=function(z,v,J,m){var t=v(123),p=v(124);J.exports=function(n){if(!p(n))return!1;n=t(n);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}};
shadow$provide[126]=function(z,v,J,m){z=v(119)["__core-js_shared__"];J.exports=z};
shadow$provide[127]=function(z,v,J,m){var t=v(126),p=function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();J.exports=function(n){return!!p&&p in n}};
shadow$provide[128]=function(z,v,J,m){var t=Function.prototype.toString;J.exports=function(p){if(null!=p){try{return t.call(p)}catch(n){}return p+""}return""}};
shadow$provide[129]=function(z,v,J,m){var t=v(125),p=v(127),n=v(124),c=v(128),e=/^\[object .+?Constructor\]$/,f=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$\x26").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");J.exports=function(h){return!n(h)||p(h)?!1:(t(h)?f:e).test(c(h))}};
shadow$provide[130]=function(z,v,J,m){J.exports=function(t,p){return null==t?void 0:t[p]}};
shadow$provide[131]=function(z,v,J,m){var t=v(129),p=v(130);J.exports=function(n,c){n=p(n,c);return t(n)?n:void 0}};
shadow$provide[132]=function(z,v,J,m){z=v(131);v=v(119);v=z(v,"Map");J.exports=v};
shadow$provide[133]=function(z,v,J,m){z=v(131)(Object,"create");J.exports=z};
shadow$provide[134]=function(z,v,J,m){var t=v(133);J.exports=function(){this.__data__=t?t(null):{};this.size=0}};
shadow$provide[135]=function(z,v,J,m){J.exports=function(t){t=this.has(t)&&delete this.__data__[t];this.size-=t?1:0;return t}};
shadow$provide[136]=function(z,v,J,m){var t=v(133),p=Object.prototype.hasOwnProperty;J.exports=function(n){var c=this.__data__;return t?(n=c[n],"__lodash_hash_undefined__"===n?void 0:n):p.call(c,n)?c[n]:void 0}};
shadow$provide[137]=function(z,v,J,m){var t=v(133),p=Object.prototype.hasOwnProperty;J.exports=function(n){var c=this.__data__;return t?void 0!==c[n]:p.call(c,n)}};
shadow$provide[138]=function(z,v,J,m){var t=v(133);J.exports=function(p,n){var c=this.__data__;this.size+=this.has(p)?0:1;c[p]=t&&void 0===n?"__lodash_hash_undefined__":n;return this}};
shadow$provide[139]=function(z,v,J,m){function t(c){var e=-1,f=null==c?0:c.length;for(this.clear();++e<f;){var h=c[e];this.set(h[0],h[1])}}z=v(134);m=v(135);var p=v(136),n=v(137);v=v(138);t.prototype.clear=z;t.prototype["delete"]=m;t.prototype.get=p;t.prototype.has=n;t.prototype.set=v;J.exports=t};
shadow$provide[140]=function(z,v,J,m){var t=v(139),p=v(113),n=v(132);J.exports=function(){this.size=0;this.__data__={hash:new t,map:new (n||p),string:new t}}};
shadow$provide[141]=function(z,v,J,m){J.exports=function(t){var p=typeof t;return"string"==p||"number"==p||"symbol"==p||"boolean"==p?"__proto__"!==t:null===t}};
shadow$provide[142]=function(z,v,J,m){var t=v(141);J.exports=function(p,n){p=p.__data__;return t(n)?p["string"==typeof n?"string":"hash"]:p.map}};
shadow$provide[143]=function(z,v,J,m){var t=v(142);J.exports=function(p){p=t(this,p)["delete"](p);this.size-=p?1:0;return p}};
shadow$provide[144]=function(z,v,J,m){var t=v(142);J.exports=function(p){return t(this,p).get(p)}};
shadow$provide[145]=function(z,v,J,m){var t=v(142);J.exports=function(p){return t(this,p).has(p)}};
shadow$provide[146]=function(z,v,J,m){var t=v(142);J.exports=function(p,n){var c=t(this,p),e=c.size;c.set(p,n);this.size+=c.size==e?0:1;return this}};
shadow$provide[147]=function(z,v,J,m){function t(c){var e=-1,f=null==c?0:c.length;for(this.clear();++e<f;){var h=c[e];this.set(h[0],h[1])}}z=v(140);m=v(143);var p=v(144),n=v(145);v=v(146);t.prototype.clear=z;t.prototype["delete"]=m;t.prototype.get=p;t.prototype.has=n;t.prototype.set=v;J.exports=t};
shadow$provide[148]=function(z,v,J,m){var t=v(113),p=v(132),n=v(147);J.exports=function(c,e){var f=this.__data__;if(f instanceof t){var h=f.__data__;if(!p||199>h.length)return h.push([c,e]),this.size=++f.size,this;f=this.__data__=new n(h)}f.set(c,e);this.size=f.size;return this}};
shadow$provide[149]=function(z,v,J,m){function t(e){this.size=(this.__data__=new p(e)).size}var p=v(113);z=v(114);m=v(115);var n=v(116),c=v(117);v=v(148);t.prototype.clear=z;t.prototype["delete"]=m;t.prototype.get=n;t.prototype.has=c;t.prototype.set=v;J.exports=t};
shadow$provide[150]=function(z,v,J,m){J.exports=function(t,p){for(var n=-1,c=null==t?0:t.length;++n<c&&!1!==p(t[n],n,t););return t}};
shadow$provide[151]=function(z,v,J,m){z=v(131);a:{try{var t=z(Object,"defineProperty");t({},"",{});var p=t;break a}catch(n){}p=void 0}J.exports=p};
shadow$provide[152]=function(z,v,J,m){var t=v(151);J.exports=function(p,n,c){"__proto__"==n&&t?t(p,n,{configurable:!0,enumerable:!0,value:c,writable:!0}):p[n]=c}};
shadow$provide[153]=function(z,v,J,m){var t=v(152),p=v(107),n=Object.prototype.hasOwnProperty;J.exports=function(c,e,f){var h=c[e];n.call(c,e)&&p(h,f)&&(void 0!==f||e in c)||t(c,e,f)}};
shadow$provide[154]=function(z,v,J,m){var t=v(153),p=v(152);J.exports=function(n,c,e,f){var h=!e;e||(e={});for(var k=-1,g=c.length;++k<g;){var r=c[k],u=f?f(e[r],n[r],r,e,n):void 0;void 0===u&&(u=n[r]);h?p(e,r,u):t(e,r,u)}return e}};
shadow$provide[155]=function(z,v,J,m){J.exports=function(t,p){for(var n=-1,c=Array(t);++n<t;)c[n]=p(n);return c}};
shadow$provide[156]=function(z,v,J,m){J.exports=function(t){return null!=t&&"object"==typeof t}};
shadow$provide[157]=function(z,v,J,m){var t=v(123),p=v(156);J.exports=function(n){return p(n)&&"[object Arguments]"==t(n)}};
shadow$provide[158]=function(z,v,J,m){z=v(157);var t=v(156);v=Object.prototype;var p=v.hasOwnProperty,n=v.propertyIsEnumerable;v=z(function(){return arguments}())?z:function(c){return t(c)&&p.call(c,"callee")&&!n.call(c,"callee")};J.exports=v};
shadow$provide[159]=function(z,v,J,m){J.exports=Array.isArray};
shadow$provide[160]=function(z,v,J,m){J.exports=function(){return!1}};
shadow$provide[161]=function(z,v,J,m){z=v(119);v=v(160);var t=(m="object"==typeof m&&m&&!m.nodeType&&m)&&"object"==typeof J&&J&&!J.nodeType&&J;z=t&&t.exports===m?z.Buffer:void 0;J.exports=(z?z.isBuffer:void 0)||v};
shadow$provide[162]=function(z,v,J,m){var t=/^(?:0|[1-9]\d*)$/;J.exports=function(p,n){var c=typeof p;n=null==n?9007199254740991:n;return!!n&&("number"==c||"symbol"!=c&&t.test(p))&&-1<p&&0==p%1&&p<n}};
shadow$provide[163]=function(z,v,J,m){J.exports=function(t){return"number"==typeof t&&-1<t&&0==t%1&&9007199254740991>=t}};
shadow$provide[164]=function(z,v,J,m){var t=v(123),p=v(163),n=v(156),c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0;c["[object Arguments]"]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c["[object Function]"]=c["[object Map]"]=
c["[object Number]"]=c["[object Object]"]=c["[object RegExp]"]=c["[object Set]"]=c["[object String]"]=c["[object WeakMap]"]=!1;J.exports=function(e){return n(e)&&p(e.length)&&!!c[t(e)]}};
shadow$provide[165]=function(z,v,J,m){J.exports=function(t){return function(p){return t(p)}}};
shadow$provide[166]=function(z,v,J,m){z=v(118);z=(m=(v="object"==typeof m&&m&&!m.nodeType&&m)&&"object"==typeof J&&J&&!J.nodeType&&J)&&m.exports===v&&z.process;a:{try{var t=m&&m.require&&m.require("util").types;if(t){var p=t;break a}p=z&&z.binding&&z.binding("util");break a}catch(n){}p=void 0}J.exports=p};
shadow$provide[167]=function(z,v,J,m){z=v(164);m=v(165);v=(v=(v=v(166))&&v.isTypedArray)?m(v):z;J.exports=v};
shadow$provide[168]=function(z,v,J,m){var t=v(155),p=v(158),n=v(159),c=v(161),e=v(162),f=v(167),h=Object.prototype.hasOwnProperty;J.exports=function(k,g){var r=n(k),u=!r&&p(k),w=!r&&!u&&c(k),x=!r&&!u&&!w&&f(k);u=(r=r||u||w||x)?t(k.length,String):[];var B=u.length,E;for(E in k)!g&&!h.call(k,E)||r&&("length"==E||w&&("offset"==E||"parent"==E)||x&&("buffer"==E||"byteLength"==E||"byteOffset"==E)||e(E,B))||u.push(E);return u}};
shadow$provide[169]=function(z,v,J,m){var t=Object.prototype;J.exports=function(p){var n=p&&p.constructor;return p===("function"==typeof n&&n.prototype||t)}};
shadow$provide[170]=function(z,v,J,m){J.exports=function(t,p){return function(n){return t(p(n))}}};
shadow$provide[171]=function(z,v,J,m){z=v(170)(Object.keys,Object);J.exports=z};
shadow$provide[172]=function(z,v,J,m){var t=v(169),p=v(171),n=Object.prototype.hasOwnProperty;J.exports=function(c){if(!t(c))return p(c);var e=[],f;for(f in Object(c))n.call(c,f)&&"constructor"!=f&&e.push(f);return e}};
shadow$provide[173]=function(z,v,J,m){var t=v(125),p=v(163);J.exports=function(n){return null!=n&&p(n.length)&&!t(n)}};
shadow$provide[174]=function(z,v,J,m){var t=v(168),p=v(172),n=v(173);J.exports=function(c){return n(c)?t(c):p(c)}};
shadow$provide[175]=function(z,v,J,m){var t=v(154),p=v(174);J.exports=function(n,c){return n&&t(c,p(c),n)}};
shadow$provide[176]=function(z,v,J,m){J.exports=function(t){var p=[];if(null!=t)for(var n in Object(t))p.push(n);return p}};
shadow$provide[177]=function(z,v,J,m){var t=v(124),p=v(169),n=v(176),c=Object.prototype.hasOwnProperty;J.exports=function(e){if(!t(e))return n(e);var f=p(e),h=[],k;for(k in e)("constructor"!=k||!f&&c.call(e,k))&&h.push(k);return h}};
shadow$provide[178]=function(z,v,J,m){var t=v(168),p=v(177),n=v(173);J.exports=function(c){return n(c)?t(c,!0):p(c)}};
shadow$provide[179]=function(z,v,J,m){var t=v(154),p=v(178);J.exports=function(n,c){return n&&t(c,p(c),n)}};
shadow$provide[180]=function(z,v,J,m){z=v(119);var t=(m=(v=(m="object"==typeof m&&m&&!m.nodeType&&m)&&"object"==typeof J&&J&&!J.nodeType&&J)&&v.exports===m?z.Buffer:void 0)?m.allocUnsafe:void 0;J.exports=function(p,n){if(n)return p.slice();n=p.length;n=t?t(n):new p.constructor(n);p.copy(n);return n}};
shadow$provide[181]=function(z,v,J,m){J.exports=function(t,p){var n=-1,c=t.length;for(p||(p=Array(c));++n<c;)p[n]=t[n];return p}};
shadow$provide[182]=function(z,v,J,m){J.exports=function(t,p){for(var n=-1,c=null==t?0:t.length,e=0,f=[];++n<c;){var h=t[n];p(h,n,t)&&(f[e++]=h)}return f}};
shadow$provide[183]=function(z,v,J,m){J.exports=function(){return[]}};
shadow$provide[184]=function(z,v,J,m){var t=v(182);z=v(183);var p=Object.prototype.propertyIsEnumerable,n=Object.getOwnPropertySymbols;J.exports=n?function(c){if(null==c)return[];c=Object(c);return t(n(c),function(e){return p.call(c,e)})}:z};
shadow$provide[185]=function(z,v,J,m){var t=v(154),p=v(184);J.exports=function(n,c){return t(n,p(n),c)}};
shadow$provide[186]=function(z,v,J,m){J.exports=function(t,p){for(var n=-1,c=p.length,e=t.length;++n<c;)t[e+n]=p[n];return t}};
shadow$provide[187]=function(z,v,J,m){z=v(170)(Object.getPrototypeOf,Object);J.exports=z};
shadow$provide[188]=function(z,v,J,m){var t=v(186),p=v(187),n=v(184);z=v(183);J.exports=Object.getOwnPropertySymbols?function(c){for(var e=[];c;)t(e,n(c)),c=p(c);return e}:z};
shadow$provide[189]=function(z,v,J,m){var t=v(154),p=v(188);J.exports=function(n,c){return t(n,p(n),c)}};
shadow$provide[190]=function(z,v,J,m){var t=v(186),p=v(159);J.exports=function(n,c,e){c=c(n);return p(n)?c:t(c,e(n))}};
shadow$provide[191]=function(z,v,J,m){var t=v(190),p=v(184),n=v(174);J.exports=function(c){return t(c,n,p)}};
shadow$provide[192]=function(z,v,J,m){var t=v(190),p=v(188),n=v(178);J.exports=function(c){return t(c,n,p)}};
shadow$provide[193]=function(z,v,J,m){z=v(131);v=v(119);v=z(v,"DataView");J.exports=v};
shadow$provide[194]=function(z,v,J,m){z=v(131);v=v(119);v=z(v,"Promise");J.exports=v};
shadow$provide[195]=function(z,v,J,m){z=v(131);v=v(119);v=z(v,"Set");J.exports=v};
shadow$provide[196]=function(z,v,J,m){z=v(131);v=v(119);v=z(v,"WeakMap");J.exports=v};
shadow$provide[197]=function(z,v,J,m){z=v(193);m=v(132);var t=v(194),p=v(195),n=v(196),c=v(123),e=v(128),f=e(z),h=e(m),k=e(t),g=e(p),r=e(n);v=c;if(z&&"[object DataView]"!=v(new z(new ArrayBuffer(1)))||m&&"[object Map]"!=v(new m)||t&&"[object Promise]"!=v(t.resolve())||p&&"[object Set]"!=v(new p)||n&&"[object WeakMap]"!=v(new n))v=function(u){var w=c(u);if(u=(u="[object Object]"==w?u.constructor:void 0)?e(u):"")switch(u){case f:return"[object DataView]";case h:return"[object Map]";case k:return"[object Promise]";
case g:return"[object Set]";case r:return"[object WeakMap]"}return w};J.exports=v};
shadow$provide[198]=function(z,v,J,m){var t=Object.prototype.hasOwnProperty;J.exports=function(p){var n=p.length,c=new p.constructor(n);n&&"string"==typeof p[0]&&t.call(p,"index")&&(c.index=p.index,c.input=p.input);return c}};
shadow$provide[199]=function(z,v,J,m){z=v(119).Uint8Array;J.exports=z};
shadow$provide[200]=function(z,v,J,m){var t=v(199);J.exports=function(p){var n=new p.constructor(p.byteLength);(new t(n)).set(new t(p));return n}};
shadow$provide[201]=function(z,v,J,m){var t=v(200);J.exports=function(p,n){n=n?t(p.buffer):p.buffer;return new p.constructor(n,p.byteOffset,p.byteLength)}};
shadow$provide[202]=function(z,v,J,m){var t=/\w*$/;J.exports=function(p){var n=new p.constructor(p.source,t.exec(p));n.lastIndex=p.lastIndex;return n}};
shadow$provide[203]=function(z,v,J,m){var t=(z=(z=v(120))?z.prototype:void 0)?z.valueOf:void 0;J.exports=function(p){return t?Object(t.call(p)):{}}};
shadow$provide[204]=function(z,v,J,m){var t=v(200);J.exports=function(p,n){n=n?t(p.buffer):p.buffer;return new p.constructor(n,p.byteOffset,p.length)}};
shadow$provide[205]=function(z,v,J,m){var t=v(200),p=v(201),n=v(202),c=v(203),e=v(204);J.exports=function(f,h,k){var g=f.constructor;switch(h){case "[object ArrayBuffer]":return t(f);case "[object Boolean]":case "[object Date]":return new g(+f);case "[object DataView]":return p(f,k);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return e(f,
k);case "[object Map]":return new g;case "[object Number]":case "[object String]":return new g(f);case "[object RegExp]":return n(f);case "[object Set]":return new g;case "[object Symbol]":return c(f)}}};
shadow$provide[206]=function(z,v,J,m){var t=v(124),p=Object.create;z=function(){function n(){}return function(c){if(!t(c))return{};if(p)return p(c);n.prototype=c;c=new n;n.prototype=void 0;return c}}();J.exports=z};
shadow$provide[207]=function(z,v,J,m){var t=v(206),p=v(187),n=v(169);J.exports=function(c){return"function"!=typeof c.constructor||n(c)?{}:t(p(c))}};
shadow$provide[208]=function(z,v,J,m){var t=v(197),p=v(156);J.exports=function(n){return p(n)&&"[object Map]"==t(n)}};
shadow$provide[209]=function(z,v,J,m){z=v(208);m=v(165);v=(v=(v=v(166))&&v.isMap)?m(v):z;J.exports=v};
shadow$provide[210]=function(z,v,J,m){var t=v(197),p=v(156);J.exports=function(n){return p(n)&&"[object Set]"==t(n)}};
shadow$provide[211]=function(z,v,J,m){z=v(210);m=v(165);v=(v=(v=v(166))&&v.isSet)?m(v):z;J.exports=v};
shadow$provide[212]=function(z,v,J,m){function t(ca,ka,la,Aa,ta,Ha){var Oa,da=ka&1,Wa=ka&2,Pa=ka&4;la&&(Oa=ta?la(ca,Aa,ta,Ha):la(ca));if(void 0!==Oa)return Oa;if(!O(ca))return ca;if(Aa=H(ca)){if(Oa=B(ca),!da)return k(ca,Oa)}else{var mb=x(ca),Cb="[object Function]"==mb||"[object GeneratorFunction]"==mb;if(I(ca))return h(ca,da);if("[object Object]"==mb||"[object Arguments]"==mb||Cb&&!ta){if(Oa=Wa||Cb?{}:C(ca),!da)return Wa?r(ca,f(Oa,ca)):g(ca,e(Oa,ca))}else{if(!X[mb])return ta?ca:{};Oa=E(ca,mb,da)}}Ha||
(Ha=new p);if(ta=Ha.get(ca))return ta;Ha.set(ca,Oa);Q(ca)?ca.forEach(function(tb){Oa.add(t(tb,ka,la,tb,ca,Ha))}):K(ca)&&ca.forEach(function(tb,Rb){Oa.set(Rb,t(tb,ka,la,Rb,ca,Ha))});Wa=Pa?Wa?w:u:Wa?R:W;var yb=Aa?void 0:Wa(ca);n(yb||ca,function(tb,Rb){yb&&(Rb=tb,tb=ca[Rb]);c(Oa,Rb,t(tb,ka,la,Rb,ca,Ha))});return Oa}var p=v(149),n=v(150),c=v(153),e=v(175),f=v(179),h=v(180),k=v(181),g=v(185),r=v(189),u=v(191),w=v(192),x=v(197),B=v(198),E=v(205),C=v(207),H=v(159),I=v(161),K=v(209),O=v(124),Q=v(211),W=v(174),
R=v(178),X={};X["[object Arguments]"]=X["[object Array]"]=X["[object ArrayBuffer]"]=X["[object DataView]"]=X["[object Boolean]"]=X["[object Date]"]=X["[object Float32Array]"]=X["[object Float64Array]"]=X["[object Int8Array]"]=X["[object Int16Array]"]=X["[object Int32Array]"]=X["[object Map]"]=X["[object Number]"]=X["[object Object]"]=X["[object RegExp]"]=X["[object Set]"]=X["[object String]"]=X["[object Symbol]"]=X["[object Uint8Array]"]=X["[object Uint8ClampedArray]"]=X["[object Uint16Array]"]=X["[object Uint32Array]"]=
!0;X["[object Error]"]=X["[object Function]"]=X["[object WeakMap]"]=!1;J.exports=t};
shadow$provide[213]=function(z,v,J,m){var t=v(212);J.exports=function(p){return t(p,5)}};
shadow$provide[214]=function(z,v,J,m){J.exports=function(t){this.__data__.set(t,"__lodash_hash_undefined__");return this}};
shadow$provide[215]=function(z,v,J,m){J.exports=function(t){return this.__data__.has(t)}};
shadow$provide[216]=function(z,v,J,m){function t(n){var c=-1,e=null==n?0:n.length;for(this.__data__=new p;++c<e;)this.add(n[c])}var p=v(147);z=v(214);v=v(215);t.prototype.add=t.prototype.push=z;t.prototype.has=v;J.exports=t};
shadow$provide[217]=function(z,v,J,m){J.exports=function(t,p){for(var n=-1,c=null==t?0:t.length;++n<c;)if(p(t[n],n,t))return!0;return!1}};
shadow$provide[218]=function(z,v,J,m){J.exports=function(t,p){return t.has(p)}};
shadow$provide[219]=function(z,v,J,m){var t=v(216),p=v(217),n=v(218);J.exports=function(c,e,f,h,k,g){var r=f&1,u=c.length,w=e.length;if(u!=w&&!(r&&w>u))return!1;w=g.get(c);var x=g.get(e);if(w&&x)return w==e&&x==c;w=-1;x=!0;var B=f&2?new t:void 0;g.set(c,e);for(g.set(e,c);++w<u;){var E=c[w],C=e[w];if(h)var H=r?h(C,E,w,e,c,g):h(E,C,w,c,e,g);if(void 0!==H){if(H)continue;x=!1;break}if(B){if(!p(e,function(I,K){if(!n(B,K)&&(E===I||k(E,I,f,h,g)))return B.push(K)})){x=!1;break}}else if(E!==C&&!k(E,C,f,h,
g)){x=!1;break}}g["delete"](c);g["delete"](e);return x}};
shadow$provide[220]=function(z,v,J,m){J.exports=function(t){var p=-1,n=Array(t.size);t.forEach(function(c,e){n[++p]=[e,c]});return n}};
shadow$provide[221]=function(z,v,J,m){J.exports=function(t){var p=-1,n=Array(t.size);t.forEach(function(c){n[++p]=c});return n}};
shadow$provide[222]=function(z,v,J,m){z=v(120);var t=v(199),p=v(107),n=v(219),c=v(220),e=v(221),f=(v=z?z.prototype:void 0)?v.valueOf:void 0;J.exports=function(h,k,g,r,u,w,x){switch(g){case "[object DataView]":if(h.byteLength!=k.byteLength||h.byteOffset!=k.byteOffset)break;h=h.buffer;k=k.buffer;case "[object ArrayBuffer]":if(h.byteLength!=k.byteLength||!w(new t(h),new t(k)))break;return!0;case "[object Boolean]":case "[object Date]":case "[object Number]":return p(+h,+k);case "[object Error]":return h.name==
k.name&&h.message==k.message;case "[object RegExp]":case "[object String]":return h==k+"";case "[object Map]":var B=c;case "[object Set]":B||(B=e);if(h.size!=k.size&&!(r&1))break;if(g=x.get(h))return g==k;r|=2;x.set(h,k);k=n(B(h),B(k),r,u,w,x);x["delete"](h);return k;case "[object Symbol]":if(f)return f.call(h)==f.call(k)}return!1}};
shadow$provide[223]=function(z,v,J,m){var t=v(191),p=Object.prototype.hasOwnProperty;J.exports=function(n,c,e,f,h,k){var g=e&1,r=t(n),u=r.length,w=t(c).length;if(u!=w&&!g)return!1;for(w=u;w--;){var x=r[w];if(!(g?x in c:p.call(c,x)))return!1}var B=k.get(n);x=k.get(c);if(B&&x)return B==c&&x==n;B=!0;k.set(n,c);k.set(c,n);for(var E=g;++w<u;){x=r[w];var C=n[x],H=c[x];if(f)var I=g?f(H,C,x,c,n,k):f(C,H,x,n,c,k);if(void 0===I?C!==H&&!h(C,H,e,f,k):!I){B=!1;break}E||(E="constructor"==x)}B&&!E&&(e=n.constructor,
f=c.constructor,e!=f&&"constructor"in n&&"constructor"in c&&!("function"==typeof e&&e instanceof e&&"function"==typeof f&&f instanceof f)&&(B=!1));k["delete"](n);k["delete"](c);return B}};
shadow$provide[224]=function(z,v,J,m){var t=v(149),p=v(219),n=v(222),c=v(223),e=v(197),f=v(159),h=v(161),k=v(167),g=Object.prototype.hasOwnProperty;J.exports=function(r,u,w,x,B,E){var C=f(r),H=f(u),I=C?"[object Array]":e(r),K=H?"[object Array]":e(u);I="[object Arguments]"==I?"[object Object]":I;K="[object Arguments]"==K?"[object Object]":K;var O="[object Object]"==I;H="[object Object]"==K;if((K=I==K)&&h(r)){if(!h(u))return!1;C=!0;O=!1}if(K&&!O)return E||(E=new t),C||k(r)?p(r,u,w,x,B,E):n(r,u,I,w,
x,B,E);if(!(w&1)&&(C=O&&g.call(r,"__wrapped__"),I=H&&g.call(u,"__wrapped__"),C||I))return r=C?r.value():r,u=I?u.value():u,E||(E=new t),B(r,u,w,x,E);if(!K)return!1;E||(E=new t);return c(r,u,w,x,B,E)}};
shadow$provide[225]=function(z,v,J,m){function t(c,e,f,h,k){return c===e?!0:null==c||null==e||!n(c)&&!n(e)?c!==c&&e!==e:p(c,e,f,h,t,k)}var p=v(224),n=v(156);J.exports=t};
shadow$provide[226]=function(z,v,J,m){var t=v(225);J.exports=function(p,n){return t(p,n)}};
shadow$provide[227]=function(z,v,J,m){function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(m,"__esModule",{value:!0});m.Latch=void 0;z=v(90);var p=t(v(213)),n=t(v(226));class c extends z.Parent{static initClass(){this.traits=["node","entity","active","latch"]}init(){this.data=void 0;this.isDirty=!0}make(){this._helpers.active.make();this._listen("root","root.update",function(){this.isActive&&this.update()})}unmake(){this._helpers.active.unmake();this.data=void 0}swap(){const {deep:e,
data:f}=this.props;(e?(0,n.default)(f,this.data):f==this.data)||(this.data=e?(0,p.default)(f):f)}update(){this.isDirty=this.swap()}}m.Latch=c;c.initClass()};
shadow$provide[228]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.Matrix=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(99));z=v(103);class n extends z.Buffer{static initClass(){this.traits="node buffer active data source index texture matrix raw".split(" ")}init(){this.buffer=this.spec=null;this.space={width:0,height:0,history:0};this.used={width:0,height:0};this.storage="matrixBuffer";this.passthrough=(c,e,f)=>c(e,f,0,0);return super.init()}sourceShader(c){const e=this.getDimensions();
this.alignShader(e,c);return this.buffer.shader(c)}getDimensions(){return{items:this.items,width:this.space.width,height:this.space.height,depth:this.space.history}}getActiveDimensions(){return{items:this.items,width:this.used.width,height:this.used.height,depth:this.buffer.getFilled()}}getFutureDimensions(){return{items:this.items,width:this.used.width,height:this.used.height,depth:this.space.history}}getRawDimensions(){return{items:this.items,width:this.space.width,height:this.space.height,depth:1}}make(){super.make();
const c=null!=this.minFilter?this.minFilter:this.props.minFilter,e=null!=this.magFilter?this.magFilter:this.props.magFilter,f=null!=this.type?this.type:this.props.type;var {width:h}=this.props,{height:k}=this.props;const {history:g}=this.props,r=this.props.bufferWidth,u=this.props.bufferHeight,{channels:w}=this.props,{items:x}=this.props;h=this.spec={channels:w,items:x,width:h,height:k};this.items=h.items;this.channels=h.channels;({data:k}=this.props);h=p.getDimensions(k,h);({space:k}=this);k.width=
Math.max(r,h.width||1);k.height=Math.max(u,h.height||1);k.history=g;return this.buffer=this._renderables.make(this.storage,{width:k.width,height:k.height,history:k.history,channels:w,items:x,minFilter:c,magFilter:e,type:f})}unmake(){super.unmake();if(this.buffer)return this.buffer.dispose(),this.buffer=this.spec=null}change(c,e,f){if(e.texture||c["matrix.history"]||c["buffer.channels"]||c["buffer.items"]||c["matrix.bufferWidth"]||c["matrix.bufferHeight"])return this.rebuild();if(this.buffer){if(c["matrix.width"]){const {width:h,
bufferWidth:k}=this.props;this.spec.width=h;if(h>k)return this.rebuild()}if(c["matrix.height"]){const {height:h,bufferHeight:k}=this.props;this.spec.height=h;if(h>k)return this.rebuild()}if(c["data.map"]||c["data.data"]||c["data.resolve"]||c["data.expr"]||f)return this.buffer.setCallback(this.emitter())}}callback(c){return 3>=c.length?c:(e,f,h)=>c(e,f,h,this.bufferClock,this.bufferStep)}update(){if(this.buffer){var {data:c}=this.props,{space:e,used:f}=this,h=f.width,k=f.height,g=this.buffer.getFilled();
this.syncBuffer(r=>{if(null!=c){var u=p.getDimensions(c,this.spec);if(u.width>e.width||u.height>e.height)return r(),this.rebuild();f.width=u.width;f.height=u.height;this.buffer.setActive(f.width,f.height);"function"===typeof this.buffer.callback.rebind&&this.buffer.callback.rebind(c);return this.buffer.update()}r=this.spec.width||1;u=this.spec.height||1;this.buffer.setActive(r,u);const w=this.buffer.update();f.width=r;f.height=Math.min(u,Math.ceil(w/r));1===f.height&&(f.width=Math.min(r,w))});if(f.width!==
h||f.height!==k||g!==this.buffer.getFilled())return this.trigger({type:"source.resize"})}}}m.Matrix=n;n.initClass()};
shadow$provide[229]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Area=void 0;z=v(228);class t extends z.Matrix{static initClass(){this.traits="node buffer active data source index matrix texture raw span:x span:y area sampler:x sampler:y".split(" ")}updateSpan(){var p=this.props.axes;({width:k}=this.props);({height:g}=this.props);const {centeredX:n}=this.props,{centeredY:c}=this.props,e=this.props.paddingX,f=this.props.paddingY;var h=this._helpers.span.get("x.",p[0]);p=this._helpers.span.get("y.",
p[1]);this.aX=h.x;this.aY=p.x;h=h.y-h.x;p=p.y-p.x;k+=2*e;g+=2*f;if(n){var k=1/Math.max(1,k);this.aX+=h*k/2}else k=1/Math.max(1,k-1);if(c){var g=1/Math.max(1,g);this.aY+=p*g/2}else g=1/Math.max(1,g-1);this.bX=h*k;this.bY=p*g;this.aX+=e*this.bX;return this.aY+=f*this.bY}callback(p){this.updateSpan();if(this.last===p)return this._callback;this.last=p;return 5>=p.length?this._callback=(n,c,e)=>p(n,this.aX+this.bX*c,this.aY+this.bY*e,c,e):this._callback=(n,c,e)=>p(n,this.aX+this.bX*c,this.aY+this.bY*e,
c,e,this.bufferClock,this.bufferStep)}make(){super.make();this._helpers.span.make();return this._listen(this,"span.range",this.updateSpan)}unmake(){super.unmake();return this._helpers.span.unmake()}change(p,n,c){super.change(p,n,c);(n.x||n.y)&&this.updateSpan()}}m.Area=t;t.initClass()};
shadow$provide[230]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.Voxel=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(99));z=v(103);class n extends z.Buffer{constructor(...c){super(...c);this.update=this.update.bind(this)}static initClass(){this.traits="node buffer active data source index texture voxel raw".split(" ")}init(){this.buffer=this.spec=null;this.space={width:0,height:0,depth:0};this.used={width:0,height:0,depth:0};this.storage="voxelBuffer";this.passthrough=
(c,e,f,h)=>c(e,f,h,0);super.init()}sourceShader(c){const e=this.getDimensions();this.alignShader(e,c);return this.buffer.shader(c)}getDimensions(){return{items:this.items,width:this.space.width,height:this.space.height,depth:this.space.depth}}getActiveDimensions(){return{items:this.items,width:this.used.width,height:this.used.height,depth:this.used.depth*this.buffer.getFilled()}}getRawDimensions(){return this.getDimensions()}make(){super.make();const c=null!=this.minFilter?this.minFilter:this.props.minFilter,
e=null!=this.magFilter?this.magFilter:this.props.magFilter,f=null!=this.type?this.type:this.props.type;var {width:h}=this.props,{height:k}=this.props;const {depth:g}=this.props,r=this.props.bufferWidth,u=this.props.bufferHeight,w=this.props.bufferDepth,{channels:x}=this.props,{items:B}=this.props;h=this.spec={channels:x,items:B,width:h,height:k,depth:g};this.items=h.items;this.channels=h.channels;({data:k}=this.props);h=p.getDimensions(k,h);({space:k}=this);k.width=Math.max(r,h.width||1);k.height=
Math.max(u,h.height||1);k.depth=Math.max(w,h.depth||1);return this.buffer=this._renderables.make(this.storage,{width:k.width,height:k.height,depth:k.depth,channels:x,items:B,minFilter:c,magFilter:e,type:f})}unmake(){super.unmake();if(this.buffer)return this.buffer.dispose(),this.buffer=this.spec=null}change(c,e,f){if(e.texture||c["buffer.channels"]||c["buffer.items"]||c["voxel.bufferWidth"]||c["voxel.bufferHeight"]||c["voxel.bufferDepth"])return this.rebuild();if(this.buffer){if(c["voxel.width"]){const {width:h,
bufferWidth:k}=this.props;this.spec.width=h;if(h>k)return this.rebuild()}if(c["voxel.height"]){const {height:h,bufferHeight:k}=this.props;this.spec.height=h;if(h>k)return this.rebuild()}if(c["voxel.depth"]){const {depth:h,bufferDepth:k}=this.props;this.spec.depth=h;if(h>k)return this.rebuild()}if(c["data.map"]||c["data.data"]||c["data.resolve"]||c["data.expr"]||f)return this.buffer.setCallback(this.emitter())}}callback(c){return 4>=c.length?c:(e,f,h,k)=>c(e,f,h,k,this.bufferClock,this.bufferStep)}update(){if(this.buffer){var {data:c}=
this.props,{space:e,used:f}=this,h=f.width,k=f.height,g=f.depth,r=this.buffer.getFilled();this.syncBuffer(u=>{if(null!=c){var w=p.getDimensions(c,this.spec);if(w.width>e.width||w.height>e.height||w.depth>e.depth)return u(),this.rebuild();f.width=w.width;f.height=w.height;f.depth=w.depth;this.buffer.setActive(f.width,f.height,f.depth);"function"===typeof this.buffer.callback.rebind&&this.buffer.callback.rebind(c);return this.buffer.update()}u=this.spec.width||1;w=this.spec.height||1;const x=this.spec.depth||
1;this.buffer.setActive(u,w,x);const B=this.buffer.update();f.width=u;f.height=w;f.depth=Math.min(x,Math.ceil(B/u/w));1===f.depth&&(f.height=Math.min(w,Math.ceil(B/u)),1===f.height&&(f.width=Math.min(u,B)))});if(f.width!==h||f.height!==k||f.depth!==g||r!==this.buffer.getFilled())return this.trigger({type:"source.resize"})}}}m.Voxel=n;n.initClass()};
shadow$provide[231]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Volume=void 0;z=v(230);class t extends z.Voxel{static initClass(){this.traits="node buffer active data source index texture voxel span:x span:y span:z volume sampler:x sampler:y sampler:z raw".split(" ")}updateSpan(){var p=this.props.axes;({width:u}=this.props);({height:w}=this.props);({depth:x}=this.props);const {centeredX:n}=this.props,{centeredY:c}=this.props,{centeredZ:e}=this.props,f=this.props.paddingX,
h=this.props.paddingY,k=this.props.paddingZ;var g=this._helpers.span.get("x.",p[0]),r=this._helpers.span.get("y.",p[1]);p=this._helpers.span.get("z.",p[2]);this.aX=g.x;this.aY=r.x;this.aZ=p.x;g=g.y-g.x;r=r.y-r.x;p=p.y-p.x;u+=2*f;w+=2*h;x+=2*k;if(n){var u=1/Math.max(1,u);this.aX+=g*u/2}else u=1/Math.max(1,u-1);if(c){var w=1/Math.max(1,w);this.aY+=r*w/2}else w=1/Math.max(1,w-1);if(e){var x=1/Math.max(1,x);this.aZ+=p*x/2}else x=1/Math.max(1,x-1);this.bX=g*u;this.bY=r*w;this.bZ=p*x;this.aX+=this.bX*f;
this.aY+=this.bY*h;return this.aZ+=this.bZ*h}callback(p){this.updateSpan();if(this.last===p)return this._callback;this.last=p;return 7>=p.length?this._callback=(n,c,e,f)=>p(n,this.aX+this.bX*c,this.aY+this.bY*e,this.aZ+this.bZ*f,c,e,f):this._callback=(n,c,e,f)=>p(n,this.aX+this.bX*c,this.aY+this.bY*e,this.aZ+this.bZ*f,c,e,f,this.bufferClock,this.bufferStep)}make(){super.make();this._helpers.span.make();return this._listen(this,"span.range",this.updateSpan)}unmake(){super.unmake();return this._helpers.span.unmake()}change(p,
n,c){super.change(p,n,c);(n.x||n.y||n.z)&&this.updateSpan()}}m.Volume=t;t.initClass()};
shadow$provide[232]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.recenterAxis=m.setDimensionNormal=m.setDimension=m.addOrigin=m.setOrigin=void 0;var t=v(2);const p=function(n,c,e){+c===c&&(c=[c]);const f=Array.from(c).includes(1)?0:e.x,h=Array.from(c).includes(2)?0:e.y,k=Array.from(c).includes(3)?0:e.z;c=Array.from(c).includes(4)?0:e.w;return n.set(f,h,k,c)};m.setOrigin=p;z=function(){const n=new t.Vector4;return function(c,e,f){p(n,e,f);return c.add(n)}}();m.addOrigin=z;m.setDimension=
function(n,c){return n.set(1===c?1:0,2===c?1:0,3===c?1:0,4===c?1:0)};m.setDimensionNormal=function(n,c){return n.set(2===c?1:0,(3===c?1:0)+(1===c?1:0),4===c?1:0,0)};z=function(){const n=[0,0];return function(c,e,f,h){null==h&&(h=0);if(0<f){var k=c;c+=e;e=Math.max(Math.abs(k),Math.abs(c));h*=e;const g=Math.min(k,c);k=Math.max(k,c);c=g+(-e+h-g)*f;e=k+(e+h-k)*f-c}n[0]=c;n[1]=e;return n}}();m.recenterAxis=z};
shadow$provide[233]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.Scale=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(232));z=v(101);class n extends z.Source{static initClass(){this.traits="node source index interval span scale raw origin".split(" ")}init(){return this.used=this.space=this.scaleAxis=this.sampler=null}rawBuffer(){return this.buffer}sourceShader(c){return c.pipe(this.sampler)}getDimensions(){return{items:1,width:this.space,height:1,depth:1}}getActiveDimensions(){return{items:1,
width:this.used,height:this.buffer.getFilled(),depth:1}}getRawDimensions(){return this.getDimensions()}make(){var c;this.space=c=this._helpers.scale.divide("");this.buffer=this._renderables.make("dataBuffer",{width:c,channels:1,items:1});c={scaleAxis:this._attributes.make(this._types.vec4()),scaleOffset:this._attributes.make(this._types.vec4())};this.scaleAxis=c.scaleAxis.value;this.scaleOffset=c.scaleOffset.value;const e=this.sampler=this._shaders.shader();e.require(this.buffer.shader(this._shaders.shader(),
1));e.pipe("scale.position",c);this._helpers.span.make();return this._listen(this,"span.range",this.updateRanges)}unmake(){this.scaleAxis=null;return this._helpers.span.unmake()}change(c,e,f){if(c["scale.divide"])return this.rebuild();if(e.view||e.interval||e.span||e.scale||e.origin||f)return this.updateRanges()}updateRanges(){const {used:c}=this,{axis:e,origin:f}=this.props;var h=this._helpers.span.get("",e);h=this._helpers.scale.generate("",this.buffer,h.x,h.y);p.setDimension(this.scaleAxis,e);
p.setOrigin(this.scaleOffset,e,f);this.used=h.length;if(this.used!==c)return this.trigger({type:"source.resize"})}}m.Scale=n;n.initClass()};
shadow$provide[234]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});var t=v(104);Object.keys(t).forEach(function(g){"default"!==g&&"__esModule"!==g&&(g in m&&m[g]===t[g]||Object.defineProperty(m,g,{enumerable:!0,get:function(){return t[g]}}))});var p=v(105);Object.keys(p).forEach(function(g){"default"!==g&&"__esModule"!==g&&(g in m&&m[g]===p[g]||Object.defineProperty(m,g,{enumerable:!0,get:function(){return p[g]}}))});var n=v(227);Object.keys(n).forEach(function(g){"default"!==
g&&"__esModule"!==g&&(g in m&&m[g]===n[g]||Object.defineProperty(m,g,{enumerable:!0,get:function(){return n[g]}}))});var c=v(228);Object.keys(c).forEach(function(g){"default"!==g&&"__esModule"!==g&&(g in m&&m[g]===c[g]||Object.defineProperty(m,g,{enumerable:!0,get:function(){return c[g]}}))});var e=v(229);Object.keys(e).forEach(function(g){"default"!==g&&"__esModule"!==g&&(g in m&&m[g]===e[g]||Object.defineProperty(m,g,{enumerable:!0,get:function(){return e[g]}}))});var f=v(230);Object.keys(f).forEach(function(g){"default"!==
g&&"__esModule"!==g&&(g in m&&m[g]===f[g]||Object.defineProperty(m,g,{enumerable:!0,get:function(){return f[g]}}))});var h=v(231);Object.keys(h).forEach(function(g){"default"!==g&&"__esModule"!==g&&(g in m&&m[g]===h[g]||Object.defineProperty(m,g,{enumerable:!0,get:function(){return h[g]}}))});var k=v(233);Object.keys(k).forEach(function(g){"default"!==g&&"__esModule"!==g&&(g in m&&m[g]===k[g]||Object.defineProperty(m,g,{enumerable:!0,get:function(){return k[g]}}))})};
shadow$provide[235]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.parseQuoted=m.clone=m.merge=void 0;m.merge=function(){const t={};for(const p of Array.from(arguments))for(const n in p)t[n]=p[n];return t};m.clone=t=>JSON.parse(JSON.serialize(t));m.parseQuoted=function(t){let p="";const n=function(f){if(p.length){var h=e,k=h.push;var g=p.replace(/\\/g,"");k.call(h,g)}return p=null!=f?f:""};t=t.split(/(?=(?:\\.|["' ,]))/g);let c=!1;const e=[];for(const f of Array.from(t)){const h=
f[0],k=f.slice(1);switch(h){case '"':case "'":if(c)c===h?(c=!1,n(k)):p+=f;else{if(""!==p)throw Error(`ParseError: String \`${t}\` does not contain comma-separated quoted tokens.`);c=h;p+=k}break;case " ":case ",":c?p+=f:n(k);break;default:p+=f}}n();return e}};
shadow$provide[236]=function(z,v,J,m){function t(f){if("function"!==typeof WeakMap)return null;var h=new WeakMap,k=new WeakMap;return(t=function(g){return g?k:h})(f)}function p(f,h){if(!h&&f&&f.__esModule)return f;if(null===f||"object"!==typeof f&&"function"!==typeof f)return{default:f};if((h=t(h))&&h.has(f))return h.get(f);var k={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,r;for(r in f)if("default"!==r&&Object.prototype.hasOwnProperty.call(f,r)){var u=g?Object.getOwnPropertyDescriptor(f,
r):null;u&&(u.get||u.set)?Object.defineProperty(k,r,u):k[r]=f[r]}k.default=f;h&&h.set(f,k);return k}Object.defineProperty(m,"__esModule",{value:!0});m.Axis=void 0;var n=p(v(232)),c=p(v(235));z=v(89);class e extends z.Primitive{static initClass(){this.traits="node object visible style line axis span interval arrow position origin shade".split(" ");this.defaults={end:!0,zBias:-1}}constructor(f,h,k){super(f,h,k);this.axisPosition=this.axisStep=this.resolution=this.line=this.arrows=null}make(){var f=
{axisPosition:this._attributes.make(this._types.vec4()),axisStep:this._attributes.make(this._types.vec4())};this.axisPosition=f.axisPosition.value;this.axisStep=f.axisStep.value;let h=this._shaders.shader();h.pipe("axis.position",f);h=this._helpers.position.pipeline(h);var k=this._helpers.style.uniforms();const g=this._helpers.line.uniforms(),r=this._helpers.arrow.uniforms(),u=this._inherit("unit").getUnitUniforms();var {detail:w}=this.props;f=w+1;this.resolution=1/w;const {start:x,end:B}=this.props,
{stroke:E,join:C}=this.props;w=this._helpers.object.mask();const H=this._helpers.shade.pipeline()||!1,{crossed:I,axis:K}=this.props;!I&&null!=w&&1<K&&(w=this._helpers.position.swizzle(w,["x000","y000","z000","w000"][K]));k=c.merge(r,g,k,u);this.line=this._renderables.make("line",{uniforms:k,samples:f,position:h,clip:x||B,stroke:E,join:C,mask:w,material:H});this.arrows=[];x&&this.arrows.push(this._renderables.make("arrow",{uniforms:k,flip:!0,samples:f,position:h,mask:w,material:H}));B&&this.arrows.push(this._renderables.make("arrow",
{uniforms:k,samples:f,position:h,mask:w,material:H}));this._helpers.visible.make();this._helpers.object.make(this.arrows.concat([this.line]));this._helpers.span.make();return this._listen(this,"span.range",this.updateRanges)}unmake(){this._helpers.visible.unmake();this._helpers.object.unmake();return this._helpers.span.unmake()}change(f,h,k){if(f["axis.detail"]||f["line.stroke"]||f["line.join"]||f["axis.crossed"]||f["interval.axis"]&&this.props.crossed)return this.rebuild();if(h.interval||h.span||
h.view||h.origin||k)return this.updateRanges()}updateRanges(){const {axis:f,origin:h}=this.props;var k=this._helpers.span.get("",f);const g=k.x;k=k.y;n.setDimension(this.axisPosition,f).multiplyScalar(g);n.setDimension(this.axisStep,f).multiplyScalar((k-g)*this.resolution);return n.addOrigin(this.axisPosition,f,h)}}m.Axis=e;e.initClass()};
shadow$provide[237]=function(z,v,J,m){function t(f){if("function"!==typeof WeakMap)return null;var h=new WeakMap,k=new WeakMap;return(t=function(g){return g?k:h})(f)}function p(f,h){if(!h&&f&&f.__esModule)return f;if(null===f||"object"!==typeof f&&"function"!==typeof f)return{default:f};if((h=t(h))&&h.has(f))return h.get(f);var k={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,r;for(r in f)if("default"!==r&&Object.prototype.hasOwnProperty.call(f,r)){var u=g?Object.getOwnPropertyDescriptor(f,
r):null;u&&(u.get||u.set)?Object.defineProperty(k,r,u):k[r]=f[r]}k.default=f;h&&h.set(f,k);return k}Object.defineProperty(m,"__esModule",{value:!0});m.Face=void 0;var n=p(v(100)),c=p(v(235));z=v(89);class e extends z.Primitive{static initClass(){this.traits="node object visible style line mesh face geometry position bind shade".split(" ")}constructor(f,h,k){super(f,h,k);this.face=null}resize(){if(null!=this.bind.points){var f=this.bind.points.getActiveDimensions(),{items:h,width:k,height:g,depth:r}=
f;this.face&&this.face.geometry.clip(k,g,r,h);this.line&&this.line.geometry.clip(h,k,g,r);if(null!=this.bind.map&&(f=this.bind.map.getActiveDimensions(),this.face))return this.face.geometry.map(f.width,f.height,f.depth,f.items)}}make(){let f;this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"},{to:"mesh.map",trait:"source"}]);if(null!=this.bind.points){var h=this.bind.points.sourceShader(this._shaders.shader());h=this._helpers.position.pipeline(h);var k=
this._helpers.style.uniforms();var g=this._helpers.line.uniforms();var r=this._inherit("unit").getUnitUniforms(),u={};u.styleZBias=this._attributes.make(this._types.number());this.wireZBias=u.styleZBias;var w=this.bind.points.getDimensions(),{items:x,width:B,height:E,depth:C}=w,{line:H,shaded:I,fill:K,stroke:O,join:Q}=this.props;this.bind.colors&&(f=this._shaders.shader(),this.bind.colors.sourceShader(f));w=this._helpers.object.mask();var W=this._helpers.shade.map(null!=this.bind.map?this.bind.map.sourceShader(this._shaders.shader()):
void 0),R=this._helpers.shade.pipeline(),X=R||I;R=R||!1;var ca=[];if(H){const ka=this._shaders.shader();ka.pipe(n.swizzleVec4("yzwx"));ka.pipe(h);g=c.merge(r,g,k,u);this.line=this._renderables.make("line",{uniforms:g,samples:x,strips:B,ribbons:E,layers:C,position:ka,color:f,stroke:O,join:Q,material:R,mask:w,closed:!0});ca.push(this.line)}K&&(g=c.merge(r,k,{}),this.face=this._renderables.make("face",{uniforms:g,width:B,height:E,depth:C,items:x,position:h,color:f,material:X,mask:w,map:W}),ca.push(this.face));
this._helpers.visible.make();return this._helpers.object.make(ca)}}made(){return this.resize()}unmake(){this._helpers.bind.unmake();this._helpers.visible.unmake();this._helpers.object.unmake();return this.face=this.line=null}change(f,h,k){if(f["geometry.points"]||h.mesh)return this.rebuild();if(f["style.zBias"]||f["mesh.lineBias"]||k){const {fill:g,zBias:r,lineBias:u}=this.props;return this.wireZBias.value=r+(g?u:0)}}}m.Face=e;e.initClass()};
shadow$provide[238]=function(z,v,J,m){function t(f){if("function"!==typeof WeakMap)return null;var h=new WeakMap,k=new WeakMap;return(t=function(g){return g?k:h})(f)}function p(f,h){if(!h&&f&&f.__esModule)return f;if(null===f||"object"!==typeof f&&"function"!==typeof f)return{default:f};if((h=t(h))&&h.has(f))return h.get(f);var k={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,r;for(r in f)if("default"!==r&&Object.prototype.hasOwnProperty.call(f,r)){var u=g?Object.getOwnPropertyDescriptor(f,
r):null;u&&(u.get||u.set)?Object.defineProperty(k,r,u):k[r]=f[r]}k.default=f;h&&h.set(f,k);return k}Object.defineProperty(m,"__esModule",{value:!0});m.Grid=void 0;var n=p(v(232)),c=p(v(235));z=v(89);class e extends z.Primitive{static initClass(){this.traits="node object visible style line grid area position origin shade axis:x axis:y scale:x scale:y span:x span:y".split(" ");this.defaults={width:1,zBias:-2}}constructor(f,h,k){super(f,h,k);this.axes=null}make(){let f,h=this._helpers.object.mask();
const k=this._helpers.shade.pipeline()||!1;f=(C,H,I)=>{var K,O=this._get(C+"axis.detail");const Q=O+1;O=1/O;const W=this._helpers.scale.divide(H),R=this._renderables.make("dataBuffer",{width:W,channels:1});var X={gridPosition:this._attributes.make(this._types.vec4()),gridStep:this._attributes.make(this._types.vec4()),gridAxis:this._attributes.make(this._types.vec4())};const ca={gridPosition:X.gridPosition.value,gridStep:X.gridStep.value,gridAxis:X.gridAxis.value};var ka=K=this._shaders.shader();null!=
I&&null!=h&&(h=this._helpers.position.swizzle(h,I));ka.require(R.shader(this._shaders.shader(),2));ka.pipe("grid.position",X);K=this._helpers.position.pipeline(ka);I=this._helpers.style.uniforms();X=this._helpers.line.uniforms();ka=this._inherit("unit").getUnitUniforms();I=c.merge(X,I,ka);K=this._renderables.make("line",{uniforms:I,samples:Q,strips:W,position:K,stroke:B,join:E,mask:h,material:k});return{first:C,second:H,resolution:O,samples:Q,line:K,buffer:R,values:ca}};const {lineX:g,lineY:r,crossed:u,
axes:w}=this.props;var x=["0000","x000","y000","z000","w000"][w[1]];const {stroke:B,join:E}=this.props;this.axes=[];g&&this.axes.push(f("x.","y.",null));r&&this.axes.push(f("y.","x.",u?null:x));x=(()=>{const C=[];for(f of this.axes)C.push(f.line);return C})();this._helpers.visible.make();this._helpers.object.make(x);this._helpers.span.make();return this._listen(this,"span.range",this.updateRanges)}unmake(){this._helpers.visible.unmake();this._helpers.object.unmake();this._helpers.span.unmake();for(const f of this.axes)f.buffer.dispose();
this.axes=null}change(f,h,k){if(f["x.axis.detail"]||f["y.axis.detail"]||f["x.axis.factor"]||f["y.axis.factor"]||f["grid.lineX"]||f["grid.lineY"]||f["line.stroke"]||f["line.join"]||f["grid.crossed"]||f["grid.axes"]&&this.props.crossed)return this.rebuild();if(h.x||h.y||h.area||h.grid||h.view||h.origin||k)return this.updateRanges()}updateRanges(){const f=(x,B,E,C,H)=>{const {second:I,resolution:K,samples:O,line:Q,buffer:W,values:R}=H;H=E.x;E=E.y;n.setDimension(R.gridPosition,x).multiplyScalar(H);n.setDimension(R.gridStep,
x).multiplyScalar((E-H)*K);n.addOrigin(R.gridPosition,h,k);H=C.x;E=C.y;x=this._helpers.scale.generate(I,W,H,E);n.setDimension(R.gridAxis,B);return Q.geometry.clip(O,x.length,1,1)},{axes:h,origin:k}=this.props,g=this._helpers.span.get("x.",h[0]),r=this._helpers.span.get("y.",h[1]),{lineX:u,lineY:w}=this.props;u&&f(h[0],h[1],g,r,this.axes[0]);w&&f(h[1],h[0],r,g,this.axes[+u]);window.cake1=this.axes[0].buffer;window.cake2=this.axes[1].buffer;window.cake3=this.axes[0]}}m.Grid=e;e.initClass()};
shadow$provide[239]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.Line=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(235));z=v(89);class n extends z.Primitive{static initClass(){this.traits="node object visible style line arrow geometry position bind shade".split(" ")}constructor(c,e,f){super(c,e,f);this.line=this.arrows=null}resize(){if(null!=this.bind.points){var c=this.bind.points.getActiveDimensions(),e=c.width,f=c.height,h=c.depth,k=c.items;this.line.geometry.clip(e,
f,h,k);return Array.from(this.arrows).map(g=>g.geometry.clip(e,f,h,k))}}make(){let c;this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"}]);if(null!=this.bind.points){var e=this._shaders.shader();e=this.bind.points.sourceShader(e);e=this._helpers.position.pipeline(e);var f=this._helpers.style.uniforms(),h=this._helpers.line.uniforms(),k=this._helpers.arrow.uniforms(),g=this._inherit("unit").getUnitUniforms(),{start:r,end:u}=this.props,{stroke:w,join:x,
proximity:B,closed:E}=this.props;this.proximity=B;var C=this.bind.points.getDimensions(),H=C.width,I=C.height,K=C.depth;C=C.items;this.bind.colors&&(c=this._shaders.shader(),this.bind.colors.sourceShader(c));var O=this._helpers.object.mask(),Q=this._helpers.shade.pipeline()||!1;f=p.merge(k,h,f,g);this.line=this._renderables.make("line",{uniforms:f,samples:H,strips:I,ribbons:K,layers:C,position:e,color:c,clip:r||u,stroke:w,join:x,proximity:B,closed:E,mask:O,material:Q});this.arrows=[];r&&this.arrows.push(this._renderables.make("arrow",
{uniforms:f,flip:!0,samples:H,strips:I,ribbons:K,layers:C,position:e,color:c,closed:E,mask:O,material:Q}));u&&this.arrows.push(this._renderables.make("arrow",{uniforms:f,samples:H,strips:I,ribbons:K,layers:C,position:e,color:c,closed:E,mask:O,material:Q}));this._helpers.visible.make();return this._helpers.object.make(this.arrows.concat([this.line]))}}made(){return this.resize()}unmake(){this._helpers.bind.unmake();this._helpers.visible.unmake();this._helpers.object.unmake();return this.line=this.arrows=
null}change(c,e,f){if(c["geometry.points"]||c["line.stroke"]||c["line.join"]||c["arrow.start"]||c["arrow.end"]||c["line.proximity"]&&null!=this.proximity!==(null!=this.props.proximity))return this.rebuild()}}m.Line=n;n.initClass()};
shadow$provide[240]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.Point=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(235));z=v(89);class n extends z.Primitive{static initClass(){this.traits="node object visible style point geometry position bind shade".split(" ")}constructor(c,e,f){super(c,e,f);this.point=null}resize(){if(null!=this.bind.points){var c=this.bind.points.getActiveDimensions(),{items:e,width:f,height:h,depth:k}=c;return this.point.geometry.clip(f,h,k,e)}}make(){let c,
e;this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"},{to:"point.sizes",trait:"source"}]);if(null!=this.bind.points){var f=this._shaders.shader();f=this.bind.points.sourceShader(f);f=this._helpers.position.pipeline(f);var h=this.bind.points.getDimensions(),{items:k,width:g,height:r,depth:u}=h,w=this._helpers.style.uniforms(),x=this._helpers.point.uniforms(),B=this._inherit("unit").getUnitUniforms();this.bind.colors&&(c=this._shaders.shader(),this.bind.colors.sourceShader(c));
this.bind.sizes&&(e=this._shaders.shader(),this.bind.sizes.sourceShader(e));h=this._helpers.object.mask();var E=this._helpers.shade.pipeline()||!1,{shape:C}=this.props,{fill:H}=this.props,{optical:I}=this.props;w=p.merge(B,x,w);this.point=this._renderables.make("point",{uniforms:w,width:g,height:r,depth:u,items:k,position:f,color:c,size:e,shape:C,optical:I,fill:H,mask:h,material:E});this._helpers.visible.make();this._helpers.object.make([this.point])}}made(){return this.resize()}unmake(){this._helpers.bind.unmake();
this._helpers.visible.unmake();this._helpers.object.unmake();this.point=null}change(c,e,f){if(c["geometry.points"]||c["point.shape"]||c["point.fill"])return this.rebuild()}}m.Point=n;n.initClass()};
shadow$provide[241]=function(z,v,J,m){function t(f){if("function"!==typeof WeakMap)return null;var h=new WeakMap,k=new WeakMap;return(t=function(g){return g?k:h})(f)}function p(f,h){if(!h&&f&&f.__esModule)return f;if(null===f||"object"!==typeof f&&"function"!==typeof f)return{default:f};if((h=t(h))&&h.has(f))return h.get(f);var k={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,r;for(r in f)if("default"!==r&&Object.prototype.hasOwnProperty.call(f,r)){var u=g?Object.getOwnPropertyDescriptor(f,
r):null;u&&(u.get||u.set)?Object.defineProperty(k,r,u):k[r]=f[r]}k.default=f;h&&h.set(f,k);return k}Object.defineProperty(m,"__esModule",{value:!0});m.Strip=void 0;var n=p(v(100)),c=p(v(235));z=v(89);class e extends z.Primitive{static initClass(){this.traits="node object visible style line mesh strip geometry position bind shade".split(" ")}constructor(f,h,k){super(f,h,k);this.strip=null}resize(){if(null!=this.bind.points){var f=this.bind.points.getActiveDimensions(),{items:h,width:k,height:g,depth:r}=
f;this.strip&&this.strip.geometry.clip(k,g,r,h);this.line&&this.line.geometry.clip(h,k,g,r);if(null!=this.bind.map&&(f=this.bind.map.getActiveDimensions(),this.strip))return this.strip.geometry.map(f.width,f.height,f.depth,f.items)}}make(){let f;this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"},{to:"mesh.map",trait:"source"}]);if(null!=this.bind.points){var h=this._shaders.shader();h=this.bind.points.sourceShader(h);h=this._helpers.position.pipeline(h);
var k=this._helpers.style.uniforms();var g=this._helpers.line.uniforms();var r=this._inherit("unit").getUnitUniforms(),{line:u,shaded:w,fill:x,stroke:B,join:E}=this.props,C={};C.styleZBias=this._attributes.make(this._types.number());this.wireZBias=C.styleZBias;var H=this.bind.points.getDimensions(),{items:I,width:K,height:O,depth:Q}=H;this.bind.colors&&(f=this._shaders.shader(),f=this.bind.colors.sourceShader(f));H=this._helpers.object.mask();this._helpers.shade.map(null!=this.bind.map?this.bind.map.sourceShader(this._shaders.shader()):
void 0);var W=this._helpers.shade.pipeline(),R=W||w;W=W||!1;var X=[];if(u){const ca=this._shaders.shader();ca.pipe(n.swizzleVec4("yzwx"));ca.pipe(h);g=c.merge(r,g,k,C);this.line=this._renderables.make("line",{uniforms:g,samples:I,strips:K,ribbons:O,layers:Q,position:ca,color:f,stroke:B,join:E,mask:H,material:W});X.push(this.line)}x&&(g=c.merge(k,{}),this.strip=this._renderables.make("strip",{uniforms:g,width:K,height:O,depth:Q,items:I,position:h,color:f,material:R}),X.push(this.strip));this._helpers.visible.make();
return this._helpers.object.make(X)}}made(){return this.resize()}unmake(){this._helpers.bind.unmake();this._helpers.visible.unmake();this._helpers.object.unmake();return this.strip=null}change(f,h,k){if(f["geometry.points"]||h.mesh)return this.rebuild();if(f["style.zBias"]||f["mesh.lineBias"]||k){const {fill:g,zBias:r,lineBias:u}=this.props;return this.wireZBias.value=r+(g?u:0)}}}m.Strip=e;e.initClass()};
shadow$provide[242]=function(z,v,J,m){function t(e){if("function"!==typeof WeakMap)return null;var f=new WeakMap,h=new WeakMap;return(t=function(k){return k?h:f})(e)}Object.defineProperty(m,"__esModule",{value:!0});m.Surface=void 0;var p=function(e,f){if(!f&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};if((f=t(f))&&f.has(e))return f.get(e);var h={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor,g;for(g in e)if("default"!==g&&Object.prototype.hasOwnProperty.call(e,
g)){var r=k?Object.getOwnPropertyDescriptor(e,g):null;r&&(r.get||r.set)?Object.defineProperty(h,g,r):h[g]=e[g]}h.default=e;f&&f.set(e,h);return h}(v(235)),n=v(2);z=v(89);class c extends z.Primitive{static initClass(){this.traits="node object visible style line mesh geometry surface position grid bind shade".split(" ");this.defaults={lineX:!1,lineY:!1}}constructor(e,f,h){super(e,f,h);this.lineX=this.lineY=this.surface=null}resize(){if(null!=this.bind.points){var e=this.bind.points.getActiveDimensions(),
{width:f,height:h,depth:k,items:g}=e;this.surface&&this.surface.geometry.clip(f,h,k,g);this.lineX&&this.lineX.geometry.clip(f,h,k,g);this.lineY&&this.lineY.geometry.clip(h,f,k,g);if(null!=this.bind.map&&(e=this.bind.map.getActiveDimensions(),this.surface))return this.surface.geometry.map(e.width,e.height,e.depth,e.items)}}make(){let e,f;this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"},{to:"mesh.normals",trait:"source"},{to:"mesh.map",trait:"source"}]);
if(null!=this.bind.points){var h=this._shaders.shader();h=this.bind.points.sourceShader(h);h=this._helpers.position.pipeline(h);var k=this._helpers.style.uniforms(),g=this._helpers.style.uniforms(),r=this._helpers.line.uniforms(),u=this._helpers.surface.uniforms(),w=this._inherit("unit").getUnitUniforms();g.styleColor=this._attributes.make(this._types.color());g.styleZBias=this._attributes.make(this._types.number());this.wireColor=g.styleColor.value;this.wireZBias=g.styleZBias;this.wireScratch=new n.Color;
var x=this.bind.points.getDimensions(),{width:B,height:E,depth:C,items:H}=x,{shaded:I,fill:K,lineX:O,lineY:Q,closedX:W,closedY:R,stroke:X,join:ca,proximity:ka,crossed:la}=this.props;x=[];this.proximity=ka;null!=this.bind.normals&&(f=this._shaders.shader(),this.bind.normals.sourceShader(f),this._helpers.shade.normal(f));null!=this.bind.colors&&(e=this._shaders.shader(),this.bind.colors.sourceShader(e));var Aa=this._helpers.object.mask(),ta=this._helpers.shade.map(null!=this.bind.map?this.bind.map.sourceShader(this._shaders.shader()):
void 0),Ha=this._helpers.shade.pipeline(),Oa=Ha||I;Ha=Ha||!1;var {swizzle:da,swizzle2:Wa}=this._helpers.position;g=p.merge(w,r,k,g);r=O||Q?-50:0;O&&(this.lineX=this._renderables.make("line",{uniforms:g,samples:B,strips:E,ribbons:C,layers:H,position:h,color:e,normal:f,zUnits:-r,stroke:X,join:ca,mask:Aa,material:Ha,proximity:ka,closed:W||closed}),x.push(this.lineX));Q&&(this.lineY=this._renderables.make("line",{uniforms:g,samples:E,strips:B,ribbons:C,layers:H,position:Wa(h,"yxzw","yxzw"),color:da(e,
"yxzw"),zUnits:-r,stroke:X,join:ca,mask:da(Aa,la?"xyzw":"yxzw"),material:Ha,proximity:ka,closed:R||closed}),x.push(this.lineY));K&&(g=p.merge(w,u,k),this.surface=this._renderables.make("surface",{uniforms:g,width:B,height:E,surfaces:C,layers:H,position:h,color:e,zUnits:r,stroke:X,material:Oa,mask:Aa,map:ta,intUV:!0,closedX:W||closed,closedY:R||closed}),x.push(this.surface));this._helpers.visible.make();return this._helpers.object.make(x)}}made(){return this.resize()}unmake(){this._helpers.bind.unmake();
this._helpers.visible.unmake();this._helpers.object.unmake();return this.lineX=this.lineY=this.surface=null}_convertGammaToLinear(e,f=2){e.r=Math.pow(e.r,f);e.g=Math.pow(e.g,f);e.b=Math.pow(e.b,f);return e}_convertLinearToGamma(e,f=2){f=0<f?1/f:1;e.r=Math.pow(e.r,f);e.g=Math.pow(e.g,f);e.b=Math.pow(e.b,f);return e}change(e,f,h){if(e["geometry.points"]||e["mesh.shaded"]||e["mesh.fill"]||e["line.stroke"]||e["line.join"]||f.grid)return this.rebuild();if(e["style.color"]||e["style.zBias"]||e["mesh.fill"]||
e["mesh.lineBias"]||h){const {fill:k,color:g,zBias:r,lineBias:u}=this.props;this.wireZBias.value=r+(k?u:0);this.wireColor.copy(g);k&&(f=this.wireScratch,f.setRGB(g.r,g.g,g.b),this._convertLinearToGamma(this._convertGammaToLinear(f).multiplyScalar(.75)),this.wireColor.r=f.r,this.wireColor.g=f.g,this.wireColor.b=f.b)}if(e["line.proximity"]&&null!=this.proximity!==(null!=this.props.proximity))return this.rebuild()}}m.Surface=c;c.initClass()};
shadow$provide[243]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.Ticks=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(235));z=v(89);class n extends z.Primitive{static initClass(){this.traits="node object visible style line ticks geometry position bind shade".split(" ")}init(){return this.tickStrip=this.line=null}resize(){if(null!=this.bind.points){var c=this.bind.points.getActiveDimensions(),e=+(0<c.items),f=c.width*e;this.line.geometry.clip(2,f,c.height*e,c.depth*e);
return this.tickStrip.set(0,f-1)}}make(){let c;this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"}]);if(null!=this.bind.points){var e=this._helpers.style.uniforms();var f=this._helpers.line.uniforms(),h=this._inherit("unit").getUnitUniforms();f=p.merge(f,e,h);h={tickEpsilon:this.node.attributes["ticks.epsilon"],tickSize:this.node.attributes["ticks.size"],tickNormal:this.node.attributes["ticks.normal"],tickStrip:this._attributes.make(this._types.vec2(0,
0)),worldUnit:f.worldUnit,focusDepth:f.focusDepth};this.tickStrip=h.tickStrip.value;var k=e=this._shaders.shader();k.require(this.bind.points.sourceShader(this._shaders.shader()));k.require(this._helpers.position.pipeline(this._shaders.shader()));k.pipe("ticks.position",h);var {stroke:g,join:r}=this.props,u=this.bind.points.getDimensions();h=u.width;k=u.height;u=u.depth;this.bind.colors&&(c=this._shaders.shader(),this.bind.colors.sourceShader(c));var w=this._helpers.object.mask(),x=this._helpers.shade.pipeline()||
!1,{swizzle:B}=this._helpers.position;this.line=this._renderables.make("line",{uniforms:f,samples:2,strips:h,ribbons:k,layers:u,position:e,color:c,stroke:g,join:r,mask:B(w,"yzwx"),material:x});this._helpers.visible.make();return this._helpers.object.make([this.line])}}made(){return this.resize()}unmake(){this.line=null;this._helpers.visible.unmake();return this._helpers.object.unmake()}change(c,e,f){if(c["geometry.points"]||c["line.stroke"]||c["line.join"])return this.rebuild()}}m.Ticks=n;n.initClass()};
shadow$provide[244]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.Vector=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(235));z=v(89);class n extends z.Primitive{static initClass(){this.traits="node object visible style line arrow geometry position bind shade".split(" ")}constructor(c,e,f){super(c,e,f);this.line=this.arrows=null}resize(){if(null!=this.bind.points){var c=this.bind.points.getActiveDimensions(),e=c.items,f=c.width,h=c.height,k=c.depth;this.line.geometry.clip(e,
f,h,k);return Array.from(this.arrows).map(g=>g.geometry.clip(e,f,h,k))}}make(){let c;this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"}]);if(null!=this.bind.points){var e=this._shaders.shader();this.bind.points.sourceShader(e);this._helpers.position.pipeline(e);var f=this._helpers.style.uniforms(),h=this._helpers.line.uniforms(),k=this._helpers.arrow.uniforms(),g=this._inherit("unit").getUnitUniforms(),{start:r,end:u}=this.props,{stroke:w,join:x,proximity:B,
closed:E}=this.props;this.proximity=B;var C=this.bind.points.getDimensions(),H=C.items,I=C.width,K=C.height;C=C.depth;this.bind.colors&&(c=this._shaders.shader(),this.bind.colors.sourceShader(c));var O=this._helpers.object.mask(),Q=this._helpers.shade.pipeline()||!1,{swizzle:W,swizzle2:R}=this._helpers.position;e=R(e,"yzwx","yzwx");c=W(c,"yzwx");O=W(O,"yzwx");Q=W(Q,"yzwx");f=p.merge(k,h,f,g);this.line=this._renderables.make("line",{uniforms:f,samples:H,ribbons:K,strips:I,layers:C,position:e,color:c,
clip:r||u,stroke:w,join:x,proximity:B,closed:E,mask:O,material:Q});this.arrows=[];r&&this.arrows.push(this._renderables.make("arrow",{uniforms:f,flip:!0,samples:H,ribbons:K,strips:I,layers:C,position:e,color:c,closed:E,mask:O,material:Q}));u&&this.arrows.push(this._renderables.make("arrow",{uniforms:f,samples:H,ribbons:K,strips:I,layers:C,position:e,color:c,closed:E,mask:O,material:Q}));this._helpers.visible.make();return this._helpers.object.make(this.arrows.concat([this.line]))}}made(){return this.resize()}unmake(){this._helpers.bind.unmake();
this._helpers.visible.unmake();this._helpers.object.unmake();return this.line=this.arrows=null}change(c,e,f){if(c["geometry.points"]||c["line.stroke"]||c["line.join"]||c["arrow.start"]||c["arrow.end"]||c["line.proximity"]&&null!=this.proximity!==(null!=this.props.proximity))return this.rebuild()}}m.Vector=n;n.initClass()};
shadow$provide[245]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});var t=v(236);Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in m&&m[r]===t[r]||Object.defineProperty(m,r,{enumerable:!0,get:function(){return t[r]}}))});var p=v(237);Object.keys(p).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in m&&m[r]===p[r]||Object.defineProperty(m,r,{enumerable:!0,get:function(){return p[r]}}))});var n=v(238);Object.keys(n).forEach(function(r){"default"!==
r&&"__esModule"!==r&&(r in m&&m[r]===n[r]||Object.defineProperty(m,r,{enumerable:!0,get:function(){return n[r]}}))});var c=v(239);Object.keys(c).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in m&&m[r]===c[r]||Object.defineProperty(m,r,{enumerable:!0,get:function(){return c[r]}}))});var e=v(240);Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in m&&m[r]===e[r]||Object.defineProperty(m,r,{enumerable:!0,get:function(){return e[r]}}))});var f=v(241);Object.keys(f).forEach(function(r){"default"!==
r&&"__esModule"!==r&&(r in m&&m[r]===f[r]||Object.defineProperty(m,r,{enumerable:!0,get:function(){return f[r]}}))});var h=v(242);Object.keys(h).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in m&&m[r]===h[r]||Object.defineProperty(m,r,{enumerable:!0,get:function(){return h[r]}}))});var k=v(243);Object.keys(k).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in m&&m[r]===k[r]||Object.defineProperty(m,r,{enumerable:!0,get:function(){return k[r]}}))});var g=v(244);Object.keys(g).forEach(function(r){"default"!==
r&&"__esModule"!==r&&(r in m&&m[r]===g[r]||Object.defineProperty(m,r,{enumerable:!0,get:function(){return g[r]}}))})};
shadow$provide[246]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.HTML=void 0;z=v(230);class t extends z.Voxel{static initClass(){this.traits="node buffer active data voxel html".split(" ");this.finals={channels:1}}init(){super.init();this.storage="pushBuffer"}make(){super.make();const {items:p,width:n,height:c,depth:e}=this.getDimensions();this.dom=this._overlays.make("dom");return this.dom.hint(p*n*c*e)}unmake(){super.unmake();if(null!=this.dom)return this.dom.dispose(),this.dom=
null}update(){return super.update()}change(p,n,c){return n.html?this.rebuild():super.change(p,n,c)}nodes(){return this.buffer.read()}callback(p){const {el:n}=this.dom;return 6>=p.length?(c,e,f,h,k)=>p(c,n,e,f,h,k):(c,e,f,h,k)=>p(c,n,e,f,h,k,this.bufferClock,this.bufferStep)}}m.HTML=t;t.initClass()};
shadow$provide[247]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.DOM=void 0;z=v(89);class t extends z.Primitive{static initClass(){this.traits="node bind object visible overlay dom attach position".split(" ")}init(){this.emitter=this.root=null;this.active={}}make(){super.make();this._helpers.bind.make([{to:"dom.html",trait:"html"},{to:"dom.points",trait:"source"}]);if(null!=this.bind.points&&null!=this.bind.html){this.root=this._inherit("root");this._listen("root","root.update",
this.update);this._listen("root","root.post",this.post);var p=this.bind.points.getDimensions(),n=this.bind.html.getDimensions(),c=Math.min(p.items,n.items),e=Math.min(p.width,n.width),f=Math.min(p.height,n.height);p=Math.min(p.depth,n.depth);n=this.bind.points.sourceShader(this._shaders.shader());n=this._helpers.position.pipeline(n);var h=this._shaders.shader({globals:["projectionMatrix"]});h.pipe("project.readback");n.pipe(h);h=this._shaders.shader();this.readback=this._renderables.make("readback",
{map:n,indexer:h,items:c,width:e,height:f,depth:p,channels:4,stpq:!0});this.dom=this._overlays.make("dom");this.dom.hint(c*e*f*p*2);this.emitter=this.callback(this.bind.html.nodes());this.readback.setCallback(this.emitter);this._helpers.visible.make()}}unmake(){null!=this.readback&&(this.readback.dispose(),this.dom.dispose(),this.emitter=this.root=this.readback=this.dom=null,this.active={});this._helpers.bind.unmake();this._helpers.visible.unmake()}update(){null!=this.readback&&this.props.visible&&
(this.readback.update(null!=this.root?this.root.getCamera():void 0),this.readback.post(),this.readback.iterate())}post(){null!=this.readback&&this.dom.render(this.isVisible?this.emitter.nodes():null)}callback(p){let n,c;var e=this._inherit("unit").getUnitUniforms();const f=e.viewWidth,h=e.viewHeight,k=this.node.attributes["dom.attributes"],g=this.node.attributes["dom.size"],r=this.node.attributes["dom.zoom"],u=this.node.attributes["dom.color"],w=this.node.attributes["dom.outline"],x=this.node.attributes["dom.pointerEvents"],
B=this.node.attributes["overlay.opacity"],E=this.node.attributes["overlay.zIndex"],C=this.node.attributes["attach.offset"],H=this.node.attributes["attach.depth"],I=this.node.attributes["attach.snap"],{el:K}=this.dom;let O=[],Q=null,W=null,R=n=c=0,X="";e=function(ca,ka,la,Aa,ta,Ha,Oa,da){la=p[da+R*ta+n*Ha+c*Oa];ta=0>Aa;Ha=1+(1/Aa-1)*H.value;Ha=ta?0:Ha;ca=(ca+1)*f.value*.5+ +C.value.x*Ha;ka=(ka-1)*h.value*.5+ +C.value.y*Ha;ca/=r.value;ka/=r.value;I.value&&(ca=Math.round(ca),ka=Math.round(ka));ka={className:W,
style:{transform:`translate3d(${ca}px, ${-ka}px, ${1-Aa}px) translate(-50%, -50%) scale(${Ha},${Ha})`,opacity:Math.min(.999,ta?0:B.value)}};for(Oa in Q)Aa=Q[Oa],ka.style[Oa]=Aa;ca=k.value;if(null!=ca){ta=ca.style;for(Oa in ca)Aa=ca[Oa],["style","className"].includes(Oa)||(ka[Oa]=Aa);if(null!=ta)for(Oa in ta)Aa=ta[Oa],ka.style[Oa]=Aa}ka.className+=" "+(null!=(null!=ca?ca.className:void 0)?null!=ca?ca.className:void 0:"mathbox-label");return O.push(K("div",ka,la))};e.reset=()=>{O=[];[R,n,c]=Array.from([this.strideI,
this.strideJ,this.strideK]);const ca=u.value;X=ca?`rgb(${[Math.floor(255*ca.x),Math.floor(255*ca.y),Math.floor(255*ca.z)]})`:"";W=`mathbox-outline-${Math.round(w.value)}`;Q={};ca&&(Q.color=X);Q.fontSize=`${g.value}px`;1!==r.value&&(Q.zoom=r.value);0<E.value&&(Q.zIndex=E.value);if(x.value)return Q.pointerEvents="auto"};e.nodes=()=>O;return e}resize(){if(null!=this.readback){var p=this.bind.points.getActiveDimensions();var n=this.bind.html.getActiveDimensions();this.readback.setActive(Math.min(p.items,
n.items),Math.min(p.width,n.width),Math.min(p.height,n.height),Math.min(p.depth,n.depth));this.strideI=p=n.items;this.strideJ=p*=n.width;this.strideK=p*n.height}}change(p,n,c){if(p["dom.html"]||p["dom.points"])return this.rebuild()}}m.DOM=t;t.initClass()};
shadow$provide[248]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});var t=v(246);Object.keys(t).forEach(function(n){"default"!==n&&"__esModule"!==n&&(n in m&&m[n]===t[n]||Object.defineProperty(m,n,{enumerable:!0,get:function(){return t[n]}}))});var p=v(247);Object.keys(p).forEach(function(n){"default"!==n&&"__esModule"!==n&&(n in m&&m[n]===p[n]||Object.defineProperty(m,n,{enumerable:!0,get:function(){return p[n]}}))})};
shadow$provide[249]=function(z,v,J,m){function t(f){if("function"!==typeof WeakMap)return null;var h=new WeakMap,k=new WeakMap;return(t=function(g){return g?k:h})(f)}Object.defineProperty(m,"__esModule",{value:!0});m.Text=void 0;var p=function(f,h){if(!h&&f&&f.__esModule)return f;if(null===f||"object"!==typeof f&&"function"!==typeof f)return{default:f};if((h=t(h))&&h.has(f))return h.get(f);var k={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,r;for(r in f)if("default"!==r&&Object.prototype.hasOwnProperty.call(f,
r)){var u=g?Object.getOwnPropertyDescriptor(f,r):null;u&&(u.get||u.set)?Object.defineProperty(k,r,u):k[r]=f[r]}k.default=f;h&&h.set(f,k);return k}(v(99)),n=v(2),c=v(103);z=v(230);class e extends z.Voxel{static initClass(){this.traits="node buffer active data texture voxel text font".split(" ");this.defaults={minFilter:"linear",magFilter:"linear"};this.finals={channels:1}}init(){super.init();return this.atlas=null}textShader(f){return this.atlas.shader(f)}textIsSDF(){return 0<this.props.sdf}textHeight(){return this.props.detail}make(){let {minFilter:f,
magFilter:h,type:k}=this.props;const {font:g,style:r,variant:u,weight:w,detail:x,sdf:B}=this.props;this.atlas=this._renderables.make("textAtlas",{font:g,size:x,style:r,variant:u,weight:w,outline:B,minFilter:f,magFilter:h,type:k});this.magFilter=this.minFilter=n.NearestFilter;this.type=n.FloatType;c.Buffer.prototype.make.call(this);f=null!=this.minFilter?this.minFilter:this.props.minFilter;h=null!=this.magFilter?this.magFilter:this.props.magFilter;k=null!=this.type?this.type:this.props.type;var {width:E}=
this.props,{height:C}=this.props;const {depth:H}=this.props,I=this.props.bufferWidth,K=this.props.bufferHeight,O=this.props.bufferDepth,{channels:Q}=this.props,{items:W}=this.props;E=this.spec={channels:Q,items:W,width:E,height:C,depth:H};this.items=E.items;this.channels=E.channels;({data:C}=this.props);E=p.getDimensions(C,E);({space:C}=this);C.width=Math.max(I,E.width||1);C.height=Math.max(K,E.height||1);C.depth=Math.max(O,E.depth||1);this.buffer=this._renderables.make(this.storage,{width:C.width,
height:C.height,depth:C.depth,channels:4,items:W,minFilter:f,magFilter:h,type:k});const {atlas:R}=this,{emit:X}=this.buffer.streamer;return this.buffer.streamer.emit=ca=>R.map(ca,X)}unmake(){super.unmake();if(this.atlas)return this.atlas.dispose(),this.atlas=null}update(){this.atlas.begin();super.update();return this.atlas.end()}change(f,h,k){return h.font?this.rebuild():super.change(f,h,k)}}m.Text=e;e.initClass()};
shadow$provide[250]=function(z,v,J,m){function t(n,c,e){if("undefined"!==typeof n&&null!==n&&"function"===typeof n[c])return e(n,c)}Object.defineProperty(m,"__esModule",{value:!0});m.Operator=void 0;z=v(101);class p extends z.Source{static initClass(){this.traits=["node","bind","operator","source","index"]}indexShader(n){return t(this.bind.source,"indexShader",c=>c.indexShader(n))}sourceShader(n){return t(this.bind.source,"sourceShader",c=>c.sourceShader(n))}getDimensions(){return this.bind.source.getDimensions()}getFutureDimensions(){return this.bind.source.getFutureDimensions()}getActiveDimensions(){return this.bind.source.getActiveDimensions()}getIndexDimensions(){return this.bind.source.getIndexDimensions()}init(){return this.sourceSpec=
[{to:"operator.source",trait:"source",optional:!0}]}make(){super.make();return this._helpers.bind.make(this.sourceSpec)}made(){this.resize();return super.made()}unmake(){return this._helpers.bind.unmake()}resize(n){return this.trigger({type:"source.resize"})}}m.Operator=p;p.initClass()};
shadow$provide[251]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Format=void 0;var t=v(2);z=v(250);class p extends z.Operator{static initClass(){this.traits="node bind operator texture text format font".split(" ");this.defaults={minFilter:"linear",magFilter:"linear"}}init(){super.init();this.atlas=this.buffer=this.used=this.time=null;return this.filled=!1}sourceShader(n){return this.buffer.shader(n)}textShader(n){return this.atlas.shader(n)}textIsSDF(){return 0<this.props.sdf}textHeight(){return this.props.detail}make(){this._helpers.bind.make([{to:"operator.source",
trait:"raw"}]);let {minFilter:n,magFilter:c,type:e}=this.props;const {font:f,style:h,variant:k,weight:g,detail:r,sdf:u}=this.props;this.atlas=this._renderables.make("textAtlas",{font:f,size:r,style:h,variant:k,weight:g,outline:u,minFilter:n,magFilter:c,type:e});c=n=t.NearestFilter;e=t.FloatType;const w=this.bind.source.getDimensions(),{items:x,width:B,height:E,depth:C}=w;this.buffer=this._renderables.make("voxelBuffer",{width:B,height:E,depth:C,channels:4,items:x,minFilter:n,magFilter:c,type:e});
const {atlas:H}=this,{emit:I}=this.buffer.streamer;this.buffer.streamer.emit=K=>H.map(K,I);this.clockParent=this._inherit("clock");return this._listen("root","root.update",this.update)}made(){super.made();return this.resize()}unmake(){super.unmake();this.buffer&&(this.buffer.dispose(),this.buffer=null);if(this.atlas)return this.atlas.dispose(),this.atlas=null}update(){if((!this.filled||this.props.live)&&this.through){this.time=this.clockParent.getTime();var {used:n}=this;this.atlas.begin();this.used=
this.through();this.buffer.write(this.used);this.atlas.end();this.filled=!0;if(n!==this.used)return this.trigger({type:"source.resize"})}}change(n,c,e){if(c.font)return this.rebuild();if(n["format.expr"]||n["format.digits"]||n["format.data"]||e){let {expr:f}=this.props;const {digits:h,data:k}=this.props;null==f&&(f=null!=k?(g,r,u,w,x)=>k[x]:g=>g);({length:n}=f);null!=h&&(f=(g=>(r,u,w,x,B,E,C,H,I,K)=>+g(r,u,w,x,B,E,C,H,I,K).toPrecision(h))(f));n=8<n?(g,r,u,w,x,B,E,C,H,I,K)=>g(f(r,u,w,x,B,E,C,H,this.time.clock,
this.time.step)):(g,r,u,w,x,B,E,C,H)=>g(f(r,u,w,x,B,E,C,H));return this.through=this.bind.source.rawBuffer().through(n,this.buffer)}}}m.Format=p;p.initClass()};
shadow$provide[252]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.Label=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(235));z=v(89);class n extends z.Primitive{static initClass(){this.traits="node bind object visible style label attach geometry position".split(" ")}make(){let c;super.make();this._helpers.bind.make([{to:"label.text",trait:"text"},{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"}]);if(null!=this.bind.points&&null!=this.bind.text){var e=
this.bind.points.getDimensions(),f=this.bind.text.getDimensions(),h=this.bind.text.textIsSDF(),k=Math.min(e.items,f.items),g=Math.min(e.width,f.width),r=Math.min(e.height,f.height);e=Math.min(e.depth,f.depth);f=this.bind.points.sourceShader(this._shaders.shader());f=this._helpers.position.pipeline(f);var u=this.bind.text.sourceShader(this._shaders.shader()),w=this._shaders.shader().pipe("label.map");w.pipe(this.bind.text.textShader(this._shaders.shader()));var x={spriteDepth:this.node.attributes["attach.depth"],
spriteOffset:this.node.attributes["attach.offset"],spriteSnap:this.node.attributes["attach.snap"],spriteScale:this._attributes.make(this._types.number()),outlineStep:this._attributes.make(this._types.number()),outlineExpand:this._attributes.make(this._types.number()),outlineColor:this.node.attributes["label.background"]};this.spriteScale=x.spriteScale;this.outlineStep=x.outlineStep;this.outlineExpand=x.outlineExpand;h=h?"label.outline":"label.alpha";h=this._shaders.shader().pipe(h,x);this.bind.colors&&
(c=this._shaders.shader(),this.bind.colors.sourceShader(c));var B=this._helpers.object.mask(),E=this._helpers.style.uniforms(),C=this._inherit("unit").getUnitUniforms();x=p.merge(C,E,x);this.sprite=this._renderables.make("sprite",{uniforms:x,width:g,height:r,depth:e,items:k,position:f,sprite:u,map:w,combine:h,color:c,mask:B,linear:!0});this._helpers.visible.make();return this._helpers.object.make([this.sprite])}}unmake(){this._helpers.bind.unmake();this._helpers.visible.unmake();this._helpers.object.unmake();
return this.sprite=null}resize(){const c=this.bind.points.getActiveDimensions(),e=this.bind.text.getActiveDimensions();return this.sprite.geometry.clip(Math.min(c.width,e.width),Math.min(c.height,e.height),Math.min(c.depth,e.depth),Math.min(c.items,e.items))}change(c,e,f){if(e.geometry||c["label.text"])return this.rebuild();if(null!=this.bind.points){({size:f}=this.props);({outline:c}=this.props);({expand:e}=this.props);var h=this.bind.text.textHeight();f/=h;this.outlineExpand.value=e/f*16/255;this.outlineStep.value=
c/f*16/255;return this.spriteScale.value=f}}}m.Label=n;n.initClass()};
shadow$provide[253]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.Resample=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(100));z=v(250);class n extends z.Operator{static initClass(){this.traits="node bind operator source index resample sampler:x sampler:y sampler:z sampler:w include".split(" ")}indexShader(c){c.pipe(this.indexer);return super.indexShader(c)}sourceShader(c){return c.pipe(this.operator)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(c){const e=
this.resampled,f=this.centered,h=this.padding;this.relativeSize?(f.items||c.items--,f.width||c.width--,f.height||c.height--,f.depth||c.depth--,null!=e.items&&(c.items*=e.items),null!=e.width&&(c.width*=e.width),null!=e.height&&(c.height*=e.height),null!=e.depth&&(c.depth*=e.depth),f.items||c.items++,f.width||c.width++,f.height||c.height++,f.depth||c.depth++,c.items-=2*h.items,c.width-=2*h.width,c.height-=2*h.height,c.depth-=2*h.depth):(null!=e.items&&(c.items=e.items),null!=e.width&&(c.width=e.width),
null!=e.height&&(c.height=e.height),null!=e.depth&&(c.depth=e.depth));c.items=Math.max(0,Math.floor(c.items));c.width=Math.max(0,Math.floor(c.width));c.height=Math.max(0,Math.floor(c.height));c.depth=Math.max(0,Math.floor(c.depth));return c}make(){super.make();if(null!=this.bind.source){this._helpers.bind.make([{to:"include.shader",trait:"shader",optional:!0}]);var {indices:c,channels:e}=this.props,{shader:f}=this.bind,{sample:h,size:k,items:g,width:r,height:u,depth:w}=this.props,x=h===this.node.attributes["resample.sample"].enum.relative,
B=k===this.node.attributes["resample.size"].enum.relative;this.resampled={};null!=g&&(this.resampled.items=g);null!=r&&(this.resampled.width=r);null!=u&&(this.resampled.height=u);null!=w&&(this.resampled.depth=w);this.centered={};this.centered.items=this.props.centeredW;this.centered.width=this.props.centeredX;this.centered.height=this.props.centeredY;this.centered.depth=this.props.centeredZ;this.padding={};this.padding.items=this.props.paddingW;this.padding.width=this.props.paddingX;this.padding.height=
this.props.paddingY;this.padding.depth=this.props.paddingZ;var E=this._shaders.shader(),C=this._shaders.shader(),H=[null,this._types.number,this._types.vec2,this._types.vec3,this._types.vec4][c];H={dataSize:this._attributes.make(H(0,0,0,0)),dataResolution:this._attributes.make(H(0,0,0,0)),targetSize:this._attributes.make(H(0,0,0,0)),targetResolution:this._attributes.make(H(0,0,0,0)),resampleFactor:this._attributes.make(this._types.vec4(0,0,0,0)),resampleBias:this._attributes.make(this._types.vec4(0,
0,0,0))};this.dataResolution=H.dataResolution;this.dataSize=H.dataSize;this.targetResolution=H.targetResolution;this.targetSize=H.targetSize;this.resampleFactor=H.resampleFactor;this.resampleBias=H.resampleBias;var I=null!=g||null!=r||null!=u||null!=w;E.pipe("resample.padding",H);var K=[],O=!1,Q=["width","height","depth","items"];for(let W=0;W<Q.length;W++){const R=this.centered[Q[W]];O||(O=R);K[W]=R?"0.5":"0.0"}O&&(K=`vec4(${K})`,E.pipe(p.binaryOperator(4,"+",K)),I&&C.pipe(p.binaryOperator(4,"+",
K)));x&&(I?(E.pipe("resample.relative",H),C.pipe("resample.relative",H)):C.pipe(p.identity("vec4")));null!=f?(4!==c&&E.pipe(p.truncateVec(4,c)),E.callback(),4!==c&&E.pipe(p.extendVec(c,4)),O&&E.pipe(p.binaryOperator(4,"-",K)),E.pipe(this.bind.source.sourceShader(this._shaders.shader())),4!==e&&E.pipe(p.truncateVec(4,e)),E.join(),null!=this.bind.shader&&E.pipe(this.bind.shader.shaderBind(H)),4!==e&&E.pipe(p.extendVec(e,4))):(O&&E.pipe(p.binaryOperator(4,"-",K)),E.pipe(this.bind.source.sourceShader(this._shaders.shader())));
O&&I&&C.pipe(p.binaryOperator(4,"-",K));this.operator=E;this.indexer=C;this.indices=c;this.relativeSample=x;return this.relativeSize=B}}unmake(){super.unmake();return this.operator=null}resize(){if(null!=this.bind.source){var c=this.bind.source.getActiveDimensions(),e=this.getActiveDimensions(),f=E=>{const C=this.centered[E],H=this.padding[E];e[E]+=2*H;return[C?c[E]/Math.max(1,e[E]):Math.max(1,c[E]-1)/Math.max(1,e[E]-1),H]},[h,k]=Array.from(f("width")),[g,r]=Array.from(f("height")),[u,w]=Array.from(f("depth")),
[x,B]=Array.from(f("items"));1===this.indices?(this.dataResolution.value=1/c.width,this.targetResolution.value=1/e.width,this.dataSize.value=c.width,this.targetSize.value=e.width):(this.dataResolution.value.set(1/c.width,1/c.height,1/c.depth,1/c.items),this.targetResolution.value.set(1/e.width,1/e.height,1/e.depth,1/e.items),this.dataSize.value.set(c.width,c.height,c.depth,c.items),this.targetSize.value.set(e.width,e.height,e.depth,e.items));this.resampleFactor.value.set(h,g,u,x);this.resampleBias.value.set(k,
r,w,B);return super.resize()}}change(c,e,f){if(e.operator||e.resample||e.sampler||e.include)return this.rebuild()}}m.Resample=n;n.initClass()};
shadow$provide[254]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Retext=void 0;z=v(253);class t extends z.Resample{static initClass(){this.traits="node bind operator resample sampler:x sampler:y sampler:z sampler:w include text".split(" ")}init(){return this.sourceSpec=[{to:"operator.source",trait:"text"}]}textShader(p){return this.bind.source.textShader(p)}textIsSDF(){return 0<(null!=this.bind.source?this.bind.source.props.sdf:void 0)}textHeight(){return null!=this.bind.source?
this.bind.source.props.detail:void 0}}m.Retext=t;t.initClass()};
shadow$provide[255]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});var t=v(249);Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in m&&m[e]===t[e]||Object.defineProperty(m,e,{enumerable:!0,get:function(){return t[e]}}))});var p=v(251);Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in m&&m[e]===p[e]||Object.defineProperty(m,e,{enumerable:!0,get:function(){return p[e]}}))});var n=v(252);Object.keys(n).forEach(function(e){"default"!==
e&&"__esModule"!==e&&(e in m&&m[e]===n[e]||Object.defineProperty(m,e,{enumerable:!0,get:function(){return n[e]}}))});var c=v(254);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in m&&m[e]===c[e]||Object.defineProperty(m,e,{enumerable:!0,get:function(){return c[e]}}))})};
shadow$provide[256]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Clock=void 0;z=v(90);class t extends z.Parent{static initClass(){this.traits=["node","clock","seek","play"]}init(){this.last=this.skew=0;return this.time={now:+new Date/1E3,time:0,delta:0,clock:0,step:0}}make(){return this._listen("clock","clock.tick",this.tick)}reset(){return this.skew=0}tick(p){const {from:n,to:c,speed:e,seek:f,pace:h,delay:k,realtime:g}=this.props,r=this._inherit("clock").getTime(),u=g?r.time:
r.clock,w=g?r.delta:r.step,x=e/h;this.skew+=w*(x-1);this.last>u&&(this.skew=0);this.time.now=r.now+this.skew;this.time.time=r.time;this.time.delta=r.delta;this.time.clock=Math.min(c,n+Math.max(0,(null!=f?f:r.clock+this.skew)-k*x));this.time.step=w*x;this.last=u;return this.trigger(p)}getTime(){return this.time}}m.Clock=t;t.initClass()};
shadow$provide[257]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Now=void 0;z=v(90);class t extends z.Parent{static initClass(){this.traits=["node","clock","now"]}init(){let p;this.now=p=+new Date/1E3;this.skew=0;return this.time={now:p,time:0,delta:0,clock:0,step:0}}make(){this.clockParent=this._inherit("clock");return this._listen("clock","clock.tick",this.tick)}unmake(){return this.clockParent=null}change(p,n,c){if(p["date.now"])return this.skew=0}tick(p){const {seek:n,
pace:c,speed:e}=this.props,f=this.clockParent.getTime();this.skew+=f.step*c/e;null!=n&&(this.skew=n);this.time.now=this.time.time=this.time.clock=(null!=this.props.now?this.props.now:this.now)+this.skew;this.time.delta=this.time.step=f.delta;return this.trigger(p)}getTime(){return this.time}}m.Now=t;t.initClass()};
shadow$provide[258]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});var t=v(256);Object.keys(t).forEach(function(n){"default"!==n&&"__esModule"!==n&&(n in m&&m[n]===t[n]||Object.defineProperty(m,n,{enumerable:!0,get:function(){return t[n]}}))});var p=v(257);Object.keys(p).forEach(function(n){"default"!==n&&"__esModule"!==n&&(n in m&&m[n]===p[n]||Object.defineProperty(m,n,{enumerable:!0,get:function(){return p[n]}}))})};
shadow$provide[259]=function(z,v,J,m){function t(n,c){return"undefined"!==typeof n&&null!==n?c(n):void 0}Object.defineProperty(m,"__esModule",{value:!0});m.Transform=void 0;z=v(90);class p extends z.Parent{static initClass(){this.traits=["node","vertex","fragment"]}vertex(n,c){let e;return null!=(e=t(this._inherit("vertex"),f=>f.vertex(n,c)))?e:n}fragment(n,c){let e;return null!=(e=t(this._inherit("fragment"),f=>f.fragment(n,c)))?e:n}}m.Transform=p;p.initClass()};
shadow$provide[260]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.Transform3=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(96));z=v(259);class n extends z.Transform{static initClass(){this.traits=["node","vertex","transform3"]}make(){this.uniforms={transformMatrix:this._attributes.make(this._types.mat4())};return this.composer=p.transformComposer()}unmake(){return delete this.uniforms}change(c,e,f){if(c["transform3.pass"])return this.rebuild();if(e.transform3||f)return this.uniforms.transformMatrix.value=
this.composer(this.props.position,this.props.rotation,this.props.quaternion,this.props.scale,this.props.matrix,this.props.eulerOrder)}vertex(c,e){e===this.props.pass&&c.pipe("transform3.position",this.uniforms);return super.vertex(c,e)}}m.Transform3=n;n.initClass()};
shadow$provide[261]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Transform4=void 0;z=v(259);class t extends z.Transform{static initClass(){this.traits=["node","vertex","transform4"]}make(){this.uniforms={transformMatrix:this._attributes.make(this._types.mat4()),transformOffset:this.node.attributes["transform4.position"]};return this.transformMatrix=this.uniforms.transformMatrix.value}unmake(){return delete this.uniforms}change(p,n,c){if(p["transform4.pass"])return this.rebuild();
if(n.transform4||c)return p=this.props.scale,n=this.transformMatrix,n.copy(this.props.matrix),n.scale(p)}vertex(p,n){n===this.props.pass&&p.pipe("transform4.position",this.uniforms);return super.vertex(p,n)}}m.Transform4=t;t.initClass()};
shadow$provide[262]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Vertex=void 0;z=v(259);class t extends z.Transform{static initClass(){this.traits=["node","include","vertex","bind"]}make(){return this._helpers.bind.make([{to:"include.shader",trait:"shader",optional:!0}])}unmake(){return this._helpers.bind.unmake()}change(p,n,c){if(n.include)return this.rebuild()}vertex(p,n){null!=this.bind.shader&&n===this.props.pass&&p.pipe(this.bind.shader.shaderBind());return super.vertex(p,
n)}}m.Vertex=t;t.initClass()};
shadow$provide[263]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Fragment=void 0;z=v(259);class t extends z.Transform{static initClass(){this.traits=["node","include","fragment","bind"]}make(){return this._helpers.bind.make([{to:"include.shader",trait:"shader",optional:!0}])}unmake(){return this._helpers.bind.unmake()}change(p,n,c){if(n.include||p["fragment.gamma"])return this.rebuild()}fragment(p,n){null!=this.bind.shader&&n===this.props.pass&&(this.props.gamma&&p.pipe("mesh.gamma.out"),
p.pipe(this.bind.shader.shaderBind()),p.split(),this.props.gamma&&p.pipe("mesh.gamma.in"),p.pass());return super.fragment(p,n)}}m.Fragment=t;t.initClass()};
shadow$provide[264]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Layer=void 0;z=v(259);class t extends z.Transform{static initClass(){this.traits=["node","vertex","layer"]}make(){this._listen("root","root.resize",this.update);return this.uniforms={layerScale:this._attributes.make(this._types.vec4()),layerBias:this._attributes.make(this._types.vec4())}}update(){var p=this._inherit("root").getCamera();const n=null!=p.aspect?p.aspect:1;p=Math.tan((null!=p.fov?p.fov:1)*Math.PI/
360);const c=this.node.attributes["layer.fit"].enum;let {fit:e}=this.props;const {depth:f}=this.props;switch(e){case c.contain:e=1<n?c.y:c.x;break;case c.cover:e=1<n?c.x:c.y}switch(e){case c.x:this.uniforms.layerScale.value.set(p*n,p*n,1,1);break;case c.y:this.uniforms.layerScale.value.set(p,p,1,1)}return this.uniforms.layerBias.value.set(0,0,-f,0)}change(p,n,c){if(p["layer.fit"]||p["layer.depth"]||c)return this.update()}vertex(p,n){return 2===n?p.pipe("layer.position",this.uniforms):3===n?p.pipe("root.position"):
p}}m.Layer=t;t.initClass()};
shadow$provide[265]=function(z,v,J,m){function t(e){if("function"!==typeof WeakMap)return null;var f=new WeakMap,h=new WeakMap;return(t=function(k){return k?h:f})(e)}function p(e,f){return"undefined"!==typeof e&&null!==e?f(e):void 0}Object.defineProperty(m,"__esModule",{value:!0});m.Mask=void 0;var n=function(e,f){if(!f&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};if((f=t(f))&&f.has(e))return f.get(e);var h={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor,
g;for(g in e)if("default"!==g&&Object.prototype.hasOwnProperty.call(e,g)){var r=k?Object.getOwnPropertyDescriptor(e,g):null;r&&(r.get||r.set)?Object.defineProperty(h,g,r):h[g]=e[g]}h.default=e;f&&f.set(e,h);return h}(v(100));z=v(90);class c extends z.Parent{static initClass(){this.traits=["node","include","mask","bind"]}make(){return this._helpers.bind.make([{to:"include.shader",trait:"shader",optional:!0}])}unmake(){return this._helpers.bind.unmake()}change(e,f,h){if(f.include)return this.rebuild()}mask(e){let f,
h;null!=this.bind.shader?e?(h=this._shaders.shader(),h.pipe(n.identity("vec4")),h.fan(),h.pipe(e),h.next(),h.pipe(this.bind.shader.shaderBind()),h.end(),h.pipe("float combine(float a, float b) { return min(a, b); }")):(h=this._shaders.shader(),h.pipe(this.bind.shader.shaderBind())):h=e;return null!=(f=p(this._inherit("mask"),k=>k.mask(h)))?f:h}}m.Mask=c;c.initClass()};
shadow$provide[266]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});var t=v(259);Object.keys(t).forEach(function(k){"default"!==k&&"__esModule"!==k&&(k in m&&m[k]===t[k]||Object.defineProperty(m,k,{enumerable:!0,get:function(){return t[k]}}))});var p=v(260);Object.keys(p).forEach(function(k){"default"!==k&&"__esModule"!==k&&(k in m&&m[k]===p[k]||Object.defineProperty(m,k,{enumerable:!0,get:function(){return p[k]}}))});var n=v(261);Object.keys(n).forEach(function(k){"default"!==
k&&"__esModule"!==k&&(k in m&&m[k]===n[k]||Object.defineProperty(m,k,{enumerable:!0,get:function(){return n[k]}}))});var c=v(262);Object.keys(c).forEach(function(k){"default"!==k&&"__esModule"!==k&&(k in m&&m[k]===c[k]||Object.defineProperty(m,k,{enumerable:!0,get:function(){return c[k]}}))});var e=v(263);Object.keys(e).forEach(function(k){"default"!==k&&"__esModule"!==k&&(k in m&&m[k]===e[k]||Object.defineProperty(m,k,{enumerable:!0,get:function(){return e[k]}}))});var f=v(264);Object.keys(f).forEach(function(k){"default"!==
k&&"__esModule"!==k&&(k in m&&m[k]===f[k]||Object.defineProperty(m,k,{enumerable:!0,get:function(){return f[k]}}))});var h=v(265);Object.keys(h).forEach(function(k){"default"!==k&&"__esModule"!==k&&(k in m&&m[k]===h[k]||Object.defineProperty(m,k,{enumerable:!0,get:function(){return h[k]}}))})};
shadow$provide[267]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Clamp=void 0;z=v(250);class t extends z.Operator{static initClass(){this.traits="node bind operator source index clamp".split(" ")}indexShader(p){p.pipe(this.operator);return super.indexShader(p)}sourceShader(p){p.pipe(this.operator);return super.sourceShader(p)}make(){super.make();if(null!=this.bind.source){var p={clampLimit:this._attributes.make(this._types.vec4())};this.clampLimit=p.clampLimit;var n=this._shaders.shader();
n.pipe("clamp.position",p);return this.operator=n}}unmake(){return super.unmake()}resize(){if(null!=this.bind.source){const p=this.bind.source.getActiveDimensions();this.clampLimit.value.set(p.width-1,p.height-1,p.depth-1,p.items-1)}return super.resize()}change(p,n,c){if(n.operator||n.clamp)return this.rebuild()}}m.Clamp=t;t.initClass()};
shadow$provide[268]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Grow=void 0;z=v(250);class t extends z.Operator{static initClass(){this.traits="node bind operator source index grow".split(" ")}sourceShader(p){return p.pipe(this.operator)}make(){super.make();if(null!=this.bind.source){var p={growScale:this.node.attributes["grow.scale"],growMask:this._attributes.make(this._types.vec4()),growAnchor:this._attributes.make(this._types.vec4())};this.growMask=p.growMask.value;this.growAnchor=
p.growAnchor.value;var n=this._shaders.shader();n.require(this.bind.source.sourceShader(this._shaders.shader()));n.pipe("grow.position",p);return this.operator=n}}unmake(){return super.unmake()}resize(){this.update();return super.resize()}update(){const p=this.bind.source.getFutureDimensions(),n=["width","height","depth","items"];return(()=>{const c=[];for(let e=0;e<n.length;e++){const f=n[e],h=this.props[f];this.growMask.setComponent(e,+(null==h));c.push(this.growAnchor.setComponent(e,null!=h?((p[f]||
1)-1)*(.5-.5*h):0))}return c})()}change(p,n,c){if(n.operator)return this.rebuild();if(n.grow)return this.update()}}m.Grow=t;t.initClass()};
shadow$provide[269]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.Join=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(100));z=v(250);class n extends z.Operator{static initClass(){this.traits="node bind operator source index join".split(" ")}indexShader(c){c.pipe(this.operator);return super.indexShader(c)}sourceShader(c){c.pipe(this.operator);return super.sourceShader(c)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(c){var e;
let f;const {order:h,axis:k,stride:g}=this,r=["width","height","depth","items"],u=h.map(E=>r[E-1]);var w=h.indexOf(k);let x=(()=>{const E=[];for(f of Array.from(u))E.push(c[f]);return E})();const B=(null!=(e=x[w+1])?e:1)*g;x.splice(w,2,B);x=x.slice(0,3);x.push(1);e={};for(w=0;w<u.length;w++)f=u[w],e[f]=x[w];return e}make(){super.make();if(null!=this.bind.source){var {order:c}=this.props,{axis:e}=this.props,{overlap:f}=this.props,h=c.join("");null==e&&(e=c[0]);var k=h.indexOf(e);h=h.replace(e,"00").substring(0,
4);var g=[null,"width","height","depth","items"][e];g=this.bind.source.getDimensions()[g];f=Math.min(g-1,f);var r=g-f,u={joinStride:this._attributes.make(this._types.number(r)),joinStrideInv:this._attributes.make(this._types.number(1/r))},w=this._shaders.shader();w.require(p.swizzleVec4(e,1));w.require(p.swizzleVec4(h,4));w.require(p.injectVec4([k,k+1]));w.pipe("join.position",u);w.pipe(p.invertSwizzleVec4(c));this.operator=w;this.order=c;this.axis=e;this.overlap=f;this.length=g;return this.stride=
r}}unmake(){return super.unmake()}change(c,e,f){if(e.join||e.operator)return this.rebuild()}}m.Join=n;n.initClass()};
shadow$provide[270]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.Lerp=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(100));z=v(250);class n extends z.Operator{static initClass(){this.traits="node bind operator source index lerp sampler:x sampler:y sampler:z sampler:w".split(" ")}indexShader(c){c.pipe(this.indexer);return super.indexShader(c)}sourceShader(c){return c.pipe(this.operator)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(c){const e=
this.resampled,f=this.centered,h=this.padding;this.relativeSize?(f.items||c.items--,f.width||c.width--,f.height||c.height--,f.depth||c.depth--,null!=e.items&&(c.items*=e.items),null!=e.width&&(c.width*=e.width),null!=e.height&&(c.height*=e.height),null!=e.depth&&(c.depth*=e.depth),f.items||c.items++,f.width||c.width++,f.height||c.height++,f.depth||c.depth++,c.items-=2*h.items,c.width-=2*h.width,c.height-=2*h.height,c.depth-=2*h.depth):(null!=e.items&&(c.items=e.items),null!=e.width&&(c.width=e.width),
null!=e.height&&(c.height=e.height),null!=e.depth&&(c.depth=e.depth));c.items=Math.max(0,Math.floor(c.items));c.width=Math.max(0,Math.floor(c.width));c.height=Math.max(0,Math.floor(c.height));c.depth=Math.max(0,Math.floor(c.depth));return c}make(){let c;super.make();if(null!=this.bind.source){var {size:e,items:f,width:h,height:k,depth:g}=this.props,r=e===this.node.attributes["lerp.size"].enum.relative;this.resampled={};null!=f&&(this.resampled.items=f);null!=h&&(this.resampled.width=h);null!=k&&(this.resampled.height=
k);null!=g&&(this.resampled.depth=g);this.centered={};this.centered.items=this.props.centeredW;this.centered.width=this.props.centeredX;this.centered.height=this.props.centeredY;this.centered.depth=this.props.centeredZ;this.padding={};this.padding.items=this.props.paddingW;this.padding.width=this.props.paddingX;this.padding.height=this.props.paddingY;this.padding.depth=this.props.paddingZ;var u=this._shaders.shader(),w=this._shaders.shader(),x={resampleFactor:this._attributes.make(this._types.vec4(0,
0,0,0)),resampleBias:this._attributes.make(this._types.vec4(0,0,0,0))};this.resampleFactor=x.resampleFactor;this.resampleBias=x.resampleBias;var B=null!=f||null!=h||null!=k||null!=g;u.pipe("resample.padding",x);var E=[],C=!1,H=["width","height","depth","items"];for(c=0;c<H.length;c++){var I=H[c];I=this.centered[I];C||(C=I);E[c]=I?"0.5":"0.0"}if(C&&B){var K=`vec4(${E})`;u.pipe(p.binaryOperator(4,"+",K));w.pipe(p.binaryOperator(4,"+",K))}B?(u.pipe("resample.relative",x),w.pipe("resample.relative",x)):
(u.pipe(p.identity("vec4")),w.pipe(p.identity("vec4")));C&&B&&(u.pipe(p.binaryOperator(4,"-",K)),w.pipe(p.binaryOperator(4,"-",K)));B=this.bind.source.sourceShader(this._shaders.shader());E=["width","height","depth","items"];for(c=0;c<E.length;c++)I=E[c],C=`lerp.${I}`,null!=this.props[I]&&(B=this._shaders.shader().require(B),B.pipe(C,x));u.pipe(B);this.operator=u;this.indexer=w;return this.relativeSize=r}}unmake(){super.unmake();return this.operator=null}resize(){if(null!=this.bind.source){var c=
this.bind.source.getActiveDimensions(),e=this.getActiveDimensions(),f=E=>{const C=this.centered[E],H=this.padding[E];e[E]+=2*H;return[C?c[E]/Math.max(1,e[E]):Math.max(1,c[E]-1)/Math.max(1,e[E]-1),H]},[h,k]=Array.from(f("width")),[g,r]=Array.from(f("height")),[u,w]=Array.from(f("depth")),[x,B]=Array.from(f("items"));this.resampleFactor.value.set(h,g,u,x);this.resampleBias.value.set(k,r,w,B);return super.resize()}}change(c,e,f){if(e.operator||e.lerp||e.sampler)return this.rebuild()}}m.Lerp=n;n.initClass()};
shadow$provide[271]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Memo=void 0;z=v(250);class t extends z.Operator{static initClass(){this.traits="node bind active operator source index texture memo".split(" ")}sourceShader(p){return this.memo.shaderAbsolute(p,1)}make(){super.make();if(null!=this.bind.source){this._helpers.active.make();this._listen("root","root.update",()=>{if(this.isActive)return this.update()});var {minFilter:p,magFilter:n,type:c}=this.props,e=this.bind.source.getDimensions(),
{items:f,width:h,height:k,depth:g}=e;this.memo=this._renderables.make("memo",{items:f,width:h,height:k,depth:g,minFilter:p,magFilter:n,type:c});e=this._shaders.shader();this.bind.source.sourceShader(e);this.compose=this._renderables.make("memoScreen",{map:e,items:f,width:h,height:k,depth:g});this.memo.adopt(this.compose);this.objects=[this.compose];return this.renders=this.compose.renders}}unmake(){this._helpers.active.unmake();null!=this.bind.source&&(this.memo.unadopt(this.compose),this.memo.dispose(),
this.memo=this.compose=null,super.unmake())}update(){return null!=this.memo?this.memo.render():void 0}resize(){if(null!=this.bind.source){var p=this.bind.source.getActiveDimensions(),{width:n,height:c,depth:e}=p;this.compose.cover(n,c,e);return super.resize()}}change(p,n,c){if(n.texture||n.operator)return this.rebuild()}}m.Memo=t;t.initClass()};
shadow$provide[272]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Readback=void 0;z=v(89);class t extends z.Primitive{static initClass(){this.traits="node bind operator readback entity active".split(" ");this.finals={channels:4}}init(){this.emitter=this.root=null;return this.active={}}make(){super.make();this._compute("readback.data",()=>null!=this.readback?this.readback.data:void 0);this._compute("readback.items",()=>null!=this.readback?this.readback.items:void 0);this._compute("readback.width",
()=>null!=this.readback?this.readback.width:void 0);this._compute("readback.height",()=>null!=this.readback?this.readback.height:void 0);this._compute("readback.depth",()=>null!=this.readback?this.readback.depth:void 0);this._helpers.bind.make([{to:"operator.source",trait:"source"}]);if(null!=this.bind.source){var {type:p,channels:n,expr:c}=this.props;this.root=this._inherit("root");this._listen("root","root.update",this.update);var {items:e,width:f,height:h,depth:k}=this.bind.source.getDimensions(),
g=this.bind.source.sourceShader(this._shaders.shader());this.readback=this._renderables.make("readback",{map:g,items:e,width:f,height:h,depth:k,channels:n,type:p});null!=c&&this.readback.setCallback(c);this._helpers.active.make()}}unmake(){null!=this.readback&&(this.readback.dispose(),this.emitter=this.root=this.readback=null,this.active={});this._helpers.active.unmake();return this._helpers.bind.unmake()}update(){null!=this.readback&&this.isActive&&(this.readback.update(null!=this.root?this.root.getCamera():
void 0),this.readback.post(),null!=this.props.expr&&this.readback.iterate())}resize(){let p;if(null!=this.readback){var {items:n,width:c,height:e,depth:f}=this.bind.source.getActiveDimensions();this.readback.setActive(n,c,e,f);this.strideI=n;this.strideJ=p=n*c;return this.strideK=p*e}}change(p,n,c){if(p["readback.type"])return this.rebuild();if(p["readback.expr"]&&this.readback)return this.readback.setCallback(this.props.expr)}}m.Readback=t;t.initClass()};
shadow$provide[273]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Repeat=void 0;z=v(250);class t extends z.Operator{static initClass(){this.traits="node bind operator source index repeat".split(" ")}indexShader(p){p.pipe(this.operator);return super.indexShader(p)}sourceShader(p){p.pipe(this.operator);return super.sourceShader(p)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(p){const n=
this.resample;return{items:n.items*p.items,width:n.width*p.width,height:n.height*p.height,depth:n.depth*p.depth}}make(){super.make();if(null!=this.bind.source){this.resample={};var p={repeatModulus:this._attributes.make(this._types.vec4())};this.repeatModulus=p.repeatModulus;var n=this._shaders.shader();n.pipe("repeat.position",p);return this.operator=n}}unmake(){return super.unmake()}resize(){if(null!=this.bind.source){const p=this.bind.source.getActiveDimensions();this.repeatModulus.value.set(p.width,
p.height,p.depth,p.items)}return super.resize()}change(p,n,c){if(n.operator||n.repeat)return this.rebuild();if(c)return["items","width","height","depth"].map(e=>this.resample[e]=this.props[e])}}m.Repeat=t;t.initClass()};
shadow$provide[274]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Reverse=void 0;z=v(250);class t extends z.Operator{static initClass(){this.traits="node bind operator source index reverse".split(" ")}getDimensions(){return this.bind.source.getDimensions()}getActiveDimensions(){return this.bind.source.getActiveDimensions()}getFutureDimensions(){return this.bind.source.getFutureDimensions()}getIndexDimensions(){return this.bind.source.getIndexDimensions()}sourceShader(p){p.pipe("reverse.position",
this.uniforms);return this.bind.source.sourceShader(p)}_resolveScale(p,n){return this.props[p]?-1:1}_resolveOffset(p,n){n=n[p];return this.props[p]?n-1:0}make(){super.make();if(null!=this.bind.source)return this.uniforms={reverseScale:this._attributes.make(this._types.vec4()),reverseOffset:this._attributes.make(this._types.vec4())}}unmake(){return super.unmake()}resize(){if(null!=this.bind.source){var p=this.bind.source.getActiveDimensions();this.uniforms.reverseScale.value.set(this._resolveScale("width",
p),this._resolveScale("height",p),this._resolveScale("depth",p),this._resolveScale("items",p));this.uniforms.reverseOffset.value.set(this._resolveOffset("width",p),this._resolveOffset("height",p),this._resolveOffset("depth",p),this._resolveOffset("items",p));return super.resize()}}change(p,n,c){if(n.operator)return this.rebuild();if(n.reverse)return this.resize()}}m.Reverse=t;t.initClass()};
shadow$provide[275]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.Swizzle=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(100));z=v(250);class n extends z.Operator{static initClass(){this.traits="node bind operator source index swizzle".split(" ")}sourceShader(c){c=super.sourceShader(c);this.swizzler&&c.pipe(this.swizzler);return c}make(){super.make();if(null!=this.bind.source){var {order:c}=this.props;if("1234"!==c.join())return this.swizzler=p.swizzleVec4(c,4)}}unmake(){super.unmake();
return this.swizzler=null}change(c,e,f){if(e.swizzle||e.operator)return this.rebuild()}}m.Swizzle=n;n.initClass()};
shadow$provide[276]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Spread=void 0;z=v(250);class t extends z.Operator{static initClass(){this.traits="node bind operator source index spread".split(" ")}sourceShader(p){return p.pipe(this.operator)}make(){super.make();if(null!=this.bind.source){var p={spreadMatrix:this._attributes.make(this._types.mat4()),spreadOffset:this._attributes.make(this._types.vec4())};this.spreadMatrix=p.spreadMatrix;this.spreadOffset=p.spreadOffset;var n=
this._shaders.shader();n.require(this.bind.source.sourceShader(this._shaders.shader()));n.pipe("spread.position",p);return this.operator=n}}unmake(){return super.unmake()}resize(){this.update();return super.resize()}update(){let p,n,c,e;const f=this.bind.source.getFutureDimensions(),h=this.spreadMatrix.value.elements,k=["width","height","depth","items"],g=["alignWidth","alignHeight","alignDepth","alignItems"],{unit:r}=this.props,u=this.node.attributes["spread.unit"].enum,w=(()=>{switch(r){case u.relative:return(x,
B,E,C)=>h[4*B+E]=C/Math.max(1,f[x]-1);case u.absolute:return(x,B,E,C)=>h[4*B+E]=C}})();return(()=>{const x=[];for(n=0;n<k.length;n++){p=k[n];const C=this.props[p];var B=this.props[g[n]];this.spreadOffset.value.setComponent(n,null!=C?-((null!=f[p]?f[p]:1)-1)*(.5-.5*B):0);B=x;var E=B.push;const H=[];for(c=0;3>=c;c++){let I;e=null!=(I=null!=C?C.getComponent(c):void 0)?I:0;H.push(h[4*n+c]=w(p,n,c,e))}E.call(B,H)}return x})()}change(p,n,c){if(n.operator)return this.rebuild();if(n.spread)return this.update()}}
m.Spread=t;t.initClass()};
shadow$provide[277]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.Split=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(100));z=v(250);class n extends z.Operator{static initClass(){this.traits="node bind operator source index split".split(" ")}indexShader(c){c.pipe(this.operator);return super.indexShader(c)}sourceShader(c){c.pipe(this.operator);return super.sourceShader(c)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(c){let e;
var {order:f}=this,{axis:h}=this,{overlap:k}=this,{length:g}=this;const {stride:r}=this,u=["width","height","depth","items"],w=f.map(x=>u[x-1]);h=f.indexOf(h);f=(()=>{const x=[];for(e of Array.from(w))x.push(c[e]);return x})();f.splice(h,1,g,Math.floor((f[h]-k)/r));f=f.slice(0,4);k={};for(g=0;g<w.length;g++)e=w[g],k[e]=f[g];return k}make(){var c;super.make();if(null!=this.bind.source){var {order:e}=this.props,{axis:f}=this.props,{overlap:h}=this.props,{length:k}=this.props,g=e.join("");null==f&&(f=
e[0]);var r=g.indexOf(f),u=g[r]+(null!=(c=g[r+1])?c:0);c=g.replace(u[1],"").replace(u[0],"0")+"0";h=Math.min(k-1,h);g=k-h;var w={splitStride:this._attributes.make(this._types.number(g))},x=this._shaders.shader();x.require(p.swizzleVec4(u,2));x.require(p.swizzleVec4(c,4));x.require(p.injectVec4(r));x.pipe("split.position",w);x.pipe(p.invertSwizzleVec4(e));this.operator=x;this.order=e;this.axis=f;this.overlap=h;this.length=k;return this.stride=g}}unmake(){return super.unmake()}change(c,e,f){if(c["split.axis"]||
c["split.order"]||e.operator)return this.rebuild()}}m.Split=n;n.initClass()};
shadow$provide[278]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Slice=void 0;z=v(250);class t extends z.Operator{static initClass(){this.traits="node bind operator source index slice".split(" ")}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}sourceShader(p){p.pipe("slice.position",
this.uniforms);return this.bind.source.sourceShader(p)}_resolve(p,n){var c=this.props[p];p=n[p];if(null==c)return[0,p];n=Math.round(c.x);n=0>n?p+n:n;c=Math.round(c.y);c=Math.max(n,0>c?p+c:c);return[n,c-n]}_resample(p){p.width=this._resolve("width",p)[1];p.height=this._resolve("height",p)[1];p.depth=this._resolve("depth",p)[1];p.items=this._resolve("items",p)[1];return p}make(){super.make();if(null!=this.bind.source)return this.uniforms={sliceOffset:this._attributes.make(this._types.vec4())}}unmake(){return super.unmake()}resize(){if(null!=
this.bind.source){var p=this.bind.source.getActiveDimensions();this.uniforms.sliceOffset.value.set(this._resolve("width",p)[0],this._resolve("height",p)[0],this._resolve("depth",p)[0],this._resolve("items",p)[0]);return super.resize()}}change(p,n,c){if(n.operator)return this.rebuild();if(n.slice)return this.resize()}}m.Slice=t;t.initClass()};
shadow$provide[279]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.Subdivide=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(100));z=v(250);class n extends z.Operator{static initClass(){this.traits="node bind operator source index subdivide".split(" ")}indexShader(c){c.pipe(this.indexer);return super.indexShader(c)}sourceShader(c){return c.pipe(this.operator)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(c){const e=
this.resampled;c.items--;c.width--;c.height--;c.depth--;null!=e.items&&(c.items*=e.items);null!=e.width&&(c.width*=e.width);null!=e.height&&(c.height*=e.height);null!=e.depth&&(c.depth*=e.depth);c.items++;c.width++;c.height++;c.depth++;return c}make(){super.make();if(null!=this.bind.source){var {lerp:c}=this.props,{items:e,width:f,height:h,depth:k}=this.props;this.resampled={};null!=e&&(this.resampled.items=e);null!=f&&(this.resampled.width=f);null!=h&&(this.resampled.height=h);null!=k&&(this.resampled.depth=
k);var g=this._shaders.shader(),r=this._shaders.shader(),u={resampleFactor:this._attributes.make(this._types.vec4(0,0,0,0)),subdivideBevel:this.node.attributes["subdivide.bevel"]};this.resampleFactor=u.resampleFactor;this.resampleBias=u.resampleBias;null!=e||null!=f||null!=h||null!=k?(g.pipe("resample.relative",u),r.pipe("resample.relative",u)):(g.pipe(p.identity("vec4")),r.pipe(p.identity("vec4")));var w=this.bind.source.sourceShader(this._shaders.shader());c=c?".lerp":"";var x=["width","height",
"depth","items"];for(let B=0;B<x.length;B++){const E=x[B],C=`subdivide.${E}${c}`;null!=this.props[E]&&(w=this._shaders.shader().require(w),w.pipe(C,u))}g.pipe(w);this.operator=g;return this.indexer=r}}unmake(){super.unmake();return this.operator=null}resize(){if(null!=this.bind.source){var c=this.bind.source.getActiveDimensions(),e=this.getActiveDimensions(),f=r=>Math.max(1,c[r]-1)/Math.max(1,e[r]-1),h=f("width"),k=f("height"),g=f("depth");f=f("items");this.resampleFactor.value.set(h,k,g,f);return super.resize()}}change(c,
e,f){if(e.operator||e.subdivide)return this.rebuild()}}m.Subdivide=n;n.initClass()};
shadow$provide[280]=function(z,v,J,m){function t(e){if("function"!==typeof WeakMap)return null;var f=new WeakMap,h=new WeakMap;return(t=function(k){return k?h:f})(e)}Object.defineProperty(m,"__esModule",{value:!0});m.Transpose=void 0;var p=function(e,f){if(!f&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};if((f=t(f))&&f.has(e))return f.get(e);var h={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor,g;for(g in e)if("default"!==g&&Object.prototype.hasOwnProperty.call(e,
g)){var r=k?Object.getOwnPropertyDescriptor(e,g):null;r&&(r.get||r.set)?Object.defineProperty(h,g,r):h[g]=e[g]}h.default=e;f&&f.set(e,h);return h}(v(100));z=v(250);const n={1:"width",2:"height",3:"depth",4:"items"};class c extends z.Operator{static initClass(){this.traits="node bind operator source index transpose".split(" ")}indexShader(e){this.swizzler&&e.pipe(this.swizzler);return super.indexShader(e)}sourceShader(e){this.swizzler&&e.pipe(this.swizzler);return super.sourceShader(e)}getDimensions(){return this._remap(this.transpose,
this.bind.source.getDimensions())}getActiveDimensions(){return this._remap(this.transpose,this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._remap(this.transpose,this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._remap(this.transpose,this.bind.source.getIndexDimensions())}_remap(e,f){const h={};for(let k=0;3>=k;k++){const g=n[e[k]];h[n[k+1]]=null!=f[g]?f[g]:1}return h}make(){super.make();if(null!=this.bind.source){var {order:e}=this.props;"1234"!==e.join()&&
(this.swizzler=p.invertSwizzleVec4(e));this.transpose=e;return this.trigger({type:"source.rebuild"})}}unmake(){super.unmake();return this.swizzler=null}change(e,f,h){if(f.transpose||f.operator)return this.rebuild()}}m.Transpose=c;c.initClass()};
shadow$provide[281]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});var t=v(267);Object.keys(t).forEach(function(C){"default"!==C&&"__esModule"!==C&&(C in m&&m[C]===t[C]||Object.defineProperty(m,C,{enumerable:!0,get:function(){return t[C]}}))});var p=v(268);Object.keys(p).forEach(function(C){"default"!==C&&"__esModule"!==C&&(C in m&&m[C]===p[C]||Object.defineProperty(m,C,{enumerable:!0,get:function(){return p[C]}}))});var n=v(269);Object.keys(n).forEach(function(C){"default"!==
C&&"__esModule"!==C&&(C in m&&m[C]===n[C]||Object.defineProperty(m,C,{enumerable:!0,get:function(){return n[C]}}))});var c=v(270);Object.keys(c).forEach(function(C){"default"!==C&&"__esModule"!==C&&(C in m&&m[C]===c[C]||Object.defineProperty(m,C,{enumerable:!0,get:function(){return c[C]}}))});var e=v(271);Object.keys(e).forEach(function(C){"default"!==C&&"__esModule"!==C&&(C in m&&m[C]===e[C]||Object.defineProperty(m,C,{enumerable:!0,get:function(){return e[C]}}))});var f=v(272);Object.keys(f).forEach(function(C){"default"!==
C&&"__esModule"!==C&&(C in m&&m[C]===f[C]||Object.defineProperty(m,C,{enumerable:!0,get:function(){return f[C]}}))});var h=v(253);Object.keys(h).forEach(function(C){"default"!==C&&"__esModule"!==C&&(C in m&&m[C]===h[C]||Object.defineProperty(m,C,{enumerable:!0,get:function(){return h[C]}}))});var k=v(273);Object.keys(k).forEach(function(C){"default"!==C&&"__esModule"!==C&&(C in m&&m[C]===k[C]||Object.defineProperty(m,C,{enumerable:!0,get:function(){return k[C]}}))});var g=v(274);Object.keys(g).forEach(function(C){"default"!==
C&&"__esModule"!==C&&(C in m&&m[C]===g[C]||Object.defineProperty(m,C,{enumerable:!0,get:function(){return g[C]}}))});var r=v(275);Object.keys(r).forEach(function(C){"default"!==C&&"__esModule"!==C&&(C in m&&m[C]===r[C]||Object.defineProperty(m,C,{enumerable:!0,get:function(){return r[C]}}))});var u=v(276);Object.keys(u).forEach(function(C){"default"!==C&&"__esModule"!==C&&(C in m&&m[C]===u[C]||Object.defineProperty(m,C,{enumerable:!0,get:function(){return u[C]}}))});var w=v(277);Object.keys(w).forEach(function(C){"default"!==
C&&"__esModule"!==C&&(C in m&&m[C]===w[C]||Object.defineProperty(m,C,{enumerable:!0,get:function(){return w[C]}}))});var x=v(278);Object.keys(x).forEach(function(C){"default"!==C&&"__esModule"!==C&&(C in m&&m[C]===x[C]||Object.defineProperty(m,C,{enumerable:!0,get:function(){return x[C]}}))});var B=v(279);Object.keys(B).forEach(function(C){"default"!==C&&"__esModule"!==C&&(C in m&&m[C]===B[C]||Object.defineProperty(m,C,{enumerable:!0,get:function(){return B[C]}}))});var E=v(280);Object.keys(E).forEach(function(C){"default"!==
C&&"__esModule"!==C&&(C in m&&m[C]===E[C]||Object.defineProperty(m,C,{enumerable:!0,get:function(){return E[C]}}))})};
shadow$provide[282]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Transition=void 0;z=v(90);class t extends z.Parent{static initClass(){this.traits="node transition transform mask visible active".split(" ")}init(){this.uniforms=this.animate=null;this.state={isVisible:!0,isActive:!0,enter:1,exit:1};return this.locked=this.latched=null}make(){this.uniforms={transitionFrom:this._attributes.make(this._types.vec4()),transitionTo:this._attributes.make(this._types.vec4()),transitionActive:this._attributes.make(this._types.bool()),
transitionScale:this._attributes.make(this._types.vec4()),transitionBias:this._attributes.make(this._types.vec4()),transitionEnter:this._attributes.make(this._types.number()),transitionExit:this._attributes.make(this._types.number()),transitionSkew:this._attributes.make(this._types.number())};const p=this._inherit("slide"),n=this._inherit("visible"),c=this._inherit("active");this._listen(p,"transition.latch",e=>this.latch(e.step));this._listen(p,"transition.release",()=>this.release());this._listen(n,
"visible.change",()=>this.update(this.state.isVisible=n.isVisible));this._listen(c,"active.change",()=>this.update(this.state.isActive=c.isActive));this.animate=this._animator.make(this._types.vec2(1,1),{step:e=>{this.state.enter=e.x;this.state.exit=e.y;return this.update()},complete:e=>this.complete(e)});return this.move=null!=this.props.from||null!=this.props.to}unmake(){return this.animate.dispose()}latch(p){this.locked=null;this.latched=p={isVisible:this.state.isVisible,isActive:this.state.isActive,
step:p};if(!this.isVisible){const [n,c]=Array.from(0<=p.step?[0,1]:[1,0]);return this.animate.set(n,c)}}release(){const {latched:p}=this,{state:n}=this;this.latched=null;if(p.isVisible!==n.isVisible){const c=0<=p.step,e=n.isVisible,[f,h]=Array.from(e?[1,1]:c?[1,0]:[0,1]);let {duration:k,durationEnter:g,durationExit:r}=this.props;null==g&&(g=k);null==r&&(r=k);let {delay:u,delayEnter:w,delayExit:x}=this.props;null==w&&(w=u);null==x&&(x=u);this.animate.immediate({x:f,y:h},{duration:e*g+!e*r,delay:e*
w+!e*x,ease:"linear"});this.locked={isVisible:!0,isActive:p.isActive||n.isActive}}return this.update()}complete(p){if(p)return this.locked=null,this.update()}update(){if(null==this.latched){var {enter:p,exit:n}=this.props;null==p&&({enter:p}=this.state);null==n&&({exit:n}=this.state);var c=p*n,e=0<c;this.uniforms.transitionEnter.value=p;this.uniforms.transitionExit.value=n;this.uniforms.transitionActive.value=1>c;e&&(e=!!this.state.isVisible);null!=this.locked&&(e=this.locked.isVisible);this.isVisible!==
e&&(this.isVisible=e,this.trigger({type:"visible.change"}));c=!!(this.state.isActive||null!=this.locked&&this.locked.isActive);if(this.isActive!==c)return this.isActive=c,this.trigger({type:"active.change"})}}change(p,n,c){(p["transition.enter"]||p["transition.exit"]||c)&&this.update();if(p["transition.stagger"]||c){var {stagger:e}=this.props;p=0>e.x;n=0>e.y;c=0>e.z;const f=0>e.w,h=Math.abs(e.x),k=Math.abs(e.y),g=Math.abs(e.z);e=Math.abs(e.w);this.uniforms.transitionSkew.value=h+k+g+e;this.uniforms.transitionScale.value.set((1-
2*p)*h,(1-2*n)*k,(1-2*c)*g,(1-2*f)*e);return this.uniforms.transitionBias.value.set(p*h,n*k,c*g,f*e)}}}m.Transition=t;t.initClass()};
shadow$provide[283]=function(z,v,J,m){function t(n,c){return"undefined"!==typeof n&&null!==n?c(n):void 0}Object.defineProperty(m,"__esModule",{value:!0});m.Move=void 0;z=v(282);class p extends z.Transition{static initClass(){this.traits="node transition vertex move visible active".split(" ")}make(){super.make();const n={moveFrom:this.node.attributes["move.from"],moveTo:this.node.attributes["move.to"]};for(const c in n)this.uniforms[c]=n[c]}vertex(n,c){let e;c===this.props.pass&&n.pipe("move.position",
this.uniforms);return null!=(e=t(this._inherit("vertex"),f=>f.vertex(n,c)))?e:n}}m.Move=p;p.initClass()};
shadow$provide[284]=function(z,v,J,m){function t(p,n,c){return Math.max(n,Math.min(c,p))}Object.defineProperty(m,"__esModule",{value:!0});m.clamp=t;m.cosine=function(p){return.5-.5*Math.cos(t(p,0,1)*Math.PI)};m.binary=function(p){return+(.5<=p)};m.hold=function(p){return+(1<=p)}};
shadow$provide[285]=function(z,v,J,m){function t(e){if("function"!==typeof WeakMap)return null;var f=new WeakMap,h=new WeakMap;return(t=function(k){return k?h:f})(e)}Object.defineProperty(m,"__esModule",{value:!0});m.Track=void 0;var p=function(e,f){if(!f&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};if((f=t(f))&&f.has(e))return f.get(e);var h={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor,g;for(g in e)if("default"!==g&&Object.prototype.hasOwnProperty.call(e,
g)){var r=k?Object.getOwnPropertyDescriptor(e,g):null;r&&(r.get||r.set)?Object.defineProperty(h,g,r):h[g]=e[g]}h.default=e;f&&f.set(e,h);return h}(v(284));z=v(89);const n=function(e){const f={};for(const h in e){const k=e[h];f[h]=k instanceof Array?k.slice():null!=k&&"object"===typeof k?n(k):k}return f};class c extends z.Primitive{static initClass(){this.traits=["node","track","seek","bind"]}init(){this.handlers={};this.values=this.script=null;this.playhead=0;return this.expr=this.section=this.velocity=
null}make(){let e;this._helpers.bind.make([{to:"track.target",trait:"node",callback:null}]);const {script:f}=this.props,{node:h}=this.bind.target;this.targetNode=h;return[this.script,this.values,this.start,this.end]=Array.from(e=this._process(h,f)),e}unmake(){this.unbindExpr();this._helpers.bind.unmake();this.script=this.values=this.start=this.end=this.section=this.expr=null;return this.playhead=0}bindExpr(e){this.unbindExpr();this.expr=e;this.targetNode.bind(e,!0);const {clock:f}=this.targetNode,
h=this;return this._attributes.bind(this.measure=function(){let k=null;return()=>{const {step:g}=f.getTime();null!=k&&(h.velocity=(h.playhead-k)/g);return k=h.playhead}}())}unbindExpr(){null!=this.expr&&this.targetNode.unbind(this.expr,!0);null!=this.measure&&this._attributes.unbind(this.measure);return this.expr=this.measure=null}_process(e,f){let h;let k;if(f instanceof Array){var g={};for(var r=0;r<f.length;r++)k=f[r],g[r]=k;f=g}g=[];for(B in f)k=f[B],null==k&&(k=[]),k instanceof Array?k={key:+B,
props:null!=k[0]?n(k[0]):{},bind:null!=k[1]?n(k[1]):{}}:(k=null!=k.key||k.props||k.bind?n(k):{props:n(k)},k.key=null!=k.key?+k.key:+B,null==k.props&&(k.props={}),null==k.bind&&(k.bind={})),g.push(k);f=g;if(!f.length)return[[],{},0,0];f.sort((E,C)=>E.key-C.key);r=f[0].key;const u=f[f.length-1].key;for(B in f){k=f[B];null!=w&&(w.next=k);var w=k}w.next=w;f=g;g={};const x={};for(B in f)for(h in k=f[B],k.props)w=k.props[h],g[h]=!0;for(B in f)for(h in k=f[B],k.bind)w=k.bind[h],g[h]=!0;for(h in g)g[h]=e.get(h);
try{for(h in g)x[h]=[e.attribute(h).T.make(),e.attribute(h).T.make(),e.attribute(h).T.make()]}catch(E){throw console.warn(this.node.toMarkup()),e=`${this.node.toString()} - Target ${e} has no \`${h}\` property`,Error(e);}var B=[];for(k of Array.from(f)){for(h in g)if(w=g[h],w=e.validate(h,null!=k.props[h]?k.props[h]:w),g[h]=k.props[h]=w,null!=k.bind[h]&&"function"!==typeof k.bind[h])throw console.warn(this.node.toMarkup()),e=`${this.node.toString()} - Bind expression \`${k.bind[h]}\` on property \`${h}\` is not a function`,
Error(e);B.push(k)}return[B,x,r,u]}update(){let {playhead:e}=this;const {script:f}=this,{ease:h,seek:k}=this.props,g=this.targetNode;null!=k&&(e=k);if(f.length){let O;var r=function(){let Q=f[0];for(let W=0;W<f.length;W++){const R=f[W];if(R.key>e)break;Q=R}return Q},{section:u}=this;if(!u||e<u.key||e>u.next.key)u=r(f,e);if(u!==this.section){var w=this.section=u,x=u.next,B=w.key,E=x.key,C=(()=>{switch(h){case "linear":case 0:return p.clamp;case "cosine":case 1:return p.cosine;case "binary":case 2:return p.binary;
case "hold":case 3:return p.hold;default:return p.cosine}})(),{clock:H}=g,I=Q=>{if(null==this.velocity)return this.playhead;const W=H.getTime();return this.playhead+this.velocity*(Q-W.time)},K=function(){const Q=1/Math.max(1E-4,E-B);return W=>C((I(W)-B)*Q,0,1)}();r=Q=>{const W=w.bind[Q],R=x.bind[Q],X=w.props[Q],ca=x.props[Q],ka=function(){console.warn(g.toMarkup());throw Error(`${this.node.toString()} - Invalid expression result on track \`${Q}\``);},la=g.attribute(Q),Aa=this.values[Q],ta=this._animator;
return W&&R?((Ha,Oa,da)=>function(Wa,Pa){let mb;Ha[0]=mb=la.T.validate(W(Wa,Pa),Ha[0],ka);Ha[1]=Pa=la.T.validate(R(Wa,Pa),Ha[1],ka);return Ha[2]=ta.lerp(la.T,mb,Pa,K(Wa),Ha[2])})(Aa,w,x):W?((Ha,Oa,da)=>function(Wa,Pa){Ha[0]=Pa=la.T.validate(W(Wa,Pa),Ha[0],ka);return Ha[1]=ta.lerp(la.T,Pa,ca,K(Wa),Ha[1])})(Aa,w,x):R?((Ha,Oa,da)=>function(Wa,Pa){Ha[0]=Pa=la.T.validate(R(Wa,Pa),Ha[0],ka);return Ha[1]=ta.lerp(la.T,X,Pa,K(Wa),Ha[1])})(Aa,w,x):((Ha,Oa,da)=>(Wa,Pa)=>Ha[0]=ta.lerp(la.T,X,ca,K(Wa),Ha[0]))(Aa,
w,x)};u={};for(O in w.bind)null==u[O]&&(u[O]=r(O));for(O in x.bind)null==u[O]&&(u[O]=r(O));for(O in w.props)null==u[O]&&(u[O]=r(O));for(O in x.props)null==u[O]&&(u[O]=r(O));return this.bindExpr(u)}}}change(e,f,h){if(e["track.target"]||e["track.script"]||e["track.mode"])return this.rebuild();if(e["seek.seek"]||h)return this.update()}}m.Track=c;c.initClass()};
shadow$provide[286]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Play=void 0;z=v(285);class t extends z.Track{static initClass(){this.traits=["node","track","trigger","play","bind"]}init(){super.init();return this.start=this.skew=null}reset(p){null==p&&(p=!0);this.skew=p?0:null;return this.start=null}make(){super.make();this._listen("slide","slide.step",n=>{const {trigger:c}=this.props;if(null!=c&&n.index===c)return this.reset();if(null!=c&&0===n.index)return this.reset(!1)});
this.props.trigger&&null!=this._inherit("slide")||this.reset();const p=this._inherit("clock");return this._listen(p,"clock.tick",()=>{const {from:n,to:c,speed:e,pace:f,delay:h,realtime:k}=this.props;var g=p.getTime();if(null!=this.skew){var r=k?g.time:g.clock;g=k?g.delta:g.step;const u=e/f;null==this.start&&(this.start=r);this.skew+=g*(u-1);r=Math.max(0,r-this.start+this.skew-h*u);this.props.loop&&(r%=c-n);this.playhead=Math.min(c,n+r)}else this.playhead=0;return this.update()})}update(){return super.update()}change(p,
n,c){return p["trigger.trigger"]||p["play.realtime"]?this.rebuild():super.change(p,n,c)}}m.Play=t;t.initClass()};
shadow$provide[287]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Present=void 0;z=v(90);class t extends z.Parent{static initClass(){this.traits=["node","present"]}init(){}make(){this.nodes=[];this.steps=[];this.length=0;this.last=[];this.index=0;this.dirty=[];this._listen("root","root.update",this.update);return this._compute("present.length",()=>this.length)}adopt(p){const {node:n}=p;0>this.nodes.indexOf(p)&&this.nodes.push(n);return this.dirty.push(p)}unadopt(p){this.nodes=
this.nodes.filter(n=>n!==p);return this.dirty.push(p)}update(){if(this.dirty.length){for(const p of Array.from(this.dirty))this.slideReset(p);[this.steps,this.indices]=Array.from(this.process(this.nodes));this.length=this.steps.length;this.index=null;this.go(this.props.index);return this.dirty=[]}}slideLatch(p,n,c){return p.slideLatch(n,c)}slideStep(p,n,c){return p.slideStep(this.mapIndex(p,n),c)}slideRelease(p,n){return p.slideRelease()}slideReset(p){return p.slideReset()}mapIndex(p,n){return n-
this.indices[p.node._id]}process(p){const n=(f=>h=>{let k,g;const r=[];for(;h&&([h,k]=Array.from(g=[f(h),h]),g);)r.push(k);return r})(function(f){return f.parent.traits.hash.present?null:f.parent}),c=f=>0<=p.indexOf(f),e=f=>f.sort((h,k)=>h.order-k.order);return function(f){let h;const [k,g]=Array.from(f),r={};let u=[];f=function(x,B){let E;const {props:C}=E=x[0];var H=x[1];const I=null!=H?r[H._id]:0;H=null!=C.from?I+C.from:B-C.early;B=null!=C.to?I+C.to:B+C.steps+C.late;H=Math.max(0,H);B=Math.min(100,
B);null==r[E._id]&&(r[E._id]=H);for(let K=H,O=B,Q=H<=O;Q?K<O:K>O;Q?K++:K--)u[K]=(null!=u[K]?u[K]:u[K]=[]).concat(x);return C.steps};let w=0;for(h of Array.from(k))w+=f(h,w);for(h of Array.from(g))f(h,0);u=(()=>{const x=[];for(h of Array.from(u)){var B=x,E=B.push,C;if(C=h){const H=[];for(let I=0;I<C.length;I++){const K=C[I];C.indexOf(K)===I&&H.push(K)}C=H}else C=[];E.call(B,e(C))}return x})();return[u,r]}(function(f){const h=[],k=[];for(const g of Array.from(f))(null!=g[0].props.steps?h:k).push(g);
return[h,k]}((f=>f.sort(function(h,k){const g=h.length,r=k.length;let u=Math.min(g,r);for(let w=1,x=u,B=1<=x;B?w<=x:w>=x;B?w++:w--){const E=h[g-w],C=k[r-w],H=E.props.order,I=C.props.order;if(null!=H||null!=I){if(null!=H&&null!=I&&0!==(u=H-I))return u;if(null!=H)return-1;if(null!=I)return 1}if(C.order!==E.order)return C.order-E.order}u=g-r;return 0!==u?u:0}))((f=>Array.from(f).map(h=>n(h).filter(c)))(p))))}go(p){var n;let c;p=Math.max(0,Math.min(this.length+1,+p||0));const e=null!=(n=this.steps[p-
1])?n:[];n=this.props.directed?p-this.index:1;this.index=p;const f=(()=>{const u=[];for(c of Array.from(e))0>this.last.indexOf(c)&&u.push(c);return u})(),h=(()=>{const u=[];for(c of Array.from(this.last))0>e.indexOf(c)&&u.push(c);return u})(),k=(()=>{const u=[];for(c of Array.from(e))0>f.indexOf(c)&&0>h.indexOf(c)&&u.push(c);return u})(),g=u=>u.sort((w,x)=>w.order-x.order),r=u=>u.sort((w,x)=>x.order-w.order);for(c of Array.from(g(f)))this.slideLatch(c.controller,!0,n);for(c of Array.from(g(k)))this.slideLatch(c.controller,
null,n);for(c of Array.from(g(h)))this.slideLatch(c.controller,!1,n);for(c of Array.from(f))this.slideStep(c.controller,p,n);for(c of Array.from(k))this.slideStep(c.controller,p,n);for(c of Array.from(h))this.slideStep(c.controller,p,n);for(c of Array.from(r(f)))this.slideRelease(c.controller);for(c of Array.from(r(k)))this.slideRelease(c.controller);for(c of Array.from(r(h)))this.slideRelease(c.controller);this.last=e}change(p,n,c){if(p["present.index"]||c)return this.go(this.props.index)}}m.Present=
t;t.initClass()};
shadow$provide[288]=function(z,v,J,m){function t(e){if("function"!==typeof WeakMap)return null;var f=new WeakMap,h=new WeakMap;return(t=function(k){return k?h:f})(e)}function p(e,f){return"undefined"!==typeof e&&null!==e?f(e):void 0}Object.defineProperty(m,"__esModule",{value:!0});m.Reveal=void 0;var n=function(e,f){if(!f&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};if((f=t(f))&&f.has(e))return f.get(e);var h={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor,
g;for(g in e)if("default"!==g&&Object.prototype.hasOwnProperty.call(e,g)){var r=k?Object.getOwnPropertyDescriptor(e,g):null;r&&(r.get||r.set)?Object.defineProperty(h,g,r):h[g]=e[g]}h.default=e;f&&f.set(e,h);return h}(v(100));z=v(282);class c extends z.Transition{static initClass(){this.traits=["node","transition","mask","visible","active"]}mask(e){let f,h;e?(h=this._shaders.shader(),h.pipe(n.identity("vec4")),h.fan(),h.pipe(e,this.uniforms),h.next(),h.pipe("reveal.mask",this.uniforms),h.end(),h.pipe("float combine(float a, float b) { return min(a, b); }")):
(h=this._shaders.shader(),h.pipe("reveal.mask",this.uniforms));return null!=(f=p(this._inherit("mask"),k=>k.mask(h)))?f:h}}m.Reveal=c;c.initClass()};
shadow$provide[289]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Slide=void 0;z=v(90);class t extends z.Parent{static initClass(){this.traits=["node","slide","visible","active"]}make(){this._helpers.visible.make();this._helpers.active.make();if(!this._inherit("present"))throw Error(`${this.node.toString()} must be placed inside <present></present>`);return this._inherit("present").adopt(this)}unmake(){this._helpers.visible.unmake();this._helpers.active.unmake();return this._inherit("present").unadopt(this)}change(p,
n,c){if(p["slide.early"]||p["slide.late"]||p["slide.steps"]||p["slide.from"]||p["slide.to"])return this.rebuild()}slideLatch(p,n){this.trigger({type:"transition.latch",step:n});if(null!=p)return this._instant(p)}slideStep(p,n){return this.trigger({type:"slide.step",index:p,step:n})}slideRelease(){return this.trigger({type:"transition.release"})}slideReset(){this._instant(!1);return this.trigger({type:"slide.reset"})}_instant(p){this.setVisible(p);return this.setActive(p)}}m.Slide=t;t.initClass()};
shadow$provide[290]=function(z,v,J,m){function t(n,c,e){const f=[],h=n<c;for(c=e?h?c+1:c-1:c;h?n<c:n>c;h?n++:n--)f.push(n);return f}Object.defineProperty(m,"__esModule",{value:!0});m.Step=void 0;z=v(285);class p extends z.Track{static initClass(){this.traits=["node","track","step","trigger","bind"]}make(){super.make();const n=this._inherit("clock");null==this.actualIndex&&(this.actualIndex=null);this.animateIndex=this._animator.make(this._types.number(0),{clock:n,realtime:this.props.realtime,step:c=>
this.actualIndex=c});null==this.lastIndex&&(this.lastIndex=null);this.animateStep=this._animator.make(this._types.number(0),{clock:n,realtime:this.props.realtime,step:c=>{this.playhead=c;return this.update()}});this.stops=null!=this.props.stops?this.props.stops:t(0,this.script.length,!1);this._listen("slide","slide.reset",c=>this.lastIndex=null);return this._listen("slide","slide.step",c=>{var e;let {duration:f}=this.props;const {delay:h,pace:k,speed:g,playback:r,rewind:u,skip:w,trigger:x}=this.props,
B=Math.max(0,Math.min(this.stops.length-1,c.index-x)),E=this.playhead,C=this.stops[B];if(null==this.lastIndex&&x)this.lastIndex=B,this.animateStep.set(C),this.animateIndex.set(B);else{var H=null!=(e=null!=this.actualIndex?this.actualIndex:this.lastIndex)?e:0;e=B-H;var I=this.stops.slice(Math.min(H,B),Math.max(H,B)),K=0;H=I.shift();for(const O of Array.from(I))H===O&&K++,H=O;this.lastIndex=B;c=g*(0<=c.step?1:u);c*=w?Math.max(1,Math.abs(e)-K):1;f+=Math.abs(C-E)*k/c;if(E!==C)return this.animateIndex.immediate(B,
{delay:h,duration:f,ease:r}),this.animateStep.immediate(C,{delay:h,duration:f,ease:r})}})}made(){return this.update()}unmake(){this.animateIndex.dispose();this.animateStep.dispose();this.animateIndex=this.animateStep=null;return super.unmake()}change(n,c,e){return n["step.stops"]||n["step.realtime"]?this.rebuild():super.change(n,c,e)}}m.Step=p;p.initClass()};
shadow$provide[291]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});var t=v(283);Object.keys(t).forEach(function(h){"default"!==h&&"__esModule"!==h&&(h in m&&m[h]===t[h]||Object.defineProperty(m,h,{enumerable:!0,get:function(){return t[h]}}))});var p=v(286);Object.keys(p).forEach(function(h){"default"!==h&&"__esModule"!==h&&(h in m&&m[h]===p[h]||Object.defineProperty(m,h,{enumerable:!0,get:function(){return p[h]}}))});var n=v(287);Object.keys(n).forEach(function(h){"default"!==
h&&"__esModule"!==h&&(h in m&&m[h]===n[h]||Object.defineProperty(m,h,{enumerable:!0,get:function(){return n[h]}}))});var c=v(288);Object.keys(c).forEach(function(h){"default"!==h&&"__esModule"!==h&&(h in m&&m[h]===c[h]||Object.defineProperty(m,h,{enumerable:!0,get:function(){return c[h]}}))});var e=v(289);Object.keys(e).forEach(function(h){"default"!==h&&"__esModule"!==h&&(h in m&&m[h]===e[h]||Object.defineProperty(m,h,{enumerable:!0,get:function(){return e[h]}}))});var f=v(290);Object.keys(f).forEach(function(h){"default"!==
h&&"__esModule"!==h&&(h in m&&m[h]===f[h]||Object.defineProperty(m,h,{enumerable:!0,get:function(){return f[h]}}))})};
shadow$provide[292]=function(z,v,J,m){function t(n,c){return"undefined"!==typeof n&&null!==n?c(n):void 0}Object.defineProperty(m,"__esModule",{value:!0});m.RTT=void 0;z=v(90);class p extends z.Parent{static initClass(){this.traits="node root scene vertex texture rtt source index image".split(" ");this.defaults={minFilter:"linear",magFilter:"linear",type:"unsignedByte"}}init(){return this.rtt=this.scene=this.camera=this.width=this.height=this.history=this.rootSize=this.size=null}indexShader(n){return n}imageShader(n){return this.rtt.shaderRelative(n)}sourceShader(n){return this.rtt.shaderAbsolute(n,
this.history)}getDimensions(){return{items:1,width:this.width,height:this.height,depth:this.history}}getActiveDimensions(){return this.getDimensions()}make(){this.parentRoot=this._inherit("root");this.rootSize=this.parentRoot.getSize();this._listen(this.parentRoot,"root.pre",this.pre);this._listen(this.parentRoot,"root.update",this.update);this._listen(this.parentRoot,"root.render",this.render);this._listen(this.parentRoot,"root.post",this.post);this._listen(this.parentRoot,"root.camera",this.setCamera);
this._listen(this.parentRoot,"root.resize",function(w){return this.resize(w.size)});if(null!=this.rootSize){var {minFilter:n,magFilter:c,type:e}=this.props,{width:f,height:h,history:k,size:g}=this.props,r=g===this.node.attributes["rtt.size"].enum.relative;var u=r?this.rootSize.renderWidth:1;r=r?this.rootSize.renderHeight:1;this.width=Math.round(null!=f?f*u:this.rootSize.renderWidth);this.height=Math.round(null!=h?h*r:this.rootSize.renderHeight);this.history=k;this.aspect=u=this.width/this.height;
null==this.scene&&(this.scene=this._renderables.make("scene"));this.rtt=this._renderables.make("renderToTexture",{scene:this.scene,camera:this._context.defaultCamera,width:this.width,height:this.height,frames:this.history,minFilter:n,magFilter:c,type:e});u=f||h?u:this.rootSize.aspect;r=null!=h?h:this.rootSize.viewHeight;return this.size={renderWidth:this.width,renderHeight:this.height,aspect:u,viewWidth:null!=f?f:this.rootSize.viewWidth,viewHeight:r,pixelRatio:this.height/r}}}made(){this.trigger({type:"source.rebuild"});
if(this.size)return this.trigger({type:"root.resize",size:this.size})}unmake(n){if(null!=this.rtt)return this.rtt.dispose(),n||this.scene.dispose(),this.rtt=this.width=this.height=this.history=null}change(n,c,e){if(c.texture||n["rtt.width"]||n["rtt.height"])return this.rebuild();if(n["root.camera"]||e)return this._unattach(),this._attach(this.props.camera,"camera",this.setCamera,this,this,!0),this.setCamera()}adopt(n){return Array.from(n.renders).map(c=>this.scene.add(c))}unadopt(n){return Array.from(n.renders).map(c=>
this.scene.remove(c))}resize(n){let c,e;this.rootSize=n;({width:e,height:c,size:n}=this.props);n=n===this.node.attributes["rtt.size"].enum.relative;if(!this.rtt||null==e||null==c||n)return this.rebuild()}select(n){return this._root.node.model.select(n,[this.node])}watch(n,c){return this._root.node.model.watch(n,c)}unwatch(n){return this._root.node.model.unwatch(n)}pre(n){return this.trigger(n)}update(n){let c;null!=(c=this.getOwnCamera())&&(c.aspect=this.aspect||1,c.updateProjectionMatrix());return this.trigger(n)}render(n){this.trigger(n);
return null!=this.rtt?this.rtt.render(this.getCamera()):void 0}post(n){return this.trigger(n)}setCamera(){const n=t(this.select(this.props.camera)[0],c=>c.controller);if(this.camera!==n)return this.camera=n,this.rtt.camera=this.getCamera(),this.trigger({type:"root.camera"});if(!this.camera)return this.trigger({type:"root.camera"})}getOwnCamera(){return null!=this.camera?this.camera.getCamera():void 0}getCamera(){let n;return null!=(n=this.getOwnCamera())?n:this._inherit("root").getCamera()}vertex(n,
c){return 2===c?n.pipe("view.position"):3===c?n.pipe("root.position"):n}}m.RTT=p;p.initClass()};
shadow$provide[293]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Compose=void 0;z=v(89);class t extends z.Primitive{static initClass(){this.traits="node bind object visible operator style compose".split(" ");this.defaults={zWrite:!1,zTest:!1,color:"#ffffff"}}init(){return this.compose=null}resize(){if(this.compose&&this.bind.source){var p=this.bind.source.getActiveDimensions(),{width:n}=p;({height:p}=p);return this.remapUVScale.set(n,p)}}make(){this._helpers.bind.make([{to:"operator.source",
trait:"source"}]);if(null!=this.bind.source){var p={remapUVScale:this._attributes.make(this._types.vec2())};this.remapUVScale=p.remapUVScale.value;var n=this._shaders.shader(),{alpha:c}=this.props;this.bind.source.is("image")?(n.pipe("screen.pass.uv",p),n=this.bind.source.imageShader(n)):(n.pipe("screen.map.xy",p),n=this.bind.source.sourceShader(n));c||n.pipe("color.opaque");p=this._helpers.style.uniforms();this.compose=this._renderables.make("screen",{map:n,uniforms:p,linear:!0});this._helpers.visible.make();
return this._helpers.object.make([this.compose])}}made(){return this.resize()}unmake(){this._helpers.bind.unmake();this._helpers.visible.unmake();return this._helpers.object.unmake()}change(p,n,c){if(p["operator.source"]||p["compose.alpha"])return this.rebuild()}}m.Compose=t;t.initClass()};
shadow$provide[294]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});var t=v(292);Object.keys(t).forEach(function(n){"default"!==n&&"__esModule"!==n&&(n in m&&m[n]===t[n]||Object.defineProperty(m,n,{enumerable:!0,get:function(){return t[n]}}))});var p=v(293);Object.keys(p).forEach(function(n){"default"!==n&&"__esModule"!==n&&(n in m&&m[n]===p[n]||Object.defineProperty(m,n,{enumerable:!0,get:function(){return p[n]}}))})};
shadow$provide[295]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.View=void 0;z=v(259);class t extends z.Transform{static initClass(){this.traits=["node","object","visible","view","vertex"]}make(){return this._helpers.visible.make()}unmake(){return this._helpers.visible.unmake()}axis(p){return this.props.range[p-1]}}m.View=t;t.initClass()};
shadow$provide[296]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.Cartesian=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(96));z=v(295);class n extends z.View{static initClass(){this.traits="node object visible view view3 vertex".split(" ")}make(){super.make();this.uniforms={viewMatrix:this._attributes.make(this._types.mat4())};this.viewMatrix=this.uniforms.viewMatrix.value;this.composer=p.transformComposer()}unmake(){super.unmake();delete this.viewMatrix;delete this.objectMatrix;
delete this.uniforms}change(c,e,f){if(e.view||e.view3||f){e=this.props.position;f=this.props.scale;var h=this.props.quaternion,k=this.props.rotation,g=this.props.range,r=this.props.eulerOrder,{x:u}=g[0],w=g[1].x,x=g[2].x,B=g[0].y-u||1,E=g[1].y-w||1;g=g[2].y-x||1;this.viewMatrix.set(2/B,0,0,-(2*u+B)/B,0,2/E,0,-(2*w+E)/E,0,0,2/g,-(2*x+g)/g,0,0,0,1);e=this.composer(e,k,h,f,null,r);this.viewMatrix.multiplyMatrices(e,this.viewMatrix);c["view.range"]&&this.trigger({type:"view.range"})}}vertex(c,e){1===
e&&c.pipe("cartesian.position",this.uniforms);return super.vertex(c,e)}}m.Cartesian=n;n.initClass()};
shadow$provide[297]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Cartesian4=void 0;z=v(295);class t extends z.View{static initClass(){this.traits="node object visible view view4 vertex".split(" ")}make(){super.make();this.uniforms={basisOffset:this._attributes.make(this._types.vec4()),basisScale:this._attributes.make(this._types.vec4())};this.basisScale=this.uniforms.basisScale.value;return this.basisOffset=this.uniforms.basisOffset.value}unmake(){super.unmake();delete this.basisScale;
delete this.basisOffset;return delete this.uniforms}change(p,n,c){if(n.view||n.view4||c){n=this.props.position;c=this.props.scale;var e=this.props.range,{x:f}=e[0],h=e[1].x,k=e[2].x,g=e[3].x,r=e[0].y-f||1,u=e[1].y-h||1,w=e[2].y-k||1;e=e[3].y-g||1;var x=function(B,E){B.x*=E.x;B.y*=E.y;B.z*=E.z;return B.w*=E.w};this.basisScale.set(2/r,2/u,2/w,2/e);this.basisOffset.set(-(2*f+r)/r,-(2*h+u)/u,-(2*k+w)/w,-(2*g+e)/e);x(this.basisScale,c);x(this.basisOffset,c);this.basisOffset.add(n);if(p["view.range"])return this.trigger({type:"view.range"})}}vertex(p,
n){1===n&&p.pipe("cartesian4.position",this.uniforms);return super.vertex(p,n)}}m.Cartesian4=t;t.initClass()};
shadow$provide[298]=function(z,v,J,m){function t(h){if("function"!==typeof WeakMap)return null;var k=new WeakMap,g=new WeakMap;return(t=function(r){return r?g:k})(h)}function p(h,k){if(!k&&h&&h.__esModule)return h;if(null===h||"object"!==typeof h&&"function"!==typeof h)return{default:h};if((k=t(k))&&k.has(h))return k.get(h);var g={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor,u;for(u in h)if("default"!==u&&Object.prototype.hasOwnProperty.call(h,u)){var w=r?Object.getOwnPropertyDescriptor(h,
u):null;w&&(w.get||w.set)?Object.defineProperty(g,u,w):g[u]=h[u]}g.default=h;k&&k.set(h,g);return g}Object.defineProperty(m,"__esModule",{value:!0});m.Polar=void 0;var n=p(v(232)),c=p(v(96)),e=v(2);z=v(295);class f extends z.View{static initClass(){this.traits="node object visible view view3 polar vertex".split(" ")}make(){super.make();const {types:h}=this._attributes;this.uniforms={polarBend:this.node.attributes["polar.bend"],polarHelix:this.node.attributes["polar.helix"],polarFocus:this._attributes.make(h.number()),
polarAspect:this._attributes.make(h.number()),viewMatrix:this._attributes.make(h.mat4())};this.viewMatrix=this.uniforms.viewMatrix.value;this.composer=c.transformComposer();return this.aspect=1}unmake(){super.unmake();delete this.viewMatrix;delete this.objectMatrix;delete this.aspect;return delete this.uniforms}change(h,k,g){var r;if(k.view||k.view3||k.polar||g){this.helix=this.props.helix;this.bend=r=this.props.bend;this.focus=g=0<r?1/r-1:0;var u=this.props.position,w=this.props.scale,x=this.props.quaternion,
B=this.props.rotation,E=this.props.range,C=this.props.eulerOrder,{x:H}=E[0],I=E[1].x,K=E[2].x,O=E[0].y-H||1,Q=E[1].y-I||1;E=E[2].y-K||1;var W=w.x;var R=w.y,X=0<O?1:-1;[I,Q]=Array.from(n.recenterAxis(I,Q,r));r=O+(Math.abs(Q)*X-O)*r;this.aspect=W=Math.abs(r/W/(Q/R));this.uniforms.polarFocus.value=g;this.uniforms.polarAspect.value=W;this.viewMatrix.set(2/r,0,0,-(2*H+O)/O,0,2/Q,0,-(2*I+Q)/Q,0,0,2/E,-(2*K+E)/E,0,0,0,1);g=this.composer(u,B,x,w,null,C);this.viewMatrix.multiplyMatrices(g,this.viewMatrix);
(h["view.range"]||k.polar)&&this.trigger({type:"view.range"})}}vertex(h,k){1===k&&h.pipe("polar.position",this.uniforms);return super.vertex(h,k)}axis(h){var k=this.props.range[h-1];let g=k.x;k=k.y;2===h&&0<this.bend&&(k=Math.max(Math.abs(k),Math.abs(g)),g=Math.max(-this.focus/this.aspect,g));return new e.Vector2(g,k)}}m.Polar=f;f.initClass()};
shadow$provide[299]=function(z,v,J,m){function t(h){if("function"!==typeof WeakMap)return null;var k=new WeakMap,g=new WeakMap;return(t=function(r){return r?g:k})(h)}function p(h,k){if(!k&&h&&h.__esModule)return h;if(null===h||"object"!==typeof h&&"function"!==typeof h)return{default:h};if((k=t(k))&&k.has(h))return k.get(h);var g={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor,u;for(u in h)if("default"!==u&&Object.prototype.hasOwnProperty.call(h,u)){var w=r?Object.getOwnPropertyDescriptor(h,
u):null;w&&(w.get||w.set)?Object.defineProperty(g,u,w):g[u]=h[u]}g.default=h;k&&k.set(h,g);return g}Object.defineProperty(m,"__esModule",{value:!0});m.Spherical=void 0;var n=p(v(232)),c=p(v(96)),e=v(2);z=v(295);class f extends z.View{static initClass(){this.traits="node object visible view view3 spherical vertex".split(" ")}make(){super.make();this.uniforms={sphericalBend:this.node.attributes["spherical.bend"],sphericalFocus:this._attributes.make(this._types.number()),sphericalAspectX:this._attributes.make(this._types.number()),
sphericalAspectY:this._attributes.make(this._types.number()),sphericalScaleY:this._attributes.make(this._types.number()),viewMatrix:this._attributes.make(this._types.mat4())};this.viewMatrix=this.uniforms.viewMatrix.value;this.composer=c.transformComposer();return this.aspectY=this.aspectX=1}unmake(){super.unmake();delete this.viewMatrix;delete this.objectMatrix;delete this.aspectX;delete this.aspectY;return delete this.uniforms}change(h,k,g){let r;if(k.view||k.view3||k.spherical||g){this.bend=g=
this.props.bend;this.focus=r=0<g?1/g-1:0;var u=this.props.position,w=this.props.scale,x=this.props.quaternion,B=this.props.rotation,E=this.props.range,C=this.props.eulerOrder,{x:H}=E[0],I=E[1].x,K=E[2].x,O=E[0].y-H||1,Q=E[1].y-I||1;E=E[2].y-K||1;var W=w.x;var R=w.y;var X=w.z;[I,Q]=Array.from(n.recenterAxis(I,Q,g));[K,E]=Array.from(n.recenterAxis(K,E,g));var ca=Math.abs(E),ka=O+(ca*(0<O?1:-1)-O)*g;ca=Q+(ca*(0<Q?1:-1)-Q)*g;var la=E/X;this.aspectX=X=Math.abs(ka/W/la);this.aspectY=la=Math.abs(ca/R/la/
X);this.scaleY=W=Math.min(la/g,1+(Q/O*W/R*2-1)*g);this.uniforms.sphericalBend.value=g;this.uniforms.sphericalFocus.value=r;this.uniforms.sphericalAspectX.value=X;this.uniforms.sphericalAspectY.value=la;this.uniforms.sphericalScaleY.value=W;this.viewMatrix.set(2/ka,0,0,-(2*H+O)/O,0,2/ca,0,-(2*I+Q)/Q,0,0,2/E,-(2*K+E)/E,0,0,0,1);g=this.composer(u,B,x,w,null,C);this.viewMatrix.multiplyMatrices(g,this.viewMatrix);if(h["view.range"]||k.spherical)return this.trigger({type:"view.range"})}}vertex(h,k){1===
k&&h.pipe("spherical.position",this.uniforms);return super.vertex(h,k)}axis(h){var k=this.props.range[h-1];let g=k.x;k=k.y;3===h&&0<this.bend&&(k=Math.max(Math.abs(k),Math.abs(g)),g=Math.max(-this.focus/this.aspectX+.001,g));return new e.Vector2(g,k)}}m.Spherical=f;f.initClass()};
shadow$provide[300]=function(z,v,J,m){function t(f){if("function"!==typeof WeakMap)return null;var h=new WeakMap,k=new WeakMap;return(t=function(g){return g?k:h})(f)}function p(f,h){if(!h&&f&&f.__esModule)return f;if(null===f||"object"!==typeof f&&"function"!==typeof f)return{default:f};if((h=t(h))&&h.has(f))return h.get(f);var k={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,r;for(r in f)if("default"!==r&&Object.prototype.hasOwnProperty.call(f,r)){var u=g?Object.getOwnPropertyDescriptor(f,
r):null;u&&(u.get||u.set)?Object.defineProperty(k,r,u):k[r]=f[r]}k.default=f;h&&h.set(f,k);return k}Object.defineProperty(m,"__esModule",{value:!0});m.Stereographic=void 0;var n=p(v(232)),c=p(v(96));z=v(295);class e extends z.View{static initClass(){this.traits="node object visible view view3 stereographic vertex".split(" ")}make(){super.make();this.uniforms={stereoBend:this.node.attributes["stereographic.bend"],viewMatrix:this._attributes.make(this._types.mat4())};this.viewMatrix=this.uniforms.viewMatrix.value;
return this.composer=c.transformComposer()}unmake(){super.unmake();delete this.viewMatrix;delete this.rotationMatrix;return delete this.uniforms}change(f,h,k){if(h.view||h.view3||h.stereographic||k){this.bend=k=this.props.bend;var g=this.props.position,r=this.props.scale,u=this.props.quaternion,w=this.props.rotation,x=this.props.range,B=this.props.eulerOrder,{x:E}=x[0],C=x[1].x,H=x[2].x,I=x[0].y-E||1,K=x[1].y-C||1;x=x[2].y-H||1;[H,x]=Array.from(n.recenterAxis(H,x,k,1));this.uniforms.stereoBend.value=
k;this.viewMatrix.set(2/I,0,0,-(2*E+I)/I,0,2/K,0,-(2*C+K)/K,0,0,2/x,-(2*H+x)/x,0,0,0,1);k=this.composer(g,w,u,r,null,B);this.viewMatrix.multiplyMatrices(k,this.viewMatrix);if(f["view.range"]||h.stereographic)return this.trigger({type:"view.range"})}}vertex(f,h){1===h&&f.pipe("stereographic.position",this.uniforms);return super.vertex(f,h)}}m.Stereographic=e;e.initClass()};
shadow$provide[301]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.Stereographic4=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(232));z=v(295);class n extends z.View{static initClass(){this.traits="node object visible view view4 stereographic vertex".split(" ")}make(){super.make();this.uniforms={basisOffset:this._attributes.make(this._types.vec4()),basisScale:this._attributes.make(this._types.vec4()),stereoBend:this.node.attributes["stereographic.bend"]};this.basisScale=this.uniforms.basisScale.value;
this.basisOffset=this.uniforms.basisOffset.value}unmake(){super.unmake();delete this.basisScale;delete this.basisOffset;delete this.uniforms}change(c,e,f){if(e.view||e.view4||e.stereographic||f){this.bend=f=this.props.bend;var h=this.props.position,k=this.props.scale,g=this.props.range,{x:r}=g[0],u=g[1].x,w=g[2].x,x=g[3].x,B=g[0].y-r||1,E=g[1].y-u||1,C=g[2].y-w||1;g=g[3].y-x||1;var H=function(I,K){I.x*=K.x;I.y*=K.y;I.z*=K.z;I.w*=K.w};[x,g]=Array.from(p.recenterAxis(x,g,f,1));this.basisScale.set(2/
B,2/E,2/C,2/g);this.basisOffset.set(-(2*r+B)/B,-(2*u+E)/E,-(2*w+C)/C,-(2*x+g)/g);H(this.basisScale,k);H(this.basisOffset,k);this.basisOffset.add(h);(c["view.range"]||e.stereographic)&&this.trigger({type:"view.range"})}}vertex(c,e){1===e&&c.pipe("stereographic4.position",this.uniforms);return super.vertex(c,e)}}m.Stereographic4=n;n.initClass()};
shadow$provide[302]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});var t=v(295);Object.keys(t).forEach(function(k){"default"!==k&&"__esModule"!==k&&(k in m&&m[k]===t[k]||Object.defineProperty(m,k,{enumerable:!0,get:function(){return t[k]}}))});var p=v(296);Object.keys(p).forEach(function(k){"default"!==k&&"__esModule"!==k&&(k in m&&m[k]===p[k]||Object.defineProperty(m,k,{enumerable:!0,get:function(){return p[k]}}))});var n=v(297);Object.keys(n).forEach(function(k){"default"!==
k&&"__esModule"!==k&&(k in m&&m[k]===n[k]||Object.defineProperty(m,k,{enumerable:!0,get:function(){return n[k]}}))});var c=v(298);Object.keys(c).forEach(function(k){"default"!==k&&"__esModule"!==k&&(k in m&&m[k]===c[k]||Object.defineProperty(m,k,{enumerable:!0,get:function(){return c[k]}}))});var e=v(299);Object.keys(e).forEach(function(k){"default"!==k&&"__esModule"!==k&&(k in m&&m[k]===e[k]||Object.defineProperty(m,k,{enumerable:!0,get:function(){return e[k]}}))});var f=v(300);Object.keys(f).forEach(function(k){"default"!==
k&&"__esModule"!==k&&(k in m&&m[k]===f[k]||Object.defineProperty(m,k,{enumerable:!0,get:function(){return f[k]}}))});var h=v(301);Object.keys(h).forEach(function(k){"default"!==k&&"__esModule"!==k&&(k in m&&m[k]===h[k]||Object.defineProperty(m,k,{enumerable:!0,get:function(){return h[k]}}))})};
shadow$provide[303]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.Shader=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(100));z=v(89);class n extends z.Primitive{static initClass(){this.traits=["node","bind","shader"];this.freeform=!0}init(){return this.shader=null}make(){const {language:c,code:e}=this.props;if("glsl"!==c)throw Error("GLSL required");this._helpers.bind.make([{to:"shader.sources",trait:"source",multiple:!0}]);var f=this._shaders.fetch(e);const h=this._types,
k={},g=r=>{switch(r){case "i":return h.int();case "f":return h.number();case "v2":return h.vec2();case "v3":return h.vec3();case "v4":return h.vec4();case "m3":return h.mat3();case "m4":return h.mat4();case "t":return h.object();default:return r=r.split(""),"v"===r.pop()?h.array(g(r.join(""))):null}};for(const r of Array.from(f._signatures.uniform))if(f=g(r.type))k[r.name]=f;return this.reconfigure({props:{uniform:k}})}made(){return this.trigger({type:"source.rebuild"})}unmake(){return this.shader=
null}change(c,e,f){if(c["shader.uniforms"]||c["shader.code"]||c["shader.language"])return this.rebuild()}shaderBind(c){let e,f;null==c&&(c={});const {code:h,indices:k,channels:g}=this.props;for(r in this.node.attributes)f=this.node.attributes[r],null!=f.type&&null!=f.short&&"uniform"===f.ns&&null==c[f.short]&&(c[f.short]=f);if(null!=(e=this.props.uniforms))for(r in e)f=e[r],c[r]=f;var r=this._shaders.shader();if(null!=this.bind.sources)for(const u of Array.from(this.bind.sources))r.callback(),4!=
k&&r.pipe(p.extendVec(k,4)),r.pipe(u.sourceShader(this._shaders.shader())),4!=g&&r.pipe(p.truncateVec(4,g)),r.join();return r.pipe(h,c)}}m.Shader=n;n.initClass()};
shadow$provide[304]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});var t=v(303);Object.keys(t).forEach(function(p){"default"!==p&&"__esModule"!==p&&(p in m&&m[p]===t[p]||Object.defineProperty(m,p,{enumerable:!0,get:function(){return t[p]}}))})};
shadow$provide[305]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Classes=void 0;z=v(95);J=v(98);var t=v(234),p=v(245),n=v(248),c=v(255),e=v(258),f=v(266),h=v(281),k=v(291),g=v(294),r=v(302);v=v(304);m.Classes={axis:p.Axis,face:p.Face,grid:p.Grid,line:p.Line,point:p.Point,strip:p.Strip,surface:p.Surface,ticks:p.Ticks,vector:p.Vector,view:r.View,cartesian:r.Cartesian,cartesian4:r.Cartesian4,polar:r.Polar,spherical:r.Spherical,stereographic:r.Stereographic,stereographic4:r.Stereographic4,
transform:f.Transform3,transform4:f.Transform4,vertex:f.Vertex,fragment:f.Fragment,layer:f.Layer,mask:f.Mask,array:t.Array_,interval:t.Interval,matrix:t.Matrix,area:t.Area,voxel:t.Voxel,volume:t.Volume,scale:t.Scale,latch:t.Latch,html:n.HTML,dom:n.DOM,text:c.Text,format:c.Format,label:c.Label,retext:c.Retext,clamp:h.Clamp,grow:h.Grow,join:h.Join,lerp:h.Lerp,memo:h.Memo,readback:h.Readback,resample:h.Resample,repeat:h.Repeat,reverse:h.Reverse,swizzle:h.Swizzle,spread:h.Spread,split:h.Split,slice:h.Slice,
subdivide:h.Subdivide,transpose:h.Transpose,group:z.Group,inherit:z.Inherit,root:z.Root,unit:z.Unit,shader:v.Shader,camera:J.Camera,rtt:g.RTT,compose:g.Compose,clock:e.Clock,now:e.Now,move:k.Move,play:k.Play,present:k.Present,reveal:k.Reveal,slide:k.Slide,step:k.Step}};
shadow$provide[306]=function(z,v,J,m){function t(g){if("function"!==typeof WeakMap)return null;var r=new WeakMap,u=new WeakMap;return(t=function(w){return w?u:r})(g)}function p(g,r){if(!r&&g&&g.__esModule)return g;if(null===g||"object"!==typeof g&&"function"!==typeof g)return{default:g};if((r=t(r))&&r.has(g))return r.get(g);var u={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor,x;for(x in g)if("default"!==x&&Object.prototype.hasOwnProperty.call(g,x)){var B=w?Object.getOwnPropertyDescriptor(g,
x):null;B&&(B.get||B.set)?Object.defineProperty(u,x,B):u[x]=g[x]}u.default=g;r&&r.set(g,u);return u}function n(g,r,u){const w=[],x=g<r;for(r=u?x?r+1:r-1:r;x?g<r:g>r;x?g++:g--)w.push(g);return w}function c(g,r,u){if("undefined"!==typeof g&&null!==g&&"function"===typeof g[r])return u(g,r)}Object.defineProperty(m,"__esModule",{value:!0});m.Types=void 0;var e=p(v(99)),f=p(v(235)),h=v(2);const k=function(g){for(const r in g)g[r]=(u=>function(){const w=u.apply(u,arguments);null==w.validate&&(w.validate=
x=>null!=x);null==w.equals&&(w.equals=(x,B)=>x===B);null==w.clone&&(w.clone=function(x){let B;return null!=(B=c(x,"clone",E=>E.clone()))?B:x});return w})(g[r]);return g}({array(g,r,u=null){const w=g.lerp?function(B,E,C,H){const I=Math.min(B.length,E.length);for(let K=0,O=I,Q=0<=O;Q?K<O:K>O;Q?K++:K--)C[K]=g.lerp(B[K],E[K],C[K],H);return C}:void 0,x=g.op?function(B,E,C,H){const I=Math.min(B.length,E.length);for(let K=0,O=I,Q=0<=O;Q?K<O:K>O;Q?K++:K--)C[K]=g.op(B[K],E[K],C[K],H);return C}:void 0;null==
u||u instanceof Array||(u=[u]);return{uniform(){if(g.uniform)return g.uniform()+"v"},make(){return null!=u?u.slice():r?n(0,r,!1).map(B=>g.make()):[]},validate(B,E,C){B instanceof Array||(B=[B]);var H=E.length=r?r:B.length;for(let I=0,K=H,O=0<=K;O?I<K:I>K;O?I++:I--)H=null!=B[I]?B[I]:g.make(),E[I]=g.validate(H,E[I],C);return E},equals(B,E){var C=B.length;const H=E.length;if(C!==H)return!1;C=Math.min(C,H);for(let I=0,K=C,O=0<=K;O?I<K:I>K;O?I++:I--)if("function"!==typeof g.equals||!g.equals(B[I],E[I]))return!1;
return!0},lerp:w,op:x,clone(B){return Array.from(B).map(E=>g.clone(E))}}},letters(g,r,u=null){if(null!=u){u===""+u&&(u=u.split(""));for(let x=0;x<u.length;x++){const B=u[x];u[x]=g.validate(B,B)}}const w=k.array(g,r,u);return{uniform(){return w.uniform()},make(){return w.make()},validate(x,B,E){x===""+x&&(x=x.split(""));return w.validate(x,B,E)},equals(x,B){return w.equals(x,B)},clone:w.clone}},nullable(g,r){null==r&&(r=!1);let u=r?g.make():null;return{make(){return u},validate(w,x,B){if(null===w)return w;
null===x&&(x=g.make());return g.validate(w,x,B)},uniform(){return"function"===typeof g.uniform?g.uniform():void 0},equals(w,x){let B;const E=null===w,C=null===x;return E&&C?!0:E^C?!1:null!=(B="function"===typeof g.equals?g.equals(w,x):void 0)?B:w===x},lerp:g.lerp?function(w,x,B,E){if(null===w||null===x)return.5>E?w:x;null==B&&(B=g.make());u=g.lerp(w,x,B,E);return B}:void 0,op:g.op?function(w,x,B,E){if(null===w||null===x)return null;null==B&&(B=g.make());return u=g.op(w,x,B,E)}:void 0,emitter:g.emitter?
function(w,x){return null==x?w:null==w?x:g.emitter(w,x)}:void 0}},enum(g,r,u){let w;null==r&&(r=[]);null==u&&(u={});let x=0;const B={};for(w of Array.from(r))w!==+w&&null==u[w]&&(u[w]=x++);for(w of Array.from(r))w===+w&&(B[w]=w);for(w in u)x=u[w],B[x]=!0;null==B[g]&&(g=u[g]);return{enum(){return u},make(){return g},validate(E,C,H){E=B[E]?E:u[E];return null!=E?E:H()}}},enumber(g,r,u){null==u&&(u={});const w=k.enum(g,r,u);return{enum:w.enum,uniform(){return"f"},make(){let x;return null!=(x=w.make())?
x:+g},validate(x,B,E){return x===+x?x:w.validate(x,B,E)},op(x,B,E,C){return C(x,B)}}},select(g){null==g&&(g="\x3c");g;return{make(){return g},validate(r,u,w){return"string"===typeof r||"object"===typeof r?r:w()}}},bool(g){g=!!g;return{uniform(){return"f"},make(){return g},validate(r,u,w){return!!r}}},int(g){null==g&&(g=0);g=+Math.round(g);return{uniform(){return"i"},make(){return g},validate(r,u,w){let x;return r!==(x=+r)?w():Math.round(x)||0},op(r,u,w,x){return x(r,u)}}},round(g){null==g&&(g=0);
g=+Math.round(g);return{uniform(){return"f"},make(){return g},validate(r,u,w){let x;return r!==(x=+r)?w():Math.round(x)||0},op(r,u,w,x){return x(r,u)}}},number(g){null==g&&(g=0);return{uniform(){return"f"},make(){return+g},validate(r,u,w){let x;return r!==(x=+r)?w():x||0},op(r,u,w,x){return x(r,u)}}},positive(g,r){null==r&&(r=!1);return{uniform:g.uniform,make:g.make,validate(u,w,x){u=g.validate(u,w,x);return 0>u||r&&0>=u?x():u},op(u,w,x,B){return B(u,w)}}},string(g){null==g&&(g="");return{make(){return""+
g},validate(r,u,w){let x;return r!==(x=""+r)?w():x}}},func(){return{make(){return function(){}},validate(g,r,u){return"function"===typeof g?g:u()}}},emitter(){return{make(){return g=>g(1,1,1,1)},validate(g,r,u){return"function"===typeof g?g:u()},emitter(g,r){return e.getLerpEmitter(g,r)}}},object(g){return{make(){return null!=g?g:{}},validate(r,u,w){return"object"===typeof r?r:w()},clone(r){return JSON.parse(JSON.stringify(r))}}},timestamp(g=null){"string"===typeof g&&(g=Date.parse(g));return{uniform(){return"f"},
make(){return null!=g?g:+new Date},validate(r,u,w){r=Date.parse(r);return r!==+r?w():r},op(r,u,w,x){return x(r,u)}}},vec2(g,r){null==g&&(g=0);null==r&&(r=0);const u=[g,r];return{uniform(){return"v2"},make(){return new h.Vector2(g,r)},validate(w,x,B){w===+w&&(w=[w]);if(null===w||void 0===w?0:w.isVector2)x.copy(w);else if(w instanceof Array)w=w.concat(u.slice(w.length)),x.set.apply(x,w);else if(null!=w)x.set(null!=w.x?w.x:g,null!=w.y?w.y:r);else return B();return x},equals(w,x){return w.x===x.x&&w.y===
x.y},op(w,x,B,E){B.x=E(w.x,x.x);B.y=E(w.y,x.y);return B}}},ivec2(g,r){null==g&&(g=0);null==r&&(r=0);g=k.vec2(g,r);const {validate:u}=g;g.validate=function(w,x,B){u(w,x,B);x.x=Math.round(x.x);x.y=Math.round(x.y);return x};return g},vec3(g,r,u){null==g&&(g=0);null==r&&(r=0);null==u&&(u=0);const w=[g,r,u];return{uniform(){return"v3"},make(){return new h.Vector3(g,r,u)},validate(x,B,E){x===+x&&(x=[x]);if(null===x||void 0===x?0:x.isVector3)B.copy(x);else if(x instanceof Array)x=x.concat(w.slice(x.length)),
B.set.apply(B,x);else if(null!=x)B.set(null!=x.x?x.x:g,null!=x.y?x.y:r,null!=x.z?x.z:u);else return E();return B},equals(x,B){return x.x===B.x&&x.y===B.y&&x.z===B.z},op(x,B,E,C){E.x=C(x.x,B.x);E.y=C(x.y,B.y);E.z=C(x.z,B.z);return E}}},ivec3(g,r,u){null==g&&(g=0);null==r&&(r=0);null==u&&(u=0);g=k.vec3(g,r,u);const {validate:w}=g;g.validate=function(x,B,E){w(x,B,E);B.x=Math.round(B.x);B.y=Math.round(B.y);B.z=Math.round(B.z);return B};return g},vec4(g,r,u,w){null==g&&(g=0);null==r&&(r=0);null==u&&(u=
0);null==w&&(w=0);const x=[g,r,u,w];return{uniform(){return"v4"},make(){return new h.Vector4(g,r,u,w)},validate(B,E,C){B===+B&&(B=[B]);if(null===B||void 0===B?0:B.isVector4)E.copy(B);else if(B instanceof Array)B=B.concat(x.slice(B.length)),E.set.apply(E,B);else if(null!=B)E.set(null!=B.x?B.x:g,null!=B.y?B.y:r,null!=B.z?B.z:u,null!=B.w?B.w:w);else return C();return E},equals(B,E){return B.x===E.x&&B.y===E.y&&B.z===E.z&&B.w===E.w},op(B,E,C,H){C.x=H(B.x,E.x);C.y=H(B.y,E.y);C.z=H(B.z,E.z);C.w=H(B.w,E.w);
return C}}},ivec4(g,r,u,w){null==g&&(g=0);null==r&&(r=0);null==u&&(u=0);null==w&&(w=0);g=k.vec4(g,r,u,w);const {validate:x}=g;g.validate=function(B,E,C){x(B,E,C);E.x=Math.round(E.x);E.y=Math.round(E.y);E.z=Math.round(E.z);E.w=Math.round(E.w);return E};return g},mat3(g,r,u,w,x,B,E,C,H){null==g&&(g=1);null==r&&(r=0);null==u&&(u=0);null==w&&(w=0);null==x&&(x=1);null==B&&(B=0);null==E&&(E=0);null==C&&(C=0);null==H&&(H=1);const I=[g,r,u,w,x,B,E,C,H];return{uniform(){return"m4"},make(){const K=new h.Matrix3;
K.set(g,r,u,w,x,B,E,C,H);return K},validate(K,O,Q){if(null===K||void 0===K?0:K.isMatrix3)O.copy(K);else if(K instanceof Array)K=K.concat(I.slice(K.length)),O.set.apply(O,K);else return Q();return O}}},mat4(g,r,u,w,x,B,E,C,H,I,K,O,Q,W,R,X){null==g&&(g=1);null==r&&(r=0);null==u&&(u=0);null==w&&(w=0);null==x&&(x=0);null==B&&(B=1);null==E&&(E=0);null==C&&(C=0);null==H&&(H=0);null==I&&(I=0);null==K&&(K=1);null==O&&(O=0);null==Q&&(Q=0);null==W&&(W=0);null==R&&(R=0);null==X&&(X=1);const ca=[g,r,u,w,x,B,
E,C,H,I,K,O,Q,W,R,X];return{uniform(){return"m4"},make(){const ka=new h.Matrix4;ka.set(g,r,u,w,x,B,E,C,H,I,K,O,Q,W,R,X);return ka},validate(ka,la,Aa){if(null===ka||void 0===ka?0:ka.isMatrix4)la.copy(ka);else if(ka instanceof Array)ka=ka.concat(ca.slice(ka.length)),la.set.apply(la,ka);else return Aa();return la}}},quat(g,r,u,w){null==g&&(g=0);null==r&&(r=0);null==u&&(u=0);null==w&&(w=1);const x=k.vec4(g,r,u,w);return{uniform(){return"v4"},make(){return new h.Quaternion},validate(B,E,C){(null===B||
void 0===B?0:B.isQuaternion)?E.copy(B):E=x.validate(B,E,C);E.normalize();return E},equals(B,E){return B.x===E.x&&B.y===E.y&&B.z===E.z&&B.w===E.w},op(B,E,C,H){C.x=H(B.x,E.x);C.y=H(B.y,E.y);C.z=H(B.z,E.z);C.w=H(B.w,E.w);C.normalize();return C},lerp(B,E,C,H){C.slerpQuaternions?C.slerpQuaternions(B,E,H):h.Quaternion.slerp(B,E,C,H);return C}}},color(g,r,u){null==g&&(g=.5);null==r&&(r=.5);null==u&&(u=.5);const w=[g,r,u];return{uniform(){return"c"},make(){return new h.Color(g,r,u)},validate(x,B,E){x===""+
x?x=(new h.Color).setStyle(x):x===+x&&(x=new h.Color(x));if(null===x||void 0===x?0:x.isColor)B.copy(x);else if(x instanceof Array)x=x.concat(w.slice(x.length)),B.setRGB.apply(B,x);else if(null!=x)B.set(null!=x.r?x.r:g,null!=x.g?x.g:r,null!=x.b?x.b:u);else return E();return B},equals(x,B){return x.r===B.r&&x.g===B.g&&x.b===B.b},op(x,B,E,C){E.r=C(x.r,B.r);E.g=C(x.g,B.g);E.b=C(x.b,B.b);return E}}},axis(g,r){let u;null==g&&(g=1);null==r&&(r=!1);const w={x:1,y:2,z:3,w:4,W:1,H:2,D:3,I:4,zero:0,null:0,width:1,
height:2,depth:3,items:4},x=r?[0,1,2,3,4]:[1,2,3,4];null!=(u=w[g])&&(g=u);return{make(){return g},validate(B,E,C){let H;null!=(u=w[B])&&(B=u);B=null!=(H=Math.round(B))?H:0;return Array.from(x).includes(B)?B:C()}}},transpose(g){null==g&&(g=[1,2,3,4]);const r=k.letters(k.axis(null,!1),0,g),u=k.letters(k.axis(null,!1),4,g);return{make(){return u.make()},validate(w,x,B){let E=[1,2,3,4];r.validate(w,E,B);4>E.length&&(w=[1,2,3,4].filter(C=>-1===E.indexOf(C)),E=E.concat(w));return 0>Array.from(E).map((C,
H)=>E.indexOf(C)===H).indexOf(!1)?u.validate(E,x,B):B()},equals:u.equals,clone:u.clone}},swizzle(g,r=null){null==g&&(g=[1,2,3,4]);null==r&&(r=g.length);g=g.slice(0,r);const u=k.letters(k.axis(null,!1),0,g),w=k.letters(k.axis(null,!0),r,g);return{make(){return w.make()},validate(x,B,E){let C=g.slice();u.validate(x,C,E);C.length<r&&(C=C.concat([0,0,0,0]).slice(0,r));return w.validate(C,B,E)},equals:w.equals,clone:w.clone}},classes(){const g=k.array(k.string());return{make(){return g.make()},validate(r,
u,w){r===""+r&&(r=r.split(" "));r=r.filter(x=>!!x.length);return g.validate(r,u,w)},equals:g.equals,clone:g.clone}},blending(g){null==g&&(g="normal");return k.enum(g,"no normal add subtract multiply custom".split(" "))},filter(g){null==g&&(g="nearest");return k.enum(g,[],{nearest:h.NearestFilter,nearestMipMapNearest:h.NearestMipMapNearestFilter,nearestMipMapLinear:h.NearestMipMapLinearFilter,linear:h.LinearFilter,linearMipMapNearest:h.LinearMipMapNearestFilter,linearMipmapLinear:h.LinearMipMapLinearFilter})},
type(g){null==g&&(g="unsignedByte");return k.enum(g,[],{unsignedByte:h.UnsignedByteType,byte:h.ByteType,short:h.ShortType,unsignedShort:h.UnsignedShortType,int:h.IntType,unsignedInt:h.UnsignedIntType,float:h.FloatType})},scale(g){null==g&&(g="linear");return k.enum(g,["linear","log"])},mapping(g){null==g&&(g="relative");return k.enum(g,["relative","absolute"])},indexing(g){null==g&&(g="original");return k.enum(g,["original","final"])},shape(g){null==g&&(g="circle");return k.enum(g,"circle square diamond up down left right".split(" "))},
join(g){null==g&&(g="miter");return k.enum(g,["miter","round","bevel"])},stroke(g){null==g&&(g="solid");return k.enum(g,["solid","dotted","dashed"])},vertexPass(g){null==g&&(g="view");return k.enum(g,["data","view","world","eye"])},fragmentPass(g){null==g&&(g="light");return k.enum(g,["color","light","rgba"])},ease(g){null==g&&(g="linear");return k.enum(g,["linear","cosine","binary","hold"])},fit(g){null==g&&(g="contain");return k.enum(g,["x","y","contain","cover"])},anchor(g){null==g&&(g="middle");
return k.enumber(g,[],{first:1,middle:0,last:-1})},transitionState(g){null==g&&(g="enter");return k.enumber(g,[],{enter:-1,visible:0,exit:1})},font(g){null==g&&(g="sans-serif");const r=f.parseQuoted;g instanceof Array||(g=r(g));const u=k.array(k.string(),0,g);return{make(){return u.make()},validate(w,x,B){try{w instanceof Array||(w=r(w))}catch(E){return B()}w=w.filter(E=>!!E.length);return u.validate(w,x,B)},equals:u.equals,clone:u.clone}},data(g){null==g&&(g=[]);return{make(){return[]},validate(r,
u,w){return r instanceof Array?r:null!=(null!=r?r.length:void 0)?r:w()},emitter(r,u){return e.getLerpThunk(r,u)}}}});m.Types=k};
shadow$provide[307]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Types=void 0;z=v(306).Types;m.Types=z};
shadow$provide[308]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Traits=void 0;z=v(307);z={node:{id:z.Types.nullable(z.Types.string()),classes:z.Types.classes()},entity:{active:z.Types.bool(!0)},object:{visible:z.Types.bool(!0)},latch:{data:z.Types.nullable(z.Types.object()),deep:z.Types.nullable(z.Types.bool(!0))},unit:{scale:z.Types.nullable(z.Types.number()),fov:z.Types.nullable(z.Types.number()),focus:z.Types.nullable(z.Types.number(1),!0)},span:{range:z.Types.nullable(z.Types.vec2(-1,
1))},view:{range:z.Types.array(z.Types.vec2(-1,1),4)},view3:{position:z.Types.vec3(),quaternion:z.Types.quat(),rotation:z.Types.vec3(),scale:z.Types.vec3(1,1,1),eulerOrder:z.Types.swizzle("xyz")},view4:{position:z.Types.vec4(),scale:z.Types.vec4(1,1,1,1)},layer:{depth:z.Types.number(1),fit:z.Types.fit("y")},vertex:{pass:z.Types.vertexPass()},fragment:{pass:z.Types.fragmentPass(),gamma:z.Types.bool(!1)},transform3:{position:z.Types.vec3(),quaternion:z.Types.quat(),rotation:z.Types.vec3(),eulerOrder:z.Types.swizzle("xyz"),
scale:z.Types.vec3(1,1,1),matrix:z.Types.mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transform4:{position:z.Types.vec4(),scale:z.Types.vec4(1,1,1,1),matrix:z.Types.mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},camera:{proxy:z.Types.bool(!1),position:z.Types.nullable(z.Types.vec3()),quaternion:z.Types.nullable(z.Types.quat()),rotation:z.Types.nullable(z.Types.vec3()),lookAt:z.Types.nullable(z.Types.vec3()),up:z.Types.nullable(z.Types.vec3()),eulerOrder:z.Types.swizzle("xyz"),fov:z.Types.nullable(z.Types.number(1))},
polar:{bend:z.Types.number(1),helix:z.Types.number(0)},spherical:{bend:z.Types.number(1)},stereographic:{bend:z.Types.number(1)},interval:{axis:z.Types.axis()},area:{axes:z.Types.swizzle([1,2],2)},volume:{axes:z.Types.swizzle([1,2,3],3)},origin:{origin:z.Types.vec4()},scale:{divide:z.Types.number(10),unit:z.Types.number(1),base:z.Types.number(10),mode:z.Types.scale(),start:z.Types.bool(!0),end:z.Types.bool(!0),zero:z.Types.bool(!0),factor:z.Types.positive(z.Types.number(1)),nice:z.Types.bool(!0)},
grid:{lineX:z.Types.bool(!0),lineY:z.Types.bool(!0),crossed:z.Types.bool(!1),closedX:z.Types.bool(!1),closedY:z.Types.bool(!1)},axis:{detail:z.Types.int(1),crossed:z.Types.bool(!1)},data:{data:z.Types.nullable(z.Types.data()),expr:z.Types.nullable(z.Types.emitter()),bind:z.Types.nullable(z.Types.func()),live:z.Types.bool(!0)},buffer:{channels:z.Types.enum(4,[1,2,3,4]),items:z.Types.int(1),fps:z.Types.nullable(z.Types.int(60)),hurry:z.Types.int(5),limit:z.Types.int(60),realtime:z.Types.bool(!1),observe:z.Types.bool(!1),
aligned:z.Types.bool(!1)},sampler:{centered:z.Types.bool(!1),padding:z.Types.number(0)},array:{width:z.Types.nullable(z.Types.positive(z.Types.int(1),!0)),bufferWidth:z.Types.int(1),history:z.Types.int(1)},matrix:{width:z.Types.nullable(z.Types.positive(z.Types.int(1),!0)),height:z.Types.nullable(z.Types.positive(z.Types.int(1),!0)),history:z.Types.int(1),bufferWidth:z.Types.int(1),bufferHeight:z.Types.int(1)},voxel:{width:z.Types.nullable(z.Types.positive(z.Types.int(1),!0)),height:z.Types.nullable(z.Types.positive(z.Types.int(1),
!0)),depth:z.Types.nullable(z.Types.positive(z.Types.int(1),!0)),bufferWidth:z.Types.int(1),bufferHeight:z.Types.int(1),bufferDepth:z.Types.int(1)},resolve:{expr:z.Types.nullable(z.Types.func()),items:z.Types.int(1)},style:{opacity:z.Types.positive(z.Types.number(1)),color:z.Types.color(),blending:z.Types.blending(),zWrite:z.Types.bool(!0),zTest:z.Types.bool(!0),zIndex:z.Types.positive(z.Types.round()),zBias:z.Types.number(0),zOrder:z.Types.nullable(z.Types.int())},geometry:{points:z.Types.select(),
colors:z.Types.nullable(z.Types.select())},point:{size:z.Types.positive(z.Types.number(4)),sizes:z.Types.nullable(z.Types.select()),shape:z.Types.shape(),optical:z.Types.bool(!0),fill:z.Types.bool(!0),depth:z.Types.number(1)},line:{width:z.Types.positive(z.Types.number(2)),depth:z.Types.positive(z.Types.number(1)),join:z.Types.join(),stroke:z.Types.stroke(),proximity:z.Types.nullable(z.Types.number(Infinity)),closed:z.Types.bool(!1)},mesh:{fill:z.Types.bool(!0),shaded:z.Types.bool(!1),normals:z.Types.nullable(z.Types.select()),
map:z.Types.nullable(z.Types.select()),lineBias:z.Types.number(5)},strip:{line:z.Types.bool(!1)},face:{line:z.Types.bool(!1)},arrow:{size:z.Types.number(3),start:z.Types.bool(!1),end:z.Types.bool(!1)},ticks:{normal:z.Types.vec3(0,0,1),size:z.Types.positive(z.Types.number(10)),epsilon:z.Types.positive(z.Types.number(.001))},attach:{offset:z.Types.vec2(0,-20),snap:z.Types.bool(!1),depth:z.Types.number(0)},format:{digits:z.Types.nullable(z.Types.positive(z.Types.number(3))),data:z.Types.nullable(z.Types.data()),
expr:z.Types.nullable(z.Types.func()),live:z.Types.bool(!0)},font:{font:z.Types.font("sans-serif"),style:z.Types.string(),variant:z.Types.string(),weight:z.Types.string(),detail:z.Types.number(24),sdf:z.Types.number(5)},label:{text:z.Types.select(),size:z.Types.number(16),outline:z.Types.number(2),expand:z.Types.number(0),background:z.Types.color(1,1,1)},overlay:{opacity:z.Types.number(1),zIndex:z.Types.positive(z.Types.round(0))},dom:{points:z.Types.select(),html:z.Types.select(),size:z.Types.number(16),
outline:z.Types.number(2),zoom:z.Types.number(1),color:z.Types.nullable(z.Types.color()),attributes:z.Types.nullable(z.Types.object()),pointerEvents:z.Types.bool(!1)},texture:{minFilter:z.Types.filter("nearest"),magFilter:z.Types.filter("nearest"),type:z.Types.type("float")},shader:{sources:z.Types.nullable(z.Types.select()),indices:z.Types.number(4),channels:z.Types.number(4),language:z.Types.string("glsl"),code:z.Types.string(),uniforms:z.Types.nullable(z.Types.object())},include:{shader:z.Types.select()},
operator:{source:z.Types.select()},spread:{unit:z.Types.mapping(),items:z.Types.nullable(z.Types.vec4()),width:z.Types.nullable(z.Types.vec4()),height:z.Types.nullable(z.Types.vec4()),depth:z.Types.nullable(z.Types.vec4()),alignItems:z.Types.anchor(),alignWidth:z.Types.anchor(),alignHeight:z.Types.anchor(),alignDepth:z.Types.anchor()},grow:{scale:z.Types.number(1),items:z.Types.nullable(z.Types.anchor()),width:z.Types.nullable(z.Types.anchor()),height:z.Types.nullable(z.Types.anchor()),depth:z.Types.nullable(z.Types.anchor())},
split:{order:z.Types.transpose("wxyz"),axis:z.Types.nullable(z.Types.axis()),length:z.Types.int(1),overlap:z.Types.int(0)},join:{order:z.Types.transpose("wxyz"),axis:z.Types.nullable(z.Types.axis()),overlap:z.Types.int(0)},swizzle:{order:z.Types.swizzle()},transpose:{order:z.Types.transpose()},repeat:{items:z.Types.number(1),width:z.Types.number(1),height:z.Types.number(1),depth:z.Types.number(1)},slice:{items:z.Types.nullable(z.Types.vec2()),width:z.Types.nullable(z.Types.vec2()),height:z.Types.nullable(z.Types.vec2()),
depth:z.Types.nullable(z.Types.vec2())},reverse:{items:z.Types.bool(!1),width:z.Types.bool(!1),height:z.Types.bool(!1),depth:z.Types.bool(!1)},lerp:{size:z.Types.mapping("absolute"),items:z.Types.nullable(z.Types.number()),width:z.Types.nullable(z.Types.number()),height:z.Types.nullable(z.Types.number()),depth:z.Types.nullable(z.Types.number())},subdivide:{items:z.Types.nullable(z.Types.positive(z.Types.int(),!0)),width:z.Types.nullable(z.Types.positive(z.Types.int(),!0)),height:z.Types.nullable(z.Types.positive(z.Types.int(),
!0)),depth:z.Types.nullable(z.Types.positive(z.Types.int(),!0)),bevel:z.Types.number(1),lerp:z.Types.bool(!0)},resample:{indices:z.Types.number(4),channels:z.Types.number(4),sample:z.Types.mapping(),size:z.Types.mapping("absolute"),items:z.Types.nullable(z.Types.number()),width:z.Types.nullable(z.Types.number()),height:z.Types.nullable(z.Types.number()),depth:z.Types.nullable(z.Types.number())},readback:{type:z.Types.type("float"),expr:z.Types.nullable(z.Types.func()),data:z.Types.data(),channels:z.Types.enum(4,
[1,2,3,4]),items:z.Types.nullable(z.Types.int()),width:z.Types.nullable(z.Types.int()),height:z.Types.nullable(z.Types.int()),depth:z.Types.nullable(z.Types.int())},root:{speed:z.Types.number(1),camera:z.Types.select("[camera]")},inherit:{source:z.Types.select(),traits:z.Types.array(z.Types.string())},rtt:{size:z.Types.mapping("absolute"),width:z.Types.nullable(z.Types.number()),height:z.Types.nullable(z.Types.number()),history:z.Types.int(1)},compose:{alpha:z.Types.bool(!1)},present:{index:z.Types.int(1),
directed:z.Types.bool(!0),length:z.Types.number(0)},slide:{order:z.Types.nullable(z.Types.int(0)),steps:z.Types.number(1),early:z.Types.int(0),late:z.Types.int(0),from:z.Types.nullable(z.Types.int(0)),to:z.Types.nullable(z.Types.int(1))},transition:{stagger:z.Types.vec4(),enter:z.Types.nullable(z.Types.number(1)),exit:z.Types.nullable(z.Types.number(1)),delay:z.Types.number(0),delayEnter:z.Types.nullable(z.Types.number(0)),delayExit:z.Types.nullable(z.Types.number(0)),duration:z.Types.number(.3),
durationEnter:z.Types.nullable(z.Types.number(0)),durationExit:z.Types.nullable(z.Types.number(0))},move:{from:z.Types.vec4(),to:z.Types.vec4()},seek:{seek:z.Types.nullable(z.Types.number(0))},track:{target:z.Types.select(),script:z.Types.object({}),ease:z.Types.ease("cosine")},trigger:{trigger:z.Types.nullable(z.Types.int(1),!0)},step:{playback:z.Types.ease("linear"),stops:z.Types.nullable(z.Types.array(z.Types.number())),delay:z.Types.number(0),duration:z.Types.number(.3),pace:z.Types.number(0),
speed:z.Types.number(1),rewind:z.Types.number(2),skip:z.Types.bool(!0),realtime:z.Types.bool(!1)},play:{delay:z.Types.number(0),pace:z.Types.number(1),speed:z.Types.number(1),from:z.Types.number(0),to:z.Types.number(Infinity),realtime:z.Types.bool(!1),loop:z.Types.bool(!1)},now:{now:z.Types.nullable(z.Types.timestamp()),seek:z.Types.nullable(z.Types.number(0)),pace:z.Types.number(1),speed:z.Types.number(1)}};m.Traits=z};
shadow$provide[309]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.make=m.log=m.linear=void 0;const t=function(n,c,e,f,h,k,g,r,u,w){let x,B;null==w&&(w=!0);e||(e=10);f||(f=1);h||(h=10);k||(k=1);const E=(c-n)/e;if(!w)return c=(()=>{let O,Q;const W=[];x=0;Q=e;for(O=0<=Q;O?x<=Q:x>=Q;O?x++:x--)W.push(n+x*E);return W})(),g||c.shift(),r||c.pop(),u||(c=c.filter(O=>0!==O)),c;f||(f=1);h||(h=10);const C=f*Math.pow(h,Math.floor(Math.log(E/f)/Math.log(h))),H=0===h%2?[h/2,1,.5]:0===h%3?[h/
3,1,1/3]:[1];f=(()=>{const O=[];for(B of Array.from(H))O.push(C*B);return O})();let I=Infinity,K=f.reduce(function(O,Q){B=Q/E;const W=Math.max(B,1/B);return W<I?(I=W,Q):O},C);K*=k;n=Math.ceil(n/K+ +!g)*K;c=(Math.floor(c/K)-+!r)*K;e=Math.ceil((c-n)/K);c=(()=>{let O,Q;const W=[];x=0;Q=e;for(O=0<=Q;O?x<=Q:x>=Q;O?x++:x--)W.push(n+x*K);return W})();u||(c=c.filter(O=>0!==O));return c};m.linear=t;const p=function(n,c,e,f,h,k,g,r,u,w){throw Error("Log ticks not yet implemented.");};m.log=p;m.make=function(n,
c,e,f,h,k,g,r,u,w,x){switch(n){case 0:return t(c,e,f,h,k,g,r,u,w,x);case 1:return p(c,e,f,h,k,g,r,u,w,x)}}};
shadow$provide[310]=function(z,v,J,m){function t(k){if("function"!==typeof WeakMap)return null;var g=new WeakMap,r=new WeakMap;return(t=function(u){return u?r:g})(k)}function p(k,g){if(!g&&k&&k.__esModule)return k;if(null===k||"object"!==typeof k&&"function"!==typeof k)return{default:k};if((g=t(g))&&g.has(k))return g.get(k);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor,w;for(w in k)if("default"!==w&&Object.prototype.hasOwnProperty.call(k,w)){var x=u?Object.getOwnPropertyDescriptor(k,
w):null;x&&(x.get||x.set)?Object.defineProperty(r,w,x):r[w]=k[w]}r.default=k;g&&g.set(k,r);return r}function n(k,g){return"undefined"!==typeof k&&null!==k?g(k):void 0}Object.defineProperty(m,"__esModule",{value:!0});m.Helpers=void 0;var c=p(v(100)),e=p(v(309)),f=v(2);const h={bind:{make(k){null==this.bind&&(this.bind={});null==this.bound&&(this.bound=[]);for(const r of Array.from(k)){({callback:k}=r);const {to:u,trait:w,optional:x,unique:B,multiple:E}=r;null==k&&(k=this.rebuild);const C=u.split(/\./g).pop(),
H=this._get(u);let I=null;if(null!=H){let K=this;for(var g=!1;!g;)K=I=this._attach(H,w,k,this,K,x,E),g=B&&(null==I||0>this.bound.indexOf(I)),g=E||x||!B||g}if(null!=I)if(null!=this.resize&&this._listen(I,"source.resize",this.resize),k&&this._listen(I,"source.rebuild",k),E)for(const K of Array.from(I))this.bound.push(K);else this.bound.push(I);this.bind[C]=I}return null},unmake(){if(this.bind)return delete this.bind,delete this.bound}},span:{make(){this.spanView=this._inherit("view");return this._listen("view",
"view.range",()=>this.trigger({type:"span.range"}))},unmake(){return delete this.spanView},get:function(){const k=new f.Vector2(-1,1);return function(g,r){let u;g=this._get(g+"span.range");return null!=g?g:null!=(u=null!=this.spanView?this.spanView.axis(r):void 0)?u:k}}()},scale:{divide(k){const g=this._get(k+"scale.divide");k=this._get(k+"scale.factor");return Math.round(2.5*g/k)},generate(k,g,r,u){const w=this._get(k+"scale.mode"),x=this._get(k+"scale.divide"),B=this._get(k+"scale.unit"),E=this._get(k+
"scale.base"),C=this._get(k+"scale.factor"),H=this._get(k+"scale.start"),I=this._get(k+"scale.end"),K=this._get(k+"scale.zero");k=this._get(k+"scale.nice");r=e.make(w,r,u,x,B,E,C,H,I,K,k);g.copy(r);return r}},style:{uniforms(){return{styleColor:this.node.attributes["style.color"],styleOpacity:this.node.attributes["style.opacity"],styleZBias:this.node.attributes["style.zBias"],styleZIndex:this.node.attributes["style.zIndex"]}}},arrow:{uniforms(){var {start:k}=this.props,{end:g}=this.props;const r=
this._attributes.make(this._types.number(1.25/(k+g)));k=this._attributes.make(this._types.vec2(+k,+g));g=this.node.attributes["arrow.size"];return{clipStyle:k,clipRange:g,clipSpace:r,arrowSpace:r,arrowSize:g}}},point:{uniforms(){return{pointSize:this.node.attributes["point.size"],pointDepth:this.node.attributes["point.depth"]}}},line:{uniforms(){return{lineWidth:this.node.attributes["line.width"],lineDepth:this.node.attributes["line.depth"],lineProximity:this.node.attributes["line.proximity"]}}},
surface:{uniforms(){return{}}},shade:{pipeline(k){if(!this._inherit("fragment"))return k;null==k&&(k=this._shaders.shader());for(let g=0;2>=g;g++)k=n(this._inherit("fragment"),r=>r.fragment(k,g));k.pipe("fragment.map.rgba");return k},normal(k){k.pipe(c.swizzleVec4("xyz"));return k},map(k){return k?this._shaders.shader().pipe("mesh.map.uvwo").pipe(k):k}},position:{pipeline(k){if(!this._inherit("vertex"))return k;null==k&&(k=this._shaders.shader());for(let g=0;3>=g;g++)k=n(this._inherit("vertex"),r=>
r.vertex(k,g));return k},swizzle(k,g){if(k)return this._shaders.shader().pipe(c.swizzleVec4(g)).pipe(k)},swizzle2(k,g,r){if(k)return this._shaders.shader().split().pipe(c.swizzleVec4(g)).next().pipe(c.swizzleVec4(r)).join().pipe(k)}},visible:{make(){const k={type:"visible.change"};let g=null;this.setVisible=function(w){null!=w&&(g=w);return r()};const r=()=>{let w;const x=this.isVisible;let B=null!=(w=null!=g?g:this._get("object.visible"))?w:!0;null!=u&&B&&(B=u.isVisible);this.isVisible=B;if(x!==
this.isVisible)return this.trigger(k)},u=this._inherit("visible");u&&this._listen(u,"visible.change",r);this.is("object")&&this._listen(this.node,"change:object",r);return r()},unmake(){return delete this.isVisible}},active:{make(){const k={type:"active.change"};let g=null;this.setActive=function(w){null!=w&&(g=w);return r()};const r=()=>{let w;const x=this.isActive;let B=null!=(w=null!=g?g:this._get("entity.active"))?w:!0;null!=u&&B&&(B=u.isActive);this.isActive=B;if(x!==this.isActive)return this.trigger(k)},
u=this._inherit("active");u&&this._listen(u,"active.change",r);this.is("entity")&&this._listen(this.node,"change:entity",r);return r()},unmake(){return delete this.isActive}},object:{make(k){let g,r;null==k&&(k=[]);this.objects=k;this.renders=this.objects.reduce((C,H)=>C.concat(H.renders),[]);k=this._inherit("scene");let u=g=r=null;const w=Array.from(this.traits).includes("style");u=1;g=f.NormalBlending;let x=!0,B=!0;w&&({opacity:u}=this.props,{blending:g}=this.props,{zOrder:r}=this.props,{zWrite:x}=
this.props,{zTest:B}=this.props);const E=()=>{const C=null!=r?-r:this.node.order;return(null!=this.isVisible?this.isVisible:1)&&0<u?w?(()=>{const H=[];for(const I of Array.from(this.objects))I.show(1>u,g,C),H.push(I.depth(x,B));return H})():(()=>{const H=[];for(const I of Array.from(this.objects))H.push(I.show(!0,g,C));return H})():(()=>{const H=[];for(const I of Array.from(this.objects))H.push(I.hide());return H})()};this._listen(this.node,"change:style",C=>{({changed:C}=C);let H=null;C["style.opacity"]&&
(H=u=this.props.opacity);C["style.blending"]&&(H=g=this.props.blending);C["style.zOrder"]&&(H=r=this.props.zOrder);C["style.zWrite"]&&(H=x=this.props.zWrite);C["style.zTest"]&&(H=B=this.props.zTest);if(null!=H)return E()});this._listen(this.node,"reindex",E);this._listen(this,"visible.change",E);for(const C of Array.from(this.objects))k.adopt(C);return E()},unmake(k){let g;null==k&&(k=!0);if(this.objects){var r=this._inherit("scene");for(g of Array.from(this.objects))r.unadopt(g);if(k)return(()=>
{const u=[];for(g of Array.from(this.objects))u.push(g.dispose());return u})()}},mask(){let k;if(k=this._inherit("mask"))return k.mask(void 0)}},unit:{make(){let k,g,r,u,w,x,B,E,C,H,I,K,O=Math.PI;this.unitUniforms={renderScaleInv:E=this._attributes.make(this._types.number(1)),renderScale:B=this._attributes.make(this._types.number(1)),renderAspect:u=this._attributes.make(this._types.number(1)),renderWidth:C=this._attributes.make(this._types.number(0)),renderHeight:w=this._attributes.make(this._types.number(0)),
viewWidth:I=this._attributes.make(this._types.number(0)),viewHeight:H=this._attributes.make(this._types.number(0)),pixelRatio:g=this._attributes.make(this._types.number(1)),pixelUnit:r=this._attributes.make(this._types.number(1)),worldUnit:K=this._attributes.make(this._types.number(1)),focusDepth:k=this._attributes.make(this._types.number(1)),renderOdd:x=this._attributes.make(this._types.vec2())};const Q=new f.Vector3,W=new f.Vector3,R=()=>{var ca;let ka;if(null!=(ka=null!=X?X.getSize():void 0)){O=
Math.PI;var {scale:la}=this.props,{fov:Aa}=this.props,ta=null!=this.props.focus?this.props.focus:this.inherit("unit").props.focus,Ha=null===la,Oa=1;if(ca=null!=X?X.getCamera():void 0)Oa=ca.projectionMatrix,Q.set(0,-.5,1).applyMatrix4(Oa),W.set(0,.5,1).applyMatrix4(Oa),Q.sub(W),Oa=Q.y;ca=ka.renderHeight/ka.viewHeight;Aa=null!=Aa?Oa*Math.tan(Aa*O/360):1;la=Ha?ca:ka.renderHeight/la*Aa;Ha=ka.renderHeight*Oa/2;I.value=ka.viewWidth;H.value=ka.viewHeight;C.value=ka.renderWidth;w.value=ka.renderHeight;u.value=
ka.aspect;B.value=Ha;E.value=1/Ha;g.value=ca;r.value=la;K.value=la/Ha;k.value=ta;return x.value.set(ka.renderWidth%2,ka.renderHeight%2).multiplyScalar(.5)}},X=this.is("root")?this:this._inherit("root");this._listen(X,"root.update",R);return R()},unmake(){return delete this.unitUniforms},get(){const k={};for(const g in this.unitUniforms)k[g]=this.unitUniforms[g].value;return k},uniforms(){return this.unitUniforms}}};m.Helpers=function(k,g){const r={};for(const u of Array.from(g))if(g=h[u]){r[u]={};
for(const w in g)r[u][w]=g[w].bind(k)}return r}};
shadow$provide[311]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});var t={Types:!0};Object.defineProperty(m,"Types",{enumerable:!0,get:function(){return n.Types}});var p=v(305);Object.keys(p).forEach(function(f){"default"!==f&&"__esModule"!==f&&(Object.prototype.hasOwnProperty.call(t,f)||f in m&&m[f]===p[f]||Object.defineProperty(m,f,{enumerable:!0,get:function(){return p[f]}}))});var n=v(307),c=v(308);Object.keys(c).forEach(function(f){"default"!==f&&"__esModule"!==f&&(Object.prototype.hasOwnProperty.call(t,
f)||f in m&&m[f]===c[f]||Object.defineProperty(m,f,{enumerable:!0,get:function(){return c[f]}}))});var e=v(310);Object.keys(e).forEach(function(f){"default"!==f&&"__esModule"!==f&&(Object.prototype.hasOwnProperty.call(t,f)||f in m&&m[f]===e[f]||Object.defineProperty(m,f,{enumerable:!0,get:function(){return e[f]}}))})};
shadow$provide[312]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.PrimitiveFactory=void 0;class t{constructor(p,n){this.context=n;this.classes=p.Classes;this.helpers=p.Helpers}getTypes(){return Object.keys(this.classes)}make(p,n,c=null){null==n&&(n={});const e=this.classes[p];if(null==e)throw Error(`Unknown primitive class \`${p}\``);p=new e.model(p,e.defaults,n,c,e,this.context.attributes);new e(p,this.context,this.helpers);return p}}m.PrimitiveFactory=t};
shadow$provide[313]=function(z,v,J,m){function t(e){if("function"!==typeof WeakMap)return null;var f=new WeakMap,h=new WeakMap;return(t=function(k){return k?h:f})(e)}Object.defineProperty(m,"__esModule",{value:!0});var p={Types:!0,Factory:!0};Object.defineProperty(m,"Factory",{enumerable:!0,get:function(){return n.PrimitiveFactory}});m.Types=void 0;z=function(e,f){if(!f&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};if((f=t(f))&&f.has(e))return f.get(e);
var h={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor,g;for(g in e)if("default"!==g&&Object.prototype.hasOwnProperty.call(e,g)){var r=k?Object.getOwnPropertyDescriptor(e,g):null;r&&(r.get||r.set)?Object.defineProperty(h,g,r):h[g]=e[g]}h.default=e;f&&f.set(e,h);return h}(v(311));var n=v(312),c=v(89);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(p,e)||e in m&&m[e]===c[e]||Object.defineProperty(m,e,{enumerable:!0,get:function(){return c[e]}}))});
m.Types=z};
shadow$provide[314]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Renderable=void 0;class t{constructor(p,n){this.renderer=p;this.shaders=n;this.gl=this.renderer.getContext();null==this.uniforms&&(this.uniforms={})}dispose(){this.uniforms=null}_adopt(p){for(const n in p)this.uniforms[n]=p[n]}_set(p){for(const n in p){const c=p[n];null!=this.uniforms[n]&&(this.uniforms[n].value=c)}}}m.Renderable=t};
shadow$provide[315]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Scene=void 0;var t=v(2);z=v(314);class p extends t.Object3D{constructor(){super();this.matrixAutoUpdate=this.frustumCulled=this.rotationAutoUpdate=!1}}class n extends z.Renderable{constructor(c,e,f){super(c,e,f);this.root=new p;null!=(null!=f?f.scene:void 0)&&(this.scene=f.scene);null==this.scene&&(this.scene=new t.Scene);this.pending=[];this.async=0;this.scratch=new t.WebGLRenderTarget(1,1);this.camera=new t.PerspectiveCamera}inject(c){null!=
c&&(this.scene=c);return this.scene.add(this.root)}unject(){return null!=this.scene?this.scene.remove(this.root):void 0}add(c){return this.async?this.pending.push(c):this._add(c)}remove(c){this.pending=this.pending.filter(e=>e!==c);if(null!=c.parent)return this._remove(c)}_add(c){return this.root.add(c)}_remove(c){return this.root.remove(c)}dispose(){if(null!=this.root.parent)return this.unject()}warmup(c){return this.async=+c||0}render(){if(this.pending.length){var {children:c}=this.root,e=[];for(let k=
0,g=this.async,r=0<=g;r?k<g:k>g;r?k++:k--){var f=this.pending.shift();if(!f)break;this._add(f);e.push(e)}var h=c.map(function(k){return k.visible});c.map(k=>k.visible=!Array.from(e).includes(k));f=this.renderer.getRenderTarget();this.renderer.setRenderTarget(this.scratch);this.renderer.render(this.scene,this.camera);this.renderer.setRenderTarget(f);return c.map((k,g)=>k.visible=h[g])}}toJSON(){return this.root.toJSON()}}m.Scene=n};
shadow$provide[316]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.RenderFactory=void 0;class t{constructor(p,n,c){this.classes=p;this.renderer=n;this.shaders=c}getTypes(){return Object.keys(this.classes)}make(p,n){return new this.classes[p](this.renderer,this.shaders,n)}}m.RenderFactory=t};
shadow$provide[317]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.Buffer=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(99));z=v(314);class n extends z.Renderable{constructor(c,e,f){super(c,e);null==this.items&&(this.items=f.items||1);null==this.samples&&(this.samples=f.samples||1);null==this.channels&&(this.channels=f.channels||4);null==this.callback&&(this.callback=f.callback||function(){})}dispose(){return super.dispose()}update(){const c=this.fill();this.write(c);
return c}setActive(c,e,f,h){}setCallback(c){this.callback=c}write(){}fill(){}generate(c){return p.getStreamer(c,this.samples,this.channels,this.items)}}m.Buffer=n};
shadow$provide[318]=function(z,v,J,m){function t(f){if("function"!==typeof WeakMap)return null;var h=new WeakMap,k=new WeakMap;return(t=function(g){return g?k:h})(f)}function p(f,h){if(!h&&f&&f.__esModule)return f;if(null===f||"object"!==typeof f&&"function"!==typeof f)return{default:f};if((h=t(h))&&h.has(f))return h.get(f);var k={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,r;for(r in f)if("default"!==r&&Object.prototype.hasOwnProperty.call(f,r)){var u=g?Object.getOwnPropertyDescriptor(f,
r):null;u&&(u.get||u.set)?Object.defineProperty(k,r,u):k[r]=f[r]}k.default=f;h&&h.set(f,k);return k}Object.defineProperty(m,"__esModule",{value:!0});m.DataTexture=void 0;var n=p(v(2)),c=p(v(96));class e{constructor(f,h,k,g,r){this.renderer=f;this.width=h;this.height=k;this.channels=g;this.n=this.width*this.height*this.channels;this.gl=f=this.renderer.getContext();h=null!=(null!=r?r.magFilter:void 0)?null!=r?r.magFilter:void 0:n.NearestFilter;k=null!=(null!=r?r.type:void 0)?null!=r?r.type:void 0:n.FloatType;
this.minFilter=c.paramToGL(f,null!=(null!=r?r.minFilter:void 0)?null!=r?r.minFilter:void 0:n.NearestFilter);this.magFilter=c.paramToGL(f,h);this.type=c.paramToGL(f,k);this.ctor=c.paramToArrayStorage(k);this.build(r)}build(f){const {gl:h}=this,k=this.renderer.state;this.texture=h.createTexture();this.format=[null,h.LUMINANCE,h.LUMINANCE_ALPHA,h.RGB,h.RGBA][this.channels];this.format3=[null,n.LuminanceFormat,n.LuminanceAlphaFormat,n.RGBFormat,n.RGBAFormat][this.channels];k.bindTexture(h.TEXTURE_2D,
this.texture);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,this.minFilter);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,this.magFilter);this.data=new this.ctor(this.n);h.pixelStorei(h.UNPACK_ALIGNMENT,1);h.texImage2D(h.TEXTURE_2D,0,this.format,this.width,this.height,0,this.format,this.type,this.data);this.textureObject=new n.Texture(new Image,n.UVMapping,n.ClampToEdgeWrapping,
n.ClampToEdgeWrapping,null!=f?f.minFilter:void 0,null!=f?f.magFilter:void 0);this.textureProperties=this.renderer.properties.get(this.textureObject);this.textureProperties.__webglInit=!0;this.textureProperties.__webglTexture=this.texture;this.textureObject.format=this.format3;this.textureObject.type=n.FloatType;this.textureObject.unpackAlignment=1;this.textureObject.flipY=!1;this.textureObject.generateMipmaps=!1;this.uniforms={dataResolution:{type:"v2",value:new n.Vector2(1/this.width,1/this.height)},
dataTexture:{type:"t",value:this.textureObject}}}write(f,h,k,g,r){const {gl:u}=this;this.renderer.state.bindTexture(u.TEXTURE_2D,this.texture);u.pixelStorei(u.UNPACK_ALIGNMENT,1);u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,!1);u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);return u.texSubImage2D(u.TEXTURE_2D,0,h,k,g,r,this.format,this.type,f)}dispose(){this.gl.deleteTexture(this.texture);this.textureProperties.__webglInit=!1;return this.textureObject=this.texture=this.textureProperties=this.textureProperties.__webglTexture=
null}}m.DataTexture=e};
shadow$provide[319]=function(z,v,J,m){function t(k){if("function"!==typeof WeakMap)return null;var g=new WeakMap,r=new WeakMap;return(t=function(u){return u?r:g})(k)}function p(k,g){if(!g&&k&&k.__esModule)return k;if(null===k||"object"!==typeof k&&"function"!==typeof k)return{default:k};if((g=t(g))&&g.has(k))return g.get(k);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor,w;for(w in k)if("default"!==w&&Object.prototype.hasOwnProperty.call(k,w)){var x=u?Object.getOwnPropertyDescriptor(k,
w):null;x&&(x.get||x.set)?Object.defineProperty(r,w,x):r[w]=k[w]}r.default=k;g&&g.set(k,r);return r}Object.defineProperty(m,"__esModule",{value:!0});m.DataBuffer=void 0;var n=p(v(99)),c=p(v(100));z=v(317);var e=v(318),f=v(2);class h extends z.Buffer{constructor(k,g,r,u){null==u&&(u=!0);const w=r.width||1,x=r.height||1,B=r.depth||1,E=w*x*B;r.samples||(r.samples=E);super(k,g,r);this.width=w;this.height=x;this.depth=B;null==this.samples&&(this.samples=E);u&&this.build(r)}shader(k,g){null==g&&(g=4);1<
this.items||1<this.depth?(4!==g&&k.pipe(c.extendVec(g,4)),k.pipe("map.xyzw.texture",this.uniforms)):2!==g&&k.pipe(c.truncateVec(g,2));k.pipe(`map.2d.data${this.wrap?".wrap":""}`,this.uniforms);k.pipe("sample.2d",this.uniforms);4>this.channels&&k.pipe(c.swizzleVec4(["0000","x000","xw00","xyz0"][this.channels]));return k}build(k){this.data=new Float32Array(this.samples*this.channels*this.items);this.texture=new e.DataTexture(this.renderer,this.items*this.width,this.height*this.depth,this.channels,k);
this.used=this.filled=0;this._adopt(this.texture.uniforms);this._adopt({dataPointer:{type:"v2",value:new f.Vector2},textureItems:{type:"f",value:this.items},textureHeight:{type:"f",value:this.height}});this.dataPointer=this.uniforms.dataPointer.value;this.streamer=this.generate(this.data)}dispose(){this.data=null;this.texture.dispose();return super.dispose()}getFilled(){return this.filled}setCallback(k){this.callback=k;return this.filled=0}copy(k){const g=Math.min(k.length,this.samples*this.channels*
this.items),r=this.data;for(let u=0,w=g,x=0<=w;x?u<w:u>w;x?u++:u--)r[u]=k[u];this.write(Math.ceil(g/this.channels/this.items))}write(k){null==k&&(k=this.samples);let g=k/this.width;k*=this.items;const r=1>g?k:this.items*this.width;g=Math.ceil(g);this.texture.write(this.data,0,0,r,g);this.dataPointer.set(.5,.5);this.filled=1;this.used=k}through(k,g){let r,u;const {consume:w,done:x}=u=this.streamer,{emit:B}=r=g.streamer;let E=0,C=()=>w((H,I,K,O)=>k(B,H,I,K,O,E));C=n.repeatCall(C,this.items);return()=>
{u.reset();r.reset();const H=this.used;for(E=0;!x()&&E<H;)C(),E++;return u.count()}}}m.DataBuffer=h};
shadow$provide[320]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.ArrayBuffer_=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(99));z=v(319);class n extends z.DataBuffer{constructor(c,e,f){const h=f.width||1,k=f.history||1;f.width=h;f.height=k;f.depth=1;super(c,e,f,!1);this.width=h;this.history=k;this.samples=h;this.wrap=1<k;this.build(f)}build(c){super.build();this.pad=this.index=0;return this.streamer=this.generate(this.data)}setActive(c){return this.pad=Math.max(0,this.width-
c)}fill(){const {callback:c}=this;"function"===typeof c.reset&&c.reset();const {emit:e,count:f,done:h,reset:k}=this.streamer;k();const g=this.samples-this.pad;let r=0;for(;!h()&&r<g&&!1!==c(e,r++);)!0;return Math.floor(f()/this.items)}write(c){null==c&&(c=this.samples);c*=this.items;this.texture.write(this.data,0,this.index,c,1);this.dataPointer.set(.5,this.index+.5);this.index=(this.index+this.history-1)%this.history;return this.filled=Math.min(this.history,this.filled+1)}through(c,e){let f,h;const {consume:k,
done:g}=h=this.streamer,{emit:r}=f=e.streamer;let u=0,w=()=>k((x,B,E,C)=>c(r,x,B,E,C,u));w=p.repeatCall(w,this.items);return()=>{h.reset();f.reset();const x=this.samples-this.pad;for(u=0;!g()&&u<x;)w(),u++;return h.count()}}}m.ArrayBuffer_=n};
shadow$provide[321]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Geometry=void 0;var t=v(2);class p extends t.BufferGeometry{constructor(){super();new t.BufferGeometry(this);null==this.uniforms&&(this.uniforms={});null==this.groups&&(this.groups=[])}_reduce(n,c){let e=!1;for(let f=0;f<n.length;f++){const h=n[f],k=c[f];e&&(n[f]=k);1<h&&(e=!0)}return n.reduce((f,h)=>f*h)}_emitter(n){n="index"==n?this.getIndex():this.getAttribute(n);const c=n.itemSize,{array:e}=n;let f=0;return[null,
function(h){e[f++]=h},function(h,k){e[f++]=h;e[f++]=k},function(h,k,g){e[f++]=h;e[f++]=k;e[f++]=g},function(h,k,g,r){e[f++]=h;e[f++]=k;e[f++]=g;e[f++]=r}][c]}_finalize(){}_offsets(n){this.groups=n}}m.Geometry=p};
shadow$provide[322]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.ClipGeometry=void 0;z=v(321);var t=v(2);class p extends z.Geometry{_clipUniforms(){this.geometryClip=new t.Vector4(1E10,1E10,1E10,1E10);this.geometryResolution=new t.Vector4;this.mapSize=new t.Vector4;null==this.uniforms&&(this.uniforms={});this.uniforms.geometryClip={type:"v4",value:this.geometryClip};this.uniforms.geometryResolution={type:"v4",value:this.geometryResolution};return this.uniforms.mapSize={type:"v4",
value:this.mapSize}}_clipGeometry(n,c,e,f){this.geometryClip.set(Math.max(0,n-1),Math.max(0,c-1),Math.max(0,e-1),Math.max(0,f-1));return this.geometryResolution.set(1/Math.max(1,n-1),1/Math.max(1,c-1),1/Math.max(1,e-1),1/Math.max(1,f-1))}_clipMap(n,c,e,f){return this.mapSize.set(n,c,e,f)}_clipOffsets(n,c,e,f,h,k,g,r,u){c=this._reduce([f,e,c,h],[r,g,k,u]);return this._offsets([{start:0,count:c*n,materialIndex:0}])}}m.ClipGeometry=p};
shadow$provide[323]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.ArrowGeometry=void 0;var t=v(2);z=v(322);class p extends z.ClipGeometry{constructor(n){var c,e,f;let h;var k;let g,r;var u;super(n);this._clipUniforms();this.sides=g=+n.sides||12;this.samples=k=+n.samples||2;this.strips=r=+n.strips||1;this.ribbons=h=+n.ribbons||1;this.layers=f=+n.layers||1;this.flip=c=null!=n.flip?n.flip:!1;this.closed=e=null!=n.closed?n.closed:!1;this.anchor=n=null!=n.anchor?n.anchor:c||e?0:
k-1;var w=r*h*f;var x=(g+2)*w;this.setIndex(new t.BufferAttribute(new Uint32Array(2*g*w*3),1));this.setAttribute("position4",new t.BufferAttribute(new Float32Array(4*x),4));this.setAttribute("arrow",new t.BufferAttribute(new Float32Array(3*x),3));this.setAttribute("attach",new t.BufferAttribute(new Float32Array(2*x),2));var B=this._emitter("index");const E=this._emitter("position4"),C=this._emitter("arrow"),H=this._emitter("attach"),I=[];x=0;for(u=0<=g;u?x<g:x>g;u?x++:x--){var K=x/g*2*Math.PI;I.push([Math.cos(K),
Math.sin(K),1])}u=0;for(let O=0,Q=w,W=0<=Q;W?O<Q:O>Q;W?O++:O--){const R=u++,X=R+g+1;x=0;K=g;for(w=0<=K;w?x<K:x>K;w?x++:x--){const ca=u+x%g,ka=u+(x+1)%g;B(R);B(ca);B(ka);B(ka);B(ca);B(X)}u+=g+1}B=c?1:e?k-1:-1;c=c&&!e?k-1:0;for(let O=0,Q=f,W=0<=Q;W?O<Q:O>Q;W?O++:O--)for(let R=0,X=h,ca=0<=X;ca?R<X:R>X;ca?R++:R--)for(let ka=0,la=r,Aa=0<=la;Aa?ka<la:ka>la;Aa?ka++:ka--){E(n,ka,R,O);C(0,0,0);H(B,c);x=0;e=g;for(f=0<=e;f?x<e:x>e;f?x++:x--)E(n,ka,R,O),k=I[x],C(k[0],k[1],k[2]),H(B,c);E(n,ka,R,O);C(0,0,1);H(B,
c)}this._finalize();this.clip()}clip(n,c,e,f){null==n&&({samples:n}=this);null==c&&({strips:c}=this);null==e&&({ribbons:e}=this);null==f&&({layers:f}=this);this._clipGeometry(n,c,e,f);n=0<n?this.sides*this._reduce([f,e,c],[this.layers,this.ribbons,this.strips]):0;return this._offsets([{start:0,count:6*n,materialIndex:0}])}}m.ArrowGeometry=p};
shadow$provide[324]=function(z,v,J,m){function t(e){if("function"!==typeof WeakMap)return null;var f=new WeakMap,h=new WeakMap;return(t=function(k){return k?h:f})(e)}Object.defineProperty(m,"__esModule",{value:!0});m.Base=void 0;var p=function(e,f){if(!f&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};if((f=t(f))&&f.has(e))return f.get(e);var h={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor,g;for(g in e)if("default"!==g&&Object.prototype.hasOwnProperty.call(e,
g)){var r=k?Object.getOwnPropertyDescriptor(e,g):null;r&&(r.get||r.set)?Object.defineProperty(h,g,r):h[g]=e[g]}h.default=e;f&&f.set(e,h);return h}(v(100)),n=v(2);z=v(314);class c extends z.Renderable{constructor(e,f,h){super(e,f,h);this.zUnits=null!=h.zUnits?h.zUnits:0}raw(){for(const e of Array.from(this.renders))this._raw(e);return null}depth(e,f){for(const h of Array.from(this.renders))this._depth(h,e,f);return null}polygonOffset(e,f){for(const h of Array.from(this.renders))this._polygonOffset(h,
e,f);return null}show(e,f,h){return Array.from(this.renders).map(k=>this._show(k,e,f,h))}hide(){for(const e of Array.from(this.renders))this._hide(e);return null}_injectPreamble(e,f){e=e+"\n"+f;return f.match(/#extension/)?this._hoist(e):e}_hoist(e){e=e.split("\n");const f=[];for(const h of Array.from(e))h.match(/^\s*#extension/)?f.unshift(h):f.push(h);return f.join("\n")}_material(e){var f=this.renderer.capabilities.precision;const h=`\
    precision ${f} float;
    precision ${f} int;
uniform mat4 modelMatrix;
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 cameraPosition;\
`;f=`\
    precision ${f} float;
    precision ${f} int;
uniform mat4 viewMatrix;
uniform vec3 cameraPosition;\
`;const k={};Object.assign(k,e);delete k.attributes;delete k.varyings;delete k.inspect;delete k.vertexGraph;delete k.fragmentGraph;const g=new n.RawShaderMaterial(k);["vertexGraph","fragmentGraph","inspect"].forEach(r=>g[r]=e[r]);g.vertexShader=this._injectPreamble(h,g.vertexShader);g.fragmentShader=this._injectPreamble(f,g.fragmentShader);return g}_raw(e){e.rotationAutoUpdate=!1;e.frustumCulled=!1;e.matrixAutoUpdate=!1;e.material.defaultAttributeValues=void 0}_depth(e,f,h){e=e.material;e.depthWrite=
f;return e.depthTest=h}_polygonOffset(e,f,h){h-=this.zUnits;const k=0!==h;e=e.material;if(e.polygonOffset=k)return e.polygonOffsetFactor=f,e.polygonOffsetUnits=h}_show(e,f,h,k){f=e.material;e.renderOrder=-k;e.visible=!0;f.transparent=!0;f.blending=h;return null}_hide(e){return e.visible=!1}_vertexColor(e,f){if(e||f){var h=this.shaders.shader();e&&(h.require(e),h.pipe("mesh.vertex.color",this.uniforms));f&&(h.require(f),h.pipe("mesh.vertex.mask",this.uniforms));return h}}_vertexPosition(e,f,h,k,g){let r;
const u=this.shaders.shader();if(h||f&&!0!==f){r={};if(0<k||g)r.POSITION_MAP="";0<k&&(r[["POSITION_U","POSITION_UV","POSITION_UVW","POSITION_UVWO"][k-1]]="");g&&(r.POSITION_STPQ="")}u.require(e);return u.pipe("mesh.vertex.position",this.uniforms,r)}_fragmentColor(e,f,h,k,g,r,u,w,x){const B=this.shaders.shader();let E=!1,C=!1;const H={};0<r&&(H[["POSITION_U","POSITION_UV","POSITION_UVW","POSITION_UVWO"][r-1]]="");u&&(H.POSITION_STPQ="");e&&(B.pipe("style.color",this.uniforms),E=!0,h||g||f)&&(x&&!h||
B.pipe("mesh.gamma.in"),C=!0);h&&(B.isolate(),B.pipe("mesh.fragment.color",this.uniforms),x&&!E||B.pipe("mesh.gamma.in"),B.end(),E&&B.pipe(p.binaryOperator("vec4","*")),x&&E&&B.pipe("mesh.gamma.out"),C=E=!0);g&&(!E&&w&&B.pipe(p.constant("vec4","vec4(1.0)")),B.isolate(),B.require(g),B.pipe("mesh.fragment.map",this.uniforms,H),x||B.pipe("mesh.gamma.in"),B.end(),w?B.pipe(w):E&&B.pipe(p.binaryOperator("vec4","*")),C=E=!0);f&&(E||B.pipe(p.constant("vec4","vec4(1.0)")),!0===f?B.pipe("mesh.fragment.shaded",
this.uniforms):(B.require(f),B.pipe("mesh.fragment.material",this.uniforms,H)),C=!0);C&&!x&&B.pipe("mesh.gamma.out");k&&(B.pipe("mesh.fragment.mask",this.uniforms),E&&B.pipe(p.binaryOperator("vec4","*")));return B}}m.Base=c};
shadow$provide[325]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Arrow=void 0;var t=v(2),p=v(323);z=v(324);class n extends z.Base{constructor(c,e,f){super(c,e,f);var {uniforms:h}=f;const {material:k,position:g,color:r,mask:u,map:w,combine:x,stpq:B,linear:E}=f;null==h&&(h={});c=null!=h.styleColor;this.geometry=new p.ArrowGeometry({sides:f.sides,samples:f.samples,strips:f.strips,ribbons:f.ribbons,layers:f.layers,anchor:f.anchor,flip:f.flip,closed:f.closed});this._adopt(h);this._adopt(this.geometry.uniforms);
f={};closed&&(f.ARROW_CLOSED="");e=e.material();h=e.vertex;h.pipe(this._vertexColor(r,u));h.require(this._vertexPosition(g,k,w,1,B));h.pipe("arrow.position",this.uniforms,f);h.pipe("project.position",this.uniforms);e.fragment=c=this._fragmentColor(c,k,r,u,w,1,B,x,E);c.pipe("fragment.color",this.uniforms);c=e.link({side:t.DoubleSide});this.material=this._material(c);e=new t.Mesh(this.geometry,this.material);e.frustumCulled=!1;e.matrixAutoUpdate=!1;e.userData=c;this._raw(e);this.renders=[e]}dispose(){this.geometry.dispose();
this.material.dispose();this.renders=this.geometry=this.material=null;return super.dispose()}}m.Arrow=n};
shadow$provide[326]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.BackedTexture=void 0;z=v(318);class t extends z.DataTexture{constructor(p,n,c,e,f){super(p,n,c,e,f);this.data=new this.ctor(this.n)}resize(p,n){const c=this.data,e=this.width,f=this.height;this.width=p;this.height=n;this.n=p*n*this.channels;this.data=new this.ctor(this.n);const {gl:h}=this;this.renderer.state.bindTexture(h.TEXTURE_2D,this.texture);h.pixelStorei(h.UNPACK_ALIGNMENT,1);h.texImage2D(h.TEXTURE_2D,
0,this.format,p,n,0,this.format,this.type,this.data);this.uniforms.dataResolution.value.set(1/p,1/n);return this.write(c,0,0,e,f)}write(p,n,c,e,f){({width:r}=this);const h=this.data;var {channels:k}=this;let g=0;if(r===e&&0===n){var r=c*e*k;for(var u=e*f*k;g<u;)h[r++]=p[g++]}else{u=r*k;const w=e*k;k*=n;let x=c;const B=c+f;for(;x<B;){let E=0;for(r=k+x*u;E++<w;)h[r++]=p[g++];x++}}return super.write(p,n,c,e,f)}dispose(){this.data=null;return super.dispose()}}m.BackedTexture=t};
shadow$provide[327]=function(z,v,J,m){function t(g){if("function"!==typeof WeakMap)return null;var r=new WeakMap,u=new WeakMap;return(t=function(w){return w?u:r})(g)}function p(g,r){return"undefined"!==typeof g&&null!==g?r(g):void 0}Object.defineProperty(m,"__esModule",{value:!0});m.Atlas=void 0;var n=function(g,r){if(!r&&g&&g.__esModule)return g;if(null===g||"object"!==typeof g&&"function"!==typeof g)return{default:g};if((r=t(r))&&r.has(g))return r.get(g);var u={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor,
x;for(x in g)if("default"!==x&&Object.prototype.hasOwnProperty.call(g,x)){var B=w?Object.getOwnPropertyDescriptor(g,x):null;B&&(B.get||B.set)?Object.defineProperty(u,x,B):u[x]=g[x]}u.default=g;r&&r.set(g,u);return u}(v(100)),c=v(326),e=v(318);z=v(314);var f=v(2);class h extends z.Renderable{constructor(g,r,u,w){null==w&&(w=!0);super(g,r);null==this.width&&(this.width=u.width||512);null==this.height&&(this.height=u.height||512);null==this.channels&&(this.channels=u.channels||4);null==this.backed&&
(this.backed=u.backed||!1);this.samples=this.width*this.height;w&&this.build(u)}shader(g){g.pipe("map.2d.data",this.uniforms);g.pipe("sample.2d",this.uniforms);4>this.channels&&g.pipe(n.swizzleVec4(["0000","x000","xw00","xyz0"][this.channels]));return g}build(g){let r;this.klass=r=this.backed?c.BackedTexture:e.DataTexture;this.texture=new r(this.renderer,this.width,this.height,this.channels,g);this.uniforms={dataPointer:{type:"v2",value:new f.Vector2(0,0)}};this._adopt(this.texture.uniforms);return this.reset()}reset(){this.rows=
[];return this.bottom=0}resize(g,r){if(!this.backed)throw Error("Cannot resize unbacked texture atlas");2048<g&&2048<r?console.warn(`Giant text atlas ${g}x${r}.`):console.info(`Resizing text atlas ${g}x${r}.`);this.texture.resize(g,r);this.width=g;this.height=r;return this.samples=g*r}collapse(g){let r;const {rows:u}=this;u.splice(u.indexOf(g),1);this.bottom=null!=(r=p(u[u.length-1],w=>w.bottom))?r:0;if(this.last===g)return this.last=null}allocate(g,r,u,w){const x=this.width,B=this.height,E=2*u;if(r>
x)return this.resize(2*x,2*B),this.last=null,this.allocate(g,r,u,w);let C=this.last;if(null!=C&&C.height>=u&&C.height<E&&C.width+r<=x)C.append(g,r,u,w);else{var H=0,I=-1,K=0;for(let O=0;O<this.rows.length;O++)if(C=this.rows[O],C.top-H>=u&&0>I&&(I=O,K=H),{bottom:H}=C,C.height>=u&&C.height<E&&C.width+r<=x){C.append(g,r,u,w);this.last=C;return}if(0<=I)C=new k(K,u),this.rows.splice(I,0,C);else{K=H;H+=u;if(H>=B)return this.resize(2*x,2*B),this.last=null,this.allocate(g,r,u,w);C=new k(K,u);this.rows.push(C);
this.bottom=H}C.append(g,r,u,w);this.last=C}}read(){return this.texture.textureObject}write(g,r,u,w,x){return this.texture.write(g,r,u,w,x)}dispose(){this.texture.dispose();this.data=null;return super.dispose()}}m.Atlas=h;class k{constructor(g,r){this.top=g;this.bottom=g+r;this.width=0;this.height=r;this.alive=0;this.keys=[]}append(g,r,u,w){u=this.width;const x=this.top;this.alive++;this.width+=r;this.keys.push(g);return w(this,u,x)}}};
shadow$provide[328]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Debug=void 0;var t=v(2);z=v(324);class p extends z.Base{constructor(n,c,e){super(n,c,e);this.geometry=new t.PlaneGeometry(1,1);this.material=new t.MeshBasicMaterial({map:e.map});this.material.side=t.DoubleSide;n=new t.Mesh(this.geometry,this.material);n.position.x+=e.x||0;n.position.y+=e.y||0;n.frustumCulled=!1;n.scale.set(2,2,2);n.__debug=!0;this.objects=[n]}dispose(){this.geometry.dispose();this.material.dispose();
this.objects=this.geometry=this.material=null;return super.dispose()}}m.Debug=p};
shadow$provide[329]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.FaceGeometry=void 0;var t=v(2);z=v(322);class p extends z.ClipGeometry{constructor(n){let c,e,f,h;super(n);this._clipUniforms();this.items=e=+n.items||2;this.width=h=+n.width||1;this.height=c=+n.height||1;this.depth=n=+n.depth||1;this.sides=f=Math.max(0,e-2);const k=h*c*n;var g=e*k;this.setIndex(new t.BufferAttribute(new Uint32Array(f*k*3),1));this.setAttribute("position4",new t.BufferAttribute(new Float32Array(4*
g),4));g=this._emitter("index");const r=this._emitter("position4");let u=0;for(let w=0,x=k,B=0<=x;B?w<x:w>x;B?w++:w--){for(let E=0,C=f,H=0<=C;H?E<C:E>C;H?E++:E--)g(u),g(u+E+1),g(u+E+2);u+=e}for(let w=0,x=n,B=0<=x;B?w<x:w>x;B?w++:w--)for(let E=0,C=c,H=0<=C;H?E<C:E>C;H?E++:E--)for(let I=0,K=h,O=0<=K;O?I<K:I>K;O?I++:I--)for(let Q=0,W=e,R=0<=W;R?Q<W:Q>W;R?Q++:Q--)r(I,E,w,Q);this._finalize();this.clip()}clip(n,c,e,f){null==n&&({width:n}=this);null==c&&({height:c}=this);null==e&&({depth:e}=this);null==
f&&({items:f}=this);const h=Math.max(0,f-2);this._clipGeometry(n,c,e,f);return this._clipOffsets(3,n,c,e,h,this.width,this.height,this.depth,this.sides)}}m.FaceGeometry=p};
shadow$provide[330]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Face=void 0;var t=v(2);z=v(324);var p=v(329);class n extends z.Base{constructor(c,e,f){super(c,e,f);let {uniforms:h,material:k}=f;const {position:g,color:r,mask:u,map:w,combine:x,stpq:B,linear:E}=f;null==h&&(h={});null==k&&(k=!0);c=null!=h.styleColor;this.geometry=new p.FaceGeometry({items:f.items,width:f.width,height:f.height,depth:f.depth});this._adopt(h);this._adopt(this.geometry.uniforms);e=e.material();f=
e.vertex;f.pipe(this._vertexColor(r,u));f.require(this._vertexPosition(g,k,w,2,B));k||f.pipe("face.position",this.uniforms);k&&f.pipe("face.position.normal",this.uniforms);f.pipe("project.position",this.uniforms);e.fragment=c=this._fragmentColor(c,k,r,u,w,2,B,x,E);c.pipe("fragment.color",this.uniforms);c=e.link({side:t.DoubleSide});this.material=this._material(c);e=new t.Mesh(this.geometry,this.material);e.userData=c;this._raw(e);this.renders=[e]}dispose(){this.geometry.dispose();this.material.dispose();
this.renders=this.geometry=this.material=null;return super.dispose()}}m.Face=n};
shadow$provide[331]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.LineGeometry=void 0;var t=v(2);z=v(322);class p extends z.ClipGeometry{constructor(n){var c,e,f,h;let k,g,r;var u;let w;super(n);this._clipUniforms();this.closed=c=n.closed||!1;this.samples=r=(+n.samples||2)+(c?1:0);this.strips=w=+n.strips||1;this.ribbons=g=+n.ribbons||1;this.layers=k=+n.layers||1;this.detail=e=+n.detail||1;var x=r-1;this.joints=h=e-1;this.vertices=n=(x-(c?0:1))*h+r;this.segments=u=(x-(c?0:1))*
h+x;n=n*w*g*k*2;this.setIndex(new t.BufferAttribute(new Uint32Array(u*w*g*k*6),1));this.setAttribute("position4",new t.BufferAttribute(new Float32Array(4*n),4));this.setAttribute("line",new t.BufferAttribute(new Float32Array(1*n),1));1<e&&this.setAttribute("joint",new t.BufferAttribute(new Float32Array(n),1));var B=this._emitter("index");n=this._emitter("position4");x=this._emitter("line");1<e&&(f=this._emitter("joint"));var E=0;for(let Q=0,W=g*k,R=0<=W;R?Q<W:Q>W;R?Q++:Q--)for(let X=0,ca=w,ka=0<=
ca;ka?X<ca:X>ca;ka?X++:X--){for(let la=0,Aa=u,ta=0<=Aa;ta?la<Aa:la>Aa;ta?la++:la--)B(E),B(E+1),B(E+2),B(E+2),B(E+1),B(E+3),E+=2;E+=2}var C=c?()=>0:function(Q){return 0===Q?-1:Q===r-1?1:0};if(1<e){var H;c=0;for(H=0<=k;H?c<k:c>k;H?c++:c--){var I=void 0,K=void 0;E=0;K=g;for(I=0<=K;I?E<K:E>K;I?E++:E--){let Q,W;B=0;W=w;for(Q=0<=W;Q?B<W:B>W;Q?B++:B--){let R,X,ca;u=ca=0;X=r;for(R=0<=X;R?ca<X:ca>X;R?ca++:ca--,u=ca){var O=C(u);if(0!==O)n(u,B,E,c),n(u,B,E,c),x(1),x(-1),f(.5),f(.5);else for(let ka=0,la=e,Aa=
0<=la;Aa?ka<la:ka>la;Aa?ka++:ka--)n(u,B,E,c),n(u,B,E,c),x(1),x(-1),f(ka/h),f(ka/h)}}}}}else for(c=0,f=0<=k;f?c<k:c>k;f?c++:c--)for(E=0,h=g,e=0<=h;e?E<h:E>h;e?E++:E--)for(B=0,C=w,O=0<=C;O?B<C:B>C;O?B++:B--)for(u=K=0,I=r,H=0<=I;H?K<I:K>I;H?K++:K--,u=K)n(u,B,E,c),n(u,B,E,c),x(1),x(-1);this._finalize();this.clip()}clip(n,c,e,f){null==n&&(n=this.samples-this.closed);null==c&&({strips:c}=this);null==e&&({ribbons:e}=this);null==f&&({layers:f}=this);const h=n+(n-(this.closed?0:2))*this.joints-(this.closed?
0:1);n+=this.closed;this._clipGeometry(n,c,e,f);return this._clipOffsets(6,h,c,e,f,this.segments,this.strips,this.ribbons,this.layers)}}m.LineGeometry=p};
shadow$provide[332]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Line=void 0;var t=v(2);z=v(324);var p=v(331);class n extends z.Base{constructor(c,e,f){var h;super(c,e,f);let {uniforms:k,stroke:g,join:r}=f;const {material:u,position:w,color:x,mask:B,map:E,combine:C,stpq:H,linear:I,clip:K,proximity:O,closed:Q}=f;null==k&&(k={});g=[null,"dotted","dashed"][g];c=null!=k.styleColor;r=null!=(h=["miter","round","bevel"][r])?h:"miter";h={miter:1,round:4,bevel:2}[r];this.geometry=new p.LineGeometry({samples:f.samples,
strips:f.strips,ribbons:f.ribbons,layers:f.layers,anchor:f.anchor,closed:f.closed,detail:h});this._adopt(k);this._adopt(this.geometry.uniforms);e=e.material();f={};g&&(f.LINE_STROKE="");K&&(f.LINE_CLIP="");null!=O&&(f.LINE_PROXIMITY="");f["LINE_JOIN_"+r.toUpperCase()]="";1<h&&(f.LINE_JOIN_DETAIL=h);Q&&(f.LINE_CLOSED="");h=e.vertex;h.pipe(this._vertexColor(x,B));h.require(this._vertexPosition(w,u,E,2,H));h.pipe("line.position",this.uniforms,f);h.pipe("project.position",this.uniforms);f=e.fragment;
g&&f.pipe(`fragment.clip.${g}`,this.uniforms);K&&f.pipe("fragment.clip.ends",this.uniforms);null!=O&&f.pipe("fragment.clip.proximity",this.uniforms);f.pipe(this._fragmentColor(c,u,x,B,E,2,H,C,I));f.pipe("fragment.color",this.uniforms);c=e.link({side:t.DoubleSide});this.material=this._material(c);e=new t.Mesh(this.geometry,this.material);e.userData=c;this._raw(e);this.renders=[e]}dispose(){this.geometry.dispose();this.material.dispose();this.renders=this.geometry=this.material=null;return super.dispose()}}
m.Line=n};
shadow$provide[333]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.MatrixBuffer=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(99));z=v(319);class n extends z.DataBuffer{constructor(c,e,f){const h=f.width||1,k=f.height||1,g=f.history||1;f.depth=g;super(c,e,f,!1);this.width=h;this.height=k;this.history=g;this.samples=h*k;this.wrap=1<g;this.build(f)}build(c){super.build();this.index=0;this.pad={x:0,y:0};return this.streamer=this.generate(this.data)}getFilled(){return this.filled}setActive(c,
e){let f;return[this.pad.x,this.pad.y]=Array.from(f=[Math.max(0,this.width-c),Math.max(0,this.height-e)]),f}fill(){let c,e,f;const {callback:h}=this;"function"===typeof h.reset&&h.reset();const {emit:k,skip:g,count:r,done:u,reset:w}=this.streamer;w();const x=this.width,B=this.pad.x,E=this.samples-this.pad.y*x;let C=c=e=0;if(B)for(;!u()&&e<E&&(e++,f=h(k,C,c),++C===x-B&&(g(B),e+=B,C=0,c++),!1!==f););else for(;!u()&&e<E&&(e++,f=h(k,C,c),++C===x&&(C=0,c++),!1!==f););return Math.floor(r()/this.items)}write(c){null==
c&&(c=this.samples);c*=this.items;const e=this.width*this.items;this.texture.write(this.data,0,this.index*this.height,e,Math.ceil(c/e));this.dataPointer.set(.5,this.index*this.height+.5);this.index=(this.index+this.history-1)%this.history;return this.filled=Math.min(this.history,this.filled+1)}through(c,e){let f,h,k;const {consume:g,skip:r,done:u}=k=this.streamer,{emit:w}=f=e.streamer;let x=h=0,B=()=>g((E,C,H,I)=>c(w,E,C,H,I,x,h));B=p.repeatCall(B,this.items);return()=>{let E;k.reset();f.reset();
const C=this.width,H=this.pad.x,I=this.samples-this.pad.y*C;x=h=E=0;if(H)for(;!u()&&E<I;)E++,B(),++x===C-H&&(r(H),x=0,h++);else for(;!u()&&E<I;)E++,B(),++x===C&&(x=0,h++);return k.count()}}}m.MatrixBuffer=n};
shadow$provide[334]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.RenderTarget=void 0;var t=v(2);class p{constructor(n,c,e,f,h){this.gl=n;null==h&&(h={});null==h.minFilter&&(h.minFilter=t.NearestFilter);null==h.magFilter&&(h.magFilter=t.NearestFilter);null==h.format&&(h.format=t.RGBAFormat);null==h.type&&(h.type=t.UnsignedByteType);this.options=h;this.width=c||1;this.height=e||1;this.frames=f||1;this.buffers=this.frames+1;this.build()}build(){let n;const c=()=>new t.WebGLRenderTarget(this.width,
this.height,this.options);this.targets=(()=>{let f,h;const k=[];n=0;h=this.buffers;for(f=0<=h;f?n<h:n>h;f?n++:n--)k.push(c());return k})();const e=[];this.targets.forEach(f=>e.push(f.texture));this.reads=e;this.write=this.targets[this.buffers-1];this.uniforms={dataResolution:{type:"v2",value:new t.Vector2(1/this.width,1/this.height)},dataTexture:{type:"t",value:this.reads[0]},dataTextures:{type:"tv",value:this.reads}}}cycle(){this.targets.unshift(this.targets.pop());this.write=this.targets[this.buffers-
1];this.reads.unshift(this.reads.pop());this.uniforms.dataTexture.value=this.reads[0]}warmup(n){return(()=>{const c=[];for(let e=0,f=this.buffers,h=0<=f;h?e<f:e>f;h?e++:e--)n(this.write),c.push(this.cycle());return c})()}dispose(){for(const n of Array.from(this.targets))n.dispose();return this.targets=this.reads=this.write=null}}m.RenderTarget=p};
shadow$provide[335]=function(z,v,J,m){function t(f){if("function"!==typeof WeakMap)return null;var h=new WeakMap,k=new WeakMap;return(t=function(g){return g?k:h})(f)}Object.defineProperty(m,"__esModule",{value:!0});m.RenderToTexture=void 0;var p=function(f,h){if(!h&&f&&f.__esModule)return f;if(null===f||"object"!==typeof f&&"function"!==typeof f)return{default:f};if((h=t(h))&&h.has(f))return h.get(f);var k={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,r;for(r in f)if("default"!==r&&
Object.prototype.hasOwnProperty.call(f,r)){var u=g?Object.getOwnPropertyDescriptor(f,r):null;u&&(u.get||u.set)?Object.defineProperty(k,r,u):k[r]=f[r]}k.default=f;h&&h.set(f,k);return k}(v(100)),n=v(2),c=v(334);z=v(314);class e extends z.Renderable{constructor(f,h,k){super(f,h);this.scene=null!=k.scene?k.scene:new n.Scene;this.camera=k.camera;this.build(k)}shaderRelative(f){null==f&&(f=this.shaders.shader());return f.pipe("sample.2d",this.uniforms)}shaderAbsolute(f,h,k){null==h&&(h=1);null==k&&(k=
4);null==f&&(f=this.shaders.shader());if(1>=h)return 2<k&&f.pipe(p.truncateVec(k,2)),f.pipe("map.2d.data",this.uniforms),f.pipe("sample.2d",this.uniforms);h=p.sample2DArray(Math.min(h,this.target.frames));4>k&&f.pipe(p.extendVec(k,4));f.pipe("map.xyzw.2dv");f.split();f.pipe("map.2d.data",this.uniforms);f.pass();return f.pipe(h,this.uniforms)}build(f){this.camera||(this.camera=new n.PerspectiveCamera,this.camera.position.set(0,0,3),this.camera.lookAt(new n.Vector3));"function"===typeof this.scene.inject&&
this.scene.inject();this.target=new c.RenderTarget(this.gl,f.width,f.height,f.frames,f);this.target.warmup(h=>this.renderer.setRenderTarget(h));this.renderer.setRenderTarget(null);this._adopt(this.target.uniforms);this._adopt({dataPointer:{type:"v2",value:new n.Vector2(.5,.5)}});return this.filled=0}adopt(f){return Array.from(f.renders).map(h=>this.scene.add(h))}unadopt(f){return Array.from(f.renders).map(h=>this.scene.remove(h))}render(f){null==f&&({camera:f}=this);const h=this.renderer.getRenderTarget();
this.renderer.setRenderTarget(this.target.write);this.renderer.render(null!=this.scene.scene?this.scene.scene:this.scene,f);this.renderer.setRenderTarget(h);this.target.cycle();if(this.filled<this.target.frames)return this.filled++}read(f){null==f&&(f=0);return this.target.reads[Math.abs(f)]}getFrames(){return this.target.frames}getFilled(){return this.filled}dispose(){"function"===typeof this.scene.unject&&this.scene.unject();this.scene=this.camera=null;this.target.dispose();return super.dispose()}}
m.RenderToTexture=e};
shadow$provide[336]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Memo=void 0;var t=v(2);z=v(335);class p extends z.RenderToTexture{constructor(n,c,e){let f,h;const k=e.items||1,g=e.channels||4,r=e.width||1,u=e.height||1,w=e.depth||1;e.format=t.RGBAFormat;e.width=h=k*r;e.height=f=u*w;e.frames=1;delete e.items;delete e.depth;delete e.channels;super(n,c,e);null==this.items&&(this.items=k);null==this.channels&&(this.channels=g);null==this.width&&(this.width=r);this._width=h;null==
this.height&&(this.height=u);this._height=f;null==this.depth&&(this.depth=w);this._adopt({textureItems:{type:"f",value:this.items},textureHeight:{type:"f",value:this.height}})}shaderAbsolute(n){null==n&&(n=this.shaders.shader());n.pipe("map.xyzw.texture",this.uniforms);return super.shaderAbsolute(n,1,2)}}m.Memo=p};
shadow$provide[337]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.SurfaceGeometry=void 0;var t=v(2);z=v(322);class p extends z.ClipGeometry{constructor(n,c){null==c&&(c=!0);super();c&&this.construct(n)}construct(n){var c,e;let f,h,k;this._clipUniforms();this.closedX=c=n.closedX||!1;this.closedY=e=n.closedY||!1;this.width=c=(+n.width||2)+(c?1:0);this.height=e=(+n.height||2)+(e?1:0);this.surfaces=k=+n.surfaces||1;this.layers=n=+n.layers||1;this.segmentsX=f=Math.max(0,c-1);this.segmentsY=
h=Math.max(0,e-1);var g=c*e*k*n;this.setIndex(new t.BufferAttribute(new Uint32Array(f*h*k*n*6),1));this.setAttribute("position4",new t.BufferAttribute(new Float32Array(4*g),4));this.setAttribute("surface",new t.BufferAttribute(new Float32Array(2*g),2));g=this._emitter("index");const r=this._emitter("position4");let u=0;for(let w=0,x=k*n,B=0<=x;B?w<x:w>x;B?w++:w--){for(let E=0,C=h,H=0<=C;H?E<C:E>C;H?E++:E--){for(let I=0,K=f,O=0<=K;O?I<K:I>K;O?I++:I--)g(u),g(u+1),g(u+c),g(u+c),g(u+1),g(u+c+1),u++;u++}u+=
c}for(let w=0,x=n,B=0<=x;B?w<x:w>x;B?w++:w--)for(let E=0,C=k,H=0<=C;H?E<C:E>C;H?E++:E--)for(let I=0,K=I,O=e,Q=0<=O;Q?I<O:I>O;Q?I++:I--,K=I)for(let W=0,R=W,X=c,ca=0<=X;ca?W<X:W>X;ca?W++:W--,R=W)r(R,K,E,w);this._finalize();this.clip()}clip(n,c,e,f){null==n&&(n=this.width-this.closedX);null==c&&(c=this.height-this.closedY);null==e&&({surfaces:e}=this);null==f&&({layers:f}=this);n+=this.closedX;c+=this.closedY;const h=Math.max(0,n-1),k=Math.max(0,c-1);this._clipGeometry(n,c,e,f);return this._clipOffsets(6,
h,k,e,f,this.segmentsX,this.segmentsY,this.surfaces,this.layers)}map(n,c,e,f){null==n&&({width:n}=this);null==c&&({height:c}=this);null==e&&({surfaces:e}=this);null==f&&({layers:f}=this);return this._clipMap(n,c,e,f)}}m.SurfaceGeometry=p};
shadow$provide[338]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.ScreenGeometry=void 0;z=v(337);var t=v(2);class p extends z.SurfaceGeometry{constructor(n){n.width=Math.max(2,+n.width);n.height=Math.max(2,+n.height);super(n,!1);null==this.uniforms&&(this.uniforms={});this.uniforms.geometryScale={type:"v4",value:new t.Vector4};this.cover();this.construct(n)}cover(n,c,e,f){null==n&&(n=1);this.scaleX=n;null==c&&(c=1);this.scaleY=c;null==e&&(e=1);this.scaleZ=e;null==f&&(f=1);this.scaleW=
f}clip(n,c,e,f){null==n&&({width:n}=this);null==c&&({height:c}=this);null==e&&({surfaces:e}=this);null==f&&({layers:f}=this);super.clip(n,c,e,f);return this.uniforms.geometryScale.value.set(1/Math.max(1,n-1)*this.scaleX,1/Math.max(1,c-1)*this.scaleY,1/Math.max(1,e-1)*this.scaleZ,1/Math.max(1,f-1)*this.scaleW)}}m.ScreenGeometry=p};
shadow$provide[339]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Screen=void 0;var t=v(2);z=v(324);var p=v(338);class n extends z.Base{constructor(c,e,f){super(c,e,f);let {uniforms:h}=f;const {map:k,combine:g,stpq:r,linear:u}=f;null==h&&(h={});c=null!=h.styleColor;this.geometry=new p.ScreenGeometry({width:f.width,height:f.height});this._adopt(h);this._adopt(this.geometry.uniforms);e=e.material();f=e.vertex;f.pipe("raw.position.scale",this.uniforms);f.fan();f.pipe("stpq.xyzw.2d",
this.uniforms);f.next();f.pipe("screen.position",this.uniforms);f.join();e.fragment=c=this._fragmentColor(c,!1,null,null,k,2,r,g,u);c.pipe("fragment.color",this.uniforms);c=e.link({side:t.DoubleSide});this.material=this._material(c);e=new t.Mesh(this.geometry,this.material);e.frustumCulled=!1;e.userData=c;this._raw(e);this.renders=[e]}dispose(){this.geometry.dispose();this.material.dispose();this.renders=this.geometry=this.material=null;return super.dispose()}}m.Screen=n};
shadow$provide[340]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.MemoScreen=void 0;var t=v(2);z=v(339);class p extends z.Screen{constructor(n,c,e){const {items:f,width:h,height:k,depth:g,stpq:r}=e,u={remapUVScale:{type:"v2",value:new t.Vector2(f*h,k*g)},remapModulus:{type:"v2",value:new t.Vector2(f,k)},remapModulusInv:{type:"v2",value:new t.Vector2(1/Math.max(1,f),1/Math.max(1,k))},remapSTPQScale:{type:"v4",value:new t.Vector4(1/Math.max(1,h-1),1/Math.max(1,k-1),1/Math.max(1,
g-1),1/Math.max(1,f-1))}},w=c.shader();w.pipe("screen.map.xyzw",u);null!=e.map&&(r&&w.pipe("screen.map.stpq",u),w.pipe(e.map));super(n,c,{map:w,linear:!0});this.memo=e;this.uniforms=u;for(const x of Array.from(this.renders))x.transparent=!1}cover(n,c,e,f){null==n&&({width:n}=this.memo);null==c&&({height:c}=this.memo);null==e&&({depth:e}=this.memo);null==f&&({items:f}=this.memo);this.uniforms.remapSTPQScale.value.set(1/Math.max(1,n-1),1/Math.max(1,c-1),1/Math.max(1,e-1),1/Math.max(1,f-1));n/=this.memo.width;
e/=this.memo.depth;1===this.memo.depth&&(e=c/this.memo.height);return this.geometry.cover(n,e)}}m.MemoScreen=p};
shadow$provide[341]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.SpriteGeometry=void 0;var t=v(2);z=v(322);class p extends z.ClipGeometry{constructor(n){let c,e,f;super(n);this._clipUniforms();this.items=e=+n.items||2;this.width=f=+n.width||1;this.height=c=+n.height||1;this.depth=n=+n.depth||1;const h=e*f*c*n;var k=4*h;this.setIndex(new t.BufferAttribute(new Uint32Array(6*h),1));this.setAttribute("position4",new t.BufferAttribute(new Float32Array(4*k),4));this.setAttribute("sprite",
new t.BufferAttribute(new Float32Array(2*k),2));k=this._emitter("index");const g=this._emitter("position4"),r=this._emitter("sprite"),u=[[-1,-1],[-1,1],[1,-1],[1,1]];let w=0;for(let x=0,B=h,E=0<=B;E?x<B:x>B;E?x++:x--)k(w),k(w+1),k(w+2),k(w+1),k(w+2),k(w+3),w+=4;for(let x=0,B=n,E=0<=B;E?x<B:x>B;E?x++:x--)for(let C=0,H=c,I=0<=H;I?C<H:C>H;I?C++:C--)for(let K=0,O=f,Q=0<=O;Q?K<O:K>O;Q?K++:K--)for(let W=0,R=e,X=0<=R;X?W<R:W>R;X?W++:W--)for(const ca of Array.from(u))g(K,C,x,W),r(ca[0],ca[1]);this._finalize();
this.clip()}clip(n,c,e,f){null==n&&({width:n}=this);null==c&&({height:c}=this);null==e&&({depth:e}=this);null==f&&({items:f}=this);this._clipGeometry(n,c,e,f);return this._clipOffsets(6,n,c,e,f,this.width,this.height,this.depth,this.items)}}m.SpriteGeometry=p};
shadow$provide[342]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Point=void 0;var t=v(2);z=v(324);var p=v(341);class n extends z.Base{constructor(c,e,f){var h;super(c,e,f);let {uniforms:k,shape:g,fill:r}=f;const {material:u,position:w,color:x,size:B,mask:E,map:C,combine:H,linear:I,optical:K,stpq:O}=f;null==k&&(k={});g=+g;null==r&&(r=!0);var Q=null!=k.styleColor;c="circle square diamond up down left right".split(" ");var W="circle generic generic generic generic generic generic".split(" ");
var R=[1.2,1,1.414,1.16,1.16,1.16,1.16];W=null!=W[g]?W[g]:W[0];c=null!=c[g]?c[g]:c[0];R=null!=(h=K&&R[g])?h:1;h=r?W:`${W}.hollow`;this.geometry=new p.SpriteGeometry({items:f.items,width:f.width,height:f.height,depth:f.depth});this._adopt(k);this._adopt(this.geometry.uniforms);W={POINT_SHAPE_SCALE:+(R+1E-5)};f=e.material();R=f.vertex;R.pipe(this._vertexColor(x,E));B?(R.isolate(),R.require(B),R.require("point.size.varying",this.uniforms),R.end()):R.require("point.size.uniform",this.uniforms);R.require(this._vertexPosition(w,
u,C,2,O));R.pipe("point.position",this.uniforms,W);R.pipe("project.position",this.uniforms);f.fragment=this._fragmentColor(Q,u,x,E,C,2,O,H,I);Q=e.material();Q.vertex.pipe(R);W=Q.fragment.pipe(f.fragment);W.require(`point.mask.${c}`,this.uniforms);W.require(`point.alpha.${h}`,this.uniforms);W.pipe("point.edge",this.uniforms);e=e.material();e.vertex.pipe(R);W=e.fragment.pipe(f.fragment);W.require(`point.mask.${c}`,this.uniforms);W.require(`point.alpha.${h}`,this.uniforms);W.pipe("point.fill",this.uniforms);
e=e.link({side:t.DoubleSide});this.fillMaterial=this._material(e);c=Q.link({side:t.DoubleSide});this.edgeMaterial=this._material(c);this.fillObject=new t.Mesh(this.geometry,this.fillMaterial);this.edgeObject=new t.Mesh(this.geometry,this.edgeMaterial);this._raw(this.fillObject);this.fillObject.userData=e;this._raw(this.edgeObject);this.edgeObject.userData=c;this.renders=[this.fillObject,this.edgeObject]}show(c,e,f,h){this._show(this.edgeObject,!0,e,f,h);return this._show(this.fillObject,c,e,f,h)}dispose(){this.geometry.dispose();
this.edgeMaterial.dispose();this.fillMaterial.dispose();this.renders=this.edgeObject=this.fillObject=this.geometry=this.edgeMaterial=this.fillMaterial=null;return super.dispose()}}m.Point=n};
shadow$provide[343]=function(z,v,J,m){function t(n,c,e){const f=[],h=n<c;for(c=e?h?c+1:c-1:c;h?n<c:n>c;h?n++:n--)f.push(n);return f}Object.defineProperty(m,"__esModule",{value:!0});m.PushBuffer=void 0;z=v(317);class p extends z.Buffer{constructor(n,c,e){const f=e.width||1,h=e.height||1,k=e.depth||1,g=f*h*k;e.samples||(e.samples=g);super(n,c,e);this.width=f;this.height=h;this.depth=k;null==this.samples&&(this.samples=g);this.build(e)}build(n){this.data=[];this.data.length=this.samples;this.filled=
0;this.pad={x:0,y:0,z:0};return this.streamer=this.generate(this.data)}dispose(){this.data=null;return super.dispose()}getFilled(){return this.filled}setActive(n,c,e){let f;return[this.pad.x,this.pad.y,this.pad.z]=Array.from(f=[this.width-n,this.height-c,this.depth-e]),f}read(){return this.data}copy(n){const c=this.data;return t(0,Math.min(n.length,this.samples),!1).map(e=>c[e]=n[e])}fill(){let n,c,e,f;const {callback:h}=this;"function"===typeof h.reset&&h.reset();const {emit:k,skip:g,count:r,done:u,
reset:w}=this.streamer;w();const x=this.width,B=this.height,E=this.pad.x,C=this.pad.y,H=this.samples-this.pad.z*x*B;let I=n=c=e=0;if(0<E||0<C)for(;!u()&&e<H&&(e++,f=h(k,I,n,c),++I===x-E&&(g(E),I=0,++n===B-C&&(g(x*C),n=0,c++)),!1!==f););else for(;!u()&&e<H&&(e++,f=h(k,I,n,c),++I===x&&(I=0,++n===B&&(n=0,c++)),!1!==f););this.filled=1;return r()}}m.PushBuffer=p};
shadow$provide[344]=function(z,v,J,m){function t(g){if("function"!==typeof WeakMap)return null;var r=new WeakMap,u=new WeakMap;return(t=function(w){return w?u:r})(g)}function p(g,r){if(!r&&g&&g.__esModule)return g;if(null===g||"object"!==typeof g&&"function"!==typeof g)return{default:g};if((r=t(r))&&r.has(g))return r.get(g);var u={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor,x;for(x in g)if("default"!==x&&Object.prototype.hasOwnProperty.call(g,x)){var B=w?Object.getOwnPropertyDescriptor(g,
x):null;B&&(B.get||B.set)?Object.defineProperty(u,x,B):u[x]=g[x]}u.default=g;r&&r.set(g,u);return u}Object.defineProperty(m,"__esModule",{value:!0});m.Readback=void 0;var n=p(v(99)),c=p(v(100)),e=v(2),f=v(336),h=v(340);z=v(314);class k extends z.Renderable{constructor(g,r,u){super(g,r);null==this.items&&(this.items=u.items||1);null==this.channels&&(this.channels=u.channels||4);null==this.width&&(this.width=u.width||1);null==this.height&&(this.height=u.height||1);null==this.depth&&(this.depth=u.depth||
1);null==this.type&&(this.type=u.type||e.FloatType);null==this.stpq&&(this.stpq=u.stpq||!1);this.isFloat=this.type===e.FloatType;this.active=this.sampled=this.rect=this.pad=null;this.build(u)}build(g){let r;({map:H}=g);({indexer:I}=g);g=null!=I&&!I.empty();let {stpq:u}=this;const {items:w,width:x,height:B,depth:E}=this;let C=H;g&&(this._adopt({indexModulus:{type:"v4",value:new e.Vector4(w,w*x,w*x*B,1)}}),C=this.shaders.shader(),C.require(H),C.require(I),C.pipe("float.index.pack",this.uniforms));this.isFloat&&
1<this.channels&&(this.floatMemo=new f.Memo(this.renderer,this.shaders,{items:w,channels:4,width:x,height:B,depth:E,history:0,type:e.FloatType}),this.floatCompose=new h.MemoScreen(this.renderer,this.shaders,{map:C,items:w,width:x,height:B,depth:E,stpq:u}),this.floatMemo.adopt(this.floatCompose),u=!1,C=this.shaders.shader(),this.floatMemo.shaderAbsolute(C));if(this.isFloat){r=this.channels;var H=4}else r=1,H=this.channels;if(1<r){var I=this.shaders.shader();I.pipe(c.mapByte2FloatOffset(r));I.require(C);
I.pipe("float.stretch");I.pipe("float.encode");C=I}else this.isFloat&&(I=this.shaders.shader(),I.pipe(C),I.pipe(c.truncateVec(4,1)),I.pipe("float.encode"),C=I);this.byteMemo=new f.Memo(this.renderer,this.shaders,{items:w*r,channels:H,width:x,height:B,depth:E,history:0,type:e.UnsignedByteType});this.byteCompose=new h.MemoScreen(this.renderer,this.shaders,{map:C,items:w*r,width:x,height:B,depth:E,stpq:u});this.byteMemo.adopt(this.byteCompose);this.samples=this.width*this.height*this.depth;this.bytes=
new Uint8Array(w*x*r*B*E*4);this.isFloat&&(this.floats=new Float32Array(this.bytes.buffer));this.data=this.isFloat?this.floats:this.bytes;this.streamer=this.generate(this.data);this.active={items:0,width:0,height:0,depth:0};this.sampled={items:0,width:0,height:0,depth:0};this.rect={w:0,h:0};this.pad={x:0,y:0,z:0,w:0};this.stretch=r;this.isIndexed=g;return this.setActive(w,x,B,E)}generate(g){return n.getStreamer(g,this.samples,4,this.items)}setActive(g,r,u,w){let x;if(g!==this.active.items||r!==this.active.width||
u!==this.active.height||w!==this.active.depth){[this.active.items,this.active.width,this.active.height,this.active.depth]=Array.from([g,r,u,w]);null!=this.floatCompose&&this.floatCompose.cover(r,u,w);null!=this.byteCompose&&this.byteCompose.cover(r*this.stretch,u,w);({items:g}=this);({width:r}=this.active);u=1===this.depth?this.active.height:this.height;({depth:w}=this.active);var B=g*r*this.stretch,E=u*w;[this.sampled.items,this.sampled.width,this.sampled.height,this.sampled.depth]=Array.from([g,
r,u,w]);[this.rect.w,this.rect.h]=Array.from([B,E]);return[this.pad.x,this.pad.y,this.pad.z,this.pad.w]=Array.from(x=[this.sampled.width-this.active.width,this.sampled.height-this.active.height,this.sampled.depth-this.active.depth,this.sampled.items-this.active.items]),x}}update(g){null!=this.floatMemo&&this.floatMemo.render(g);return null!=this.byteMemo?this.byteMemo.render(g):void 0}post(){const g=this.renderer.getRenderTarget();this.renderer.setRenderTarget(this.byteMemo.target.targets[0]);this.gl.readPixels(0,
0,this.rect.w,this.rect.h,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.bytes);this.renderer.setRenderTarget(g)}readFloat(g){return null!=this.floatMemo?this.floatMemo.read(g):void 0}readByte(g){return null!=this.byteMemo?this.byteMemo.read(g):void 0}setCallback(g){this.emitter=this.callback(g)}callback(g){if(!this.isIndexed)return g;const r=this.width,u=this.height,w=this.items,x=function(B,E,C,H){let I=H;const K=I%w;I=(I-K)/w;const O=I%r;I=(I-O)/r;const Q=I%u;I=(I-Q)/u;return g(B,E,C,H,O,Q,I,K)};x.reset=
()=>"function"===typeof g.reset?g.reset():void 0;return x}iterate(){let g,r,u,w=this.emitter;"function"===typeof w.reset&&w.reset();const {consume:x,skip:B,count:E,done:C,reset:H}=this.streamer;H();const I=this.sampled.width|0;let K=this.sampled.height|0;const O=this.sampled.items|0,Q=this.pad.x|0,W=this.pad.y|0,R=this.pad.w|0,X=I*K*O*((this.sampled.depth|0)-(this.pad.z|0));if(!this.isIndexed){const ka=w;w=(la,Aa,ta,Ha)=>ka(la,Aa,ta,Ha,ca,g,r,u)}let ca=g=r=u=K=0;for(;!C()&&K<X;){K++;const ka=x(w);
++u===O-R&&(B(Q),u=0,++ca===I-Q&&(B(O*Q),ca=0,++g===K-W&&(B(O*I*W),g=0,r++)));if(!1===ka)break}return Math.floor(E()/O)}dispose(){null!=this.floatMemo&&this.floatMemo.unadopt(this.floatCompose);null!=this.floatMemo&&this.floatMemo.dispose();null!=this.floatCompose&&this.floatCompose.dispose();null!=this.byteMemo&&this.byteMemo.unadopt(this.byteCompose);null!=this.byteMemo&&this.byteMemo.dispose();null!=this.byteCompose&&this.byteCompose.dispose();return this.floatMemo=this.byteMemo=this.floatCompose=
this.byteCompose=null}}m.Readback=k};
shadow$provide[345]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Sprite=void 0;var t=v(2);z=v(324);var p=v(341);class n extends z.Base{constructor(c,e,f){var h;super(c,e,f);({uniforms:h}=f);const {material:k,position:g,sprite:r,map:u,combine:w,linear:x,color:B,mask:E,stpq:C}=f;null==h&&(h={});c=null!=h.styleColor;this.geometry=new p.SpriteGeometry({items:f.items,width:f.width,height:f.height,depth:f.depth});this._adopt(h);this._adopt(this.geometry.uniforms);h=e.material();
f=h.vertex;f.pipe(this._vertexColor(B,E));f.require(this._vertexPosition(g,k,u,2,C));f.require(r);f.pipe("sprite.position",this.uniforms);f.pipe("project.position",this.uniforms);h.fragment=h=this._fragmentColor(c,k,B,E,u,2,C,w,x);c=e.material();c.vertex.pipe(f);c.fragment.pipe(h);c.fragment.pipe("fragment.transparent",this.uniforms);e=e.material();e.vertex.pipe(f);e.fragment.pipe(h);e.fragment.pipe("fragment.solid",this.uniforms);e=e.link({side:t.DoubleSide});this.fillMaterial=this._material(e);
f=c.link({side:t.DoubleSide});this.edgeMaterial=this._material(f);this.fillObject=new t.Mesh(this.geometry,this.fillMaterial);this.edgeObject=new t.Mesh(this.geometry,this.edgeMaterial);this._raw(this.fillObject);this.fillObject.userData=e;this._raw(this.edgeObject);this.edgeObject.userData=f;this.renders=[this.fillObject,this.edgeObject]}show(c,e,f,h){this._show(this.edgeObject,!0,e,f,h);return this._show(this.fillObject,c,e,f,h)}dispose(){this.geometry.dispose();this.edgeMaterial.dispose();this.fillMaterial.dispose();
this.renders=this.geometry=this.edgeMaterial=this.fillMaterial=this.edgeObject=this.fillObject=null;return super.dispose()}}m.Sprite=n};
shadow$provide[346]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.StripGeometry=void 0;var t=v(2);z=v(322);class p extends z.ClipGeometry{constructor(n){let c;var e;let f,h;super(n);this._clipUniforms();this.items=e=+n.items||2;this.width=h=+n.width||1;this.height=c=+n.height||1;this.depth=n=+n.depth||1;this.sides=f=Math.max(0,e-2);var k=h*c*n,g=e*k;this.setIndex(new t.BufferAttribute(new Uint32Array(f*k*3),1));this.setAttribute("position4",new t.BufferAttribute(new Float32Array(4*
g),4));this.setAttribute("strip",new t.BufferAttribute(new Float32Array(3*g),3));const r=this._emitter("index");g=this._emitter("position4");const u=this._emitter("strip");let w=0;for(let x=0,B=k,E=0<=B;E?x<B:x>B;E?x++:x--){k=w;for(let C=0,H=f,I=0<=H;I?C<H:C>H;I?C++:C--)C&1?(r(k+1),r(k)):(r(k),r(k+1)),r(k+2),k++;w+=e}--e;for(let x=0,B=n,E=0<=B;E?x<B:x>B;E?x++:x--)for(let C=0,H=c,I=0<=H;I?C<H:C>H;I?C++:C--)for(let K=0,O=h,Q=0<=O;Q?K<O:K>O;Q?K++:K--){n=1;g(K,C,x,0);u(1,2,n);for(let W=1,R=e,X=1<=R;X?
W<R:W>R;X?W++:W--)g(K,C,x,W),u(W-1,W+1,n=-n);g(K,C,x,e);u(e-2,e-1,-n)}this._finalize();this.clip()}clip(n,c,e,f){null==n&&({width:n}=this);null==c&&({height:c}=this);null==e&&({depth:e}=this);null==f&&({items:f}=this);const h=Math.max(0,f-2);this._clipGeometry(n,c,e,f);return this._clipOffsets(3,n,c,e,h,this.width,this.height,this.depth,this.sides)}}m.StripGeometry=p};
shadow$provide[347]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Strip=void 0;var t=v(2);z=v(324);var p=v(346);class n extends z.Base{constructor(c,e,f){super(c,e,f);let {uniforms:h,material:k}=f;const {position:g,color:r,mask:u,map:w,combine:x,linear:B,stpq:E}=f;null==h&&(h={});null==k&&(k=!0);c=null!=h.styleColor;this.geometry=new p.StripGeometry({items:f.items,width:f.width,height:f.height,depth:f.depth});this._adopt(h);this._adopt(this.geometry.uniforms);e=e.material();
f=e.vertex;f.pipe(this._vertexColor(r,u));f.require(this._vertexPosition(g,k,w,2,E));k||f.pipe("mesh.position",this.uniforms);k&&f.pipe("strip.position.normal",this.uniforms);f.pipe("project.position",this.uniforms);e.fragment=c=this._fragmentColor(c,k,r,u,w,2,E,x,B);c.pipe("fragment.color",this.uniforms);c=e.link({side:t.DoubleSide});this.material=this._material(c);e=new t.Mesh(this.geometry,this.material);e.userData=c;this._raw(e);this.renders=[e]}dispose(){this.geometry.dispose();this.material.dispose();
this.renders=this.geometry=this.material=null;return super.dispose()}}m.Strip=n};
shadow$provide[348]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Surface=void 0;var t=v(2);z=v(324);var p=v(337);class n extends z.Base{constructor(c,e,f){super(c,e,f);let {uniforms:h,material:k}=f;const {position:g,color:r,normal:u,mask:w,map:x,combine:B,linear:E,stpq:C,intUV:H}=f;null==h&&(h={});null==k&&(k=!0);c=null!=h.styleColor;this.geometry=new p.SurfaceGeometry({width:f.width,height:f.height,surfaces:f.surfaces,layers:f.layers,closedX:f.closedX,closedY:f.closedY});
this._adopt(h);this._adopt(this.geometry.uniforms);var I={};f.closedX&&(I.SURFACE_CLOSED_X="");f.closedY&&(I.SURFACE_CLOSED_Y="");H&&(I.POSITION_UV_INT="");e=e.material();f=e.vertex;f.pipe(this._vertexColor(r,w));f.require(this._vertexPosition(g,k,x,2,C));u?(f.require(u),f.pipe("surface.position.normal",this.uniforms,I)):(k||f.pipe("surface.position",this.uniforms,I),k&&f.pipe("surface.position.shaded",this.uniforms,I));f.pipe("project.position",this.uniforms);e.fragment=c=this._fragmentColor(c,k,
r,w,x,2,C,B,E);c.pipe("fragment.color",this.uniforms);c=e.link({side:t.DoubleSide});this.material=this._material(c);I=new t.Mesh(this.geometry,this.material);I.userData=c;this._raw(I);this.renders=[I]}dispose(){this.geometry.dispose();this.material.dispose();this.renders=this.geometry=this.material=null;return super.dispose()}}m.Surface=n};
shadow$provide[349]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.TextAtlas=void 0;z=v(327);var t=v(2);class p extends z.Atlas{constructor(n,c,e){let f;e.width||(e.width=256);e.height||(e.height=256);e.type=t.UnsignedByteType;e.channels=1;e.backed=!0;super(n,c,e,!1);this.font=null!=e.font?e.font:["sans-serif"];this.size=e.size||24;this.style=null!=e.style?e.style:"normal";this.variant=null!=e.variant?e.variant:"normal";this.weight=null!=e.weight?e.weight:"normal";this.outline=
null!=(f=+(null!=e.outline?e.outline:5))?f:0;this.gamma=1;"undefined"!==typeof navigator&&(n=navigator.userAgent,n.match(/Chrome/)&&n.match(/OS X/)&&(this.gamma=.5));this.scratchW=this.scratchH=0;this.build(e)}build(n){super.build(n);n=16;n=this.size;n+=4+2*Math.min(1,this.outline);const c=32*n,e=document.createElement("canvas");e.width=c;e.height=n;var f=this.font.map(g=>`${g.replace(/(['"\\])/g,"\\$1")}`).join(", ");const h=e.getContext("2d",{willReadFrequently:!0});h.font=`${this.style} ${this.variant} ${this.weight} ${this.size}px ${f}`;
h.fillStyle="#FF0000";h.textAlign="left";h.textBaseline="bottom";h.lineJoin="round";f=[];var k=3*this.outline;for(let g=0,r=k,u=0<=r;u?g<r:g>r;u?g++:g--)k=("00"+Math.max(0,8*-g+128-8*!g).toString(16)).slice(-2),f.push("#"+k+k+k);k=new Uint8Array(c*n*2);this.canvas=e;this.context=h;this.lineHeight=n;this.maxWidth=c;this.colors=f;this.scratch=k;this._allocate=this.allocate.bind(this);return this._write=this.write.bind(this)}reset(){super.reset();return this.mapped={}}begin(){return Array.from(this.rows).map(n=>
n.alive=0)}end(){const {mapped:n}=this;for(const c of Array.from(this.rows.slice()))if(0===c.alive){for(const e of Array.from(c.keys))delete n[e];this.collapse(c)}}map(n,c){const {mapped:e}=this;var f=e[n];if(null!=f)return f.row.alive++,c(f.x,f.y,f.w,f.h);this.draw(n);const h=this.scratch,k=this.scratchW,g=this.scratchH;f=this._allocate;const r=this._write;return f(n,k,g,function(u,w,x){e[n]={x:w,y:x,w:k,h:g,row:u};r(h,w,x,k,g);return c(w,x,k,g)})}draw(n){const c=this.lineHeight;var e=this.outline;
var f=this.context;const h=this.scratch;var k=this.maxWidth;var {colors:g}=this,r=e+1,u=Math.round(1.05*c-1);var w=f.measureText(n);k=Math.min(k,Math.ceil(w.width+2*r+1));f.clearRect(0,0,k,c);if(0===this.outline)for(f.fillText(n,r,u),{data:n}=f.getImageData(0,0,k,c),w=3,e=0,g=n.length/4,f=0<=g;f?e<g:e>g;f?e++:e--)h[e]=n[w],w+=4;else{var x;f.globalCompositeOperation="source-over";e=w=e+1;for(x=1>=w;x?1>=e:1<=e;x?e++:e--)w=1<e?2*e-2:e,f.strokeStyle=g[w-1],f.lineWidth=w,f.strokeText(n,r,u);f.globalCompositeOperation=
"multiply";f.fillText(n,r,u);({data:n}=f.getImageData(0,0,k,c));w=0;({gamma:r}=this);e=0;g=n.length/4;for(f=0<=g;f?e<g:e>g;f?e++:e--){x=(u=n[w])?n[w+1]/u:1;.5===r&&(x=Math.sqrt(x));x=Math.min(1,Math.max(0,x));const B=256-u;h[e]=Math.max(0,Math.min(255,B+(u-B)*x+2));w+=4}}this.scratchW=k;return this.scratchH=c}}m.TextAtlas=p};
shadow$provide[350]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.VoxelBuffer=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(99));z=v(319);class n extends z.DataBuffer{build(c){super.build();this.pad={x:0,y:0,z:0};return this.streamer=this.generate(this.data)}setActive(c,e,f){let h;return[this.pad.x,this.pad.y,this.pad.z]=Array.from(h=[Math.max(0,this.width-c),Math.max(0,this.height-e),Math.max(0,this.depth-f)]),h}fill(){let c,e,f,h;const {callback:k}=this;"function"===typeof k.reset&&
k.reset();const {emit:g,skip:r,count:u,done:w,reset:x}=this.streamer;x();const B=this.width,E=this.height,C=this.pad.x,H=this.pad.y,I=this.samples-this.pad.z*B*E;let K=c=e=f=0;if(0<C||0<H)for(;!w()&&f<I&&(f++,h=k(g,K,c,e),++K===B-C&&(r(C),f+=C,K=0,++c===E-H&&(r(B*H),f+=B*H,c=0,e++)),!1!==h););else for(;!w()&&f<I&&(f++,h=k(g,K,c,e),++K===B&&(K=0,++c===E&&(c=0,e++)),!1!==h););return Math.floor(u()/this.items)}through(c,e){let f,h,k,g;const {consume:r,done:u,skip:w}=g=this.streamer,{emit:x}=f=e.streamer;
let B=h=k=0,E=()=>r((C,H,I,K)=>c(x,C,H,I,K,B,h,k));E=p.repeatCall(E,this.items);return()=>{let C;g.reset();f.reset();const H=this.width,I=this.height,K=this.pad.x,O=this.pad.y,Q=this.samples-this.pad.z*H*I;B=h=k=C=0;if(0<K||0<O)for(;!u()&&C<Q;)C++,E(),++B===H-K&&(w(K),B=0,++h===I-O&&(w(H*O),h=0,k++));else for(;!u()&&C<Q;)C++,E(),++B===H&&(B=0,++h===I&&(h=0,k++));return g.count()}}}m.VoxelBuffer=n};
shadow$provide[351]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Classes=void 0;z=v(320);J=v(325);var t=v(327),p=v(319),n=v(328),c=v(330),e=v(332),f=v(333),h=v(336),k=v(340),g=v(342),r=v(343),u=v(344),w=v(335),x=v(315),B=v(339),E=v(345),C=v(347),H=v(348),I=v(349);v=v(350);m.Classes={sprite:E.Sprite,point:g.Point,line:e.Line,surface:H.Surface,face:c.Face,strip:C.Strip,arrow:J.Arrow,screen:B.Screen,memoScreen:k.MemoScreen,debug:n.Debug,dataBuffer:p.DataBuffer,arrayBuffer:z.ArrayBuffer_,
matrixBuffer:f.MatrixBuffer,voxelBuffer:v.VoxelBuffer,pushBuffer:r.PushBuffer,renderToTexture:w.RenderToTexture,memo:h.Memo,readback:u.Readback,atlas:t.Atlas,textAtlas:I.TextAtlas,scene:x.Scene}};
shadow$provide[352]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});var t={Factory:!0};Object.defineProperty(m,"Factory",{enumerable:!0,get:function(){return n.RenderFactory}});var p=v(315);Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(t,e)||e in m&&m[e]===p[e]||Object.defineProperty(m,e,{enumerable:!0,get:function(){return p[e]}}))});var n=v(316),c=v(351);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==
e&&(Object.prototype.hasOwnProperty.call(t,e)||e in m&&m[e]===c[e]||Object.defineProperty(m,e,{enumerable:!0,get:function(){return c[e]}}))})};
shadow$provide[353]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform float worldUnit;\nuniform float lineDepth;\nuniform float lineWidth;\nuniform float focusDepth;\n\nuniform vec4 geometryClip;\nuniform float arrowSize;\nuniform float arrowSpace;\n\nattribute vec4 position4;\nattribute vec3 arrow;\nattribute vec2 attach;\n\n// External\nvec3 getPosition(vec4 xyzw, float canonical);\n\nvoid getArrowGeometry(vec4 xyzw, float near, float mid, float far, out vec3 left, out vec3 right, out vec3 middle, out vec3 start) {\n  right  \x3d getPosition(xyzw, 1.0);\n  left   \x3d getPosition(vec4(near, xyzw.yzw), 0.0);\n  middle \x3d getPosition(vec4(mid,  xyzw.yzw), 0.0);\n  start  \x3d getPosition(vec4(far,  xyzw.yzw), 0.0);\n}\n\nmat4 getArrowMatrix(vec3 left, vec3 right, vec3 middle, vec3 start) {\n\n  float depth \x3d focusDepth;\n  if (lineDepth \x3c 1.0) {\n    // Depth blending\n    float z \x3d max(0.00001, -right.z);\n    depth \x3d mix(z, focusDepth, lineDepth);\n  }\n\n  vec3 diff \x3d left - right;\n  float l \x3d length(diff);\n  if (l \x3d\x3d 0.0) {\n    return mat4(1.0, 0.0, 0.0, 0.0,\n                0.0, 1.0, 0.0, 0.0,\n                0.0, 0.0, 1.0, 0.0,\n                0.0, 0.0, 0.0, 1.0);\n  }\n\n  // Construct TBN matrix around shaft\n  vec3 t \x3d normalize(diff);\n  vec3 n \x3d normalize(cross(t, t.yzx + vec3(.1, .2, .3)));\n  vec3 b \x3d cross(n, t);\n\n  // Shrink arrows when vector gets too small\n  // Approach linear scaling with cubic ease the smaller we get\n  float size \x3d arrowSize * lineWidth * worldUnit * depth * 1.25;\n  l \x3d max(length(right - middle), length(middle - start)) * 2.0 * arrowSpace;\n  float mini \x3d clamp(1.0 - l / size * .333, 0.0, 1.0);\n  float scale \x3d 1.0 - mini * mini * mini;\n  float range \x3d size * scale;\n\n  // Size to 2.5:1 ratio\n  float rangeNB \x3d range / 2.5;\n\n  // Anchor at end position\n  return mat4(vec4(n * rangeNB,  0),\n              vec4(b * rangeNB,  0),\n              vec4(t * range, 0),\n              vec4(right,  1.0));\n}\n\nvec3 getArrowPosition() {\n  vec3 left, right, middle, start;\n\n  // Clip arrow position and attachment anchors to data\n  vec4 p \x3d min(geometryClip, position4);\n  vec3 a \x3d vec3(min(geometryClip.x, p.x + attach.x), geometryClip.x / 2.0, min(geometryClip.x, attach.y));\n\n  getArrowGeometry(p, a.x, a.y, a.z, left, right, middle, start);\n  mat4 matrix \x3d getArrowMatrix(left, right, middle, start);\n\n  return (matrix * vec4(arrow.xyz, 1.0)).xyz;\n\n}\n"};
shadow$provide[354]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec4 axisStep;\nuniform vec4 axisPosition;\n\nvec4 getAxisPosition(vec4 xyzw, inout vec4 stpq) {\n  return axisStep * xyzw.x + axisPosition;\n}\n"};
shadow$provide[355]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec4 basisScale;\nuniform vec4 basisOffset;\nuniform vec4 viewScale;\nuniform vec4 viewOffset;\n\nvec4 getCartesian4Position(vec4 position, inout vec4 stpq) {\n  return position * basisScale + basisOffset;\n}\n"};
shadow$provide[356]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform mat4 viewMatrix;\n\nvec4 getCartesianPosition(vec4 position, inout vec4 stpq) {\n  return viewMatrix * vec4(position.xyz, 1.0);\n}\n"};
shadow$provide[357]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec4 clampLimit;\n\nvec4 getClampXYZW(vec4 xyzw) {\n  return clamp(xyzw, vec4(0.0), clampLimit);\n}\n"};
shadow$provide[358]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="vec4 opaqueColor(vec4 color) {\n  return vec4(color.rgb, 1.0);\n}\n"};
shadow$provide[359]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec4 geometryClip;\nattribute vec4 position4;\n\n// External\nvec3 getPosition(vec4 xyzw, float canonical);\n\nvec3 getFacePosition() {\n  vec4 p \x3d min(geometryClip, position4);\n  return getPosition(p, 1.0);\n}\n"};
shadow$provide[360]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="attribute vec4 position4;\n\n// External\nvec3 getPosition(vec4 xyzw, float canonical);\n\nvarying vec3 vNormal;\nvarying vec3 vLight;\nvarying vec3 vPosition;\n\nvoid getFaceGeometry(vec4 xyzw, out vec3 pos, out vec3 normal) {\n  vec3 a, b, c;\n\n  a   \x3d getPosition(vec4(xyzw.xyz, 0.0), 0.0);\n  b   \x3d getPosition(vec4(xyzw.xyz, 1.0), 0.0);\n  c   \x3d getPosition(vec4(xyzw.xyz, 2.0), 0.0);\n\n  pos \x3d getPosition(xyzw, 1.0);\n  normal \x3d normalize(cross(c - a, b - a));\n}\n\nvec3 getFacePositionNormal() {\n  vec3 center, normal;\n\n  getFaceGeometry(position4, center, normal);\n  vNormal   \x3d normal;\n  vLight    \x3d normalize((viewMatrix * vec4(1.0, 2.0, 2.0, 0.0)).xyz);\n  vPosition \x3d -center;\n\n  return center;\n}\n"};
shadow$provide[361]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="/*\nFloat encoding technique by\nCarlos Scheidegger\nhttps://github.com/cscheid/lux/blob/master/src/shade/bits/encode_float.js\n\nConversion to GLSL by:\nhttp://concord-consortium.github.io/lab/experiments/webgl-gpgpu/script.js\n*/\n\nfloat shift_right(float v, float amt) { \n  v \x3d floor(v) + 0.5; \n  return floor(v / exp2(amt)); \n}\n\nfloat shift_left(float v, float amt) { \n  return floor(v * exp2(amt) + 0.5); \n}\n\nfloat mask_last(float v, float bits) { \n  return mod(v, shift_left(1.0, bits)); \n}\n\nfloat extract_bits(float num, float from, float to) { \n  from \x3d floor(from + 0.5); to \x3d floor(to + 0.5); \n  return mask_last(shift_right(num, from), to - from); \n}\n\nvec4 encode_float(float val) { \n  if (val \x3d\x3d 0.0) return vec4(0, 0, 0, 0); \n  float valuesign \x3d val \x3e 0.0 ? 0.0 : 1.0; \n  val \x3d abs(val); \n  float exponent \x3d floor(log2(val)); \n  float biased_exponent \x3d exponent + 127.0; \n  float fraction \x3d ((val / exp2(exponent)) - 1.0) * 8388608.0; \n  float t \x3d biased_exponent / 2.0; \n  float last_bit_of_biased_exponent \x3d fract(t) * 2.0; \n  float remaining_bits_of_biased_exponent \x3d floor(t); \n  float byte4 \x3d extract_bits(fraction, 0.0, 8.0) / 255.0; \n  float byte3 \x3d extract_bits(fraction, 8.0, 16.0) / 255.0; \n  float byte2 \x3d (last_bit_of_biased_exponent * 128.0 + extract_bits(fraction, 16.0, 23.0)) / 255.0; \n  float byte1 \x3d (valuesign * 128.0 + remaining_bits_of_biased_exponent) / 255.0; \n  return vec4(byte4, byte3, byte2, byte1); \n}\n"};
shadow$provide[362]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec4 indexModulus;\n\nvec4 getSample(vec4 xyzw);\nvec4 getIndex(vec4 xyzw);\n\nvec4 floatPackIndex(vec4 xyzw) {\n  vec4 value \x3d getSample(xyzw);\n  vec4 index \x3d getIndex(xyzw);\n\n  vec4 offset \x3d floor(index + .5) * indexModulus;\n  vec2 sum2 \x3d offset.xy + offset.zw;\n  float sum \x3d sum2.x + sum2.y;\n  return vec4(value.xyz, sum);\n}"};
shadow$provide[363]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="vec4 getSample(vec4 xyzw);\n\nfloat floatStretch(vec4 xyzw, float channelIndex) {\n  vec4 sample \x3d getSample(xyzw);\n  vec2 xy \x3d channelIndex \x3e 1.5 ? sample.zw : sample.xy;\n  return mod(channelIndex, 2.0) \x3e .5 ? xy.y : xy.x;\n}"};
shadow$provide[364]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="varying float vClipStrokeWidth;\nvarying float vClipStrokeIndex;\nvarying vec3  vClipStrokeEven;\nvarying vec3  vClipStrokeOdd;\nvarying vec3  vClipStrokePosition;\n\nvoid clipStrokeFragment() {\n  bool odd \x3d mod(vClipStrokeIndex, 2.0) \x3e\x3d 1.0;\n\n  vec3 tangent;\n  if (odd) {\n    tangent \x3d vClipStrokeOdd;\n  }\n  else {\n    tangent \x3d vClipStrokeEven;\n  }\n\n  float travel \x3d dot(vClipStrokePosition, normalize(tangent)) / vClipStrokeWidth;\n  if (mod(travel, 16.0) \x3e 8.0) {\n    discard;\n  }\n}\n"};
shadow$provide[365]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="varying float vClipStrokeWidth;\nvarying float vClipStrokeIndex;\nvarying vec3  vClipStrokeEven;\nvarying vec3  vClipStrokeOdd;\nvarying vec3  vClipStrokePosition;\n\nvoid clipStrokeFragment() {\n  bool odd \x3d mod(vClipStrokeIndex, 2.0) \x3e\x3d 1.0;\n\n  vec3 tangent;\n  if (odd) {\n    tangent \x3d vClipStrokeOdd;\n  }\n  else {\n    tangent \x3d vClipStrokeEven;\n  }\n\n  float travel \x3d dot(vClipStrokePosition, normalize(tangent)) / vClipStrokeWidth;\n  if (mod(travel, 4.0) \x3e 2.0) {\n    discard;\n  }\n}\n"};
shadow$provide[366]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="varying vec2 vClipEnds;\n\nvoid clipEndsFragment() {\n  if (vClipEnds.x \x3c 0.0 || vClipEnds.y \x3c 0.0) discard;\n}\n"};
shadow$provide[367]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="varying float vClipProximity;\n\nvoid clipProximityFragment() {\n  if (vClipProximity \x3e\x3d 0.5) discard;\n}"};
shadow$provide[368]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="void setFragmentColor(vec4 color) {\n  gl_FragColor \x3d color;\n}"};
shadow$provide[369]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="vec4 fragmentRGBA(vec4 rgba, vec4 stpq) {\n  return rgba;\n}"};
shadow$provide[370]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="void setFragmentColor(vec4 color) {\n  if (color.a \x3c 1.0) discard;\n  gl_FragColor \x3d color;\n}"};
shadow$provide[371]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="void setFragmentColor(vec4 color) {\n  if (color.a \x3e\x3d 1.0) discard;\n  gl_FragColor \x3d color;\n}"};
shadow$provide[372]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec4 gridPosition;\nuniform vec4 gridStep;\nuniform vec4 gridAxis;\n\nvec4 sampleData(vec2 xy);\n\nvec4 getGridPosition(vec4 xyzw) {\n  vec4 onAxis  \x3d gridAxis * sampleData(vec2(xyzw.y, 0.0)).x;\n  vec4 offAxis \x3d gridStep * xyzw.x + gridPosition;\n  return onAxis + offAxis;\n}\n"};
shadow$provide[373]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform float growScale;\nuniform vec4  growMask;\nuniform vec4  growAnchor;\n\nvec4 getSample(vec4 xyzw);\n\nvec4 getGrowSample(vec4 xyzw) {\n  vec4 anchor \x3d xyzw * growMask + growAnchor;\n\n  vec4 position \x3d getSample(xyzw);\n  vec4 center \x3d getSample(anchor);\n\n  return mix(center, position, growScale);\n}"};
shadow$provide[374]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform float joinStride;\nuniform float joinStrideInv;\n\nfloat getIndex(vec4 xyzw);\nvec4 getRest(vec4 xyzw);\nvec4 injectIndices(float a, float b);\n\nvec4 getJoinXYZW(vec4 xyzw) {\n\n  float a \x3d getIndex(xyzw);\n  float b \x3d a * joinStrideInv;\n\n  float integer  \x3d floor(b);\n  float fraction \x3d b - integer;\n  \n  return injectIndices(fraction * joinStride, integer) + getRest(xyzw);\n}\n"};
shadow$provide[375]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="varying float vPixelSize;\n\nvec4 getLabelAlphaColor(vec4 color, vec4 sample) {\n  float mask \x3d clamp(sample.r * 1000.0, 0.0, 1.0);\n  float alpha \x3d (sample.r - .5) * vPixelSize + .5;\n  float a \x3d mask * alpha * color.a;\n  if (a \x3c\x3d 0.0) discard;\n  return vec4(color.xyz, a);\n}\n"};
shadow$provide[376]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="vec2 mapUV(vec4 uvwo, vec4 stpq) {\n  return uvwo.xy;\n}\n"};
shadow$provide[377]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform float outlineExpand;\nuniform float outlineStep;\nuniform vec3  outlineColor;\n\nvarying float vPixelSize;\n\nconst float PIXEL_STEP \x3d 255.0 / 16.0;\n\nvec4 getLabelOutlineColor(vec4 color, vec4 sample) {\n  float ps \x3d vPixelSize * PIXEL_STEP;\n  float os \x3d outlineStep;\n\n  float sdf \x3d sample.r - .5 + outlineExpand;\n  vec2  sdfs \x3d vec2(sdf, sdf + os);\n  vec2  alpha \x3d clamp(sdfs * ps + .5, 0.0, 1.0);\n\n  if (alpha.y \x3c\x3d 0.0) {\n    discard;\n  }\n\n  vec3 blend \x3d color.xyz;\n  if (alpha.y \x3e alpha.x) {\n    blend \x3d sqrt(mix(outlineColor * outlineColor, blend * blend, alpha.x));\n  }\n  \n  return vec4(blend, alpha.y * color.a);\n}\n"};
shadow$provide[378]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec4 layerScale;\nuniform vec4 layerBias;\n\n#define PROJECT_ORTHOGONAL\n\nvec4 layerPosition(vec4 position, inout vec4 stpq) {\n  return layerScale * position + layerBias;\n}\n"};
shadow$provide[379]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="// External\nvec4 sampleData(vec4 xyzw);\n\nvec4 lerpDepth(vec4 xyzw) {\n  float x \x3d xyzw.z;\n  float i \x3d floor(x);\n  float f \x3d x - i;\n    \n  vec4 xyzw1 \x3d vec4(xyzw.xy, i, xyzw.w);\n  vec4 xyzw2 \x3d vec4(xyzw.xy, i + 1.0, xyzw.w);\n  \n  vec4 a \x3d sampleData(xyzw1);\n  vec4 b \x3d sampleData(xyzw2);\n\n  return mix(a, b, f);\n}\n"};
shadow$provide[380]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="// External\nvec4 sampleData(vec4 xyzw);\n\nvec4 lerpHeight(vec4 xyzw) {\n  float x \x3d xyzw.y;\n  float i \x3d floor(x);\n  float f \x3d x - i;\n    \n  vec4 xyzw1 \x3d vec4(xyzw.x, i, xyzw.zw);\n  vec4 xyzw2 \x3d vec4(xyzw.x, i + 1.0, xyzw.zw);\n  \n  vec4 a \x3d sampleData(xyzw1);\n  vec4 b \x3d sampleData(xyzw2);\n\n  return mix(a, b, f);\n}\n"};
shadow$provide[381]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="// External\nvec4 sampleData(vec4 xyzw);\n\nvec4 lerpItems(vec4 xyzw) {\n  float x \x3d xyzw.w;\n  float i \x3d floor(x);\n  float f \x3d x - i;\n    \n  vec4 xyzw1 \x3d vec4(xyzw.xyz, i);\n  vec4 xyzw2 \x3d vec4(xyzw.xyz, i + 1.0);\n  \n  vec4 a \x3d sampleData(xyzw1);\n  vec4 b \x3d sampleData(xyzw2);\n\n  return mix(a, b, f);\n}\n"};
shadow$provide[382]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="// External\nvec4 sampleData(vec4 xyzw);\n\nvec4 lerpWidth(vec4 xyzw) {\n  float x \x3d xyzw.x;\n  float i \x3d floor(x);\n  float f \x3d x - i;\n    \n  vec4 xyzw1 \x3d vec4(i, xyzw.yzw);\n  vec4 xyzw2 \x3d vec4(i + 1.0, xyzw.yzw);\n  \n  vec4 a \x3d sampleData(xyzw1);\n  vec4 b \x3d sampleData(xyzw2);\n\n  return mix(a, b, f);\n}\n"};
shadow$provide[383]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="// Units and calibration\nuniform float worldUnit;\nuniform float lineWidth;\nuniform float lineDepth;\nuniform float focusDepth;\n\n// General data index\nuniform vec4 geometryClip;\nattribute vec4 position4;\n\n// (Top/bottom -1,1)\nattribute float line;\n\n// 0...1 for round or bevel joins\n#ifdef LINE_JOIN_DETAIL\nattribute float joint;\n#else\nconst float joint \x3d 0.0;\n#endif\n\n// Knock out excessively long line segments (e.g. for asymtpotes)\n#ifdef LINE_PROXIMITY\nuniform float lineProximity;\nvarying float vClipProximity;\n#endif\n\n// Ghetto line stroking (local only, not global)\n#ifdef LINE_STROKE\nvarying float vClipStrokeWidth;\nvarying float vClipStrokeIndex;\nvarying vec3  vClipStrokeEven;\nvarying vec3  vClipStrokeOdd;\nvarying vec3  vClipStrokePosition;\n#endif\n\n// External\nvec3 getPosition(vec4 xyzw, float canonical);\n\n// Clip line ends for arrows / decoration\n#ifdef LINE_CLIP\nuniform float clipRange;\nuniform vec2  clipStyle;\nuniform float clipSpace;\n\nattribute vec2 strip;\n\nvarying vec2 vClipEnds;\n\nvoid clipEnds(vec4 xyzw, vec3 center, vec3 pos) {\n\n  // Sample start of line strip\n  vec4 xyzwS \x3d vec4(0.0, xyzw.yzw);\n  vec3 start \x3d getPosition(xyzwS, 0.0);\n\n  // Sample middle of line strip\n  vec4 xyzwM \x3d vec4(geometryClip.x / 2.0, xyzw.yzw);\n  vec3 middle \x3d getPosition(xyzwM, 0.0);\n\n#ifdef LINE_CLOSED\n  vec3 end \x3d start;\n#else\n  // Sample other end of line strip\n  vec4 xyzwE \x3d vec4(geometryClip.x, xyzw.yzw);\n  vec3 end   \x3d getPosition(xyzwE, 0.0);\n#endif\n\n  // Measure length\n  float l \x3d max(length(end - middle), length(middle - start)) * clipSpace * 2.0;\n\n  // Arrow length (\x3d2.5x radius)\n  float arrowSize \x3d 1.25 * clipRange * lineWidth * worldUnit;\n\n#ifdef LINE_CLOSED\n  // Clip around start/end\n  end \x3d start;\n#endif\n\n  vClipEnds \x3d vec2(1.0);\n\n  if (clipStyle.y \x3e 0.0) {\n    // Depth blend end\n    float depth \x3d focusDepth;\n    if (lineDepth \x3c 1.0) {\n      float z \x3d max(0.00001, -end.z);\n      depth \x3d mix(z, focusDepth, lineDepth);\n    }\n\n    // Absolute arrow length\n    float size \x3d arrowSize * depth;\n\n    // Adjust clip range\n    // Approach linear scaling with cubic ease the smaller we get\n    float mini \x3d clamp(1.0 - l / size * .333, 0.0, 1.0);\n    float scale \x3d 1.0 - mini * mini * mini;\n    float invrange \x3d 1.0 / (size * scale);\n\n    // Clip end\n    vec3 diff \x3d end - center;\n    if(diff \x3d\x3d vec3(0.0))\n      vClipEnds.x \x3d -1.0;\n    else {\n      diff \x3d normalize(end - center);\n      float d \x3d dot(end - pos, diff);\n      vClipEnds.x \x3d d * invrange - 1.0;\n    }\n  }\n\n  if (clipStyle.x \x3e 0.0) {\n    // Depth blend start\n    float depth \x3d focusDepth;\n    if (lineDepth \x3c 1.0) {\n      float z \x3d max(0.00001, -start.z);\n      depth \x3d mix(z, focusDepth, lineDepth);\n    }\n\n    // Absolute arrow length\n    float size \x3d arrowSize * depth;\n\n    // Adjust clip range\n    // Approach linear scaling with cubic ease the smaller we get\n    float mini \x3d clamp(1.0 - l / size * .333, 0.0, 1.0);\n    float scale \x3d 1.0 - mini * mini * mini;\n    float invrange \x3d 1.0 / (size * scale);\n\n    // Clip start\n    vec3 diff \x3d center - start;\n    if(diff \x3d\x3d vec3(0.0))\n      vClipEnds.y \x3d -1.0;\n    else {\n      diff \x3d normalize(center - start);\n      float d \x3d dot(pos - start, diff);\n      vClipEnds.y \x3d d * invrange - 1.0;\n    }\n  }\n}\n#endif\n\n// Adjust left/center/right to be inside near/far z range\nconst float epsilon \x3d 1e-5;\nvoid fixCenter(inout vec3 left, inout vec3 center, inout vec3 right) {\n  if (center.z \x3e\x3d 0.0) {\n    if (left.z \x3c 0.0) {\n      float d \x3d (center.z + epsilon) / (center.z - left.z);\n      center \x3d mix(center, left, d);\n    }\n    else if (right.z \x3c 0.0) {\n      float d \x3d (center.z + epsilon) / (center.z - right.z);\n      center \x3d mix(center, right, d);\n    }\n  }\n\n  if (left.z \x3e\x3d 0.0) {\n    if (center.z \x3c 0.0) {\n      float d \x3d (left.z + epsilon) / (left.z - center.z);\n      left \x3d mix(left, center, d);\n    }\n  }\n\n  if (right.z \x3e\x3d 0.0) {\n    if (center.z \x3c 0.0) {\n      float d \x3d (right.z + epsilon) / (right.z - center.z);\n      right \x3d mix(right, center, d);\n    }\n  }\n}\n\nvec4 wrapAround(vec4 xyzw) {\n#ifdef LINE_CLOSED\n  float gx \x3d geometryClip.x;\n  if (xyzw.x \x3c 0.0) xyzw.x +\x3d gx;\n  if (xyzw.x \x3e\x3d gx) xyzw.x -\x3d gx;\n#endif\n  return xyzw;\n}\n\n// Sample the source data in an edge-aware manner\nvoid getLineGeometry(vec4 xyzw, float edge, out vec3 left, out vec3 center, out vec3 right) {\n  vec4 delta \x3d vec4(1.0, 0.0, 0.0, 0.0);\n\n  center \x3d getPosition(xyzw, 1.0);\n  left   \x3d (edge \x3e -0.5) ? getPosition(wrapAround(xyzw - delta), 0.0) : center;\n  right  \x3d (edge \x3c 0.5)  ? getPosition(wrapAround(xyzw + delta), 0.0) : center;\n}\n\n// Calculate the position for a vertex along the line, including joins\nvec3 getLineJoin(float edge, bool odd, vec3 left, vec3 center, vec3 right, float width, float offset, float joint) {\n  vec2 join \x3d vec2(1.0, 0.0);\n\n  fixCenter(left, center, right);\n\n  vec4 a \x3d vec4(left.xy, right.xy);\n  vec4 b \x3d a / vec4(left.zz, right.zz);\n\n  vec2 l \x3d b.xy;\n  vec2 r \x3d b.zw;\n  vec2 c \x3d center.xy / center.z;\n\n  vec4 d \x3d vec4(l, c) - vec4(c, r);\n  float l1 \x3d dot(d.xy, d.xy);\n  float l2 \x3d dot(d.zw, d.zw);\n\n  if (l1 + l2 \x3e 0.0) {\n\n    if (edge \x3e 0.5 || l2 \x3d\x3d 0.0) {\n      vec2 nl \x3d normalize(d.xy);\n      vec2 tl \x3d vec2(nl.y, -nl.x);\n\n#ifdef LINE_PROXIMITY\n      vClipProximity \x3d 1.0;\n#endif\n\n#ifdef LINE_STROKE\n      vClipStrokeEven \x3d vClipStrokeOdd \x3d normalize(left - center);\n#endif\n      join \x3d tl;\n    }\n    else if (edge \x3c -0.5 || l1 \x3d\x3d 0.0) {\n      vec2 nr \x3d normalize(d.zw);\n      vec2 tr \x3d vec2(nr.y, -nr.x);\n\n#ifdef LINE_PROXIMITY\n      vClipProximity \x3d 1.0;\n#endif\n\n#ifdef LINE_STROKE\n      vClipStrokeEven \x3d vClipStrokeOdd \x3d normalize(center - right);\n#endif\n      join \x3d tr;\n    }\n    else {\n      // Limit join stretch for tiny segments\n      float lmin2 \x3d min(l1, l2) / (width * width);\n\n      // Hide line segment if ratio of leg lengths exceeds promixity threshold\n#ifdef LINE_PROXIMITY\n      float lr     \x3d l1 / l2;\n      float rl     \x3d l2 / l1;\n      float ratio  \x3d max(lr, rl);\n      float thresh \x3d lineProximity + 1.0;\n      vClipProximity \x3d (ratio \x3e thresh * thresh) ? 1.0 : 0.0;\n#endif\n\n      // Calculate normals/tangents\n      vec2 nl \x3d normalize(d.xy);\n      vec2 nr \x3d normalize(d.zw);\n\n      // Calculate tangents\n      vec2 tl \x3d vec2(nl.y, -nl.x);\n      vec2 tr \x3d vec2(nr.y, -nr.x);\n\n#ifdef LINE_PROXIMITY\n      // Mix tangents according to leg lengths\n      vec2 tc \x3d normalize(mix(tl, tr, l1/(l1+l2)));\n#else\n      // Average tangent\n      vec2 tc \x3d normalize(tl + tr);\n#endif\n\n      // Miter join\n      float cosA   \x3d dot(nl, tc);\n      float sinA   \x3d max(0.1, abs(dot(tl, tc)));\n      float factor \x3d cosA / sinA;\n      float scale  \x3d sqrt(1.0 + min(lmin2, factor * factor));\n\n      // Stroke normals\n#ifdef LINE_STROKE\n      vec3 stroke1 \x3d normalize(left - center);\n      vec3 stroke2 \x3d normalize(center - right);\n\n      if (odd) {\n        vClipStrokeEven \x3d stroke1;\n        vClipStrokeOdd  \x3d stroke2;\n      }\n      else {\n        vClipStrokeEven \x3d stroke2;\n        vClipStrokeOdd  \x3d stroke1;\n      }\n#endif\n\n#ifdef LINE_JOIN_MITER\n      // Apply straight up miter\n      join \x3d tc * scale;\n#endif\n\n#ifdef LINE_JOIN_ROUND\n      // Slerp bevel join into circular arc\n      float dotProduct \x3d dot(nl, nr);\n      float angle \x3d acos(dotProduct);\n      float sinT  \x3d sin(angle);\n      join \x3d (sin((1.0 - joint) * angle) * tl + sin(joint * angle) * tr) / sinT;\n#endif\n\n#ifdef LINE_JOIN_BEVEL\n      // Direct bevel join between two flat ends\n      float dotProduct \x3d dot(nl, nr);\n      join \x3d mix(tl, tr, joint);\n#endif\n\n#ifdef LINE_JOIN_DETAIL\n      // Check if on inside or outside of joint\n      float crossProduct \x3d nl.x * nr.y - nl.y * nr.x;\n      if (offset * crossProduct \x3c 0.0) {\n        // For near-180-degree bends, correct back to a miter to avoid discontinuities\n        float ratio \x3d clamp(-dotProduct * 2.0 - 1.0, 0.0, 1.0);\n        // Otherwise collapse the inside vertices into one.\n        join \x3d mix(tc * scale, join, ratio * ratio * ratio);\n      }\n#endif\n\n    }\n    return vec3(join, 0.0);\n  }\n  else {\n    return vec3(0.0);\n  }\n\n}\n\n// Calculate final line position\nvec3 getLinePosition() {\n  vec3 left, center, right, join;\n\n  // Up/down along segment\n  float offset \x3d line;\n\n  // Clip data\n  vec4 p \x3d min(geometryClip, position4);\n\n  // Left/center/right\n  float edge \x3d 0.0;\n#ifdef LINE_CLOSED\n  if (p.x \x3d\x3d geometryClip.x) p.x \x3d 0.0;\n#else\n  if (p.x \x3d\x3d geometryClip.x) edge \x3d 1.0;\n  if (p.x \x3d\x3d 0.0) edge \x3d -1.0;\n#endif\n\n  // Get position + adjacent neighbours\n  getLineGeometry(p, edge, left, center, right);\n\n#ifdef LINE_STROKE\n  // Set parameters for line stroke fragment shader\n  vClipStrokePosition \x3d center;\n  vClipStrokeIndex \x3d p.x;\n  bool odd \x3d mod(p.x, 2.0) \x3e\x3d 1.0;\n#else\n  bool odd \x3d true;\n#endif\n\n  // Divide line width up/down\n  float width \x3d lineWidth * 0.5;\n\n  float depth \x3d focusDepth;\n  if (lineDepth \x3c 1.0) {\n    // Depth blending\n    float z \x3d max(0.00001, -center.z);\n    depth \x3d mix(z, focusDepth, lineDepth);\n  }\n  width *\x3d depth;\n\n  // Convert to world units\n  width *\x3d worldUnit;\n\n  // Calculate line join\n#ifdef LINE_CLOSED\n  join \x3d getLineJoin(0.0, odd, left, center, right, width, offset, joint);\n#else\n  join \x3d getLineJoin(edge, odd, left, center, right, width, offset, joint);\n#endif\n  vec3 pos \x3d center + join * offset * width;\n\n#ifdef LINE_STROKE\n  vClipStrokeWidth \x3d width;\n#endif\n\n#ifdef LINE_CLIP\n  clipEnds(p, center, pos);\n#endif\n\n  return pos;\n}\n"};
shadow$provide[384]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec2 dataResolution;\nuniform vec2 dataPointer;\n\nvec2 map2DData(vec2 xy) {\n  return (xy + dataPointer) * dataResolution;\n}\n"};
shadow$provide[385]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec2 dataResolution;\nuniform vec2 dataPointer;\n\nvec2 map2DData(vec2 xy) {\n  return fract((xy + dataPointer) * dataResolution);\n}\n"};
shadow$provide[386]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="void mapXyzw2DV(vec4 xyzw, out vec2 xy, out float z) {\n  xy \x3d xyzw.xy;\n  z  \x3d xyzw.z;\n}\n\n"};
shadow$provide[387]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="vec4 alignXYZW(vec4 xyzw) {\n  return floor(xyzw + .5);\n}\n\n"};
shadow$provide[388]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform float textureItems;\nuniform float textureHeight;\n\nvec2 mapXyzwTexture(vec4 xyzw) {\n  \n  float x \x3d xyzw.x;\n  float y \x3d xyzw.y;\n  float z \x3d xyzw.z;\n  float i \x3d xyzw.w;\n  \n  return vec2(i, y) + vec2(x, z) * vec2(textureItems, textureHeight);\n}\n\n"};
shadow$provide[389]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="varying vec4 vColor;\n\nvec4 getColor() {\n  if (vColor.a \x3c\x3d 0.0) discard;\n  return vColor;\n}\n"};
shadow$provide[390]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="#ifdef POSITION_STPQ\nvarying vec4 vSTPQ;\n#endif\n#ifdef POSITION_U\nvarying float vU;\n#endif\n#ifdef POSITION_UV\nvarying vec2 vUV;\n#endif\n#ifdef POSITION_UVW\nvarying vec3 vUVW;\n#endif\n#ifdef POSITION_UVWO\nvarying vec4 vUVWO;\n#endif\n\nvec4 getSample(vec4 uvwo, vec4 stpq);\n\nvec4 getMapColor() {\n  #ifdef POSITION_STPQ\n  vec4 stpq \x3d vSTPQ;\n  #else\n  vec4 stpq \x3d vec4(0.0);\n  #endif\n\n  #ifdef POSITION_U\n  vec4 uvwo \x3d vec4(vU, 0.0, 0.0, 0.0);\n  #endif\n  #ifdef POSITION_UV\n  vec4 uvwo \x3d vec4(vUV, 0.0, 0.0);\n  #endif\n  #ifdef POSITION_UVW\n  vec4 uvwo \x3d vec4(vUVW, 0.0);\n  #endif\n  #ifdef POSITION_UVWO\n  vec4 uvwo \x3d vec4(vUVWO);\n  #endif\n\n  return getSample(uvwo, stpq);\n}\n"};
shadow$provide[391]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="varying float vMask;\n\nfloat ease(float t) {\n  t \x3d clamp(t, 0.0, 1.0);\n  return t * t * (3.0 - 2.0 * t);\n}\n\nvec4 maskColor() {\n  if (vMask \x3c\x3d 0.0) discard;\n  return vec4(vec3(1.0), ease(vMask));\n}\n"};
shadow$provide[392]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="#ifdef POSITION_STPQ\nvarying vec4 vSTPQ;\n#endif\n#ifdef POSITION_U\nvarying float vU;\n#endif\n#ifdef POSITION_UV\nvarying vec2 vUV;\n#endif\n#ifdef POSITION_UVW\nvarying vec3 vUVW;\n#endif\n#ifdef POSITION_UVWO\nvarying vec4 vUVWO;\n#endif\n\nvec4 getSample(vec4 rgba, vec4 stpq);\n\nvec4 getMaterialColor(vec4 rgba) {\n  vec4 stpq \x3d vec4(0.0);\n\n  #ifdef POSITION_U\n  stpq.x \x3d vU;\n  #endif\n  #ifdef POSITION_UV\n  stpq.xy \x3d vUV;\n  #endif\n  #ifdef POSITION_UVW\n  stpq.xyz \x3d vUVW;\n  #endif\n  #ifdef POSITION_UVWO\n  stpq \x3d vUVWO;\n  #endif\n\n  #ifdef POSITION_STPQ\n  stpq \x3d vSTPQ;\n  #endif\n\n  return getSample(rgba, stpq);\n}\n"};
shadow$provide[393]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="\n#extension GL_OES_standard_derivatives : enable\nvarying vec3 vNormal;\nvarying vec3 vLight;\nvarying vec3 vPosition;\n\nvec3 offSpecular(vec3 color) {\n  vec3 c \x3d 1.0 - color;\n  return 1.0 - c * c;\n}\n\nvec4 getShadedColor(vec4 rgba) {\n  \n  vec3 color \x3d rgba.xyz;\n  vec3 color2 \x3d offSpecular(rgba.xyz);\n\n  vec3 normal \x3d normalize(vNormal);\n  vec3 light \x3d normalize(vLight);\n  vec3 position \x3d normalize(vPosition);\n  \n  // Workaround to avoid gl_FrontFacing. See https://github.com/unconed/mathbox/pull/26\n  vec3 pdx \x3d dFdx(vPosition);\n  vec3 pdy \x3d dFdy(vPosition);\n  bool frontFacting \x3d dot(vNormal, cross(pdx, pdy)) \x3e 0.0;\n\n  float side \x3d frontFacting ? 1.0 : -1.0;\n  float cosine  \x3d side * dot(normal, light);\n  float diffuse \x3d mix(max(0.0, cosine), .5 + .5 * cosine, .1);\n  \n  vec3  halfLight \x3d normalize(light + position);\n\tfloat cosineHalf \x3d max(0.0, side * dot(normal, halfLight));\n\tfloat specular \x3d pow(cosineHalf, 16.0);\n\t\n\treturn vec4(color * (diffuse * .9 + .05) + .25 * color2 * specular, rgba.a);\n}\n"};
shadow$provide[394]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default=""};
shadow$provide[395]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="vec4 getGammaInColor(vec4 rgba) {\n  return vec4(rgba.rgb * rgba.rgb, rgba.a);\n}\n"};
shadow$provide[396]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="vec4 getGammaOutColor(vec4 rgba) {\n  return vec4(sqrt(rgba.rgb), rgba.a);\n}\n"};
shadow$provide[397]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="vec4 mapUVWO(vec4 uvwo, vec4 stpq) {\n  return uvwo;\n}\n"};
shadow$provide[398]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec4 geometryClip;\nattribute vec4 position4;\n\n// External\nvec3 getPosition(vec4 xyzw, float canonical);\n\nvec3 getMeshPosition() {\n  vec4 p \x3d min(geometryClip, position4);\n  return getPosition(p, 1.0);\n}\n"};
shadow$provide[399]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="attribute vec4 position4;\nuniform vec4 geometryClip;\nvarying vec4 vColor;\n\n// External\nvec4 getSample(vec4 xyzw);\n\nvoid vertexColor() {\n  vec4 p \x3d min(geometryClip, position4);\n  vColor \x3d getSample(p);\n}\n"};
shadow$provide[400]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="attribute vec4 position4;\nuniform vec4 geometryResolution;\nuniform vec4 geometryClip;\nvarying float vMask;\n\n// External\nfloat getSample(vec4 xyzw);\n\nvoid maskLevel() {\n  vec4 p \x3d min(geometryClip, position4);\n  vMask \x3d getSample(p * geometryResolution);\n}\n"};
shadow$provide[401]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec4 geometryResolution;\n\n#ifdef POSITION_STPQ\nvarying vec4 vSTPQ;\n#endif\n#ifdef POSITION_U\nvarying float vU;\n#endif\n#ifdef POSITION_UV\nvarying vec2 vUV;\n#endif\n#ifdef POSITION_UVW\nvarying vec3 vUVW;\n#endif\n#ifdef POSITION_UVWO\nvarying vec4 vUVWO;\n#endif\n\n// External\nvec3 getPosition(vec4 xyzw, in vec4 stpqIn, out vec4 stpqOut);\n\nvec3 getMeshPosition(vec4 xyzw, float canonical) {\n  vec4 stpqOut, stpqIn \x3d xyzw * geometryResolution;\n  vec3 xyz \x3d getPosition(xyzw, stpqIn, stpqOut);\n\n  #ifdef POSITION_MAP\n  if (canonical \x3e 0.5) {\n    #ifdef POSITION_STPQ\n    vSTPQ \x3d stpqOut;\n    #endif\n    #ifdef POSITION_U\n    vU \x3d stpqOut.x;\n    #endif\n    #ifdef POSITION_UV\n    vUV \x3d stpqOut.xy;\n    #endif\n    #ifdef POSITION_UVW\n    vUVW \x3d stpqOut.xyz;\n    #endif\n    #ifdef POSITION_UVWO\n    vUVWO \x3d stpqOut;\n    #endif\n  }\n  #endif\n  return xyz;\n}\n"};
shadow$provide[402]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform float transitionEnter;\nuniform float transitionExit;\nuniform vec4  transitionScale;\nuniform vec4  transitionBias;\nuniform float transitionSkew;\nuniform float transitionActive;\n\nuniform vec4  moveFrom;\nuniform vec4  moveTo;\n\nfloat ease(float t) {\n  t \x3d clamp(t, 0.0, 1.0);\n  return 1.0 - (2.0 - t) * t;\n}\n\nvec4 getTransitionPosition(vec4 xyzw, inout vec4 stpq) {\n  if (transitionActive \x3c 0.5) return xyzw;\n\n  float enter   \x3d transitionEnter;\n  float exit    \x3d transitionExit;\n  float skew    \x3d transitionSkew;\n  vec4  scale   \x3d transitionScale;\n  vec4  bias    \x3d transitionBias;\n\n  float factor  \x3d 1.0 + skew;\n  float offset  \x3d dot(vec4(1.0), stpq * scale + bias);\n\n  float a1 \x3d ease(enter * factor - offset);\n  float a2 \x3d ease(exit  * factor + offset - skew);\n\n  return xyzw + a1 * moveFrom + a2 * moveTo;\n}"};
shadow$provide[403]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="vec4 getMask(vec4 xyzw) {\n  return vec4(1.0);\n}"};
shadow$provide[404]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="varying float vPixelSize;\n\nfloat getDiscAlpha(float mask) {\n  // Approximation: 1 - x*x is approximately linear around x \x3d 1 with slope 2\n  return vPixelSize * (1.0 - mask);\n  //  return vPixelSize * 2.0 * (1.0 - sqrt(mask));\n}\n"};
shadow$provide[405]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="varying float vPixelSize;\n\nfloat getDiscHollowAlpha(float mask) {\n  return vPixelSize * (0.5 - 2.0 * abs(sqrt(mask) - .75));\n}\n"};
shadow$provide[406]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="varying float vPixelSize;\n\nfloat getGenericAlpha(float mask) {\n  return vPixelSize * 2.0 * (1.0 - mask);\n}\n"};
shadow$provide[407]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="varying float vPixelSize;\n\nfloat getGenericHollowAlpha(float mask) {\n  return vPixelSize * (0.5 - 2.0 * abs(mask - .75));\n}\n"};
shadow$provide[408]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="varying vec2 vSprite;\n\nfloat getSpriteMask(vec2 xy);\nfloat getSpriteAlpha(float mask);\n\nvoid setFragmentColorFill(vec4 color) {\n  float mask \x3d getSpriteMask(vSprite);\n  if (mask \x3e 1.0) {\n    discard;\n  }\n  float alpha \x3d getSpriteAlpha(mask);\n  if (alpha \x3e\x3d 1.0) {\n    discard;\n  }\n  gl_FragColor \x3d vec4(color.rgb, alpha * color.a);\n}\n"};
shadow$provide[409]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="varying vec2 vSprite;\n\nfloat getSpriteMask(vec2 xy);\nfloat getSpriteAlpha(float mask);\n\nvoid setFragmentColorFill(vec4 color) {\n  float mask \x3d getSpriteMask(vSprite);\n  if (mask \x3e 1.0) {\n    discard;\n  }\n  float alpha \x3d getSpriteAlpha(mask);\n  if (alpha \x3c 1.0) {\n    discard;\n  }\n  gl_FragColor \x3d color;\n}\n\n"};
shadow$provide[410]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="varying float vPixelSize;\n\nfloat getCircleMask(vec2 uv) {\n  return dot(uv, uv);\n}\n"};
shadow$provide[411]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="varying float vPixelSize;\n\nfloat getDiamondMask(vec2 uv) {\n  vec2 a \x3d abs(uv);\n  return a.x + a.y;\n}\n"};
shadow$provide[412]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="varying float vPixelSize;\n\nfloat getTriangleDownMask(vec2 uv) {\n  uv.y +\x3d .25;\n  return max(uv.y, abs(uv.x) * .866 - uv.y * .5 + .6);\n}\n"};
shadow$provide[413]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="varying float vPixelSize;\n\nfloat getTriangleLeftMask(vec2 uv) {\n  uv.x +\x3d .25;\n  return max(uv.x, abs(uv.y) * .866 - uv.x * .5 + .6);\n}\n"};
shadow$provide[414]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="varying float vPixelSize;\n\nfloat getTriangleRightMask(vec2 uv) {\n  uv.x -\x3d .25;\n  return max(-uv.x, abs(uv.y) * .866 + uv.x * .5 + .6);\n}\n"};
shadow$provide[415]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="varying float vPixelSize;\n\nfloat getSquareMask(vec2 uv) {\n  vec2 a \x3d abs(uv);\n  return max(a.x, a.y);\n}\n"};
shadow$provide[416]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="varying float vPixelSize;\n\nfloat getTriangleUpMask(vec2 uv) {\n  uv.y -\x3d .25;\n  return max(-uv.y, abs(uv.x) * .866 + uv.y * .5 + .6);\n}\n"};
shadow$provide[417]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform float pointDepth;\n\nuniform float pixelUnit;\nuniform float renderScale;\nuniform float renderScaleInv;\nuniform float focusDepth;\n\nuniform vec4 geometryClip;\nattribute vec4 position4;\nattribute vec2 sprite;\n\nvarying vec2 vSprite;\nvarying float vPixelSize;\n\nconst float pointScale \x3d POINT_SHAPE_SCALE;\n\n// External\nfloat getPointSize(vec4 xyzw);\nvec3 getPosition(vec4 xyzw, float canonical);\n\nvec3 getPointPosition() {\n  // Discard out-of-range points by generating degenerate face\n  if (\n    position4.x \x3e geometryClip.x ||\n    position4.y \x3e geometryClip.y ||\n    position4.z \x3e geometryClip.z ||\n    position4.w \x3e geometryClip.w\n  ) return vec3(0.0, 0.0, 0.0);\n  vec4 p \x3d position4;\n\n  vec3 center \x3d getPosition(p, 1.0);\n\n  // Depth blending\n  // TODO: orthographic camera\n  // Workaround: set depth \x3d 0\n  float z \x3d -center.z;\n  float depth \x3d mix(z, focusDepth, pointDepth);\n\n  // Match device/unit mapping\n  // Sprite goes from -1..1, width \x3d 2.\n  float pointSize \x3d getPointSize(p);\n  float size \x3d pointScale * pointSize * pixelUnit * .5;\n  float depthSize \x3d depth * size;\n\n  // Pad sprite by half a pixel to make the anti-aliasing straddle the pixel edge\n  // Note: pixelsize measures radius\n  float pixelSize \x3d .5 * (pointDepth \x3e 0.0 ? depthSize / z : size);\n  float paddedSize \x3d pixelSize + 0.5;\n  float padFactor \x3d paddedSize / pixelSize;\n\n  vPixelSize \x3d paddedSize;\n  vSprite    \x3d sprite;\n\n  return center + vec3(sprite * depthSize * renderScaleInv * padFactor, 0.0);\n}\n"};
shadow$provide[418]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform float pointSize;\n\nfloat getPointSize(vec4 xyzw) {\n  return pointSize;\n}"};
shadow$provide[419]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform float pointSize;\n\nvec4 getSample(vec4 xyzw);\n\nfloat getPointSize(vec4 xyzw) {\n  return pointSize * getSample(xyzw).x;\n}"};
shadow$provide[420]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform float polarBend;\nuniform float polarFocus;\nuniform float polarAspect;\nuniform float polarHelix;\n\nuniform mat4 viewMatrix;\n\nvec4 getPolarPosition(vec4 position, inout vec4 stpq) {\n  if (polarBend \x3e 0.0) {\n\n    if (polarBend \x3c 0.001) {\n      // Factor out large addition/subtraction of polarFocus\n      // to avoid numerical error\n      // sin(x) ~ x\n      // cos(x) ~ 1 - x * x / 2\n      vec2 pb \x3d position.xy * polarBend;\n      float ppbbx \x3d pb.x * pb.x;\n      return viewMatrix * vec4(\n        position.x * (1.0 - polarBend + (pb.y * polarAspect)),\n        position.y * (1.0 - .5 * ppbbx) - (.5 * ppbbx) * polarFocus / polarAspect,\n        position.z + position.x * polarHelix * polarBend,\n        1.0\n      );\n    }\n    else {\n      vec2 xy \x3d position.xy * vec2(polarBend, polarAspect);\n      float radius \x3d polarFocus + xy.y;\n      return viewMatrix * vec4(\n        sin(xy.x) * radius,\n        (cos(xy.x) * radius - polarFocus) / polarAspect,\n        position.z + position.x * polarHelix * polarBend,\n        1.0\n      );\n    }\n  }\n  else {\n    return viewMatrix * vec4(position.xyz, 1.0);\n  }\n}"};
shadow$provide[421]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform float styleZBias;\nuniform float styleZIndex;\n\nvoid setPosition(vec3 position) {\n\n  #ifdef PROJECT_ORTHOGONAL\n  // Orthogonal projection with depth preservation around z \x3d 1\n  vec4 pos \x3d projectionMatrix * vec4(position, 1.0);\n  pos.xy *\x3d -position.z;\n  #else\n  // Normal perspective projection\n  vec4 pos \x3d projectionMatrix * vec4(position, 1.0);\n  #endif\n\n  // Apply relative Z bias\n  float bias  \x3d (1.0 - styleZBias / 32768.0);\n  pos.z *\x3d bias;\n\n  // Apply large scale Z index changes\n  if (styleZIndex \x3e 0.0) {\n    float z \x3d pos.z / pos.w;\n    pos.z \x3d ((z + 1.0) / (styleZIndex + 1.0) - 1.0) * pos.w;\n  }\n\n  gl_Position \x3d pos;\n}"};
shadow$provide[422]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="// This is three.js' global uniform, missing from fragment shaders.\nuniform mat4 projectionMatrix;\n\nvec4 readbackPosition(vec3 position, vec4 stpq) {\n  vec4 pos \x3d projectionMatrix * vec4(position, 1.0);\n  vec3 final \x3d pos.xyz / pos.w;\n  if (final.z \x3c -1.0) {\n    return vec4(0.0, 0.0, 0.0, -1.0);\n  }\n  else {\n    return vec4(final, -position.z);\n  }\n}\n"};
shadow$provide[423]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec4 geometryScale;\nattribute vec4 position4;\n\nvec4 getRawPositionScale() {\n  return geometryScale * position4;\n}\n"};
shadow$provide[424]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec4 repeatModulus;\n\nvec4 getRepeatXYZW(vec4 xyzw) {\n  return mod(xyzw + .5, repeatModulus) - .5;\n}\n"};
shadow$provide[425]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec4 resampleBias;\n\nvec4 resamplePadding(vec4 xyzw) {\n  return xyzw + resampleBias;\n}"};
shadow$provide[426]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec4 resampleFactor;\n\nvec4 resampleRelative(vec4 xyzw) {\n  return xyzw * resampleFactor;\n}"};
shadow$provide[427]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform float transitionEnter;\nuniform float transitionExit;\nuniform vec4  transitionScale;\nuniform vec4  transitionBias;\nuniform float transitionSkew;\nuniform float transitionActive;\n\nfloat getTransitionSDFMask(vec4 stpq) {\n  if (transitionActive \x3c 0.5) return 1.0;\n\n  float enter   \x3d transitionEnter;\n  float exit    \x3d transitionExit;\n  float skew    \x3d transitionSkew;\n  vec4  scale   \x3d transitionScale;\n  vec4  bias    \x3d transitionBias;\n\n  float factor  \x3d 1.0 + skew;\n  float offset  \x3d dot(vec4(1.0), stpq * scale + bias);\n\n  vec2 d \x3d vec2(enter, exit) * factor + vec2(-offset, offset - skew);\n  if (exit  \x3d\x3d 1.0) return d.x;\n  if (enter \x3d\x3d 1.0) return d.y;\n  return min(d.x, d.y);\n}"};
shadow$provide[428]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec4 reverseScale;\nuniform vec4 reverseOffset;\n\nvec4 getReverseOffset(vec4 xyzw) {\n  return xyzw * reverseScale + reverseOffset;\n}"};
shadow$provide[429]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="vec3 getRootPosition(vec4 position, in vec4 stpqIn, out vec4 stpqOut) {\n  stpqOut \x3d stpqIn; // avoid inout confusion\n  return position.xyz;\n}"};
shadow$provide[430]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform sampler2D dataTexture;\n\nvec4 sample2D(vec2 uv) {\n  return texture2D(dataTexture, uv);\n}\n"};
shadow$provide[431]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec4 scaleAxis;\nuniform vec4 scaleOffset;\n\nvec4 sampleData(float x);\n\nvec4 getScalePosition(vec4 xyzw) {\n  return scaleAxis * sampleData(xyzw.x).x + scaleOffset;\n}\n"};
shadow$provide[432]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec4 remapSTPQScale;\n\nvec4 screenMapSTPQ(vec4 xyzw, out vec4 stpq) {\n  stpq \x3d xyzw * remapSTPQScale;\n  return xyzw;\n}\n"};
shadow$provide[433]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec2 remapUVScale;\n\nvec4 screenMapXY(vec4 uvwo, vec4 stpq) {\n  return vec4(floor(remapUVScale * uvwo.xy), 0.0, 0.0);\n}\n"};
shadow$provide[434]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec2 remapUVScale;\nuniform vec2 remapModulus;\nuniform vec2 remapModulusInv;\n\nvec4 screenMapXYZW(vec4 uvwo, vec4 stpq) {\n  vec2 st \x3d floor(remapUVScale * uvwo.xy);\n  vec2 xy \x3d st * remapModulusInv;\n  vec2 ixy \x3d floor(xy);\n  vec2 fxy \x3d xy - ixy;\n  vec2 zw \x3d fxy * remapModulus;\n  return vec4(ixy.x, zw.y, ixy.y, zw.x);\n}\n"};
shadow$provide[435]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="vec2 screenPassUV(vec4 uvwo, vec4 stpq) {\n  return uvwo.xy;\n}\n"};
shadow$provide[436]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="void setScreenPosition(vec4 position) {\n  gl_Position \x3d vec4(position.xy * 2.0 - 1.0, 0.5, 1.0);\n}\n"};
shadow$provide[437]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec4 sliceOffset;\n\nvec4 getSliceOffset(vec4 xyzw) {\n  return xyzw + sliceOffset;\n}\n"};
shadow$provide[438]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform float sphericalBend;\nuniform float sphericalFocus;\nuniform float sphericalAspectX;\nuniform float sphericalAspectY;\nuniform float sphericalScaleY;\n\nuniform mat4 viewMatrix;\n\nvec4 getSphericalPosition(vec4 position, inout vec4 stpq) {\n  if (sphericalBend \x3e 0.0001) {\n\n    vec3 xyz \x3d position.xyz * vec3(sphericalBend, sphericalBend / sphericalAspectY * sphericalScaleY, sphericalAspectX);\n    float radius \x3d sphericalFocus + xyz.z;\n    float cosine \x3d cos(xyz.y) * radius;\n\n    return viewMatrix * vec4(\n      sin(xyz.x) * cosine,\n      sin(xyz.y) * radius * sphericalAspectY,\n      (cos(xyz.x) * cosine - sphericalFocus) / sphericalAspectX,\n      1.0\n    );\n  }\n  else {\n    return viewMatrix * vec4(position.xyz, 1.0);\n  }\n}"};
shadow$provide[439]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform float splitStride;\n\nvec2 getIndices(vec4 xyzw);\nvec4 getRest(vec4 xyzw);\nvec4 injectIndex(float v);\n\nvec4 getSplitXYZW(vec4 xyzw) {\n  vec2 uv \x3d getIndices(xyzw);\n  float offset \x3d uv.x + uv.y * splitStride;\n  return injectIndex(offset) + getRest(xyzw);\n}\n"};
shadow$provide[440]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec4 spreadOffset;\nuniform mat4 spreadMatrix;\n\n// External\nvec4 getSample(vec4 xyzw);\n\nvec4 getSpreadSample(vec4 xyzw) {\n  vec4 sample \x3d getSample(xyzw);\n  return sample + spreadMatrix * (spreadOffset + xyzw);\n}\n"};
shadow$provide[441]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="varying vec2 vSprite;\n\nvec4 getSample(vec2 xy);\n\nvec4 getSpriteColor() {\n  return getSample(vSprite);\n}"};
shadow$provide[442]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec2 spriteOffset;\nuniform float spriteScale;\nuniform float spriteDepth;\nuniform float spriteSnap;\n\nuniform vec2 renderOdd;\nuniform float renderScale;\nuniform float renderScaleInv;\nuniform float pixelUnit;\nuniform float focusDepth;\n\nuniform vec4 geometryClip;\nattribute vec4 position4;\nattribute vec2 sprite;\n\nvarying float vPixelSize;\n\n// External\nvec3 getPosition(vec4 xyzw, float canonical);\nvec4 getSprite(vec4 xyzw);\n\nvec3 getSpritePosition() {\n  // Clip points\n  vec4 p \x3d min(geometryClip, position4);\n  float diff \x3d length(position4 - p);\n  if (diff \x3e 0.0) {\n    return vec3(0.0, 0.0, 1000.0);\n  }\n\n  // Make sprites\n  vec3 center \x3d getPosition(p, 1.0);\n  vec4 atlas \x3d getSprite(p);\n\n  // Sprite goes from -1..1, width \x3d 2.\n  // -1..1 -\x3e -0.5..0.5\n  vec2 halfSprite \x3d sprite * .5;\n  vec2 halfFlipSprite \x3d vec2(halfSprite.x, -halfSprite.y);\n\n#ifdef POSITION_UV\n  // Assign UVs\n  vUV \x3d atlas.xy + atlas.zw * (halfFlipSprite + .5);\n#endif\n\n  // Depth blending\n  // TODO: orthographic camera\n  // Workaround: set depth \x3d 0\n  float depth \x3d focusDepth, z;\n  z \x3d -center.z;\n  if (spriteDepth \x3c 1.0) {\n    depth \x3d mix(z, focusDepth, spriteDepth);\n  }\n  \n  // Match device/unit mapping \n  float size \x3d pixelUnit * spriteScale;\n  float depthSize \x3d depth * size;\n\n  // Calculate pixelSize for anti-aliasing\n  float pixelSize \x3d (spriteDepth \x3e 0.0 ? depthSize / z : size);\n  vPixelSize \x3d pixelSize;\n\n  // Position sprite\n  vec2 atlasOdd \x3d fract(atlas.zw / 2.0);\n  vec2 offset \x3d (spriteOffset + halfSprite * atlas.zw) * depthSize;\n  if (spriteSnap \x3e 0.5) {\n    // Snap to pixel (w/ epsilon shift to avoid jitter)\n    return vec3(((floor(center.xy / center.z * renderScale + 0.001) + renderOdd + atlasOdd) * center.z + offset) * renderScaleInv, center.z);\n  }\n  else {\n    // Place directly\n    return center + vec3(offset * renderScaleInv, 0.0);\n  }\n\n}\n"};
shadow$provide[443]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform float stereoBend;\nuniform vec4 basisScale;\nuniform vec4 basisOffset;\nuniform mat4 viewMatrix;\nuniform vec2 view4D;\n\nvec4 getStereographic4Position(vec4 position, inout vec4 stpq) {\n  \n  vec4 transformed;\n  if (stereoBend \x3e 0.0001) {\n\n    float r \x3d length(position);\n    float w \x3d r + position.w;\n    vec4 project \x3d vec4(position.xyz / w, r);\n    \n    transformed \x3d mix(position, project, stereoBend);\n  }\n  else {\n    transformed \x3d position;\n  }\n\n  vec4 pos4 \x3d transformed * basisScale - basisOffset;\n  vec3 xyz \x3d (viewMatrix * vec4(pos4.xyz, 1.0)).xyz;\n  return vec4(xyz, pos4.w * view4D.y + view4D.x);\n}\n"};
shadow$provide[444]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform float stereoBend;\n\nuniform mat4 viewMatrix;\n\nvec4 getStereoPosition(vec4 position, inout vec4 stpq) {\n  if (stereoBend \x3e 0.0001) {\n\n    vec3 pos \x3d position.xyz;\n    float r \x3d length(pos);\n    float z \x3d r + pos.z;\n    vec3 project \x3d vec3(pos.xy / z, r);\n    \n    vec3 lerped \x3d mix(pos, project, stereoBend);\n\n    return viewMatrix * vec4(lerped, 1.0);\n  }\n  else {\n    return viewMatrix * vec4(position.xyz, 1.0);\n  }\n}"};
shadow$provide[445]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="varying vec2 vST;\n\nvec4 getSample(vec2 st);\n\nvec4 getSTSample() {\n  return getSample(vST);\n}\n"};
shadow$provide[446]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="varying vec2 vUV;\n\nvoid setRawUV(vec4 xyzw) {\n  vUV \x3d xyzw.xy;\n}\n"};
shadow$provide[447]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec4 geometryClip;\nattribute vec4 position4;\nattribute vec3 strip;\n\n// External\nvec3 getPosition(vec4 xyzw, float canonical);\n\nvarying vec3 vNormal;\nvarying vec3 vLight;\nvarying vec3 vPosition;\n\nvoid getStripGeometry(vec4 xyzw, vec3 strip, out vec3 pos, out vec3 normal) {\n  vec3 a, b, c;\n\n  a   \x3d getPosition(xyzw, 1.0);\n  b   \x3d getPosition(vec4(xyzw.xyz, strip.x), 0.0);\n  c   \x3d getPosition(vec4(xyzw.xyz, strip.y), 0.0);\n\n  normal \x3d normalize(cross(c - a, b - a)) * strip.z;\n  \n  pos \x3d a;\n}\n\nvec3 getStripPositionNormal() {\n  vec3 center, normal;\n\n  vec4 p \x3d min(geometryClip, position4);\n\n  getStripGeometry(p, strip, center, normal);\n  vNormal   \x3d normal;\n  vLight    \x3d normalize((viewMatrix * vec4(1.0, 2.0, 2.0, 0.0)).xyz);\n  vPosition \x3d -center;\n\n  return center;\n}\n"};
shadow$provide[448]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec3 styleColor;\nuniform float styleOpacity;\n\nvec4 getStyleColor() {\n  return vec4(styleColor, styleOpacity);\n}\n"};
shadow$provide[449]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform float subdivideBevel;\n\n// External\nvec4 sampleData(vec4 xyzw);\n\nvec4 subdivideDepth(vec4 xyzw) {\n  float x \x3d xyzw.z;\n  float i \x3d floor(x);\n  float f \x3d x - i;\n\n  float minf \x3d subdivideBevel * min(f, 1.0 - f);\n  float g \x3d (f \x3e 0.5) ? 1.0 - minf : (f \x3c 0.5) ? minf : 0.5;\n\n  return sampleData(vec4(xyzw.xy, i + g, xyzw.w));\n}\n"};
shadow$provide[450]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform float subdivideBevel;\n\n// External\nvec4 sampleData(vec4 xyzw);\n\nvec4 subdivideDepthLerp(vec4 xyzw) {\n  float x \x3d xyzw.z;\n  float i \x3d floor(x);\n  float f \x3d x - i;\n\n  float minf \x3d subdivideBevel * min(f, 1.0 - f);\n  float g \x3d (f \x3e 0.5) ? 1.0 - minf : (f \x3c 0.5) ? minf : 0.5;\n\n  vec4 xyzw1 \x3d vec4(xyzw.xy, i, xyzw.w);\n  vec4 xyzw2 \x3d vec4(xyzw.xy, i + 1.0, xyzw.w);\n  \n  vec4 a \x3d sampleData(xyzw1);\n  vec4 b \x3d sampleData(xyzw2);\n\n  return mix(a, b, g);\n}\n"};
shadow$provide[451]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform float subdivideBevel;\n\n// External\nvec4 sampleData(vec4 xyzw);\n\nvec4 subdivideHeight(vec4 xyzw) {\n  float x \x3d xyzw.y;\n  float i \x3d floor(x);\n  float f \x3d x - i;\n\n  float minf \x3d subdivideBevel * min(f, 1.0 - f);\n  float g \x3d (f \x3e 0.5) ? 1.0 - minf : (f \x3c 0.5) ? minf : 0.5;\n\n  return sampleData(vec4(xyzw.x, i + g, xyzw.zw));\n}\n"};
shadow$provide[452]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform float subdivideBevel;\n\n// External\nvec4 sampleData(vec4 xyzw);\n\nvec4 subdivideHeightLerp(vec4 xyzw) {\n  float x \x3d xyzw.y;\n  float i \x3d floor(x);\n  float f \x3d x - i;\n\n  float minf \x3d subdivideBevel * min(f, 1.0 - f);\n  float g \x3d (f \x3e 0.5) ? 1.0 - minf : (f \x3c 0.5) ? minf : 0.5;\n\n  vec4 xyzw1 \x3d vec4(xyzw.x, i, xyzw.zw);\n  vec4 xyzw2 \x3d vec4(xyzw.x, i + 1.0, xyzw.zw);\n  \n  vec4 a \x3d sampleData(xyzw1);\n  vec4 b \x3d sampleData(xyzw2);\n\n  return mix(a, b, g);\n}\n"};
shadow$provide[453]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform float subdivideBevel;\n\n// External\nvec4 sampleData(vec4 xyzw);\n\nvec4 subdivideItems(vec4 xyzw) {\n  float x \x3d xyzw.w;\n  float i \x3d floor(x);\n  float f \x3d x - i;\n\n  float minf \x3d subdivideBevel * min(f, 1.0 - f);\n  float g \x3d (f \x3e 0.5) ? 1.0 - minf : (f \x3c 0.5) ? minf : 0.5;\n\n  return sampleData(vec4(xyzw.xyz, i + g));\n}\n"};
shadow$provide[454]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform float subdivideBevel;\n\n// External\nvec4 sampleData(vec4 xyzw);\n\nvec4 subdivideItemsLerp(vec4 xyzw) {\n  float x \x3d xyzw.w;\n  float i \x3d floor(x);\n  float f \x3d x - i;\n\n  float minf \x3d subdivideBevel * min(f, 1.0 - f);\n  float g \x3d (f \x3e 0.5) ? 1.0 - minf : (f \x3c 0.5) ? minf : 0.5;\n\n  vec4 xyzw1 \x3d vec4(xyzw.xyz, i);\n  vec4 xyzw2 \x3d vec4(xyzw.xyz, i + 1.0);\n  \n  vec4 a \x3d sampleData(xyzw1);\n  vec4 b \x3d sampleData(xyzw2);\n\n  return mix(a, b, g);\n}\n"};
shadow$provide[455]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform float subdivideBevel;\n\n// External\nvec4 sampleData(vec4 xyzw);\n\nvec4 subdivideWidth(vec4 xyzw) {\n  float x \x3d xyzw.x;\n  float i \x3d floor(x);\n  float f \x3d x - i;\n\n  float minf \x3d subdivideBevel * min(f, 1.0 - f);\n  float g \x3d (f \x3e 0.5) ? 1.0 - minf : (f \x3c 0.5) ? minf : 0.5;\n\n  return sampleData(vec4(i + g, xyzw.yzw));\n}\n"};
shadow$provide[456]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform float subdivideBevel;\n\n// External\nvec4 sampleData(vec4 xyzw);\n\nvec4 subdivideWidthLerp(vec4 xyzw) {\n  float x \x3d xyzw.x;\n  float i \x3d floor(x);\n  float f \x3d x - i;\n\n  float minf \x3d subdivideBevel * min(f, 1.0 - f);\n  float g \x3d (f \x3e 0.5) ? 1.0 - minf : (f \x3c 0.5) ? minf : 0.5;\n\n  vec4 xyzw1 \x3d vec4(i, xyzw.yzw);\n  vec4 xyzw2 \x3d vec4(i + 1.0, xyzw.yzw);\n  \n  vec4 a \x3d sampleData(xyzw1);\n  vec4 b \x3d sampleData(xyzw2);\n\n  return mix(a, b, g);\n}\n"};
shadow$provide[457]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="attribute vec4 position4;\n\nfloat getSurfaceHollowMask(vec4 xyzw) {\n  vec4 df \x3d abs(fract(position4) - .5);\n  vec2 df2 \x3d min(df.xy, df.zw);\n  float df3 \x3d min(df2.x, df2.y);\n  return df3;\n}"};
shadow$provide[458]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec4 geometryClip;\nuniform vec4 geometryResolution;\nuniform vec4 mapSize;\n\nattribute vec4 position4;\n\n// External\nvec3 getPosition(vec4 xyzw, float canonical);\n\nvec3 getSurfacePosition() {\n  vec4 p \x3d min(geometryClip, position4);\n\n#ifdef SURFACE_CLOSED_X\n  if (p.x \x3d\x3d geometryClip.x) p.x \x3d 0.0;\n#endif\n#ifdef SURFACE_CLOSED_Y\n  if (p.y \x3d\x3d geometryClip.y) p.y \x3d 0.0;\n#endif\n\n  vec3 xyz \x3d getPosition(p, 1.0);\n\n  // Overwrite UVs\n#ifdef POSITION_UV\n#ifdef POSITION_UV_INT\n  vUV \x3d -.5 + (position4.xy * geometryResolution.xy) * mapSize.xy;\n#else\n  vUV \x3d position4.xy * geometryResolution.xy;\n#endif\n#endif\n\n  return xyz;\n}\n"};
shadow$provide[459]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec4 mapSize;\nuniform vec4 geometryResolution;\nuniform vec4 geometryClip;\nattribute vec4 position4;\n\n// External\nvec3 getPosition(vec4 xyzw, float canonical);\nvec3 getNormal(vec4 xyzw);\n\nvarying vec3 vNormal;\nvarying vec3 vLight;\nvarying vec3 vPosition;\n\nvec3 getSurfacePositionNormal() {\n\n  vec4 p \x3d min(geometryClip, position4);\n#ifdef SURFACE_CLOSED_X\n  if (p.x \x3d\x3d geometryClip.x) p.x \x3d 0.0;\n#endif\n#ifdef SURFACE_CLOSED_Y\n  if (p.y \x3d\x3d geometryClip.y) p.y \x3d 0.0;\n#endif\n\n  vec3 center \x3d getPosition(p, 1.0);\n  vNormal     \x3d normalMatrix * normalize(getNormal(p));\n  vLight      \x3d normalize((viewMatrix * vec4(1.0, 2.0, 2.0, 0.0)).xyz); // hardcoded directional light\n  vPosition   \x3d -center;\n\n#ifdef POSITION_UV\n#ifdef POSITION_UV_INT\n  vUV \x3d -.5 + (position4.xy * geometryResolution.xy) * mapSize.xy;\n#else\n  vUV \x3d position4.xy * geometryResolution.xy;\n#endif\n#endif\n\n  return center;\n}\n"};
shadow$provide[460]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform vec4 mapSize;\nuniform vec4 geometryResolution;\nuniform vec4 geometryClip;\nattribute vec4 position4;\n\n// External\nvec3 getPosition(vec4 xyzw, float canonical);\n\nvec4 wrapAround(vec4 xyzw) {\n#ifdef SURFACE_CLOSED_X\n  float gx \x3d geometryClip.x;\n  if (xyzw.x \x3c 0.0) xyzw.x +\x3d gx;\n  if (xyzw.x \x3e\x3d gx) xyzw.x -\x3d gx;\n#endif\n#ifdef SURFACE_CLOSED_Y\n  float gy \x3d geometryClip.y;\n  if (xyzw.y \x3c 0.0) xyzw.y +\x3d gy;\n  if (xyzw.y \x3e\x3d gy) xyzw.y -\x3d gy;\n#endif\n  return xyzw;\n}\n\nvoid getSurfaceGeometry(vec4 xyzw, float edgeX, float edgeY, out vec3 left, out vec3 center, out vec3 right, out vec3 up, out vec3 down) {\n  vec4 deltaX \x3d vec4(1.0, 0.0, 0.0, 0.0);\n  vec4 deltaY \x3d vec4(0.0, 1.0, 0.0, 0.0);\n\n  center \x3d                  getPosition(xyzw, 1.0);\n  left   \x3d                  center;\n  down   \x3d                  center;\n  right  \x3d (edgeX \x3c 0.5)  ? getPosition(wrapAround(xyzw + deltaX), 0.0) : (2.0 * center - getPosition(xyzw - deltaX, 0.0));\n  up     \x3d (edgeY \x3c 0.5)  ? getPosition(wrapAround(xyzw + deltaY), 0.0) : (2.0 * center - getPosition(xyzw - deltaY, 0.0));\n}\n\nvec3 getSurfaceNormal(vec3 left, vec3 center, vec3 right, vec3 up, vec3 down) {\n  vec3 dx \x3d right - left;\n  vec3 dy \x3d up    - down;\n  vec3 n \x3d cross(dy, dx);\n  if (length(n) \x3e 0.0) {\n    return normalize(n);\n  }\n  return vec3(0.0, 1.0, 0.0);\n}\n\nvarying vec3 vNormal;\nvarying vec3 vLight;\nvarying vec3 vPosition;\n\nvec3 getSurfacePositionShaded() {\n  vec3 left, center, right, up, down;\n\n  vec4 p \x3d min(geometryClip, position4);\n  vec2 surface \x3d vec2(0.0);\n#ifdef SURFACE_CLOSED_X\n  if (p.x \x3d\x3d geometryClip.x) p.x \x3d 0.0;\n#else\n  if (p.x \x3d\x3d geometryClip.x) surface.x \x3d 1.0;\n  //if (p.x \x3d\x3d 0.0) surface.x \x3d -1.0;\n#endif\n#ifdef SURFACE_CLOSED_Y\n  if (p.y \x3d\x3d geometryClip.y) p.y \x3d 0.0;\n#else\n  if (p.y \x3d\x3d geometryClip.y) surface.y \x3d 1.0;\n  //if (p.y \x3d\x3d 0.0) surface.y \x3d -1.0;\n#endif\n\n  getSurfaceGeometry(p, surface.x, surface.y, left, center, right, up, down);\n  vNormal   \x3d getSurfaceNormal(left, center, right, up, down);\n  vLight    \x3d normalize((viewMatrix * vec4(1.0, 2.0, 2.0, 0.0)).xyz); // hardcoded directional light\n  vPosition \x3d -center;\n\n#ifdef POSITION_UV\n#ifdef POSITION_UV_INT\n  vUV \x3d -.5 + (position4.xy * geometryResolution.xy) * mapSize.xy;\n#else\n  vUV \x3d position4.xy * geometryResolution.xy;\n#endif\n#endif\n\n  return center;\n}\n"};
shadow$provide[461]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform float worldUnit;\nuniform float focusDepth;\nuniform float tickSize;\nuniform float tickEpsilon;\nuniform vec3  tickNormal;\nuniform vec2  tickStrip;\n\nvec4 getSample(vec4 xyzw);\n\nvec3 transformPosition(vec4 position, in vec4 stpqIn, out vec4 stpqOut);\n\nvec3 getTickPosition(vec4 xyzw, in vec4 stpqIn, out vec4 stpqOut) {\n  float epsilon \x3d tickEpsilon;\n\n  // determine tick direction\n  float leftX  \x3d max(tickStrip.x, xyzw.y - 1.0);\n  float rightX \x3d min(tickStrip.y, xyzw.y + 1.0);\n  \n  vec4 left    \x3d getSample(vec4(leftX,  xyzw.zw, 0.0));\n  vec4 right   \x3d getSample(vec4(rightX, xyzw.zw, 0.0));\n  vec4 diff    \x3d right - left;\n\n  vec3 normal  \x3d cross(normalize(diff.xyz + vec3(diff.w)), tickNormal);\n  float bias   \x3d max(0.0, 1.0 - length(normal) * 2.0);\n       normal  \x3d mix(normal, tickNormal.yzx, bias * bias);\n  \n  // transform (point) and (point + delta)\n  vec4 center  \x3d getSample(vec4(xyzw.yzw, 0.0));\n  vec4 delta   \x3d vec4(normal, 0.0) * epsilon;\n\n  vec4 a \x3d center;\n  vec4 b \x3d center + delta;\n\n  vec4 _;\n  vec3 c \x3d transformPosition(a, stpqIn, stpqOut);\n  vec3 d \x3d transformPosition(b, stpqIn, _);\n  \n  // sample on either side to create line\n  float line \x3d xyzw.x - .5;\n  vec3  mid  \x3d c;\n  vec3  side \x3d normalize(d - c);\n\n  return mid + side * line * tickSize * worldUnit * focusDepth;\n}\n"};
shadow$provide[462]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform mat4 transformMatrix;\n\nvec4 transformPosition(vec4 position, inout vec4 stpq) {\n  return transformMatrix * vec4(position.xyz, 1.0);\n}\n"};
shadow$provide[463]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="uniform mat4 transformMatrix;\nuniform vec4 transformOffset;\n\nvec4 transformPosition(vec4 position, inout vec4 stpq) {\n  return transformMatrix * position + transformOffset;\n}\n"};
shadow$provide[464]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.default=void 0;m.default="// Implicit three.js uniform\n// uniform mat4 viewMatrix;\n\nvec4 getViewPosition(vec4 position, inout vec4 stpq) {\n  return (viewMatrix * vec4(position.xyz, 1.0));\n}\n"};
shadow$provide[465]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Graph=void 0;class t{static initClass(){this.IN=this.index=0;this.OUT=1}static id(p){return++t.index}constructor(p,n=null){this.parent=n;this.id=t.id();this.nodes=[];p&&this.add(p)}inputs(){const p=[];for(const n of Array.from(this.nodes))for(const c of Array.from(n.inputs))null===c.input&&p.push(c);return p}outputs(){const p=[];for(const n of Array.from(this.nodes))for(const c of Array.from(n.outputs))0===c.output.length&&
p.push(c);return p}getIn(p){return Array.from(this.inputs()).filter(n=>n.name===p)[0]}getOut(p){return Array.from(this.outputs()).filter(n=>n.name===p)[0]}add(p,n){if(p.length)for(const c of Array.from(p))this.add(c);else{if(p.graph&&!n)throw Error("Adding node to two graphs at once");p.graph=this;this.nodes.push(p)}}remove(p,n){if(p.length)for(const c of Array.from(p))this.remove(c);else{if(p.graph!==this)throw Error("Removing node from wrong graph.");n||p.disconnect();this.nodes.splice(this.nodes.indexOf(p),
1);p.graph=null}}adopt(p){if(p.length)for(const n of Array.from(p))this.adopt(n);else p.graph.remove(p,!0),this.add(p,!0)}}m.Graph=t;t.initClass()};
shadow$provide[466]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Outlet=void 0;var t=v(465);class p{static initClass(){this.index=0}static make(n,c){null==c&&(c={});if(null!=n.meta)for(const e in n.meta)c[e]=n.meta[e];return new p(n.inout,n.name,n.hint,n.type,c)}static id(n){return`_io_${++p.index}_${n}`}static hint(n){n=n.replace(/^_io_[0-9]+_/,"");n=n.replace(/_i_o$/,"");return n.replace(/(In|Out|Inout|InOut)$/,"")}constructor(n,c,e,f,h,k){this.inout=n;this.name=c;this.hint=
e;this.type=f;null==h&&(h={});this.meta=h;this.id=k;null==this.hint&&(this.hint=p.hint(this.name));this.input=this.node=null;this.output=[];null==this.id&&(this.id=p.id(this.hint))}morph(n){this.inout=n.inout;this.name=n.name;this.hint=n.hint;this.type=n.type;return this.meta=n.meta}dupe(n){null==n&&(n=this.id);const c=p.make(this);c.name=n;return c}connect(n){if(this.inout===t.Graph.IN&&n.inout===t.Graph.OUT)return n.connect(this);if(this.inout!==t.Graph.OUT||n.inout!==t.Graph.IN)throw Error("Can only connect out to in.");
if(n.input!==this)return n.disconnect(),n.input=this,this.output.push(n)}disconnect(n){this.input&&this.input.disconnect(this);if(this.output.length)if(n){const c=this.output.indexOf(n);if(0<=c)return this.output.splice(c,1),n.input=null}else{for(n of Array.from(this.output))n.input=null;return this.output=[]}}}m.Outlet=p;p.initClass()};
shadow$provide[467]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Node=void 0;var t=v(465),p=v(466);class n{static initClass(){this.index=0}static id(c){return++n.index}constructor(c,e){this.owner=c;this.graph=null;this.inputs=[];this.outputs=[];this.all=[];this.outlets=null;this.id=n.id();this.setOutlets(e)}getIn(c){return Array.from(this.inputs).filter(e=>e.name===c)[0]}getOut(c){return Array.from(this.outputs).filter(e=>e.name===c)[0]}get(c){return this.getIn(c)||this.getOut(c)}setOutlets(c){if(null!=
c){let e;if(null==this.outlets){this.outlets={};for(e of Array.from(c))e instanceof p.Outlet||(e=p.Outlet.make(e)),this._add(e);return}const f={};for(e of Array.from(c))f[[e.name,e.inout,e.type].join("-")]=!0;for(let h in this.outlets)e=this.outlets[h],h=[e.name,e.inout,e.type].join("-"),f[h]?f[h]=e:this._remove(e);for(e of Array.from(c))c=f[[e.name,e.inout,e.type].join("-")],c instanceof p.Outlet?this._morph(c,e):(e instanceof p.Outlet||(e=p.Outlet.make(e)),this._add(e));this}return this.outlets}connect(c,
e,f){let h;let k;const g={},r={};for(h of Array.from(c.inputs))if(f||!h.input)({type:u}=h),c=u+"/"+h.hint,r[c]||(r[c]=h),g[u]=c=g[u]||[],c.push(h);f=this.outputs;f=f.filter(w=>!(e&&w.output.length));for(k of Array.from(f.slice())){({type:u}=k);c=u+"/"+k.hint;var u=g[u];if(h=r[c])k.connect(h),delete r[c],u.splice(u.indexOf(h),1),f.splice(f.indexOf(k),1)}if(!f.length)return this;for(k of Array.from(f.slice()))({type:u}=k),(u=g[u])&&u.length&&k.connect(u.shift());return this}disconnect(c){let e;for(e of Array.from(this.inputs))e.disconnect();
for(e of Array.from(this.outputs))e.disconnect();return this}_key(c){return[c.name,c.inout].join("-")}_add(c){const e=this._key(c);if(c.node)throw Error("Adding outlet to two nodes at once.");if(this.outlets[e])throw Error(`Adding two identical outlets to same node. (${e})`);c.node=this;c.inout===t.Graph.IN&&this.inputs.push(c);c.inout===t.Graph.OUT&&this.outputs.push(c);this.all.push(c);return this.outlets[e]=c}_morph(c,e){let f=this._key(e);delete this.outlets[f];c.morph(e);f=this._key(e);return this.outlets[f]=
e}_remove(c){const e=this._key(c);if(c.node!==this)throw Error("Removing outlet from wrong node.");c.disconnect();c.node=null;delete this.outlets[e];c.inout===t.Graph.IN&&this.inputs.splice(this.inputs.indexOf(c),1);c.inout===t.Graph.OUT&&this.outputs.splice(this.outputs.indexOf(c),1);this.all.splice(this.all.indexOf(c),1);return this}}m.Node=n;n.initClass()};
shadow$provide[468]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});var t={IN:!0,OUT:!0};m.OUT=m.IN=void 0;var p=v(465);Object.keys(p).forEach(function(h){"default"!==h&&"__esModule"!==h&&(Object.prototype.hasOwnProperty.call(t,h)||h in m&&m[h]===p[h]||Object.defineProperty(m,h,{enumerable:!0,get:function(){return p[h]}}))});var n=v(467);Object.keys(n).forEach(function(h){"default"!==h&&"__esModule"!==h&&(Object.prototype.hasOwnProperty.call(t,h)||h in m&&m[h]===n[h]||Object.defineProperty(m,
h,{enumerable:!0,get:function(){return n[h]}}))});var c=v(466);Object.keys(c).forEach(function(h){"default"!==h&&"__esModule"!==h&&(Object.prototype.hasOwnProperty.call(t,h)||h in m&&m[h]===c[h]||Object.defineProperty(m,h,{enumerable:!0,get:function(){return c[h]}}))});const {IN:e,OUT:f}=p.Graph;m.OUT=f;m.IN=e};
shadow$provide[469]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Snippet=void 0;class t{static initClass(){this.index=0}static namespace(){return`_sn_${++t.index}_`}static load(p,n,c){const e=p.parse(n,c),[f,h]=Array.from(p.compile(e));return new t(p,f,h,n,c)}constructor(p,n,c,e,f){this.language=p;this._signatures=n;this._compiler=c;this._name=e;this._original=f;this.varyings=this.attributes=this.symbols=this.externals=this.uniforms=this.entry=this.main=this.code=this.namespace=
null;this.language||delete this.language;this._signatures||delete this._signatures;this._compiler||delete this._compiler;this._original||delete this._original;this._name||(this._name=null!=this._signatures?this._signatures.main.name:void 0)}clone(){return new t(this.language,this._signatures,this._compiler,this._name,this._original)}bind(p,n,c,e){let f;var h;let k;n===""+n?[c,n,e]=Array.from([n,null!=c?c:{},null!=e?e:{}]):c!==""+c&&([e,c]=Array.from([null!=c?c:{},void 0]));this.main=this._signatures.main;
this.namespace=null!=(h=null!=c?c:this.namespace)?h:t.namespace();this.entry=this.namespace+this.main.name;this.uniforms={};this.varyings={};this.attributes={};this.externals={};this.symbols=[];c={};const g={};h=function(C){g[C]=!0;return C};const r=C=>this.namespace+C;if(p.globals)for(var u of Array.from(p.globals))h(u);const w=p.globalUniforms?h:r,x=p.globalVaryings?h:r,B=p.globalAttributes?h:r;p=(C,H)=>this.uniforms[w(null!=H?H:C.name)]=C;k=C=>this.varyings[x(C.name)]=C;u=C=>this.attributes[B(C.name)]=
C;h=C=>{const H=r(C.name);this.externals[H]=C;return this.symbols.push(H)};const E=C=>({type:C.type,name:C.name,value:C.value});for(f of Array.from(this._signatures.uniform))c[f.name]=!0;for(f of Array.from(this._signatures.uniform))p(E(f));for(f of Array.from(this._signatures.varying))k(E(f));for(f of Array.from(this._signatures.external))h(f);for(f of Array.from(this._signatures.attribute))u(E(f));for(const C in n)f=n[C],c[C]&&p(f,C);this.body=this.code=this._compiler(this.namespace,g,e);e&&(n=
(()=>{const C=[];for(const H in e)k=e[H],C.push(`#define ${H} ${k}`);return C})().join("\n"),n.length&&(this._original=[n,"//----------------------------------------",this._original].join("\n")));return null}}m.Snippet=t;t.initClass()};
shadow$provide[470]=function(z,v,J,m){m.make=function(t){null==t&&(t=[]);t instanceof Array||(t=[+t]);return t};m.nest=(t,p)=>t.concat(p);m.compare=function(t,p){var n=Math.min(t.length,p.length);for(let c=0,e=n,f=0<=e;f?c<e:c>e;f?c++:c--){n=t[c];const h=p[c];if(n>h)return-1;if(n<h)return 1}t=t.length;p=p.length;return t>p?-1:t<p?1:0};m.max=function(t,p){return 0<m.compare(t,p)?p:t}};
shadow$provide[471]=function(z,v,J,m){function t(e){if("function"!==typeof WeakMap)return null;var f=new WeakMap,h=new WeakMap;return(t=function(k){return k?h:f})(e)}function p(e,f){if(!f&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};if((f=t(f))&&f.has(e))return f.get(e);var h={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor,g;for(g in e)if("default"!==g&&Object.prototype.hasOwnProperty.call(e,g)){var r=k?Object.getOwnPropertyDescriptor(e,
g):null;r&&(r.get||r.set)?Object.defineProperty(h,g,r):h[g]=e[g]}h.default=e;f&&f.set(e,h);return h}Object.defineProperty(m,"__esModule",{value:!0});m.assemble=void 0;var n=p(v(468)),c=p(v(470));m.assemble=function(e,f,h,k){const g={},r=[],u={},w={},x={},B={},E=Q=>{let W;Q=(()=>{const ca=[];for(const ka in Q)W=Q[ka],ca.push(W);return ca})();Q.sort((ca,ka)=>ka.priority-ca.priority);const R=(ca,ka,la)=>{H(ca,ka,la);({main:la}=ka);({entry:ka}=ka);return e.call(Aa=>O(ca,Aa),Aa=>K(ca,Aa),ka,la.signature,
X)},X=e.body();for(W of Array.from(Q))R(W.node,W.module,W.priority);return[X,Q]},C=function(Q,W,R){const X=B[Q];return null!=X?X.priority=c.max(X.priority,R):B[Q]={code:W,priority:R}},H=function(Q,W,R){let X;R=c.make(R);for(const ca in W.library){const ka=W.library[ca];C(ca,ka.code,c.nest(R,ka.priority))}C(W.namespace,W.body,R);for(X in W.uniforms)R=W.uniforms[X],u[X]=R;for(X in W.varyings)R=W.varyings[X],w[X]=R;for(X in W.attributes)R=W.attributes[X],x[X]=R;return I(Q,W)},I=(Q,W)=>{const R=[];for(const X of Array.from(W.symbols)){const ca=
W.externals[X];if(K(Q,ca.name)){const ka={};for(const la in ca)ka[la]=ca[la];ka.name=O(Q,ca.name);g[X]=ka;R.push(r.push(X))}else R.push(void 0)}return R},K=function(Q,W){Q=Q.get(W);if(Q.inout===n.IN)return null===Q.input;if(Q.inout===n.OUT)return 0===Q.output.length},O=function(Q,W){Q=Q.get(W);if(!Q)return null;Q.input&&(Q=Q.input);({name:W}=Q);return Q.id};return function(){let Q;for(Q in k){var W=k[Q];I(W.node,W.module)}[W,h]=Array.from(E(h));null!=f&&(W.entry=f);W=e.build(W,h);var R=(()=>{const X=
[];for(Q in B)X.push(B[Q]);return X})().sort((X,ca)=>c.compare(X.priority,ca.priority)).map(X=>X.code);R.push(W.code);R=e.lines(R);return{namespace:W.name,library:B,body:W.code,code:R,main:W,entry:W.name,symbols:r,externals:g,uniforms:u,varyings:w,attributes:x}}()}};
shadow$provide[472]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Program=void 0;var t=v(469),p=v(471);class n{static initClass(){this.index=0}static entry(){return`_pg_${++n.index}_`}constructor(c,e,f){this.language=c;this.namespace=e;this.graph=f;this.calls={};this.requires={}}call(c,e,f){let h;const k=e.namespace;(h=this.calls[k])?h.priority=Math.max(h.priority,f):this.calls[k]={node:c,module:e,priority:f};return this}require(c,e){return this.requires[e.namespace]={node:c,
module:e}}assemble(){const c=(0,p.assemble)(this.language,null!=this.namespace?this.namespace:n.entry,this.calls,this.requires),e=new t.Snippet;for(const f in c)e[f]=c[f];e.graph=this.graph;return e}}m.Program=n;n.initClass()};
shadow$provide[473]=function(z,v,J,m){function t(e){if("function"!==typeof WeakMap)return null;var f=new WeakMap,h=new WeakMap;return(t=function(k){return k?h:f})(e)}function p(e,f){if(!f&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};if((f=t(f))&&f.has(e))return f.get(e);var h={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor,g;for(g in e)if("default"!==g&&Object.prototype.hasOwnProperty.call(e,g)){var r=k?Object.getOwnPropertyDescriptor(e,
g):null;r&&(r.get||r.set)?Object.defineProperty(h,g,r):h[g]=e[g]}h.default=e;f&&f.set(e,h);return h}Object.defineProperty(m,"__esModule",{value:!0});m.link=void 0;var n=p(v(468)),c=p(v(470));m.link=function(e,f,h,k){let g=[];const r=[],u={},w={},x={},B={},E={},C=function(I,K,O){const Q=E[I];return null!=Q?Q.priority=c.max(Q.priority,O):E[I]={code:K,priority:O}},H=function(I,K,O){let Q;O=c.make(O);for(var W in K.library){var R=K.library[W];C(W,R.code,c.nest(O,R.priority))}C(K.namespace,K.body,O);for(Q in K.uniforms)O=
K.uniforms[Q],w[Q]=O;for(Q in K.varyings)O=K.varyings[Q],B[Q]=O;for(Q in K.attributes)O=K.attributes[Q],x[Q]=O;O=[];for(Q of Array.from(K.symbols)){W=K.externals[Q];{R=I;var X=W.name;const ca=R.get(X);if(!ca)throw Error(`Unable to link program. Unlinked callback \`${X}\` on \`${null!=(null!=R.owner.snippet?R.owner.snippet._name:void 0)?null!=R.owner.snippet?R.owner.snippet._name:void 0:R.owner.namespace}\``);R=ca.inout===n.IN?null===ca.input:ca.inout===n.OUT?0===ca.output.length:void 0}R?(u[Q]=W,
O.push(r.push(Q))):O.push(void 0)}return O};return function(){var I=e.links(f);const K=[];null!=I.defs&&K.push(I.defs);null!=I.bodies&&K.push(I.bodies);for(const O of Array.from(h))H(O.node,O.module,O.priority);g=(()=>{const O=[];for(const Q in E)O.push(E[Q]);return O})().sort((O,Q)=>c.compare(O.priority,Q.priority)).map(O=>O.code);I=e.lines(g);I=e.defuse(I);K.length&&(I=[e.lines(K),I].join("\n"));I=e.hoist(I);I=e.dedupe(I);return{namespace:k.main.name,code:I,main:k.main,entry:k.main.name,externals:u,
uniforms:w,attributes:x,varyings:B}}()}};
shadow$provide[474]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Layout=void 0;var t=v(469),p=v(473);class n{constructor(c,e){this.language=c;this.graph=e;this.links=[];this.includes=[];this.modules={};this.visits={}}callback(c,e,f,h,k){return this.links.push({node:c,module:e,priority:f,name:h,external:k})}include(c,e,f){let h;if(null!=(h=this.modules[e.namespace]))return h.priority=Math.max(f,h.priority);this.modules[e.namespace]=!0;return this.includes.push({node:c,module:e,
priority:f})}visit(c){return this.visits[c]?!1:this.visits[c]=!0}link(c){c=(0,p.link)(this.language,this.links,this.includes,c);const e=new t.Snippet;for(const f in c)e[f]=c[f];e.graph=this.graph;return e}}m.Layout=n};
shadow$provide[475]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});var t={load:!0};m.load=void 0;var p=v(469);Object.keys(p).forEach(function(k){"default"!==k&&"__esModule"!==k&&(Object.prototype.hasOwnProperty.call(t,k)||k in m&&m[k]===p[k]||Object.defineProperty(m,k,{enumerable:!0,get:function(){return p[k]}}))});var n=v(472);Object.keys(n).forEach(function(k){"default"!==k&&"__esModule"!==k&&(Object.prototype.hasOwnProperty.call(t,k)||k in m&&m[k]===n[k]||Object.defineProperty(m,
k,{enumerable:!0,get:function(){return n[k]}}))});var c=v(474);Object.keys(c).forEach(function(k){"default"!==k&&"__esModule"!==k&&(Object.prototype.hasOwnProperty.call(t,k)||k in m&&m[k]===c[k]||Object.defineProperty(m,k,{enumerable:!0,get:function(){return c[k]}}))});var e=v(471);Object.keys(e).forEach(function(k){"default"!==k&&"__esModule"!==k&&(Object.prototype.hasOwnProperty.call(t,k)||k in m&&m[k]===e[k]||Object.defineProperty(m,k,{enumerable:!0,get:function(){return e[k]}}))});var f=v(473);
Object.keys(f).forEach(function(k){"default"!==k&&"__esModule"!==k&&(Object.prototype.hasOwnProperty.call(t,k)||k in m&&m[k]===f[k]||Object.defineProperty(m,k,{enumerable:!0,get:function(){return f[k]}}))});var h=v(470);Object.keys(h).forEach(function(k){"default"!==k&&"__esModule"!==k&&(Object.prototype.hasOwnProperty.call(t,k)||k in m&&m[k]===h[k]||Object.defineProperty(m,k,{enumerable:!0,get:function(){return h[k]}}))});({load:z}=p.Snippet);m.load=z};
shadow$provide[476]=function(z,v,J,m){function t(h){if("function"!==typeof WeakMap)return null;var k=new WeakMap,g=new WeakMap;return(t=function(r){return r?g:k})(h)}function p(h,k){return"undefined"!==typeof h&&null!==h?k(h):void 0}Object.defineProperty(m,"__esModule",{value:!0});m.Block=void 0;var n=function(h,k){if(!k&&h&&h.__esModule)return h;if(null===h||"object"!==typeof h&&"function"!==typeof h)return{default:h};if((k=t(k))&&k.has(h))return k.get(h);var g={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor,
u;for(u in h)if("default"!==u&&Object.prototype.hasOwnProperty.call(h,u)){var w=r?Object.getOwnPropertyDescriptor(h,u):null;w&&(w.get||w.set)?Object.defineProperty(g,u,w):g[u]=h[u]}g.default=h;k&&k.set(h,g);return g}(v(468)),c=v(475);class e{static previous(h){return null!=h.input?h.input.node.owner:void 0}constructor(h){null==h&&(h=!1);h||this.construct()}construct(){let h;null==this.namespace&&(this.namespace=c.Program.entry());return this.node=new n.Node(this,null!=(h="function"===typeof this.makeOutlets?
this.makeOutlets():void 0)?h:{})}refresh(){let h;return this.node.setOutlets(null!=(h="function"===typeof this.makeOutlets?this.makeOutlets():void 0)?h:{})}clone(){return new e}compile(h,k){h=new c.Program(h,null!=k?k:c.Program.entry(),this.node.graph);this.call(h,0);return h.assemble()}link(h,k){k=this.compile(h,k);h=new c.Layout(h,this.node.graph);this._include(k,h,0);this.export(h,0);return h.link(k)}call(h,k){}callback(h,k,g,r,u){}export(h,k){}_info(h){let k=null!=(null!=this.node.owner.snippet?
this.node.owner.snippet._name:void 0)?null!=this.node.owner.snippet?this.node.owner.snippet._name:void 0:this.node.owner.namespace;if(null!=h)return k+("."+h)}_outlet(h,k){k=n.Outlet.make(h,k);k.meta.def=h;return k}_call(h,k,g){return k.call(this.node,h,g)}_require(h,k){return k.require(this.node,h)}_inputs(h,k,g){return(()=>{const r=[];for(const u of Array.from(h.main.signature)){const w=this.node.get(u.name);r.push(p(e.previous(w),x=>x.call(k,g+1)))}return r})()}_callback(h,k,g,r,u,w){return k.callback(this.node,
h,g,r,u,w)}_include(h,k,g){return k.include(this.node,h,g)}_link(h,k,g){return(()=>{const r=[];for(const u of Array.from(h.symbols)){const w=h.externals[u];let x=this.node.get(w.name);if(!x)throw new f(`External not found on ${this._info(w.name)}`);if(null!=x.meta.child)continue;let B=x,E;for(;!E&&B;)[B,x]=Array.from([x.meta.parent,B]);E=e.previous(x);if(!E)throw new f(`Missing connection on ${this._info(w.name)}`);E.callback(k,g+1,u,w,x.input);r.push(null!=E?E.export(k,g+1):void 0)}return r})()}_trace(h,
k,g){return(()=>{const r=[];for(const u of Array.from(h.main.signature)){const w=this.node.get(u.name);r.push(p(e.previous(w),x=>x.export(k,g+1)))}return r})()}}m.Block=e;const f=function(h){h=Error(h);h.name="OutletError";return h};f.prototype=Error()};
shadow$provide[477]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Call=void 0;z=v(476);class t extends z.Block{constructor(p){super(!0);this.snippet=p;this.namespace=p.namespace;this.construct()}clone(){return new t(this.snippet)}makeOutlets(){var p=this.snippet.main.signature;const {externals:n}=this.snippet;var {symbols:c}=this.snippet;p=Array.from(p).map(e=>this._outlet(e,{callback:!1}));c=Array.from(c).map(e=>this._outlet(n[e],{callback:!0}));return p.concat(c)}call(p,n){this._call(this.snippet,
p,n);return this._inputs(this.snippet,p,n)}export(p,n){if(p.visit(this.namespace,n))return this._link(this.snippet,p,n),this._trace(this.snippet,p,n)}}m.Call=t};
shadow$provide[478]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Callback=void 0;var t=v(468);z=v(476);class p extends z.Block{constructor(n){super(!0);this.graph=n;this.construct()}refresh(){super.refresh();return delete this.subroutine}clone(){return new p(this.graph)}makeOutlets(){let n;this.make();const c=[];let e=[],f=[];const h=(k,g)=>{if(k.meta.callback){if(k.inout===t.Graph.IN)return g=k.dupe(),null==g.meta.child&&(g.meta.child=k),k.meta.parent=g,c.push(g)}else return g.push(k.type)};
for(n of Array.from(this.graph.inputs()))h(n,e);for(n of Array.from(this.graph.outputs()))h(n,f);e=e.join(",");f=f.join(",");c.push({name:"callback",type:`(${e})(${f})`,inout:t.Graph.OUT,meta:{callback:!0,def:this.subroutine.main}});return c}make(){return this.subroutine=this.graph.compile(this.namespace)}export(n,c){if(n.visit(this.namespace,c))return this._link(this.subroutine,n,c),this.graph.export(n,c)}call(n,c){return this._require(this.subroutine,n,c)}callback(n,c,e,f,h){this._include(this.subroutine,
n,c);return this._callback(this.subroutine,n,c,e,f,h)}}m.Callback=p};
shadow$provide[479]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Isolate=void 0;var t=v(468);z=v(476);class p extends z.Block{constructor(n){super(!0);this.graph=n;this.construct()}refresh(){super.refresh();return delete this.subroutine}clone(){return new p(this.graph)}makeOutlets(){this.make();const n=[],c={};for(const e of["inputs","outputs"])for(const f of Array.from(this.graph[e]())){let h=void 0;["return","callback"].includes(f.hint)&&f.inout===t.Graph.OUT&&(h=f.hint);
null!=c[h]&&(h=void 0);const k=f.dupe(h);null==k.meta.child&&(k.meta.child=f);f.meta.parent=k;null!=h&&(c[h]=!0);n.push(k)}return n}make(){return this.subroutine=this.graph.compile(this.namespace)}call(n,c){this._call(this.subroutine,n,c);return this._inputs(this.subroutine,n,c)}export(n,c){if(n.visit(this.namespace,c))return this._link(this.subroutine,n,c),this._trace(this.subroutine,n,c),this.graph.export(n,c)}callback(n,c,e,f,h){h=h.meta.child;return h.node.owner.callback(n,c,e,f,h)}}m.Isolate=
p};
shadow$provide[480]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Join=void 0;z=v(476);class t extends z.Block{constructor(p){super(!0);this.nodes=p;this.construct()}clone(){return new t(this.nodes)}makeOutlets(){return[]}call(p,n){return(()=>{const c=[];for(const e of Array.from(this.nodes))c.push(e.owner.call(p,n));return c})()}export(p,n){return(()=>{const c=[];for(const e of Array.from(this.nodes))c.push(e.owner.export(p,n));return c})()}}m.Join=t};
shadow$provide[481]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});var t=v(476);Object.keys(t).forEach(function(f){"default"!==f&&"__esModule"!==f&&(f in m&&m[f]===t[f]||Object.defineProperty(m,f,{enumerable:!0,get:function(){return t[f]}}))});var p=v(477);Object.keys(p).forEach(function(f){"default"!==f&&"__esModule"!==f&&(f in m&&m[f]===p[f]||Object.defineProperty(m,f,{enumerable:!0,get:function(){return p[f]}}))});var n=v(478);Object.keys(n).forEach(function(f){"default"!==
f&&"__esModule"!==f&&(f in m&&m[f]===n[f]||Object.defineProperty(m,f,{enumerable:!0,get:function(){return n[f]}}))});var c=v(479);Object.keys(c).forEach(function(f){"default"!==f&&"__esModule"!==f&&(f in m&&m[f]===c[f]||Object.defineProperty(m,f,{enumerable:!0,get:function(){return c[f]}}))});var e=v(480);Object.keys(e).forEach(function(f){"default"!==f&&"__esModule"!==f&&(f in m&&m[f]===e[f]||Object.defineProperty(m,f,{enumerable:!0,get:function(){return e[f]}}))})};
shadow$provide[482]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.serialize=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(481));const n=function(c){const e=[],f=[];for(const k of Array.from(c.nodes)){let g;var h={id:k.id,name:null,type:null,depth:null,graph:null,inputs:[],outputs:[]};e.push(h);({inputs:c}=h);const {outputs:r}=h,u=k.owner;u instanceof p.Call?(h.name=u.snippet._name,h.type="call",h.code=u.snippet._original):u instanceof p.Callback?(h.name="Callback",h.type=
"callback",h.graph=n(u.graph)):u instanceof p.Isolate?(h.name="Isolate",h.type="isolate",h.graph=n(u.graph)):u instanceof p.Join?(h.name="Join",h.type="join"):null!=u&&(null==h.name&&(h.name=null!=u.name?u.name:u.type),null==h.type&&(h.type=u.type),null==h.code&&(h.code=u.code),null!=u.graph&&(h.graph=n(u.graph)));h=function(w){w=w.replace(")(",")→(");return w.replace("()","")};for(g of Array.from(k.inputs))c.push({id:g.id,name:g.name,type:h(g.type),open:null==g.input});for(g of Array.from(k.outputs)){r.push({id:g.id,
name:g.name,type:h(g.type),open:!g.output.length});for(const w of Array.from(g.output))f.push({from:k.id,out:g.id,to:w.node.id,in:w.id,type:h(g.type)})}}return{nodes:e,links:f}};m.serialize=n};
shadow$provide[483]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.hash=void 0;let t=function(p,n){const c=p&65535,e=n&65535;return c*e+((p>>>16&65535)*e+c*(n>>>16&65535)<<16>>>0)|0};null!=Math.imul&&({imul:t}=Math);m.hash=function(p){let n;const c=p.length;let e=Math.floor(c/2),f=n=0;const h=function(k,g){k|=g<<16;k=t(k^k<<9,3432918353);k=t(k<<15|k>>>17,461845907);n^=k;n=n<<13|n>>>19;n=t(n,5);return n=n+3864292196|0};for(;e--;)h(p.charCodeAt(f++),p.charCodeAt(f++));c&1&&h(p.charCodeAt(f++),
0);n^=c;n^=n>>>16;n=t(n,2246822507);n^=n>>>13;n=t(n,3266489909);return n^=n>>>16}};
shadow$provide[484]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.merge=m.overlay=m.process=void 0;var t=v(483);const p=function(g,r){null==r&&(r=1);var u=(0,t.hash)(g)^1193046;g=u&255;let w=u>>>8&255;u=u>>>16&255;var x=Math.max(g,w,u);const B=140/x;x=Math.round(x/3);g=Math.min(255,Math.round(B*Math.max(g,x)));w=Math.min(255,Math.round(B*Math.max(w,x)));u=Math.min(255,Math.round(B*Math.max(u,x)));return"rgba("+[g,w,u,r].join(", ")+")"},n=function(g){return(null!=g?g:"").replace(/&/g,
"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/'/g,"\x26#39;").replace(/"/g,"\x26quot;")};m.process=function(g){const r=[],u=f(g,r);u.update=()=>{if(null==u.parentNode)var w=void 0;else{var x=u.getBoundingClientRect();for(w of Array.from(r)){var B=w.out.getBoundingClientRect(),E=w.in.getBoundingClientRect();w.coords={x1:(B.left+B.right)/2-x.left,y1:(B.top+B.bottom)/2-x.top,x2:(E.left+E.right)/2-x.left,y2:(E.top+E.bottom)/2-x.top}}x=u.querySelector("svg");null!=x&&u.removeChild(x);
for(B=u;B.parentNode&&0===B.offsetHeight;)B=B.parentNode;x=h();x.setAttribute("width",B.offsetWidth);x.setAttribute("height",B.offsetHeight);for(w of Array.from(r)){var C=w.coords;const W=h("path");B=W;E=B.setAttribute;{var H=void 0;var I=C.x1;var K=C.y1,O=C.x2;C=C.y2;H=O-I;var Q=C-K;const R=Math.sqrt(H*H+Q*Q);if(Math.abs(Q)>Math.abs(H)){const X=(I+O)/2,ca=(K+C)/2;Q=0<Q?.3:-.3;H=Math.min(Math.abs(H)/2,20+R/8);I=["M",I,K,"C",I+H,K+",",X,ca-R*Q,X,ca,"C",X,ca+R*Q,O-H,C+",",O,C].join(" ")}else H=Math.min(Math.abs(H)/
2.5,20+R/4),I=["M",I,K,"C",I+H,K+",",O-H,C+",",O,C].join(" ")}E.call(B,"d",I);W.setAttribute("stroke",w.color);W.setAttribute("stroke-width",3);W.setAttribute("fill","transparent");x.appendChild(W)}w=u.appendChild(x)}return w};c(u);return u};const c=function(g){g=g.querySelectorAll(".shadergraph-code");return Array.from(g).map(r=>function(){r.parentNode.classList.add("shadergraph-has-code");return r.parentNode.addEventListener("click",u=>r.style.display={block:"none",none:"block"}[r.style.display||
"none"])}())},e=function(g){let r,u;const w={},x={};for(u of Array.from(g.nodes))w[u.id]=u;for(r of Array.from(g.links))null==x[r.from]&&(x[r.from]=[]),x[r.from].push(r);const B=function(E,C){null==C&&(C=0);E.depth=Math.max(null!=E.depth?E.depth:0,C);if(E=x[E.id])for(r of Array.from(E))B(w[r.to],C+1);return null};for(u of Array.from(g.nodes))null==u.depth&&B(u);return null},f=function(g,r){e(g);const u=document.createElement("div");u.classList.add("shadergraph-graph");const w=[],x={};for(const E of Array.from(g.nodes)){let C;
const H=document.createElement("div");H.classList.add("shadergraph-node");H.classList.add(`shadergraph-node-${E.type}`);H.innerHTML=`\
<div class="shadergraph-header">${n(E.name)}</div>\
`;var B=function(I,K){const O=p(I.type),Q=document.createElement("div");Q.classList.add("shadergraph-outlet");Q.classList.add(`shadergraph-outlet-${K}`);Q.innerHTML=`\
<div class="shadergraph-point" style="background: ${O}"></div>
<div class="shadergraph-type" style="color: ${O}">${n(I.type)}</div>
<div class="shadergraph-name">${n(I.name)}</div>\
`;H.appendChild(Q);return x[I.id]=Q.querySelector(".shadergraph-point")};for(C of Array.from(E.inputs))B(C,"in");for(C of Array.from(E.outputs))B(C,"out");null!=E.graph?H.appendChild(f(E.graph,r)):(B=document.createElement("div"),B.classList.add("shadergraph-clear"),H.appendChild(B));null!=E.code&&(B=document.createElement("div"),B.classList.add("shadergraph-code"),B.innerHTML=n((""+E.code).replace(/^\s+|\s+$/g,"")),H.appendChild(B));B=w[E.depth];null==B&&(B=document.createElement("div"),B.classList.add("shadergraph-column"),
w[E.depth]=B);B.appendChild(H)}for(B of Array.from(w))null!=B&&u.appendChild(B);for(const E of Array.from(g.links))g=p(E.type),r.push({color:g,out:x[E.out],in:x[E.in]});return u},h=function(g){null==g&&(g="svg");return document.createElementNS("http://www.w3.org/2000/svg",g)};m.overlay=function(g){const r=document.createElement("div");r.setAttribute("class","shadergraph-overlay");const u=document.createElement("div");u.setAttribute("class","shadergraph-close");u.innerHTML="\x26times;";const w=document.createElement("div");
w.setAttribute("class","shadergraph-view");const x=document.createElement("div");x.setAttribute("class","shadergraph-inside");x.appendChild(g);w.appendChild(x);r.appendChild(w);r.appendChild(u);u.addEventListener("click",()=>r.parentNode.removeChild(r));return r};const k=function(g){if(g instanceof Node)return g;const r=document.createElement("span");r.innerText=null!=g?g:"";return r};m.merge=function(g){if(1!==g.length){let r;const u=document.createElement("div");for(r of Array.from(g))u.appendChild(k(r));
u.update=()=>{const w=[];for(r of Array.from(g))w.push("function"===typeof r.update?r.update():void 0);return w};return u}return k(g[0])}};
shadow$provide[485]=function(z,v,J,m){function t(h){if("function"!==typeof WeakMap)return null;var k=new WeakMap,g=new WeakMap;return(t=function(r){return r?g:k})(h)}Object.defineProperty(m,"__esModule",{value:!0});m.inspect=m.visualize=m.markup=m.serialize=void 0;z=v(482);var p=function(h,k){if(!k&&h&&h.__esModule)return h;if(null===h||"object"!==typeof h&&"function"!==typeof h)return{default:h};if((k=t(k))&&k.has(h))return k.get(h);var g={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor,
u;for(u in h)if("default"!==u&&Object.prototype.hasOwnProperty.call(h,u)){var w=r?Object.getOwnPropertyDescriptor(h,u):null;w&&(w.get||w.set)?Object.defineProperty(g,u,w):g[u]=h[u]}g.default=h;k&&k.set(h,g);return g}(v(484));const n=z.serialize;m.serialize=n;m.markup=p;const c=function(h){return null==h?h:h instanceof Array?h.map(c):null!=h.vertex&&null!=h.fragment?[c(h.vertex,c(h.fragment))]:null!=h._graph?h._graph:null!=h.graph?h.graph:h},e=function(h){let k=[];for(const g of Array.from(h))g instanceof
Array?k=k.concat(e(g)):null!=g&&k.push(g);return k},f=function(){const h=e(c([].slice.call(arguments)));return p.merge(Array.from(h).filter(k=>k).map(k=>{k?k.nodes&&(k=n(k),k=p.process(k)):k=void 0;return k}))};m.visualize=f;m.inspect=function(){const h=f.apply(null,arguments),k=p.overlay(h);for(const g of Array.from(document.querySelectorAll(".shadergraph-overlay")))g.remove();document.body.appendChild(k);h.update();return k}};
shadow$provide[486]=function(z,v,J,m){function t(k){if("function"!==typeof WeakMap)return null;var g=new WeakMap,r=new WeakMap;return(t=function(u){return u?r:g})(k)}function p(k,g){if(!g&&k&&k.__esModule)return k;if(null===k||"object"!==typeof k&&"function"!==typeof k)return{default:k};if((g=t(g))&&g.has(k))return g.get(k);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor,w;for(w in k)if("default"!==w&&Object.prototype.hasOwnProperty.call(k,w)){var x=u?Object.getOwnPropertyDescriptor(k,
w):null;x&&(x.get||x.set)?Object.defineProperty(r,w,x):r[w]=k[w]}r.default=k;g&&g.set(k,r);return r}Object.defineProperty(m,"__esModule",{value:!0});m.Factory=void 0;var n=v(468),c=p(v(481)),e=p(v(485));class f{constructor(k,g,r){this.language=k;this.fetch=g;this.config=r;this.graph()}pipe(k,g,r,u){k instanceof f?this._concat(k):null!=k&&this._call(k,g,r,u);return this}call(k,g,r,u){return this.pipe(k,g,r,u)}require(k,g,r,u){k instanceof f?this._import(k):null!=k&&(this.callback(),this._call(k,g,
r,u),this.end());return this}import(k,g,r,u){return this.require(k,g,r,u)}split(){this._group("_combine",!0);return this}fan(){this._group("_combine",!1);return this}isolate(){this._group("_isolate");return this}callback(){this._group("_callback");return this}next(){this._next();return this}pass(){const k=this._stack[2].end;this.end();this._state.end=this._state.end.concat(k);return this}end(){const [k,g]=Array.from(this._exit()),{op:r}=k;if(this[r])this[r](k,g);return this}join(){return this.end()}graph(){for(;1<
(null!=this._stack?this._stack.length:void 0);)this.end();this._graph&&this._tail(this._state,this._graph);const k=this._graph;this._graph=new n.Graph;this._state=new h;this._stack=[this._state];return k}compile(k){null==k&&(k="main");return this.graph().compile(k)}link(k){null==k&&(k="main");return this.graph().link(k)}serialize(){return e.serialize(this._graph)}empty(){return 0===this._graph.nodes.length}_concat(k){let g;if(0===k._state.nodes.length)return this;this._tail(k._state,k._graph);try{g=
new c.Isolate(k._graph)}catch(r){throw this.config.autoInspect&&e.inspect(r,this._graph,k),r;}this._auto(g);return this}_import(k){let g;if(0===k._state.nodes.length)throw"Can't import empty callback";this._tail(k._state,k._graph);try{g=new c.Callback(k._graph)}catch(r){throw this.config.autoInspect&&e.inspect(r,this._graph,k),r;}this._auto(g);return this}_combine(k,g){for(const r of Array.from(k.start))for(const u of Array.from(g.end))u.connect(r,k.multi);g.end=k.end;return g.nodes=g.nodes.concat(k.nodes)}_isolate(k,
g){if(k.nodes.length){let r;g=this._subgraph(k);this._tail(k,g);try{r=new c.Isolate(g)}catch(u){throw this.config.autoInspect&&e.inspect(u,this._graph,g),u;}return this._auto(r)}}_callback(k,g){if(k.nodes.length){let r;g=this._subgraph(k);this._tail(k,g);try{r=new c.Callback(g)}catch(u){throw this.config.autoInspect&&e.inspect(u,this._graph,g),u;}return this._auto(r)}}_call(k,g,r,u){k=this.fetch(k);k.bind(this.config,g,r,u);g=new c.Call(k);return this._auto(g)}_subgraph(k){const g=new n.Graph(null,
this._graph);g.adopt(k.nodes);return g}_tail(k,g){let r=k.end.concat(k.tail);r=r.filter((u,w)=>r.indexOf(u)===w);1<r.length&&(r=new c.Join(r),r=[r.node],this._graph.add(r));g.tail=r[0];k.end=r;k.tail=[];if(!g.tail)throw Error("Cannot finalize empty graph");g.compile=u=>{null==u&&(u="main");try{return g.tail.owner.compile(this.language,u)}catch(w){throw this.config.autoInspect&&g.inspect(w),w;}};g.link=u=>{null==u&&(u="main");try{return g.tail.owner.link(this.language,u)}catch(w){throw this.config.autoInspect&&
g.inspect(w),w;}};g.export=(u,w)=>g.tail.owner.export(u,w);return g.inspect=(u=null)=>e.inspect(u,g)}_group(k,g){this._push(k,g);this._push();return this}_next(){const k=this._pop();this._state.start=this._state.start.concat(k.start);this._state.end=this._state.end.concat(k.end);this._state.nodes=this._state.nodes.concat(k.nodes);this._state.tail=this._state.tail.concat(k.tail);return this._push()}_exit(){this._next();this._pop();return[this._pop(),this._state]}_push(k,g){this._stack.unshift(new h(k,
g));return this._state=this._stack[0]}_pop(){let k;this._state=this._stack[1];null==this._state&&(this._state=new h);return null!=(k=this._stack.shift())?k:new h}_auto(k){return k.node.inputs.length?this._append(k):this._insert(k)}_append(k){let g;({node:k}=k);this._graph.add(k);for(g of Array.from(this._state.end))g.connect(k);this._state.start.length||(this._state.start=[k]);this._state.end=[k];this._state.nodes.push(k);k.outputs.length||this._state.tail.push(k)}_prepend(k){let g;({node:k}=k);this._graph.add(k);
for(g of Array.from(this._state.start))k.connect(g);this._state.end.length||(this._state.end=[k]);this._state.start=[k];this._state.nodes.push(k);k.outputs.length||this._state.tail.push(k)}_insert(k){({node:k}=k);this._graph.add(k);this._state.start.push(k);this._state.end.push(k);this._state.nodes.push(k);if(!k.outputs.length)return this._state.tail.push(k)}}m.Factory=f;class h{constructor(k=null,g,r,u,w,x){this.op=k;null==g&&(g=!1);this.multi=g;null==r&&(r=[]);this.start=r;null==u&&(u=[]);this.end=
u;null==w&&(w=[]);this.nodes=w;null==x&&(x=[]);this.tail=x}}};
shadow$provide[487]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.Material=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(485));class n{constructor(c,e){this.vertex=c;this.fragment=e}build(c){return this.link(c)}link(c){null==c&&(c={});const e={},f={},h={},k=this.vertex.link("main"),g=this.fragment.link("main");for(const r of[k,g]){for(const u in r.uniforms)e[u]=r.uniforms[u];for(const u in r.varyings)f[u]=r.varyings[u];for(const u in r.attributes)h[u]=r.attributes[u]}c.vertexShader=
k.code;c.vertexGraph=k.graph;c.fragmentShader=g.code;c.fragmentGraph=g.graph;c.attributes=h;c.uniforms=e;c.varyings=f;c.inspect=()=>p.inspect("Vertex Shader",k,"Fragment Shader",g.graph);return c}inspect(){return p.inspect("Vertex Shader",this.vertex,"Fragment Shader",this.fragment.graph)}}m.Material=n};
shadow$provide[488]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.library=void 0;m.library=function(t,p,n){let c=null,e={};null!=p&&("function"===typeof p?c=h=>n(t,h,p(h)):"object"===typeof p&&(c=function(h){if(null==p[h])throw Error(`Unknown snippet \`${h}\``);return n(t,h,p[h])}));var f=h=>n(t,"",h);if(null==c)return f;f=function(h){if(h.match(/[{;]/))return n(t,"",h);e[h]=!0;return c(h)};f.used=function(h){null==h&&(h=e);return e=h};return f}};
shadow$provide[489]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.queue=void 0;m.queue=function(t){null==t&&(t=100);const p={};let n=null,c=null,e=0;const f=function(k){k.prev=null;k.next=n;null!=n&&(n.prev=k);n=k;if(null==c)return c=k},h=function(k){const {prev:g}=k,{next:r}=k;null!=g&&(g.next=r);null!=r&&(r.prev=g);n===k&&(n=r);if(c===k)return c=g};return function(k){let g,r;(r=p[k])&&r!==n?(h(r),f(r)):(e===t?(g=c.key,h(c),delete p[g]):e++,r={next:n,prev:null,key:k},f(r),
p[k]=r);return g}}};
shadow$provide[490]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.cache=void 0;var t=v(489),p=v(483);m.cache=function(n){const c={},e=(0,t.queue)(100);return function(f){const h=32<f.length?"##"+(0,p.hash)(f).toString(16):f,k=e(h);null!=k&&delete c[k];null==c[h]&&(c[h]=n(f));return c[h].clone()}}};
shadow$provide[491]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});var t=v(486);Object.keys(t).forEach(function(h){"default"!==h&&"__esModule"!==h&&(h in m&&m[h]===t[h]||Object.defineProperty(m,h,{enumerable:!0,get:function(){return t[h]}}))});var p=v(487);Object.keys(p).forEach(function(h){"default"!==h&&"__esModule"!==h&&(h in m&&m[h]===p[h]||Object.defineProperty(m,h,{enumerable:!0,get:function(){return p[h]}}))});var n=v(488);Object.keys(n).forEach(function(h){"default"!==
h&&"__esModule"!==h&&(h in m&&m[h]===n[h]||Object.defineProperty(m,h,{enumerable:!0,get:function(){return n[h]}}))});var c=v(490);Object.keys(c).forEach(function(h){"default"!==h&&"__esModule"!==h&&(h in m&&m[h]===c[h]||Object.defineProperty(m,h,{enumerable:!0,get:function(){return c[h]}}))});var e=v(489);Object.keys(e).forEach(function(h){"default"!==h&&"__esModule"!==h&&(h in m&&m[h]===e[h]||Object.defineProperty(m,h,{enumerable:!0,get:function(){return e[h]}}))});var f=v(483);Object.keys(f).forEach(function(h){"default"!==
h&&"__esModule"!==h&&(h in m&&m[h]===f[h]||Object.defineProperty(m,h,{enumerable:!0,get:function(){return f[h]}}))})};
shadow$provide[492]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.compile=void 0;m.compile=function(p){const {code:n,signatures:c}=p;p={};p[c.main.name]=!0;for(var e of["external","internal","varying","uniform","attribute"])for(const f of c[e])p[f.name]=!0;e=t(n,p);return[c,e]};const t=function(p,n){let c;const e=new RegExp("\\b("+(()=>{const f=[];for(c in n)f.push(c);return f})().join("|")+")\\b","g");p=p.replace(/\/\/[^\n]*/g,"");p=p.replace(/\/\*([^*]|\*[^/])*\*\//g,"");
return function(f,h,k){let g;null==f&&(f="");null==h&&(h={});null==k&&(k={});const r={};for(g in n)r[g]=null!=h[g]?g:f+g;f=p.replace(e,u=>r[u]);h=(()=>{const u=[];for(g in k)u.push(`#define ${g} ${k[g]}`);return u})();h.length&&h.push("");return h.join("\n")+f}}};
shadow$provide[493]=function(z,v,J,m){J.exports="precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int uint void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")};
shadow$provide[494]=function(z,v,J,m){J.exports="\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")};
shadow$provide[495]=function(z,v,J,m){J.exports="abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")};
shadow$provide[496]=function(z,v,J,m){z=v(493);J.exports=z.slice().concat("layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray".split(" "))};
shadow$provide[497]=function(z,v,J,m){z=v(495);z=z.slice().filter(function(t){return!/^(gl_|texture)/.test(t)});J.exports=z.concat("gl_VertexID gl_InstanceID gl_Position gl_PointSize gl_FragCoord gl_FrontFacing gl_FragDepth gl_PointCoord gl_MaxVertexAttribs gl_MaxVertexUniformVectors gl_MaxVertexOutputVectors gl_MaxFragmentInputVectors gl_MaxVertexTextureImageUnits gl_MaxCombinedTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformVectors gl_MaxDrawBuffers gl_MinProgramTexelOffset gl_MaxProgramTexelOffset gl_DepthRangeParameters gl_DepthRange trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" "))};
shadow$provide[498]=function(z,v,J,m){J.exports=function(Q){function W(Db){Db.length&&mb.push({type:O[Oa],data:Db,position:tb,line:Cb,column:yb})}function R(){Pa=Pa.length?[]:Pa;if("/"===Wa&&"*"===da)return tb=Ha+ta-1,Oa=k,Wa=da,ta+1;if("/"===Wa&&"/"===da)return tb=Ha+ta-1,Oa=g,Wa=da,ta+1;if("#"===da)return Oa=r,tb=Ha+ta,ta;if(/\s/.test(da))return Oa=H,tb=Ha+ta,ta;Rb=/\d/.test(da);ac=/[^\w_]/.test(da);tb=Ha+ta;Oa=Rb?w:ac?u:h;return ta}function X(){if(("\r"===da||"\n"===da)&&"\\"!==Wa)return W(Pa.join("")),
Oa=f,ta;Pa.push(da);Wa=da;return ta+1}function ca(){if("."===Wa&&/\d/.test(da))return Oa=x,ta;if("/"===Wa&&"*"===da)return Oa=k,ta;if("/"===Wa&&"/"===da)return Oa=g,ta;if("."===da&&Pa.length){for(;ka(Pa););Oa=x;return ta}if(";"===da||")"===da||"("===da){if(Pa.length)for(;ka(Pa););W(da);Oa=f;return ta+1}var Db=2===Pa.length&&"\x3d"!==da;if(/[\w_\d\s]/.test(da)||Db){for(;ka(Pa););Oa=f;return ta}Pa.push(da);Wa=da;return ta+1}function ka(Db){var ec=0;do{var pa=p.indexOf(Db.slice(0,Db.length+ec).join(""));
var Xa=p[pa];if(-1===pa){if(0<ec--+Db.length)continue;Xa=Db.slice(0,1).join("")}W(Xa);tb+=Xa.length;Pa=Pa.slice(Xa.length);return Pa.length}while(1)}function la(){if("."===da||/[eE]/.test(da))return Pa.push(da),Oa=x,Wa=da,ta+1;if("x"===da&&1===Pa.length&&"0"===Pa[0])return Oa=K,Pa.push(da),Wa=da,ta+1;if(/[^\d]/.test(da))return W(Pa.join("")),Oa=f,ta;Pa.push(da);Wa=da;return ta+1}function Aa(){"f"===da&&(Pa.push(da),Wa=da,ta+=1);if(/[eE]/.test(da)||("-"===da||"+"===da)&&/[eE]/.test(Wa))return Pa.push(da),
Wa=da,ta+1;if(/[^\d]/.test(da))return W(Pa.join("")),Oa=f,ta;Pa.push(da);Wa=da;return ta+1}var ta=0,Ha=0,Oa=f,da,Wa,Pa=[],mb=[],Cb=1,yb=0,tb=0,Rb=!1,ac=!1,Hb="",Jb;Q=Q||{};var Tb=n,dc=t;"300 es"===Q.version&&(Tb=e,dc=c);var zb={},ib={};for(ta=0;ta<Tb.length;ta++)zb[Tb[ta]]=!0;for(ta=0;ta<dc.length;ta++)ib[dc[ta]]=!0;return function(Db){mb=[];if(null!==Db){ta=0;Db.toString&&(Db=Db.toString());Hb+=Db.replace(/\r\n/g,"\n");for(Jb=Hb.length;da=Hb[ta],ta<Jb;){Db=ta;switch(Oa){case k:"/"===da&&"*"===Wa?
(Pa.push(da),W(Pa.join("")),Oa=f):(Pa.push(da),Wa=da);ta+=1;break;case g:ta=X();break;case r:ta=X();break;case u:ta=ca();break;case w:ta=la();break;case K:/[^a-fA-F0-9]/.test(da)?(W(Pa.join("")),Oa=f):(Pa.push(da),Wa=da,ta+=1);break;case x:ta=Aa();break;case h:if(/[^\d\w_]/.test(da)){var ec=Pa.join("");Oa=ib[ec]?C:zb[ec]?E:B;W(Pa.join(""));Oa=f}else Pa.push(da),Wa=da,ta+=1;break;case H:/[^\s]/g.test(da)?(W(Pa.join("")),Oa=f):(Pa.push(da),Wa=da,ta+=1);break;case f:ta=R()}if(Db!==ta)switch(Hb[Db]){case "\n":yb=
0;++Cb;break;default:++yb}}Ha+=ta;Hb=Hb.slice(ta);return mb}Pa.length&&W(Pa.join(""));Oa=I;W("(eof)");return mb}};var t=v(493),p=v(494),n=v(495),c=v(496),e=v(497),f=999,h=9999,k=0,g=1,r=2,u=3,w=4,x=5,B=6,E=7,C=8,H=9,I=10,K=11,O="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ")};
shadow$provide[499]=function(z,v,J,m){var t=v(498);J.exports=function(p,n){n=t(n);var c=[];c=c.concat(n(p));return c=c.concat(n(null))}};
shadow$provide[500]=function(z,v,J,m){function t(){return this}function p(H,I){let K=C[H];I=I||0;K?I>K.lbp&&(K.lbp=I):(K=Object.create(E),K.id=H,K.lbp=I,C[H]=K);return K}function n(H){let I,K=w;g();for(I=K.nud();H<w.lbp;)K=w,g(),I=K.led(I);return I}function c(H,I,K){p(H,I).led=K||function(O){this.children=[O,n(I)];this.type="binary";return this}}function e(H,I,K){H=p(H,I);H.led=K||function(O){this.children=[O,n(I-1)];this.type="binary";return this};return H}function f(H,I){H=p(H);H.nud=I||function(){this.children=
[n(70)];this.type="unary";return this};return H}function h(H){p(H,150).led=function(I){this.children=[I];this.type="suffix";return this}}function k(H){return e(H,10,function(I){this.children=[I,n(9)];this.assignment=!0;this.type="assign";return this})}function g(H){let I,K,O;if(H&&w.data!==H)return u.unexpected("expected `"+H+"`, got `"+w.data+"`");if(B>=x.length)w=C["(end)"];else{H=x[B++];I=H.data;K=H.type;if("ident"===K)O=u.scope.find(I)||u.create_node(),K=O.type;else if("builtin"===K)O=C["(builtin)"];
else if("keyword"===K)O=C["(keyword)"];else if("operator"===K){if(O=C[I],!O)return u.unexpected("unknown operator `"+I+"`")}else if("float"===K||"integer"===K)K="literal",O=C["(literal)"];else return u.unexpected("unexpected token.");O&&(O.nud||(O.nud=t),O.children||(O.children=[]));O=Object.create(O);O.token=H;O.type=K;O.data||(O.data=I);return w=O}}function r(H){return function(){return u.unexpected(H)}}let u,w,x,B;const E={nud:function(){return this.children&&this.children.length?this:r("unexpected")()},
led:r("missing operator")},C={};p("(ident)").nud=t;p("(keyword)").nud=t;p("(builtin)").nud=t;p("(literal)").nud=t;p("(end)");p(":");p(";");p(",");p(")");p("]");p("}");e("\x26\x26",30);e("||",30);c("|",43);c("^",44);c("\x26",45);c("\x3d\x3d",46);c("!\x3d",46);c("\x3c",47);c("\x3c\x3d",47);c("\x3e",47);c("\x3e\x3d",47);c("\x3e\x3e",48);c("\x3c\x3c",48);c("+",50);c("-",50);c("*",60);c("/",60);c("%",60);c("?",20,function(H){this.children=[H,n(0),(g(":"),n(0))];this.type="ternary";return this});c(".",
80,function(H){w.type="literal";u.fake(w);this.children=[H,w];g();return this});c("[",80,function(H){this.children=[H,n(0)];this.type="binary";g("]");return this});c("(",80,function(H){this.children=[H];this.type="call";if(")"!==w.data)for(;;){this.children.push(n(0));if(","!==w.data)break;g(",")}g(")");return this});f("-");f("+");f("!");f("~");f("defined");f("(",function(){this.type="group";this.children=[n(0)];g(")");return this});f("++");f("--");h("++");h("--");k("\x3d");k("+\x3d");k("-\x3d");
k("*\x3d");k("/\x3d");k("%\x3d");k("\x26\x3d");k("|\x3d");k("^\x3d");k("\x3e\x3e\x3d");k("\x3c\x3c\x3d");J.exports=function(H,I){function K(O){u.unshift(O,!1);for(let Q=0,W=O.children.length;Q<W;++Q)K(O.children[Q]);u.shift()}u=H;x=I;B=0;if(x.length){g();H=n(0);H.parent=u[0];K(H);if(B<x.length)throw Error("did not use all tokens");H.parent.children=[H]}}};
shadow$provide[501]=function(z,v,J,m){function t(p){if(this.constructor!==t)return new t(p);this.state=p;this.scopes=[];this.current=null}J.exports=t;z=t.prototype;z.enter=function(p){this.scopes.push(this.current=this.state[0].scope=p||{})};z.exit=function(){this.scopes.pop();this.current=this.scopes[this.scopes.length-1]};z.define=function(p){this.current[p]=this.state[0]};z.find=function(p,n){for(n=this.scopes.length-1;-1<n;--n)if(this.scopes[n].hasOwnProperty(p))return this.scopes[n][p];return null}};
shadow$provide[502]=function(z,v,J,m){function t(ta,Ha){return{mode:ta,token:Ha,children:[],type:Aa[ta],id:(4294967295*Math.random()).toString(16)}}J.exports=function(){function ta(Ta){if(null===Ta)return Oa(),$c;td=[];Ha(Ta);return td}function Ha(Ta){if("whitespace"===Ta.type||"line-comment"===Ta.type||"block-comment"===Ta.type)Zc.push(Ta);else for(Mb.push(Ta),(Qa=Qa||Mb[0])&&Zc.length&&(Qa.preceding=Qa.preceding||[],Qa.preceding=Qa.preceding.concat(Zc),Zc=[]);Oc||!Ca.length?0:Qa=Mb[0];)switch(Ca[0].mode){case f:Wa();
break;case h:da();break;case u:Pa();break;case w:mb();break;case C:Cb();break;case k:Jd(!0,!0);break;case H:pd();break;case e:"ident"!==Qa.type&&"builtin"!==Qa.type?Jb("expected user-defined name, got "+Qa.data):(Ca[0].data=Qa.data,Ca.shift(),Mb.shift());break;case I:"keyword"!==Qa.type?Jb("expected keyword, got "+Qa.data):(Ca.shift(),Mb.shift());break;case K:"keyword"===Qa.type?(Ca[0].type="keyword",Ca[0].mode=I):"ident"===Qa.type?(Ca[0].type="ident",Ca[0].mode=e):Jb("expected keyword or user-defined name, got "+
Qa.data);break;case g:sd();break;case r:Md();break;case x:id();break;case B:qd();break;case X:rd();break;case O:Ld();break;case E:Kd();break;case ka:Xb()}}function Oa(Ta){arguments.length&&Ha(Ta);1<Ca.length&&Jb("unexpected EOF")}function da(){return zb(function(){Ca.scope.enter();return c},function(){if(Qa.data===Ca[0].expecting)return Ca.scope.exit(),Ca.shift();switch(Qa.type){case "preprocessor":Ca.fake(t(la[Qa.type],Qa,jc));Mb.shift();break;default:Ca.unshift(Sb())}})()}function Wa(){if(Ca[0].brace){if("}"!==
Qa.data)return Jb("expected `}`, got "+Qa.data);Ca[0].brace=!1;return Mb.shift(),Ca.shift()}switch(Qa.type){case "eof":return Nd&&(Oc=!0),Nd=!0,Ca.shift();case "keyword":switch(Qa.data){case "for":return Ca.unshift(Nc());case "if":return Ca.unshift(gd());case "while":return Ca.unshift(yc());case "do":return Ca.unshift(hd());case "break":return Ca.fake(t(Q,Qa)),Mb.shift();case "continue":return Ca.fake(t(W,Qa)),Mb.shift();case "discard":return Ca.fake(t(R,Qa)),Mb.shift();case "return":return Ca.unshift(zc());
case "precision":return Ca.unshift(jb())}return Ca.unshift(tb(255));case "ident":var Ta;if(Ta=Ca.scope.find(Qa.data))return"struct"===Ta.parent.type?Ca.unshift(tb(255)):Ca.unshift(ac(";"));case "operator":if("{"===Qa.data)return Ca[0].brace=!0,Ta=Eb(),Ta.expecting="}",Mb.shift(),Ca.unshift(Ta);if(";"===Qa.data)return Mb.shift(),Ca.shift();default:return Ca.unshift(ac(";"))}}function Pa(){const Ta=Ca[0];return zb(function(){if("invariant"===Qa.data)return Ta.flags&8?(Ca.unshift(Hb()),c):Jb("`invariant` is not allowed here");
Ca.fake(t(ca,{data:"",position:Qa.position}));return c},function(){if("const"===Qa.data||"attribute"===Qa.data||"uniform"===Qa.data||"varying"===Qa.data)return Ta.flags&16?(Ca.unshift(Hb()),c):Jb("storage is not allowed here");Ca.fake(t(ca,{data:"",position:Qa.position}));return c},function(){if("in"===Qa.data||"inout"===Qa.data||"out"===Qa.data){if(Ta.flags&32)return Jb("parameter is not allowed here");Ca.unshift(Hb());return c}Ca.fake(t(ca,{data:"",position:Qa.position}));return c},function(){"highp"===
Qa.data||"mediump"===Qa.data||"lowp"===Qa.data?Ca.unshift(Hb()):Ca.fake(t(ca,{data:"",position:Qa.position}));return c},function(){if("struct"===Qa.data){if(!(Ta.flags&64))return Jb("cannot nest structs");Ca.unshift(Rb());return c}if("keyword"===Qa.type)return Ca.unshift(Hb()),c;const wb=Ca.scope.find(Qa.data);return wb?(Ca.fake(Object.create(wb)),Mb.shift(),c):Jb("expected user defined type, struct or keyword, got "+Qa.data)},function(){if(","===Qa.data&&!(Ta.flags&2))return Ca.shift();if("["===
Qa.data)Ca.unshift(Id());else{if(")"===Qa.data)return Ca.shift();if(";"===Qa.data)return Ta.stage+3;if("ident"!==Qa.type&&"builtin"!==Qa.type)return Jb("expected identifier, got "+Qa.data);Ta.collected_name=Mb.shift();return c}},function(){return"("===Qa.data?(Mb.unshift(Ta.collected_name),delete Ta.collected_name,Ca.unshift(oc()),Ta.stage+2):c},function(){Mb.unshift(Ta.collected_name);delete Ta.collected_name;Ca.unshift(va());return c},function(){return Ca.shift()})()}function mb(){if("ident"===
Qa.type||"builtin"===Qa.type){const Ta=Qa.data;Ca.unshift(Wb());Ca.scope.define(Ta)}else{if("operator"===Qa.type){if(","===Qa.data)return Ca[1].flags&2?Mb.shift():Ca.shift();if("\x3d"===Qa.data){if(!(Ca[1].flags&1))return Jb("`\x3d` is not allowed here.");Mb.shift();Ca.unshift(ac(",",";"));return}if("["===Qa.data){Ca.unshift(Id());return}}return Ca.shift()}}function Cb(){const Ta=Ca[0].expecting;Ca[0].tokens=Ca[0].tokens||[];void 0===Ca[0].parenlevel&&(Ca[0].parenlevel=0,Ca[0].bracelevel=0);if(1>
Ca[0].parenlevel&&-1<Ta.indexOf(Qa.data)){try{p(Ca,Ca[0].tokens)}catch(wb){throw Oc=!0,wb;}return Ca.shift()}"("===Qa.data?++Ca[0].parenlevel:")"===Qa.data&&--Ca[0].parenlevel;switch(Qa.data){case "{":++Ca[0].bracelevel;break;case "}":--Ca[0].bracelevel;break;case "(":++Ca[0].parenlevel;break;case ")":--Ca[0].parenlevel}if(0>Ca[0].parenlevel)return Jb("unexpected `)`");if(0>Ca[0].bracelevel)return Jb("unexpected `}`");Ca[0].tokens.push(Mb.shift())}function yb(Ta){return function(){return t(Ta,Qa)}}
function tb(Ta){const wb=t(u,Qa,jc);wb.flags=Ta;return wb}function Rb(Ta,wb){const kc=t(k,Qa,jc);kc.allow_assign=void 0===Ta?!0:Ta;kc.allow_comma=void 0===wb?!0:wb;return kc}function ac(){const Ta=t(C,Qa,jc);Ta.expecting=[].slice.call(arguments);return Ta}function Hb(Ta){let wb=Qa;Ta&&(wb={type:"(implied)",data:"(default)",position:wb.position});return t(I,wb,jc)}function Jb(Ta){Oc=!0;throw Error((Ta||"unexpected "+Ca)+" at line "+Ca[0].token.line);}function Tb(Ta,wb){return 1,dc(Ta,Qa.type)&&dc(wb,
Qa.data)}function dc(Ta,wb){switch(typeof Ta){case "string":return wb!==Ta&&Jb("expected `"+Ta+"`, got "+wb+"\n"+Qa.data),!Oc;case "object":return Ta&&-1===Ta.indexOf(wb)&&Jb("expected one of `"+Ta.join("`, `")+"`, got "+wb),!Oc}return!0}function zb(){let Ta=[].slice.call(arguments),wb,kc;return function(){const pc=Ca[0];pc.stage||(pc.stage=0);wb=Ta[pc.stage];if(!wb)return Jb("parser in undefined state!");kc=wb();if(kc===c)return++pc.stage;void 0!==kc&&(pc.stage=kc)}}function ib(Ta,wb){wb=wb||"operator";
return function(){if(Tb(wb,Ta)){var kc=Mb.shift(),pc=Ca[0].children;(pc=pc[pc.length-1])&&pc.token&&kc.preceding&&(pc.token.succeeding=pc.token.succeeding||[],pc.token.succeeding=pc.token.succeeding.concat(kc.preceding));return c}}}function Db(Ta){return function(){Ca.unshift(ac(Ta));return c}}function ec(Ta){return Ta?function(){const wb=Qa.data;return Tb("ident")&&(Ca.unshift(Wb()),Ca.scope.define(wb),c)}:function(){if(Tb("ident"))return Object.create(Ca.scope.find(Qa.data)).token=Qa,Mb.shift(),
c}}function pa(){return function(){const Ta=Eb();Ta.expecting="}";return Ca.unshift(Ta),c}}function Xa(Ta){return function(){const wb=Ca[0].stage;return"{"!==Qa.data?(Ca.unshift(Sb()),wb+Ta):(Mb.shift(),c)}}function sb(){return function(){return Ca.shift(),Ca.shift()}}const Eb=yb(h),Sb=yb(f),va=yb(w),jb=yb(H),Wb=yb(e);yb(K);const oc=yb(g),Hc=yb(r),Nc=yb(x),gd=yb(E),yc=yb(B),zc=yb(O),hd=yb(X),Id=yb(ka);let Jd,pd,Xb,id,Kd,Ld,qd,rd,sd,Md,jd=arguments.length?[].slice.call(arguments):[],Nd=!1,Ca=[],td=
[],Mb=[],Zc=[],Oc=!1,$c,Qa,jc;Ca.shift=function(){let Ta=[].shift.call(this),wb=jd[this.length],kc=!1;jd.length?"function"===typeof jd[0]?kc=jd[0](Ta):void 0!==wb&&(kc=wb.test?wb.test(Ta.type):wb===Ta.type):kc=!0;kc&&!Oc&&td.push(Ta);jc=Ta.parent;return Ta};Ca.unshift=function(Ta,wb){Ta.parent=Ca[0];const kc=[].unshift.call(this,Ta);(void 0===wb||wb)&&jc!==Ta&&jc.children.push(Ta);jc=Ta;return kc};Ca.fake=function(Ta){Ca.unshift(Ta);Ca.shift()};Ca.unexpected=Jb;Ca.scope=new n(Ca);Ca.create_node=function(){const Ta=
t(e,Qa);Ta.parent=ta.program;return Ta};(function(){Jd=zb(ib("struct","keyword"),function(){return"{"===Qa.data?(Ca.fake(t(e,{data:"",position:Qa.position,type:"ident"})),c):ec(!0)()},function(){Ca.scope.enter();return c},ib("{"),function(){if("preprocessor"===Qa.type)Ca.fake(t(la[Qa.type],Qa,jc)),Mb.shift();else{if("}"===Qa.data)return Ca.scope.exit(),Mb.shift(),Ca.shift();";"===Qa.data?Mb.shift():Ca.unshift(tb(166))}});pd=zb(function(){return Mb.shift(),c},function(){return Tb("keyword",["lowp",
"mediump","highp"])&&(Ca.unshift(Hb()),c)},function(){return Ca.unshift(Hb()),c},function(){return Ca.shift()});Xb=zb(ib("["),Db("]"),ib("]"),function(){return Ca.shift()});id=zb(ib("for","keyword"),ib("("),function(){let Ta;if("ident"===Qa.type){if((Ta=Ca.scope.find(Qa.data))||(Ta=Ca.create_node()),"struct"===Ta.parent.type)return Ca.unshift(tb(255)),c}else if("builtin"===Qa.type||"keyword"===Qa.type)return Ca.unshift(tb(255)),c;return Db(";")()},ib(";"),Db(";"),ib(";"),Db(")"),ib(")"),Xa(3),pa(),
ib("}"),sb());Kd=zb(ib("if","keyword"),ib("("),Db(")"),ib(")"),Xa(3),pa(),ib("}"),function(){return"else"===Qa.data?(Mb.shift(),Ca.unshift(Sb()),c):sb()()},sb());Ld=zb(ib("return","keyword"),function(){return";"===Qa.data?c:(Ca.unshift(ac(";")),c)},function(){Mb.shift();sb()()});qd=zb(ib("while","keyword"),ib("("),Db(")"),ib(")"),Xa(3),pa(),ib("}"),sb());rd=zb(ib("do","keyword"),Xa(3),pa(),ib("}"),ib("while","keyword"),ib("("),Db(")"),ib(")"),sb());sd=zb(function(){for(let Ta=1,wb=Ca.length;Ta<wb;++Ta)if(Ca[Ta].mode===
g)return Jb("function definition is not allowed within another function");return c},function(){if(Tb("ident")){var Ta=Qa.data,wb=Ca.scope.find(Ta);Ca.unshift(Wb());Ca.scope.define(Ta);Ca.scope.enter(wb?wb.scope:null);return c}},ib("("),function(){return Ca.unshift(Hc()),c},ib(")"),function(){return";"===Qa.data?(Ca.scope.exit(),Ca.shift(),Ca.shift()):c},ib("{"),pa(),ib("}"),function(){Ca.scope.exit();return c},function(){return Ca.shift(),Ca.shift(),Ca.shift()});Md=zb(function(){if("void"===Qa.data)return Ca.fake(Hb()),
Mb.shift(),c;if(")"===Qa.data)Ca.shift();else{if("struct"===Qa.data)return Ca.unshift(Rb(!1,!1)),c;Ca.unshift(tb(208));return c}},function(){if(","===Qa.data)return Mb.shift(),0;")"===Qa.data?Ca.shift():Jb("expected one of `,` or `)`, got "+Qa.data)})})();jc=Eb();jc.expecting="(eof)";jc.mode=h;jc.token={type:"(program)",data:"(program)"};$c=jc;ta.program=$c;ta.scope=function(Ta){1===arguments.length&&(Ca.scope=Ta);return Ca.scope};Ca.unshift(jc);return ta};const p=v(500),n=v(501),c={};z=0;let e=z++,
f=z++,h=z++,k=z++,g=z++,r=z++,u=z++,w=z++,x=z++,B=z++,E=z++,C=z++,H=z++;v=z++;J=z++;let I=z++,K=z++,O=z++,Q=z++,W=z++,R=z++,X=z++,ca=z++,ka=z++;const la={"block-comment":v,"line-comment":v,preprocessor:J},Aa=z="ident stmt stmtlist struct function functionargs decl decllist forloop whileloop if expr precision comment preprocessor keyword keyword_or_ident return break continue discard do-while placeholder quantifier".split(" ")};
shadow$provide[503]=function(z,v,J,m){var t=v(502);J.exports=function(p){for(var n=t(),c=0;c<p.length;c++)n(p[c]);return n(null)}};
shadow$provide[504]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Vector2=void 0;class t{constructor(p=0,n=0){t.prototype.isVector2=!0;this.x=p;this.y=n}get width(){return this.x}set width(p){this.x=p}get height(){return this.y}set height(p){this.y=p}set(p,n){this.x=p;this.y=n;return this}setScalar(p){this.y=this.x=p;return this}setX(p){this.x=p;return this}setY(p){this.y=p;return this}setComponent(p,n){switch(p){case 0:this.x=n;break;case 1:this.y=n;break;default:throw Error("index is out of range: "+
p);}return this}getComponent(p){switch(p){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+p);}}clone(){return new this.constructor(this.x,this.y)}copy(p){this.x=p.x;this.y=p.y;return this}add(p){this.x+=p.x;this.y+=p.y;return this}addScalar(p){this.x+=p;this.y+=p;return this}addVectors(p,n){this.x=p.x+n.x;this.y=p.y+n.y;return this}addScaledVector(p,n){this.x+=p.x*n;this.y+=p.y*n;return this}sub(p){this.x-=p.x;this.y-=p.y;return this}subScalar(p){this.x-=p;
this.y-=p;return this}subVectors(p,n){this.x=p.x-n.x;this.y=p.y-n.y;return this}multiply(p){this.x*=p.x;this.y*=p.y;return this}multiplyScalar(p){this.x*=p;this.y*=p;return this}divide(p){this.x/=p.x;this.y/=p.y;return this}divideScalar(p){return this.multiplyScalar(1/p)}applyMatrix3(p){const n=this.x,c=this.y;p=p.elements;this.x=p[0]*n+p[3]*c+p[6];this.y=p[1]*n+p[4]*c+p[7];return this}min(p){this.x=Math.min(this.x,p.x);this.y=Math.min(this.y,p.y);return this}max(p){this.x=Math.max(this.x,p.x);this.y=
Math.max(this.y,p.y);return this}clamp(p,n){this.x=Math.max(p.x,Math.min(n.x,this.x));this.y=Math.max(p.y,Math.min(n.y,this.y));return this}clampScalar(p,n){this.x=Math.max(p,Math.min(n,this.x));this.y=Math.max(p,Math.min(n,this.y));return this}clampLength(p,n){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(p,Math.min(n,c)))}floor(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this}ceil(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this}round(){this.x=
Math.round(this.x);this.y=Math.round(this.y);return this}roundToZero(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this}negate(){this.x=-this.x;this.y=-this.y;return this}dot(p){return this.x*p.x+this.y*p.y}cross(p){return this.x*p.y-this.y*p.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||
1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(p){return Math.sqrt(this.distanceToSquared(p))}distanceToSquared(p){const n=this.x-p.x;p=this.y-p.y;return n*n+p*p}manhattanDistanceTo(p){return Math.abs(this.x-p.x)+Math.abs(this.y-p.y)}setLength(p){return this.normalize().multiplyScalar(p)}lerp(p,n){this.x+=(p.x-this.x)*n;this.y+=(p.y-this.y)*n;return this}lerpVectors(p,n,c){this.x=p.x+(n.x-p.x)*c;this.y=p.y+(n.y-p.y)*c;return this}equals(p){return p.x===this.x&&p.y===this.y}fromArray(p,
n=0){this.x=p[n];this.y=p[n+1];return this}toArray(p=[],n=0){p[n]=this.x;p[n+1]=this.y;return p}fromBufferAttribute(p,n){this.x=p.getX(n);this.y=p.getY(n);return this}rotateAround(p,n){const c=Math.cos(n);n=Math.sin(n);const e=this.x-p.x,f=this.y-p.y;this.x=e*c-f*n+p.x;this.y=e*n+f*c+p.y;return this}random(){this.x=Math.random();this.y=Math.random();return this}*[Symbol.iterator](){yield this.x;yield this.y}}m.Vector2=t};
shadow$provide[505]=function(z,v,J,m){function t(){const la=4294967295*Math.random()|0,Aa=4294967295*Math.random()|0,ta=4294967295*Math.random()|0,Ha=4294967295*Math.random()|0;return(R[la&255]+R[la>>8&255]+R[la>>16&255]+R[la>>24&255]+"-"+R[Aa&255]+R[Aa>>8&255]+"-"+R[Aa>>16&15|64]+R[Aa>>24&255]+"-"+R[ta&63|128]+R[ta>>8&255]+"-"+R[ta>>16&255]+R[ta>>24&255]+R[Ha&255]+R[Ha>>8&255]+R[Ha>>16&255]+R[Ha>>24&255]).toLowerCase()}function p(la,Aa,ta){return Math.max(Aa,Math.min(ta,la))}function n(la,Aa){return(la%
Aa+Aa)%Aa}function c(la,Aa,ta,Ha,Oa){return Ha+(la-Aa)*(Oa-Ha)/(ta-Aa)}function e(la,Aa,ta){return la!==Aa?(ta-la)/(Aa-la):0}function f(la,Aa,ta){return(1-ta)*la+ta*Aa}function h(la,Aa,ta,Ha){return f(la,Aa,1-Math.exp(-ta*Ha))}function k(la,Aa=1){return Aa-Math.abs(n(la,2*Aa)-Aa)}function g(la,Aa,ta){if(la<=Aa)return 0;if(la>=ta)return 1;la=(la-Aa)/(ta-Aa);return la*la*(3-2*la)}function r(la,Aa,ta){if(la<=Aa)return 0;if(la>=ta)return 1;la=(la-Aa)/(ta-Aa);return la*la*la*(la*(6*la-15)+10)}function u(la,
Aa){return la+Math.floor(Math.random()*(Aa-la+1))}function w(la,Aa){return la+Math.random()*(Aa-la)}function x(la){return la*(.5-Math.random())}function B(la){void 0!==la&&(X=la);la=X+=1831565813;la=Math.imul(la^la>>>15,la|1);la^=la+Math.imul(la^la>>>7,la|61);return((la^la>>>14)>>>0)/4294967296}function E(la){return la*ca}function C(la){return la*ka}function H(la){return 0===(la&la-1)&&0!==la}function I(la){return Math.pow(2,Math.ceil(Math.log(la)/Math.LN2))}function K(la){return Math.pow(2,Math.floor(Math.log(la)/
Math.LN2))}function O(la,Aa,ta,Ha,Oa){var da=Math.cos;const Wa=Math.sin,Pa=da(ta/2);ta=Wa(ta/2);const mb=da((Aa+Ha)/2),Cb=Wa((Aa+Ha)/2),yb=da((Aa-Ha)/2),tb=Wa((Aa-Ha)/2);da=da((Ha-Aa)/2);Aa=Wa((Ha-Aa)/2);switch(Oa){case "XYX":la.set(Pa*Cb,ta*yb,ta*tb,Pa*mb);break;case "YZY":la.set(ta*tb,Pa*Cb,ta*yb,Pa*mb);break;case "ZXZ":la.set(ta*yb,ta*tb,Pa*Cb,Pa*mb);break;case "XZX":la.set(Pa*Cb,ta*Aa,ta*da,Pa*mb);break;case "YXY":la.set(ta*da,Pa*Cb,ta*Aa,Pa*mb);break;case "ZYZ":la.set(ta*Aa,ta*da,Pa*Cb,Pa*mb);
break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+Oa)}}function Q(la,Aa){switch(Aa.constructor){case Float32Array:return la;case Uint16Array:return la/65535;case Uint8Array:return la/255;case Int16Array:return Math.max(la/32767,-1);case Int8Array:return Math.max(la/127,-1);default:throw Error("Invalid component type.");}}function W(la,Aa){switch(Aa.constructor){case Float32Array:return la;case Uint16Array:return Math.round(65535*la);case Uint8Array:return Math.round(255*
la);case Int16Array:return Math.round(32767*la);case Int8Array:return Math.round(127*la);default:throw Error("Invalid component type.");}}Object.defineProperty(m,"__esModule",{value:!0});m.generateUUID=t;m.clamp=p;m.euclideanModulo=n;m.mapLinear=c;m.inverseLerp=e;m.lerp=f;m.damp=h;m.pingpong=k;m.smoothstep=g;m.smootherstep=r;m.randInt=u;m.randFloat=w;m.randFloatSpread=x;m.seededRandom=B;m.degToRad=E;m.radToDeg=C;m.isPowerOfTwo=H;m.ceilPowerOfTwo=I;m.floorPowerOfTwo=K;m.setQuaternionFromProperEuler=
O;m.normalize=W;m.denormalize=Q;m.MathUtils=m.RAD2DEG=m.DEG2RAD=void 0;const R="00 01 02 03 04 05 06 07 08 09 0a 0b 0c 0d 0e 0f 10 11 12 13 14 15 16 17 18 19 1a 1b 1c 1d 1e 1f 20 21 22 23 24 25 26 27 28 29 2a 2b 2c 2d 2e 2f 30 31 32 33 34 35 36 37 38 39 3a 3b 3c 3d 3e 3f 40 41 42 43 44 45 46 47 48 49 4a 4b 4c 4d 4e 4f 50 51 52 53 54 55 56 57 58 59 5a 5b 5c 5d 5e 5f 60 61 62 63 64 65 66 67 68 69 6a 6b 6c 6d 6e 6f 70 71 72 73 74 75 76 77 78 79 7a 7b 7c 7d 7e 7f 80 81 82 83 84 85 86 87 88 89 8a 8b 8c 8d 8e 8f 90 91 92 93 94 95 96 97 98 99 9a 9b 9c 9d 9e 9f a0 a1 a2 a3 a4 a5 a6 a7 a8 a9 aa ab ac ad ae af b0 b1 b2 b3 b4 b5 b6 b7 b8 b9 ba bb bc bd be bf c0 c1 c2 c3 c4 c5 c6 c7 c8 c9 ca cb cc cd ce cf d0 d1 d2 d3 d4 d5 d6 d7 d8 d9 da db dc dd de df e0 e1 e2 e3 e4 e5 e6 e7 e8 e9 ea eb ec ed ee ef f0 f1 f2 f3 f4 f5 f6 f7 f8 f9 fa fb fc fd fe ff".split(" ");
let X=1234567;const ca=Math.PI/180;m.DEG2RAD=ca;const ka=180/Math.PI;m.RAD2DEG=ka;m.MathUtils={DEG2RAD:ca,RAD2DEG:ka,generateUUID:t,clamp:p,euclideanModulo:n,mapLinear:c,inverseLerp:e,lerp:f,damp:h,pingpong:k,smoothstep:g,smootherstep:r,randInt:u,randFloat:w,randFloatSpread:x,seededRandom:B,degToRad:E,radToDeg:C,isPowerOfTwo:H,ceilPowerOfTwo:I,floorPowerOfTwo:K,setQuaternionFromProperEuler:O,normalize:W,denormalize:Q}};
shadow$provide[506]=function(z,v,J,m){function t(c){if("function"!==typeof WeakMap)return null;var e=new WeakMap,f=new WeakMap;return(t=function(h){return h?f:e})(c)}Object.defineProperty(m,"__esModule",{value:!0});m.Quaternion=void 0;var p=function(c,e){if(!e&&c&&c.__esModule)return c;if(null===c||"object"!==typeof c&&"function"!==typeof c)return{default:c};if((e=t(e))&&e.has(c))return e.get(c);var f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,k;for(k in c)if("default"!==k&&Object.prototype.hasOwnProperty.call(c,
k)){var g=h?Object.getOwnPropertyDescriptor(c,k):null;g&&(g.get||g.set)?Object.defineProperty(f,k,g):f[k]=c[k]}f.default=c;e&&e.set(c,f);return f}(v(505));class n{constructor(c=0,e=0,f=0,h=1){this.isQuaternion=!0;this._x=c;this._y=e;this._z=f;this._w=h}static slerpFlat(c,e,f,h,k,g,r){let u=f[h+0],w=f[h+1],x=f[h+2];f=f[h+3];h=k[g+0];const B=k[g+1],E=k[g+2];k=k[g+3];if(0===r)c[e+0]=u,c[e+1]=w,c[e+2]=x,c[e+3]=f;else if(1===r)c[e+0]=h,c[e+1]=B,c[e+2]=E,c[e+3]=k;else{if(f!==k||u!==h||w!==B||x!==E){g=1-
r;var C=u*h+w*B+x*E+f*k,H=0<=C?1:-1,I=1-C*C;I>Number.EPSILON&&(I=Math.sqrt(I),C=Math.atan2(I,C*H),g=Math.sin(g*C)/I,r=Math.sin(r*C)/I);H*=r;u=u*g+h*H;w=w*g+B*H;x=x*g+E*H;f=f*g+k*H;g===1-r&&(r=1/Math.sqrt(u*u+w*w+x*x+f*f),u*=r,w*=r,x*=r,f*=r)}c[e]=u;c[e+1]=w;c[e+2]=x;c[e+3]=f}}static multiplyQuaternionsFlat(c,e,f,h,k,g){const r=f[h],u=f[h+1],w=f[h+2];f=f[h+3];h=k[g];const x=k[g+1],B=k[g+2];k=k[g+3];c[e]=r*k+f*h+u*B-w*x;c[e+1]=u*k+f*x+w*h-r*B;c[e+2]=w*k+f*B+r*x-u*h;c[e+3]=f*k-r*h-u*x-w*B;return c}get x(){return this._x}set x(c){this._x=
c;this._onChangeCallback()}get y(){return this._y}set y(c){this._y=c;this._onChangeCallback()}get z(){return this._z}set z(c){this._z=c;this._onChangeCallback()}get w(){return this._w}set w(c){this._w=c;this._onChangeCallback()}set(c,e,f,h){this._x=c;this._y=e;this._z=f;this._w=h;this._onChangeCallback();return this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(c){this._x=c.x;this._y=c.y;this._z=c.z;this._w=c.w;this._onChangeCallback();return this}setFromEuler(c,e){var f=
c._x,h=c._y,k=c._z;c=c._order;var g=Math.cos;const r=Math.sin,u=g(f/2),w=g(h/2);g=g(k/2);f=r(f/2);h=r(h/2);k=r(k/2);switch(c){case "XYZ":this._x=f*w*g+u*h*k;this._y=u*h*g-f*w*k;this._z=u*w*k+f*h*g;this._w=u*w*g-f*h*k;break;case "YXZ":this._x=f*w*g+u*h*k;this._y=u*h*g-f*w*k;this._z=u*w*k-f*h*g;this._w=u*w*g+f*h*k;break;case "ZXY":this._x=f*w*g-u*h*k;this._y=u*h*g+f*w*k;this._z=u*w*k+f*h*g;this._w=u*w*g-f*h*k;break;case "ZYX":this._x=f*w*g-u*h*k;this._y=u*h*g+f*w*k;this._z=u*w*k-f*h*g;this._w=u*w*g+
f*h*k;break;case "YZX":this._x=f*w*g+u*h*k;this._y=u*h*g+f*w*k;this._z=u*w*k-f*h*g;this._w=u*w*g-f*h*k;break;case "XZY":this._x=f*w*g-u*h*k;this._y=u*h*g-f*w*k;this._z=u*w*k+f*h*g;this._w=u*w*g+f*h*k;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+c)}!1!==e&&this._onChangeCallback();return this}setFromAxisAngle(c,e){e/=2;const f=Math.sin(e);this._x=c.x*f;this._y=c.y*f;this._z=c.z*f;this._w=Math.cos(e);this._onChangeCallback();return this}setFromRotationMatrix(c){var e=
c.elements,f=e[0];c=e[4];const h=e[8],k=e[1],g=e[5],r=e[9],u=e[2],w=e[6];e=e[10];const x=f+g+e;0<x?(f=.5/Math.sqrt(x+1),this._w=.25/f,this._x=(w-r)*f,this._y=(h-u)*f,this._z=(k-c)*f):f>g&&f>e?(f=2*Math.sqrt(1+f-g-e),this._w=(w-r)/f,this._x=.25*f,this._y=(c+k)/f,this._z=(h+u)/f):g>e?(f=2*Math.sqrt(1+g-f-e),this._w=(h-u)/f,this._x=(c+k)/f,this._y=.25*f,this._z=(r+w)/f):(f=2*Math.sqrt(1+e-f-g),this._w=(k-c)/f,this._x=(h+u)/f,this._y=(r+w)/f,this._z=.25*f);this._onChangeCallback();return this}setFromUnitVectors(c,
e){let f=c.dot(e)+1;f<Number.EPSILON?(f=0,Math.abs(c.x)>Math.abs(c.z)?(this._x=-c.y,this._y=c.x,this._z=0):(this._x=0,this._y=-c.z,this._z=c.y)):(this._x=c.y*e.z-c.z*e.y,this._y=c.z*e.x-c.x*e.z,this._z=c.x*e.y-c.y*e.x);this._w=f;return this.normalize()}angleTo(c){return 2*Math.acos(Math.abs(p.clamp(this.dot(c),-1,1)))}rotateTowards(c,e){const f=this.angleTo(c);if(0===f)return this;this.slerp(c,Math.min(1,e/f));return this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){this._x*=
-1;this._y*=-1;this._z*=-1;this._onChangeCallback();return this}dot(c){return this._x*c._x+this._y*c._y+this._z*c._z+this._w*c._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let c=this.length();0===c?(this._z=this._y=this._x=0,this._w=1):(c=1/c,this._x*=c,this._y*=c,this._z*=c,this._w*=c);this._onChangeCallback();return this}multiply(c){return this.multiplyQuaternions(this,
c)}premultiply(c){return this.multiplyQuaternions(c,this)}multiplyQuaternions(c,e){const f=c._x,h=c._y,k=c._z;c=c._w;const g=e._x,r=e._y,u=e._z;e=e._w;this._x=f*e+c*g+h*u-k*r;this._y=h*e+c*r+k*g-f*u;this._z=k*e+c*u+f*r-h*g;this._w=c*e-f*g-h*r-k*u;this._onChangeCallback();return this}slerp(c,e){if(0===e)return this;if(1===e)return this.copy(c);const f=this._x,h=this._y,k=this._z,g=this._w;var r=g*c._w+f*c._x+h*c._y+k*c._z;0>r?(this._w=-c._w,this._x=-c._x,this._y=-c._y,this._z=-c._z,r=-r):this.copy(c);
if(1<=r)return this._w=g,this._x=f,this._y=h,this._z=k,this;c=1-r*r;if(c<=Number.EPSILON)return r=1-e,this._w=r*g+e*this._w,this._x=r*f+e*this._x,this._y=r*h+e*this._y,this._z=r*k+e*this._z,this.normalize(),this._onChangeCallback(),this;c=Math.sqrt(c);const u=Math.atan2(c,r);r=Math.sin((1-e)*u)/c;e=Math.sin(e*u)/c;this._w=g*r+this._w*e;this._x=f*r+this._x*e;this._y=h*r+this._y*e;this._z=k*r+this._z*e;this._onChangeCallback();return this}slerpQuaternions(c,e,f){return this.copy(c).slerp(e,f)}random(){var c=
Math.random();const e=Math.sqrt(1-c);c=Math.sqrt(c);const f=2*Math.PI*Math.random(),h=2*Math.PI*Math.random();return this.set(e*Math.cos(f),c*Math.sin(h),c*Math.cos(h),e*Math.sin(f))}equals(c){return c._x===this._x&&c._y===this._y&&c._z===this._z&&c._w===this._w}fromArray(c,e=0){this._x=c[e];this._y=c[e+1];this._z=c[e+2];this._w=c[e+3];this._onChangeCallback();return this}toArray(c=[],e=0){c[e]=this._x;c[e+1]=this._y;c[e+2]=this._z;c[e+3]=this._w;return c}fromBufferAttribute(c,e){this._x=c.getX(e);
this._y=c.getY(e);this._z=c.getZ(e);this._w=c.getW(e);return this}_onChange(c){this._onChangeCallback=c;return this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x;yield this._y;yield this._z;yield this._w}}m.Quaternion=n};
shadow$provide[507]=function(z,v,J,m){function t(f){if("function"!==typeof WeakMap)return null;var h=new WeakMap,k=new WeakMap;return(t=function(g){return g?k:h})(f)}Object.defineProperty(m,"__esModule",{value:!0});m.Vector3=void 0;var p=function(f,h){if(!h&&f&&f.__esModule)return f;if(null===f||"object"!==typeof f&&"function"!==typeof f)return{default:f};if((h=t(h))&&h.has(f))return h.get(f);var k={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor,r;for(r in f)if("default"!==r&&Object.prototype.hasOwnProperty.call(f,
r)){var u=g?Object.getOwnPropertyDescriptor(f,r):null;u&&(u.get||u.set)?Object.defineProperty(k,r,u):k[r]=f[r]}k.default=f;h&&h.set(f,k);return k}(v(505));z=v(506);class n{constructor(f=0,h=0,k=0){n.prototype.isVector3=!0;this.x=f;this.y=h;this.z=k}set(f,h,k){void 0===k&&(k=this.z);this.x=f;this.y=h;this.z=k;return this}setScalar(f){this.z=this.y=this.x=f;return this}setX(f){this.x=f;return this}setY(f){this.y=f;return this}setZ(f){this.z=f;return this}setComponent(f,h){switch(f){case 0:this.x=h;
break;case 1:this.y=h;break;case 2:this.z=h;break;default:throw Error("index is out of range: "+f);}return this}getComponent(f){switch(f){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+f);}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(f){this.x=f.x;this.y=f.y;this.z=f.z;return this}add(f){this.x+=f.x;this.y+=f.y;this.z+=f.z;return this}addScalar(f){this.x+=f;this.y+=f;this.z+=f;return this}addVectors(f,h){this.x=f.x+h.x;
this.y=f.y+h.y;this.z=f.z+h.z;return this}addScaledVector(f,h){this.x+=f.x*h;this.y+=f.y*h;this.z+=f.z*h;return this}sub(f){this.x-=f.x;this.y-=f.y;this.z-=f.z;return this}subScalar(f){this.x-=f;this.y-=f;this.z-=f;return this}subVectors(f,h){this.x=f.x-h.x;this.y=f.y-h.y;this.z=f.z-h.z;return this}multiply(f){this.x*=f.x;this.y*=f.y;this.z*=f.z;return this}multiplyScalar(f){this.x*=f;this.y*=f;this.z*=f;return this}multiplyVectors(f,h){this.x=f.x*h.x;this.y=f.y*h.y;this.z=f.z*h.z;return this}applyEuler(f){return this.applyQuaternion(e.setFromEuler(f))}applyAxisAngle(f,
h){return this.applyQuaternion(e.setFromAxisAngle(f,h))}applyMatrix3(f){const h=this.x,k=this.y,g=this.z;f=f.elements;this.x=f[0]*h+f[3]*k+f[6]*g;this.y=f[1]*h+f[4]*k+f[7]*g;this.z=f[2]*h+f[5]*k+f[8]*g;return this}applyNormalMatrix(f){return this.applyMatrix3(f).normalize()}applyMatrix4(f){const h=this.x,k=this.y,g=this.z;f=f.elements;const r=1/(f[3]*h+f[7]*k+f[11]*g+f[15]);this.x=(f[0]*h+f[4]*k+f[8]*g+f[12])*r;this.y=(f[1]*h+f[5]*k+f[9]*g+f[13])*r;this.z=(f[2]*h+f[6]*k+f[10]*g+f[14])*r;return this}applyQuaternion(f){var h=
this.x;const k=this.y,g=this.z,r=f.x,u=f.y,w=f.z;f=f.w;const x=f*h+u*g-w*k,B=f*k+w*h-r*g,E=f*g+r*k-u*h;h=-r*h-u*k-w*g;this.x=x*f+h*-r+B*-w-E*-u;this.y=B*f+h*-u+E*-r-x*-w;this.z=E*f+h*-w+x*-u-B*-r;return this}project(f){return this.applyMatrix4(f.matrixWorldInverse).applyMatrix4(f.projectionMatrix)}unproject(f){return this.applyMatrix4(f.projectionMatrixInverse).applyMatrix4(f.matrixWorld)}transformDirection(f){const h=this.x,k=this.y,g=this.z;f=f.elements;this.x=f[0]*h+f[4]*k+f[8]*g;this.y=f[1]*h+
f[5]*k+f[9]*g;this.z=f[2]*h+f[6]*k+f[10]*g;return this.normalize()}divide(f){this.x/=f.x;this.y/=f.y;this.z/=f.z;return this}divideScalar(f){return this.multiplyScalar(1/f)}min(f){this.x=Math.min(this.x,f.x);this.y=Math.min(this.y,f.y);this.z=Math.min(this.z,f.z);return this}max(f){this.x=Math.max(this.x,f.x);this.y=Math.max(this.y,f.y);this.z=Math.max(this.z,f.z);return this}clamp(f,h){this.x=Math.max(f.x,Math.min(h.x,this.x));this.y=Math.max(f.y,Math.min(h.y,this.y));this.z=Math.max(f.z,Math.min(h.z,
this.z));return this}clampScalar(f,h){this.x=Math.max(f,Math.min(h,this.x));this.y=Math.max(f,Math.min(h,this.y));this.z=Math.max(f,Math.min(h,this.z));return this}clampLength(f,h){const k=this.length();return this.divideScalar(k||1).multiplyScalar(Math.max(f,Math.min(h,k)))}floor(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this}ceil(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this}round(){this.x=Math.round(this.x);
this.y=Math.round(this.y);this.z=Math.round(this.z);return this}roundToZero(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this}negate(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this}dot(f){return this.x*f.x+this.y*f.y+this.z*f.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+
Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(f){return this.normalize().multiplyScalar(f)}lerp(f,h){this.x+=(f.x-this.x)*h;this.y+=(f.y-this.y)*h;this.z+=(f.z-this.z)*h;return this}lerpVectors(f,h,k){this.x=f.x+(h.x-f.x)*k;this.y=f.y+(h.y-f.y)*k;this.z=f.z+(h.z-f.z)*k;return this}cross(f){return this.crossVectors(this,f)}crossVectors(f,h){const k=f.x,g=f.y;f=f.z;const r=h.x,u=h.y;h=h.z;this.x=g*h-f*u;this.y=f*r-k*h;this.z=k*u-g*r;return this}projectOnVector(f){var h=
f.lengthSq();if(0===h)return this.set(0,0,0);h=f.dot(this)/h;return this.copy(f).multiplyScalar(h)}projectOnPlane(f){c.copy(this).projectOnVector(f);return this.sub(c)}reflect(f){return this.sub(c.copy(f).multiplyScalar(2*this.dot(f)))}angleTo(f){const h=Math.sqrt(this.lengthSq()*f.lengthSq());if(0===h)return Math.PI/2;f=this.dot(f)/h;return Math.acos(p.clamp(f,-1,1))}distanceTo(f){return Math.sqrt(this.distanceToSquared(f))}distanceToSquared(f){const h=this.x-f.x,k=this.y-f.y;f=this.z-f.z;return h*
h+k*k+f*f}manhattanDistanceTo(f){return Math.abs(this.x-f.x)+Math.abs(this.y-f.y)+Math.abs(this.z-f.z)}setFromSpherical(f){return this.setFromSphericalCoords(f.radius,f.phi,f.theta)}setFromSphericalCoords(f,h,k){const g=Math.sin(h)*f;this.x=g*Math.sin(k);this.y=Math.cos(h)*f;this.z=g*Math.cos(k);return this}setFromCylindrical(f){return this.setFromCylindricalCoords(f.radius,f.theta,f.y)}setFromCylindricalCoords(f,h,k){this.x=f*Math.sin(h);this.y=k;this.z=f*Math.cos(h);return this}setFromMatrixPosition(f){f=
f.elements;this.x=f[12];this.y=f[13];this.z=f[14];return this}setFromMatrixScale(f){const h=this.setFromMatrixColumn(f,0).length(),k=this.setFromMatrixColumn(f,1).length();f=this.setFromMatrixColumn(f,2).length();this.x=h;this.y=k;this.z=f;return this}setFromMatrixColumn(f,h){return this.fromArray(f.elements,4*h)}setFromMatrix3Column(f,h){return this.fromArray(f.elements,3*h)}setFromEuler(f){this.x=f._x;this.y=f._y;this.z=f._z;return this}equals(f){return f.x===this.x&&f.y===this.y&&f.z===this.z}fromArray(f,
h=0){this.x=f[h];this.y=f[h+1];this.z=f[h+2];return this}toArray(f=[],h=0){f[h]=this.x;f[h+1]=this.y;f[h+2]=this.z;return f}fromBufferAttribute(f,h){this.x=f.getX(h);this.y=f.getY(h);this.z=f.getZ(h);return this}random(){this.x=Math.random();this.y=Math.random();this.z=Math.random();return this}randomDirection(){const f=2*(Math.random()-.5),h=Math.random()*Math.PI*2,k=Math.sqrt(1-f**2);this.x=k*Math.cos(h);this.y=k*Math.sin(h);this.z=f;return this}*[Symbol.iterator](){yield this.x;yield this.y;yield this.z}}
m.Vector3=n;const c=new n,e=new z.Quaternion};
shadow$provide[508]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Vector4=void 0;class t{constructor(p=0,n=0,c=0,e=1){t.prototype.isVector4=!0;this.x=p;this.y=n;this.z=c;this.w=e}get width(){return this.z}set width(p){this.z=p}get height(){return this.w}set height(p){this.w=p}set(p,n,c,e){this.x=p;this.y=n;this.z=c;this.w=e;return this}setScalar(p){this.w=this.z=this.y=this.x=p;return this}setX(p){this.x=p;return this}setY(p){this.y=p;return this}setZ(p){this.z=p;return this}setW(p){this.w=
p;return this}setComponent(p,n){switch(p){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw Error("index is out of range: "+p);}return this}getComponent(p){switch(p){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+p);}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(p){this.x=p.x;this.y=p.y;this.z=p.z;this.w=void 0!==p.w?p.w:1;return this}add(p){this.x+=
p.x;this.y+=p.y;this.z+=p.z;this.w+=p.w;return this}addScalar(p){this.x+=p;this.y+=p;this.z+=p;this.w+=p;return this}addVectors(p,n){this.x=p.x+n.x;this.y=p.y+n.y;this.z=p.z+n.z;this.w=p.w+n.w;return this}addScaledVector(p,n){this.x+=p.x*n;this.y+=p.y*n;this.z+=p.z*n;this.w+=p.w*n;return this}sub(p){this.x-=p.x;this.y-=p.y;this.z-=p.z;this.w-=p.w;return this}subScalar(p){this.x-=p;this.y-=p;this.z-=p;this.w-=p;return this}subVectors(p,n){this.x=p.x-n.x;this.y=p.y-n.y;this.z=p.z-n.z;this.w=p.w-n.w;
return this}multiply(p){this.x*=p.x;this.y*=p.y;this.z*=p.z;this.w*=p.w;return this}multiplyScalar(p){this.x*=p;this.y*=p;this.z*=p;this.w*=p;return this}applyMatrix4(p){const n=this.x,c=this.y,e=this.z,f=this.w;p=p.elements;this.x=p[0]*n+p[4]*c+p[8]*e+p[12]*f;this.y=p[1]*n+p[5]*c+p[9]*e+p[13]*f;this.z=p[2]*n+p[6]*c+p[10]*e+p[14]*f;this.w=p[3]*n+p[7]*c+p[11]*e+p[15]*f;return this}divideScalar(p){return this.multiplyScalar(1/p)}setAxisAngleFromQuaternion(p){this.w=2*Math.acos(p.w);const n=Math.sqrt(1-
p.w*p.w);1E-4>n?(this.x=1,this.z=this.y=0):(this.x=p.x/n,this.y=p.y/n,this.z=p.z/n);return this}setAxisAngleFromRotationMatrix(p){p=p.elements;var n=p[0];var c=p[4];var e=p[8];const f=p[1];var h=p[5],k=p[9];var g=p[2];var r=p[6];var u=p[10];if(.01>Math.abs(c-f)&&.01>Math.abs(e-g)&&.01>Math.abs(k-r)){if(.1>Math.abs(c+f)&&.1>Math.abs(e+g)&&.1>Math.abs(k+r)&&.1>Math.abs(n+h+u-3))return this.set(1,0,0,0),this;p=Math.PI;n=(n+1)/2;h=(h+1)/2;u=(u+1)/2;c=(c+f)/4;e=(e+g)/4;k=(k+r)/4;n>h&&n>u?.01>n?(r=0,c=
g=.707106781):(r=Math.sqrt(n),g=c/r,c=e/r):h>u?.01>h?(r=.707106781,g=0,c=.707106781):(g=Math.sqrt(h),r=c/g,c=k/g):.01>u?(g=r=.707106781,c=0):(c=Math.sqrt(u),r=e/c,g=k/c);this.set(r,g,c,p);return this}p=Math.sqrt((r-k)*(r-k)+(e-g)*(e-g)+(f-c)*(f-c));.001>Math.abs(p)&&(p=1);this.x=(r-k)/p;this.y=(e-g)/p;this.z=(f-c)/p;this.w=Math.acos((n+h+u-1)/2);return this}min(p){this.x=Math.min(this.x,p.x);this.y=Math.min(this.y,p.y);this.z=Math.min(this.z,p.z);this.w=Math.min(this.w,p.w);return this}max(p){this.x=
Math.max(this.x,p.x);this.y=Math.max(this.y,p.y);this.z=Math.max(this.z,p.z);this.w=Math.max(this.w,p.w);return this}clamp(p,n){this.x=Math.max(p.x,Math.min(n.x,this.x));this.y=Math.max(p.y,Math.min(n.y,this.y));this.z=Math.max(p.z,Math.min(n.z,this.z));this.w=Math.max(p.w,Math.min(n.w,this.w));return this}clampScalar(p,n){this.x=Math.max(p,Math.min(n,this.x));this.y=Math.max(p,Math.min(n,this.y));this.z=Math.max(p,Math.min(n,this.z));this.w=Math.max(p,Math.min(n,this.w));return this}clampLength(p,
n){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(p,Math.min(n,c)))}floor(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this}ceil(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this}round(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this}roundToZero(){this.x=0>this.x?Math.ceil(this.x):
Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this}negate(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this}dot(p){return this.x*p.x+this.y*p.y+this.z*p.z+this.w*p.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+
Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(p){return this.normalize().multiplyScalar(p)}lerp(p,n){this.x+=(p.x-this.x)*n;this.y+=(p.y-this.y)*n;this.z+=(p.z-this.z)*n;this.w+=(p.w-this.w)*n;return this}lerpVectors(p,n,c){this.x=p.x+(n.x-p.x)*c;this.y=p.y+(n.y-p.y)*c;this.z=p.z+(n.z-p.z)*c;this.w=p.w+(n.w-p.w)*c;return this}equals(p){return p.x===this.x&&p.y===this.y&&p.z===this.z&&p.w===this.w}fromArray(p,n=0){this.x=p[n];this.y=
p[n+1];this.z=p[n+2];this.w=p[n+3];return this}toArray(p=[],n=0){p[n]=this.x;p[n+1]=this.y;p[n+2]=this.z;p[n+3]=this.w;return p}fromBufferAttribute(p,n){this.x=p.getX(n);this.y=p.getY(n);this.z=p.getZ(n);this.w=p.getW(n);return this}random(){this.x=Math.random();this.y=Math.random();this.z=Math.random();this.w=Math.random();return this}*[Symbol.iterator](){yield this.x;yield this.y;yield this.z;yield this.w}}m.Vector4=t};
shadow$provide[509]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Matrix3=void 0;class t{constructor(){t.prototype.isMatrix3=!0;this.elements=[1,0,0,0,1,0,0,0,1]}set(n,c,e,f,h,k,g,r,u){const w=this.elements;w[0]=n;w[1]=f;w[2]=g;w[3]=c;w[4]=h;w[5]=r;w[6]=e;w[7]=k;w[8]=u;return this}identity(){this.set(1,0,0,0,1,0,0,0,1);return this}copy(n){const c=this.elements;n=n.elements;c[0]=n[0];c[1]=n[1];c[2]=n[2];c[3]=n[3];c[4]=n[4];c[5]=n[5];c[6]=n[6];c[7]=n[7];c[8]=n[8];return this}extractBasis(n,
c,e){n.setFromMatrix3Column(this,0);c.setFromMatrix3Column(this,1);e.setFromMatrix3Column(this,2);return this}setFromMatrix4(n){n=n.elements;this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]);return this}multiply(n){return this.multiplyMatrices(this,n)}premultiply(n){return this.multiplyMatrices(n,this)}multiplyMatrices(n,c){var e=n.elements,f=c.elements;c=this.elements;n=e[0];const h=e[3],k=e[6],g=e[1],r=e[4],u=e[7],w=e[2],x=e[5];e=e[8];const B=f[0],E=f[3],C=f[6],H=f[1],I=f[4],K=f[7],O=f[2],
Q=f[5];f=f[8];c[0]=n*B+h*H+k*O;c[3]=n*E+h*I+k*Q;c[6]=n*C+h*K+k*f;c[1]=g*B+r*H+u*O;c[4]=g*E+r*I+u*Q;c[7]=g*C+r*K+u*f;c[2]=w*B+x*H+e*O;c[5]=w*E+x*I+e*Q;c[8]=w*C+x*K+e*f;return this}multiplyScalar(n){const c=this.elements;c[0]*=n;c[3]*=n;c[6]*=n;c[1]*=n;c[4]*=n;c[7]*=n;c[2]*=n;c[5]*=n;c[8]*=n;return this}determinant(){var n=this.elements;const c=n[0],e=n[1],f=n[2],h=n[3],k=n[4],g=n[5],r=n[6],u=n[7];n=n[8];return c*k*n-c*g*u-e*h*n+e*g*r+f*h*u-f*k*r}invert(){const n=this.elements,c=n[0],e=n[1],f=n[2],
h=n[3],k=n[4],g=n[5],r=n[6],u=n[7],w=n[8],x=w*k-g*u,B=g*r-w*h,E=u*h-k*r;var C=c*x+e*B+f*E;if(0===C)return this.set(0,0,0,0,0,0,0,0,0);C=1/C;n[0]=x*C;n[1]=(f*u-w*e)*C;n[2]=(g*e-f*k)*C;n[3]=B*C;n[4]=(w*c-f*r)*C;n[5]=(f*h-g*c)*C;n[6]=E*C;n[7]=(e*r-u*c)*C;n[8]=(k*c-e*h)*C;return this}transpose(){let n;const c=this.elements;n=c[1];c[1]=c[3];c[3]=n;n=c[2];c[2]=c[6];c[6]=n;n=c[5];c[5]=c[7];c[7]=n;return this}getNormalMatrix(n){return this.setFromMatrix4(n).invert().transpose()}transposeIntoArray(n){const c=
this.elements;n[0]=c[0];n[1]=c[3];n[2]=c[6];n[3]=c[1];n[4]=c[4];n[5]=c[7];n[6]=c[2];n[7]=c[5];n[8]=c[8];return this}setUvTransform(n,c,e,f,h,k,g){const r=Math.cos(h);h=Math.sin(h);this.set(e*r,e*h,-e*(r*k+h*g)+k+n,-f*h,f*r,-f*(-h*k+r*g)+g+c,0,0,1);return this}scale(n,c){this.premultiply(p.makeScale(n,c));return this}rotate(n){this.premultiply(p.makeRotation(-n));return this}translate(n,c){this.premultiply(p.makeTranslation(n,c));return this}makeTranslation(n,c){this.set(1,0,n,0,1,c,0,0,1);return this}makeRotation(n){const c=
Math.cos(n);n=Math.sin(n);this.set(c,-n,0,n,c,0,0,0,1);return this}makeScale(n,c){this.set(n,0,0,0,c,0,0,0,1);return this}equals(n){const c=this.elements;n=n.elements;for(let e=0;9>e;e++)if(c[e]!==n[e])return!1;return!0}fromArray(n,c=0){for(let e=0;9>e;e++)this.elements[e]=n[e+c];return this}toArray(n=[],c=0){const e=this.elements;n[c]=e[0];n[c+1]=e[1];n[c+2]=e[2];n[c+3]=e[3];n[c+4]=e[4];n[c+5]=e[5];n[c+6]=e[6];n[c+7]=e[7];n[c+8]=e[8];return n}clone(){return(new this.constructor).fromArray(this.elements)}}
m.Matrix3=t;const p=new t};
shadow$provide[510]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Matrix4=void 0;z=v(507);class t{constructor(){t.prototype.isMatrix4=!0;this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(g,r,u,w,x,B,E,C,H,I,K,O,Q,W,R,X){const ca=this.elements;ca[0]=g;ca[4]=r;ca[8]=u;ca[12]=w;ca[1]=x;ca[5]=B;ca[9]=E;ca[13]=C;ca[2]=H;ca[6]=I;ca[10]=K;ca[14]=O;ca[3]=Q;ca[7]=W;ca[11]=R;ca[15]=X;return this}identity(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this}clone(){return(new t).fromArray(this.elements)}copy(g){const r=
this.elements;g=g.elements;r[0]=g[0];r[1]=g[1];r[2]=g[2];r[3]=g[3];r[4]=g[4];r[5]=g[5];r[6]=g[6];r[7]=g[7];r[8]=g[8];r[9]=g[9];r[10]=g[10];r[11]=g[11];r[12]=g[12];r[13]=g[13];r[14]=g[14];r[15]=g[15];return this}copyPosition(g){const r=this.elements;g=g.elements;r[12]=g[12];r[13]=g[13];r[14]=g[14];return this}setFromMatrix3(g){g=g.elements;this.set(g[0],g[3],g[6],0,g[1],g[4],g[7],0,g[2],g[5],g[8],0,0,0,0,1);return this}extractBasis(g,r,u){g.setFromMatrixColumn(this,0);r.setFromMatrixColumn(this,1);
u.setFromMatrixColumn(this,2);return this}makeBasis(g,r,u){this.set(g.x,r.x,u.x,0,g.y,r.y,u.y,0,g.z,r.z,u.z,0,0,0,0,1);return this}extractRotation(g){const r=this.elements,u=g.elements,w=1/p.setFromMatrixColumn(g,0).length(),x=1/p.setFromMatrixColumn(g,1).length();g=1/p.setFromMatrixColumn(g,2).length();r[0]=u[0]*w;r[1]=u[1]*w;r[2]=u[2]*w;r[3]=0;r[4]=u[4]*x;r[5]=u[5]*x;r[6]=u[6]*x;r[7]=0;r[8]=u[8]*g;r[9]=u[9]*g;r[10]=u[10]*g;r[11]=0;r[12]=0;r[13]=0;r[14]=0;r[15]=1;return this}makeRotationFromEuler(g){const r=
this.elements;var u=g.x,w=g.y,x=g.z;const B=Math.cos(u);u=Math.sin(u);const E=Math.cos(w);w=Math.sin(w);const C=Math.cos(x);x=Math.sin(x);if("XYZ"===g.order){g=B*C;var H=B*x,I=u*C,K=u*x;r[0]=E*C;r[4]=-E*x;r[8]=w;r[1]=H+I*w;r[5]=g-K*w;r[9]=-u*E;r[2]=K-g*w;r[6]=I+H*w;r[10]=B*E}else"YXZ"===g.order?(g=E*C,H=E*x,I=w*C,K=w*x,r[0]=g+K*u,r[4]=I*u-H,r[8]=B*w,r[1]=B*x,r[5]=B*C,r[9]=-u,r[2]=H*u-I,r[6]=K+g*u,r[10]=B*E):"ZXY"===g.order?(g=E*C,H=E*x,I=w*C,K=w*x,r[0]=g-K*u,r[4]=-B*x,r[8]=I+H*u,r[1]=H+I*u,r[5]=B*
C,r[9]=K-g*u,r[2]=-B*w,r[6]=u,r[10]=B*E):"ZYX"===g.order?(g=B*C,H=B*x,I=u*C,K=u*x,r[0]=E*C,r[4]=I*w-H,r[8]=g*w+K,r[1]=E*x,r[5]=K*w+g,r[9]=H*w-I,r[2]=-w,r[6]=u*E,r[10]=B*E):"YZX"===g.order?(g=B*E,H=B*w,I=u*E,K=u*w,r[0]=E*C,r[4]=K-g*x,r[8]=I*x+H,r[1]=x,r[5]=B*C,r[9]=-u*C,r[2]=-w*C,r[6]=H*x+I,r[10]=g-K*x):"XZY"===g.order&&(g=B*E,H=B*w,I=u*E,K=u*w,r[0]=E*C,r[4]=-x,r[8]=w*C,r[1]=g*x+K,r[5]=B*C,r[9]=H*x-I,r[2]=I*x-H,r[6]=u*C,r[10]=K*x+g);r[3]=0;r[7]=0;r[11]=0;r[12]=0;r[13]=0;r[14]=0;r[15]=1;return this}makeRotationFromQuaternion(g){return this.compose(c,
g,e)}lookAt(g,r,u){const w=this.elements;k.subVectors(g,r);0===k.lengthSq()&&(k.z=1);k.normalize();f.crossVectors(u,k);0===f.lengthSq()&&(1===Math.abs(u.z)?k.x+=1E-4:k.z+=1E-4,k.normalize(),f.crossVectors(u,k));f.normalize();h.crossVectors(k,f);w[0]=f.x;w[4]=h.x;w[8]=k.x;w[1]=f.y;w[5]=h.y;w[9]=k.y;w[2]=f.z;w[6]=h.z;w[10]=k.z;return this}multiply(g){return this.multiplyMatrices(this,g)}premultiply(g){return this.multiplyMatrices(g,this)}multiplyMatrices(g,r){var u=g.elements,w=r.elements;r=this.elements;
g=u[0];const x=u[4],B=u[8],E=u[12],C=u[1],H=u[5],I=u[9],K=u[13],O=u[2],Q=u[6],W=u[10],R=u[14],X=u[3],ca=u[7],ka=u[11];u=u[15];const la=w[0],Aa=w[4],ta=w[8],Ha=w[12],Oa=w[1],da=w[5],Wa=w[9],Pa=w[13],mb=w[2],Cb=w[6],yb=w[10],tb=w[14],Rb=w[3],ac=w[7],Hb=w[11];w=w[15];r[0]=g*la+x*Oa+B*mb+E*Rb;r[4]=g*Aa+x*da+B*Cb+E*ac;r[8]=g*ta+x*Wa+B*yb+E*Hb;r[12]=g*Ha+x*Pa+B*tb+E*w;r[1]=C*la+H*Oa+I*mb+K*Rb;r[5]=C*Aa+H*da+I*Cb+K*ac;r[9]=C*ta+H*Wa+I*yb+K*Hb;r[13]=C*Ha+H*Pa+I*tb+K*w;r[2]=O*la+Q*Oa+W*mb+R*Rb;r[6]=O*Aa+Q*
da+W*Cb+R*ac;r[10]=O*ta+Q*Wa+W*yb+R*Hb;r[14]=O*Ha+Q*Pa+W*tb+R*w;r[3]=X*la+ca*Oa+ka*mb+u*Rb;r[7]=X*Aa+ca*da+ka*Cb+u*ac;r[11]=X*ta+ca*Wa+ka*yb+u*Hb;r[15]=X*Ha+ca*Pa+ka*tb+u*w;return this}multiplyScalar(g){const r=this.elements;r[0]*=g;r[4]*=g;r[8]*=g;r[12]*=g;r[1]*=g;r[5]*=g;r[9]*=g;r[13]*=g;r[2]*=g;r[6]*=g;r[10]*=g;r[14]*=g;r[3]*=g;r[7]*=g;r[11]*=g;r[15]*=g;return this}determinant(){const g=this.elements,r=g[0],u=g[4],w=g[8],x=g[12],B=g[1],E=g[5],C=g[9],H=g[13],I=g[2],K=g[6],O=g[10],Q=g[14];return g[3]*
(+x*C*K-w*H*K-x*E*O+u*H*O+w*E*Q-u*C*Q)+g[7]*(+r*C*Q-r*H*O+x*B*O-w*B*Q+w*H*I-x*C*I)+g[11]*(+r*H*K-r*E*Q-x*B*K+u*B*Q+x*E*I-u*H*I)+g[15]*(-w*E*I-r*C*K+r*E*O+w*B*K-u*B*O+u*C*I)}transpose(){const g=this.elements;let r;r=g[1];g[1]=g[4];g[4]=r;r=g[2];g[2]=g[8];g[8]=r;r=g[6];g[6]=g[9];g[9]=r;r=g[3];g[3]=g[12];g[12]=r;r=g[7];g[7]=g[13];g[13]=r;r=g[11];g[11]=g[14];g[14]=r;return this}setPosition(g,r,u){const w=this.elements;g.isVector3?(w[12]=g.x,w[13]=g.y,w[14]=g.z):(w[12]=g,w[13]=r,w[14]=u);return this}invert(){const g=
this.elements,r=g[0],u=g[1],w=g[2],x=g[3],B=g[4],E=g[5],C=g[6],H=g[7],I=g[8],K=g[9],O=g[10],Q=g[11],W=g[12],R=g[13],X=g[14],ca=g[15],ka=K*X*H-R*O*H+R*C*Q-E*X*Q-K*C*ca+E*O*ca,la=W*O*H-I*X*H-W*C*Q+B*X*Q+I*C*ca-B*O*ca,Aa=I*R*H-W*K*H+W*E*Q-B*R*Q-I*E*ca+B*K*ca,ta=W*K*C-I*R*C-W*E*O+B*R*O+I*E*X-B*K*X;var Ha=r*ka+u*la+w*Aa+x*ta;if(0===Ha)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);Ha=1/Ha;g[0]=ka*Ha;g[1]=(R*O*x-K*X*x-R*w*Q+u*X*Q+K*w*ca-u*O*ca)*Ha;g[2]=(E*X*x-R*C*x+R*w*H-u*X*H-E*w*ca+u*C*ca)*Ha;g[3]=
(K*C*x-E*O*x-K*w*H+u*O*H+E*w*Q-u*C*Q)*Ha;g[4]=la*Ha;g[5]=(I*X*x-W*O*x+W*w*Q-r*X*Q-I*w*ca+r*O*ca)*Ha;g[6]=(W*C*x-B*X*x-W*w*H+r*X*H+B*w*ca-r*C*ca)*Ha;g[7]=(B*O*x-I*C*x+I*w*H-r*O*H-B*w*Q+r*C*Q)*Ha;g[8]=Aa*Ha;g[9]=(W*K*x-I*R*x-W*u*Q+r*R*Q+I*u*ca-r*K*ca)*Ha;g[10]=(B*R*x-W*E*x+W*u*H-r*R*H-B*u*ca+r*E*ca)*Ha;g[11]=(I*E*x-B*K*x-I*u*H+r*K*H+B*u*Q-r*E*Q)*Ha;g[12]=ta*Ha;g[13]=(I*R*w-W*K*w+W*u*O-r*R*O-I*u*X+r*K*X)*Ha;g[14]=(W*E*w-B*R*w-W*u*C+r*R*C+B*u*X-r*E*X)*Ha;g[15]=(B*K*w-I*E*w+I*u*C-r*K*C-B*u*O+r*E*O)*Ha;
return this}scale(g){const r=this.elements,u=g.x,w=g.y;g=g.z;r[0]*=u;r[4]*=w;r[8]*=g;r[1]*=u;r[5]*=w;r[9]*=g;r[2]*=u;r[6]*=w;r[10]*=g;r[3]*=u;r[7]*=w;r[11]*=g;return this}getMaxScaleOnAxis(){const g=this.elements;return Math.sqrt(Math.max(g[0]*g[0]+g[1]*g[1]+g[2]*g[2],g[4]*g[4]+g[5]*g[5]+g[6]*g[6],g[8]*g[8]+g[9]*g[9]+g[10]*g[10]))}makeTranslation(g,r,u){this.set(1,0,0,g,0,1,0,r,0,0,1,u,0,0,0,1);return this}makeRotationX(g){const r=Math.cos(g);g=Math.sin(g);this.set(1,0,0,0,0,r,-g,0,0,g,r,0,0,0,0,
1);return this}makeRotationY(g){const r=Math.cos(g);g=Math.sin(g);this.set(r,0,g,0,0,1,0,0,-g,0,r,0,0,0,0,1);return this}makeRotationZ(g){const r=Math.cos(g);g=Math.sin(g);this.set(r,-g,0,0,g,r,0,0,0,0,1,0,0,0,0,1);return this}makeRotationAxis(g,r){const u=Math.cos(r);r=Math.sin(r);const w=1-u,x=g.x,B=g.y;g=g.z;const E=w*x,C=w*B;this.set(E*x+u,E*B-r*g,E*g+r*B,0,E*B+r*g,C*B+u,C*g-r*x,0,E*g-r*B,C*g+r*x,w*g*g+u,0,0,0,0,1);return this}makeScale(g,r,u){this.set(g,0,0,0,0,r,0,0,0,0,u,0,0,0,0,1);return this}makeShear(g,
r,u,w,x,B){this.set(1,u,x,0,g,1,B,0,r,w,1,0,0,0,0,1);return this}compose(g,r,u){const w=this.elements;var x=r._x,B=r._y,E=r._z,C=r._w,H=x+x,I=B+B,K=E+E;r=x*H;const O=x*I;x*=K;const Q=B*I;B*=K;E*=K;H*=C;I*=C;C*=K;K=u.x;const W=u.y;u=u.z;w[0]=(1-(Q+E))*K;w[1]=(O+C)*K;w[2]=(x-I)*K;w[3]=0;w[4]=(O-C)*W;w[5]=(1-(r+E))*W;w[6]=(B+H)*W;w[7]=0;w[8]=(x+I)*u;w[9]=(B-H)*u;w[10]=(1-(r+Q))*u;w[11]=0;w[12]=g.x;w[13]=g.y;w[14]=g.z;w[15]=1;return this}decompose(g,r,u){var w=this.elements;let x=p.set(w[0],w[1],w[2]).length();
const B=p.set(w[4],w[5],w[6]).length(),E=p.set(w[8],w[9],w[10]).length();0>this.determinant()&&(x=-x);g.x=w[12];g.y=w[13];g.z=w[14];n.copy(this);g=1/x;w=1/B;const C=1/E;n.elements[0]*=g;n.elements[1]*=g;n.elements[2]*=g;n.elements[4]*=w;n.elements[5]*=w;n.elements[6]*=w;n.elements[8]*=C;n.elements[9]*=C;n.elements[10]*=C;r.setFromRotationMatrix(n);u.x=x;u.y=B;u.z=E;return this}makePerspective(g,r,u,w,x,B){const E=this.elements;E[0]=2*x/(r-g);E[4]=0;E[8]=(r+g)/(r-g);E[12]=0;E[1]=0;E[5]=2*x/(u-w);E[9]=
(u+w)/(u-w);E[13]=0;E[2]=0;E[6]=0;E[10]=-(B+x)/(B-x);E[14]=-2*B*x/(B-x);E[3]=0;E[7]=0;E[11]=-1;E[15]=0;return this}makeOrthographic(g,r,u,w,x,B){const E=this.elements,C=1/(r-g),H=1/(u-w),I=1/(B-x);E[0]=2*C;E[4]=0;E[8]=0;E[12]=-((r+g)*C);E[1]=0;E[5]=2*H;E[9]=0;E[13]=-((u+w)*H);E[2]=0;E[6]=0;E[10]=-2*I;E[14]=-((B+x)*I);E[3]=0;E[7]=0;E[11]=0;E[15]=1;return this}equals(g){const r=this.elements;g=g.elements;for(let u=0;16>u;u++)if(r[u]!==g[u])return!1;return!0}fromArray(g,r=0){for(let u=0;16>u;u++)this.elements[u]=
g[u+r];return this}toArray(g=[],r=0){const u=this.elements;g[r]=u[0];g[r+1]=u[1];g[r+2]=u[2];g[r+3]=u[3];g[r+4]=u[4];g[r+5]=u[5];g[r+6]=u[6];g[r+7]=u[7];g[r+8]=u[8];g[r+9]=u[9];g[r+10]=u[10];g[r+11]=u[11];g[r+12]=u[12];g[r+13]=u[13];g[r+14]=u[14];g[r+15]=u[15];return g}}m.Matrix4=t;const p=new z.Vector3,n=new t,c=new z.Vector3(0,0,0),e=new z.Vector3(1,1,1),f=new z.Vector3,h=new z.Vector3,k=new z.Vector3};
shadow$provide[511]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.decl=void 0;z=v(504);J=v(507);var t=v(508),p=v(509);v=v(510);const n={};m.decl=n;n.in=0;n.out=1;n.inout=2;n.node=function(h){if("function"===(null!=h.children[5]?h.children[5].type:void 0))return n.function(h);if("keyword"===(null!=h.token?h.token.type:void 0))return n.external(h)};n.external=function(h){h=h.children;let k=h[1].token.data;const g=h[4].token.data,r=h[5];["attribute","uniform","varying"].includes(k)||
(k="global");const u=[];for(let x=0;x<r.children.length;x++)if(h=r.children[x],"ident"===h.type){var w=r.children[x+1];w="quantifier"===(null!=w?w.type:void 0);u.push({decl:"external",storage:k,type:g,ident:h.token.data,quant:!!w,count:w})}return u};n.function=function(h){var k=h.children;h=k[1].token.data;const g=k[4].token.data;var r=k[5];k=r.children[0].token.data;const u=r.children[2];r=Array.from(r.children[1].children).map(w=>n.argument(w));return[{decl:"function",storage:h,type:g,ident:k,body:!!u,
args:r}]};n.argument=function(h){h=h.children;const k=h[5],g=k.children[1];return{decl:"argument",storage:h[1].token.data,inout:h[2].token.data,type:h[4].token.data,ident:k.children[0].token.data,quant:!!g,count:g?g.children[0].token.data:void 0}};n.param=function(h,k,g,r,u){let w=[];null!=k&&w.push(k);null!=g&&w.push(g);w.push("");w=w.join(" ");const x=r?"["+u+"]":"";""!==h&&(h+=" ");const B=(E,C)=>(C?h:"")+`${w}${E}${x}`;B.split=E=>n.param(E,k,g,r,u);return B};m="undefined"!==typeof window&&!!window.THREE;
const c={int:0,float:0,vec2:m?z.Vector2:null,vec3:m?J.Vector3:null,vec4:m?t.Vector4:null,mat2:null,mat3:m?p.Matrix3:null,mat4:m?v.Matrix4:null,sampler2D:0,samplerCube:0},e={int:"i",float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat2:"m2",mat3:"m3",mat4:"m4",sampler2D:"t",samplerCube:"t"};n.type=function(h,k,g,r,u,w){var x={in:n.in,out:n.out,inout:n.inout};let B=e[k];g&&(B+="v");let E=c[k];null!=E&&E.call&&(E=new E);g&&(E=[E]);x=null!=x[u]?x[u]:x.in;w={const:"const"}[w];g=n.param(u,w,k,g,r);return new f(h,
B,k,g,E,x)};class f{constructor(h,k,g,r,u,w,x){this.name=h;this.type=k;this.spec=g;this.param=r;this.value=u;this.inout=w;this.meta=x}split(){var h=null!=this.meta.shadowed;const k=h?n.in:n.out;h=this.param.split(h?"in":"out");return new f(this.name,this.type,this.spec,h,this.value,k)}copy(h,k){return new f(null!=h?h:this.name,this.type,this.spec,this.param,this.value,this.inout,k)}}};
shadow$provide[512]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.SHADOW_ARG="_i_o";m.RETURN_ARG="return"};
shadow$provide[513]=function(z,v,J,m){function t(B){return B&&B.__esModule?B:{default:B}}Object.defineProperty(m,"__esModule",{value:!0});m.walk=m.parse=void 0;var p=t(v(499)),n=t(v(503)),c=v(511),e=v(512);let f=!1;m.parse=function(B,E){B=h(B,E);let C;f&&(C=x());var H=[];w(k,g(H),B,"");const [I,K,O]=Array.from(r(H));H=u(I,K,O);f&&C("GLSL AST");return{ast:B,code:E,signatures:H}};const h=function(B,E){let C;var H;let I=[];f&&(H=x());try{const K=(0,p.default)(E);C=(0,n.default)(K)}catch(K){I=[{message:K}]}f&&
H("GLSL Tokenize \x26 Parse");H=function(K){K=K.split("\n");const O=(""+K.length).length;return K.map((Q,W)=>{var R=W+1;W=(R=""+R).length<O?("       "+R).slice(-O):R;return`${W}: ${Q}`}).join("\n")};if(!C||I.length){B||(B="(inline code)");console.warn(H(E));for(const K of I)console.error(`${B} -`,K.message);throw Error("GLSL parse error");}return C},k=function(B,E){switch(B.type){case "decl":return E(c.decl.node(B)),!1}return!0},g=B=>function(E){null!=E&&Array.from(E).map(C=>B.push(C))},r=function(B){let E=
null;const C=[];let H=[];const I={};let K=!1;for(const O of Array.from(B))O.body?(I[O.ident]&&(H=Array.from(H).filter(Q=>Q.ident!==O.ident),delete I[O.ident]),C.push(O),"main"===O.ident?(E=O,K=!0):K||(E=O)):"global"===O.storage?C.push(O):(H.push(O),I[O.ident]=!0);return[E,C,H]},u=function(B,E,C){let H;const I={uniform:[],attribute:[],varying:[],external:[],internal:[],global:[],main:null},K=function(O,Q){let W;const R=Array.from(O.args).map(ka=>c.decl.type(ka.ident,ka.type,ka.quant,ka.count,ka.inout,
ka.storage));for(W of Array.from(R))if(W.inout===c.decl.inout){var X=W,ca=W.copy();X.inout=c.decl.in;ca.inout=c.decl.out;ca.meta={shadow:X.name};ca.name+=e.SHADOW_ARG;X.meta={shadowed:ca.name};R.push(ca)}"void"!==O.type&&R.unshift(c.decl.type(e.RETURN_ARG,O.type,!1,"","out"));X=(()=>{const ka=[];for(W of Array.from(R))W.inout===c.decl.in&&ka.push(W.type);return ka})().join(",");ca=(()=>{const ka=[];for(W of Array.from(R))W.inout===c.decl.out&&ka.push(W.type);return ka})().join(",");return{name:O.ident,
type:`(${X})(${ca})`,signature:R,inout:Q,spec:O.type}};I.main=K(B,c.decl.out);for(H of Array.from(E))I.internal.push({name:H.ident});for(H of Array.from(C))switch(H.decl){case "external":B=c.decl.type(H.ident,H.type,H.quant,H.count,H.inout,H.storage);I[H.storage].push(B);break;case "function":B=K(H,c.decl.in),I.external.push(B)}return I};f=!1;const w=function(B,E,C,H){f&&console.log(H,C.type,null!=C.token?C.token.data:void 0,null!=C.token?C.token.type:void 0);if(B(C,E))for(let I=0;I<C.children.length;I++)w(B,
E,C.children[I],H+"  ",f);return null};m.walk=w;const x=function(){const B=+new Date;return function(E){const C=+new Date-B;console.log(E,C+" ms");return C}}};
shadow$provide[514]=function(z,v,J,m){function t(C){if("function"!==typeof WeakMap)return null;var H=new WeakMap,I=new WeakMap;return(t=function(K){return K?I:H})(C)}function p(C,H){if(!H&&C&&C.__esModule)return C;if(null===C||"object"!==typeof C&&"function"!==typeof C)return{default:C};if((H=t(H))&&H.has(C))return H.get(C);var I={},K=Object.defineProperty&&Object.getOwnPropertyDescriptor,O;for(O in C)if("default"!==O&&Object.prototype.hasOwnProperty.call(C,O)){var Q=K?Object.getOwnPropertyDescriptor(C,
O):null;Q&&(Q.get||Q.set)?Object.defineProperty(I,O,Q):I[O]=C[O]}I.default=C;H&&H.set(C,I);return I}function n(C){return C.join("\n")}function c(C){return C.join(", ")}function e(C){return C.join(";\n")}function f(C){return{entry:C,type:"void",params:[],signature:[],return:"",vars:{},calls:[],post:[],chain:{}}}function h(C,H){return`#define ${C} ${H}`}function k(C,H,I,K,O){return`${C} ${H}(${I}) {\n${K}${O}}`}function g(C,H,I){C=C?`${C} = `:"";I=c(I);return`  ${C}${H}(${I})`}function r(C,H){for(let I=
0;I<C.length;I++){const K=C[I],O=H[I];if(!O||K.type!==O.type||K.name===B.RETURN_ARG!==(O.name===B.RETURN_ARG))return!1}return!0}function u(C,H,I,K,O){const Q=[];let W="";for(let X of Array.from(K)){var R=void 0;const {name:ca}=X;let ka=K=C(ca),la=null,Aa=null,ta=!1;const Ha=ca===B.RETURN_ARG;if(R=null!=X.meta?X.meta.shadowed:void 0)if(la=C(R))O.vars[la]="  "+X.param(la),O.calls.push(`  ${la} = ${K}`),H(R)?Aa={shadowed:la}:X=X.split();if(R=null!=X.meta?X.meta.shadow:void 0)if(la=C(R))if(H(R))continue;
else X=X.split(),ta=!0;Ha?W=K:ta||Q.push(null!=la?la:K);H(ca)?(R="push",Ha?""===O.return?(R="unshift",ka=ca,O.type=X.spec,O.return=`  return ${K}`,O.vars[K]="  "+X.param(K)):(O.vars[K]="  "+X.param(K),O.params.push(X.param(K,!0))):O.params.push(X.param(K,!0)),X=X.copy(ka,Aa),O.signature[R](X)):O.vars[K]="  "+X.param(K)}return O.calls.push(g(W,I,Q))}function w(C,H){const {entry:I}=C;var K=null;H&&1===H.length&&"main"!==I&&(H=H[0].module,r(C.signature,H.main.signature)&&(K=h(I,H.entry)));if(null==K){H=
[];for(var O in C.vars)H.push(C.vars[O]);O=H;({calls:H}=C);({post:K}=C);let {params:Q}=C;const {type:W}=C,R=C.return;H=H.concat(K);""!==R&&H.push(R);H.push("");O.length?(O.push(""),O=e(O)+"\n"):O="";H=e(H);Q=c(Q);K=k(W,I,Q,O,H)}return{signature:C.signature,code:K,name:I}}Object.defineProperty(m,"__esModule",{value:!0});m.unshadow=function(C){const H=C.replace(B.SHADOW_ARG,"");return H!==C?H:null};m.lines=n;m.list=c;m.statements=e;m.body=f;m.define=h;m.fn=k;m.invoke=g;m.same=r;m.call=u;m.build=w;m.links=
function(C){const H={defs:[],bodies:[]};for(const I of Array.from(C))E(I,H);H.defs=n(H.defs);H.bodies=e(H.bodies);""===H.defs&&delete H.defs;""===H.bodies&&delete H.bodies;return H};m.defuse=function(C){const H=/([A-Za-z0-9_]+\s+)?[A-Za-z0-9_]+\s+[A-Za-z0-9_]+\s*\([^)]*\)\s*;\s*/gm,I=W=>W.replace(H,R=>"");C=C.split(/(?=[{}])/g);let K=0;for(let W=0;W<C.length;W++){var O=C[W];switch(O[0]){case "{":K++;break;case "}":K--}if(0===K){O=O.split(/^[ \t]*#/m);for(let R=0;R<O.length;R++){var Q=O[R];if(0<R){Q=
Q.split(/\n/);const X=Q.shift();Q=Q.join("\n");O[R]=[X,I(Q)].join("\n")}else O[R]=I(Q)}C[W]=O.join("#")}}return C=C.join("")};m.dedupe=function(C){const H={};return C.replace(/((attribute|uniform|varying)\s+)[A-Za-z0-9_]+\s+([A-Za-z0-9_]+)\s*(\[[^\]]*\]\s*)?;\s*/gm,function(I,K,O,Q,W){if(H[Q])return"";H[Q]=!0;return I})};m.hoist=function(C){const H=function(I,K){const O=[],Q=[];for(const W of Array.from(I))(W.match(K)?O:Q).push(W);return O.concat(Q)};C=C.split("\n");C=H(C,/^#define ([^ ]+ _pg_[0-9]+_|_pg_[0-9]+_ [^ ]+)$/);
C=H(C,/^#extension/);return C.join("\n")};m.link=void 0;var x=p(v(468)),B=p(v(512));const E=(C,H)=>{const {module:I,name:K,external:O}=C;var {main:Q}=I;({entry:C}=I);if(r(Q.signature,O.signature))return H.defs.push(h(K,C));var W=[],R=[];let X={};const ca=[I.namespace,B.RETURN_ARG].join("");for(la of Array.from(O.signature)){var ka=la.inout===x.IN?W:R;ka.push(la)}for(la of Array.from(Q.signature))ka=la.inout===x.IN?W:R,ka=ka.shift().name,ka===B.RETURN_ARG&&(ka=ca),X[la.name]=ka;var la=Aa=>X[Aa];W=
()=>!0;R=f();u(la,W,C,Q.signature,R);R.entry=C;X={return:ca};la=Aa=>null!=X[Aa]?X[Aa]:Aa;Q=f();u(la,W,C,O.signature,Q);Q.calls=R.calls;Q.entry=K;H.bodies.push(w(R).code.split(" {")[0]);return H.bodies.push(w(Q).code)};m.link=E};
shadow$provide[515]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});var t=v(492);Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in m&&m[e]===t[e]||Object.defineProperty(m,e,{enumerable:!0,get:function(){return t[e]}}))});var p=v(513);Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in m&&m[e]===p[e]||Object.defineProperty(m,e,{enumerable:!0,get:function(){return p[e]}}))});var n=v(514);Object.keys(n).forEach(function(e){"default"!==
e&&"__esModule"!==e&&(e in m&&m[e]===n[e]||Object.defineProperty(m,e,{enumerable:!0,get:function(){return n[e]}}))});var c=v(512);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in m&&m[e]===c[e]||Object.defineProperty(m,e,{enumerable:!0,get:function(){return c[e]}}))})};
shadow$provide[516]=function(z,v,J,m){function t(x){if("function"!==typeof WeakMap)return null;var B=new WeakMap,E=new WeakMap;return(t=function(C){return C?E:B})(x)}function p(x,B){if(!B&&x&&x.__esModule)return x;if(null===x||"object"!==typeof x&&"function"!==typeof x)return{default:x};if((B=t(B))&&B.has(x))return B.get(x);var E={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor,H;for(H in x)if("default"!==H&&Object.prototype.hasOwnProperty.call(x,H)){var I=C?Object.getOwnPropertyDescriptor(x,
H):null;I&&(I.get||I.set)?Object.defineProperty(E,H,I):E[H]=x[H]}E.default=x;B&&B.set(x,E);return E}Object.defineProperty(m,"__esModule",{value:!0});m.load=function(x,B={}){return new w(x,B)};m.ShaderGraph=m.inspect=m.visualize=void 0;z=v(481);var n=p(v(491)),c=p(v(515));J=p(v(468));var e=p(v(475));v=p(v(485));const {library:f,cache:h}=n,{visualize:k,inspect:g}=v;m.inspect=g;m.visualize=k;const {Snippet:r}=e,u=function(x,B={}){const E={};for(let C in x)E[C]=B[C]||x[C];return E};class w{constructor(x,
B){this.config=u({globalUniforms:!1,globalVaryings:!0,globalAttributes:!0,globals:[],autoInspect:!1},B);this.fetch=h(f(c,x,r.load))}shader(x){null==x&&(x={});x=u(this.config,x);return new n.Factory(c,this.fetch,x)}material(x){return new n.Material(this.shader(x),this.shader(x))}inspect(x){return w.inspect(x)}visualize(x){return w.visualize(x)}static inspect(x){return g(x)}static visualize(x){return k(x)}}m.ShaderGraph=w;w.Block=z.Block;w.Factory=n;w.GLSL=c;w.Graph=J;w.Linker=e;w.Visualize=v};
shadow$provide[517]=function(z,v,J,m){function t(n){if("function"!==typeof WeakMap)return null;var c=new WeakMap,e=new WeakMap;return(t=function(f){return f?e:c})(n)}Object.defineProperty(m,"__esModule",{value:!0});m.Factory=void 0;var p=function(n,c){if(!c&&n&&n.__esModule)return n;if(null===n||"object"!==typeof n&&"function"!==typeof n)return{default:n};if((c=t(c))&&c.has(n))return c.get(n);var e={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor,h;for(h in n)if("default"!==h&&Object.prototype.hasOwnProperty.call(n,
h)){var k=f?Object.getOwnPropertyDescriptor(n,h):null;k&&(k.get||k.set)?Object.defineProperty(e,h,k):e[h]=n[h]}e.default=n;c&&c.set(n,e);return e}(v(516));m.Factory=function(n){return p.load(function(c){var e=n[c];if(null!=e)return e;e=["#",".",":","["].includes(c[0]);e=document.querySelector(e?c:`#${c}`);if(null!=e&&"SCRIPT"===e.tagName)return e.textContent||e.innerText;throw Error(`Unknown shader \`${c}\``);},{autoInspect:!0})}};
shadow$provide[518]=function(z,v,J,m){function t(Ac){return Ac&&Ac.__esModule?Ac:{default:Ac}}Object.defineProperty(m,"__esModule",{value:!0});var p={Snippets:!0};m.Snippets=void 0;var n=t(v(353)),c=t(v(354)),e=t(v(355)),f=t(v(356)),h=t(v(357)),k=t(v(358)),g=t(v(359)),r=t(v(360)),u=t(v(361)),w=t(v(362)),x=t(v(363)),B=t(v(364)),E=t(v(365)),C=t(v(366)),H=t(v(367)),I=t(v(368)),K=t(v(369)),O=t(v(370)),Q=t(v(371)),W=t(v(372)),R=t(v(373)),X=t(v(374)),ca=t(v(375)),ka=t(v(376)),la=t(v(377)),Aa=t(v(378)),
ta=t(v(379)),Ha=t(v(380)),Oa=t(v(381)),da=t(v(382)),Wa=t(v(383)),Pa=t(v(384)),mb=t(v(385)),Cb=t(v(386)),yb=t(v(387)),tb=t(v(388)),Rb=t(v(389)),ac=t(v(390)),Hb=t(v(391)),Jb=t(v(392)),Tb=t(v(393)),dc=t(v(394)),zb=t(v(395)),ib=t(v(396)),Db=t(v(397)),ec=t(v(398)),pa=t(v(399)),Xa=t(v(400)),sb=t(v(401)),Eb=t(v(402)),Sb=t(v(403)),va=t(v(404)),jb=t(v(405)),Wb=t(v(406)),oc=t(v(407)),Hc=t(v(408)),Nc=t(v(409)),gd=t(v(410)),yc=t(v(411)),zc=t(v(412)),hd=t(v(413)),Id=t(v(414)),Jd=t(v(415)),pd=t(v(416)),Xb=t(v(417)),
id=t(v(418)),Kd=t(v(419)),Ld=t(v(420)),qd=t(v(421)),rd=t(v(422)),sd=t(v(423)),Md=t(v(424)),jd=t(v(425)),Nd=t(v(426)),Ca=t(v(427)),td=t(v(428)),Mb=t(v(429)),Zc=t(v(430)),Oc=t(v(431)),$c=t(v(432)),Qa=t(v(433)),jc=t(v(434)),Ta=t(v(435)),wb=t(v(436)),kc=t(v(437)),pc=t(v(438)),Be=t(v(439)),mf=t(v(440)),ad=t(v(441)),nf=t(v(442)),kd=t(v(443)),be=t(v(444)),ce=t(v(445)),de=t(v(446)),Ce=t(v(447)),fb=t(v(448)),of=t(v(449)),pf=t(v(450)),qf=t(v(451)),rf=t(v(452)),sf=t(v(453)),tf=t(v(454)),uf=t(v(455)),vf=t(v(456)),
wf=t(v(457)),De=t(v(458)),Ee=t(v(459)),xf=t(v(460)),yf=t(v(461)),zf=t(v(462)),Af=t(v(463)),Bf=t(v(464)),Od=v(517);Object.keys(Od).forEach(function(Ac){"default"!==Ac&&"__esModule"!==Ac&&(Object.prototype.hasOwnProperty.call(p,Ac)||Ac in m&&m[Ac]===Od[Ac]||Object.defineProperty(m,Ac,{enumerable:!0,get:function(){return Od[Ac]}}))});m.Snippets={"arrow.position":n.default,"axis.position":c.default,"cartesian.position":f.default,"cartesian4.position":e.default,"clamp.position":h.default,"color.opaque":k.default,
"face.position":g.default,"face.position.normal":r.default,"float.encode":u.default,"float.index.pack":w.default,"float.stretch":x.default,"fragment.clip.dashed":B.default,"fragment.clip.dotted":E.default,"fragment.clip.ends":C.default,"fragment.clip.proximity":H.default,"fragment.color":I.default,"fragment.map.rgba":K.default,"fragment.solid":O.default,"fragment.transparent":Q.default,"grid.position":W.default,"grow.position":R.default,"join.position":X.default,"label.alpha":ca.default,"label.map":ka.default,
"label.outline":la.default,"layer.position":Aa.default,"lerp.depth":ta.default,"lerp.height":Ha.default,"lerp.items":Oa.default,"lerp.width":da.default,"line.position":Wa.default,"map.2d.data":Pa.default,"map.2d.data.wrap":mb.default,"map.xyzw.2dv":Cb.default,"map.xyzw.align":yb.default,"map.xyzw.texture":tb.default,"mesh.fragment.color":Rb.default,"mesh.fragment.map":ac.default,"mesh.fragment.mask":Hb.default,"mesh.fragment.material":Jb.default,"mesh.fragment.shaded":Tb.default,"mesh.fragment.texture":dc.default,
"mesh.gamma.in":zb.default,"mesh.gamma.out":ib.default,"mesh.map.uvwo":Db.default,"mesh.position":ec.default,"mesh.vertex.color":pa.default,"mesh.vertex.mask":Xa.default,"mesh.vertex.position":sb.default,"move.position":Eb.default,"object.mask.default":Sb.default,"point.alpha.circle":va.default,"point.alpha.circle.hollow":jb.default,"point.alpha.generic":Wb.default,"point.alpha.generic.hollow":oc.default,"point.edge":Hc.default,"point.fill":Nc.default,"point.mask.circle":gd.default,"point.mask.diamond":yc.default,
"point.mask.down":zc.default,"point.mask.left":hd.default,"point.mask.right":Id.default,"point.mask.square":Jd.default,"point.mask.up":pd.default,"point.position":Xb.default,"point.size.uniform":id.default,"point.size.varying":Kd.default,"polar.position":Ld.default,"project.position":qd.default,"project.readback":rd.default,"raw.position.scale":sd.default,"repeat.position":Md.default,"resample.padding":jd.default,"resample.relative":Nd.default,"reveal.mask":Ca.default,"reverse.position":td.default,
"root.position":Mb.default,"sample.2d":Zc.default,"scale.position":Oc.default,"screen.map.stpq":$c.default,"screen.map.xy":Qa.default,"screen.map.xyzw":jc.default,"screen.pass.uv":Ta.default,"screen.position":wb.default,"slice.position":kc.default,"spherical.position":pc.default,"split.position":Be.default,"spread.position":mf.default,"sprite.fragment":ad.default,"sprite.position":nf.default,"stereographic.position":be.default,"stereographic4.position":kd.default,"stpq.sample.2d":ce.default,"stpq.xyzw.2d":de.default,
"strip.position.normal":Ce.default,"style.color":fb.default,"subdivide.depth":of.default,"subdivide.depth.lerp":pf.default,"subdivide.height":qf.default,"subdivide.height.lerp":rf.default,"subdivide.items":sf.default,"subdivide.items.lerp":tf.default,"subdivide.width":uf.default,"subdivide.width.lerp":vf.default,"surface.mask.hollow":wf.default,"surface.position":De.default,"surface.position.normal":Ee.default,"surface.position.shaded":xf.default,"ticks.position":yf.default,"transform3.position":zf.default,
"transform4.position":Af.default,"view.position":Bf.default}};
shadow$provide[519]=function(z,v,J,m){function t(e){if("function"!==typeof WeakMap)return null;var f=new WeakMap,h=new WeakMap;return(t=function(k){return k?h:f})(e)}Object.defineProperty(m,"__esModule",{value:!0});m.Animator=void 0;var p=function(e,f){if(!f&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};if((f=t(f))&&f.has(e))return f.get(e);var h={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor,g;for(g in e)if("default"!==g&&Object.prototype.hasOwnProperty.call(e,
g)){var r=k?Object.getOwnPropertyDescriptor(e,g):null;r&&(r.get||r.set)?Object.defineProperty(h,g,r):h[g]=e[g]}h.default=e;f&&f.set(e,h);return h}(v(284));class n{constructor(e){this.context=e;this.anims=[]}make(e,f){e=new c(this,this.context.time,e,f);this.anims.push(e);return e}unmake(e){return this.anims=Array.from(this.anims).filter(f=>f!==e)}update(){const {time:e}=this.context;return this.anims=(()=>{const f=[];for(const h of Array.from(this.anims))!1!==h.update(e)&&f.push(h);return f})()}lerp(e,
f,h,k,g){null==g&&(g=e.make());if(e.lerp)g=e.lerp(f,h,g,k);else{if(e.emitter){g=f.emitterFrom;const r=h.emitterTo;if(null!=g&&null!=r&&g===r)return g.lerp(k),g;e=e.emitter(f,h);f.emitterFrom=e;h.emitterTo=e;e.lerp(k);return e}g=e.op?e.op(f,h,g,function(r,u){return r===+r&&u===+u?r+(u-r)*k:.5<k?u:r}):.5<k?h:f}return g}}m.Animator=n;class c{constructor(e,f,h,k){this.animator=e;this.time=f;this.type=h;this.options=k;this.value=this.type.make();this.target=this.type.make();this.queue=[]}dispose(){return this.animator.unmake(this)}set(){let {target:e}=
this,f=1<arguments.length?[].slice.call(arguments):arguments[0],h=!1;f=this.type.validate(f,e,()=>h=!0);h||(e=f);this.cancel();this.target=this.value;this.value=e;return this.notify()}getTime(){var {clock:e}=this.options;e=e?e.getTime():this.time;return this.options.realtime?e.time:e.clock}cancel(e){let f;null==e&&(e=this.getTime());const {queue:h}=this,k=(()=>{const g=[];for(f of Array.from(h))f.end>=e&&g.push(f);return g})();this.queue=(()=>{const g=[];for(f of Array.from(h))f.end<e&&g.push(f);
return g})();for(f of Array.from(k))"function"===typeof f.complete&&f.complete(!1);"function"===typeof this.options.complete&&this.options.complete(!1)}notify(){return"function"===typeof this.options.step?this.options.step(this.value):void 0}immediate(e,f){const {duration:h,delay:k,ease:g,step:r,complete:u}=f;f=this.getTime()+k;const w=f+h;let x=!1,B=this.type.make();e=this.type.validate(e,B,function(){x=!0;return null});void 0===e||x||(B=e);this.cancel(f);return this.queue.push({from:null,to:B,start:f,
end:w,ease:g,step:r,complete:u})}update(e){this.time=e;if(0===this.queue.length)return!0;e=this.getTime();let {value:f}=this;const {queue:h}=this;for(var k=!1;!k;){var g=h[0];let {from:r}=g;const {to:u,start:w,end:x,step:B,complete:E,ease:C}=g;null==r&&(r=g.from=this.type.clone(this.value));g=p.clamp((e-w)/Math.max(1E-5,x-w)||0,0,1);if(0===g)return;k=(()=>{switch(C){case "linear":case 0:return null;case "cosine":case 1:return p.cosine;case "binary":case 2:return p.binary;case "hold":case 3:return p.hold;
default:return p.cosine}})();null!=k&&(g=k(g));f=(k=1>g)?this.animator.lerp(this.type,r,u,g,f):u;"function"===typeof B&&B(f);if(!k&&("function"===typeof E&&E(!0),"function"===typeof this.options.complete&&this.options.complete(!0),h.shift(),0===h.length))break}this.value=f;return this.notify()}}};
shadow$provide[520]=function(z,v,J,m){function t(h){if("function"!==typeof WeakMap)return null;var k=new WeakMap,g=new WeakMap;return(t=function(r){return r?g:k})(h)}function p(h,k){if(!k&&h&&h.__esModule)return h;if(null===h||"object"!==typeof h&&"function"!==typeof h)return{default:h};if((k=t(k))&&k.has(h))return k.get(h);var g={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor,u;for(u in h)if("default"!==u&&Object.prototype.hasOwnProperty.call(h,u)){var w=r?Object.getOwnPropertyDescriptor(h,
u):null;w&&(w.get||w.set)?Object.defineProperty(g,u,w):g[u]=h[u]}g.default=h;k&&k.set(h,g);return g}function n(h,k,g){const r=[],u=h<k;for(k=g?u?k+1:k-1:k;u?h<k:h>k;u?h++:h--)r.push(h);return r}Object.defineProperty(m,"__esModule",{value:!0});m.API=void 0;var c=p(v(35)),e=p(v(516));class f{v2(){return this}constructor(h,k,g){this._context=h;this._up=k;this._targets=g;h=this._context.controller.getRoot();null==this._targets&&(this._targets=[h]);this.isRoot=1===this._targets.length&&this._targets[0]===
h;this.isLeaf=1===this._targets.length&&null==this._targets[0].children;for(h=0;h<this._targets.length;h++)this[h]=this._targets[h];this.length=this._targets.length;for(const r of Array.from(this._context.controller.getTypes()))["root"].includes(r)||(this[r]=(u,w)=>this.add(r,u,w))}select(h){h=this._context.model.select(h,this.isRoot?null:this._targets);return this._push(h)}eq(h){return this._targets.length>h?this._push([this._targets[h]]):this._push([])}filter(h){if("string"===typeof h){const k=
this._context.model._matcher(h);h=g=>k(g)}return this._push(this._targets.filter(h))}map(h){return n(0,this.length,!1).map(k=>h(this[k],k,this))}each(h){for(let k=0,g=this.length,r=0<=g;r?k<g:k>g;r?k++:k--)h(this[k],k,this);return this}add(h,k,g){const {controller:r}=this._context;if(this.isLeaf)return this._pop().add(h,k,g);const u=[];for(const w of this._targets){const x=r.make(h,k,g);r.add(x,w);u.push(x)}return this._push(u)}remove(h){if(h)return this.select(h).remove();for(const k of Array.from(this._targets.slice().reverse()))this._context.controller.remove(k);
return this._pop()}set(h,k){for(const g of Array.from(this._targets))this._context.controller.set(g,h,k);return this}getAll(h){return Array.from(this._targets).map(k=>this._context.controller.get(k,h))}get(h){return null!=this._targets[0]?this._targets[0].get(h):void 0}evaluate(h,k){return null!=this._targets[0]?this._targets[0].evaluate(h,k):void 0}bind(h,k){for(const g of Array.from(this._targets))this._context.controller.bind(g,h,k);return this}unbind(h){for(const k of Array.from(this._targets))this._context.controller.unbind(k,
h);return this}end(){return(this.isLeaf?this._pop():this)._pop()}_push(h){return new f(this._context,this,h)}_pop(){return null!=this._up?this._up:this}_reset(){let h;return null!=(h=null!=this._up?this._up.reset():void 0)?h:this}map(h){return this._targets.map(h)}on(){const h=arguments;this._targets.map(k=>k.on.apply(k,h));return this}off(){const h=arguments;this._targets.map(k=>k.off.apply(k,h));return this}toString(){const h=this._targets.map(k=>k.toString());return 1<this._targets.length?`[${h.join(", ")}]`:
h[0]}toMarkup(){return this._targets.map(h=>h.toMarkup()).join("\n\n")}print(){c.print(this._targets.map(h=>h.toMarkup()).join("\n\n"));return this}debug(){var h=this.inspect();console.log("Renderables: ",h.renderables);console.log("Renders: ",h.renders);console.log("Shaders: ",h.shaders);const k=[];for(const g of Array.from(h.shaders))h=g.owner.constructor.name,k.push(`${h} - Vertex`),k.push(g.vertex),k.push(`${h} - Fragment`),k.push(g.fragment);return e.inspect(k)}inspect(h,k,g){let r;"boolean"===
typeof k&&(g=k,k=null);null==g&&(g=!0);const u=r=function(B,E){null==E&&(E=[]);k&&!B.traits.hash[k]||E.push(null!=(null!=B.controller?B.controller.objects:void 0)?null!=B.controller?B.controller.objects:void 0:[]);if(null!=B.children)for(const C of Array.from(B.children))r(C,E);return E},w=function(B){B=B.reduce((E,C)=>E.concat(C),[]);return B=B.filter((E,C)=>null!=E&&B.indexOf(E)===C)},x={nodes:this._targets.slice(),renderables:[],renders:[],shaders:[]};for(const B of Array.from(this._targets)){let E;
g&&B.print(h,"info");const C={renderables:E=w(u(B)),renders:w(E.map(H=>H.renders)),shaders:w(E.map(H=>null!=H.renders?H.renders.map(I=>{const K={};K.owner=H;K.geometry=I.geometry;K.material=I.material;K.vertex=I.userData.vertexGraph;K.fragment=I.userData.fragmentGraph;return K}):void 0))};for(const H in C)x[H]=x[H].concat(C[H])}return x}}m.API=f};
shadow$provide[521]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.Controller=void 0;class t{constructor(p,n){this.model=p;this.primitives=n}getRoot(){return this.model.getRoot()}getTypes(){return this.primitives.getTypes()}make(p,n,c){return this.primitives.make(p,n,c)}get(p,n){return p.get(n)}set(p,n,c){try{return p.set(n,c)}catch(e){return p.print(null,"warn"),console.error(e)}}bind(p,n,c){try{return p.bind(n,c)}catch(e){return p.print(null,"warn"),console.error(e)}}unbind(p,
n){try{return p.unbind(n)}catch(c){return p.print(null,"warn"),console.error(c)}}add(p,n){null==n&&(n=this.model.getRoot());return n.add(p)}remove(p){const n=p.parent;if(n)return n.remove(p)}}m.Controller=t};
shadow$provide[522]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});var t=v(519);Object.keys(t).forEach(function(c){"default"!==c&&"__esModule"!==c&&(c in m&&m[c]===t[c]||Object.defineProperty(m,c,{enumerable:!0,get:function(){return t[c]}}))});var p=v(520);Object.keys(p).forEach(function(c){"default"!==c&&"__esModule"!==c&&(c in m&&m[c]===p[c]||Object.defineProperty(m,c,{enumerable:!0,get:function(){return p[c]}}))});var n=v(521);Object.keys(n).forEach(function(c){"default"!==
c&&"__esModule"!==c&&(c in m&&m[c]===n[c]||Object.defineProperty(m,c,{enumerable:!0,get:function(){return n[c]}}))})};
shadow$provide[523]=function(z,v,J,m){function t(g){if("function"!==typeof WeakMap)return null;var r=new WeakMap,u=new WeakMap;return(t=function(w){return w?u:r})(g)}function p(g,r){if(!r&&g&&g.__esModule)return g;if(null===g||"object"!==typeof g&&"function"!==typeof g)return{default:g};if((r=t(r))&&r.has(g))return r.get(g);var u={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor,x;for(x in g)if("default"!==x&&Object.prototype.hasOwnProperty.call(g,x)){var B=w?Object.getOwnPropertyDescriptor(g,
x):null;B&&(B.get||B.set)?Object.defineProperty(u,x,B):u[x]=g[x]}u.default=g;r&&r.set(g,u);return u}Object.defineProperty(m,"__esModule",{value:!0});m.VDOM=m.Ticks=m.Three=m.Pretty=m.JS=m.GLSL=m.Ease=m.Data=m.Axis=void 0;z=p(v(232));J=p(v(99));var n=p(v(284)),c=p(v(100)),e=p(v(235)),f=p(v(35)),h=p(v(96)),k=p(v(309));v=p(v(84));m.Axis=z;m.Data=J;m.Ease=n;m.GLSL=c;m.JS=e;m.Pretty=f;m.Three=h;m.Ticks=k;m.VDOM=v};
shadow$provide[524]=function(z,v,J,m){function t(w){if("function"!==typeof WeakMap)return null;var x=new WeakMap,B=new WeakMap;return(t=function(E){return E?B:x})(w)}function p(w,x){if(!x&&w&&w.__esModule)return w;if(null===w||"object"!==typeof w&&"function"!==typeof w)return{default:w};if((x=t(x))&&x.has(w))return x.get(w);var B={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor,C;for(C in w)if("default"!==C&&Object.prototype.hasOwnProperty.call(w,C)){var H=E?Object.getOwnPropertyDescriptor(w,
C):null;H&&(H.get||H.set)?Object.defineProperty(B,C,H):B[C]=w[C]}B.default=w;x&&x.set(w,B);return B}Object.defineProperty(m,"__esModule",{value:!0});m.Context=void 0;var n=p(v(82)),c=p(v(88)),e=p(v(313)),f=p(v(352)),h=p(v(518)),k=p(v(522)),g=p(v(523)),r=v(2);class u{static initClass(){this.Namespace={Model:n,Overlay:c,Primitives:e,Render:f,Shaders:h,Stage:k,Util:g,DOM:g.VDOM};this.Version="2.3.1"}constructor(w,x=null,B=null){let E;this.canvas=E=w.domElement;this.element=null;this.shaders=h.Factory(h.Snippets);
this.renderables=new f.Factory(f.Classes,w,this.shaders);this.overlays=new c.Factory(c.Classes,E);this.scene=this.renderables.make("scene",{scene:x});this.camera=this.defaultCamera=null!=B?B:new r.PerspectiveCamera;this.attributes=new n.Attributes(e.Types,this);this.primitives=new e.Factory(e.Types,this);this.root=this.primitives.make("root");this.model=new n.Model(this.root);this.guard=new n.Guard;this.controller=new k.Controller(this.model,this.primitives);this.animator=new k.Animator(this);this.api=
new k.API(this);this.speed=1;this.time={now:+new Date/1E3,time:0,delta:0,clock:0,step:0}}init(){this.scene.inject();this.overlays.inject();return this}destroy(){this.scene.unject();this.overlays.unject();return this}resize(w){null==w&&(w={});null==w.renderWidth&&(w.renderWidth=null!=w.viewWidth?w.viewWidth:w.viewWidth=1280);null==w.renderHeight&&(w.renderHeight=null!=w.viewHeight?w.viewHeight:w.viewHeight=720);null==w.pixelRatio&&(w.pixelRatio=w.renderWidth/Math.max(1E-6,w.viewWidth));null==w.aspect&&
(w.aspect=w.viewWidth/Math.max(1E-6,w.viewHeight));this.root.controller.resize(w);return this}frame(w){this.pre(w);this.update();this.render();this.post();return this}pre(w){w||(w={now:+new Date/1E3,time:0,delta:0,clock:0,step:0},w.delta=null!=this.time.now?w.now-this.time.now:0,1<w.delta&&(w.delta=1/60),w.step=w.delta*this.speed,w.time=this.time.time+w.delta,w.clock=this.time.clock+w.step);this.time=w;"function"===typeof this.root.controller.pre&&this.root.controller.pre();return this}update(){this.animator.update();
this.attributes.compute();this.guard.iterate({step:()=>this.attributes.digest()||this.model.digest(),last(){return{attribute:this.attributes.getLastTrigger(),model:this.model.getLastTrigger()}}});"function"===typeof this.root.controller.update&&this.root.controller.update();this.camera=this.root.controller.getCamera();this.speed=this.root.controller.getSpeed();return this}render(){"function"===typeof this.root.controller.render&&this.root.controller.render();this.scene.render();return this}post(){"function"===
typeof this.root.controller.post&&this.root.controller.post();return this}setWarmup(w){this.scene.warmup(w);return this}getPending(){return this.scene.pending.length}}m.Context=u;u.initClass()};
shadow$provide[525]=function(z,v,J,m){function t(w){if("function"!==typeof WeakMap)return null;var x=new WeakMap,B=new WeakMap;return(t=function(E){return E?B:x})(w)}function p(w,x){if(!x&&w&&w.__esModule)return w;if(null===w||"object"!==typeof w&&"function"!==typeof w)return{default:w};if((x=t(x))&&x.has(w))return x.get(w);var B={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor,C;for(C in w)if("default"!==C&&Object.prototype.hasOwnProperty.call(w,C)){var H=E?Object.getOwnPropertyDescriptor(w,
C):null;H&&(H.get||H.set)?Object.defineProperty(B,C,H):B[C]=w[C]}B.default=w;x&&x.set(w,B);return B}Object.defineProperty(m,"__esModule",{value:!0});m.mathBox=m.DOM=m.Util=m.Stage=m.Shaders=m.Render=m.Primitives=m.Overlay=m.Model=m.version=m.Context=m.e=m.\u03c4=m.\u03c0=void 0;v(6);v(33);z=p(v(82));J=p(v(88));var n=p(v(313)),c=p(v(352)),e=p(v(518)),f=p(v(522)),h=p(v(523)),k=v(5);v=v(524);const g=Math.PI;m.\u03c0=g;m.\u03c4=2*g;m.e=Math.E;const r=v.Context;m.Context=r;const u=v.Context.Version;m.version=
u;m.Model=z;m.Overlay=J;m.Primitives=n;m.Render=c;m.Shaders=e;m.Stage=f;m.Util=h;m.DOM=h.VDOM;m.mathBox=function(w){w=new k.Bootstrap(w);w.fallback||(w.Time||w.install("time"),w.MathBox||w.install(["mathbox","splash"]));return null!=w.mathbox?w.mathbox:w};k.Bootstrap.registerPlugin("mathbox",{defaults:{init:!0,warmup:2,inspect:!0,splash:!0},listen:["ready","pre","update","post","resize"],install(w){let x=!1;this.first=!0;return w.MathBox={init:B=>{x||(x=!0,this.context=new r(w.renderer,(null!=B?B.scene:
void 0)||this.options.scene||w.scene,(null!=B?B.camera:void 0)||this.options.camera||w.camera),this.context.api.three=w.three=w,this.context.api.mathbox=w.mathbox=this.context.api,this.context.api.start=()=>w.Loop.start(),this.context.api.stop=()=>w.Loop.stop(),this.context.init(),this.context.resize(w.Size),this.context.setWarmup(this.options.warmup),this.pending=0,this.warm=!this.options.warmup,console.log("MathBox²",u),w.trigger({type:"mathbox/init",version:u,context:this.context}))},destroy:()=>
{x&&(x=!1,w.trigger({type:"mathbox/destroy",context:this.context}),this.context.destroy(),delete w.mathbox,delete this.context.api.three,delete this.context)},object:()=>null!=this.context?this.context.scene.root:void 0}},uninstall(w){w.MathBox.destroy();delete w.MathBox},ready(w,x){if(this.options.init)return x.MathBox.init(),setTimeout(()=>{if(this.options.inspect&&x.MathBox)return this.inspect(x)})},inspect(w){this.context.api.inspect();if(!this.options.warmup)return this.info(w)},info(w){const x=
function(B){const E=[];for(;1E3<=B;)E.unshift(("000"+B%1E3).slice(-3)),B=Math.floor(B/1E3);E.unshift(B);return E.join(",")};w=w.renderer.info.render;console.log("Geometry  ",x(w.triangles)+" triangles  ",x(w.points)+" points  ",x(w.lines)+" lines  ",x(w.calls)+" draw calls  ")},resize(w,x){return null!=this.context?this.context.resize(x.Size):void 0},pre(w,x){return null!=this.context?this.context.pre(x.Time):void 0},update(w,x){let B;null!=this.context&&this.context.update();(B=null!=this.context?
this.context.camera:void 0)&&B!==x.camera&&(x.camera=B);x.Time.set({speed:this.context.speed});this.progress(this.context.getPending(),x);return null!=this.context?this.context.render():void 0},post(w,x){return null!=this.context?this.context.post():void 0},progress(w,x){if(w||this.pending){var B=Math.max(w+this.options.warmup,this.pending),E=B-w,C=B;x.trigger({type:"mathbox/progress",current:B-w,total:B});0===w&&(B=0);this.pending=B;E!==C||this.warm||(this.warm=!0,this.options.inspect&&this.info(x))}}})};
shadow$provide[526]=function(z,v,J,m){function t(ea,qa){var Fa={},Ya;for(Ya in ea)Object.prototype.hasOwnProperty.call(ea,Ya)&&0>qa.indexOf(Ya)&&(Fa[Ya]=ea[Ya]);if(null!=ea&&"function"==typeof Object.getOwnPropertySymbols){var za=0;for(Ya=Object.getOwnPropertySymbols(ea);za<Ya.length;za++)0>qa.indexOf(Ya[za])&&Object.prototype.propertyIsEnumerable.call(ea,Ya[za])&&(Fa[Ya[za]]=ea[Ya[za]])}return Fa}function p(ea){var qa=-1,Fa=null==ea?0:ea.length;for(this.clear();++qa<Fa;){var Ya=ea[qa];this.set(Ya[0],
Ya[1])}}function n(ea){var qa=-1,Fa=null==ea?0:ea.length;for(this.clear();++qa<Fa;){var Ya=ea[qa];this.set(Ya[0],Ya[1])}}function c(ea){var qa=-1,Fa=null==ea?0:ea.length;for(this.clear();++qa<Fa;){var Ya=ea[qa];this.set(Ya[0],Ya[1])}}function e(ea){this.size=(this.__data__=new Jb(ea)).size}function f(ea){var qa=-1,Fa=null==ea?0:ea.length;for(this.__data__=new Tb;++qa<Fa;)this.add(ea[qa])}var h=v(1),k=v(2),g=v(525),r=function(){return r=Object.assign||function(ea){for(var qa,Fa=1,Ya=arguments.length;Fa<
Ya;Fa++)for(var za in qa=arguments[Fa])Object.prototype.hasOwnProperty.call(qa,za)&&(ea[za]=qa[za]);return ea},r.apply(this,arguments)},u=h.createContext(null),w="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof z?z:"undefined"!=typeof self?self:{},x=function(ea,qa){return ea===qa||ea!=ea&&qa!=qa},B=function(ea,qa){for(var Fa=ea.length;Fa--;)if(x(ea[Fa][0],qa))return Fa;return-1},E=Array.prototype.splice;p.prototype.clear=function(){this.__data__=[];this.size=
0};p.prototype.delete=function(ea){var qa=this.__data__;ea=B(qa,ea);return!(0>ea)&&(ea==qa.length-1?qa.pop():E.call(qa,ea,1),--this.size,!0)};p.prototype.get=function(ea){var qa=this.__data__;ea=B(qa,ea);return 0>ea?void 0:qa[ea][1]};p.prototype.has=function(ea){return-1<B(this.__data__,ea)};p.prototype.set=function(ea,qa){var Fa=this.__data__,Ya=B(Fa,ea);return 0>Ya?(++this.size,Fa.push([ea,qa])):Fa[Ya][1]=qa,this};var C="object"==typeof w&&w&&w.Object===Object&&w,H="object"==typeof self&&self&&
self.Object===Object&&self,I=C||H||Function("return this")(),K=I.Symbol,O=Object.prototype,Q=O.hasOwnProperty,W=O.toString,R=K?K.toStringTag:void 0,X=Object.prototype.toString,ca=K?K.toStringTag:void 0,ka=function(ea){if(null==ea)ea=void 0===ea?"[object Undefined]":"[object Null]";else if(ca&&ca in Object(ea)){var qa=Q.call(ea,R),Fa=ea[R];try{ea[R]=void 0;var Ya=!0}catch(hb){}var za=W.call(ea);ea=(Ya&&(qa?ea[R]=Fa:delete ea[R]),za)}else ea=X.call(ea);return ea},la=function(ea){var qa=typeof ea;return null!=
ea&&("object"==qa||"function"==qa)},Aa,ta=function(ea){if(!la(ea))return!1;ea=ka(ea);return"[object Function]"==ea||"[object GeneratorFunction]"==ea||"[object AsyncFunction]"==ea||"[object Proxy]"==ea},Ha=I["__core-js_shared__"],Oa=(Aa=/[^.]+$/.exec(Ha&&Ha.keys&&Ha.keys.IE_PROTO||""))?"Symbol(src)_1."+Aa:"",da=Function.prototype.toString,Wa=function(ea){if(null!=ea){try{return da.call(ea)}catch(qa){}return ea+""}return""},Pa=/^\[object .+?Constructor\]$/,mb=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,
"\\$\x26").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Cb=function(ea,qa){ea=null==ea?void 0:ea[qa];return!la(ea)||Oa&&Oa in ea||!(ta(ea)?mb:Pa).test(Wa(ea))?void 0:ea},yb=Cb(I,"Map"),tb=Cb(Object,"create"),Rb=Object.prototype.hasOwnProperty,ac=Object.prototype.hasOwnProperty;n.prototype.clear=function(){this.__data__=tb?tb(null):{};this.size=0};n.prototype.delete=function(ea){ea=this.has(ea)&&delete this.__data__[ea];return this.size-=ea?1:0,ea};n.prototype.get=
function(ea){var qa=this.__data__;return tb?(ea=qa[ea],"__lodash_hash_undefined__"===ea?void 0:ea):Rb.call(qa,ea)?qa[ea]:void 0};n.prototype.has=function(ea){var qa=this.__data__;return tb?void 0!==qa[ea]:ac.call(qa,ea)};n.prototype.set=function(ea,qa){var Fa=this.__data__;return this.size+=this.has(ea)?0:1,Fa[ea]=tb&&void 0===qa?"__lodash_hash_undefined__":qa,this};var Hb=function(ea,qa){ea=ea.__data__;var Fa=typeof qa;return("string"==Fa||"number"==Fa||"symbol"==Fa||"boolean"==Fa?"__proto__"!==
qa:null===qa)?ea["string"==typeof qa?"string":"hash"]:ea.map};c.prototype.clear=function(){this.size=0;this.__data__={hash:new n,map:new (yb||p),string:new n}};c.prototype.delete=function(ea){ea=Hb(this,ea).delete(ea);return this.size-=ea?1:0,ea};c.prototype.get=function(ea){return Hb(this,ea).get(ea)};c.prototype.has=function(ea){return Hb(this,ea).has(ea)};c.prototype.set=function(ea,qa){var Fa=Hb(this,ea),Ya=Fa.size;return Fa.set(ea,qa),this.size+=Fa.size==Ya?0:1,this};var Jb=p;e.prototype.clear=
function(){this.__data__=new p;this.size=0};e.prototype.delete=function(ea){var qa=this.__data__;ea=qa.delete(ea);return this.size=qa.size,ea};e.prototype.get=function(ea){return this.__data__.get(ea)};e.prototype.has=function(ea){return this.__data__.has(ea)};e.prototype.set=function(ea,qa){var Fa=this.__data__;if(Fa instanceof p){var Ya=Fa.__data__;if(!yb||199>Ya.length)return Ya.push([ea,qa]),this.size=++Fa.size,this;Fa=this.__data__=new c(Ya)}return Fa.set(ea,qa),this.size=Fa.size,this};var Tb=
c;f.prototype.add=f.prototype.push=function(ea){return this.__data__.set(ea,"__lodash_hash_undefined__"),this};f.prototype.has=function(ea){return this.__data__.has(ea)};var dc=function(ea,qa){for(var Fa=-1,Ya=null==ea?0:ea.length;++Fa<Ya;)if(qa(ea[Fa],Fa,ea))return!0;return!1},zb=function(ea,qa,Fa,Ya,za,hb){var Ob=1&Fa,xb=ea.length,lb=qa.length;if(xb!=lb&&!(Ob&&lb>xb))return!1;lb=hb.get(ea);var aa=hb.get(qa);if(lb&&aa)return lb==qa&&aa==ea;lb=-1;aa=!0;var Yb=2&Fa?new f:void 0;hb.set(ea,qa);for(hb.set(qa,
ea);++lb<xb;){var Pb=ea[lb],ic=qa[lb];if(Ya)var Zb=Ob?Ya(ic,Pb,lb,qa,ea,hb):Ya(Pb,ic,lb,ea,qa,hb);if(void 0!==Zb){if(Zb)continue;aa=!1;break}if(Yb){if(!dc(qa,function(Cc,Rc){if(!Yb.has(Rc)&&(Pb===Cc||za(Pb,Cc,Fa,Ya,hb)))return Yb.push(Rc)})){aa=!1;break}}else if(Pb!==ic&&!za(Pb,ic,Fa,Ya,hb)){aa=!1;break}}return hb.delete(ea),hb.delete(qa),aa},ib=I.Uint8Array,Db=function(ea){var qa=-1,Fa=Array(ea.size);return ea.forEach(function(Ya,za){Fa[++qa]=[za,Ya]}),Fa},ec=function(ea){var qa=-1,Fa=Array(ea.size);
return ea.forEach(function(Ya){Fa[++qa]=Ya}),Fa},pa=K?K.prototype:void 0,Xa=pa?pa.valueOf:void 0,sb=Array.isArray,Eb=function(ea,qa){for(var Fa=-1,Ya=null==ea?0:ea.length,za=0,hb=[];++Fa<Ya;){var Ob=ea[Fa];qa(Ob,Fa,ea)&&(hb[za++]=Ob)}return hb},Sb=function(){return[]},va=Object.prototype.propertyIsEnumerable,jb=Object.getOwnPropertySymbols,Wb=jb?function(ea){return null==ea?[]:(ea=Object(ea),Eb(jb(ea),function(qa){return va.call(ea,qa)}))}:Sb,oc=function(ea){return null!=ea&&"object"==typeof ea},
Hc=function(ea){return oc(ea)&&"[object Arguments]"==ka(ea)},Nc=Object.prototype,gd=Nc.hasOwnProperty,yc=Nc.propertyIsEnumerable,zc=Hc(function(){return arguments}())?Hc:function(ea){return oc(ea)&&gd.call(ea,"callee")&&!yc.call(ea,"callee")},hd={exports:{}},Id=function(){return!1};!function(ea,qa){var Fa=(qa=qa&&!qa.nodeType&&qa)&&ea&&!ea.nodeType&&ea;qa=Fa&&Fa.exports===qa?I.Buffer:void 0;ea.exports=(qa?qa.isBuffer:void 0)||Id}(hd,hd.exports);var Jd=/^(?:0|[1-9]\d*)$/,pd=function(ea){return"number"==
typeof ea&&-1<ea&&0==ea%1&&9007199254740991>=ea},Xb={};Xb["[object Float32Array]"]=Xb["[object Float64Array]"]=Xb["[object Int8Array]"]=Xb["[object Int16Array]"]=Xb["[object Int32Array]"]=Xb["[object Uint8Array]"]=Xb["[object Uint8ClampedArray]"]=Xb["[object Uint16Array]"]=Xb["[object Uint32Array]"]=!0;Xb["[object Arguments]"]=Xb["[object Array]"]=Xb["[object ArrayBuffer]"]=Xb["[object Boolean]"]=Xb["[object DataView]"]=Xb["[object Date]"]=Xb["[object Error]"]=Xb["[object Function]"]=Xb["[object Map]"]=
Xb["[object Number]"]=Xb["[object Object]"]=Xb["[object RegExp]"]=Xb["[object Set]"]=Xb["[object String]"]=Xb["[object WeakMap]"]=!1;var id={exports:{}};!function(ea,qa){var Fa=qa&&!qa.nodeType&&qa;Fa=(qa=Fa&&ea&&!ea.nodeType&&ea)&&qa.exports===Fa&&C.process;a:{try{var Ya=qa&&qa.require&&qa.require("util").types||Fa&&Fa.binding&&Fa.binding("util");break a}catch(za){}Ya=void 0}ea.exports=Ya}(id,id.exports);var Kd=function(ea){return oc(ea)&&pd(ea.length)&&!!Xb[ka(ea)]},Ld=function(ea){return function(qa){return ea(qa)}},
qd=id.exports,rd=qd&&qd.isTypedArray,sd=rd?Ld(rd):Kd,Md=hd.exports,jd=Object.prototype.hasOwnProperty,Nd=Object.prototype,Ca=function(ea,qa){return function(Fa){return ea(qa(Fa))}}(Object.keys,Object),td=Object.prototype.hasOwnProperty,Mb=function(ea,qa,Fa){qa=qa(ea);if(!sb(ea)){ea=Fa(ea);Fa=-1;for(var Ya=ea.length,za=qa.length;++Fa<Ya;)qa[za+Fa]=ea[Fa]}return qa},Zc=function(ea){if(null!=ea&&pd(ea.length)&&!ta(ea)){var qa=sb(ea),Fa=!qa&&zc(ea),Ya=!qa&&!Fa&&Md(ea),za=!qa&&!Fa&&!Ya&&sd(ea);if(qa=qa||
Fa||Ya||za){Fa=ea.length;for(var hb=String,Ob=-1,xb=Array(Fa);++Ob<Fa;)xb[Ob]=hb(Ob);Fa=xb}else Fa=[];hb=Fa.length;for(var lb in ea){if(!(Ob=!jd.call(ea,lb))&&(Ob=qa)&&!(Ob="length"==lb||Ya&&("offset"==lb||"parent"==lb)||za&&("buffer"==lb||"byteLength"==lb||"byteOffset"==lb))){xb=lb;var aa=hb,Yb=typeof xb;Ob=!!(aa=null==aa?9007199254740991:aa)&&("number"==Yb||"symbol"!=Yb&&Jd.test(xb))&&-1<xb&&0==xb%1&&xb<aa}Ob||Fa.push(lb)}ea=Fa}else if(lb=ea&&ea.constructor,ea===("function"==typeof lb&&lb.prototype||
Nd)){lb=[];for(Ya in Object(ea))td.call(ea,Ya)&&"constructor"!=Ya&&lb.push(Ya);ea=lb}else ea=Ca(ea);return ea},Oc=Object.prototype.hasOwnProperty,$c=Cb(I,"DataView"),Qa=Cb(I,"Promise"),jc=Cb(I,"Set"),Ta=Cb(I,"WeakMap"),wb=Wa($c),kc=Wa(yb),pc=Wa(Qa),Be=Wa(jc),mf=Wa(Ta),ad=ka;($c&&"[object DataView]"!=ad(new $c(new ArrayBuffer(1)))||yb&&"[object Map]"!=ad(new yb)||Qa&&"[object Promise]"!=ad(Qa.resolve())||jc&&"[object Set]"!=ad(new jc)||Ta&&"[object WeakMap]"!=ad(new Ta))&&(ad=function(ea){var qa=ka(ea);
if(ea=(ea="[object Object]"==qa?ea.constructor:void 0)?Wa(ea):"")switch(ea){case wb:return"[object DataView]";case kc:return"[object Map]";case pc:return"[object Promise]";case Be:return"[object Set]";case mf:return"[object WeakMap]"}return qa});var nf=function(ea,qa,Fa,Ya,za,hb,Ob){switch(Fa){case "[object DataView]":if(ea.byteLength!=qa.byteLength||ea.byteOffset!=qa.byteOffset)break;ea=ea.buffer;qa=qa.buffer;case "[object ArrayBuffer]":return!(ea.byteLength!=qa.byteLength||!hb(new ib(ea),new ib(qa)));
case "[object Boolean]":case "[object Date]":case "[object Number]":return x(+ea,+qa);case "[object Error]":return ea.name==qa.name&&ea.message==qa.message;case "[object RegExp]":case "[object String]":return ea==qa+"";case "[object Map]":var xb=Db;case "[object Set]":if(xb||(xb=ec),ea.size!=qa.size&&!(1&Ya))break;if(Fa=Ob.get(ea))return Fa==qa;Ya|=2;Ob.set(ea,qa);qa=zb(xb(ea),xb(qa),Ya,za,hb,Ob);return Ob.delete(ea),qa;case "[object Symbol]":if(Xa)return Xa.call(ea)==Xa.call(qa)}return!1},kd=ad,
be=hd.exports,ce=Object.prototype.hasOwnProperty,de=function Ob(qa,Fa,Ya,za,hb){var xb;if(!(xb=qa===Fa)){if(null==qa||null==Fa||!oc(qa)&&!oc(Fa))var lb=qa!=qa&&Fa!=Fa;else a:{xb=sb(qa);var aa=sb(Fa),Yb=xb?"[object Array]":kd(qa),Pb=aa?"[object Array]":kd(Fa),ic="[object Object]"==(Yb="[object Arguments]"==Yb?"[object Object]":Yb);aa="[object Object]"==(Pb="[object Arguments]"==Pb?"[object Object]":Pb);if((Pb=Yb==Pb)&&be(qa)){if(!be(Fa)){lb=!1;break a}xb=!0;ic=!1}if(Pb&&!ic)lb=(hb||(hb=new e),xb||
sd(qa)?zb(qa,Fa,Ya,za,Ob,hb):nf(qa,Fa,Yb,Ya,za,Ob,hb));else{if(!(1&Ya)&&(xb=ic&&ce.call(qa,"__wrapped__"),Yb=aa&&ce.call(Fa,"__wrapped__"),xb||Yb)){qa=xb?qa.value():qa;Fa=Yb?Fa.value():Fa;lb=(hb||(hb=new e),Ob(qa,Fa,Ya,za,hb));break a}if(xb=!!Pb){hb||(hb=new e);b:if(xb=1&Ya,Yb=Mb(qa,Zc,Wb),aa=Yb.length,aa==Mb(Fa,Zc,Wb).length||xb){for(Pb=aa;Pb--;){var Zb=Yb[Pb];if(!(xb?Zb in Fa:Oc.call(Fa,Zb))){Fa=!1;break b}}ic=hb.get(qa);Zb=hb.get(Fa);if(ic&&Zb)Fa=ic==Fa&&Zb==qa;else{ic=!0;hb.set(qa,Fa);hb.set(Fa,
qa);for(var Cc=xb;++Pb<aa;){var Rc=qa[Zb=Yb[Pb]],Oe=Fa[Zb];za&&(lb=xb?za(Oe,Rc,Zb,Fa,qa,hb):za(Rc,Oe,Zb,qa,Fa,hb));if(void 0===lb?Rc!==Oe&&!Ob(Rc,Oe,Ya,za,hb):!lb){ic=!1;break}Cc||(Cc="constructor"==Zb)}ic&&!Cc&&(Ya=qa.constructor,za=Fa.constructor,!(Ya!=za&&"constructor"in qa&&"constructor"in Fa)||"function"==typeof Ya&&Ya instanceof Ya&&"function"==typeof za&&za instanceof za||(ic=!1));Fa=(hb.delete(qa),hb.delete(Fa),ic)}}else Fa=!1;xb=Fa}lb=xb}}xb=lb}return xb},Ce="view cartesian cartesian4 polar spherical stereographic stereographic4 transform transform4 vertex fragment layer mask group inherit root unit rtt clock now move present reveal slide".split(" "),
fb=function(qa){var Fa=Ce.includes(qa),Ya=qa?qa[0].toLocaleUpperCase()+qa.slice(1):"";return h.forwardRef(function(za,hb){var Ob=h.useReducer(function(Zb){return Zb+1},0);Ob[0];var xb=Ob[1],lb=h.useContext(u),aa=h.useRef(null),Yb=h.useRef(void 0);h.useEffect(function(){return function(){aa.current&&(aa.current.remove(),aa.current=null)}},[]);h.useImperativeHandle(hb,function(){return aa.current});za.children;var Pb=za.liveProps,ic=t(za,["children","liveProps"]);if(h.useEffect(function(){lb&&(function(Zb){for(;Zb._up;)Zb=
Zb._up;return void 0===Zb.three}(lb)?xb():(aa.current&&(function(Zb,Cc){var Rc;return(null===(Rc=Zb._up)||void 0===Rc?void 0:Rc[0])===Cc[0]}(aa.current,lb)||(aa.current.remove(),aa.current=null,xb())),aa.current?(Yb.current&&Pb!==Yb.current&&Object.keys(Yb.current).forEach(function(Zb){aa.current.unbind(Zb)}),Pb&&Pb!==Yb.current&&aa.current.bind(Pb),aa.current.set(ic)):(aa.current=lb[qa](ic,Pb),xb()),Yb.current=Pb))},[lb,ic,Pb]),!Fa){if(za.children)throw Error("Component \x3c".concat(Ya," /\x3e cannot have children."));
return null}return h.createElement(u.Provider,{value:aa.current},za.children)})},of=fb("area"),pf=fb("array"),qf=fb("axis"),rf=fb("camera"),sf=fb("cartesian"),tf=fb("cartesian4"),uf=fb("clamp"),vf=fb("clock"),wf=fb("compose"),De=fb("dom"),Ee=fb("face"),xf=fb("format"),yf=fb("fragment"),zf=fb("grid"),Af=fb("group"),Bf=fb("grow"),Od=fb("html"),Ac=fb("inherit"),Fh=fb("interval"),Ih=fb("join"),Jh=fb("label"),pg=fb("layer"),Kh=fb("lerp"),Lh=fb("line"),Mh=fb("mask"),Cf=fb("matrix"),Ie=fb("memo"),tg=fb("move"),
Ff=fb("now"),ug=fb("play"),he=fb("point"),ie=fb("polar"),vg=fb("present"),wd=fb("readback"),ke=fb("repeat"),Uh=fb("resample"),Vh=fb("retext"),Gf=fb("reveal"),Qd=fb("rtt"),hc=fb("scale"),Ke=fb("shader"),xg=fb("slice"),Me=fb("slide"),Le=fb("spherical"),le=fb("split"),yg=fb("spread"),wg=fb("step"),je=fb("stereographic"),Hf=fb("stereographic4"),zg=fb("strip"),Ag=fb("subdivide"),Bg=fb("surface"),Lc=fb("swizzle"),xd=fb("text"),If=fb("ticks"),Cg=fb("transform"),Jf=fb("transform4"),Kf=fb("transpose"),Wh=
fb("unit"),Dg=fb("vector"),Eg=fb("vertex"),Nf=fb("view"),Fg=fb("volume"),mc=fb("voxel"),Uc=h.forwardRef(function(qa,Fa){var Ya,za,hb,Ob=qa.container,xb=qa.children,lb=qa.options,aa=t(qa,["container","children","options"]),Yb=(Ya=null!=lb?lb:{},za={},hb=h.useRef(za),h.useMemo(function(){return de(Ya,hb.current)?hb.current:(hb.current=Ya,Ya)},[Ya]));qa=h.useState(null);var Pb=qa[0],ic=qa[1];return h.useEffect(function(){if(!Ob)return function(){};var Zb=g.mathBox(r(r({},Yb),{element:Ob}));return ic(Zb),
Zb.three.renderer.setClearColor(new k.Color(16777215),1),Zb.three.camera.position.set(1,1,2),function(){Zb.select("*").remove();Zb.three.destroy();ic(null)}},[Ob,Yb]),h.useEffect(function(){Pb&&Pb.set(aa)},[Pb,aa]),h.useImperativeHandle(Fa,function(){return Pb},[Pb]),h.createElement(u.Provider,{value:Pb},xb)}),uc=h.forwardRef(function(qa,Fa){var Ya=qa.children,za=qa.containerId,hb=qa.containerClass,Ob=qa.containerStyle;qa=t(qa,["children","containerId","containerClass","containerStyle"]);var xb=h.useState(null),
lb=xb[0];return h.createElement("div",{ref:xb[1],id:za,className:hb,style:Ob},lb&&h.createElement(Uc,r({ref:Fa,container:lb},qa),Ya))});m.Area=of;m.Array=pf;m.Axis=qf;m.Camera=rf;m.Cartesian=sf;m.Cartesian4=tf;m.Clamp=uf;m.Clock=vf;m.Compose=wf;m.ContainedMathbox=uc;m.Dom=De;m.Face=Ee;m.Format=xf;m.Fragment=yf;m.Grid=zf;m.Group=Af;m.Grow=Bf;m.Html=Od;m.Inherit=Ac;m.Interval=Fh;m.Join=Ih;m.Label=Jh;m.Layer=pg;m.Lerp=Kh;m.Line=Lh;m.Mask=Mh;m.Mathbox=Uc;m.Matrix=Cf;m.Memo=Ie;m.Move=tg;m.Now=Ff;m.Play=
ug;m.Point=he;m.Polar=ie;m.Present=vg;m.Readback=wd;m.Repeat=ke;m.Resample=Uh;m.Retext=Vh;m.Reveal=Gf;m.Rtt=Qd;m.Scale=hc;m.Shader=Ke;m.Slice=xg;m.Slide=Me;m.Spherical=Le;m.Split=le;m.Spread=yg;m.Step=wg;m.Stereographic=je;m.Stereographic4=Hf;m.Strip=zg;m.Subdivide=Ag;m.Surface=Bg;m.Swizzle=Lc;m.Text=xd;m.Ticks=If;m.Transform=Cg;m.Transform4=Jf;m.Transpose=Kf;m.Unit=Wh;m.Vector=Dg;m.Vertex=Eg;m.View=Nf;m.Volume=Fg;m.Voxel=mc};
shadow$provide[527]=function(z,v,J,m){Object.defineProperty(m,"__esModule",{value:!0});m.MapControls=m.OrbitControls=void 0;var t=v(2);const p={type:"change"},n={type:"start"},c={type:"end"};class e extends t.EventDispatcher{constructor(h,k){function g(){return Math.pow(.95,da.zoomSpeed)}function r(va){Cb.theta-=va}function u(va){Cb.phi-=va}function w(va){da.object.isPerspectiveCamera?yb/=va:da.object.isOrthographicCamera?(da.object.zoom=Math.max(da.minZoom,Math.min(da.maxZoom,da.object.zoom*va)),
da.object.updateProjectionMatrix(),Rb=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),da.enableZoom=!1)}function x(va){da.object.isPerspectiveCamera?yb*=va:da.object.isOrthographicCamera?(da.object.zoom=Math.max(da.minZoom,Math.min(da.maxZoom,da.object.zoom/va)),da.object.updateProjectionMatrix(),Rb=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),da.enableZoom=!1)}function B(){1===pa.length?
ac.set(pa[0].pageX,pa[0].pageY):ac.set(.5*(pa[0].pageX+pa[1].pageX),.5*(pa[0].pageY+pa[1].pageY))}function E(){1===pa.length?Tb.set(pa[0].pageX,pa[0].pageY):Tb.set(.5*(pa[0].pageX+pa[1].pageX),.5*(pa[0].pageY+pa[1].pageY))}function C(){const va=pa[0].pageX-pa[1].pageX,jb=pa[0].pageY-pa[1].pageY;ib.set(0,Math.sqrt(va*va+jb*jb))}function H(va){if(1==pa.length)Hb.set(va.pageX,va.pageY);else{const jb=Oa(va);Hb.set(.5*(va.pageX+jb.x),.5*(va.pageY+jb.y))}Jb.subVectors(Hb,ac).multiplyScalar(da.rotateSpeed);
va=da.domElement;r(2*Math.PI*Jb.x/va.clientHeight);u(2*Math.PI*Jb.y/va.clientHeight);ac.copy(Hb)}function I(va){if(1===pa.length)dc.set(va.pageX,va.pageY);else{const jb=Oa(va);dc.set(.5*(va.pageX+jb.x),.5*(va.pageY+jb.y))}zb.subVectors(dc,Tb).multiplyScalar(da.panSpeed);Sb(zb.x,zb.y);Tb.copy(dc)}function K(va){const jb=Oa(va),Wb=va.pageX-jb.x;va=va.pageY-jb.y;Db.set(0,Math.sqrt(Wb*Wb+va*va));ec.set(0,Math.pow(Db.y/ib.y,da.zoomSpeed));w(ec.y);ib.copy(Db)}function O(va){!1!==da.enabled&&(0===pa.length&&
(da.domElement.setPointerCapture(va.pointerId),da.domElement.addEventListener("pointermove",Q),da.domElement.addEventListener("pointerup",W)),pa.push(va),"touch"===va.pointerType?la(va):X(va))}function Q(va){if(!1!==da.enabled)if("touch"===va.pointerType)switch(Ha(va),Pa){case Wa.TOUCH_ROTATE:if(!1===da.enableRotate)break;H(va);da.update();break;case Wa.TOUCH_PAN:if(!1===da.enablePan)break;I(va);da.update();break;case Wa.TOUCH_DOLLY_PAN:if(!1===da.enableZoom&&!1===da.enablePan)break;da.enableZoom&&
K(va);da.enablePan&&I(va);da.update();break;case Wa.TOUCH_DOLLY_ROTATE:if(!1===da.enableZoom&&!1===da.enableRotate)break;da.enableZoom&&K(va);da.enableRotate&&H(va);da.update();break;default:Pa=Wa.NONE}else a:switch(Pa){case Wa.ROTATE:if(!1===da.enableRotate)break a;Hb.set(va.clientX,va.clientY);Jb.subVectors(Hb,ac).multiplyScalar(da.rotateSpeed);va=da.domElement;r(2*Math.PI*Jb.x/va.clientHeight);u(2*Math.PI*Jb.y/va.clientHeight);ac.copy(Hb);da.update();break;case Wa.DOLLY:if(!1===da.enableZoom)break a;
Db.set(va.clientX,va.clientY);ec.subVectors(Db,ib);0<ec.y?w(g()):0>ec.y&&x(g());ib.copy(Db);da.update();break;case Wa.PAN:!1!==da.enablePan&&(dc.set(va.clientX,va.clientY),zb.subVectors(dc,Tb).multiplyScalar(da.panSpeed),Sb(zb.x,zb.y),Tb.copy(dc),da.update())}}function W(va){ta(va);0===pa.length&&(da.domElement.releasePointerCapture(va.pointerId),da.domElement.removeEventListener("pointermove",Q),da.domElement.removeEventListener("pointerup",W));da.dispatchEvent(c);Pa=Wa.NONE}function R(va){ta(va)}
function X(va){let jb;switch(va.button){case 0:jb=da.mouseButtons.LEFT;break;case 1:jb=da.mouseButtons.MIDDLE;break;case 2:jb=da.mouseButtons.RIGHT;break;default:jb=-1}switch(jb){case t.MOUSE.DOLLY:if(!1===da.enableZoom)return;ib.set(va.clientX,va.clientY);Pa=Wa.DOLLY;break;case t.MOUSE.ROTATE:if(va.ctrlKey||va.metaKey||va.shiftKey){if(!1===da.enablePan)return;Tb.set(va.clientX,va.clientY);Pa=Wa.PAN}else{if(!1===da.enableRotate)return;ac.set(va.clientX,va.clientY);Pa=Wa.ROTATE}break;case t.MOUSE.PAN:if(va.ctrlKey||
va.metaKey||va.shiftKey){if(!1===da.enableRotate)return;ac.set(va.clientX,va.clientY);Pa=Wa.ROTATE}else{if(!1===da.enablePan)return;Tb.set(va.clientX,va.clientY);Pa=Wa.PAN}break;default:Pa=Wa.NONE}Pa!==Wa.NONE&&da.dispatchEvent(n)}function ca(va){!1!==da.enabled&&!1!==da.enableZoom&&Pa===Wa.NONE&&(va.preventDefault(),da.dispatchEvent(n),0>va.deltaY?x(g()):0<va.deltaY&&w(g()),da.update(),da.dispatchEvent(c))}function ka(va){if(!1!==da.enabled&&!1!==da.enablePan){var jb=!1;switch(va.code){case da.keys.UP:va.ctrlKey||
va.metaKey||va.shiftKey?u(2*Math.PI*da.rotateSpeed/da.domElement.clientHeight):Sb(0,da.keyPanSpeed);jb=!0;break;case da.keys.BOTTOM:va.ctrlKey||va.metaKey||va.shiftKey?u(-2*Math.PI*da.rotateSpeed/da.domElement.clientHeight):Sb(0,-da.keyPanSpeed);jb=!0;break;case da.keys.LEFT:va.ctrlKey||va.metaKey||va.shiftKey?r(2*Math.PI*da.rotateSpeed/da.domElement.clientHeight):Sb(da.keyPanSpeed,0);jb=!0;break;case da.keys.RIGHT:va.ctrlKey||va.metaKey||va.shiftKey?r(-2*Math.PI*da.rotateSpeed/da.domElement.clientHeight):
Sb(-da.keyPanSpeed,0),jb=!0}jb&&(va.preventDefault(),da.update())}}function la(va){Ha(va);switch(pa.length){case 1:switch(da.touches.ONE){case t.TOUCH.ROTATE:if(!1===da.enableRotate)return;B();Pa=Wa.TOUCH_ROTATE;break;case t.TOUCH.PAN:if(!1===da.enablePan)return;E();Pa=Wa.TOUCH_PAN;break;default:Pa=Wa.NONE}break;case 2:switch(da.touches.TWO){case t.TOUCH.DOLLY_PAN:if(!1===da.enableZoom&&!1===da.enablePan)return;da.enableZoom&&C();da.enablePan&&E();Pa=Wa.TOUCH_DOLLY_PAN;break;case t.TOUCH.DOLLY_ROTATE:if(!1===
da.enableZoom&&!1===da.enableRotate)return;da.enableZoom&&C();da.enableRotate&&B();Pa=Wa.TOUCH_DOLLY_ROTATE;break;default:Pa=Wa.NONE}break;default:Pa=Wa.NONE}Pa!==Wa.NONE&&da.dispatchEvent(n)}function Aa(va){!1!==da.enabled&&va.preventDefault()}function ta(va){delete Xa[va.pointerId];for(let jb=0;jb<pa.length;jb++)if(pa[jb].pointerId==va.pointerId){pa.splice(jb,1);break}}function Ha(va){let jb=Xa[va.pointerId];void 0===jb&&(jb=new t.Vector2,Xa[va.pointerId]=jb);jb.set(va.pageX,va.pageY)}function Oa(va){return Xa[(va.pointerId===
pa[0].pointerId?pa[1]:pa[0]).pointerId]}super();this.object=h;this.domElement=k;this.domElement.style.touchAction="none";this.enabled=!0;this.target=new t.Vector3;this.minDistance=0;this.maxDistance=Infinity;this.minZoom=0;this.maxZoom=Infinity;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.minAzimuthAngle=-Infinity;this.maxAzimuthAngle=Infinity;this.enableDamping=!1;this.dampingFactor=.05;this.enableZoom=!0;this.zoomSpeed=1;this.enableRotate=!0;this.rotateSpeed=1;this.enablePan=!0;this.panSpeed=
1;this.screenSpacePanning=!0;this.keyPanSpeed=7;this.autoRotate=!1;this.autoRotateSpeed=2;this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"};this.mouseButtons={LEFT:t.MOUSE.ROTATE,MIDDLE:t.MOUSE.DOLLY,RIGHT:t.MOUSE.PAN};this.touches={ONE:t.TOUCH.ROTATE,TWO:t.TOUCH.DOLLY_PAN};this.target0=this.target.clone();this.position0=this.object.position.clone();this.zoom0=this.object.zoom;this._domElementKeyEvents=null;this.getPolarAngle=function(){return mb.phi};this.getAzimuthalAngle=
function(){return mb.theta};this.getDistance=function(){return this.object.position.distanceTo(this.target)};this.listenToKeyEvents=function(va){va.addEventListener("keydown",ka);this._domElementKeyEvents=va};this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",ka);this._domElementKeyEvents=null};this.saveState=function(){da.target0.copy(da.target);da.position0.copy(da.object.position);da.zoom0=da.object.zoom};this.reset=function(){da.target.copy(da.target0);
da.object.position.copy(da.position0);da.object.zoom=da.zoom0;da.object.updateProjectionMatrix();da.dispatchEvent(p);da.update();Pa=Wa.NONE};this.update=function(){const va=new t.Vector3,jb=(new t.Quaternion).setFromUnitVectors(h.up,new t.Vector3(0,1,0)),Wb=jb.clone().invert(),oc=new t.Vector3,Hc=new t.Quaternion,Nc=2*Math.PI;return function(){const gd=da.object.position;va.copy(gd).sub(da.target);va.applyQuaternion(jb);mb.setFromVector3(va);da.autoRotate&&Pa===Wa.NONE&&r(2*Math.PI/60/60*da.autoRotateSpeed);
da.enableDamping?(mb.theta+=Cb.theta*da.dampingFactor,mb.phi+=Cb.phi*da.dampingFactor):(mb.theta+=Cb.theta,mb.phi+=Cb.phi);let yc=da.minAzimuthAngle,zc=da.maxAzimuthAngle;isFinite(yc)&&isFinite(zc)&&(yc<-Math.PI?yc+=Nc:yc>Math.PI&&(yc-=Nc),zc<-Math.PI?zc+=Nc:zc>Math.PI&&(zc-=Nc),mb.theta=yc<=zc?Math.max(yc,Math.min(zc,mb.theta)):mb.theta>(yc+zc)/2?Math.max(yc,mb.theta):Math.min(zc,mb.theta));mb.phi=Math.max(da.minPolarAngle,Math.min(da.maxPolarAngle,mb.phi));mb.makeSafe();mb.radius*=yb;mb.radius=
Math.max(da.minDistance,Math.min(da.maxDistance,mb.radius));!0===da.enableDamping?da.target.addScaledVector(tb,da.dampingFactor):da.target.add(tb);va.setFromSpherical(mb);va.applyQuaternion(Wb);gd.copy(da.target).add(va);da.object.lookAt(da.target);!0===da.enableDamping?(Cb.theta*=1-da.dampingFactor,Cb.phi*=1-da.dampingFactor,tb.multiplyScalar(1-da.dampingFactor)):(Cb.set(0,0,0),tb.set(0,0,0));yb=1;return Rb||1E-6<oc.distanceToSquared(da.object.position)||1E-6<8*(1-Hc.dot(da.object.quaternion))?(da.dispatchEvent(p),
oc.copy(da.object.position),Hc.copy(da.object.quaternion),Rb=!1,!0):!1}}();this.dispose=function(){da.domElement.removeEventListener("contextmenu",Aa);da.domElement.removeEventListener("pointerdown",O);da.domElement.removeEventListener("pointercancel",R);da.domElement.removeEventListener("wheel",ca);da.domElement.removeEventListener("pointermove",Q);da.domElement.removeEventListener("pointerup",W);null!==da._domElementKeyEvents&&(da._domElementKeyEvents.removeEventListener("keydown",ka),da._domElementKeyEvents=
null)};const da=this,Wa={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let Pa=Wa.NONE;const mb=new t.Spherical,Cb=new t.Spherical;let yb=1;const tb=new t.Vector3;let Rb=!1;const ac=new t.Vector2,Hb=new t.Vector2,Jb=new t.Vector2,Tb=new t.Vector2,dc=new t.Vector2,zb=new t.Vector2,ib=new t.Vector2,Db=new t.Vector2,ec=new t.Vector2,pa=[],Xa={},sb=function(){const va=new t.Vector3;return function(jb,Wb){va.setFromMatrixColumn(Wb,0);va.multiplyScalar(-jb);
tb.add(va)}}(),Eb=function(){const va=new t.Vector3;return function(jb,Wb){!0===da.screenSpacePanning?va.setFromMatrixColumn(Wb,1):(va.setFromMatrixColumn(Wb,0),va.crossVectors(da.object.up,va));va.multiplyScalar(jb);tb.add(va)}}(),Sb=function(){const va=new t.Vector3;return function(jb,Wb){const oc=da.domElement;if(da.object.isPerspectiveCamera){va.copy(da.object.position).sub(da.target);let Hc=va.length();Hc*=Math.tan(da.object.fov/2*Math.PI/180);sb(2*jb*Hc/oc.clientHeight,da.object.matrix);Eb(2*
Wb*Hc/oc.clientHeight,da.object.matrix)}else da.object.isOrthographicCamera?(sb(jb*(da.object.right-da.object.left)/da.object.zoom/oc.clientWidth,da.object.matrix),Eb(Wb*(da.object.top-da.object.bottom)/da.object.zoom/oc.clientHeight,da.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),da.enablePan=!1)}}();da.domElement.addEventListener("contextmenu",Aa);da.domElement.addEventListener("pointerdown",O);da.domElement.addEventListener("pointercancel",
R);da.domElement.addEventListener("wheel",ca,{passive:!1});this.update()}}m.OrbitControls=e;class f extends e{constructor(h,k){super(h,k);this.screenSpacePanning=!1;this.mouseButtons.LEFT=t.MOUSE.PAN;this.mouseButtons.RIGHT=t.MOUSE.ROTATE;this.touches.ONE=t.TOUCH.PAN;this.touches.TWO=t.TOUCH.DOLLY_ROTATE}}m.MapControls=f};
'use strict';var I$=function(a){return new $APP.o3(a)},ana=function(a,b){$APP.f3.useEffect(function(){$APP.p(b)&&(b.o?b.o(a):b.call(null,a));if($APP.p(a))return function(){return $APP.p(b)?b.o?b.o(null):b.call(null,null):null}},[a])},ena=function(a,b){b=$APP.ag(b);var c=$APP.Re.j(b,bna),d=$APP.Re.j(b,cna);$APP.f3.useEffect(function(){if($APP.p(a)){var e=a.three.renderer;$APP.p(c)?e.setClearColor($APP.p(c.isColor)?c:new dna.Color(c),$APP.p(d)?d:e.getClearAlpha()):$APP.p(d)&&e.setClearAlpha(d)}},[a,
c,d])},J$=function(a,b,c){return function(){$APP.p($APP.p(a)?c:a)&&(a.three.controls[b]=c)}},fna=function(a,b){$APP.f3.useEffect(function(){if($APP.p($APP.p(a)?$APP.x(b):a)){for(var c=$APP.x(b),d=null,e=0,f=0;;)if(f<e){var g=d.fa(null,f),k=$APP.D.v(g,0,null);g=$APP.D.v(g,1,null);a.three.on($APP.Yi(k),g);f+=1}else if(c=$APP.x(c))$APP.He(c)?(e=$APP.bd(c),c=$APP.cd(c),d=e,e=$APP.ge(e)):(e=$APP.y(c),d=$APP.D.v(e,0,null),e=$APP.D.v(e,1,null),a.three.on($APP.Yi(d),e),c=$APP.z(c),d=null,e=0),f=0;else break;
return function(){for(var l=$APP.x(b),h=null,r=0,q=0;;)if(q<r){var w=h.fa(null,q),C=$APP.D.v(w,0,null);w=$APP.D.v(w,1,null);a.three.off($APP.Yi(C),w);q+=1}else if(l=$APP.x(l))$APP.He(l)?(h=$APP.bd(l),l=$APP.cd(l),C=h,r=$APP.ge(h),h=C):(h=$APP.y(l),C=$APP.D.v(h,0,null),w=$APP.D.v(h,1,null),a.three.off($APP.Yi(C),w),l=$APP.z(l),h=null,r=0),q=0;else return null}}},[a,b])},gna=new $APP.v(null,"Ticks","Ticks",-469763046,null),hna=new $APP.v(null,"Transform","Transform",-881921137,null),ina=new $APP.v("mathbox.primitives",
"Cartesian","mathbox.primitives/Cartesian",-1354081315,null),jna=new $APP.v("mathbox.primitives","Unit","mathbox.primitives/Unit",2058437326,null),kna=new $APP.v("mathbox.primitives","Stereographic4","mathbox.primitives/Stereographic4",-462845377,null),lna=new $APP.v(null,"Spherical","Spherical",1316206718,null),mna=new $APP.v("mathbox.primitives","Resample","mathbox.primitives/Resample",-1111983593,null),K$=new $APP.v(null,"children","children",699969545,null),nna=new $APP.v(null,"Stereographic",
"Stereographic",1739074233,null),ona=new $APP.v("mathbox.primitives","View","mathbox.primitives/View",-5042301,null),pna=new $APP.v("mathbox.primitives","Clamp","mathbox.primitives/Clamp",1137063655,null),qna=new $APP.v(null,"Reveal","Reveal",1011391251,null),rna=new $APP.v("mathbox.primitives","Scale","mathbox.primitives/Scale",570368639,null),L$=new $APP.K(null,"renderer","renderer",336841071),M$=new $APP.K(null,"ref","ref",1289896967),sna=new $APP.v("mathbox.core","threestrap-defaults","mathbox.core/threestrap-defaults",
1294638534,null),tna=new $APP.v(null,"Text","Text",-2054460644,null),una=new $APP.v(null,"Memo","Memo",-56475788,null),vna=new $APP.v(null,"Vector","Vector",872890327,null),wna=new $APP.v(null,"Strip","Strip",1159860619,null),xna=new $APP.v("mathbox.primitives","Play","mathbox.primitives/Play",180224833,null),yna=new $APP.v("mathbox.primitives","Grid","mathbox.primitives/Grid",-988235849,null),zna=new $APP.v("mathbox.primitives","Transform","mathbox.primitives/Transform",-1243339258,null),Ana=new $APP.v(null,
"Transform4","Transform4",-1726980308,null),Bna=new $APP.v(null,"Vertex","Vertex",-512523831,null),Cna=new $APP.K(null,"containerId","containerId",545549578),Dna=new $APP.v("mathbox.primitives","Move","mathbox.primitives/Move",-661788090,null),Ena=new $APP.v(null,"Lerp","Lerp",-1702516612,null),Fna=new $APP.v("mathbox.primitives","Grow","mathbox.primitives/Grow",400222057,null),Gna=new $APP.v("mathbox.primitives","Compose","mathbox.primitives/Compose",-2940428,null),Hna=new $APP.v("mathbox.primitives",
"Reveal","mathbox.primitives/Reveal",132115850,null),Ina=new $APP.v("mathbox.primitives","Readback","mathbox.primitives/Readback",-897225244,null),Jna=new $APP.v(null,"Array","Array",-423496279,null),Kna=new $APP.v("mathbox.primitives","Shader","mathbox.primitives/Shader",-1697795990,null),Lna=new $APP.v(null,"Shader","Shader",1685374417,null),Mna=new $APP.v(null,"MathBox","MathBox",1267820069,null),Nna=new $APP.v("mathbox.primitives","Fragment","mathbox.primitives/Fragment",429273026,null),Ona=new $APP.v("mathbox.primitives",
"Join","mathbox.primitives/Join",660585058,null),Pna=new $APP.v(null,"Html","Html",-1695147201,null),Qna=new $APP.v(null,"Camera","Camera",-1408338669,null),Rna=new $APP.K(null,"klass","klass",-1386752349),Sna=new $APP.v(null,"Axis","Axis",1020368522,null),Tna=new $APP.K(null,"f\x3e","f\x3e",1484564198),Una=new $APP.K(null,"camera","camera",-1190348585),Vna=new $APP.v(null,"Group","Group",-1810497176,null),Wna=new $APP.v("mathbox.primitives","Interval","mathbox.primitives/Interval",1202840225,null),
Xna=new $APP.v("mathbox.primitives","Slide","mathbox.primitives/Slide",1353572641,null),Yna=new $APP.v(null,"Format","Format",-1182429160,null),Zna=new $APP.v("mathbox.primitives","Slice","mathbox.primitives/Slice",-1294348699,null),N$=new $APP.K(null,"on","on",173873944),bna=new $APP.K(null,"background-color","background-color",570434026),$na=new $APP.v("mathbox.primitives","Present","mathbox.primitives/Present",15337402,null),aoa=new $APP.v("mathbox.primitives","Stereographic","mathbox.primitives/Stereographic",
1764922406,null),boa=new $APP.v("mathbox.primitives","Swizzle","mathbox.primitives/Swizzle",324393110,null),coa=new $APP.v("mathbox.primitives","Matrix","mathbox.primitives/Matrix",1981821632,null),doa=new $APP.v(null,"Dom","Dom",-1903068682,null),eoa=new $APP.v(null,"threestrap-defaults","threestrap-defaults",1862651176,null),foa=new $APP.v("mathbox.primitives","Spherical","mathbox.primitives/Spherical",1157296007,null),goa=new $APP.K(null,"options","options",99638489),hoa=new $APP.v("mathbox.primitives",
"Volume","mathbox.primitives/Volume",1655402604,null),ioa=new $APP.v("mathbox.primitives","Transpose","mathbox.primitives/Transpose",104160466,null),joa=new $APP.v("mathbox.primitives","Line","mathbox.primitives/Line",-1270459063,null),koa=new $APP.v(null,"Cartesian4","Cartesian4",208408284,null),loa=new $APP.v("mathbox.primitives","Clock","mathbox.primitives/Clock",-1930546827,null),moa=new $APP.v("mathbox.primitives","Now","mathbox.primitives/Now",933701808,null),noa=new $APP.v("mathbox.primitives",
"Rtt","mathbox.primitives/Rtt",-358152424,null),cna=new $APP.K(null,"background-opacity","background-opacity",-1073748756),ooa=new $APP.v("mathbox.primitives","Area","mathbox.primitives/Area",1617026373,null),poa=new $APP.K(null,"containerStyle","containerStyle",-1828381609),O$=new $APP.K(null,"controls","controls",1340701452),qoa=new $APP.K(null,"plugins","plugins",1900073717),roa=new $APP.v("mathbox.primitives","Voxel","mathbox.primitives/Voxel",1345267876,null),soa=new $APP.v(null,"Point","Point",
-2145220521,null),toa=new $APP.v(null,"Face","Face",1066942710,null),uoa=new $APP.v("mathbox.primitives","Split","mathbox.primitives/Split",-1183933028,null),voa=new $APP.v("mathbox.primitives","Transform4","mathbox.primitives/Transform4",-1869959749,null),woa=new $APP.v(null,"Mask","Mask",-375651427,null),xoa=new $APP.v(null,"Layer","Layer",-1498190011,null),yoa=new $APP.v("mathbox.primitives","Lerp","mathbox.primitives/Lerp",-1827866933,null),zoa=new $APP.v(null,"Step","Step",-816692470,null),Aoa=
new $APP.v("mathbox.primitives","Ticks","mathbox.primitives/Ticks",-361320827,null),P$=new $APP.v(null,"mathbox.primitives","mathbox.primitives",1541076194,null),Boa=new $APP.v("mathbox.primitives","Repeat","mathbox.primitives/Repeat",-1574268723,null),Coa=new $APP.v(null,"Matrix","Matrix",2091502681,null),Doa=new $APP.v(null,"Grow","Grow",508637906,null),Eoa=new $APP.v(null,"Stereographic4","Stereographic4",-287163216,null),Foa=new $APP.v(null,"Voxel","Voxel",1540726319,null),Goa=new $APP.v(null,
"Clamp","Clamp",976282718,null),Hoa=new $APP.v(null,"Move","Move",-687448615,null),Ioa=new $APP.v("mathbox.primitives","Array","mathbox.primitives/Array",-313915872,null),Joa=new $APP.v(null,"Split","Split",-1276645785,null),Koa=new $APP.v(null,"Subdivide","Subdivide",-462061977,null),Loa=new $APP.v(null,"Present","Present",-111102675,null),Moa=new $APP.v(null,"Compose","Compose",-248875139,null),Noa=new $APP.v(null,"Join","Join",767879419,null),Ooa=new $APP.v(null,"Interval","Interval",1278783288,
null),Poa=new $APP.v("mathbox.primitives","Inherit","mathbox.primitives/Inherit",-191332945,null),Qoa=new $APP.v(null,"Surface","Surface",1673998871,null),Roa=new $APP.v(null,"Spread","Spread",-1805618163,null),Soa=new $APP.v(null,"Unit","Unit",1086897223,null),Toa=new $APP.v(null,"Inherit","Inherit",-1912525274,null),Uoa=new $APP.v("mathbox.primitives","Vertex","mathbox.primitives/Vertex",-335881150,null),Q$=new $APP.K(null,"container","container",-1736937707),Voa=new $APP.K(null,"containerClass",
"containerClass",-101509595),Woa=new $APP.v("mathbox.primitives","Vector","mathbox.primitives/Vector",1032645708,null),Xoa=new $APP.v(null,"Swizzle","Swizzle",450790761,null),Yoa=new $APP.v(null,"Retext","Retext",571350357,null),Zoa=new $APP.v("mathbox.core","MathBox","mathbox.core/MathBox",-1451256013,null),$oa=new $APP.v(null,"View","View",-131475192,null),apa=new $APP.v("mathbox.primitives","Polar","mathbox.primitives/Polar",-1749556723,null),bpa=new $APP.v(null,"Scale","Scale",662043888,null),
cpa=new $APP.v(null,"Play","Play",3494344,null),dpa=new $APP.v(null,"Resample","Resample",-1271815010,null),epa=new $APP.v("mathbox.primitives","Text","mathbox.primitives/Text",-1961772649,null),fpa=new $APP.v(null,"Grid","Grid",-593239492,null),gpa=new $APP.v("mathbox.primitives","Memo","mathbox.primitives/Memo",-500462083,null),hpa=new $APP.v("mathbox.primitives","Camera","mathbox.primitives/Camera",-1433074788,null),ipa=new $APP.v("mathbox.primitives","Label","mathbox.primitives/Label",-1901552196,
null),jpa=new $APP.v("mathbox.primitives","Dom","mathbox.primitives/Dom",-2079934705,null),kpa=new $APP.v(null,"Transpose","Transpose",213658457,null),lpa=new $APP.v("mathbox.primitives","Cartesian4","mathbox.primitives/Cartesian4",115701845,null),mpa=new $APP.v(null,"Readback","Readback",-1069768581,null),npa=new $APP.v("mathbox.primitives","Group","mathbox.primitives/Group",-1836231535,null),opa=new $APP.v("mathbox.primitives","Retext","mathbox.primitives/Retext",750297308,null),ppa=new $APP.v("mathbox.primitives",
"Surface","mathbox.primitives/Surface",1749844142,null),qpa=new $APP.v("mathbox.primitives","Face","mathbox.primitives/Face",956501375,null),rpa=new $APP.v(null,"Slide","Slide",1579331222,null),spa=new $APP.v(null,"Line","Line",-1076951502,null),tpa=new $APP.v(null,"Polar","Polar",-382168682,null),upa=new $APP.v(null,"Area","Area",1860906700,null),vpa=new $APP.v(null,"Label","Label",-2133777657,null),wpa=new $APP.v("mathbox.primitives","Point","mathbox.primitives/Point",-2035787060,null),xpa=new $APP.v("mathbox.primitives",
"Layer","mathbox.primitives/Layer",-1606831668,null),ypa=new $APP.v("mathbox.primitives","Step","mathbox.primitives/Step",-181856637,null),zpa=new $APP.v("mathbox.primitives","Mask","mathbox.primitives/Mask",-149597162,null),Apa=new $APP.v(null,"Clock","Clock",-1252752132,null),R$=new $APP.v(null,"props","props",2093813254,null),Bpa=new $APP.K(null,"rotate-speed","rotate-speed",-564390296),S$=new $APP.v(null,"mathbox.core","mathbox.core",-1346776612,null),Cpa=new $APP.v(null,"Rtt","Rtt",-483528305,
null),Dpa=new $APP.v(null,"Cartesian","Cartesian",-1514043068,null),Epa=new $APP.v("mathbox.primitives","Html","mathbox.primitives/Html",-1603447226,null),Fpa=new $APP.v("mathbox.primitives","Axis","mathbox.primitives/Axis",917185793,null),Gpa=new $APP.v("mathbox.primitives","Spread","mathbox.primitives/Spread",1809426052,null),Hpa=new $APP.v(null,"Now","Now",1010719241,null),T$=new $APP.K(null,"\x3e","\x3e",-555517146),Ipa=new $APP.v("mathbox.primitives","Format","mathbox.primitives/Format",-1307425389,
null),Jpa=new $APP.K(null,"max-distance","max-distance",848042358),Kpa=new $APP.v(null,"Slice","Slice",-1270834964,null),Lpa=new $APP.v(null,"Volume","Volume",1797394167,null),Mpa=new $APP.v(null,"Repeat","Repeat",-1413718092,null),Npa=new $APP.v("mathbox.primitives","Subdivide","mathbox.primitives/Subdivide",-470832642,null),Opa=new $APP.v("mathbox.primitives","Strip","mathbox.primitives/Strip",2075766272,null),Ppa=new $APP.v(null,"Fragment","Fragment",388889675,null),U$=new $APP.K(null,"threestrap",
"threestrap",791250519);var dna=$APP.c2(2,{});var V$=$APP.c2(526,{});var Qpa=$APP.c2(527,{});var W$=new $APP.N(null,4,5,$APP.O,[L$,O$,N$,M$],null);var X$=new $APP.n(null,3,[qoa,new $APP.N(null,3,5,$APP.O,["core","controls","cursor"],null),O$,new $APP.n(null,1,[Rna,Qpa.OrbitControls],null),Una,$APP.$f],null),Y$=function Y$(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=1<c.length?new $APP.Fd(c.slice(1),0,null):null;return Y$.A(arguments[0],c)};
Y$.A=function(a,b){var c=$APP.ag(a);a=$APP.Re.j(c,Q$);var d=$APP.Re.j(c,U$);c=$APP.Ni.v($APP.nm.A(c,Q$,$APP.F([U$])),goa,d);if(null==a)return $APP.Nh.j(new $APP.N(null,3,5,$APP.O,[T$,V$.ContainedMathbox,c],null),b);if($APP.Ee(a))return a=$APP.Ni.A(c,Cna,$APP.Mr.o(a),$APP.F([poa,$APP.bia.o(a),Voa,$APP.Ht.o(a)])),$APP.Nh.j(new $APP.N(null,3,5,$APP.O,[T$,V$.ContainedMathbox,a],null),b);if(a instanceof HTMLElement)return $APP.Nh.j(new $APP.N(null,3,5,$APP.O,[T$,V$.Mathbox,c],null),b);throw $APP.zm.j("Unsupported container : ",
new $APP.n(null,1,[Q$,a],null));};Y$.B=1;Y$.F=function(a){var b=$APP.y(a);a=$APP.z(a);return this.A(b,a)};var Z$=function Z$(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=1<c.length?new $APP.Fd(c.slice(1),0,null):null;return Z$.A(arguments[0],c)};
Z$.A=function(a,b){var c=$APP.f3.useState(null),d=$APP.D.v(c,0,null);c=$APP.D.v(c,1,null);var e=$APP.Oi(a,W$);a=$APP.wg.v($APP.nm,a,W$);e=new $APP.N(null,2,5,$APP.O,[e,a],null);a=$APP.D.v(e,0,null);e=$APP.D.v(e,1,null);c=$APP.jo.v($APP.Ni.v(e,M$,c),U$,$APP.pm.j($APP.mm,X$));ana(d,M$.o(a));ena(d,L$.o(a));e=O$.o(a);var f=$APP.ag(e);e=$APP.Re.j(f,Jpa);f=$APP.Re.j(f,Bpa);$APP.f3.useEffect(J$(d,"maxDistance",e),[d,e]);$APP.f3.useEffect(J$(d,"rotateSpeed",f),[d,f]);fna(d,N$.o(a));return $APP.Nh.j(new $APP.N(null,
2,5,$APP.O,[Y$,c],null),b)};Z$.B=1;Z$.F=function(a){var b=$APP.y(a);a=$APP.z(a);return this.A(b,a)};var $$=function $$(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=1<c.length?new $APP.Fd(c.slice(1),0,null):null;return $$.A(arguments[0],c)};$$.A=function(a,b){return $APP.Nh.j(new $APP.N(null,3,5,$APP.O,[Tna,Z$,a],null),b)};$$.B=1;$$.F=function(a){var b=$APP.y(a);a=$APP.z(a);return this.A(b,a)};var Rpa=I$(V$.Group),Spa=I$(V$.Inherit),Tpa=I$(V$.Unit);var Upa=I$(V$.Camera);var Vpa=I$(V$.Area),Wpa=I$(V$.Array),Xpa=I$(V$.Interval),Ypa=I$(V$.Matrix),Zpa=I$(V$.Scale),$pa=I$(V$.Volume),aqa=I$(V$.Voxel);var bqa=I$(V$.Axis),cqa=I$(V$.Face),dqa=I$(V$.Grid),eqa=I$(V$.Line),fqa=I$(V$.Point),gqa=I$(V$.Strip),hqa=I$(V$.Surface),iqa=I$(V$.Ticks),jqa=I$(V$.Vector);var kqa=I$(V$.Clamp),lqa=I$(V$.Grow),mqa=I$(V$.Join),nqa=I$(V$.Lerp),oqa=I$(V$.Memo),pqa=I$(V$.Readback),qqa=I$(V$.Repeat),rqa=I$(V$.Resample),sqa=I$(V$.Slice),tqa=I$(V$.Split),uqa=I$(V$.Spread),vqa=I$(V$.Subdivide),wqa=I$(V$.Swizzle),xqa=I$(V$.Transpose);var yqa=I$(V$.Dom),zqa=I$(V$.Html);var Aqa=I$(V$.Move),Bqa=I$(V$.Play),Cqa=I$(V$.Present),Dqa=I$(V$.Reveal),Eqa=I$(V$.Slide),Fqa=I$(V$.Step);var Gqa=I$(V$.Compose),Hqa=I$(V$.Rtt);var Iqa=I$(V$.Shader);var Jqa=I$(V$.Format),Kqa=I$(V$.Label),Lqa=I$(V$.Retext),Mqa=I$(V$.Text);var Nqa=I$(V$.Clock),Oqa=I$(V$.Now);var Pqa=I$(V$.Fragment),Qqa=I$(V$.Layer),Rqa=I$(V$.Mask),Sqa=I$(V$.Transform),Tqa=I$(V$.Transform4),Uqa=I$(V$.Vertex);var Vqa=I$(V$.Cartesian),Wqa=I$(V$.Cartesian4),Xqa=I$(V$.Polar),Yqa=I$(V$.Spherical),Zqa=I$(V$.Stereographic),$qa=I$(V$.Stereographic4),ara=I$(V$.View);var bra=$APP.yy(new $APP.n(null,2,[$APP.ve(eoa,new $APP.n(null,1,[$APP.X,"Default `:threestrap` options for the [[MathBox]] component."],null)),new $APP.n(null,3,[$APP.T,sna,$APP.xy,X$,$APP.ib,new $APP.n(null,1,[$APP.X,"Default `:threestrap` options for the [[MathBox]] component."],null)],null),$APP.ve(Mna,new $APP.n(null,3,[$APP.V,$APP.P($APP.el,$APP.P(new $APP.N(null,3,5,$APP.O,[R$,$APP.Jk,K$],null))),$APP.X,'Component that configures a MathBox-backed canvas and reactively mounts all\n  children into the canvas.\n\n  Supports the following options:\n\n  - `:threestrap`: these options are passed directly to the [mathbox\n    constructor](https://github.com/unconed/mathbox#basic-usage) on instantiation;\n    these are in turn passed along to Threestrap\'s `Bootstrap` constructor.\n    See [this page](https://github.com/unconed/threestrap#plugins) for an example\n    of what to pass and why.\n\n  - `:renderer`: optional map with `:background-color` and `:background-opacity`\n    keys. Updating these will update the settings without a re-render.\n\n  - `:controls`: optional map with `:max-distance` and `:rotate-speed` keys.\n    Updating these will update the settings on the registered controls without a\n    re-render.\n\n  - `:on`: optional map of type {\x3cevent-name\x3e (fn [event three] ,,,)} On mount,\n    each event will be bound via `mathbox.three.on`, as described in [Threestrap\'s\n    docs](https://github.com/unconed/threestrap#events).\n\n  - `:ref`: a 1-arg function that receives the underlying mathbox instance\n    whenever it changes. Note that you may receive `nil` and should guard against\n    it.\n\n  As well as all options used to configure the [base/root\n  component](https://github.com/unconed/mathbox/blob/master/docs/primitives.md#base/root). (The\n  format of each following line is \x3ckeyword\x3e: \x3cdefault\x3e (\x3ctype\x3e) -\n  \x3cdescription\x3e.)\n\n  - `:camera`: `"[camera]"` (select) - Active camera\n  - `:classes`: `[]` (string array) - Custom classes, e.g. `["big"]`\n  - `:focus`: `1` (nullable number) - Camera focus distance in world units\n  - `:fov`: `null` (nullable number) - (Vertical) Field-of-view to calibrate units for (degrees), e.g. `60`\n  - `:id`: `null` (nullable string) - Unique ID, e.g. `"sampler"`\n  - `:pass`: `"view"` (vertexPass) - Vertex pass (data, view, world, eye)\n  - `:scale`: `null` (nullable number) - (Vertical) Reference scale of viewport in pixels, e.g. `720`\n  - `:speed`: `1` (number) - Global speed',
$APP.yJ,new $APP.n(null,6,[$APP.ME,!0,$APP.Bv,1,$APP.qR,1,$APP.tN,new $APP.N(null,1,5,$APP.O,[$APP.P(R$,K$)],null),$APP.V,$APP.P(new $APP.N(null,3,5,$APP.O,[R$,$APP.Jk,K$],null)),$APP.$R,$APP.P(null)],null)],null)),new $APP.n(null,3,[$APP.T,Zoa,$APP.xy,$$,$APP.ib,new $APP.n(null,2,[$APP.V,$APP.P(new $APP.N(null,3,5,$APP.O,[R$,$APP.Jk,K$],null)),$APP.X,'Component that configures a MathBox-backed canvas and reactively mounts all\n  children into the canvas.\n\n  Supports the following options:\n\n  - `:threestrap`: these options are passed directly to the [mathbox\n    constructor](https://github.com/unconed/mathbox#basic-usage) on instantiation;\n    these are in turn passed along to Threestrap\'s `Bootstrap` constructor.\n    See [this page](https://github.com/unconed/threestrap#plugins) for an example\n    of what to pass and why.\n\n  - `:renderer`: optional map with `:background-color` and `:background-opacity`\n    keys. Updating these will update the settings without a re-render.\n\n  - `:controls`: optional map with `:max-distance` and `:rotate-speed` keys.\n    Updating these will update the settings on the registered controls without a\n    re-render.\n\n  - `:on`: optional map of type {\x3cevent-name\x3e (fn [event three] ,,,)} On mount,\n    each event will be bound via `mathbox.three.on`, as described in [Threestrap\'s\n    docs](https://github.com/unconed/threestrap#events).\n\n  - `:ref`: a 1-arg function that receives the underlying mathbox instance\n    whenever it changes. Note that you may receive `nil` and should guard against\n    it.\n\n  As well as all options used to configure the [base/root\n  component](https://github.com/unconed/mathbox/blob/master/docs/primitives.md#base/root). (The\n  format of each following line is \x3ckeyword\x3e: \x3cdefault\x3e (\x3ctype\x3e) -\n  \x3cdescription\x3e.)\n\n  - `:camera`: `"[camera]"` (select) - Active camera\n  - `:classes`: `[]` (string array) - Custom classes, e.g. `["big"]`\n  - `:focus`: `1` (nullable number) - Camera focus distance in world units\n  - `:fov`: `null` (nullable number) - (Vertical) Field-of-view to calibrate units for (degrees), e.g. `60`\n  - `:id`: `null` (nullable string) - Unique ID, e.g. `"sampler"`\n  - `:pass`: `"view"` (vertexPass) - Vertex pass (data, view, world, eye)\n  - `:scale`: `null` (nullable number) - (Vertical) Reference scale of viewport in pixels, e.g. `720`\n  - `:speed`: `1` (number) - Global speed'],
null)],null)],null),$APP.cr(S$,null)),cra=$APP.yy($APP.ti([Xoa,Roa,Cpa,Jna,toa,upa,hna,Yoa,soa,Koa,Lpa,rpa,Coa,cpa,Ana,Qoa,Dpa,vpa,spa,woa,tpa,Goa,gna,Toa,Pna,Doa,tna,wna,koa,Loa,Foa,Lna,bpa,$oa,Yna,Qna,nna,Joa,Hoa,Sna,fpa,Soa,vna,Noa,kpa,Mpa,mpa,Ooa,Bna,Eoa,qna,Ena,una,Ppa,xoa,Moa,doa,Hpa,dpa,Kpa,Vna,zoa,Apa,lna],[new $APP.n(null,3,[$APP.T,boa,$APP.xy,wqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,Gpa,$APP.xy,uqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,noa,$APP.xy,Hqa,$APP.ib,$APP.$f],
null),new $APP.n(null,3,[$APP.T,Ioa,$APP.xy,Wpa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,qpa,$APP.xy,cqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,ooa,$APP.xy,Vpa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,zna,$APP.xy,Sqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,opa,$APP.xy,Lqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,wpa,$APP.xy,fqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,Npa,$APP.xy,vqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,hoa,$APP.xy,$pa,
$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,Xna,$APP.xy,Eqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,coa,$APP.xy,Ypa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,xna,$APP.xy,Bqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,voa,$APP.xy,Tqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,ppa,$APP.xy,hqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,ina,$APP.xy,Vqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,ipa,$APP.xy,Kqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,
joa,$APP.xy,eqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,zpa,$APP.xy,Rqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,apa,$APP.xy,Xqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,pna,$APP.xy,kqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,Aoa,$APP.xy,iqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,Poa,$APP.xy,Spa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,Epa,$APP.xy,zqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,Fna,$APP.xy,lqa,$APP.ib,$APP.$f],null),new $APP.n(null,
3,[$APP.T,epa,$APP.xy,Mqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,Opa,$APP.xy,gqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,lpa,$APP.xy,Wqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,$na,$APP.xy,Cqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,roa,$APP.xy,aqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,Kna,$APP.xy,Iqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,rna,$APP.xy,Zpa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,ona,$APP.xy,ara,$APP.ib,$APP.$f],null),
new $APP.n(null,3,[$APP.T,Ipa,$APP.xy,Jqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,hpa,$APP.xy,Upa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,aoa,$APP.xy,Zqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,uoa,$APP.xy,tqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,Dna,$APP.xy,Aqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,Fpa,$APP.xy,bqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,yna,$APP.xy,dqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,jna,$APP.xy,Tpa,$APP.ib,
$APP.$f],null),new $APP.n(null,3,[$APP.T,Woa,$APP.xy,jqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,Ona,$APP.xy,mqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,ioa,$APP.xy,xqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,Boa,$APP.xy,qqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,Ina,$APP.xy,pqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,Wna,$APP.xy,Xpa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,Uoa,$APP.xy,Uqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,kna,$APP.xy,
$qa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,Hna,$APP.xy,Dqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,yoa,$APP.xy,nqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,gpa,$APP.xy,oqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,Nna,$APP.xy,Pqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,xpa,$APP.xy,Qqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,Gna,$APP.xy,Gqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,jpa,$APP.xy,yqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,
moa,$APP.xy,Oqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,mna,$APP.xy,rqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,Zna,$APP.xy,sqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,npa,$APP.xy,Rpa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,ypa,$APP.xy,Fqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,loa,$APP.xy,Nqa,$APP.ib,$APP.$f],null),new $APP.n(null,3,[$APP.T,foa,$APP.xy,Yqa,$APP.ib,$APP.$f],null)]),$APP.cr(P$,null));
$APP.Ny(new $APP.n(null,1,[$APP.Sr,new $APP.n(null,2,[S$,bra,P$,cra],null)],null));
}).call(this);